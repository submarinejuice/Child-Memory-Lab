"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2445],{91642:function(e,t,l){l.d(t,{Z:function(){return g}});var s=l(57437),a=l(2265),i=l(99376),o=l(39857),r=l(33145),n=l(94315),c=l(36760),d=l.n(c),u=l(90412),x=l(77165),m=l(75945),h=l(87233),p=l(79581),f=l(43836);l(83079);var v=(0,l(12119).$)("e1c60cb237fa624e438d065d543bec97b3514034"),b=l(63246),w=l(7189),g=e=>{let{page:t,onClose:l}=e,{title:c,slug:g,recordType:j,type:N,id:k,cardImage:y,subtitleMetadata:C}=t,{collections:D,user:_,setCollections:Z,updateCollectionData:S}=(0,a.useContext)(w.R),P=(0,i.useRouter)(),R=k,A=j||N,I="GlossaryItemRecord"===A,T=g.startsWith("glossary/")?"/".concat(g):"glossary/".concat(g),E=I?T:g,F=D.sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()),[L,M]=(0,a.useState)([]),[$,z]=(0,a.useState)(!1),B=async()=>{let e=await v(t.slug,A);if(e.page)return e.page},U=async()=>{z(!0);let e=await B(),t=await (0,u.Z)(D,_,Z,e);if(t){let e=(0,b.vd)(t);P.push(e)}},q=async e=>{e.preventDefault(),e.stopPropagation(),z(!0);let t=await B();R=R||(null==t?void 0:t.id),L.map(async e=>{var l;let s=D.find(t=>t.id===e),a=I?t.description:"",i=s.collectionData.resources.map(e=>parseInt(e.unique_id));s.collectionData.resources.push({title:c,id:R,unique_id:(Math.max(...i,0)+1).toString(),type:A,private:!1,slug:E,note:"",cardImage:null==t?void 0:null===(l=t.cardImage)||void 0===l?void 0:l.url,glossaryDescription:a,context:null==t?void 0:t.context}),S(s,{resources:s.collectionData.resources});let o=(0,b.vd)(s);P.push(o)})},H=(e,t)=>{for(let l of e.collectionData.resources)if(l.id===t)return!0;return!1},Q=(e,t)=>{e.preventDefault(),e.stopPropagation(),M(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t])};return(0,s.jsxs)("div",{className:"CollectionsModal relative z-30",children:[(0,s.jsx)(o.E.div,{initial:{opacity:0},animate:{opacity:.75},exit:{opacity:0},transition:{duration:.3},className:"fixed inset-0 bg-[#001430] transition-opacity brightness-50"}),(0,s.jsx)("div",{className:"modal-content fixed inset-0 z-40 overflow-y-auto",children:(0,s.jsx)("div",{className:"flex min-h-full justify-center p-4 text-center items-center md:p-0 w-full",children:(0,s.jsx)(o.E.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0},transition:{duration:.2},className:d()("max-w-[600px] w-full mx-auto",{"!max-w-[800px]":!I}),children:(0,s.jsxs)("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all my-20 p-5 md:p-8 lg:pt-12",children:[(0,s.jsx)("button",{onClick:e=>l(e),"aria-label":"close",className:"absolute group right-3 top-3 text-blue",children:(0,s.jsx)(x.Z,{className:"h-8 w-8 stroke-text-grey group-hover:stroke-2"})}),(0,s.jsxs)("div",{className:"flex flex-row gap-10",children:[!I&&(0,s.jsx)("div",{className:"ArticleCard flex flex-col items-start hidden sm:block max-w-[330px] bg-off-white w-full rounded-lg overflow-hidden shadow-md not-prose transition-shadow",children:(0,s.jsxs)("div",{className:"flex flex-1 flex-col min-h-[325px] relative",children:[y&&(0,s.jsx)("div",{className:"w-full aspect-[2/1] relative",children:(0,s.jsx)(r.default,{alt:y.alt,src:y.url,fill:!0,className:"w-full max-w-2xl object-cover",placeholder:y.blurUpThumb?"blur":"empty",blurDataURL:y.blurUpThumb})}),(0,s.jsxs)("div",{className:"p-5 relative",children:[(0,s.jsx)("h4",{className:"text-sm text-blue mb-2.5 uppercase",children:t.subtitle}),(0,s.jsx)("h3",{className:"h4 mb-3 line-clamp-3",dangerouslySetInnerHTML:{__html:c}}),C&&(0,s.jsx)("p",{className:"font-bold text-sm mb-5",children:C})]})]})}),(0,s.jsxs)("div",{className:"w-full flex flex-col justify-between gap-5",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"mb-6",children:"Save to collection"}),(0,s.jsx)("ul",{className:"max-h-[255px] overflow-y-auto -mr-4 pr-4",children:F.map(e=>(0,s.jsx)("li",{className:"my-3",children:(0,s.jsxs)("div",{className:"flex text-left flex-row justify-between items-center font-bold text-md w-full",children:[(0,s.jsx)("span",{className:"cursor-pointer",onClick:t=>Q(t,e.id),children:e.collectionData.title}),(0,s.jsxs)("div",{className:"flex items-center gap-0.5 relative",children:[Q&&(0,s.jsx)(m.Z,{onClick:t=>Q(t,e.id),className:d()("stroke-blue h-[26px] w-[26px] cursor-pointer",{"fill-blue":L.includes(e.id)})}),L.includes(e.id)&&(0,s.jsx)(h.Z,{onClick:t=>Q(t,e.id),className:d()("stroke-white cursor-pointer stroke-[3px] h-[13px] w-[13px] absolute right-[41px]")}),(0,s.jsx)(p.Z,{"aria-label":H(e,k)?"In collection":"No in collection",className:d()("h-5 w-5 stroke-2 shrink-0 ml-3",{"fill-blue stroke-blue":H(e,k)})})]})]})},e.id))}),0==F.length&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"font-bold mb-4",children:"You donâ€™t have any collections yet. Click the button below to get started."}),(0,s.jsxs)("p",{children:["For a more detailed explanation, click ",(0,s.jsx)(n.Link,{href:"/resources/2762-creating-collections",className:"text-blue underline",children:"here"}),"."]})]})]}),L.length>0&&(0,s.jsxs)("button",{onClick:q,className:"Button mt-6 flex flex-row items-center gap-2.5 w-fit",disabled:$,children:[$?"Adding to collection...":"Add to collection".concat(L.length>1?"s":""),(0,s.jsx)(f.Z,{className:"h-4 w-4 stroke-[3px]"})]}),0==L.length&&(0,s.jsxs)("button",{onClick:U,disabled:$,className:"Button mt-6 flex flex-row items-center gap-2.5 w-fit",children:[$?"Creating new collection...":"Create new collection",(0,s.jsx)(f.Z,{className:"h-4 w-4 stroke-[3px]"})]})]})]})]})})})})]})}},92445:function(e,t,l){var s=l(57437),a=l(2265),i=l(74146),o=l(94315),r=l(48614),n=l(36760),c=l.n(n),d=l(69390),u=l(79581),x=l(73910),m=l(52350),h=l(91642),p=l(7189),f=l(24978);t.default=e=>{let{subtitle:t,title:l,summary:n,subtitleMetadata:v,url:b,theme:w="grey",type:g,recordType:j,id:N}=e,{user:k,collections:y}=(0,a.useContext)(p.R),[C,D]=(0,a.useState)(!1),[_,Z]=(0,a.useState)(!1),S={title:l,slug:b,type:g,recordType:j,id:N,subtitle:t,subtitleMetadata:v},{selectedData:P,updateSelectedData:R}=(0,m.Q)(),A=null==P?void 0:P.articles[b],I=y.some(e=>e.collectionData.resources.some(e=>e.id===N)),T=e=>{if(e.preventDefault(),e.stopPropagation(),A){let e={articles:P.articles,topics:P.topics};delete e.articles[b],R(e)}else{let e={articles:P.articles,topics:P.topics};e.articles[b]={title:l,added_at:new Date().toISOString(),type:"article",subtitle:t,url:b},R(e)}},E=null;return n&&("string"==typeof n?(n.length<10&&(n=""),E=((e,t)=>{let l=e.split(/\s+/).slice(0,26);return l.length>=26?l.join(" ")+" ...":l.join(" ")})(n,0)):E=(0,s.jsx)(i.Z,{limitedPreview:!0,data:n,noBlocks:!0,makeSpans:!0})),(0,s.jsxs)("div",{className:"TextCard max-w-[500px] md:max-w-full w-full md:w-[calc(50%_-_20px)] lg:w-[calc(33%_-_24px)]",children:[(0,s.jsx)(o.Link,{className:c()("block rounded-lg overflow-hidden hover:shadow-md not-prose transition-shadow",{"bg-off-white":"white"==w,"bg-white":"white"!==w}),href:"/".concat(b).replace(/\/+/g,"/"),children:(0,s.jsxs)("div",{className:"flex flex-1 flex-col min-h-[335px] relative",children:[(0,s.jsxs)("div",{className:"absolute top-3 right-3 z-20",children:[(0,s.jsx)("button",{title:A?"Remove from favourites":"Add to favourites","aria-label":A?"Remove from favourites":"Add to favourites",onClick:e=>{e.preventDefault(),e.stopPropagation(),k?T(e):Z("favourites")},className:c()("transition hover:drop-shadow block rounded-full mb-2 h-10 w-10 flex justify-center items-center group",{"bg-white":"white"===w,"bg-off-white":"white"!==w}),children:(0,s.jsx)(d.Z,{className:c()("transition h-5 w-5 group-hover:stroke-blue stroke-2",{"stroke-grey":!A,"fill-blue stroke-blue group-hover:fill-light-blue group-hover:stroke-light-blue":A})})}),(0,s.jsx)("button",{title:I?"Remove from collection":"Add to collection","aria-label":I?"Remove from collection":"Add to collection",onClick:e=>{e.preventDefault(),e.stopPropagation(),window.dataLayer.push({event:"add_to_collection"}),k?D(!C):Z("collections")},className:c()("transition hover:drop-shadow block rounded-full h-10 w-10 flex justify-center items-center group",{"bg-white":"white"===w,"bg-off-white":"white"!==w}),children:(0,s.jsx)(u.Z,{className:c()("transition h-5 w-5 group-hover:stroke-blue stroke-2",{"stroke-grey":!I,"fill-blue stroke-blue group-hover:fill-light-blue group-hover:stroke-light-blue":I})})})]}),(0,s.jsxs)("div",{className:"p-5 relative",children:[(0,s.jsx)("h4",{className:"text-sm text-blue mb-2.5 uppercase leading-[16.9px] max-w-[90%]",children:t}),(0,s.jsx)("h3",{className:"h4 mb-2 max-w-[90%] line-clamp-2",dangerouslySetInnerHTML:{__html:l}}),v&&(0,s.jsx)("p",{className:"font-bold text-sm mb-5",children:v}),(0,s.jsxs)("div",{className:"flex flex-grow flex-col justify-between mt-4",children:[E&&(0,s.jsx)("p",{className:"text-sm mb-5 leading-[22px]",children:E}),(0,s.jsxs)("span",{className:"nav flex flex-row items-center",children:[E?"Read more":"View details",(0,s.jsx)(x.Z,{className:"h-4 w-4 stroke-blue ml-0.5 stroke-[3px]"})]})]})]})]})}),(0,s.jsxs)(r.M,{children:[C&&(0,s.jsx)(h.Z,{page:S,onClose:e=>{e.preventDefault(),e.stopPropagation(),D(!C)}}),_&&(0,s.jsx)(f.Z,{page:S,onClose:()=>Z(!1),type:_})]})]})}},52350:function(e,t,l){l.d(t,{FavoritesProvider:function(){return d},Q:function(){return u}});var s=l(57437),a=l(2265);l(83079);var i=l(12119),o=(0,i.$)("53007fa925b4a31683f91a92bccba285ec91d584");(0,i.$)("f7c5fb0d269b5254dbf466e799d7135a6cbcc668");var r=(0,i.$)("bf1a04c066b2c0c45778c1546460bc0a9d0a8871"),n=l(20942);let c=(0,a.createContext)(void 0),d=e=>{let{children:t}=e,[l,i]=(0,a.useState)({articles:{},topics:{}}),{session:d,loading:u}=(0,n.v)(),x=async e=>{try{let t=await o(e);i(t.favoritesData)}catch(e){console.error("Failed to load favorites:",e)}};(0,a.useEffect)(()=>{if(d&&!u){var e;x(null==d?void 0:null===(e=d.user)||void 0===e?void 0:e.email)}},[d,u]);let m=async e=>{var t,l;i(e),(null==d?void 0:null===(t=d.user)||void 0===t?void 0:t.email)&&await r(null==d?void 0:null===(l=d.user)||void 0===l?void 0:l.email,e)};return(0,s.jsx)(c.Provider,{value:{selectedData:l,updateSelectedData:m},children:t})},u=()=>{let e=(0,a.useContext)(c);if(!e)throw Error("useFavoritesContext must be used within a FavoritesProvider");return e}}}]);