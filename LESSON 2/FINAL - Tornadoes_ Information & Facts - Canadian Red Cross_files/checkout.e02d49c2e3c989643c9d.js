!function(){var e,t,n,i,s,a={3393:function(e,t,n){var i=n(9658);e.exports={compressPayload:function(e){var t={};return Object.keys(i).forEach((function(n){var s=n,a=i[n];t[s]=e[a]})),t},expandPayload:function(e){var t={},n=["up"],s=Object.keys(e).filter((function(e){return-1===Object.keys(i).indexOf(e)&&!n.includes(e)}));return s.length&&(t.UNMATCHED={},s.forEach((function(n){t.UNMATCHED[n]=e[n]})),t.invalid=!0),Object.keys(i).forEach((function(s){if(!n.includes(s)){var a=s,o=i[s];e[a]&&(t[o]=e[a])}})),t}}},5302:function(e,t,n){"use strict";var i,s=n(2155);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a.apply(null,arguments)}var o=function(e,t){return s.createElement("svg",a({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.4,strokeLinecap:"round",strokeLinejoin:"round",ref:t},e),i||(i=s.createElement("polyline",{points:"6 9 12 15 18 9"})))},r=(0,s.forwardRef)(o),c=(0,s.memo)(r);t.A=c},7998:function(e,t,n){"use strict";var i,s,a,o,r=n(2155);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},c.apply(null,arguments)}var l=function(e,t){return r.createElement("svg",c({width:24,height:24,viewBox:"0 0 24 24",fill:"none",strokeWidth:1.4,stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg",ref:t},e),i||(i=r.createElement("path",{d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z",strokeLinecap:"round",strokeLinejoin:"round"})),s||(s=r.createElement("path",{d:"M9.08984 9.00008C9.32495 8.33175 9.789 7.76819 10.3998 7.40921C11.0106 7.05024 11.7287 6.91902 12.427 7.03879C13.1253 7.15857 13.7587 7.52161 14.2149 8.06361C14.6712 8.60561 14.9209 9.2916 14.9198 10.0001C14.9198 12.0001 11.9198 13.0001 11.9198 13.0001",strokeLinecap:"round",strokeLinejoin:"round"})),a||(a=r.createElement("circle",{cx:12,cy:16.5,r:.5,strokeLinecap:"round",strokeLinejoin:"round"})),o||(o=r.createElement("path",{d:"M11.5049 16L12.5049 17"})))},u=(0,r.forwardRef)(l),d=(0,r.memo)(u);t.A=d},8480:function(e,t,n){"use strict";var i,s,a=n(2155);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o.apply(null,arguments)}var r=function(e,t){return a.createElement("svg",o({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.4,strokeLinecap:"round",strokeLinejoin:"round",ref:t},e),i||(i=a.createElement("line",{x1:18,y1:6,x2:6,y2:18})),s||(s=a.createElement("line",{x1:6,y1:6,x2:18,y2:18})))},c=(0,a.forwardRef)(r),l=(0,a.memo)(c);t.A=l},3325:function(e,t,n){const i=n(7012),s=n(8913),a=n(4025),o=n(2384),r=n(6631),c=n(4776),l=n(7804),u=n(8524),d=n(9576),h=n(9392),m=n(4246),p=n(7958),g=n(8825),y=n(5718),f=n(5199),E=n(2876);e.exports={creditCard:h,applePay:g,googlePay:p,clickToPay:m,ach:a,usBankAccount:o,plaid:r,paypal:u,venmo:d,auBecsDebit:c,ukBacs:l,acss:s,sepa:i,ideal:E,crypto:y,stock:f}},8469:function(e,t,n){"use strict";var i;function s(e,t,n){const s=n-1;switch(e.code){case i.DOWN:return e.preventDefault(),null===t||t+1>s?{currentOptionIdx:0}:{currentOptionIdx:t+1};case i.UP:return e.preventDefault(),null===t||t-1<0?{currentOptionIdx:s}:{currentOptionIdx:t-1};case i.ENTER:return e.preventDefault(),{currentOptionIdx:t,needSelectOption:!0};case i.ESC:return{closeDropdown:!0,currentOptionIdx:null};default:return{currentOptionIdx:null}}}n.d(t,{J:function(){return i},t:function(){return s}}),function(e){e.DOWN="ArrowDown",e.UP="ArrowUp",e.ENTER="Enter",e.ESC="Escape",e.SPACE="Space"}(i||(i={}))},5077:function(e,t,n){"use strict";n.d(t,{s:function(){return a}});var i=n(5723),s=n(851);const a=e=>{const{htmlFor:t,label:n,labelOptional:a,labelSrOnly:o,labelFloating:r,formGroupClass:c,formLabelClass:l,formControlValue:u,children:d,dataQa:h}=e;return(0,i.jsxs)("div",{className:(0,s.A)("form-group",c),children:[d,(0,i.jsxs)("label",{htmlFor:t,className:(0,s.A)("form-label",{"sr-only":o,"is-floating":r,"has-value":u},l),"data-qa":h,children:[n,a&&(0,i.jsxs)("span",{className:"font-weight-400 text-gray-60",children:[" (",a,")"]})]})]})}},5621:function(e,t,n){"use strict";n.d(t,{t:function(){return d}});var i=n(8932),s=n(5723),a=n(851),o=n(2155),r=n(5077),c=n(8056),l=n(2129),u=n(6443);const d=e=>{var{label:t,labelSrOnly:n,labelFloating:d,value:h,autoFocus:m,dataQa:p,dataTestId:g,children:y,className:f,placeholder:E,formGroupClass:S,formLabelClass:v,labelOptional:A,id:C,error:P,customPrefix:N,dataTrackingElementName:b,type:D="text",autoCorrect:T="off",spellCheck:_="false",autoFocusMode:k=c.Q.DESKTOP,setRef:O,autoScroll:I,forceShowPlaceholder:x}=e,w=(0,i.Tt)(e,["label","labelSrOnly","labelFloating","value","autoFocus","dataQa","dataTestId","children","className","placeholder","formGroupClass","formLabelClass","labelOptional","id","error","customPrefix","dataTrackingElementName","type","autoCorrect","spellCheck","autoFocusMode","setRef","autoScroll","forceShowPlaceholder"]);const R=(0,o.useRef)(null);(0,l.f)({ref:R,autoFocus:m,mode:k}),(0,u.Q)(R,{shouldScroll:I,shouldFocus:!0}),(0,o.useImperativeHandle)(O,(()=>R.current),[]);const M=((e,t,n)=>n?e:t?void 0:e)(E,d,x);return(0,s.jsxs)(r.s,{htmlFor:C,label:t,labelSrOnly:n,labelFloating:d,labelOptional:A,formGroupClass:S,formLabelClass:(0,a.A)(v,{"has-error":P}),formControlValue:h,dataQa:p+"-label",children:[N,(0,s.jsx)("input",Object.assign({id:C,className:(0,a.A)("form-control",f,{"has-label-floating":d,"has-error":P}),"aria-invalid":P,ref:R,type:D,placeholder:M,value:h,autoCorrect:T,spellCheck:_,"data-qa":p,"data-testid":g,"data-tracking-element-name":b},w)),y]})}},1430:function(e,t,n){"use strict";n.d(t,{J:function(){return d}});var i=n(5723),s=n(2155);const a=e=>(0,s.useContext)(e);var o=n(8932),r=n(4906);const c=e=>{let{scrollIntoView:t,focus:n}=e;const i=(0,r.M)(),a=(0,s.useRef)(null),c=(0,s.useCallback)((()=>(0,o.sH)(void 0,void 0,void 0,(function*(){yield new Promise((e=>{i.addEventListener("scrollend",e,{once:!0}),setTimeout(e,350)})),n()}))),[i,n]);return(0,s.useEffect)((()=>{a.current={scrollIntoView:t,focus:c}}),[c,t]),a};var l=n(6443);const u=e=>t=>{let{state:n,children:a}=t;const o=(0,s.useRef)(new Set),[r,c]=(0,s.useState)(null),u=(0,s.useRef)(!1),[d,h]=(0,s.useState)(),m=(0,s.useCallback)((()=>{u.current=!0,c(null),h({})}),[]);return(0,s.useEffect)((()=>{if(u.current){for(const e of o.current)if(e.ruleFunction(n)){c(e.ref);break}u.current=!1}}),[n,d]),(0,l.Q)(r,{shouldScroll:!0,shouldFocus:!0}),(0,i.jsx)(e.Provider,{value:{fields:o.current,setTriggered:m},children:a})},d=()=>{const e=(0,s.createContext)({setTriggered:()=>{},fields:new Set});return{useAddFieldToScroll:(t,n)=>((e,t,n)=>{const{fields:i}=a(e);(0,s.useEffect)((()=>{const e={ref:t,ruleFunction:n};if(t.current)return i.add(e),()=>{i.delete(e)}}),[i,t,n])})(e,t,n),useScrollToFieldsTrigger:()=>(e=>{const{setTriggered:t}=a(e);return t})(e),useFakeStripeElement:c,ScrollToFieldsProvider:u(e)}}},7554:function(e,t,n){"use strict";n.d(t,{G:function(){return s},n:function(){return a}});var i=n(2155);const s=(0,i.createContext)(null);function a(){const e=(0,i.useContext)(s);if(!e)throw new Error("CheckoutConfiguration data is not provided");return e}},4906:function(e,t,n){"use strict";n.d(t,{M:function(){return a},U:function(){return s}});var i=n(2155);const s=(0,i.createContext)(null);function a(){const e=(0,i.useContext)(s);if(!e)throw new Error("iframe window is not provided");return e}},1268:function(e,t,n){"use strict";n.d(t,{P:function(){return s}});var i=n(7554);function s(){return(0,i.n)().infrastructureParams.isMobile}},177:function(e,t,n){"use strict";n.d(t,{Qq:function(){return o},Tn:function(){return s},wf:function(){return a}});var i=n(2155);const s=(0,i.createContext)(null);function a(){const e=(0,i.useContext)(s);if(!e)throw new Error("Portal ref was not provided");return e}const o=(0,i.createContext)(null)},6360:function(e,t,n){"use strict";n.d(t,{k:function(){return a}});var i=n(400),s=n(7992);function a(){const e=(0,i.C)(),t=(0,s.Q)();return e&&!1!==t}},400:function(e,t,n){"use strict";n.d(t,{C:function(){return a},m:function(){return s}});var i=n(2155);const s=(0,i.createContext)(!1);function a(){return(0,i.useContext)(s)}},7992:function(e,t,n){"use strict";n.d(t,{C:function(){return s},Q:function(){return a}});var i=n(2155);const s=(0,i.createContext)(null);function a(){return(0,i.useContext)(s)}},1487:function(e,t,n){"use strict";n.d(t,{j:function(){return a}});var i=n(4390),s=n(7554);function a(){return(0,s.n)().infrastructureParams.OS===i.lS.IOS}},8056:function(e,t,n){"use strict";var i;n.d(t,{Q:function(){return i}}),function(e){e.DESKTOP="desktop",e.MOBILE="mobile",e.ALL="all"}(i||(i={}))},2129:function(e,t,n){"use strict";n.d(t,{f:function(){return u}});var i=n(2155),s=n(1268),a=n(6360),o=n(1487),r=n(8056),c=n(5291),l=n(5955);const u=e=>{const{ref:t,autoFocus:n,mode:u,preventScroll:d=!1}=e,h=(0,a.k)(),m=(0,s.P)(),p=(0,o.j)(),g=(0,l.$)(),y=(0,c.a)();(0,i.useEffect)((()=>{if(!g&&n&&h&&y.current&&((e,t,n)=>e===r.Q.DESKTOP?!t:e!==r.Q.MOBILE||t&&!n)(u,m,p)){if(!t.current)throw new Error("ref is not provided");(()=>{const e=()=>{var e;null===(e=t.current)||void 0===e||e.focus({preventScroll:d})};"function"==typeof queueMicrotask?queueMicrotask(e):Promise.resolve().then(e)})()}}),[t,n,h,m,p,g,y,u,d])}},9873:function(e,t,n){"use strict";n.d(t,{l:function(){return s}});var i=n(7554);const s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=(0,i.n)(),{browser:s,browserVersion:a}=n.infrastructureParams;if(s!==e)return!1;const o=Number(a);return!(Number.isNaN(o)||o<t)}},7730:function(e,t,n){"use strict";n.d(t,{D:function(){return s}});var i=n(2155);function s(e){const t=(0,i.useRef)(),n=(0,i.useRef)(e);(0,i.useEffect)((()=>{n.current=e}),[e]);const s=(0,i.useCallback)((()=>{window.clearTimeout(t.current)}),[]),a=(0,i.useCallback)((function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;s(),i?t.current=window.setTimeout((()=>{n.current(...e)}),i):n.current(...e)}),[s]);return(0,i.useEffect)((()=>s),[s]),{set:a,clear:s}}},5291:function(e,t,n){"use strict";n.d(t,{a:function(){return s}});var i=n(2155);function s(){const e=(0,i.useRef)(!1);return(0,i.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),e}},6443:function(e,t,n){"use strict";n.d(t,{Q:function(){return s}});var i=n(2155);const s=(e,t)=>{(0,i.useEffect)((()=>{var n;(null==t?void 0:t.shouldScroll)&&(null===(n=null==e?void 0:e.current)||void 0===n?void 0:n.scrollIntoView)&&(e.current.scrollIntoView({behavior:"smooth",block:"center"}),t.shouldFocus&&e.current.focus({preventScroll:!0}))}),[null==t?void 0:t.shouldFocus,null==t?void 0:t.shouldScroll,e])}},5955:function(e,t,n){"use strict";n.d(t,{$:function(){return s}});var i=n(7554);const s=()=>(0,i.n)().infrastructureParams.showcase},7485:function(e,t,n){"use strict";n.d(t,{Y:function(){return a}});var i=n(2155),s=n(6308);function a(){const e=(0,i.useRef)();return void 0===e.current&&(e.current=(0,s.i)()),e.current}},2029:function(e,t,n){"use strict";(this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,a){function o(e){try{c(i.next(e))}catch(e){a(e)}}function r(e){try{c(i.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,r)}c((i=i.apply(e,t||[])).next())}))})(void 0,void 0,void 0,(function*(){if(void 0===window.ResizeObserver){window.ResizeObserver=class{observe(){}unobserve(){}disconnect(){}};const e=yield n.e(772).then(n.bind(n,2772));window.ResizeObserver=e.ResizeObserver}}))},4902:function(e,t,n){"use strict";n.d(t,{U:function(){return S}});var i,s=n(8932),a=n(5723),o=n(2155);function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r.apply(null,arguments)}var c=function(e,t){return o.createElement("svg",r({fill:"none",height:24,viewBox:"0 0 24 24",width:24,strokeWidth:1.4,xmlns:"http://www.w3.org/2000/svg",ref:t},e),i||(i=o.createElement("g",{stroke:"currentColor"},o.createElement("g",{strokeLinecap:"round",strokeLinejoin:"round"},o.createElement("path",{d:"m12 22c5.5228 0 10-4.4772 10-10 0-5.52285-4.4772-10-10-10-5.52285 0-10 4.47715-10 10 0 5.5228 4.47715 10 10 10z"}),o.createElement("path",{d:"m12 8v4"}),o.createElement("circle",{cx:12,cy:15.5,r:.5})),o.createElement("path",{d:"m11.5049 15 1 1"}))))},l=(0,o.forwardRef)(c),u=(0,o.memo)(l),d=n(6706),h=n(851),m=n(1268),p=n(177),g=n(1130),y=n(9453);const f=["top","bottom"],E=e=>{var{className:t,children:n,showTooltip:i,dataQa:o}=e,r=(0,s.Tt)(e,["className","children","showTooltip","dataQa"]);const c=(0,g.Q)(),l=(0,y.t)(),E=(0,m.P)(),S=(0,p.wf)(),v=i?"manual":"click";return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(d.S,{content:n,trigger:v,manualOpen:i,className:E?"ui-tooltip-mobile":"ui-tooltip-desktop",placement:c?"left":"right",fallbackPlacements:f,rootContainer:S,"data-qa":"tooltip-error-label",children:(0,a.jsx)("button",Object.assign({type:"button",className:(0,h.A)("btn-icon font-size-18 text-red-60",t),"aria-label":l.translate("common.errorTooltipButtonAriaLabel"),"data-qa":o?`${o}-tooltip-error-trigger`:"tooltip-error-trigger"},r,{children:(0,a.jsx)(u,{className:"icon-stroke d-block","aria-hidden":!0})}))})})},S=(0,o.memo)(E)},7289:function(e,t,n){"use strict";n.d(t,{FM:function(){return s},pv:function(){return a},rp:function(){return o}});var i=n(1430);const{useAddFieldToScroll:s,useScrollToFieldsTrigger:a,ScrollToFieldsProvider:o}=(0,i.J)()},6922:function(e,t,n){"use strict";n.d(t,{FM:function(){return s},pv:function(){return a},rp:function(){return o}});var i=n(1430);const{useAddFieldToScroll:s,useScrollToFieldsTrigger:a,ScrollToFieldsProvider:o}=(0,i.J)()},1130:function(e,t,n){"use strict";n.d(t,{Q:function(){return r}});var i=n(2155),s=n(9453),a=n(2532),o=n(893);function r(){const e=(0,s.t)();return(0,i.useMemo)((()=>(0,a.iJ)(e.language)===o.p.RTL),[e.language])}},6821:function(e,t,n){"use strict";const i=(()=>{try{return window}catch(e){return self}})(),s=(i.FUN_ENV,i.FUN_HOST||"https://api.fundraiseup.com"),a=(i.FUN_CDN,i.FUN_STATIC||"https://static.fundraiseup.com");var o,r;i.FUN_STATIC_S3,n.p=a+("/"===a.slice(-1)?"":"/"),function(e){e[e.COMPANY_NOT_FOUND=1]="COMPANY_NOT_FOUND",e[e.UNSUPPORTED_STORAGE_TYPE=2]="UNSUPPORTED_STORAGE_TYPE",e[e.BACKDROP_CONTAINER_IS_NOT_AVAILABLE=3]="BACKDROP_CONTAINER_IS_NOT_AVAILABLE",e[e.EXPERIMENT_ALREADY_STARTED=4]="EXPERIMENT_ALREADY_STARTED",e[e.INVALID_VARIANT_NAME_FOR_EXPERIMENT=5]="INVALID_VARIANT_NAME_FOR_EXPERIMENT",e[e.STORED_SETTINGS_MUST_BE_AN_OBJECT=6]="STORED_SETTINGS_MUST_BE_AN_OBJECT",e[e.INVALID_DISTRIBUTION_IN_EXPERIMENT=7]="INVALID_DISTRIBUTION_IN_EXPERIMENT",e[e.NO_SUCH_SETTINGS_FOR_EXPERIMENT=8]="NO_SUCH_SETTINGS_FOR_EXPERIMENT",e[e.NO_SUCH_EXPERIMENT=9]="NO_SUCH_EXPERIMENT",e[e.UNSUPPORTED_TYPE_OF_STORAGE=10]="UNSUPPORTED_TYPE_OF_STORAGE",e[e.FORM_OF_THIS_TYPE_HAS_NOT_BEEN_REGISTERED=11]="FORM_OF_THIS_TYPE_HAS_NOT_BEEN_REGISTERED",e[e.NO_FORM_ASSOCIATED_WITH_THIS_KEY_WAS_CREATED=12]="NO_FORM_ASSOCIATED_WITH_THIS_KEY_WAS_CREATED",e[e.UNSUPPORTED_LOCALE_CONFIG_TYPE=13]="UNSUPPORTED_LOCALE_CONFIG_TYPE",e[e.SERVICE_HAS_ALREADY_BEEN_PROVIDED=14]="SERVICE_HAS_ALREADY_BEEN_PROVIDED",e[e.MUST_PROVIDE_COMPANY_KEY=15]="MUST_PROVIDE_COMPANY_KEY",e[e.TRACKER_ALREADY_STARTED=16]="TRACKER_ALREADY_STARTED"}(o||(o={}));!function(e){e[e.BACKDROP=1]="BACKDROP",e[e.STATIC_CONFIG=2]="STATIC_CONFIG",e[e.KEYS_KEEPER=3]="KEYS_KEEPER",e[e.COLLECTOR=4]="COLLECTOR",e[e.RESOLVER=5]="RESOLVER",e[e.DEBUG=6]="DEBUG",e[e.TRACKING_URLS=7]="TRACKING_URLS",e[e.FUN_SESSION_STORAGE=8]="FUN_SESSION_STORAGE",e[e.EMBED_ELEMENTS_API=9]="EMBED_ELEMENTS_API",e[e.EMBED_CHECKOUT_API=10]="EMBED_CHECKOUT_API",e[e.EMBED_INTERNAL_API=11]="EMBED_INTERNAL_API",e[e.EMBED_FORMS_API=12]="EMBED_FORMS_API",e[e.EMBED_CONFIG=13]="EMBED_CONFIG",e[e.EMBED_TRACKER=14]="EMBED_TRACKER",e[e.FUN_EXPERIMENTS_STORAGE=15]="FUN_EXPERIMENTS_STORAGE",e[e.CHECKOUT=16]="CHECKOUT",e[e.EMBED_ELEMENTS_SERVICE=17]="EMBED_ELEMENTS_SERVICE",e[e.ELEMENTS_API=18]="ELEMENTS_API",e[e.EVENT_EMITTER=19]="EVENT_EMITTER",e[e.HTML_ELEMENT_STYLE_MANAGER=20]="HTML_ELEMENT_STYLE_MANAGER",e[e.FUN_TRACKER_STORAGE=21]="FUN_TRACKER_STORAGE",e[e.FUN_STAT_STORAGE=22]="FUN_STAT_STORAGE",e[e.FUN_COOKIES_MIGRATOR=23]="FUN_COOKIES_MIGRATOR",e[e.FUN_COOKIES_MANAGER=24]="FUN_COOKIES_MANAGER",e[e.USER_SESSION=25]="USER_SESSION",e[e.FUN_DEBUG_STORAGE=26]="FUN_DEBUG_STORAGE",e[e.SENTRY_CLIENT=27]="SENTRY_CLIENT",e[e.EXPERIMENTS_CONTROLLER=28]="EXPERIMENTS_CONTROLLER",e[e.CHECKOUT_SKELETON=29]="CHECKOUT_SKELETON",e[e.EMBED_ELEMENTS_URL_API=30]="EMBED_ELEMENTS_URL_API",e[e.CHECKOUT_STEPLESS=31]="CHECKOUT_STEPLESS",e[e.CONSENT_MANAGER_API=32]="CONSENT_MANAGER_API",e[e.GOALS_LOADER=33]="GOALS_LOADER"}(r||(r={}));var c=n(8932);n(2029);class l extends Error{constructor(){super("Checkout render aborted")}}var u,d,h,m,p,g,y=n(588);class f{constructor(e){this.window=e,this.hideTimeout=null,this.hiddenElementsList=[],this.elementsSelectorList=[".s.u.m.o"]}hideAll(){const e=()=>{this.elementsSelectorList.forEach((e=>{this.window.document.querySelectorAll(e).forEach(this.hideNode.bind(this))}))};e(),this.hideTimeout=this.window.setInterval(e,1e3)}restoreAll(){this.hideTimeout&&clearTimeout(this.hideTimeout),this.hiddenElementsList.forEach((e=>{let{node:t,style:n}=e;null===n?t.removeAttribute("style"):t.setAttribute("style",n)})),this.hiddenElementsList=[]}hideNode(e){this.hiddenElementsList.some((t=>t.node===e))||(this.hiddenElementsList.push({node:e,style:e.getAttribute("style")}),e.setAttribute("style","display: none;"))}}function E(e,t){const n=t.findElement(e);if(!n)throw new Error('No element with id "root"');return n}function S(e){if(!e.iframeDocument||!e.iframeWindow)throw new Error("No window or document in iframe");return{target:e.iframeWindow,global:window}}!function(e){e.CHECKOUT_STEPLESS_SECTION_VIEW="checkoutSectionView",e.CAMPAIGN_PAGES_GOAL_METER_VIEW="campaignGoalMeterView",e.CAMPAIGN_PAGES_COOKIE_BANNER_VIEW="cookieBannerView",e.CAMPAIGN_PAGES_COOKIE_BANNER_PREFERENCES_VIEW="manageCookieView",e.CAMPAIGN_PAGES_COOKIE_BANNER_PREFERENCES_CONFIRM="confirmMyPreferences",e.DONATION_CURRENCY_SELECTED="selectCurrency",e.WEB_SHARE_API_MORE_OPTIONS_ABORTED="shareMoreOptionsAborted",e.POST_DONATION_CELEBRATION_ANIMATION_SHOWN="postDonationCelebrationAnimationShown",e.ML_DEFAULT_FREQUENCY_V3_RESPONSE="checkoutDefaultFrequencyResponseV3",e.EXPERIMENT_TEST_GROUP_EXPOSED="testGroupExposed",e.EXPERIMENT_DONOR_RATING_BANNER_TRIGGER="donorRatingBannerTrigger",e.EXPERIMENT_DONOR_RATING_UPSELL_TOOLTIP_TRIGGER="donorRatingUpsellTooltipTrigger",e.EXPERIMENT_DONOR_RATING_UPSELL_CLICK="donorRatingUpsellClick",e.EXPERIMENT_ML_AMOUNT_PRESETS_RESPONSE="checkoutPresetsResponse",e.EXPERIMENT_ML_AMOUNT_PRESETS_V4_RESPONSE="checkoutPresetsResponseV4",e.EXPERIMENT_ML_PRE_DONATION_UPSELL_RESPONSE="preDonationUpsellMlResponse",e.EXPERIMENT_ML_PRE_DONATION_UPSELL_AMOUNT_SUGGESTION="UpsellAmountSuggestion",e.EXPERIMENT_ML_PRE_DONATION_UPSELL_V2_RESPONSE="preDonationUpsellMlV2Response",e.EXPERIMENT_ML_SMART_COVERING_FEE_V2_RESPONSE="smartCoveringFeeV2Response",e.EXPERIMENT_ML_SMART_COVERING_FEE_V4_RESPONSE="smartCoveringFeeV4Response",e.EXPERIMENT_ML_POST_DONATION_UPSELL_AMOUNT_SUGGESTION="postDonationUpsellAmountSuggestion",e.EXPERIMENT_ML_POST_DONATION_UPSELL_COLLECT_DATASET_AMOUNT_STRATEGY="PDUAmountStrategy",e.PAYMENT_METHOD_PERSONAL_DATA_VALIDATION_ERROR="paymentMethodPersonalDataValidationError"}(u||(u={})),function(e){e.CHECKOUT_BEFORE_OPEN="checkoutBeforeOpen",e.CHECKOUT_OPEN="checkoutOpen",e.CHECKOUT_CLOSE="checkoutClose",e.CHECKOUT_INTENT="checkoutIntent",e.DONATION_COMPLETE="donationComplete"}(d||(d={})),function(e){e.CLOSE="close",e.OPEN="open",e.DONATION_COMPLETE="donationComplete",e.CHECKOUT_INTENT="checkoutIntent"}(h||(h={})),function(e){e.LIVE="live",e.TEST="test"}(m||(m={})),function(e){e.DONATE_FORM="donate-form",e.COMMENT="comment",e.UPSELL="upsell",e.PAYMENT_METHOD="payment-method",e.PAYPAL="paypal",e.BANK_LOADING="bank-loading",e.CREDIT_CARD="credit-card",e.UK_BACS="uk-bacs",e.UK_BACS_CONFIRMATION="uk-bacs-confirmation",e.AU_BECS="au-becs",e.SEPA="sepa",e.PRIVACY="privacy",e.DOUBLE="double",e.GIFT_AID="gift-aid",e.MAILING_ADDRESS="mailing-address",e.THANK_YOU="thank-you",e.THANK_YOU_TRIBUTE="thank-you-tribute",e.QUESTIONS1="questions1",e.QUESTIONS="questions",e.REMIND_ME="remind-me",e.ASK_PAGE="ask-page",e.POST_DONATION_UPSELL="post-donation-upsell",e.BLOCKED="blocked",e.COMMUNICATION_CONSENT="communication-consent",e.IDEAL_CONFIRMATION="ideal-confirmation",e.FAST_TRACK_PAYMENT_OPTION="fast-track-payment-options"}(p||(p={}));class v{get iframeNode(){throw new Error("Not implemented")}destroy(e){throw new Error("Not implemented")}}class A extends v{constructor(e,t,n){super(),this.checkoutUI=e,this.checkoutCore=t,this.foreignElements=n,this.eventEmitter=new y.A,this.destroyed=!1}get iframeNode(){return this.checkoutUI.iframeNode}get checkoutLocale(){return this.checkoutCore.intl.locale}initialize(){this.checkoutAPIBridge.on(h.DONATION_COMPLETE,(e=>{this.emit(h.DONATION_COMPLETE,e)}))}destroy(e){return(0,c.sH)(this,void 0,void 0,(function*(){this.assertNotDestroyed(),this.checkoutUI.close();const t=Object.assign(Object.assign({},e),this.checkoutAPIBridge.getClosePublicJsApiPayload());this.checkoutCore.logger.checkoutClose({key:this.checkoutCore.checkoutConfiguration.campaign.key,name:this.checkoutCore.checkoutConfiguration.campaign.name},this.checkoutAPIBridge.getClosePublicJsApiPayload()),this.emit(h.CLOSE,t),this.emit(h.CHECKOUT_INTENT,this.checkoutAPIBridge.getIntent()),this.foreignElements&&this.foreignElements.restoreAll(),this.eventEmitter.removeAllListeners(),this.checkoutAPIBridge.dispose(),this.checkoutCore.dispose(),this.destroyed=!0}))}on(e,t){this.assertNotDestroyed(),this.eventEmitter.on(e,t)}getOpenParams(){return this.checkoutAPIBridge.getOpenParams()}get checkoutAPIBridge(){return this.checkoutCore.checkoutAPIBridge}emit(e,t){this.eventEmitter.emit(e,t)}assertNotDestroyed(){if(this.destroyed)throw new Error("CheckoutAPI destroyed")}}class C{}class P extends C{isEnabled(e,t){return t.showMailing?e>=t.showMailingFromAmount:t.showMailing}isRequired(e,t){return t.showMailing&&t.mailingRequired?e>=t.mailingRequiredFromAmount:!!t.showMailing&&t.mailingRequired}}class N extends C{isEnabled(){return!0}isRequired(){return!0}}!function(e){e.DONOR_PORTAL_SUBSCRIPTION_EDITOR="donorPortalSubscriptionEditor",e.DASHBOARD_SUBSCRIPTION_EDITOR="dashboardSubscriptionEditor",e.WIDGET="widget",e.VIRTUAL_TERMINAL="virtualTerminal"}(g||(g={}));class b extends C{constructor(e){super(),this.mailingAddressCheckoutScreenLogic=e}isEnabled(e,t){return!!this.mailingAddressCheckoutScreenLogic.isEnabled(e,t)||!!this.isRequiredByPaymentMethod(t)||!!this.isRequiredByGiftAid(t)}isRequired(e,t){return!!this.mailingAddressCheckoutScreenLogic.isRequired(e,t)||!!this.isRequiredByPaymentMethod(t)||!!this.isRequiredByGiftAid(t)}isRequiredByPaymentMethod(e){return!!e.paymentMethod&&e.paymentMethodAvailabilityManagerRepository.getManager(e.paymentMethod,g.WIDGET).isRequired("address",{ibanCountry:e.paymentMethodCountry})}isRequiredByGiftAid(e){return e.isGiftAidAccepted}}var D=n(6741);function T(e){return e.isException&&e.country===D.tg.CANADA?new N:new P}const _=[D.tg.CANADA,D.tg.GERMANY];class k{constructor(e){this.widget=e.widget}}class O extends k{get currency(){return this.widget.defaultCurrency}}class I extends k{get currency(){return"EUR"}}class x extends C{constructor(e,t){super(),this.checkoutScreenLogic=e,this.params=t}isEnabled(e,t){return this.checkoutScreenLogic.isEnabled(e,t)||this.mailingAddressForceRequired(t)}isRequired(e,t){return this.checkoutScreenLogic.isRequired(e,t)||this.mailingAddressForceRequired(t)}mailingAddressForceRequired(e){return e.paymentMethodAvailabilityManagerRepository.getManager(e.paymentMethod,g.VIRTUAL_TERMINAL).isRequired("address",{ibanCountry:e.paymentMethodCountry})}}const w={showMailing:!0,showMailingFromAmount:0,mailingRequired:!0,mailingRequiredFromAmount:3e4},R={showMailing:!0,showMailingFromAmount:0,mailingRequired:!0,mailingRequiredFromAmount:0},M={showMailing:!1,showMailingFromAmount:0,mailingRequired:!1,mailingRequiredFromAmount:0};class L{}class U extends L{getDefaults(){return M}}class F extends L{getDefaults(){return R}}class j extends L{getDefaults(){return w}}class B{constructor(e){this.validator=e,this.legalText=""}getValidAmounts(e,t){return this.validator.isValid(e).isValid?{showMailingFromAmount:e.showMailingFromAmount,mailingRequiredFromAmount:e.mailingRequiredFromAmount}:{showMailingFromAmount:t,mailingRequiredFromAmount:t}}}class G extends B{constructor(){super(...arguments),this.shouldHideEditor=!1,this.showMailingShouldAlwaysEnabled=!1,this.mailingRequiredShouldAlwaysEnabled=!1}}class q extends B{constructor(){super(...arguments),this.shouldHideEditor=!0,this.showMailingShouldAlwaysEnabled=!1,this.mailingRequiredShouldAlwaysEnabled=!1}}const H=3e4;class V extends B{constructor(){super(...arguments),this.shouldHideEditor=!1,this.showMailingShouldAlwaysEnabled=!0,this.mailingRequiredShouldAlwaysEnabled=!0,this.legalText="We recommend leaving address optional if possible; requiring it prior to checkout may cause you to lose donations. Due to German receipt regulations, an address must be required on donations over 300 euros."}getValidAmounts(e,t){const n=super.getValidAmounts(e,t);let i=n.showMailingFromAmount,s=n.mailingRequiredFromAmount;const a=this.validator.isValid({showMailingFromAmount:n.showMailingFromAmount,mailingRequiredFromAmount:n.mailingRequiredFromAmount,showMailing:e.showMailing,mailingRequired:e.mailingRequired}),o=a.meta.isShowMailingFromAmountValid,r=a.meta.isMailingRequiredFromAmountValid;return e.showMailing&&!o&&(i=V.MAX_SHOW_MAILING_FROM_AMOUNT),e.mailingRequired&&!r&&(s=V.MAX_MAILING_REQUIRED_FROM_AMOUNT),{showMailingFromAmount:i,mailingRequiredFromAmount:s}}}V.MAX_SHOW_MAILING_FROM_AMOUNT=H,V.MAX_MAILING_REQUIRED_FROM_AMOUNT=3e4;class K{isValid(e){if(e.showMailing&&e.mailingRequired){const t=e.showMailingFromAmount<=e.mailingRequiredFromAmount;return{isValid:t,meta:{isMailingRequiredFromAmountValid:t,isShowMailingFromAmountValid:t}}}return{isValid:!0,meta:{isMailingRequiredFromAmountValid:!0,isShowMailingFromAmountValid:!0}}}}class Y extends K{isValid(e){const t=super.isValid(e),n=e.showMailingFromAmount<=H,i=e.mailingRequiredFromAmount<=H;return{isValid:t.isValid&&i&&n,meta:{isMailingRequiredFromAmountValid:i,isShowMailingFromAmountValid:n}}}}class z{constructor(e){var t;this.company=z.resolveCompanyConfig(e),this.isDevelopmentMode=null!==(t=e.isDevelopmentMode)&&void 0!==t&&t}get isExceptionLogic(){return this.company.nonProfit&&_.includes(this.company.country)}static resolveCompanyConfig(e){return e.company.useParentPaymentAccounts&&e.parentCompany?{nonProfit:e.parentCompany.nonProfit,country:e.parentCompany.country}:{nonProfit:e.company.nonProfit,country:e.company.country}}getWidgetDefaultsLogic(){return function(e){if(e.isException)switch(e.country){case D.tg.GERMANY:return new j;case D.tg.CANADA:return new F;default:return new U}return new U}({country:this.company.country,isException:this.isExceptionLogic,isDevelopmentMode:this.isDevelopmentMode})}getCurrencyLogic(e){return function(e){return e.isException&&e.country===D.tg.GERMANY?new I(e):new O(e)}({country:this.company.country,isException:this.isExceptionLogic,isDevelopmentMode:this.isDevelopmentMode,widget:e.widget})}getWidgetEditorLogic(){return function(e){if(e.isException)switch(e.country){case D.tg.GERMANY:return new V(e.validator);case D.tg.CANADA:return new q(e.validator);default:return new G(e.validator)}return new G(e.validator)}({country:this.company.country,isException:this.isExceptionLogic,isDevelopmentMode:this.isDevelopmentMode,validator:this.getValidator()})}getCheckoutScreenLogic(){return function(e){const t=T(e);return new b(t)}({country:this.company.country,isException:this.isExceptionLogic,isDevelopmentMode:this.isDevelopmentMode})}getVirtualTerminalLogic(){return function(e){const t=T(e);return new x(t,e)}({country:this.company.country,isException:this.isExceptionLogic,isDevelopmentMode:this.isDevelopmentMode,nonProfit:this.company.nonProfit})}getValidator(){return(e={country:this.company.country,isException:this.isExceptionLogic,isDevelopmentMode:this.isDevelopmentMode}).isException&&e.country===D.tg.GERMANY?new Y:new K;var e}}var W,$;($=W||(W={})).ONCE="once",$.DAILY="daily",$.WEEKLY="weekly",$.BIWEEKLY="biweekly",$.EVERY_4_WEEKS="every4weeks",$.MONTHLY="monthly",$.BIMONTHLY="bimonthly",$.QUARTERLY="quarterly",$.SEMIANNUAL="semiannual",$.ANNUAL="annual";class X{constructor(e,t,n,i){this.createFundraiseupAddressProvider=e,this.sentry=t,this.requestService=n,this.config=i}getPlaces(e){return(0,c.sH)(this,void 0,void 0,(function*(){const{customData:t,input:n,sessionToken:i,restrictCountries:s}=e,a=this.createFundraiseupAddressProvider(this.sentry,this.config);return n&&i?yield a.getPlaces({customData:t,input:n,sessionToken:i,restrictCountries:s}):[]}))}shouldFindSubplaces(e){const{place:t,restrictCountries:n}=e;return this.createFundraiseupAddressProvider(this.sentry,this.config).shouldFindSubplaces({place:t,restrictCountries:n})}getSubplaces(e){const{place:t,input:n,sessionToken:i,restrictCountries:s}=e;return this.createFundraiseupAddressProvider(this.sentry,this.config).getSubplaces({place:t,input:n,sessionToken:i,restrictCountries:s})}getDetails(e){const{customData:t,place:n,sessionToken:i,restrictCountries:s}=e;return this.createFundraiseupAddressProvider(this.sentry,this.config).getDetails({customData:t,place:n,sessionToken:i,restrictCountries:s})}}var Q,Z=n(7334),J=n(2699),ee=n(5182);!function(e){e.PREFIX="prefix",e.POSTFIX="postfix"}(Q||(Q={}));var te,ne=n(4295);!function(e){e.PREFIX="prefix",e.POSTFIX="postfix"}(te||(te={}));const ie={[ne.D.EN_US]:te.PREFIX,[ne.D.EN_GB]:te.PREFIX,[ne.D.EN_CA]:te.PREFIX,[ne.D.FR_CA]:te.POSTFIX,[ne.D.ES]:te.POSTFIX,[ne.D.ES_US]:te.PREFIX,[ne.D.NL]:te.PREFIX,[ne.D.NO]:te.PREFIX,[ne.D.DE]:te.POSTFIX,[ne.D.FI_FI]:te.POSTFIX,[ne.D.FR_FR]:te.POSTFIX,[ne.D.SV]:te.POSTFIX,[ne.D.IT]:te.POSTFIX,[ne.D.PT_PT]:te.POSTFIX,[ne.D.PT_BR]:te.PREFIX,[ne.D.AR_001]:te.PREFIX,[ne.D.ZH_CN]:te.PREFIX,[ne.D.ZH_TW]:te.PREFIX,[ne.D.JA]:te.PREFIX,[ne.D.KO]:te.PREFIX,[ne.D.HU]:te.POSTFIX,[ne.D.DA]:te.POSTFIX,[ne.D.RU_RU]:te.POSTFIX,[ne.D.PL_PL]:te.POSTFIX};class se{constructor(){this._currenciesData=null,this.notUseLetterSymbol=!1,this.currenciesExtraData=new Map}setData(e){if(this._currenciesData=e,!this._currenciesData)return;const t=this._currenciesData;Object.keys(t).forEach((e=>{this.currenciesExtraData.set(e,{symbolHasLetters:/[a-zA-Z]/.test(t[e].symbol)})}))}formatCurrency(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"full",i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5?arguments[5]:void 0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"narrowSymbol";const r=this.currenciesData[t];e=(e||0)/Math.pow(10,r.digits);const c=this.buildOptions({amount:e,display:n,currency:t,displayCurrency:o,datum:r,withoutPrefix:i,withoutSuffix:s});e<0&&0===c.intlOptions.maximumFractionDigits&&(e=0),a===ne.D.KO&&e>1e4&&(c.intlOptions.minimumFractionDigits=0,c.intlOptions.maximumFractionDigits=1);const l=this.currenciesExtraData.get(r.code);return(null==l?void 0:l.symbolHasLetters)&&this.notUseLetterSymbol&&(c.intlOptions.currencyDisplay="code"),se.castIntl({amount:e,locale:a,options:c,datum:r})}getCurrencyFormat(e){return{decimalSeparator:Intl.NumberFormat(e).format(1.1).replace(/\d/g,""),groupSeparator:Intl.NumberFormat(e).format(1e5).replace(/\d/g,"")}}static castIntl(e){let t,{amount:n,locale:i,options:s,datum:a}=e;try{t=Intl.NumberFormat(i,s.intlOptions).format(n)}catch(e){if(!se.isUnsupportedBrowserError(e,s))throw e;s.intlOptions.currencyDisplay=Z.Uk,t=Intl.NumberFormat(i,s.intlOptions).format(n)}return a.symbol&&t.includes(a.code)&&"code"!==s.intlOptions.currencyDisplay&&(t=t.replace(a.code,a.symbol)),s.internalOptions.pushSuffix&&(t+=` ${a.code}`),i===ne.D.EN_CA&&"USD"===a.code&&"narrowSymbol"===s.intlOptions.currencyDisplay&&(t=t.replace("US$","$")),t}formatSymbol(e,t,n){const i=se.currencySymbolPosition(n);return i===te.PREFIX&&t===Q.PREFIX||i===te.POSTFIX&&t===Q.POSTFIX?e:""}get currenciesData(){if(!this._currenciesData)throw new Error("Currencies data was not set");return this._currenciesData}buildOptions(e){let{amount:t,display:n,currency:i,datum:s,withoutPrefix:a,withoutSuffix:o,displayCurrency:r="narrowSymbol"}=e;const c=s.type===ee.Z.CRYPTO,l=c?void 0:s.symbol,u={style:l?"currency":"decimal",currency:c?void 0:i,notation:"standard",currencyDisplay:r,minimumFractionDigits:0,maximumFractionDigits:0,numberingSystem:"latn"},d={pushSuffix:!l};switch(n){case"short":{const e=this.shortFormatNotation(t),n=this.shortFormatFractionDigits(t);"compact"===e&&(u.minimumFractionDigits=0,u.maximumFractionDigits=n),u.notation=e;break}case"shortlabel":{const e=this.shortFormatNotation(t),n=this.shortFormatFractionDigits(t);"compact"===e&&(u.minimumFractionDigits=0,u.maximumFractionDigits=n),u.notation=e,d.pushSuffix=!1;break}case"round":break;case"roundstrict":throw new Error("Used only in non-localized parts, not rewritten at the moment");case"roundlabel":d.pushSuffix=!1;break;case"full":c&&(u.style="decimal",d.pushSuffix=!0),u.maximumFractionDigits=s.digits,u.minimumFractionDigits=c?Z.lt:s.digits;break;case"fullstrict":c&&(u.style="decimal"),d.pushSuffix=!0,u.maximumFractionDigits=s.digits,u.minimumFractionDigits=c?Z.lt:s.digits;break;case"floatcents":Math.round(t)!==t?(u.maximumFractionDigits=s.digits,u.minimumFractionDigits=s.digits):(u.maximumFractionDigits=0,u.minimumFractionDigits=0);break;case"trimzeroes":c?(u.maximumFractionDigits=s.digits,u.minimumFractionDigits=0):Math.round(t)!==t?(u.maximumFractionDigits=s.digits,u.minimumFractionDigits=s.digits):(u.maximumFractionDigits=0,u.minimumFractionDigits=0);break;case"fulltrimzeroes":d.pushSuffix=!0,c?(u.maximumFractionDigits=s.digits,u.minimumFractionDigits=0,u.style="decimal"):Math.round(t)!==t?(u.maximumFractionDigits=s.digits,u.minimumFractionDigits=s.digits):(u.maximumFractionDigits=0,u.minimumFractionDigits=0);break;case"scopeFloatCents":throw new Error("Unused, not rewritten at the moment");default:throw new Error(`Unknown display type ${n}`)}return a&&(u.style="decimal"),(o||(0,J.f)(i))&&(d.pushSuffix=!1),{intlOptions:u,internalOptions:d}}shortFormatNotation(e){return Math.abs(e)<1e4?"standard":"compact"}shortFormatFractionDigits(e){const t=Math.abs(e),n=this.calcDivisor(t);let i=se.calcDigits(t,n);return t>=se.TEN_THOUSAND&&t<se.HUNDRED_THOUSAND&&(i=1),t%n==0&&(i=0),i}calcDivisor(e){let t=1;return e>=se.MILLION?t=se.TEN_MILLIONS:e>=se.TEN_THOUSAND&&(t=se.THOUSAND),t}static calcDigits(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=2-Math.ceil(Math.log10(e/t));return Math.max(0,n)}static currencySymbolPosition(e){return ie[e]}static isUnsupportedBrowserError(e,t){const n="narrowSymbol"===t.intlOptions.currencyDisplay,i=e.toString()===Z.yb;return n&&i}}se.THOUSAND=1e3,se.TEN_THOUSAND=1e4,se.HUNDRED_THOUSAND=1e5,se.MILLION=1e6,se.TEN_MILLIONS=1e7;class ae extends se{constructor(e){super(),this.currencyDataLoader=e,this.loadFiat()}loadCrypto(){return(0,c.sH)(this,void 0,void 0,(function*(){const e=yield this.currencyDataLoader.loadCrypto(),t=Object.assign(Object.assign({},e),this._currenciesData);this.setData(t)}))}loadFiat(){const e=this.currencyDataLoader.loadFiat(),t=Object.assign(Object.assign({},e),this._currenciesData);this.setData(t)}}var oe=n(5755);class re extends oe.${getCryptoCurrencies(){return(0,c.sH)(this,void 0,void 0,(function*(){return(yield Promise.resolve().then(n.t.bind(n,472,19))).default}))}}var ce=n(204),le=n(7176);le.Cf;const ue=class{static isFailure(e){return"Failure"===e._tag}static isSuccess(e){return"Success"===e._tag}static fail(e){return{_tag:"Failure",failureResult:e}}static success(e){return{_tag:"Success",successResult:e}}constructor(){throw new Error("Either can not be instantiated")}},de={withCredentials:!0,headers:{Accept:"application/json","Content-Type":"application/json"}};class he{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;this.baseURL=e,this.request=t}sendRequest(e){const t=Object.assign(Object.assign({},de),e);return t.url=this.baseURL+t.url,this.request(t).then((e=>{let{data:t,valid:n}=e;return n?ue.success(t):ue.fail(t)}))}get(e){return this.sendRequest(Object.assign(Object.assign({},e),{method:"GET"}))}post(e){return this.sendRequest(Object.assign(Object.assign({},e),{method:"POST"}))}}function me(){return new he(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",ce.Em)}var pe=n(2774),ge=n.n(pe);class ye{constructor(e){this.currencyService=e,this.numbers=this.generateNumbers()}beautify(e,t,n){const i=Array.isArray(e);let s=ge()(e).map((e=>this.currencyService.toFloat(e,t)));const a=this.sortAsc(s);s=a.list;const o=a.positions;let r=this.findNearestPosition(s[0],0,this.numbers.length-s.length);if(n){const e=this.currencyService.toFloat(n,t),i=this.numbers[this.numbers.length-1];for(;e&&this.numbers[r]<e&&e<i;)r++}const c=this.getPositionsArray(r,s.length);for(let e=c.length-1;e>0;e--){const t=this.findNearestPosition(s[e],c[e-1]+1,c[e+1]-1);c[e]=t||c[e]}return s=this.restoreSort(c.map((e=>this.numbers[e]?this.numbers[e]:this.numbers[this.numbers.length-1])),o).map((e=>this.currencyService.fromFloat(e,t))),i?s:s[0]}generateNumbers(){const e=[1,2,3,4,5,6,7,8,9,10,12,15,20,25,30,35,40,45,50,55,60,65,70,75,80,85,90,100,120,130,140,150,160,170,180,190,200,250,300,350,400,450,500,600,650,700,750,800,900],t=[10,12,15,20,25,30,35,40,50,60,70,80,90];for(let n=100;n<1e7;n*=10)t.forEach((t=>e.push(t*n)));return e}sortAsc(e){let t=0;const n=e.map((e=>({val:e,pos:t++}))).sort(((e,t)=>e.val-t.val));return{list:n.map((e=>e.val)),positions:n.map((e=>e.pos))}}restoreSort(e,t){let n=0;return t.map((t=>({pos:t,val:e[n++]}))).sort(((e,t)=>e.pos-t.pos)).map((e=>e.val))}findNearestPosition(e,t,n){if(t=t||0,n=n||this.numbers.length-1,e>=this.numbers[n])return n;for(let i=n;i>t;i--)if(this.numbers[i-1]<=e&&e<=this.numbers[i])return e-this.numbers[i-1]>=this.numbers[i]-e?i:i-1;return 0}getPositionsArray(e,t){const n=[];for(let i=e;i<e+t;i++)n.push(i);return n}}class fe{constructor(e,t){this.window=e,this.sentry=t}subscribeOnUserInteraction(e){var t;const n=function(e,t){let n=!1;return t=>{n||(e(t),n=!0,setTimeout((()=>{n=!1}),1e3))}}(e);try{this.window.addEventListener("mousemove",n),this.window.addEventListener("touchstart",e),this.window.addEventListener("keypress",e)}catch(e){const n=window.document.children[0];throw null===(t=this.sentry)||void 0===t||t.captureException(new Error("UserInteraction error"),{extra:{tagName:n.tagName,classList:n.classList,id:n.id,style:n.getAttribute("style")}}),e}return()=>{this.window.removeEventListener("mousemove",n),this.window.removeEventListener("touchstart",e),this.window.removeEventListener("keypress",e)}}}let Ee;function Se(){return void 0===Ee&&(Ee=!1),Ee}var ve,Ae,Ce,Pe,Ne,be,De=n(3105);function Te(e,t){var n;return(null!==(n=null==t?void 0:t.document)&&void 0!==n?n:document).cookie.replace(new RegExp(`(?:(?:^|.*;\\s*)${e}\\s*\\=\\s*([^;]*).*$)|^.*$`),"$1")}!function(e){e.US_BANK_ACCOUNT="us-bank-account",e.US_BANK_ACCOUNT_DONATE_OPTIONS="us-bank-account-donate-options",e.US_BANK_ACCOUNT_CONFIRMATION="us-bank-account-confirmation",e.US_BANK_ACCOUNT_VERIFICATION_GUIDE="us-bank-account-verification-guide",e.AU_BECS="au-becs",e.CREDIT_CARD="credit-card",e.DONATE="donate-form",e.DOUBLE="double",e.GIFT_AID="gift-aid",e.PAYMENT_OPTIONS="payment-method",e.SEPA="sepa",e.UK_BACS="uk-bacs",e.UK_BACS_CONFIRMATION="uk-bacs-confirmation",e.IDEAL_CONFIRMATION="ideal-confirmation",e.UPSELL="upsell",e.COMMUNICATION_CONSENT="communication-consent",e.FAST_TRACK_PAYMENT_OPTIONS="fast-track-payment-options"}(ve||(ve={})),function(e){e.REMINDER="reminder",e.DONATE_BUTTON="donateButton",e.STICKY_BUTTON="stickyButton",e.IMAGE_CARD="imageCard",e.TEXT_LINK="textLink",e.DONATION_FORM="donationForm",e.SIMPLE_FORM="simpleForm",e.GOAL_METER="goalMeter",e.STAT_COUNTER="statCounter",e.IMPACT_SLIDER="impactSlider",e.DONATION_LEVELS="donationLevels",e.BUTTON_GROUP="buttonGroup",e.FLOATING_BUTTON="floatingButton",e.MESSAGE_BAR="messageBar",e.TOP_SUPPORTERS="topSupporters",e.TOP_LOCATIONS="topLocations",e.SOCIAL_PROOF="socialProof",e.QR_CODE="qrCode",e.RECENT_DONATIONS="recentDonations",e.P2P_BUTTON="p2pButton",e.P2P_LINK="p2pLink",e.TOP_FUNDRAISERS="topFundraisers",e.DONOR_MAP="donorMap",e.LIGHTBOX="lightbox",e.FUNDRAISING_PAGE_LINK="fundraisingPageLink",e.FUNDRAISING_PAGE_INVITE_LINK="fundraisingPageInviteLink",e.LINK="link",e.DIRECT_LINK="direct",e.DEBUG_PANEL="debugPanel",e.TEST_MODE_PANEL="testModePanel",e.SPLIT_TESTING="splitTesting",e.JS_API="jsApi"}(Ae||(Ae={})),function(e){e.MODAL="modal",e.PAGE="page"}(Ce||(Ce={})),function(e){e.INITIATE_CHECKOUT="InitiateCheckout",e.PURCHASE="Purchase",e.DONATE="Donate",e.SUBSCRIBE="Subscribe"}(Pe||(Pe={}));class _e{constructor(){this.queue=[]}pushEvent(e,t){this.queue.push({eventName:e,eventPayload:t})}[Symbol.iterator](){return this.queue.values()}}!function(e){e.EVENT_DONATION_COMPLETE="donationComplete",e.EVENT_CHECKOUT_CLOSE="checkoutClose",e.EVENT_CHECKOUT_OPEN="checkoutOpen"}(Ne||(Ne={}));class ke{constructor(e){this.window=e}track(e,t){switch(e){case Ne.EVENT_CHECKOUT_OPEN:this.openEvent(e,t);break;case Ne.EVENT_CHECKOUT_CLOSE:this.closeEvent(e,t);break;case Ne.EVENT_DONATION_COMPLETE:this.donationEvent(e,t)}}openEvent(e,t){const n={event:"FundraiseUp."+e,FundraiseUp:t.data,ecommerce:{}};this.pushEvent(n)}closeEvent(e,t){const n={event:"FundraiseUp."+e,FundraiseUp:t.data,ecommerce:{}};this.pushEvent(n)}donationEvent(e,t){var n,i,s,a,o,r,c,l,u;const d=t.data,h={event:"FundraiseUp."+e,FundraiseUp:d,ecommerce:{transaction_id:null===(n=d.donation)||void 0===n?void 0:n.id,value:null===(i=d.donation)||void 0===i?void 0:i.amount,currency:null===(s=d.donation)||void 0===s?void 0:s.currency,items:[{item_id:t.widget.key,item_name:t.widget.name,index:0,item_brand:"Fundraise Up",item_category:null===(a=d.designation)||void 0===a?void 0:a.name,item_category2:null===(o=d.designation)||void 0===o?void 0:o.id,item_category3:null===(r=d.designation)||void 0===r?void 0:r.code,item_variant:null===(c=d.donation)||void 0===c?void 0:c.frequency,price:null===(l=d.donation)||void 0===l?void 0:l.amount,quantity:1,currency:null===(u=d.donation)||void 0===u?void 0:u.currency}]}};this.pushEvent(h)}pushEvent(e){this.window.dataLayer=this.window.dataLayer||[],this.window.dataLayer.push(e)}}class Oe{constructor(e){this.observers=[],this.isActive=!0,this._eventsQueue=null,this.isEnabled=e.enabledByDefault,this.window=e.window,this.checkoutConfiguration=e.checkoutConfiguration,this.sessionTokenService=e.sessionTokenService,this.initialize()}donationComplete(e,t){if(!this.isEnabled)return;const n={widget:e,data:t};this.observe(Ne.EVENT_DONATION_COMPLETE,n)}checkoutClose(e,t){if(!this.isEnabled)return;const n={widget:e,data:t};this.observe(Ne.EVENT_CHECKOUT_CLOSE,n)}checkoutOpen(e,t){if(!this.isEnabled)return;const n={widget:e,data:t};this.observe(Ne.EVENT_CHECKOUT_OPEN,n)}observe(e,t){this.isEnabled&&(this.isActive?this.observeEvent(e,t):this.eventsQueue.pushEvent(e,t))}setActive(e){if(this.isActive=e,this.isActive)for(const{eventName:e,eventPayload:t}of this.eventsQueue)this.observeEvent(e,t)}get eventsQueue(){return this._eventsQueue||(this._eventsQueue=new _e),this._eventsQueue}observeEvent(e,t){for(const n of this.observers)n.track(e,t)}resolveFacebookPixels(){var e;let t=[];const n=this.window.fbq;if(!n)return t;if("function"==typeof(null==n?void 0:n.getState)){const i=n.getState();if(null===(e=null==i?void 0:i.pixels)||void 0===e?void 0:e.length)return t=i.pixels.map((e=>e.id)),t}const i=n.queue;return i.length?(i.forEach((e=>{const n=e[0],i=e[1];"init"===n&&i&&t.push(i)})),t):t}resolveFacebookEventOptions(e){return Object.assign(Object.assign({},e),{fbp:Te("_fbp")})}initializeFacebookPixelTracking(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.overrideFacebookPixelQueuePush(),this.overrideFacebookPixelCallMethod()||e>24||setTimeout((()=>this.initializeFacebookPixelTracking(e+1)),100*e)}overrideFacebookPixelCallMethod(){const e=this.window.fbq;if(!e||!e.callMethod||!e.queue)return!1;if(e.callMethod.overridden)return!0;if(e.queue.length)return!1;const t=e.callMethod,n=this;return e.callMethod=function(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];const a=n.prepareFacebookEventArgs(i);t.call(this,...a)},e.callMethod.overridden=!0,!0}transformQueuePushArgs(e){if((e=Array.isArray(e)?e:Array.from(e)).length<4)return e;const t=e[3];return t&&"object"==typeof t?(t.content_ids&&!Array.isArray(t.content_ids)&&(t.content_ids=[t.content_ids]),e.splice(1,1),e):e}overrideFacebookPixelQueuePush(){const e=this.window.fbq;if(!e||e.callMethod||!e.queue)return;if(e.queue.push.overridden)return;const t=this,n=e.queue.push;e.queue.push=function(e){if(!e)return n.call(this,e);const i=t.prepareFacebookEventArgs(e);n.call(this,i)},e.queue.push.overridden=!0}initializeObservers(){this.observers.push(new ke(this.window))}initialize(){(this.checkoutConfiguration.infrastructureParams.livemode||this.checkoutConfiguration.company.trackToMarketingPixels.trackTestData)&&(this.initializeObservers(),this.initializeFacebookPixelTracking())}prepareFacebookEventArgs(e){let t,n;e.length>2&&"string"==typeof e[1]&&"string"==typeof e[2]?(t=e[2],n=4):(t=e[1],n=3);const i=e[n];if("string"!=typeof t||(null==i?void 0:i.eventID)||![Pe.INITIATE_CHECKOUT,Pe.DONATE].includes(t))return e;const s=[...e],a=Object.assign(Object.assign({},i),{eventID:this.sessionTokenService.token});return s.length>n?s[n]=a:(s.length<n&&s.push({}),s.push(a)),s}}!function(e){e.DUMMY_EXPERIMENT="DummyExperiment",e.CHECKOUT_BUNDLE_EXPERIMENT="CheckoutBundleExperiment",e.DONOR_PORTAL_TEST_EXPERIMENT="DonorPortalTestExperiment",e.CAMPAIGN_PAGE_TEST_EXPERIMENT="CampaignPageTestExperiment",e.EMBED_TEST_EXPERIMENT="EmbedTestExperiment",e.UPGRADE_LINKS_IN_INSTALLMENT_EMAILS_AI_V2_EXPERIMENT="UpgradeLinksInInstallmentEmailsAIv2Experiment",e.ML_POST_DONATION_UPSELL_CHECKOUT_EXPERIMENT="MlPostDonationUpsellCheckoutExperiment",e.ML_POST_DONATION_UPSELL_CAMPAIGN_PAGES_EXPERIMENT="MlPostDonationUpsellCampaignPagesExperiment",e.CHECKOUT_WITHOUT_PRE_DONATION_UPSELL_EXPERIMENT="CheckoutWithoutPreDonationUpsellExperiment",e.CAMPAIGN_PAGES_WITHOUT_PRE_DONATION_UPSELL_EXPERIMENT="CampaignPagesWithoutPreDonationUpsellExperiment",e.SMART_COVERING_FEE_CHECKOUT_V_2_EXPERIMENT="SmartCoveringFeeSuggestionCheckoutExperimentV2",e.SMART_COVERING_FEE_CAMPAIGN_PAGES_V_2_EXPERIMENT="SmartCoveringFeeSuggestionCampaignPagesExperimentV2",e.AA_CHECKOUT_EXPERIMENT="AACheckoutExperiment",e.SMART_POST_DONATION_UPSELL_CHECKOUT_V_2_EXPERIMENT="SmartPostDonationUpsellCheckoutV2Experiment",e.SMART_POST_DONATION_UPSELL_CAMPAIGN_PAGES_V_2_EXPERIMENT="SmartPostDonationUpsellCampaignPagesV2Experiment",e.UPSELL_AMOUNTS_DATASET_MODAL_EXPERIMENT="UpsellAmountsDatasetModalExperiment",e.UPSELL_AMOUNTS_DATASET_PAGES_EXPERIMENT="UpsellAmountsDatasetPagesExperiment",e.UPGRADE_LINKS_PAGE_AI_V_2_EXPERIMENT="UpgradeLinksPageAIv2Experiment",e.STEPLESS_MOBILE_CHECKOUT_EXPERIMENT="SteplessMobileCheckoutExperiment",e.COLLECT_DATASET_POST_DONATION_UPSELL_AMOUNT_CHECKOUT_V_3_EXPERIMENT="CollectDatasetPostDonationUpsellAmountCheckoutV3Experiment",e.COLLECT_DATASET_POST_DONATION_UPSELL_AMOUNT_CAMPAIGN_PAGES_V_3_EXPERIMENT="CollectDatasetPostDonationUpsellAmountCampaignPagesV3Experiment",e.UPSELL_AMOUNTS_SUGGESTION_MODAL_EXPERIMENT="UpsellAmountsSuggestionModalExperiment",e.UPSELL_AMOUNTS_SUGGESTION_PAGES_EXPERIMENT="UpsellAmountsSuggestionPagesExperiment",e.SMART_PDU_CHECKOUT_V_3_EXPERIMENT="SmartPDUCheckoutV3Experiment",e.SMART_PDU_CAMPAIGN_PAGES_V_3_EXPERIMENT="SmartPDUCampaignPagesV3Experiment",e.RECURRING_FREQUENCY_HINT_CAMPAIGN_PAGES_EXPERIMENT="RecurringFrequencyHintCampaignPagesExperiment",e.RECURRING_FREQUENCY_HINT_CHECKOUT_DESKTOP_EXPERIMENT="RecurringFrequencyHintCheckoutDesktopExperiment",e.RECURRING_FREQUENCY_HINT_CHECKOUT_MOBILE_EXPERIMENT="RecurringFrequencyHintCheckoutMobileExperiment",e.CHECKOUT_STEPS_CAMPAIGN_PAGES_EXPERIMENT="CheckoutStepsCampaignPagesExperiment",e.CHECKOUT_STEPS_CHECKOUT_MODAL_EXPERIMENT="CheckoutStepsCheckoutModalExperiment",e.DONOR_RATING_CHECKOUT_EXPERIMENT="DonorRatingCheckoutExperiment",e.DONOR_RATING_CAMPAIGN_PAGES_EXPERIMENT="DonorRatingCampaignPagesExperiment",e.ML_DONATION_RETRY_V_3_EXPERIMENT="MlDonationRetryV3Experiment",e.UPSELL_SCREEN_DATA_COLLECT_CAMPAIGN_PAGES_EXPERIMENT="UpsellScreenDataCollectCampaignPagesExperiment",e.UPSELL_SCREEN_DATA_COLLECT_CHECKOUT_EXPERIMENT="UpsellScreenDataCollectCheckoutExperiment",e.AMOUNT_PRESETS_CHECKOUT_V_4_EXPERIMENT="AmountPresetsCheckoutV4Experiment",e.AMOUNT_PRESETS_PAGES_V_4_EXPERIMENT="AmountPresetsPagesV4Experiment",e.AMOUNT_PRESETS_DONATION_FORM_V_4_EXPERIMENT="AmountPresetsDonationFormV4Experiment",e.AMOUNTS_ON_UPSELL_V_2_CAMPAIGN_PAGES_EXPERIMENT="AmountsOnUpsellV2CampaignPagesExperiment",e.AMOUNTS_ON_UPSELL_V_2_CHECKOUT_EXPERIMENT="AmountsOnUpsellV2CheckoutExperiment",e.AVERAGE_DONATION_HINT_EXPERIMENT="AverageDonationHintExperiment",e.AVERAGE_DONATION_HINT_CAMPAIGN_PAGES_EXPERIMENT="AverageDonationHintCampaignPagesExperiment",e.FAST_TRACK_CAMPAIGN_PAGES_EXPERIMENT="FastTrackCampaignPagesExperiment",e.FAST_TRACK_CHECKOUT_EXPERIMENT="FastTrackCheckoutExperiment",e.ABANDONED_DONATION_EMAIL_CHAIN_TIMING_V_1_EXPERIMENT="AbandonedDonationEmailChainTimingV1Experiment",e.UPGRADE_LINKS_IN_DP_REVERSE_EXPERIMENT="UpgradeLinksInDPReverseExperiment",e.UPGRADE_LINKS_IN_EMAILS_REVERSE_EXPERIMENT="UpgradeLinksInEmailsReverseExperiment",e.SMART_COVERING_FEE_CHECKOUT_V_4_EXPERIMENT="SmartCoveringFeeCheckoutV4Experiment",e.SMART_COVERING_FEE_CAMPAIGN_PAGES_V_4_EXPERIMENT="SmartCoveringFeeCampaignPagesV4Experiment",e.MULTIPLE_RECURRING_PLAN_CHECKOUT_EXPERIMENT="MultipleRecurringPlanCheckoutExperiment",e.MULTIPLE_RECURRING_PLAN_CAMPAIGN_PAGES_EXPERIMENT="MultipleRecurringPlanCampaignPagesExperiment"}(be||(be={}));const Ie={[be.DUMMY_EXPERIMENT]:"33802",[be.CHECKOUT_BUNDLE_EXPERIMENT]:"61172",[be.DONOR_PORTAL_TEST_EXPERIMENT]:"68092",[be.CAMPAIGN_PAGE_TEST_EXPERIMENT]:"68383",[be.EMBED_TEST_EXPERIMENT]:"65492",[be.ML_POST_DONATION_UPSELL_CHECKOUT_EXPERIMENT]:"70084",[be.ML_POST_DONATION_UPSELL_CAMPAIGN_PAGES_EXPERIMENT]:"71732",[be.CHECKOUT_WITHOUT_PRE_DONATION_UPSELL_EXPERIMENT]:"73814",[be.CAMPAIGN_PAGES_WITHOUT_PRE_DONATION_UPSELL_EXPERIMENT]:"73816",[be.SMART_COVERING_FEE_CHECKOUT_V_2_EXPERIMENT]:"82767-modal",[be.SMART_COVERING_FEE_CAMPAIGN_PAGES_V_2_EXPERIMENT]:"82767-pages",[be.AA_CHECKOUT_EXPERIMENT]:"77715",[be.SMART_POST_DONATION_UPSELL_CHECKOUT_V_2_EXPERIMENT]:"79870-modal",[be.SMART_POST_DONATION_UPSELL_CAMPAIGN_PAGES_V_2_EXPERIMENT]:"79870-pages",[be.UPSELL_AMOUNTS_DATASET_MODAL_EXPERIMENT]:"87159-modal",[be.UPSELL_AMOUNTS_DATASET_PAGES_EXPERIMENT]:"87159-pages",[be.UPGRADE_LINKS_IN_INSTALLMENT_EMAILS_AI_V2_EXPERIMENT]:"87202",[be.UPGRADE_LINKS_PAGE_AI_V_2_EXPERIMENT]:"87190",[be.STEPLESS_MOBILE_CHECKOUT_EXPERIMENT]:"60395",[be.COLLECT_DATASET_POST_DONATION_UPSELL_AMOUNT_CHECKOUT_V_3_EXPERIMENT]:"89924-modal",[be.COLLECT_DATASET_POST_DONATION_UPSELL_AMOUNT_CAMPAIGN_PAGES_V_3_EXPERIMENT]:"89924-pages",[be.UPSELL_AMOUNTS_SUGGESTION_MODAL_EXPERIMENT]:"89701-modal",[be.UPSELL_AMOUNTS_SUGGESTION_PAGES_EXPERIMENT]:"89701-pages",[be.SMART_PDU_CHECKOUT_V_3_EXPERIMENT]:"89260-modal",[be.SMART_PDU_CAMPAIGN_PAGES_V_3_EXPERIMENT]:"89260-pages",[be.RECURRING_FREQUENCY_HINT_CAMPAIGN_PAGES_EXPERIMENT]:"59392-pages",[be.RECURRING_FREQUENCY_HINT_CHECKOUT_DESKTOP_EXPERIMENT]:"59392-desktop",[be.RECURRING_FREQUENCY_HINT_CHECKOUT_MOBILE_EXPERIMENT]:"59392-mobile",[be.CHECKOUT_STEPS_CAMPAIGN_PAGES_EXPERIMENT]:"59119-pages",[be.CHECKOUT_STEPS_CHECKOUT_MODAL_EXPERIMENT]:"59119-modal",[be.DONOR_RATING_CHECKOUT_EXPERIMENT]:"99706-modal",[be.DONOR_RATING_CAMPAIGN_PAGES_EXPERIMENT]:"99706-pages",[be.ML_DONATION_RETRY_V_3_EXPERIMENT]:"99145",[be.UPSELL_SCREEN_DATA_COLLECT_CAMPAIGN_PAGES_EXPERIMENT]:"112996-pages",[be.UPSELL_SCREEN_DATA_COLLECT_CHECKOUT_EXPERIMENT]:"112996-modal",[be.AMOUNT_PRESETS_CHECKOUT_V_4_EXPERIMENT]:"126493-modal",[be.AMOUNT_PRESETS_PAGES_V_4_EXPERIMENT]:"126493-pages",[be.AMOUNT_PRESETS_DONATION_FORM_V_4_EXPERIMENT]:"126493-DF",[be.AMOUNTS_ON_UPSELL_V_2_CAMPAIGN_PAGES_EXPERIMENT]:"104387-pages",[be.AMOUNTS_ON_UPSELL_V_2_CHECKOUT_EXPERIMENT]:"104387-modal",[be.AVERAGE_DONATION_HINT_EXPERIMENT]:"101523-modal",[be.AVERAGE_DONATION_HINT_CAMPAIGN_PAGES_EXPERIMENT]:"101523-pages",[be.FAST_TRACK_CAMPAIGN_PAGES_EXPERIMENT]:"101284-pages",[be.FAST_TRACK_CHECKOUT_EXPERIMENT]:"101284-modal",[be.ABANDONED_DONATION_EMAIL_CHAIN_TIMING_V_1_EXPERIMENT]:"117635",[be.UPGRADE_LINKS_IN_DP_REVERSE_EXPERIMENT]:"116912-DP",[be.UPGRADE_LINKS_IN_EMAILS_REVERSE_EXPERIMENT]:"116912-Email",[be.SMART_COVERING_FEE_CAMPAIGN_PAGES_V_4_EXPERIMENT]:"113277-pages",[be.SMART_COVERING_FEE_CHECKOUT_V_4_EXPERIMENT]:"113277-modal",[be.MULTIPLE_RECURRING_PLAN_CHECKOUT_EXPERIMENT]:"114635-modal",[be.MULTIPLE_RECURRING_PLAN_CAMPAIGN_PAGES_EXPERIMENT]:"114635-pages"};var xe,we,Re,Me,Le,Ue,Fe,je,Be,Ge,qe,He,Ve,Ke,Ye,ze,We,$e,Xe,Qe,Ze,Je,et,tt,nt,it,st,at,ot,rt,ct,lt,ut,dt,ht,mt,pt,gt,yt,ft,Et,St,vt,At,Ct,Pt,Nt,bt,Dt,Tt,_t,kt,Ot,It,xt,wt,Rt,Mt,Lt,Ut,Ft,jt,Bt;Object.values(Ie),function(e){e.BILLING="billing",e.EMBED="embed",e.CAMPAIGN_PAGES="campaignPages",e.DONOR_PORTAL="donorPortal",e.EMAILS="emails"}(xe||(xe={})),function(e){e.CONTROL="control",e.TEST="test"}(we||(we={})),function(e){e.CONTROL="control",e.TEST_1="test-1",e.TEST_2="test-2",e.TEST_3="test-3"}(Re||(Re={})),function(e){e.CONTROL="control",e.TEST="test"}(Me||(Me={})),function(e){e.CONTROL="control",e.TEST="test"}(Le||(Le={})),function(e){e.CONTROL="control",e.TEST="test"}(Ue||(Ue={})),function(e){e.CONTROL="control",e.TEST="test"}(Fe||(Fe={})),function(e){e.CONTROL="control",e.TEST="test"}(je||(je={})),function(e){e.CONTROL="control",e.TEST="test"}(Be||(Be={})),function(e){e.CONTROL="control",e.TEST="test"}(Ge||(Ge={})),function(e){e.CONTROL="control",e.TEST="test"}(qe||(qe={})),function(e){e.TEST_1="test-1",e.TEST_2="test-2",e.TEST_3="test-3"}(He||(He={})),function(e){e.CONTROL="control",e.TEST="test"}(Ve||(Ve={})),function(e){e.CONTROL="control",e.TEST_1="test-1",e.TEST_2="test-2"}(Ke||(Ke={})),function(e){e.CONTROL="control",e.TEST="test"}(Ye||(Ye={})),function(e){e.CONTROL="control",e.TEST="test"}(ze||(ze={})),function(e){e.CONTROL="control",e.TEST="test"}(We||(We={})),function(e){e.CONTROL="control",e.TEST="test"}($e||($e={})),function(e){e.CONTROL="control",e.TEST="test"}(Xe||(Xe={})),function(e){e.CONTROL="control",e.TEST="test"}(Qe||(Qe={})),function(e){e.CONTROL="control",e.TEST="test"}(Ze||(Ze={})),function(e){e.CONTROL="control",e.TEST="test"}(Je||(Je={})),function(e){e.CONTROL="control",e.TEST="test"}(et||(et={})),function(e){e.CONTROL="control",e.TEST="test"}(tt||(tt={})),function(e){e.CONTROL="control",e.TEST="test"}(nt||(nt={})),function(e){e.CONTROL="control",e.TEST="test"}(it||(it={})),function(e){e.CONTROL="control",e.TEST="test"}(st||(st={})),function(e){e.CONTROL="control",e.TEST="test"}(at||(at={})),function(e){e.CONTROL="control",e.TEST="test"}(ot||(ot={})),function(e){e.DEVELOPMENT="development",e.PRODUCTION="production",e.STAGING="staging",e.TESTING="testing"}(rt||(rt={})),function(e){e.CONTROL="control",e.TEST="test"}(ct||(ct={})),function(e){e.CONTROL="control",e.TEST="test"}(lt||(lt={})),function(e){e.CONTROL="control",e.TEST="test"}(ut||(ut={})),function(e){e.CONTROL="control",e.TEST_1="test-1",e.TEST_2="test-2"}(dt||(dt={})),function(e){e.CONTROL="control",e.TEST="test"}(ht||(ht={})),function(e){e.CONTROL="control",e.TEST="test"}(mt||(mt={})),function(e){e.CONTROL="control",e.TEST="test"}(pt||(pt={})),function(e){e.CONTROL="control",e.TEST_1="test-1",e.TEST_2="test-2"}(gt||(gt={})),function(e){e.CONTROL="control",e.TEST_1="test-1",e.TEST_2="test-2"}(yt||(yt={})),function(e){e.CONTROL="control",e.TEST="test"}(ft||(ft={})),function(e){e.CONTROL="control",e.TEST="test"}(Et||(Et={})),function(e){e.CONTROL="control",e.TEST="test"}(St||(St={})),function(e){e.CONTROL="control",e.TEST="test"}(vt||(vt={})),function(e){e.CONTROL="control",e.TEST="test"}(At||(At={})),function(e){e.CONTROL="control",e.TEST="test"}(Ct||(Ct={})),function(e){e.CONTROL="control",e.TEST_1="test-1",e.TEST_2="test-2",e.TEST_3="test-3"}(Pt||(Pt={})),function(e){e.CONTROL="control",e.TEST_1="test-1",e.TEST_2="test-2",e.TEST_3="test-3"}(Nt||(Nt={})),function(e){e.CONTROL="control",e.TEST_1="test-1",e.TEST_2="test-2",e.TEST_3="test-3"}(bt||(bt={})),function(e){e.CONTROL="control",e.TEST="test"}(Dt||(Dt={})),function(e){e.CONTROL="control",e.TEST_1="test-1",e.TEST_2="test-2"}(Tt||(Tt={})),function(e){e.CONTROL="control",e.TEST_1="test-1",e.TEST_2="test-2"}(_t||(_t={})),function(e){e.CONTROL="control",e.TEST="test"}(kt||(kt={})),function(e){e.CONTROL="control",e.TEST="test"}(Ot||(Ot={})),function(e){e.CONTROL="control",e.TEST="test"}(It||(It={})),function(e){e.CONTROL="control",e.TEST="test"}(xt||(xt={})),function(e){e.CONTROL="control",e.TEST="test"}(wt||(wt={})),function(e){e.CONTROL="control",e.TEST_1="test-1",e.TEST_2="test-2"}(Rt||(Rt={})),function(e){e.CONTROL="control",e.TEST_1="test-1",e.TEST_2="test-2"}(Mt||(Mt={})),function(e){e[e.COMPANY_NOT_FOUND=1]="COMPANY_NOT_FOUND",e[e.UNSUPPORTED_STORAGE_TYPE=2]="UNSUPPORTED_STORAGE_TYPE",e[e.BACKDROP_CONTAINER_IS_NOT_AVAILABLE=3]="BACKDROP_CONTAINER_IS_NOT_AVAILABLE",e[e.EXPERIMENT_ALREADY_STARTED=4]="EXPERIMENT_ALREADY_STARTED",e[e.INVALID_VARIANT_NAME_FOR_EXPERIMENT=5]="INVALID_VARIANT_NAME_FOR_EXPERIMENT",e[e.STORED_SETTINGS_MUST_BE_AN_OBJECT=6]="STORED_SETTINGS_MUST_BE_AN_OBJECT",e[e.INVALID_DISTRIBUTION_IN_EXPERIMENT=7]="INVALID_DISTRIBUTION_IN_EXPERIMENT",e[e.NO_SUCH_SETTINGS_FOR_EXPERIMENT=8]="NO_SUCH_SETTINGS_FOR_EXPERIMENT",e[e.NO_SUCH_EXPERIMENT=9]="NO_SUCH_EXPERIMENT",e[e.UNSUPPORTED_TYPE_OF_STORAGE=10]="UNSUPPORTED_TYPE_OF_STORAGE",e[e.FORM_OF_THIS_TYPE_HAS_NOT_BEEN_REGISTERED=11]="FORM_OF_THIS_TYPE_HAS_NOT_BEEN_REGISTERED",e[e.NO_FORM_ASSOCIATED_WITH_THIS_KEY_WAS_CREATED=12]="NO_FORM_ASSOCIATED_WITH_THIS_KEY_WAS_CREATED",e[e.UNSUPPORTED_LOCALE_CONFIG_TYPE=13]="UNSUPPORTED_LOCALE_CONFIG_TYPE",e[e.SERVICE_HAS_ALREADY_BEEN_PROVIDED=14]="SERVICE_HAS_ALREADY_BEEN_PROVIDED",e[e.MUST_PROVIDE_COMPANY_KEY=15]="MUST_PROVIDE_COMPANY_KEY",e[e.TRACKER_ALREADY_STARTED=16]="TRACKER_ALREADY_STARTED"}(Lt||(Lt={})),function(e){e.AUSTRALIA="AU",e.AUSTRIA="AT",e.BELGIUM="BE",e.BRAZIL="BR",e.BULGARIA="BG",e.CANADA="CA",e.CROATIA="HR",e.CYPRUS="CY",e.CZECH_REPUBLIC="CZ",e.DENMARK="DK",e.ESTONIA="EE",e.FINLAND="FI",e.FRANCE="FR",e.GERMANY="DE",e.GREECE="GR",e.HONG_KONG="HK",e.HUNGARY="HU",e.INDIA="IN",e.INDONESIA="ID",e.IRELAND="IE",e.ITALY="IT",e.JAPAN="JP",e.LATVIA="LV",e.LITHUANIA="LT",e.LUXEMBOURG="LU",e.MALAYSIA="MY",e.MALTA="MT",e.MEXICO="MX",e.NETHERLANDS="NL",e.NEW_ZEALAND="NZ",e.NORWAY="NO",e.POLAND="PL",e.PORTUGAL="PT",e.ROMANIA="RO",e.SINGAPORE="SG",e.SLOVAKIA="SK",e.SLOVENIA="SI",e.SPAIN="ES",e.SWEDEN="SE",e.SWITZERLAND="CH",e.THAILAND="TH",e.UNITED_ARAB_EMIRATES="AE",e.UNITED_KINGDOM="GB",e.UNITED_STATES="US",e.GIBRALTAR="GI",e.LIECHTENSTEIN="LI",e.PHILIPPINES="PH",e.ISRAEL="IL"}(Ut||(Ut={}));class Gt extends Error{constructor(e){super(`${Lt.EXPERIMENT_ALREADY_STARTED} - ${e}`)}}class qt extends Error{constructor(e){super(`${Lt.STORED_SETTINGS_MUST_BE_AN_OBJECT} - ${e}`)}}class Ht extends Error{constructor(e){super(`${Lt.NO_SUCH_SETTINGS_FOR_EXPERIMENT} - ${e}`)}}class Vt extends Error{constructor(e){super(`${Lt.INVALID_VARIANT_NAME_FOR_EXPERIMENT} - ${e}`)}}class Kt extends Error{constructor(e){super(`${Lt.NO_SUCH_EXPERIMENT} - ${e}`)}}class Yt{constructor(e){this.excluded=!1,this.isInitialized=!1,this.isActive=!1;const{settings:t,companyKey:n,widgetKey:i,tracker:s,funStorage:a,user:o,parentCompanyKey:r,infrastructureParams:c,sentry:l,distribution:u,allowExperiments:d=!0}=e;this.sentry=l,this.companyKey=n,this.parentCompanyKey=r,this.widgetKey=i,this.tracker=s,this.funStorage=a,this.user=o,this.infrastructureParams=c;const{experimentId:h,name:m,disabledAccounts:p,enabledAccounts:g,enabled:y,enabledWidgets:f}=t;this.name=m,this.experimentId=h,this.disabledAccounts=p,this.enabledAccounts=g,this.enabledWidgets=f,this.disabledWidgets=t.disabledWidgets,this.settings=t,this.enabled=y,this.distribution=u;const E=Array.isArray(window.FUN_DISABLED_EXPERIMENTS)?window.FUN_DISABLED_EXPERIMENTS:[];this.globalDisabled=!d||window.FUN_DISABLE_EXPERIMENTS||-1!==E.indexOf(h)}get isExperimentEnabled(){return((e,t)=>{var n;if(!t)return!1;const{enabled:i,name:s}=t,a=e.get(),o=a&&(null===(n=a.settings[s])||void 0===n?void 0:n.enabled);return i||Boolean(o)})(this.funStorage,this.settings)}getDebugPanelEnabled(){var e,t;const n=null===(e=this.funStorage.get())||void 0===e?void 0:e.settings;return Boolean(n&&(null===(t=n[this.name])||void 0===t?void 0:t.enabled))}get active(){return this.isActive}get variantName(){return this.distribution.currentVariantName}get variantKey(){return this.distribution.currentVariantKey}start(e){if(!this.checkDisabled()&&(this.isInitialized=this.init(),this.isInitialized)){this.activate();const e=this.getTags();this.tracker.setEventTags(e)}}getTags(){const e=[this.experimentId,`${this.experimentId}-${this.variantName}`];return this.excluded&&e.push(`${this.experimentId}-exclusion`),e}isVariant(e){return this.variantKey===e}setVariant(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.distribution.setVariant(e),this.excluded=t;const n=[this.experimentId];this.tracker.removeEventTags(n);const i=this.getTags();this.tracker.setEventTags(i)}restoreVariant(){this.distribution.previousVariantName&&this.setVariant(this.distribution.previousVariantName,!1)}exposure(){this.isActive&&this.tracker.customTrack({type:"testGroupExposed",data:{exclusion:this.excluded,experimentId:this.experimentId,variantName:this.variantName}})}init(){var e,t,n,i;const s=this.getDebugPanelVariant();if(s.variant&&s.enabled)return this.setVariant(s.variant),!0;if(s.enabled&&!s.variant&&(this.excluded=!0),!((e,t)=>{const{disabledAccounts:n,enabledAccounts:i}=e;if(null==n?void 0:n.find((e=>e===t)))return!1;const s=null==i?void 0:i.find((e=>e===t));return!((null==i?void 0:i.length)&&!s)})(this.settings,this.companyKey))return!1;const a=null===(e=this.enabledWidgets)||void 0===e?void 0:e.find((e=>e===this.widgetKey));if((null===(t=this.enabledWidgets)||void 0===t?void 0:t.length)&&!a)return!1;const o=null===(n=this.disabledWidgets)||void 0===n?void 0:n.find((e=>e===this.widgetKey));return!((null===(i=this.disabledWidgets)||void 0===i?void 0:i.length)&&o||(this.distribution.initCurrentVariantName(),0))}activate(){this.isActive?this.sentry.captureException(new Gt(this.name)):this.isActive=!0}checkDisabled(){const e=this.getDebugPanelExperimentsSettings();if(e){const t=e[this.name];if(t&&t.enabled)return!1}return!this.enabled||this.globalDisabled}getDebugPanelExperimentsSettings(){const e=this.funStorage.get();return"object"!=typeof e?(this.sentry.captureException(new qt(e)),null):(null==e?void 0:e.settings)||null}getDebugPanelVariant(){var e;const t=null===(e=this.funStorage.get())||void 0===e?void 0:e.settings;if(!t)return{enabled:!1};const n=t[this.name];return n&&(null==n?void 0:n.enabled)?{enabled:!0,variant:n.variant}:{enabled:!1}}}class zt extends Yt{constructor(){super(...arguments),this.isExposed=!1}get isTestGroup(){return this.isActive&&(this.isVariant(Pt.TEST_1)||this.isVariant(Pt.TEST_2)||this.isVariant(Pt.TEST_3))}get isFirstTestGroup(){return this.isActive&&this.isVariant(Pt.TEST_1)}get isSecondTestGroup(){return this.isActive&&this.isVariant(Pt.TEST_2)}get isThirdTestGroup(){return this.isActive&&this.isVariant(Pt.TEST_3)}get isTestGroupWithUsingAmounts(){return this.isFirstTestGroup||this.isSecondTestGroup}tryExpose(e){e.isAdaptiveSuggestionEnabled&&e.isPreDonationUpsellDataPointEnabled&&(e.upsellFrequency!==W.MONTHLY&&e.upsellFrequency!==W.EVERY_4_WEEKS||this.isExposed||(this.exposure(),this.isExposed=!0))}tryStart(e){this.active||this.canBeStarted(e)&&this.start()}canBeStarted(e){return!!e.isUpsellEnabled}}class Wt extends Yt{constructor(){super(...arguments),this.isExposed=!1}get isTestGroup(){return this.isActive&&(this.isVariant(Nt.TEST_1)||this.isVariant(Nt.TEST_2)||this.isVariant(Nt.TEST_3))}get isFirstTestGroup(){return this.isActive&&this.isVariant(Nt.TEST_1)}get isSecondTestGroup(){return this.isActive&&this.isVariant(Nt.TEST_2)}get isThirdTestGroup(){return this.isActive&&this.isVariant(Nt.TEST_3)}get isTestGroupWithUsingAmounts(){return this.isFirstTestGroup||this.isSecondTestGroup}tryExpose(e){e.isAdaptiveSuggestionEnabled&&e.isPreDonationUpsellDataPointEnabled&&(e.upsellFrequency!==W.MONTHLY&&e.upsellFrequency!==W.EVERY_4_WEEKS||this.isExposed||(this.exposure(),this.isExposed=!0))}tryStart(e){this.active||this.canBeStarted(e)&&this.start()}canBeStarted(e){return!!e.isUpsellEnabled}}!function(e){e.MONEY="money",e.CRYPTO="crypto"}(Ft||(Ft={}));class $t extends Yt{tryStart(e){this.canBeStarted(e)&&(this.isActive||super.start())}isTestGroup(){return this.isActive&&this.isVariant(mt.TEST)}canBeStarted(e){return e.flowType===Ft.MONEY}}class Xt extends Yt{tryStart(e){this.canBeStarted(e)&&(this.isActive||super.start())}isTestGroup(){return this.isActive&&this.isVariant(pt.TEST)}canBeStarted(e){return e.flowType===Ft.MONEY}}!function(e){e.TOP_40="40",e.TOP_20="20",e.TOP_10="10",e.TOP_5="5",e.TOP_3="3",e.TOP_2="2",e.TOP_1="1",e.TOP_0_5="0_5",e.TOP_0_1="0_1",e.NONE="none"}(jt||(jt={})),function(e){e.TEST_1="test1",e.TEST_2="test2"}(Bt||(Bt={}));class Qt extends Yt{constructor(){super(...arguments),this.isUpsellApplied=!1,this.exposed=!1,this.donorRating=null}get isTestGroup1(){return this.isActive&&this.isVariant(yt.TEST_1)}get isTestGroup2(){return this.isActive&&this.isVariant(yt.TEST_2)}get testGroupKey(){return this.isTestGroup1?yt.TEST_1:this.isTestGroup2?yt.TEST_2:null}tryStart(e){this.canBeStarted(e)&&(this.donorRating=e.donorRating,super.start())}isEnabled(e){return!!this.canBeStarted(e)&&!!this.active}tryToExpose(){this.exposed||(this.exposure(),this.exposed=!0)}trackBannerVisibility(e){this.tracker.trackCheckoutCustomEvent({type:u.EXPERIMENT_DONOR_RATING_BANNER_TRIGGER,data:{show:e.show,type:this.convertThresholdNameToNumber(e.position),frequency:e.frequency,amount:e.amount,creationDate:this.getCreationDate()}})}trackUpsellVisibility(e){this.tracker.trackCheckoutCustomEvent({type:u.EXPERIMENT_DONOR_RATING_UPSELL_TOOLTIP_TRIGGER,data:{show:e.position!==jt.NONE,type:this.convertThresholdNameToNumber(e.position),frequency:e.frequency,amount:e.amount,upsellAmount:e.upsellAmount,creationDate:this.getCreationDate()}})}trackUpsellClick(e){this.tracker.trackCheckoutCustomEvent({type:u.EXPERIMENT_DONOR_RATING_UPSELL_CLICK,data:{type:this.convertThresholdNameToNumber(e.position),frequency:e.frequency,amount:e.amount,upsellAmount:e.upsellAmount,creationDate:this.getCreationDate()}})}getCreationDate(){var e,t;return null!==(t=null===(e=this.donorRating)||void 0===e?void 0:e.date)&&void 0!==t?t:""}convertThresholdNameToNumber(e){return e===jt.NONE?0:Number(Qt.THRESHOLD_NAME_MAP[e])}isDonorRatingTopExists(e){const{donorRating:t,enabledFrequencies:n}=e;return!!t&&(n.some((e=>void 0!==t.control[e]))||n.some((e=>void 0!==t.test1[e]))||n.some((e=>void 0!==t.test2[e])))}canBeStarted(e){return!e.isMatchingEnabled&&!!this.isDonorRatingTopExists(e)}}Qt.DEBOUNCE_TIMEOUT=500,Qt.THRESHOLD_NAME_MAP={[jt.TOP_40]:"40",[jt.TOP_20]:"20",[jt.TOP_10]:"10",[jt.TOP_5]:"5",[jt.TOP_3]:"3",[jt.TOP_2]:"2",[jt.TOP_1]:"1",[jt.TOP_0_5]:"0.5",[jt.TOP_0_1]:"0.1",[jt.NONE]:""};class Zt extends Yt{constructor(){super(...arguments),this.hideTimeoutId=null,this.isUpsellApplied=!1,this.exposed=!1,this.donorRating=null}get isTestGroup1(){return this.isActive&&this.isVariant(gt.TEST_1)}get isTestGroup2(){return this.isActive&&this.isVariant(gt.TEST_2)}get testGroupKey(){return this.isTestGroup1?gt.TEST_1:this.isTestGroup2?gt.TEST_2:null}tryStart(e){this.canBeStarted(e)&&(this.donorRating=e.donorRating,super.start())}isEnabled(e){return!!this.canBeStarted(e)&&!!this.active}tryToExpose(){this.exposed||(this.exposure(),this.exposed=!0)}trackBannerVisibility(e){this.tracker.trackCheckoutCustomEvent({type:u.EXPERIMENT_DONOR_RATING_BANNER_TRIGGER,data:{show:e.show,type:this.convertThresholdNameToNumber(e.position),frequency:e.frequency,amount:e.amount,creationDate:this.getCreationDate()}})}trackUpsellVisibility(e){this.tracker.trackCheckoutCustomEvent({type:u.EXPERIMENT_DONOR_RATING_UPSELL_TOOLTIP_TRIGGER,data:{show:e.position!==jt.NONE,type:this.convertThresholdNameToNumber(e.position),frequency:e.frequency,amount:e.amount,upsellAmount:e.upsellAmount,creationDate:this.getCreationDate()}})}trackUpsellClick(e){this.tracker.trackCheckoutCustomEvent({type:u.EXPERIMENT_DONOR_RATING_UPSELL_CLICK,data:{type:this.convertThresholdNameToNumber(e.position),frequency:e.frequency,amount:e.amount,upsellAmount:e.upsellAmount,creationDate:this.getCreationDate()}})}getCreationDate(){var e,t;return null!==(t=null===(e=this.donorRating)||void 0===e?void 0:e.date)&&void 0!==t?t:""}convertThresholdNameToNumber(e){return e===jt.NONE?0:Number(Zt.THRESHOLD_NAME_MAP[e])}isDonorRatingTopExists(e){const{donorRating:t,enabledFrequencies:n}=e;return!!t&&(n.some((e=>void 0!==t.control[e]))||n.some((e=>void 0!==t.test1[e]))||n.some((e=>void 0!==t.test2[e])))}canBeStarted(e){return!!this.isDonorRatingTopExists(e)}}Zt.BANNER_VISIBILITY_TIMEOUT=3e3,Zt.DEBOUNCE_TIMEOUT=500,Zt.THRESHOLD_NAME_MAP={[jt.TOP_40]:"40",[jt.TOP_20]:"20",[jt.TOP_10]:"10",[jt.TOP_5]:"5",[jt.TOP_3]:"3",[jt.TOP_2]:"2",[jt.TOP_1]:"1",[jt.TOP_0_5]:"0.5",[jt.TOP_0_1]:"0.1",[jt.NONE]:""};class Jt extends Yt{constructor(){super(...arguments),this.exposed=!1}get isTestGroup(){return this.isTestGroup1||this.isTestGroup2}get isTestGroup1(){return this.isActive&&this.isVariant(Tt.TEST_1)}get isTestGroup2(){return this.isActive&&this.isVariant(Tt.TEST_2)}tryStart(e){this.isActive||this.canBeStarted(e)&&this.start()}isEnabled(e){return!!this.canBeStarted(e)&&!!this.active}tryToExpose(){this.exposed||(this.exposure(),this.exposed=!0)}canBeStarted(e){var t,n,i;if(e.isCustomerTitleEnabled)return!1;const s=null===(t=e.allowedPaymentMethods[D._h.GOOGLE_PAY])||void 0===t?void 0:t.visible,a=null===(n=e.allowedPaymentMethods[D._h.APPLE_PAY])||void 0===n?void 0:n.visible,o=null===(i=e.allowedPaymentMethods[D._h.PAYPAL])||void 0===i?void 0:i.visible;return!(!s&&!a&&o&&e.isPhoneRequired)&&(s||a||o)}}class en extends Yt{constructor(){super(...arguments),this.exposed=!1}get isTestGroup(){return this.isTestGroup1||this.isTestGroup2}get isTestGroup1(){return this.isActive&&this.isVariant(_t.TEST_1)}get isTestGroup2(){return this.isActive&&this.isVariant(_t.TEST_2)}tryStart(e){this.isActive||this.canBeStarted(e)&&this.start()}isEnabled(e){return!!this.canBeStarted(e)&&!!this.active}tryToExpose(){this.exposed||(this.exposure(),this.exposed=!0)}canBeStarted(e){var t,n,i;if(e.isCustomerTitleEnabled)return!1;if(!e.isMobile&&e.isTributeFilled)return!1;if(!e.isMobile&&e.isOnBehalfOfEnabled)return!1;const s=null===(t=e.allowedPaymentMethods[D._h.GOOGLE_PAY])||void 0===t?void 0:t.visible,a=null===(n=e.allowedPaymentMethods[D._h.APPLE_PAY])||void 0===n?void 0:n.visible,o=null===(i=e.allowedPaymentMethods[D._h.PAYPAL])||void 0===i?void 0:i.visible;return!(!s&&!a&&o&&e.isPhoneRequired)&&(s||a||o)}}class tn extends Yt{constructor(){super(...arguments),this.excludedLocales=[ne.D.IT,ne.D.PL_PL]}get isTestGroup(){return this.isTestGroup1||this.isTestGroup2}get isTestGroup1(){return this.isActive&&this.isVariant(Mt.TEST_1)}get isTestGroup2(){return this.isActive&&this.isVariant(Mt.TEST_2)}tryStart(e){this.isActive||this.canBeStarted(e)&&this.start()}isEnabled(e){return!!this.canBeStarted(e)&&!!this.active}canBeStarted(e){const{checkoutConfiguration:t}=e,n=t.element.locale||t.environmentConfig.locale;if(this.excludedLocales.includes(n))return!1;if(!t.company.recurringPlans.annual)return!1;const i=t.enabledFrequencies;return!(2!==i.length||!i.includes(W.ONCE)||!i.includes(W.MONTHLY))}}class nn extends Yt{constructor(){super(...arguments),this.excludedLocales=[ne.D.IT,ne.D.PL_PL]}get isTestGroup(){return this.isTestGroup1||this.isTestGroup2}get isTestGroup1(){return this.isActive&&this.isVariant(Rt.TEST_1)}get isTestGroup2(){return this.isActive&&this.isVariant(Rt.TEST_2)}tryStart(e){this.isActive||this.canBeStarted(e)&&this.start()}isEnabled(e){return!!this.canBeStarted(e)&&!!this.active}canBeStarted(e){const{checkoutConfiguration:t}=e,n=t.element.locale||t.environmentConfig.locale;if(this.excludedLocales.includes(n))return!1;if(!t.company.recurringPlans.annual)return!1;const i=t.enabledFrequencies;return!(2!==i.length||!i.includes(W.ONCE)||!i.includes(W.MONTHLY)||i.some((e=>t.campaign.config.frequencies[e].hintsEnabled)))}}class sn extends Yt{constructor(){super(...arguments),this._allowedFrequencies=[W.ONCE,W.MONTHLY],this._allowedLocales=[ne.D.EN_US,ne.D.EN_GB,ne.D.EN_CA]}get isTestGroup(){return[dt.TEST_1,dt.TEST_2].some((e=>this.isVariantTestGroup(e)))}isVariantTestGroup(e){return this.isActive&&this.isVariant(e)}isTestGroup1(){return this.isVariantTestGroup(dt.TEST_1)}isTestGroup2(){return this.isVariantTestGroup(dt.TEST_2)}tryStart(e){this.isActive||this.canBeStarted(e)&&super.start()}canBeStarted(e){return!!this._allowedLocales.includes(e.locale)&&(!e.isMobile&&!(!this._allowedFrequencies.every((t=>e.enabledFrequencies.includes(t)))||e.isTributeEnabled&&e.isDesignationEnabled&&e.isImpactDescriptionEnabled||!e.isFontsLoaded))}}class an extends Yt{constructor(){super(...arguments),this._allowedFrequencies=[W.ONCE,W.MONTHLY],this._allowedLocales=[ne.D.EN_US,ne.D.EN_GB,ne.D.EN_CA]}get isTestGroup(){return this.isActive&&this.isVariant(ht.TEST)}isVariantTestGroup(e){return this.isActive&&this.isVariant(e)}tryStart(e){this.isActive||this.canBeStarted(e)&&super.start()}canBeStarted(e){return!!this._allowedLocales.includes(e.locale)&&(!!e.isMobile&&(!!e.isFontsLoaded&&!!this._allowedFrequencies.every((t=>e.enabledFrequencies.includes(t)))))}}class on extends Yt{get isTestGroup(){return this.isActive&&this.isVariant(lt.TEST)}tryStart(e){this.isActive||this.canBeStarted(e)&&super.start()}canBeStarted(e){return!!e.isPostDonationUpsellEnabled&&!!e.isPaid}isEnabled(e){return this.canBeStarted(e)&&this.isTestGroup}}class rn extends Yt{get isTestGroup(){return this.isActive&&this.isVariant(ct.TEST)}tryStart(e){this.isActive||this.canBeStarted(e)&&super.start()}canBeStarted(e){return!!e.isPostDonationUpsellEnabled&&!!e.isPaid}isEnabled(e){return this.canBeStarted(e)&&this.isTestGroup}}class cn extends Yt{constructor(){super(...arguments),this.isExposed=!1}get isTestGroup(){return this.isActive&&this.isVariant(Et.TEST)}tryExpose(e){e.isAdaptiveSuggestionEnabled&&e.isPreDonationUpsellDataPointEnabled&&(e.upsellFrequency!==W.MONTHLY&&e.upsellFrequency!==W.EVERY_4_WEEKS||this.isExposed||(this.exposure(),this.isExposed=!0))}tryStart(e){this.active||this.canBeStarted(e)&&this.start()}canBeStarted(e){return!!e.isUpsellEnabled}}class ln extends Yt{constructor(){super(...arguments),this.isExposed=!1}get isTestGroup(){return this.isActive&&this.isVariant(St.TEST)}tryExpose(e){e.isAdaptiveSuggestionEnabled&&e.isPreDonationUpsellDataPointEnabled&&(e.upsellFrequency!==W.MONTHLY&&e.upsellFrequency!==W.EVERY_4_WEEKS||this.isExposed||(this.exposure(),this.isExposed=!0))}tryStart(e){this.active||this.canBeStarted(e)&&this.start()}canBeStarted(e){return!!e.isUpsellEnabled}}var un,dn,hn,mn,pn=n(8461);!function(e){e.GOOGLE_PLACES="google-places",e.LOB="lob",e.LOQATE="loqate"}(un||(un={})),function(e){e.DELIVERABLE="deliverable",e.UNDELIVERABLE="undeliverable"}(dn||(dn={})),function(e){e[e.STREET=200]="STREET",e[e.APARTMENT=200]="APARTMENT",e[e.CITY=40]="CITY",e[e.STATE=200]="STATE",e[e.ZIP=100]="ZIP"}(hn||(hn={})),function(e){e.AFGHANISTAN="AF",e.ALAND_ISLANDS="AX",e.ALBANIA="AL",e.ALGERIA="DZ",e.AMERICAN_SAMOA="AS",e.ANDORRA="AD",e.ANGOLA="AO",e.ANGUILLA="AI",e.ANTIGUA_AND_BARBUDA="AG",e.ARGENTINA="AR",e.ARMENIA="AM",e.ARUBA="AW",e.AUSTRALIA="AU",e.AUSTRIA="AT",e.AZERBAIJAN="AZ",e.BAHAMAS="BS",e.BAHRAIN="BH",e.BANGLADESH="BD",e.BARBADOS="BB",e.BELARUS="BY",e.BELGIUM="BE",e.BELIZE="BZ",e.BENIN="BJ",e.BERMUDA="BM",e.BHUTAN="BT",e.BOLIVIA="BO",e.BONAIRE="BQ",e.BOSNIA_AND_HERZEGOVINA="BA",e.BOTSWANA="BW",e.BRAZIL="BR",e.BRITISH_INDIAN_OCEAN_TERRITORY="IO",e.BRUNEI="BN",e.BULGARIA="BG",e.BURKINA_FASO="BF",e.BURUNDI="BI",e.CABO_VERDE="CV",e.CAMBODIA="KH",e.CAMEROON="CM",e.CANADA="CA",e.CAYMAN_ISLANDS="KY",e.CENTRAL_AFRICAN_REPUBLIC="CF",e.CHAD="TD",e.CHILE="CL",e.CHINA="CN",e.CHRISTMAS_ISLAND="CX",e.COCOS_KEELING_ISLANDS="CC",e.COLOMBIA="CO",e.COMOROS="KM",e.COOK_ISLANDS="CK",e.COSTA_RICA="CR",e.CROATIA="HR",e.CUBA="CU",e.CURACAO="CW",e.CYPRUS="CY",e.CZECH_REPUBLIC="CZ",e.COTE_DIVOIRE="CI",e.DEMOCRATIC_REPUBLIC_OF_THE_CONGO="CD",e.DENMARK="DK",e.DJIBOUTI="DJ",e.DOMINICA="DM",e.DOMINICAN_REPUBLIC="DO",e.ECUADOR="EC",e.EGYPT="EG",e.EL_SALVADOR="SV",e.EQUATORIAL_GUINEA="GQ",e.ERITREA="ER",e.ESTONIA="EE",e.ETHIOPIA="ET",e.FALKLAND_ISLANDS="FK",e.FAROE_ISLANDS="FO",e.FEDERATED_STATES_OF_MICRONESIA="FM",e.FIJI="FJ",e.FINLAND="FI",e.FORMER_YUGOSLAV_REPUBLIC_OF_MACEDONIA="MK",e.FRANCE="FR",e.FRENCH_GUIANA="GF",e.FRENCH_POLYNESIA="PF",e.FRENCH_SOUTHERN_TERRITORIES="TF",e.GABON="GA",e.GAMBIA="GM",e.GEORGIA="GE",e.GERMANY="DE",e.GHANA="GH",e.GIBRALTAR="GI",e.GREECE="GR",e.GREENLAND="GL",e.GRENADA="GD",e.GUADELOUPE="GP",e.GUAM="GU",e.GUATEMALA="GT",e.GUERNSEY="GG",e.GUINEA="GN",e.GUINEA_BISSAU="GW",e.GUYANA="GY",e.HAITI="HT",e.HOLY_SEE="VA",e.HONDURAS="HN",e.HONG_KONG="HK",e.HUNGARY="HU",e.ICELAND="IS",e.INDIA="IN",e.INDONESIA="ID",e.IRAN_ISLAMIC_REPUBLIC_OF="IR",e.IRAQ="IQ",e.IRELAND="IE",e.ISLE_OF_MAN="IM",e.ISRAEL="IL",e.ITALY="IT",e.JAMAICA="JM",e.JAPAN="JP",e.JERSEY="JE",e.JORDAN="JO",e.KAZAKHSTAN="KZ",e.KENYA="KE",e.KIRIBATI="KI",e.KUWAIT="KW",e.KYRGYZSTAN="KG",e.LAOS="LA",e.LATVIA="LV",e.LEBANON="LB",e.LESOTHO="LS",e.LIBERIA="LR",e.LIBYA="LY",e.LIECHTENSTEIN="LI",e.LITHUANIA="LT",e.LUXEMBOURG="LU",e.MACAU="MO",e.MADAGASCAR="MG",e.MALAWI="MW",e.MALAYSIA="MY",e.MALDIVES="MV",e.MALI="ML",e.MALTA="MT",e.MARSHALL_ISLANDS="MH",e.MARTINIQUE="MQ",e.MAURITANIA="MR",e.MAURITIUS="MU",e.MAYOTTE="YT",e.MEXICO="MX",e.MOLDOVA="MD",e.MONACO="MC",e.MONGOLIA="MN",e.MONTENEGRO="ME",e.MONTSERRAT="MS",e.MOROCCO="MA",e.MOZAMBIQUE="MZ",e.MYANMAR="MM",e.NAMIBIA="NA",e.NAURU="NR",e.NEPAL="NP",e.NETHERLANDS="NL",e.NEW_CALEDONIA="NC",e.NEW_ZEALAND="NZ",e.NICARAGUA="NI",e.NIGER="NE",e.NIGERIA="NG",e.NIUE="NU",e.NORFOLK_ISLAND="NF",e.NORTH_KOREA="KP",e.NORTHERN_MARIANA_ISLANDS="MP",e.NORWAY="NO",e.OMAN="OM",e.PAKISTAN="PK",e.PALAU="PW",e.PANAMA="PA",e.PAPUA_NEW_GUINEA="PG",e.PARAGUAY="PY",e.PERU="PE",e.PHILIPPINES="PH",e.PITCAIRN="PN",e.POLAND="PL",e.PORTUGAL="PT",e.PUERTO_RICO="PR",e.QATAR="QA",e.REPUBLIC_OF_THE_CONGO="CG",e.ROMANIA="RO",e.RUSSIA="RU",e.RWANDA="RW",e.REUNION="RE",e.SAINT_BARTHELEMY="BL",e.SAINT_HELENA="SH",e.SAINT_KITTS_AND_NEVIS="KN",e.SAINT_LUCIA="LC",e.SAINT_MARTIN="MF",e.SAINT_PIERRE_AND_MIQUELON="PM",e.SAINT_VINCENT_AND_THE_GRENADINES="VC",e.SAMOA="WS",e.SAN_MARINO="SM",e.SAO_TOME_AND_PRINCIPE="ST",e.SAUDI_ARABIA="SA",e.SENEGAL="SN",e.SERBIA="RS",e.SEYCHELLES="SC",e.SIERRA_LEONE="SL",e.SINGAPORE="SG",e.SINT_MAARTEN="SX",e.SLOVAKIA="SK",e.SLOVENIA="SI",e.SOLOMON_ISLANDS="SB",e.SOMALIA="SO",e.SOUTH_AFRICA="ZA",e.SOUTH_GEORGIA_AND_THE_SOUTH_SANDWICH_ISLANDS="GS",e.SOUTH_KOREA="KR",e.SOUTH_SUDAN="SS",e.SPAIN="ES",e.SRI_LANKA="LK",e.STATE_OF_PALESTINE="PS",e.SUDAN="SD",e.SURINAME="SR",e.SVALBARD_AND_JAN_MAYEN="SJ",e.SWAZILAND="SZ",e.SWEDEN="SE",e.SWITZERLAND="CH",e.SYRIAN_ARAB_REPUBLIC="SY",e.TAIWAN="TW",e.TAJIKISTAN="TJ",e.TANZANIA="TZ",e.THAILAND="TH",e.TIMOR_LESTE="TL",e.TOGO="TG",e.TOKELAU="TK",e.TONGA="TO",e.TRINIDAD_AND_TOBAGO="TT",e.TUNISIA="TN",e.TURKEY="TR",e.TURKMENISTAN="TM",e.TURKS_AND_CAICOS_ISLANDS="TC",e.TUVALU="TV",e.UGANDA="UG",e.UKRAINE="UA",e.UNITED_ARAB_EMIRATES="AE",e.UNITED_KINGDOM="GB",e.UNITED_STATES_MINOR_OUTLYING_ISLANDS="UM",e.UNITED_STATES_OF_AMERICA="US",e.URUGUAY="UY",e.UZBEKISTAN="UZ",e.VANUATU="VU",e.VENEZUELA="VE",e.VIETNAM="VN",e.VIRGIN_ISLANDS_BRITISH="VG",e.VIRGIN_ISLANDS_US="VI",e.WALLIS_AND_FUTUNA="WF",e.WESTERN_SAHARA="EH",e.YEMEN="YE",e.ZAMBIA="ZM",e.ZIMBABWE="ZW"}(mn||(mn={}));class gn{constructor(e,t,n){this.sentry=e,this.requestService=t,this.config=n,this.baseURL="",this.basePrefix="",(null==n?void 0:n.baseURL)&&(this.baseURL=n.baseURL)}setForcedProviderType(e){this.forcedProviderType=e}getForcedProviderType(e){const{restrictCountries:t}=e;switch(t&&t[0]){case D.tg.UNITED_KINGDOM:case D.tg.IRELAND:return un.LOQATE;default:return}}getPlaces(e){var t;const{customData:n,input:i,sessionToken:s,restrictCountries:a}=e,o=this.getForcedProviderType({restrictCountries:a});return this.requestService.get({url:`${this.baseURL}${this.basePrefix}/addresses/autocomplete`,withCredentials:!0,headers:Object.assign(Object.assign({},null===(t=this.config)||void 0===t?void 0:t.fundraiseupAddressProviderHeaders),{Accept:"application/json"}),params:{customData:pn.stringify(n),input:i,sessionToken:s,restrictCountries:a,forceAddressProviderType:o},rejectOnInvalid:!0}).then((e=>ue.isFailure(e)?(this.sentry.captureException(new ce.Ki,{extra:{failureResult:e.failureResult},tags:{service:gn.name}}),[]):e.successResult)).catch((e=>(this.sentry.captureException(e,{tags:{service:gn.name}}),[])))}shouldFindSubplaces(){return!1}getSubplaces(){return Promise.reject(new Error("There is no subplaces in fundraiseup provider"))}getDetails(e){var t;const{customData:n,place:i,sessionToken:s,restrictCountries:a}=e,o=this.getForcedProviderType({restrictCountries:a});if(i.address)return Promise.resolve(i.address);if(!i.placeId)return Promise.reject(new Error("Nor address field neither placeId field is defined in place object, something gone wrong"));const{placeId:r}=i;return this.requestService.get({url:`${this.baseURL}${this.basePrefix}/addresses/${r}`,withCredentials:!0,headers:Object.assign(Object.assign({},null===(t=this.config)||void 0===t?void 0:t.fundraiseupAddressProviderHeaders),{Accept:"application/json"}),params:{customData:pn.stringify(n),sessionToken:s,restrictCountries:a,forceAddressProviderType:o},rejectOnInvalid:!0}).then((e=>ue.isFailure(e)?Promise.reject(new ce.Ki):e.successResult))}}const yn={[W.DAILY]:[2e4,1e4,5e3,3e3,1e3,500],[W.WEEKLY]:[2e4,1e4,5e3,3e3,1e3,500],[W.BIWEEKLY]:[2e4,1e4,5e3,3e3,1e3,500],[W.EVERY_4_WEEKS]:[2e4,1e4,5e3,3e3,1e3,500],[W.MONTHLY]:[2e4,1e4,5e3,3e3,1e3,500],[W.BIMONTHLY]:[2e4,1e4,5e3,3e3,1e3,500],[W.QUARTERLY]:[2e4,1e4,5e3,3e3,1e3,500],[W.SEMIANNUAL]:[2e4,1e4,5e3,3e3,1e3,500],[W.ANNUAL]:[2e4,1e4,5e3,3e3,1e3,500],[W.ONCE]:[1e5,5e4,25e3,1e4,5e3,2500]},fn="paymentSession",En={[W.ONCE]:10,[W.ANNUAL]:20,[W.SEMIANNUAL]:30,[W.QUARTERLY]:40,[W.MONTHLY]:50,[W.EVERY_4_WEEKS]:60,[W.BIMONTHLY]:70,[W.WEEKLY]:80,[W.BIWEEKLY]:90,[W.DAILY]:100},Sn=[500,1e3,3e3],vn=[2500,5e3,1e4],An=[500,1e3,3e3,5e3,1e4,2e4],Cn=[2500,5e3,1e4,25e3,5e4,1e5],Pn=2500;class Nn extends gn{constructor(e,t,n,i){super(e,t,n),this.sentry=e,this.requestService=t,this.config=n,this.checkoutSessionTokenService=i}getPlaces(e){var t,n,i;const{customData:s,input:a,sessionToken:o,restrictCountries:r}=e,c=(null===(t=this.checkoutSessionTokenService)||void 0===t?void 0:t.token)||(null==s?void 0:s.token);return c?this.requestService.get({url:`${this.baseURL}/${fn}/${c}/addresses/autocomplete`,withCredentials:!0,headers:Object.assign(Object.assign({},null===(n=this.config)||void 0===n?void 0:n.fundraiseupAddressProviderHeaders),{Accept:"application/json"}),params:{input:a,sessionToken:o,restrictCountries:r,forceAddressProviderType:this.getForcedProviderType({restrictCountries:r}),locale:null===(i=this.config)||void 0===i?void 0:i.locale},rejectOnInvalid:!0}).then((e=>ue.isFailure(e)?(this.sentry.captureException(new ce.Ki,{extra:{failureResult:e.failureResult},tags:{service:gn.name}}),[]):e.successResult)):Promise.reject(new Error("Expected the widgetSession token"))}getDetails(e){var t,n,i;const{customData:s,place:a,sessionToken:o,restrictCountries:r}=e;if(a.address)return Promise.resolve(a.address);if(!a.placeId)return Promise.reject(new Error("Nor address field neither placeId field is defined in place object, something gone wrong"));const{placeId:c}=a,l=(null===(t=this.checkoutSessionTokenService)||void 0===t?void 0:t.token)||(null==s?void 0:s.token);return l?this.requestService.get({url:`${this.baseURL}/${fn}/${l}/addresses/${c}`,withCredentials:!0,headers:Object.assign(Object.assign({},null===(n=this.config)||void 0===n?void 0:n.fundraiseupAddressProviderHeaders),{Accept:"application/json"}),params:{sessionToken:o,forceAddressProviderType:this.getForcedProviderType({restrictCountries:r}),locale:null===(i=this.config)||void 0===i?void 0:i.locale},rejectOnInvalid:!0}).then((e=>ue.isFailure(e)?Promise.reject(new ce.Ki):e.successResult)):Promise.reject(new Error("Expected the widgetSession token"))}}function bn(){return function(){if(!function(){try{return void 0!==window.Intl}catch(e){return!1}}())return;const e=window.Intl;if(e&&"object"==typeof e&&"function"==typeof e.DateTimeFormat){const t=new e.DateTimeFormat("en-US");if("object"!=typeof t)return;const n="function"==typeof t.resolvedOptions&&t.resolvedOptions();if("object"!=typeof n)return;const i=n.timeZone;if(!i)return;return i}}()||function(){const e=-(new Date).getTimezoneOffset()/60;return e>=0?`UTC+${e}`:`UTC${e}`}()}const Dn={isFallback:!0},Tn="USD";class _n{constructor(e){this._options=e,this._suggestions={},this._fetchCallsCount={}}getSuggestionRequestDurationMs(e){const t=this._suggestions[e];return(null==t?void 0:t.requestDurationMs)||0}isSuggestionRequested(e){const t=this._suggestions[e];return Boolean(null==t?void 0:t.isSuggestionRequested)}getSuggestion(e){const t=this._suggestions[e];return t?t.suggestion:Dn}getSuggestionFetchCallsCount(e){return this._fetchCallsCount[e]||0}fetchSuggestion(e,t){return(0,c.sH)(this,void 0,void 0,(function*(){var n,i;if(this.needFetchSuggestion()&&!this.isSuggestionRequested(e)){this._suggestions[e]={isSuggestionRequested:!0,suggestion:Dn};try{const s=performance.now(),a=yield Promise.race([this.timeoutPromise,this.request(e,t)]);let o;(null===(n=a.data.v3)||void 0===n?void 0:n.isFallback)?o=a.data.v3:(null===(i=a.data.v3)||void 0===i?void 0:i.presets)&&(o={presets:this.convertAmountOptions(a.data.v3.presets,e),isFallback:!1}),this._suggestions[e].suggestion=a.data.isFallback?a.data:{presets:this.convertAmountOptions(a.data.presets,e),isFallback:!1,v3:o},this._suggestions[e].requestDurationMs=Math.round(performance.now()-s)}catch(t){this._suggestions[e]={suggestion:Dn,requestDurationMs:0}}}}))}get timeoutPromise(){return new Promise((e=>{setTimeout((()=>{e({data:Dn,valid:!0})}),1500)}))}get clientTimeOptions(){const e=new Date;return{clientTimeZone:bn(),clientWeekday:e.getDay(),clientHour:e.getHours(),eventTime:e.toISOString()}}needFetchSuggestion(){return!this._options.experimentsStorage||!this._options.experimentSettings||((e,t)=>{var n;if(!t)return!1;const{enabled:i,name:s}=t,a=e.get(),o=a&&(null===(n=a.settings[s])||void 0===n?void 0:n.enabled);return i||Boolean(o)})(this._options.experimentsStorage,this._options.experimentSettings)}convertAmountOptions(e,t){if(t===Tn||!this._options.currencyService)return e;const n={};for(const[i,s]of Object.entries(e))n[i]={currency:t,defaultAmount:this._options.currencyService.convert(s.defaultAmount,Tn,t),amountOptions:s.amountOptions.map((e=>this._options.currencyService.convert(e,Tn,t)))};return n}request(e,t){return(0,c.sH)(this,void 0,void 0,(function*(){try{const n=yield(0,ce.Em)({url:`${this._options.apiHost}/checkout/getAmountPresets?token=${this._options.sessionTokenService.token}`,method:"POST",headers:{"Content-Type":"text/plain; charset=utf-8"},params:Object.assign(Object.assign({},this.getRequestOptions(e)),{version:t})});if(!n.valid)throw new Error("Invalid response");return n}finally{this._fetchCallsCount[e]=this._fetchCallsCount[e]+1||1}}))}getRequestOptions(e){const t=this._options.currencyRates[e],n=Object.assign(Object.assign({companyKey:this._options.companyKey,campaignKey:this._options.campaignKey,clientLocale:this._options.clientLocale,utmSource:this._options.utmSource,currency:e,currencyRate:t,fundraiserKey:this._options.fundraiserKey,fundraiserMemberKey:this._options.fundraiserMemberKey},this.clientTimeOptions),{clientId:this._options.clientId,clientConnectionType:this._options.clientConnectionType,clientDeviceMemory:this._options.clientDeviceMemory,clientHardwareConcurrency:this._options.clientHardwareConcurrency,clientConnectionDownlink:this._options.clientConnectionDownlink,clientDoNotTrack:Boolean(this._options.clientDoNotTrack),clientDevicePixelRatio:this._options.clientDevicePixelRatio,clientBatteryLevel:this._options.clientBatteryLevel,checkoutType:this._options.checkoutType,elementType:this._options.elementType});return this.validateRequestOptionsSilently(n),n}validateRequestOptionsSilently(e){return void 0!==e.currency&&void 0!==e.currencyRate||(this._options.sentry.captureException(new Error("Amount Presets: request body is invalid"),{extra:{options:e}}),!1)}}const kn={isFallback:!0,defaultFrequency:null};class On{constructor(e){this._options=e,this._suggestion=kn,this._requestDurationMs=0,this._fetchCallsCount=0}getMeta(){return{requestDurationMs:this._requestDurationMs,fetchCallsCount:this._fetchCallsCount}}getSuggestion(){return this._suggestion}fetchSuggestion(e){return(0,c.sH)(this,void 0,void 0,(function*(){try{if(this._options.isLighthouse||this._options.isShowcase)return ue.fail(void 0);const t=performance.now(),n=yield Promise.race([this.timeoutPromise,this.request(e)]);return this._suggestion=n.data,this._requestDurationMs=Math.round(performance.now()-t),ue.success(void 0)}catch(e){return this._suggestion=kn,this._requestDurationMs=0,ue.success(void 0)}}))}get clientTimeOptions(){const e=new Date;return{clientTimeZone:bn(),clientWeekday:e.getDay(),clientHour:e.getHours(),eventTime:e.toISOString().replace(/\.\d{3}Z$/,"Z")}}get timeoutPromise(){return new Promise((e=>{setTimeout((()=>{e({data:kn,valid:!0})}),1500)}))}request(e){return(0,c.sH)(this,void 0,void 0,(function*(){try{const t=yield(0,ce.Em)({url:`${this._options.apiHost}/checkout/getDefaultFrequency?token=${this._options.sessionTokenService.token}`,method:"POST",headers:{"Content-Type":"text/plain; charset=utf-8"},params:this.requestOptions(e)});if(!t.valid)throw new Error("Invalid response");return t}finally{this._fetchCallsCount++}}))}requestOptions(e){return Object.assign(Object.assign({},e),this.clientTimeOptions)}}const In=[ne.D.EN_GB],xn={[ne.D.EN_US]:"en_US",[ne.D.EN_GB]:"en_GB",[ne.D.EN_CA]:"en_CA",[ne.D.FR_CA]:"fr_CA",[ne.D.ES]:"es_ES",[ne.D.ES_US]:"es_US",[ne.D.NL]:"nl_NL",[ne.D.NO]:"no_NO",[ne.D.DE]:"de_DE",[ne.D.FI_FI]:"fi_FI",[ne.D.FR_FR]:"fr_FR",[ne.D.AR_001]:"ar_AE",[ne.D.SV]:"sv_SE",[ne.D.IT]:"it_IT",[ne.D.PT_PT]:"pt_PT",[ne.D.PT_BR]:"pt_BR",[ne.D.ZH_CN]:"zh_CN",[ne.D.ZH_TW]:"zh_TW",[ne.D.JA]:"ja_JP",[ne.D.KO]:"ko_KR",[ne.D.HU]:"hu_HU",[ne.D.DA]:"da_DK",[ne.D.RU_RU]:"ru_RU",[ne.D.PL_PL]:"pl_PL"};function wn(e){return xn[e]}var Rn=n(222);const Mn="supporter",Ln="1234@example.com",Un="https://js.stripe.com/v3/";class Fn extends Error{constructor(){super(Fn.errorMessage)}}Fn.errorMessage="Stripe.js could not be loaded";const jn={target:window,apiVersion:"2025-02-24.acacia",deferred:!1,promiseHandlerTimeout:0,locale:ne.D.EN_US};function Bn(e,t,n,i){const s=n.target,a=function(e){return In.includes(e)?e:e.split("-")[0]}(n.locale);return(0,Rn.k0)(Un,n.deferred,s,{},!1,n.loadScriptTimeout).then((()=>new Promise(((i,o)=>{const r=()=>{s.Stripe?i(s.Stripe(e,{stripeAccount:t,apiVersion:n.apiVersion,locale:a})):o(new Fn)};n.promiseHandlerTimeout?setTimeout((()=>{r()}),n.promiseHandlerTimeout):r()})))).catch((e=>{throw e.message.match("js.stripe.com")&&i.captureException(e,{extra:{script:e.message,stripeAccount:t}}),e}))}var Gn=n(2741);const qn=60*Gn.MS.SECOND,Hn=window.devicePixelRatio>1;class Vn extends Error{constructor(e){super("[Stripe Factory]"+e)}}const Kn=new WeakMap;function Yn(e,t){if(e.showcase)return()=>{};let n;const i=()=>(0,c.sH)(this,void 0,void 0,(function*(){if(!e.targetWindow)throw new Vn("target window is not provided");const i=Kn.get(e.targetWindow);i?n=i:(n=function(e,t,n){return(0,c.sH)(this,arguments,void 0,(function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:jn;return function*(){let s;const a=Object.assign({},jn,i);try{return s=yield Bn(e,t,a,n),s}catch(i){return Bn(e,t,Object.assign(Object.assign({},a),{promiseHandlerTimeout:500}),n)}}()}))}(e.publicKey,e.stripeAccount||"",t,{target:e.targetWindow,locale:e.locale,loadScriptTimeout:qn}),Kn.set(e.targetWindow,n))}));return i(),function(){return(0,c.sH)(this,void 0,void 0,(function*(){return n||(yield i(),n)}))}}class zn{constructor(){this.disposables=new Set}static isFunction(e){return"function"==typeof e}run(e){return(0,c.sH)(this,void 0,void 0,(function*(){yield this.initializeCurrencyFilter(),yield this.setLocale(null==e?void 0:e.localeCode),this.initializePageGuardManager(),this.initializePublicJsApi(),this.initializeCookieConsent(),this.initializeUserSession(),this.initializeRouter(),this.initializeTracker(),this.initializeExperiments(),yield this.initializeCurrencyService(),yield this.startFlow(null==e?void 0:e.initialScreen);const t=this.subscribeOnUserInteraction();this.subscribeOnHistoryInteraction(),this.disposables.add(t).add(this.checkoutRouter).add(this.trackerCheckout).add(this.flowManager),this.initializeIFrameRemover()}))}dispose(){this.disposables.forEach((e=>{zn.isFunction(e)?e():e.dispose()}))}}var Wn,$n;!function(e){e.INACTIVITY="inactivity",e.EXIT="exit",e.PAYMENT_ISSUE="paymentIssue",e.REMINDER_REQUEST="reminderRequest"}(Wn||(Wn={})),function(e){e.YES="yes",e.NO="no",e.NOT_GIVEN="notGiven"}($n||($n={}));class Xn{constructor(e){this.checkoutConfiguration=e,this.eventEmitter=new y.A}getOpenParams(){var e,t,n,i,s,a,o,r,c,l,u,d,h,m;const p=this.checkoutConfiguration.campaign,g=this.checkoutConfiguration.external,y=this.checkoutConfiguration.mergedCustomFields;return{customFields:Object.fromEntries(null!==(e=null==y?void 0:y.map((e=>{let{name:t,value:n}=e;return[t,n]})))&&void 0!==e?e:[]),livemode:this.checkoutConfiguration.infrastructureParams.livemode,campaign:{id:p.key,code:p.code||null,name:p.name},utm:{source:(null===(t=g.utm)||void 0===t?void 0:t.source)||(null===(n=this.checkoutConfiguration.infrastructureQueryParams)||void 0===n?void 0:n.utm_source)||"",campaign:(null===(i=g.utm)||void 0===i?void 0:i.campaign)||(null===(s=this.checkoutConfiguration.infrastructureQueryParams)||void 0===s?void 0:s.utm_campaign)||"",medium:(null===(a=g.utm)||void 0===a?void 0:a.medium)||(null===(o=this.checkoutConfiguration.infrastructureQueryParams)||void 0===o?void 0:o.utm_medium)||"",content:(null===(r=g.utm)||void 0===r?void 0:r.content)||(null===(c=this.checkoutConfiguration.infrastructureQueryParams)||void 0===c?void 0:c.utm_content)||"",term:(null===(l=g.utm)||void 0===l?void 0:l.term)||(null===(u=this.checkoutConfiguration.infrastructureQueryParams)||void 0===u?void 0:u.utm_term)||""},element:{id:null===(d=null==g?void 0:g.element)||void 0===d?void 0:d.key,type:null===(h=null==g?void 0:g.element)||void 0===h?void 0:h.title,name:null===(m=null==g?void 0:g.element)||void 0===m?void 0:m.name}}}on(e,t){return this.eventEmitter.on(e,t),this}emitCheckoutOpen(){this.emit(h.OPEN,this.getOpenParams())}emitDonationComplete(e){this.emit(h.DONATION_COMPLETE,Object.assign(Object.assign({},this.getOpenParams()),e))}setDonationParams(e){this.donationParams=e}setIntentParams(e){this.intent=this.formatIntent(e)}getClosePublicJsApiPayload(){if(!this.donationParams)throw new Error("Call setDonationParams first to set public donation params");return Object.assign(Object.assign({},this.getOpenParams()),this.donationParams)}getIntent(){if(void 0===this.intent)throw new Error("Call setIntentParams on close to set public intent params");return this.intent}dispose(){this.eventEmitter.removeAllListeners()}canFormatIntent(e){var t;if(!e)return!1;const n=!!this.checkoutConfiguration.rawExternal.intent,i=(null===(t=this.checkoutConfiguration.external.element)||void 0===t?void 0:t.type)===Ae.JS_API;return!(e.isSavedEmailOnExit===$n.YES)&&(!n||i)}formatIntent(e){var t,n,i,s;if(!this.canFormatIntent(e))return null;const a=this.checkoutConfiguration.external,o=this.checkoutConfiguration.campaign,r=this.checkoutConfiguration.fundraisingPage,c={flowType:e.flowType,campaign:{id:o.key},element:{key:null===(t=a.element)||void 0===t?void 0:t.key,type:null===(n=a.element)||void 0===n?void 0:n.type},checkoutSettings:{customFields:this.checkoutConfiguration.mergedCustomFields,designation:e.checkoutSettings.designation,modifyAmount:e.checkoutSettings.modifyAmount,modifyDesignation:e.checkoutSettings.modifyDesignation},comment:e.comment,donation:e.donation,supporter:e.supporter,tribute:e.tribute,feeCovered:e.feeCovered};if(r){const e=(null===(s=null===(i=a.campaign)||void 0===i?void 0:i.fundraiser)||void 0===s?void 0:s.key)||r.key;c.fundraisingPage={key:e,customerKey:r.admin}}return c}emit(e,t){this.eventEmitter.emit(e,t)}}var Qn,Zn,Jn,ei=n(4995),ti=n.n(ei);!function(e){e.TOP_LEVEL_DOMAIN="topLevelDomain",e.INTENT="intent",e.MESSAGE_BAR="messageBar",e.SOCIAL_PROOF="socialProof",e.POPUP="popup",e.SESSION_AT="sessionAt",e.SESSION_PAGE="sessionPage",e.X_FACTOR="xFactor",e.LIGHTBOX="lightbox",e.LAST_SUCCESS_DONATION_AT="lastSuccessDonationAt",e.FLOATING_BUTTON_POPUP_SHOWN="floatingButtonPopupShown"}(Qn||(Qn={})),function(e){e.POSITIVE="positive",e.NEGATIVE="negative",e.NEUTRAL="neutral"}(Zn||(Zn={})),function(e){e.HAPPY="happy",e.SAD="sad",e.NEUTRAL="neutral"}(Jn||(Jn={}));const ni=/#(.+?)(&|$)/;function ii(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e)return{};const n=/([^=&#?]+)=([^=&#?]+)/gi,i={};for(;;){const s=n.exec(e);if(!s)break;const[,a,o]=s;try{t?i[decodeURIComponent(a)]=decodeURIComponent(o):i[a]=o}catch(e){console.error(e)}}return i}function si(e,t){let n=e;for(;;){if(t(n))return n;if(!n.parentNode)return;n=n.parentNode}}function ai(e,t){if(e.getAttribute)return e.getAttribute("data-"+t)||void 0}function oi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=[];for(const i in e){const s=e[i];t?n.push(`${encodeURIComponent(i)}=${encodeURIComponent(s)}`):n.push(`${i}=${s}`)}return n.join("&")}function ri(e,t){const n=e.storage;let i=0;const s=n.getField(Qn.X_FACTOR);if(s)return Number(s)||0;if(!e.sessionAt)return i;try{const n=Date.now(),s=e.sessionPage,a=n-e.sessionAt;t&&(i+=10),/win/i.test(window.navigator.platform)&&(i-=10),/mac/i.test(window.navigator.platform)&&(i+=5),a>648e4&&(i+=10),s<=2&&(i+=15),s>5&&(i+=5),a<6e3&&(i+=5),a>=18e3&&(i+=10)}catch(e){i=0,console.error(e)}return i&&n.setField(Qn.X_FACTOR,String(i)),i}class ci{static getDefaultFrequency(e){const t=Object.keys(e).find((t=>e[t].enabled&&e[t].default));if(!t)throw new Error("No default frequency found");return t}static getDefaultFrequencyWithOverride(e,t){return t&&this.getEnabledFrequencies(e).includes(t)?t:Object.keys(e).find((t=>e[t].enabled&&e[t].default))||null}static getSecondaryFrequency(e){return Object.keys(e).find((t=>e[t].enabled&&!e[t].default))}static getEnabledFrequencies(e){const t=Object.keys(e).filter((t=>e[t].enabled)).map((e=>e));if(0===t.length)throw new Error("No enabled frequencies found");return this.sortByWeights(t)}static isOnetimeOnly(e){const t=this.getEnabledFrequencies(e);return 1===t.length&&t.includes(W.ONCE)}static isRecurringOnly(e){return!this.getEnabledFrequencies(e).includes(W.ONCE)}static isOnetimeEnabled(e){return this.getEnabledFrequencies(e).includes(W.ONCE)}static isRecurringEnabled(e){return!!this.getEnabledFrequencies(e).find((e=>e!==W.ONCE))}static frequencySettingsToWidgetRepeat(e){const t=this.isOnetimeEnabled(e),n=this.isRecurringEnabled(e);return t&&!n?D.VN.ONLY_ONETIME:!t&&n?D.VN.ONLY_MONTHLY:this.getDefaultFrequency(e)===W.ONCE?D.VN.DEFAULT_ONETIME:D.VN.DEFAULT_MONTHLY}static isFrequencyEnabled(e,t){return null!==t&&(Object.values(W).includes(t)&&ci.getEnabledFrequencies(e).includes(t))}static sortByWeights(e){return e.sort(((e,t)=>En[e]-En[t]))}}var li,ui;!function(e){e.HELPING_HAND_STAGING="FUNTMDMPPAF",e.ISRAELI_AMERICAN_COUNCIL_1="FUNTWQULBUW",e.ISRAELI_AMERICAN_COUNCIL_2="FUNVUTSEZXA",e.ACCESS_FUND_1="FUNFWAWHCAJ",e.ACCESS_FUND_2="FUNYGCGZKAB",e.ACCESS_FUND_3="FUNUVSVAKSL",e.IAC_1="FUNRYLWADLU",e.IAC_2="FUNQNGXYKJA",e.IAC_3="FUNSWLJZBXE",e.IAC_4="FUNALPRPKQD"}(li||(li={})),function(e){e.RECURRING="recurring",e.ONE_TIME="one-time",e.ALL="all"}(ui||(ui={}));var di=n(7028),hi=n(3846);function mi(e){return(0,hi.Ay)(e)}function pi(e){return(0,di.Ay)(mi(e),(e=>e))}const gi=2*Gn.MS.SECOND,yi=5*Gn.MS.SECOND,fi=e=>`https://ucarecdn.com/7a2a472d-06d6-48fc-8c7d-37e313b717e0/-/resize/${e?"1248x":"624x"}/-/format/auto/`;var Ei;!function(e){e.ELEMENT_IMAGE_CARD="elementImageCard",e.ELEMENT_POPUP="elementPopup",e.ELEMENT_QR_CODE="elementQrCode",e.P2P_PHOTO="p2pPhoto",e.P2P_PHOTO_BIG="p2pPhotoBig",e.DONOR_PORTAL_HERO="donorPortalHero",e.DONOR_PORTAL_HERO_REDESIGN="donorPortalHeroRedesign",e.DONOR_PORTAL_FAVICON="donorPortalFavicon",e.DONOR_PORTAL_P2P_GOAL_REACHED="donorPortalP2pGoalReached",e.DONOR_PORTAL_P2P_GOAL_REACHED_REDESIGN="donorPortalP2pGoalReachedRedesign",e.EMAIL_LOGO="emailLogo",e.EMAIL_IMAGE="emailImage",e.EMAIL_TRIBUTE="emailTribute",e.RECEIPT_LOGO="receiptLogo",e.RECEIPT_SIGNATURE="receiptSignature",e.CHECKOUT_LOGO="checkoutLogo",e.CHECKOUT_ASK="checkoutAsk",e.PAGE_LOGO="pageLogo",e.PAGE_MAIN_IMAGE="pageMainImage",e.ORGANIZATION_LOGO="organizationLogo",e.RATE_MATCHING_SPONSOR_LOGO="rateMatchingSponsorLogo"}(Ei||(Ei={}));const Si={[Ei.ELEMENT_IMAGE_CARD]:{width:342,height:356},[Ei.ELEMENT_POPUP]:{width:480,height:270},[Ei.ELEMENT_QR_CODE]:{width:50,height:50},[Ei.P2P_PHOTO]:{width:64,height:64},[Ei.P2P_PHOTO_BIG]:{width:624,height:351},[Ei.DONOR_PORTAL_HERO]:{width:930,height:350},[Ei.DONOR_PORTAL_HERO_REDESIGN]:{width:858,height:320},[Ei.DONOR_PORTAL_FAVICON]:{width:16,height:16},[Ei.DONOR_PORTAL_P2P_GOAL_REACHED]:{width:930,height:290},[Ei.DONOR_PORTAL_P2P_GOAL_REACHED_REDESIGN]:{width:858,height:265},[Ei.EMAIL_LOGO]:{width:80,height:80},[Ei.EMAIL_IMAGE]:{width:580,height:218},[Ei.EMAIL_TRIBUTE]:{width:386,height:263},[Ei.RECEIPT_LOGO]:{width:80,height:80},[Ei.RECEIPT_SIGNATURE]:{width:120,height:120},[Ei.CHECKOUT_LOGO]:{width:50,height:50},[Ei.CHECKOUT_ASK]:{width:516,height:289},[Ei.PAGE_LOGO]:{width:56,height:56},[Ei.PAGE_MAIN_IMAGE]:{width:624,height:351},[Ei.ORGANIZATION_LOGO]:{width:60,height:60},[Ei.RATE_MATCHING_SPONSOR_LOGO]:{width:48,height:48}};function vi(e,t){var n,i,s,a,o;return(null===(i=null===(n=t.campaign)||void 0===n?void 0:n.ask)||void 0===i?void 0:i.show)?null!==(s=t.campaign.ask.title)&&void 0!==s?s:"":null!==(o=null===(a=e.campaignPage)||void 0===a?void 0:a.ask.title)&&void 0!==o?o:""}function Ai(e,t){var n,i,s,a,o,r;return(null===(i=null===(n=t.campaign)||void 0===n?void 0:n.ask)||void 0===i?void 0:i.show)?null!==(s=t.campaign.ask.text)&&void 0!==s?s:"":null!==(r=null===(o=null===(a=e.campaignPage)||void 0===a?void 0:a.ask)||void 0===o?void 0:o.text)&&void 0!==r?r:""}var Ci={getLinks:function(e){var t,n;return(null===(n=null===(t=e.campaignPage)||void 0===t?void 0:t.ask)||void 0===n?void 0:n.links)?[...e.campaignPage.ask.links]:[]},getAskTitle:vi,getLogoImageURL:function(e,t){var n,i,s,a,o,r;return t?null===(s=null===(i=null===(n=e.campaignPage)||void 0===n?void 0:n.ask)||void 0===i?void 0:i.logoImage)||void 0===s?void 0:s.previewUrlRetina:null===(r=null===(o=null===(a=e.campaignPage)||void 0===a?void 0:a.ask)||void 0===o?void 0:o.logoImage)||void 0===r?void 0:r.previewUrl},getMainVideo:function(e){var t,n;return(null===(n=null===(t=e.campaignPage)||void 0===t?void 0:t.ask)||void 0===n?void 0:n.mainVideo)||null},getMainMediaProvider:function(e){var t,n;return(null===(n=null===(t=e.campaignPage)||void 0===t?void 0:t.ask)||void 0===n?void 0:n.mainMediaProvider)||null},getAskDescription:Ai,getAskMainImageURL:function(e,t){var n,i,s,a,o,r;const c=fi(t);return(t?null===(s=null===(i=null===(n=e.campaignPage)||void 0===n?void 0:n.ask)||void 0===i?void 0:i.mainImage)||void 0===s?void 0:s.previewUrlRetina:null===(r=null===(o=null===(a=e.campaignPage)||void 0===a?void 0:a.ask)||void 0===o?void 0:o.mainImage)||void 0===r?void 0:r.previewUrl)||c},getCompanyImageURL:function(e,t){if(!e.logoUuid)return null;const n=t?"x112":"x56";return`https://ucarecdn.com/${e.logoUuid}/-/resize/${n}/-/format/auto/`},getLogoAltText:function(e){var t,n,i;return(null===(i=null===(n=null===(t=e.campaignPage)||void 0===t?void 0:t.ask)||void 0===n?void 0:n.logoImage)||void 0===i?void 0:i.alt)||null},getMainImageAltText:function(e){var t,n,i;return(null===(i=null===(n=null===(t=e.campaignPage)||void 0===t?void 0:t.ask)||void 0===n?void 0:n.mainImage)||void 0===i?void 0:i.alt)||null},getCompanyLogoImageAltText:function(e){return e.logoAlt||null},getShowTabs:function(e,t,n){if(!e)return!1;const i=vi(t,n),s=Ai(t,n),{show:a}=t.ask;return!!a&&Boolean(i)&&Boolean(s)},getFundraiserImageURL:function(e,t){var n;if(!(null===(n=null==e?void 0:e.image)||void 0===n?void 0:n.uuid))return null;if(e.image.width&&e.image.width<1248)return null;if(e.image.height&&e.image.height<702)return null;const i=t?2*Si[Ei.PAGE_MAIN_IMAGE].width:Si[Ei.PAGE_MAIN_IMAGE].width;return`https://ucarecdn.com/${e.image.uuid}/-/resize/${i}x/-/format/auto/`}};function Pi(e,t){var n,i,s;return(null===(i=null===(n=t.campaign)||void 0===n?void 0:n.ask)||void 0===i?void 0:i.show)?null!==(s=t.campaign.ask.title)&&void 0!==s?s:"":e.ask.title}function Ni(e,t){var n,i,s;return(null===(i=null===(n=t.campaign)||void 0===n?void 0:n.ask)||void 0===i?void 0:i.show)?null!==(s=t.campaign.ask.text)&&void 0!==s?s:"":e.ask.text}var bi,Di,Ti,_i,ki,Oi,Ii,xi,wi,Ri,Mi={getLinks:function(e){return[...e.ask.links]},getAskTitle:Pi,getLogoImageURL:function(e,t){var n,i;return t?null===(n=e.ask.logoImage)||void 0===n?void 0:n.previewUrlRetina:null===(i=e.ask.logoImage)||void 0===i?void 0:i.previewUrl},getAskDescription:Ni,getMainVideo:function(e){return e.ask.mainVideo||null},getMainMediaProvider:function(e){return e.ask.mainMediaProvider||null},getAskMainImageURL:function(e,t){var n,i;const s=fi(t);return(t?null===(n=e.ask.mainImage)||void 0===n?void 0:n.previewUrlRetina:null===(i=e.ask.mainImage)||void 0===i?void 0:i.previewUrl)||s},getCompanyImageURL:function(e,t){if(!e.logoUuid)return null;const n=t?"x100":"x50";return`https://ucarecdn.com/${e.logoUuid}/-/resize/${n}/-/format/auto/`},getLogoAltText:function(e){var t;return(null===(t=e.ask.logoImage)||void 0===t?void 0:t.alt)||null},getMainImageAltText:function(e){var t;return(null===(t=e.ask.mainImage)||void 0===t?void 0:t.alt)||null},getCompanyLogoImageAltText:function(e){return e.logoAlt||null},getShowTabs:function(e,t,n){if(!e)return!1;const{show:i}=t.ask;if(!i)return!1;const s=Pi(t,n),a=Ni(t,n);return Boolean(s)&&Boolean(a)},getFundraiserImageURL:function(e,t){var n;if(!(null===(n=null==e?void 0:e.image)||void 0===n?void 0:n.uuid))return null;if(e.image.width&&e.image.width<1248)return null;if(e.image.height&&e.image.height<702)return null;const i=t?2*Si[Ei.CHECKOUT_ASK].width:Si[Ei.CHECKOUT_ASK].width;return`https://ucarecdn.com/${e.image.uuid}/-/resize/${i}x/-/format/auto/`}};!function(e){e.IMAGE="image",e.VIDEO="video"}(bi||(bi={})),function(e){e.RELATIVE="relative",e.ABSOLUTE="absolute"}(Di||(Di={})),function(e){e.TWO_WEEKS="2weeks",e.ONE_MONTH="1month",e.THREE_MONTHS="3months"}(Ti||(Ti={})),function(e){e.ASC="asc",e.DESC="desc"}(_i||(_i={})),function(e){e.WITHOUT="without",e.SELECT="select",e.ASSIGN="assign"}(ki||(ki={})),function(e){e.ENABLED="enabled",e.DISABLED="disabled"}(Oi||(Oi={})),function(e){e.ACTIVE="active",e.DISABLED="disabled",e.AUTO_ARCHIVE="autoArchive"}(Ii||(Ii={})),function(e){e.FULL_NAME="fullName",e.FIRST_NAME_LAST_INITIALS="firstNameLastInitials",e.FIRST_NAME="firstName",e.NONE="none"}(xi||(xi={})),function(e){e.SPECIFIED="specified",e.DETECTED="detected",e.ACTUAL="actual"}(wi||(wi={})),function(e){e.ROUNDED="rounded",e.SHARP="sharp",e.PILL="pill"}(Ri||(Ri={}));var Li;Object.values({"2:1":1.5,"1:1":2,"1:2":3,"1:3":4,"1:4":5,"1:5":6,"1:6":7,"1:7":8,"1:8":9,"1:9":10,"1:10":11}),function(e){e.UP_TO_25="up_to_25",e.UP_TO_35="up_to_35",e.UP_TO_55="up_to_55",e.UP_TO_100="up_to_100",e.UP_TO_150="up_to_150",e.UP_TO_200="up_to_200"}(Li||(Li={}));const Ui={ask:{logoImage:null,mainImage:null,mainVideo:null,mainMediaProvider:bi.IMAGE,text:"",title:"",links:[]},sharing:{twitter:!1,facebook:!1,linkedin:!1,copyLink:!1,email:!1},goal:{hasGoal:!1,amount:0,endDate:null,raisedAmount:0,raisedAmountWithRateMatching:0,donorsCount:0,showTotalRaisedAmount:!1},donorImpact:{show:!1,donorNameType:xi.NONE,showDonorComment:!1,showDonationAmount:!1,showDonationDate:!1,showDonorLocation:!1,currencyShowType:wi.ACTUAL,currency:""},rateMatching:{show:!1,rate:0,sponsor:null,minAmount:0,endDate:null,endDateEnabled:!1,sponsorEnabled:!1,startDate:null,totalAmountLimitEnabled:!1,totalAmountLimit:null,raised:null,remains:null},thankYouScreen:{type:D.N4.THANK_YOU_SCREEN,redirect:{url:null,includeSupporterData:!1},sharing:{link:null,text:null,channels:{twitter:!1,facebook:!1,email:!1,linkedin:!1}}},appearance:{color:"",type:Ri.PILL},multipleDesignations:{enabled:!1}},Fi={isAdaptiveDefaultFrequencySuggestionEnabled:!0},ji={isActive:!0},Bi={enabledForDonationFrequencies:Object.values(W),enabledTargetFrequencies:[W.ANNUAL,W.EVERY_4_WEEKS,W.MONTHLY],amountsMap:{[Li.UP_TO_25]:[500,1e3],[Li.UP_TO_35]:[1e3,1500],[Li.UP_TO_55]:[1500,2e3],[Li.UP_TO_100]:[2e3,2500],[Li.UP_TO_150]:[2500,3e3],[Li.UP_TO_200]:[3e3,4e3]},isAdaptiveSuggestionEnabled:!0},Gi={disabledPaymentMethods:[],isNewIdealPaymentFlowEnabled:!1},qi={isEnabled:!0};class Hi{constructor(e,t,n){this.queryParamsFormatter=e,this.launcherParamsFormatter=t,this.intentParamsFormatter=n}format(){return{state:{donation:{amount:this.donationAmount,amountHintId:this.donationAmountHintId,enabledAmountHintsIds:this.donationEnabledAmountHintsIds,currency:this.donationCurrency,frequency:this.donationFrequency,isAmountEditable:this.isDonationAmountEditable,isEndDateEnabled:this.isDonationEndDateEnabled,isEndDateSelected:this.isDonationEndDateSelected,isFeeCovered:this.isDonationFeeCovered},designation:{id:this.designationId,isEditable:this.isDesignationEditable},tribute:{inHonorOf:this.tributeInHonorOf,type:this.tributeType,isSelected:this.isTributeSelected},comment:this.comment,supporter:{firstName:this.supporterFirstName,lastName:this.supporterLastName,email:this.supporterEmail}},flow:{type:this.flowType,screen:this.screen},campaign:{ask:{show:this.isAskShown,title:this.askTitle,text:this.askText},fundraiser:{key:this.fundraiserKey,customerKey:this.fundraiserCustomerKey},successUrl:this.successUrl},element:{key:this.elementKey,type:this.elementType,title:this.elementTitle,name:this.elementName,locale:this.elementLocale,reminderKey:this.elementReminderKey,splitTestName:this.splitTestName,splitTestVariant:this.splitTestVariant,trackingData:this.elementTrackingData},customFields:this.customFields,utm:{source:this.utmSource,campaign:this.utmCampaign,medium:this.utmMedium,content:this.utmContent,term:this.utmTerm},restore:{token:this.restoreToken,paymentIntentClientSecret:this.restorePaymentIntentClientSecret,clientId:this.restoreClientId},tracker:{eventTags:this.trackerEventTags,embedClientId:this.trackerEmbedClientId}}}get donationAmount(){var e,t;return null!==(t=null!==(e=this.intentParamsFormatter.donationAmount)&&void 0!==e?e:this.launcherParamsFormatter.donationAmount)&&void 0!==t?t:this.queryParamsFormatter.donationAmount}get donationAmountHintId(){var e;return null!==(e=this.intentParamsFormatter.donationAmountHintId)&&void 0!==e?e:this.launcherParamsFormatter.donationAmountHintId}get donationEnabledAmountHintsIds(){return this.launcherParamsFormatter.donationEnabledAmountHintsIds}get donationCurrency(){var e,t;return null!==(t=null!==(e=this.intentParamsFormatter.donationCurrency)&&void 0!==e?e:this.launcherParamsFormatter.donationCurrency)&&void 0!==t?t:this.queryParamsFormatter.donationCurrency}get donationFrequency(){var e,t;return null!==(t=null!==(e=this.intentParamsFormatter.donationFrequency)&&void 0!==e?e:this.launcherParamsFormatter.donationFrequency)&&void 0!==t?t:this.queryParamsFormatter.donationFrequency}get isDonationAmountEditable(){var e,t;return null!==(t=null!==(e=this.intentParamsFormatter.isDonationAmountEditable)&&void 0!==e?e:this.launcherParamsFormatter.isDonationAmountEditable)&&void 0!==t?t:this.queryParamsFormatter.isDonationAmountEditable}get isDonationEndDateEnabled(){return this.launcherParamsFormatter.isDonationEndDateEnabled}get isDonationEndDateSelected(){return this.launcherParamsFormatter.isDonationEndDateSelected}get isDonationFeeCovered(){return this.intentParamsFormatter.isDonationFeeCovered}get designationId(){var e,t;return null!==(t=null!==(e=this.intentParamsFormatter.designationId)&&void 0!==e?e:this.launcherParamsFormatter.designationId)&&void 0!==t?t:this.queryParamsFormatter.designationId}get isDesignationEditable(){var e,t;return null!==(t=null!==(e=this.intentParamsFormatter.isDesignationEditable)&&void 0!==e?e:this.launcherParamsFormatter.isDesignationEditable)&&void 0!==t?t:this.queryParamsFormatter.isDesignationEditable}get tributeInHonorOf(){var e,t;return null!==(t=null!==(e=this.intentParamsFormatter.tributeInHonorOf)&&void 0!==e?e:this.launcherParamsFormatter.tributeInHonorOf)&&void 0!==t?t:this.queryParamsFormatter.tributeInHonorOf}get tributeType(){return this.launcherParamsFormatter.tributeType}get isTributeSelected(){var e;return null!==(e=this.launcherParamsFormatter.isTributeSelected)&&void 0!==e?e:this.queryParamsFormatter.isTributeSelected}get comment(){return this.intentParamsFormatter.comment}get supporterFirstName(){var e,t;return null!==(t=null!==(e=this.intentParamsFormatter.supporterFirstName)&&void 0!==e?e:this.launcherParamsFormatter.supporterFirstName)&&void 0!==t?t:this.queryParamsFormatter.supporterFirstName}get supporterLastName(){var e,t;return null!==(t=null!==(e=this.intentParamsFormatter.supporterLastName)&&void 0!==e?e:this.launcherParamsFormatter.supporterLastName)&&void 0!==t?t:this.queryParamsFormatter.supporterLastName}get supporterEmail(){var e,t;return null!==(t=null!==(e=this.intentParamsFormatter.supporterEmail)&&void 0!==e?e:this.launcherParamsFormatter.supporterEmail)&&void 0!==t?t:this.queryParamsFormatter.supporterEmail}get flowType(){return this.intentParamsFormatter.flowType}get screen(){return this.launcherParamsFormatter.screen}get isAskShown(){return this.launcherParamsFormatter.isAskShown}get askTitle(){return this.launcherParamsFormatter.askTitle}get askText(){return this.launcherParamsFormatter.askText}get fundraiserKey(){var e;return null!==(e=this.launcherParamsFormatter.fundraiserKey)&&void 0!==e?e:this.queryParamsFormatter.fundraiserKey}get fundraiserCustomerKey(){return this.queryParamsFormatter.fundraiserCustomerKey}get successUrl(){return this.queryParamsFormatter.successUrl}get elementKey(){return this.launcherParamsFormatter.elementKey}get elementType(){return this.launcherParamsFormatter.elementType}get elementTitle(){return this.launcherParamsFormatter.elementTitle}get elementName(){return this.launcherParamsFormatter.elementName}get elementLocale(){return this.launcherParamsFormatter.elementLocale}get elementReminderKey(){return this.launcherParamsFormatter.elementReminderKey}get splitTestName(){return this.launcherParamsFormatter.splitTestName}get splitTestVariant(){return this.launcherParamsFormatter.splitTestVariant}get elementTrackingData(){return this.launcherParamsFormatter.elementTrackingData}get customFields(){var e;return null!==(e=this.intentParamsFormatter.customFields)&&void 0!==e?e:this.launcherParamsFormatter.customFields}get utmSource(){return this.queryParamsFormatter.utmSource}get utmCampaign(){return this.queryParamsFormatter.utmCampaign}get utmMedium(){return this.queryParamsFormatter.utmMedium}get utmContent(){return this.queryParamsFormatter.utmContent}get utmTerm(){return this.queryParamsFormatter.utmTerm}get restoreToken(){return this.queryParamsFormatter.restoreToken}get restorePaymentIntentClientSecret(){return this.queryParamsFormatter.restorePaymentIntentClientSecret}get restoreClientId(){return this.queryParamsFormatter.restoreClientId}get trackerEventTags(){return this.queryParamsFormatter.trackerEventTags}get trackerEmbedClientId(){return this.queryParamsFormatter.trackerEmbedClientId}}function Vi(e,t){if("boolean"==typeof e)return e;if("string"==typeof e){const n=e.trim();if(null==t?void 0:t.trueValue)return n===t.trueValue;if(null==t?void 0:t.falseValue)return n!==t.falseValue}}var Ki=n(2707);const Yi=(0,Ki.Ay)(),zi=99999900;function Wi(e,t){const n=function(e,t){var n,i;if(void 0===e)return;if("number"==typeof e)return e;const s=Number.parseFloat(e.trim()),a=null!==(i=null===(n=Yi[null!=t?t:"USD"])||void 0===n?void 0:n.digits)&&void 0!==i?i:2;return s*Math.pow(10,a)}(e,t);if(void 0!==n&&!(Number.isNaN(n)||n<0))return n>zi?zi:Math.round(n)}function $i(e){return!!e&&function(e){return/^(([a-zA-Z0-9-_+']+(\.[a-zA-Z0-9-_+']+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e))}(e)}function Xi(e){const t=null==e?void 0:e.trim();if(t&&$i(t))return t}function Qi(e,t){const n=null==e?void 0:e.trim();if(n&&(!t||t.includes(n)))return n}class Zi{constructor(e,t){this.intentParams=e,this.config=t}get donationAmount(){var e,t;return Wi(null===(t=null===(e=this.intentParams)||void 0===e?void 0:e.donation)||void 0===t?void 0:t.amount)}get donationAmountHintId(){var e,t;return Qi(null===(t=null===(e=this.intentParams)||void 0===e?void 0:e.donation)||void 0===t?void 0:t.selectedHintId,this.config.enabledDonationAmountHintsIds)}get donationCurrency(){var e,t;return Qi(null===(t=null===(e=this.intentParams)||void 0===e?void 0:e.donation)||void 0===t?void 0:t.currency,this.flowType===Ft.CRYPTO?void 0:this.config.enabledDonationCurrencies)}get donationFrequency(){var e,t;return Qi(null===(t=null===(e=this.intentParams)||void 0===e?void 0:e.donation)||void 0===t?void 0:t.frequency,this.config.enabledDonationFrequencies)}get isDonationAmountEditable(){var e,t;return Vi(null===(t=null===(e=this.intentParams)||void 0===e?void 0:e.checkoutSettings)||void 0===t?void 0:t.modifyAmount)}get isDonationFeeCovered(){var e;return Vi(null===(e=this.intentParams)||void 0===e?void 0:e.feeCovered)}get designationId(){var e,t;return Qi(null===(t=null===(e=this.intentParams)||void 0===e?void 0:e.checkoutSettings)||void 0===t?void 0:t.designation,this.config.enabledDesignationIds)}get isDesignationEditable(){var e,t;return Vi(null===(t=null===(e=this.intentParams)||void 0===e?void 0:e.checkoutSettings)||void 0===t?void 0:t.modifyDesignation)}get tributeInHonorOf(){var e,t;return Qi(null===(t=null===(e=this.intentParams)||void 0===e?void 0:e.tribute)||void 0===t?void 0:t.inHonorOf)}get comment(){var e;return Qi(null===(e=this.intentParams)||void 0===e?void 0:e.comment)}get supporterFirstName(){var e,t;return Qi(null===(t=null===(e=this.intentParams)||void 0===e?void 0:e.supporter)||void 0===t?void 0:t.firstName)}get supporterLastName(){var e,t;return Qi(null===(t=null===(e=this.intentParams)||void 0===e?void 0:e.supporter)||void 0===t?void 0:t.lastName)}get supporterEmail(){var e,t;return Xi(null===(t=null===(e=this.intentParams)||void 0===e?void 0:e.supporter)||void 0===t?void 0:t.email)}get flowType(){var e;return Qi(null===(e=this.intentParams)||void 0===e?void 0:e.flowType,Object.values(Ft))}get customFields(){var e,t;return null===(t=null===(e=this.intentParams)||void 0===e?void 0:e.checkoutSettings)||void 0===t?void 0:t.customFields}}var Ji,es,ts,ns;!function(e){e[e.MIN=80]="MIN",e[e.MAX=250]="MAX"}(Ji||(Ji={})),function(e){e.EMAIL="email",e.ADDRESS="address",e.NOT_SHARE="not_share"}(es||(es={})),function(e){e.NONE="none",e.HONOR="honor",e.MEMORY="memory"}(ts||(ts={})),function(e){e.POSTAL_CARD="card",e.LETTER="letter"}(ns||(ns={}));class is{constructor(e,t){this.launcherParams=e,this.config=t}get donationAmount(){var e,t,n;return Wi(null===(n=null===(t=null===(e=this.launcherParams)||void 0===e?void 0:e.checkoutInitialData)||void 0===t?void 0:t.donation)||void 0===n?void 0:n.amount)}get donationAmountHintId(){var e,t,n,i;return Qi(null===(i=null===(n=null===(t=null===(e=this.launcherParams)||void 0===e?void 0:e.checkoutInitialData)||void 0===t?void 0:t.donation)||void 0===n?void 0:n.amountHint)||void 0===i?void 0:i.id,this.config.enabledDonationAmountHintsIds)}get donationEnabledAmountHintsIds(){var e,t,n;return function(e,t){if(!e)return;const n={};for(const[i,s]of Object.entries(e)){const e=Qi(i,t.enabledDonationFrequencies),a=s.map((e=>Qi(e,t.enabledDonationAmountHintsIds))).filter((e=>void 0!==e));if(!e||a.length<s.length)return;n[e]=a}return n}(null===(n=null===(t=null===(e=this.launcherParams)||void 0===e?void 0:e.checkoutInitialData)||void 0===t?void 0:t.donation)||void 0===n?void 0:n.enabledAmountHints,this.config)}get donationCurrency(){var e,t,n;return Qi(null===(n=null===(t=null===(e=this.launcherParams)||void 0===e?void 0:e.checkoutInitialData)||void 0===t?void 0:t.donation)||void 0===n?void 0:n.currency,this.config.enabledDonationCurrencies)}get donationFrequency(){var e,t,n;return Qi(null===(n=null===(t=null===(e=this.launcherParams)||void 0===e?void 0:e.checkoutInitialData)||void 0===t?void 0:t.donation)||void 0===n?void 0:n.frequency,this.config.enabledDonationFrequencies)}get isDonationAmountEditable(){var e,t,n;return Vi(null===(n=null===(t=null===(e=this.launcherParams)||void 0===e?void 0:e.checkoutInitialData)||void 0===t?void 0:t.donation)||void 0===n?void 0:n.isAmountEditable)}get isDonationEndDateEnabled(){var e,t,n;return Vi(null===(n=null===(t=null===(e=this.launcherParams)||void 0===e?void 0:e.checkoutInitialData)||void 0===t?void 0:t.donation)||void 0===n?void 0:n.isEndDateEnabled)}get isDonationEndDateSelected(){var e,t,n;return Vi(null===(n=null===(t=null===(e=this.launcherParams)||void 0===e?void 0:e.checkoutInitialData)||void 0===t?void 0:t.donation)||void 0===n?void 0:n.isEndDateSelected)}get designationId(){var e,t,n;return Qi(null===(n=null===(t=null===(e=this.launcherParams)||void 0===e?void 0:e.checkoutInitialData)||void 0===t?void 0:t.designation)||void 0===n?void 0:n.id,this.config.enabledDesignationIds)}get isDesignationEditable(){var e,t,n;return Vi(null===(n=null===(t=null===(e=this.launcherParams)||void 0===e?void 0:e.checkoutInitialData)||void 0===t?void 0:t.designation)||void 0===n?void 0:n.isEditable)}get tributeInHonorOf(){var e,t,n;return Qi(null===(n=null===(t=null===(e=this.launcherParams)||void 0===e?void 0:e.checkoutInitialData)||void 0===t?void 0:t.tribute)||void 0===n?void 0:n.inHonorOf)}get tributeType(){var e,t,n;return Qi(null===(n=null===(t=null===(e=this.launcherParams)||void 0===e?void 0:e.checkoutInitialData)||void 0===t?void 0:t.tribute)||void 0===n?void 0:n.type,Object.values(ts))}get isTributeSelected(){var e,t,n;return Vi(null===(n=null===(t=null===(e=this.launcherParams)||void 0===e?void 0:e.checkoutInitialData)||void 0===t?void 0:t.tribute)||void 0===n?void 0:n.isSelected)}get supporterFirstName(){var e,t,n;return Qi(null===(n=null===(t=null===(e=this.launcherParams)||void 0===e?void 0:e.checkoutInitialData)||void 0===t?void 0:t.supporter)||void 0===n?void 0:n.firstName)}get supporterLastName(){var e,t,n;return Qi(null===(n=null===(t=null===(e=this.launcherParams)||void 0===e?void 0:e.checkoutInitialData)||void 0===t?void 0:t.supporter)||void 0===n?void 0:n.lastName)}get supporterEmail(){var e,t,n;return Xi(null===(n=null===(t=null===(e=this.launcherParams)||void 0===e?void 0:e.checkoutInitialData)||void 0===t?void 0:t.supporter)||void 0===n?void 0:n.email)}get screen(){var e,t;return Qi(null===(t=null===(e=this.launcherParams)||void 0===e?void 0:e.checkoutInitialData)||void 0===t?void 0:t.screen,Object.values(p))}get isAskShown(){var e,t,n,i;return Vi(null===(i=null===(n=null===(t=null===(e=this.launcherParams)||void 0===e?void 0:e.checkoutInitialData)||void 0===t?void 0:t.campaign)||void 0===n?void 0:n.ask)||void 0===i?void 0:i.show)}get askTitle(){var e,t,n,i;return Qi(null===(i=null===(n=null===(t=null===(e=this.launcherParams)||void 0===e?void 0:e.checkoutInitialData)||void 0===t?void 0:t.campaign)||void 0===n?void 0:n.ask)||void 0===i?void 0:i.title)}get askText(){var e,t,n,i;return Qi(null===(i=null===(n=null===(t=null===(e=this.launcherParams)||void 0===e?void 0:e.checkoutInitialData)||void 0===t?void 0:t.campaign)||void 0===n?void 0:n.ask)||void 0===i?void 0:i.text)}get fundraiserKey(){var e,t,n;return Qi(null===(n=null===(t=null===(e=this.launcherParams)||void 0===e?void 0:e.checkoutInitialData)||void 0===t?void 0:t.campaign)||void 0===n?void 0:n.fundraiser)}get elementKey(){var e,t;return Qi(null===(t=null===(e=this.launcherParams)||void 0===e?void 0:e.element)||void 0===t?void 0:t.key)}get elementType(){var e,t;return Qi(null===(t=null===(e=this.launcherParams)||void 0===e?void 0:e.element)||void 0===t?void 0:t.type,Object.values(Ae))}get elementTitle(){var e,t;return Qi(null===(t=null===(e=this.launcherParams)||void 0===e?void 0:e.element)||void 0===t?void 0:t.title)}get elementName(){var e,t;return Qi(null===(t=null===(e=this.launcherParams)||void 0===e?void 0:e.element)||void 0===t?void 0:t.name)}get elementLocale(){var e,t;return Qi(null===(t=null===(e=this.launcherParams)||void 0===e?void 0:e.element)||void 0===t?void 0:t.locale,Object.values(ne.D))}get elementReminderKey(){var e,t;return Qi(null===(t=null===(e=this.launcherParams)||void 0===e?void 0:e.element)||void 0===t?void 0:t.reminderKey)}get splitTestName(){var e,t;return Qi(null===(t=null===(e=this.launcherParams)||void 0===e?void 0:e.element)||void 0===t?void 0:t.splitTestName)}get splitTestVariant(){var e,t;return Qi(null===(t=null===(e=this.launcherParams)||void 0===e?void 0:e.element)||void 0===t?void 0:t.splitTestVariant)}get elementTrackingData(){var e;return null===(e=this.launcherParams)||void 0===e?void 0:e.elementTrackingData}get customFields(){var e,t;return null===(t=null===(e=this.launcherParams)||void 0===e?void 0:e.element)||void 0===t?void 0:t.customFields}}function ss(e){const t=null==e?void 0:e.trim();var n;if(t&&(n=t)&&20===n.length&&!/[^\d]/.test(n))return t}n(3393);const as=[[0,3,1,7,5,9,8,6,4,2],[7,0,9,2,1,5,4,8,6,3],[4,2,0,6,8,7,1,3,5,9],[1,7,5,0,9,8,3,4,2,6],[6,1,2,3,0,4,5,9,7,8],[3,6,7,4,2,0,9,5,8,1],[5,8,6,9,7,2,0,1,3,4],[8,9,4,5,3,6,2,0,1,7],[9,4,3,8,6,1,7,2,0,5],[2,5,8,1,4,3,6,7,9,0]];function os(e){let t=0;for(let n=0;n<e.length;n++){const i=e.charAt(n);t=as[t][i]}return t.toString()}const rs=/^\d{19}$/;class cs{constructor(e,t){this.queryParams=e,this.config=t}get donationAmount(){var e,t;return Wi(null===(e=this.queryParams)||void 0===e?void 0:e.amount,null!==(t=this.donationCurrency)&&void 0!==t?t:this.config.defaultCurrency)}get donationCurrency(){var e;return Qi(null===(e=this.queryParams)||void 0===e?void 0:e.currency,this.config.enabledDonationCurrencies)}get donationFrequency(){var e;return Qi(null===(e=this.queryParams)||void 0===e?void 0:e.recurring,this.config.enabledDonationFrequencies)}get isDonationAmountEditable(){var e;return Vi(null===(e=this.queryParams)||void 0===e?void 0:e.modifyAmount,{falseValue:"no"})}get designationId(){var e;return Qi(null===(e=this.queryParams)||void 0===e?void 0:e.designationId,this.config.enabledDesignationIds)}get isDesignationEditable(){var e;return Vi(null===(e=this.queryParams)||void 0===e?void 0:e.modifyDesignation,{falseValue:"no"})}get tributeInHonorOf(){var e;return Qi(null===(e=this.queryParams)||void 0===e?void 0:e.tributeHonoree)}get isTributeSelected(){var e;return Vi(null===(e=this.queryParams)||void 0===e?void 0:e.tributeSelected,{trueValue:"yes"})}get supporterFirstName(){var e;return Qi(null===(e=this.queryParams)||void 0===e?void 0:e.firstName)}get supporterLastName(){var e;return Qi(null===(e=this.queryParams)||void 0===e?void 0:e.lastName)}get supporterEmail(){var e;return Xi(null===(e=this.queryParams)||void 0===e?void 0:e.email)}get fundraiserKey(){var e;return Qi(null===(e=this.queryParams)||void 0===e?void 0:e.fundraiser)}get fundraiserCustomerKey(){var e;return Qi(null===(e=this.queryParams)||void 0===e?void 0:e.member)}get successUrl(){var e;return function(e){const t=null==e?void 0:e.trim();if(t&&function(e){let t;try{t=new URL(e)}catch(e){return!1}return"http:"===t.protocol||"https:"===t.protocol}(t))return t}(null===(e=this.queryParams)||void 0===e?void 0:e.successUrl)}get utmSource(){var e;return Qi(null===(e=this.queryParams)||void 0===e?void 0:e.utm_source)}get utmMedium(){var e;return Qi(null===(e=this.queryParams)||void 0===e?void 0:e.utm_medium)}get utmCampaign(){var e;return Qi(null===(e=this.queryParams)||void 0===e?void 0:e.utm_campaign)}get utmContent(){var e;return Qi(null===(e=this.queryParams)||void 0===e?void 0:e.utm_content)}get utmTerm(){var e;return Qi(null===(e=this.queryParams)||void 0===e?void 0:e.utm_term)}get restoreToken(){var e;return function(e){const t=null==e?void 0:e.trim();if(t&&rs.test(t)&&function(e){const[t,n]=function(e){return[e.slice(0,-1),e.slice(-1)]}(e);return os(t)===n}(t))return t}(null===(e=this.queryParams)||void 0===e?void 0:e.restoreToken)}get restorePaymentIntentClientSecret(){var e;return Qi(null===(e=this.queryParams)||void 0===e?void 0:e.payment_intent_client_secret)}get restoreClientId(){var e;return ss(null===(e=this.queryParams)||void 0===e?void 0:e.clientId)}get trackerEventTags(){var e;return Qi(null===(e=this.queryParams)||void 0===e?void 0:e.eventTags)}get trackerEmbedClientId(){var e;return ss(null===(e=this.queryParams)||void 0===e?void 0:e.embedClientId)}}class ls{static overrideWidgetGoalsConfig(e){const t=mi(e);return ci.isOnetimeOnly(e.frequencies)||ci.isRecurringOnly(e.frequencies)?(this.hasDefaultGoalForAllFrequencies(e.goals)||(t.goals=t.goals.map(((e,t)=>Object.assign(Object.assign({},e),{repeat:ui.ALL,default:0===t?ui.ALL:null})))),t):t}static hasDefaultGoalForAllFrequencies(e){return e.some((e=>{const t=e.repeat===ui.ALL,n=e.default===ui.ALL;return t&&n}))}constructor(e,t,n,i,s,a,o){var r,c,l;this._showcase=e.showcase;const u=this.cloneWidget(e.campaign);this._infrastructureParams=pi(n),this._infrastructureQueryParams=o&&pi(o),this._integrations=pi(i),this._environmentConfig=pi(s),this._campaign=pi(Object.assign(Object.assign({},u),{config:ti()(u.config,"ask")})),this._cryptoCurrencies=pi(e.config.cryptoCurrencies),this._currencies=pi(e.config.currencies),this._user=pi(e.user),this._aiSuggestions=pi(e.aiSuggestions),this._company=this.getResolvedCompany(e.company),this._fundraisingPage=e.fundraisingPage?this.getFundraisingPage(e.fundraisingPage,this.campaign.key):void 0,this._checkoutType=a.checkoutType,this._recentDonations=e.campaign.recentDonations?pi(e.campaign.recentDonations.filter((e=>"stock"!==e.donationType)).map((t=>{var n;const i=function(e,t){if(!e||!t)return null;const n=Math.round(e*t-e);return Math.max(n,0)}(t.amount,null===(n=e.campaign.config.campaignPage)||void 0===n?void 0:n.rateMatching.rate);return Object.assign(Object.assign({},t),{matchedAmount:i})}))):null,this._totalRecentDonations=e.campaign.totalRecentDonations||null,this._donationSettings=a.donationSettings,this._commentSettings=a.commentSettings,this._preDonationUpsellSettings=a.preDonationUpsellSettings,this._paymentOptionsSettings=a.paymentOptionsSettings,this._remindMeLaterSettings=a.remindMeLaterSettings,this._currencySettings=a.currencySettings,this._aiConfig=pi(e.campaign.config.ai),this._guessedCurrencies=this.getGuessedCurrencies(),this._rawExternal=t;const d=((e,t)=>{const n=new cs(e.queryParams,t),i=new is(e.launcher,t),s=new Zi(e.intent,t);return new Hi(n,i,s)})(t,{defaultCurrency:this.defaultCurrency,enabledDonationCurrencies:this.enabledCurrencies,enabledDonationFrequencies:this.enabledFrequencies,enabledDonationAmountHintsIds:this.enabledDonationAmountHintsIds,enabledDesignationIds:this.enabledDesignationIds});this._external=d.format(),this._element=this.setInitialElement(),this._getAskPageConfig=this.getAskPageConfigGetter(u,this.external,this.company,this.fundraisingPage),this._isRestoredByWidgetSession=!1,this._canModifyAmount=null===(l=null===(c=null===(r=this.external.state)||void 0===r?void 0:r.donation)||void 0===c?void 0:c.isAmountEditable)||void 0===l||l}get allowLegacyTributeLabel(){return["ASCBRLZS","APGYPDRM","AGPUPUKX","AGDVEKDU","ASMXWWKS","AYDKPHBH"].includes(this.company.key)}get successPaymentDelayBeforeLeave(){switch(this.checkoutType){case Ce.MODAL:return gi;case Ce.PAGE:return 0;default:throw new le.HP(this.checkoutType)}}get campaignPagesSharingEnabled(){return this.campaignPage.sharing.linkedin||this.campaignPage.sharing.facebook||this.campaignPage.sharing.copyLink||this.campaignPage.sharing.twitter}get showDonorImpactSection(){return this.checkoutType===Ce.PAGE&&this.campaignPage.donorImpact.show&&!!this.recentDonations}get showGoalMeterSection(){var e,t,n,i;return!(!this.fundraisingPage||this.fundraisingPage.withoutGoal)||!!(null===(t=null===(e=this.campaign.config.campaignPage)||void 0===e?void 0:e.goal)||void 0===t?void 0:t.showTotalRaisedAmount)&&!!(null===(i=null===(n=this.campaign.config.campaignPage)||void 0===n?void 0:n.goal)||void 0===i?void 0:i.hasGoal)}get showAmountCounterSection(){var e,t,n,i;return!(this.fundraisingPage&&!this.fundraisingPage.withoutGoal||!(null===(t=null===(e=this.campaign.config.campaignPage)||void 0===e?void 0:e.goal)||void 0===t?void 0:t.showTotalRaisedAmount)||(null===(i=null===(n=this.campaign.config.campaignPage)||void 0===n?void 0:n.goal)||void 0===i?void 0:i.hasGoal))}get emotionalType(){return this.campaign.classification.emotionalType}get goalMeterData(){var e,t,n,i,s,a,o,r,c,l,u,d;const h=(null===(e=this.fundraisingPage)||void 0===e?void 0:e.currency)||this.campaign.config.defaultCurrency,m=!this.fundraisingPage||(null===(t=this.fundraisingPage)||void 0===t?void 0:t.withoutGoal);let p=null,g=null;m?(p=(null===(i=null===(n=this.campaign.config.campaignPage)||void 0===n?void 0:n.goal)||void 0===i?void 0:i.amount)||null,g=(null===(a=null===(s=this.campaign.config.campaignPage)||void 0===s?void 0:s.goal)||void 0===a?void 0:a.raisedAmount)||null):(p=(null===(o=this.fundraisingPage)||void 0===o?void 0:o.goalAmount)||null,g=(null===(r=this.fundraisingPage)||void 0===r?void 0:r.donationsAmount)||null);const y=(null===(l=null===(c=this.campaign.config.campaignPage)||void 0===c?void 0:c.goal)||void 0===l?void 0:l.raisedAmountWithRateMatching)?Math.round(null===(d=null===(u=this.campaign.config.campaignPage)||void 0===u?void 0:u.goal)||void 0===d?void 0:d.raisedAmountWithRateMatching):null;return{shown:this.showGoalMeterSection,currency:h,totalAmount:p,raisedAmount:m?y:g,isFundraisingPageGoalMeter:!m}}get recentDonations(){return this._recentDonations}get totalRecentDonations(){return this._totalRecentDonations}get checkoutType(){return this._checkoutType}get aiSuggestions(){return this._aiSuggestions}get showcase(){return this._showcase}get featureConfig(){return this._company.featureConfig}get parentCompanyConfig(){return this._company.parentCompanyConfig}get fundraisingPage(){return this._fundraisingPage}get defaultFlowType(){var e;return(null===(e=this.external.flow)||void 0===e?void 0:e.type)?this.external.flow.type:this.fundraisingPage&&this.enabledFlows.money?Ft.MONEY:this.campaign.config.defaultDonationType}get isLighthouse(){var e;return null!==(e=this._infrastructureParams.isLighthouse)&&void 0!==e&&e}get queryTrackerParams(){var e;if(this.checkoutType!==Ce.PAGE)return{tags:[]};const t=null===(e=this.external.tracker)||void 0===e?void 0:e.eventTags;return{tags:t?t.split(","):[]}}get infrastructureQueryParams(){return this._infrastructureQueryParams||{}}get infrastructureParams(){return this._infrastructureParams}get integrations(){return this._integrations}get environmentConfig(){return this._environmentConfig}get element(){return this._element}get hasExternalAmount(){var e,t;return void 0!==(null===(t=null===(e=this.external.state)||void 0===e?void 0:e.donation)||void 0===t?void 0:t.amount)}get hasExternalFrequency(){var e,t;return void 0!==(null===(t=null===(e=this.external.state)||void 0===e?void 0:e.donation)||void 0===t?void 0:t.frequency)}get externalFrequency(){var e,t,n;return null!==(n=null===(t=null===(e=this.external.state)||void 0===e?void 0:e.donation)||void 0===t?void 0:t.frequency)&&void 0!==n?n:null}get isLauncher(){var e,t;return!(!(null===(e=this.rawExternal.queryParams)||void 0===e?void 0:e.key)&&!(null===(t=this.rawExternal.queryParams)||void 0===t?void 0:t.elementKey))}get campaign(){return this._campaign}get campaignPage(){return this.campaign.config.campaignPage||Ui}get company(){return this._company}get user(){return this._user}get cryptoCurrencies(){return this._cryptoCurrencies}get currencies(){return this._currencies}get mergedCustomFields(){return this.getMergedCustomFields()}get defaultCurrency(){return this.campaign.config.defaultCurrency}get enabledCurrencies(){return[...this.company.stripeCurrencies.list]}get enabledFrequencies(){return ci.getEnabledFrequencies(this.campaign.config.frequencies)}get enabledDonationAmountHintsIds(){const e=[];for(const{suggestedAmountHints:t}of Object.values(this.campaign.config.frequencies))e.push(...(null!=t?t:[]).map((e=>e.id)));return e}get enabledDesignationIds(){return this.campaign.config.goals.map((e=>e.key))}get defaultFrequency(){return ci.getDefaultFrequency(this.campaign.config.frequencies)}get lowestFrequency(){return this.enabledFrequencies[0]}get highestFrequency(){return this.enabledFrequencies[this.enabledFrequencies.length-1]}get canModifyFrequency(){return this.enabledFrequencies.length>1}get defaultAmounts(){const e=this.campaign.config.frequencies,t={};return this.frequencies.forEach((n=>{t[n]=e[n].defaultAmount})),t}get defaultAmountOptions(){const e=this.campaign.config.frequencies,t={};return this.frequencies.forEach((n=>{t[n]=e[n].amountOptions})),t}get enabledFlows(){return{[Ft.MONEY]:this.campaign.config.donationTypes.money.enabled,[Ft.CRYPTO]:this.campaign.config.donationTypes.crypto.enabled&&!!this.company.cryptoProvider}}get preselectDesignation(){return!Object.values(li).includes(this.campaign.key)}get aiConfig(){return this._aiConfig}get guessedCurrencies(){return this._guessedCurrencies}get donationSettings(){return Object.assign(Object.assign({},Fi),this._donationSettings)}get commentSettings(){return Object.assign(Object.assign({},ji),this._commentSettings)}get preDonationUpsellSettings(){return Object.assign(Object.assign({},Bi),this._preDonationUpsellSettings)}get paymentOptionsSettings(){return Object.assign(Object.assign({},Gi),this._paymentOptionsSettings)}get remindMeLaterSettings(){return Object.assign(Object.assign({},qi),this._remindMeLaterSettings)}get currencySettings(){var e;return null!==(e=this._currencySettings)&&void 0!==e?e:{}}get isAbandonedDonationsEnabled(){var e;return!!(null===(e=this.company.abandonedDonations)||void 0===e?void 0:e.enabled)&&!!this.remindMeLaterSettings.isEnabled}get canModifyAmount(){return this._canModifyAmount}get showAmountSuggestions(){var e,t,n;return null===(n=null===(t=null===(e=this.external.state)||void 0===e?void 0:e.donation)||void 0===t?void 0:t.isAmountEditable)||void 0===n||n}get canModifyDesignation(){var e,t,n;return null===(n=null===(t=null===(e=this.external.state)||void 0===e?void 0:e.designation)||void 0===t?void 0:t.isEditable)||void 0===n||n}get multipleDesignations(){var e;return null!==(e=this.campaignPage.multipleDesignations)&&void 0!==e?e:{enabled:!1}}get rawExternal(){return this._rawExternal}get external(){return this._external}get isRestoredByWidgetSession(){return this._isRestoredByWidgetSession}cloneOnceFrequencyToAnnual(){this._campaign=pi(Object.assign(Object.assign({},this._campaign),{config:Object.assign(Object.assign({},this._campaign.config),{frequencies:Object.assign(Object.assign({},this._campaign.config.frequencies),{[W.ANNUAL]:Object.assign(Object.assign({},this._campaign.config.frequencies[W.ONCE]),{default:!1})})})}))}allowModifyAmount(){this._canModifyAmount=!0}setRestoredByWidgetSession(){this._isRestoredByWidgetSession=!0}restoreElement(e){var t,n,i,s;this._element={key:null!==(t=e.key)&&void 0!==t?t:this._element.key,type:null!==(n=e.type)&&void 0!==n?n:this._element.type,reminderKey:null!==(i=e.reminderKey)&&void 0!==i?i:this._element.reminderKey,locale:null!==(s=e.locale)&&void 0!==s?s:this._element.locale}}mergePreDonationUpsellSettings(e){this._preDonationUpsellSettings=Object.assign(Object.assign({},this._preDonationUpsellSettings),e)}getAskPageConfig(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._getAskPageConfig(e)}getInitialCustomFields(){var e,t;const n=this.getCustomFieldsHash(this.campaign.customFields||[],!0),i=((null===(t=null===(e=this.rawExternal.launcher)||void 0===e?void 0:e.element)||void 0===t?void 0:t.customFields)||[]).filter((e=>void 0!==n[e.name])),s=this.getCustomFieldsHash(i),a=Object.assign(n,s);return Object.keys(a).map((e=>{var t;return{name:e,value:Array.isArray(a[e])?null===(t=a[e])||void 0===t?void 0:t[0]:a[e]}}))}get frequencies(){const e=this.campaign.config.frequencies,t=[];for(const n of Object.keys(e))t.push(n);return t}getMergedCustomFields(){var e,t,n,i,s,a;const o=this.getCustomFieldsHash(this.campaign.customFields||[]),r=this.getCustomFieldsHash((null===(t=null===(e=this.rawExternal.intent)||void 0===e?void 0:e.checkoutSettings)||void 0===t?void 0:t.customFields)||[]),c=this.getCustomFieldsHash((null===(i=null===(n=this.rawExternal.launcher)||void 0===n?void 0:n.element)||void 0===i?void 0:i.customFields)||[]);let l=this.rawExternal.queryParams;void 0!==(null===(s=this.fundraisingPage)||void 0===s?void 0:s.customFields)&&(null===(a=this.fundraisingPage)||void 0===a?void 0:a.customFields.length)>0&&(l=this.getCustomFieldsHash(this.fundraisingPage.customFields));const u=ii(window.location.href),d=Object.assign(o,c,l,r,u);return Object.keys(d).map((e=>{var t;return{name:e,value:Array.isArray(d[e])?null===(t=d[e])||void 0===t?void 0:t[0]:d[e]}})).filter((e=>e.value))}getFundraisingPage(e,t){if(e&&e.key&&e.openWidget===t)return e}getCustomFieldsHash(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n={};return e.forEach((e=>{e.name&&(t||e.value)&&(n[e.name]=e.value)})),n}getResolvedCompany(e){if(e.key!==this.campaign.company)throw new Error("Invalid resolved company");if(e.useParentPaymentAccounts){if(!e.parentCompanyConfig)throw new Error("Widget's Parent Company not found");return Object.assign(Object.assign({},e),{stripeFee:e.parentCompanyConfig.stripeFee,applicationFees:e.parentCompanyConfig.applicationFees,coverFees:e.parentCompanyConfig.coverFees})}return Object.assign({},e)}cloneWidget(e){const t=ls.overrideWidgetGoalsConfig(e.config);return pi(Object.assign(Object.assign({},e),{config:t}))}getAskPageConfigGetter(e,t,n,i){return s=>function(e,t,n,i){let{isRetina:s,checkoutType:a,fundraisingPage:o}=i;const r=function(e,t){var n,i;return Boolean(e.ask.show||(null===(i=null===(n=t.campaign)||void 0===n?void 0:n.ask)||void 0===i?void 0:i.show))}(e,t),c=n.name,l=null==o?void 0:o.name,u=function(e){return e===Ce.MODAL?Mi:Ci}(a),d=u.getShowTabs(o,e,t),h=!d&&l,m=u.getAskTitle(e,t),p=u.getAskDescription(e,t),g=u.getLinks(e),y=u.getLogoImageURL(e,s),f=u.getAskMainImageURL(e,s),E=u.getMainVideo(e),S=u.getMainMediaProvider(e);return{text:p,title:h?l:m,companyName:c,links:g,logoImage:y||u.getCompanyImageURL(n,s),fallbackCompanyLogo:u.getCompanyImageURL(n,s),mainImage:f,fundraiserImage:u.getFundraiserImageURL(o,s),logoAltText:u.getLogoAltText(e)||u.getCompanyLogoImageAltText(n),mainImageAltText:u.getMainImageAltText(e),mainVideo:E,mainMediaProvider:S,show:r,showLinks:!!g.length,showTabs:d}}(e.config,t,n,{isRetina:s,checkoutType:this.checkoutType,fundraisingPage:i})}getGuessedCurrencies(){const e=this.campaign.config.defaultCurrency,t=this.currencies.countryCurrencies[0],n=this.company.stripeCurrencies.default,i=this.currencies.countryCurrencies.slice(1),s=this.currencies.langCurrencies,a=this.company.stripeCurrencies.list;return o=[e,t,n,...i,...s].filter((e=>a.includes(e))),Array.from(new Set(o));var o}setInitialElement(){var e,t,n,i,s,a;return{key:(null===(e=this.external.element)||void 0===e?void 0:e.key)||(null===(t=this.fundraisingPage)||void 0===t?void 0:t.elementKey)||"",type:(null===(n=this.external.element)||void 0===n?void 0:n.type)||(null===(i=this.fundraisingPage)||void 0===i?void 0:i.elementType)||Ae.DIRECT_LINK,reminderKey:(null===(s=this.external.element)||void 0===s?void 0:s.reminderKey)||"",locale:null===(a=this.external.element)||void 0===a?void 0:a.locale}}}class us{constructor(e,t){this._locale=e,this.commonCurrencyFilter=t,this.formatCurrency=t.formatCurrency.bind(t),this.formatSymbol=t.formatSymbol.bind(t),this.getCurrencyFormat=t.getCurrencyFormat.bind(t)}changeLocale(e){return this.locale=e,this.locale}format(e,t){return this.formatCurrency(e,null==t?void 0:t.currency,null==t?void 0:t.display,null==t?void 0:t.withoutPrefix,null==t?void 0:t.withoutSuffix,this.locale,null==t?void 0:t.displayCurrency)}formatCurrencySymbol(e,t){return this.formatSymbol(e,t,this.locale)}getFormat(){return this.getCurrencyFormat(this.locale)}get locale(){return this._locale}set locale(e){this._locale=e}}class ds extends us{constructor(e,t){super(e,t)}replaceCurrencyFilter(e){this.formatCurrency=e.formatCurrency,this.formatSymbol=e.formatSymbol,this.getCurrencyFormat=e.getCurrencyFormat}}var hs;!function(e){e.SCREEN_CHANGED="screenChanged",e.FLOW_CHANGED="flowChanged",e.DONE="done",e.LOCKED="locked",e.UNLOCKED="unlocked",e.ERROR="error"}(hs||(hs={}));const ms=[Ft.MONEY];class ps{constructor(e,t,n,i,s,a,o,r,c,l,u,d,h,m,p,g,y,f,E,S,v,A,C,P,N,b,D,T){this.eventEmitter=e,this.checkoutConfiguration=t,this.intl=n,this.tracker=i,this.sessionTokenService=s,this.debug=a,this.currencyService=o,this.suggestionsService=r,this.targetWindow=c,this.globalWindow=l,this.sentry=u,this.paymentMethods=d,this.stripeLoadingPromise=h,this.applePayStripeLoadingPromise=m,this.userSession=p,this.addressService=g,this.checkoutAPIBridge=y,this._experiments=f,this.flowFactoryMap=E,this.logger=S,this.requestService=v,this.subscriptionPeriodLabelsService=A,this.mailingAddressModule=C,this.paymentMethodAvailabilityManagerRepository=P,this.mailingAddressCustomization=N,this.adaptiveDefaultFrequencyFetcher=b,this.adaptiveAmountPresetsFetcher=D,this.params=T,this.currentFlow=null,this._checkoutService=null,this._checkoutState=null,this._flowType=null}get checkoutService(){if(!this._checkoutService)throw new Error("Checkout service is not defined");return this._checkoutService}get checkoutState(){if(!this._checkoutState)throw new Error("Checkout state is not defined");return this._checkoutState}get experiments(){if(!this._experiments)throw new Error("Checkout Experiments Controller is not defined");return this._experiments}get flowType(){if(!this._flowType)throw new Error("Flow is not initialized");return this._flowType}get questionsScreenPageCount(){return this._checkoutService?this._checkoutService.checkoutUIState.pagesOfQuestionsScreen:null}dispose(){var e,t;null===(e=this._checkoutService)||void 0===e||e.dispose(),null===(t=this.currentFlow)||void 0===t||t.dispose()}setInitialScreen(e){return this.initialScreen=e,this}getCurrentFlow(){if(!this.currentFlow)throw new Error("Start flow first");return this.currentFlow}onScreenChanged(e){return this.eventEmitter.on(hs.SCREEN_CHANGED,e),()=>this.eventEmitter.removeListener(hs.SCREEN_CHANGED,e)}onFlowChanged(e){return this.eventEmitter.on(hs.FLOW_CHANGED,e),()=>this.eventEmitter.removeListener(hs.FLOW_CHANGED,e)}startDefaultFlow(){return(0,c.sH)(this,void 0,void 0,(function*(){yield this.start(this.checkoutConfiguration.defaultFlowType)}))}startFiatFlow(){return(0,c.sH)(this,void 0,void 0,(function*(){yield this.start(Ft.MONEY)}))}startCryptoFlow(){return(0,c.sH)(this,void 0,void 0,(function*(){yield this.start(Ft.CRYPTO)}))}restart(){return(0,c.sH)(this,void 0,void 0,(function*(){yield this.start(this.flowType)}))}canClose(e){if(this.checkoutConfiguration.company.blockedAt)return!0;if(!this.currentFlow)throw new Error("currentFlow is not defined");const t=this.checkoutService.isPaid;if(this.currentFlow.isLocked)return!1;if(this.checkoutConfiguration.infrastructureParams.showcase)return!1;if(this.checkoutConfiguration.isAbandonedDonationsEnabled&&e.isFinalAvailableScreen&&this.currentFlow.tryExit())return!1;if(!t&&(!e.isUnrestrictedExitScreen||e.isMobile&&e.isMobileExitScreen)&&this.currentFlow.tryExit())return!1;if(!this.checkoutConfiguration.isAbandonedDonationsEnabled&&!e.isUnrestrictedExitScreen&&!this.currentFlow.isExiting){const e=[this.intl.translate("confirmCloseDialog.question"),this.intl.translate("confirmCloseDialog.instructions")].join("\n\n");return confirm(e)}return!0}shouldNotifyAbandoned(e){var t,n,i;if(!ms.includes(this.flowType))return!1;if(!this.currentFlow)throw new Error("currentFlow is not defined");if(e)return!1;if(!(null===(t=this.checkoutConfiguration.company.abandonedDonations)||void 0===t?void 0:t.enabled))return!1;const s=this.checkoutService.isPaid,a=this.checkoutService.isPaymentStarted;if(s||a)return!1;const o=this.checkoutState.remindMeLater.dataPoint,r=this.checkoutState.privacy.donorEmailDataPoint,c=this.checkoutConfiguration.infrastructureParams.fromDonorPortal,l=r.email===(null===(i=null===(n=this.checkoutConfiguration.external.state)||void 0===n?void 0:n.supporter)||void 0===i?void 0:i.email);return!(c&&l&&!o.isEnabled)&&(!!this.currentFlow.isExiting||!o.isEnabled)}start(e){return(0,c.sH)(this,void 0,void 0,(function*(){var t,n;yield null===(t=this._checkoutService)||void 0===t?void 0:t.dispose(),null===(n=this.currentFlow)||void 0===n||n.dispose();const{flow:i,checkoutService:s,checkoutState:a,adaptiveSuggestionsService:o}=yield this.initializeFlow(e);this.currentFlow=i,this._checkoutService=s,this._checkoutState=a,this._flowType=e,yield i.start(),this.eventEmitter.emit(hs.FLOW_CHANGED,e),null==o||o.tryTrackSuggestion()}))}canNavigateBackward(e,t){var n,i,s,a,o;const r=e.getCurrentScreen().name,c=this.checkoutService.checkoutUIState.isCanNotGoBackScreen(r),l=e.previousScreenName&&e.previousScreenName===t.getPaymentScreen(e.previousScreenName,e.getHistoricalScreens())&&t.isPaid,u=e.previousScreenName===(null===(n=this.params.screenSet)||void 0===n?void 0:n.ukBacs)&&t.isPaid,d=e.previousScreenName===(null===(i=this.params.screenSet)||void 0===i?void 0:i.paymentOptions)&&t.isPaid,h=e.previousScreenName===(null===(s=this.params.screenSet)||void 0===s?void 0:s.fastTrackPaymentOptions)&&t.isPaid,m=r===(null===(a=this.params.screenSet)||void 0===a?void 0:a.paymentOptions)&&this.checkoutConfiguration.isRestoredByWidgetSession,p=null===(o=this.currentFlow)||void 0===o?void 0:o.isLocked;return!(c||l||u||d||h||m||p)}initializeFlow(e){return(0,c.sH)(this,void 0,void 0,(function*(){const{flow:t,checkoutService:n,checkoutState:i,initialScreenDecider:s,trackerCheckoutEventService:a,adaptiveSuggestionsService:o,designationsFetcher:r,externalParamsApplier:c}=yield this.createFlow(e);t.on(hs.SCREEN_CHANGED,(e=>{const i=e;t.setCanGoBack(this.canNavigateBackward(t,n)),n.shouldFindMandatoryScreen=!1,n.checkoutUIState.setCloseButtonVisibility(t.getCurrentScreen().name,t.getHistoricalScreens()),this.eventEmitter.emit(hs.SCREEN_CHANGED,i),n.setScreenHistoryToSession(i.screenHistory)})),t.on(hs.LOCKED,(()=>{t.setCanGoBack(this.canNavigateBackward(t,n))})),t.on(hs.UNLOCKED,(()=>{t.setCanGoBack(this.canNavigateBackward(t,n))})),t.on(hs.ERROR,(e=>{this.sentry.captureException(e,(e=>(e.setTag("errorType","formFlow"),e)))})),this.initializeTracker(t,a),yield this.initializeCheckoutState(i,r,c),yield n.initialize(),n.tryToCloneOnceFrequencyToAnnual();const l=void 0!==this.initialScreen?this.initialScreen:yield s.getInitialScreen();return t.setFirstScreen(l),t.setInitialHistory(s.getScreensHistoryForRestore()),{flow:t,checkoutService:n,checkoutState:i,adaptiveSuggestionsService:o}}))}initializeTracker(e,t){t.setCurrentScreenDataGetter((()=>({screenName:e.getCurrentScreen().name,screenData:e.getCurrentScreen().getScreenData()}))),this.tracker.setTrackerCheckoutEventService(t)}initializeCheckoutState(e,t,n){return(0,c.sH)(this,void 0,void 0,(function*(){e.synchronize(),this.tryFetchDesignationGoals(e,t),yield n.tryApply()}))}tryFetchDesignationGoals(e,t){return(0,c.sH)(this,void 0,void 0,(function*(){yield t.tryFetchGoals(),e.synchronize()}))}createFlow(e){return(0,c.sH)(this,void 0,void 0,(function*(){const t=this.flowFactoryMap[e],{formFlow:n,checkoutService:i,checkoutState:s,initialScreenDecider:a,trackerCheckoutEventService:o,adaptiveSuggestionsService:r,designationsFetcher:c,externalParamsApplier:l}=t({checkoutConfiguration:this.checkoutConfiguration,intl:this.intl,tracker:this.tracker,sessionTokenService:this.sessionTokenService,debug:this.debug,currencyService:this.currencyService,suggestionsService:this.suggestionsService,targetWindow:this.targetWindow,globalWindow:this.globalWindow,sentry:this.sentry,paymentMethods:this.paymentMethods,stripeLoadingPromise:this.stripeLoadingPromise,applePayStripeLoadingPromise:this.applePayStripeLoadingPromise,subscriptionPeriodLabelsService:this.subscriptionPeriodLabelsService,userSession:this.userSession,addressService:this.addressService,eventEmitter:this.eventEmitter,checkoutAPIBridge:this.checkoutAPIBridge,experiments:this.experiments,logger:this.logger,requestService:this.requestService,mailingAddressModule:this.mailingAddressModule,paymentMethodAvailabilityManagerRepository:this.paymentMethodAvailabilityManagerRepository,mailingAddressCustomization:this.mailingAddressCustomization,adaptiveDefaultFrequencyFetcher:this.adaptiveDefaultFrequencyFetcher,adaptiveAmountPresetsFetcher:this.adaptiveAmountPresetsFetcher,stripe:{elementsOptions:this.params.stripe.elementsOptions,elementStyles:this.params.stripe.elementStyles,elementClasses:this.params.stripe.elementClasses},params:{funEmbedRelease:this.params.funEmbedRelease,pendingRequests:this.params.pendingRequests}});return{flow:n,checkoutService:i,checkoutState:s,initialScreenDecider:a,trackerCheckoutEventService:o,adaptiveSuggestionsService:r,designationsFetcher:c,externalParamsApplier:l}}))}}var gs=n(4601),ys=JSON.parse('{"GD":1.607,"CH":0.962,"SL":6409.026,"HU":181.919,"TW":13.516,"BB":2.276,"CI":215.312,"TN":0.964,"IT":0.607,"BJ":204.545,"ID":4857.054,"CV":48.339,"KN":1.842,"LA":4974.159,"UG":1270.229,"AD":0.613,"BI":1171.573,"ZA":7.667,"FR":0.667,"LY":1.894,"MX":10.751,"GA":220.225,"MK":18.435,"CN":3.549,"YE":501.421,"SB":7.159,"UZ":3643.649,"EG":7.403,"SN":215.2,"LK":55.699,"BD":32.049,"PE":1.753,"SG":0.808,"TR":16.333,"AF":21.476,"AW":1.349,"GB":0.656,"ZM":8.526,"FI":0.777,"NE":215.707,"GW":217.94,"AZ":0.496,"DJ":85.618,"MU":18.342,"CO":1522.784,"GR":0.533,"HR":0.446,"MA":3.954,"DZ":44.144,"NL":0.767,"SD":1130.568,"FJ":0.911,"NP":35.395,"PR":0.765,"GE":0.893,"PK":73.075,"BW":5.356,"LB":949.837,"PG":2.852,"DO":24.377,"QA":2.23,"MG":1342.79,"IN":20.662,"ME":0.378,"SZ":6.431,"PY":2666.53,"SV":0.428,"UA":12.485,"NA":7.272,"AE":2.297,"BG":0.792,"DE":0.726,"KH":1394.293,"IQ":507.048,"SE":8.448,"KG":26.061,"RU":29.183,"MY":1.477,"ST":13.988,"CY":0.593,"CA":1.176,"MW":553.101,"SA":1.895,"BA":0.696,"ET":33.344,"ES":0.601,"SI":0.572,"OM":0.184,"MO":4.778,"SM":0.691,"LS":6.635,"MH":1.023,"IS":151.784,"LU":0.83,"AR":728.721,"NR":1.833,"DM":1.382,"CR":312.971,"AU":1.44,"TH":10.281,"HT":111.451,"TV":1.701,"HN":11.626,"GQ":235.11,"LC":1.4,"BY":0.839,"LV":0.515,"PW":1.057,"PH":19.489,"DK":5.767,"CM":199.382,"GN":3670.122,"BH":0.168,"SR":12.949,"CD":1189.848,"SO":0.431,"CZ":12.804,"VU":135.704,"TG":194.266,"KE":45.593,"RW":363.326,"EE":0.609,"RO":1.978,"TT":3.789,"GY":69.931,"TL":0.315,"VN":7018.453,"UY":27.325,"HK":5.518,"AT":0.742,"AG":1.915,"TM":1.727,"MZ":24.945,"PA":0.47,"FM":1.104,"IE":0.743,"NO":9.116,"CF":254.245,"BF":194.129,"ER":14.319,"TZ":791.399,"KR":777.266,"JO":0.306,"MR":11.11,"LT":0.497,"SK":0.541,"AO":311.966,"KZ":165.439,"MD":7.51,"ML":190.56,"AM":148.803,"WS":2.018,"JP":93.123,"BO":2.43,"CL":461.902,"US":1,"VC":1.471,"SC":7.578,"GT":3.399,"EC":0.411,"TJ":2.669,"MT":0.561,"GM":19.323,"NG":224.649,"BS":0.968,"KW":0.19,"MV":7.965,"SS":1892.921,"IR":147066.337,"AL":42.319,"BR":2.515,"RS":47.594,"BZ":1.088,"MM":576.459,"BT":20.67,"VE":37.85,"LR":0.443,"JM":97.796,"PL":1.97,"BN":0.514,"KM":189.09,"TO":1.695,"KI":1.028,"GH":4.138,"TD":216.713,"ZW":5.957,"MN":1290.931,"PT":0.55,"CG":227.689,"BE":0.706,"IL":3.681,"NZ":1.474,"NI":12.018}');class fs{constructor(e,t){this.rates=e,this.sentry=t}getDigits(e){return this.currencyData[e]?this.currencyData[e].digits:2}getRate(e){return this.rates[e]||1}setData(e,t,n){this._currencyData=e,t&&(this._countriesData=t),n&&(this._pppexData=n)}convertBase(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4?arguments[4]:void 0;var a;if(!Number.isInteger(e)){const e=new Error("amount should be a finite number");return null===(a=this.sentry)||void 0===a||a.captureException(e),console.error(e),0}if(0===e)return 0;if(t===n)return e;const o=this.currencyData[t].type===ee.Z.FIAT,r=this.currencyData[n].type===ee.Z.FIAT,c=this.getDigits(t),l=this.getDigits(n),u=this.calcRate(t,n,o,r);if(i&&s&&o&&r){const n="USD"===t?e:this.convertBase(e,t,"USD",!1);e=this.toAiAmount(n,s)}return Math.ceil(e/Math.pow(10,c)*u*Math.pow(10,l))}calcRate(e,t,n,i){let s;const a=this.getRate(e),o=this.getRate(t);return s=n&&i?o/a:n&&!i?1/(a*o):!n&&i?a*o:a/o,s}toAiAmount(e,t){const n=this.pppexData[t]||1,i=this.rates[this.getCountryCurrency(t)]||1;return 1===n||1===i?e:e*n/i}getCountryCurrency(e){return this.countriesData[e]?this.countriesData[e][0]:"USD"}get currencyData(){if(!this._currencyData)throw new Error("Currency data was not set");return this._currencyData}get countriesData(){if(!this._countriesData)throw new Error("Countries data was not set");return this._countriesData}get pppexData(){if(!this._pppexData)throw new Error("Pppex data was not set");return this._pppexData}}class Es extends fs{getCryptoCurrency(e){const t=this.currencyData[e];if(!t)throw new Error(`Currency ${e} was not found`);if(t.type!==ee.Z.CRYPTO)throw new Error(`Currency ${e} is not a crypto`);return t}getSymbol(e){return this.currencyData[e]?this.currencyData[e].symbol:""}getName(e){return this.currencyData[e]?this.currencyData[e].name:""}getRate(e){return this.rates[e]||1}convert(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4?arguments[4]:void 0;return this.convertBase(e,t,n,i,s)}round(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;const n=Math.ceil(Math.log10(e+1))-t,i=5*Math.pow(10,Math.max(n-3,0)+t);return Math.ceil(e/i)*i}toFloatUnformattedStr(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const i=this.getDigits(t);return(e/Math.pow(10,i)).toFixed(n)}toFloat(e,t){const n=this.getDigits(t);return e/Math.pow(10,n)}fromFloat(e,t){const n=this.getDigits(t);return Math.round(e*Math.pow(10,n))}ceil(e,t){return this.fromFloat(Math.ceil(this.toFloat(e,t)),t)}getMinAmount(e){return this.convert(70,"USD",e)}toInt(e,t){if(!Number.isFinite(e))throw new Error("amount should be a finite number");const n=this.getDigits(t);return e*Math.pow(10,n)}getCurrencyCodesBySource(e){return Object.keys(this.currencyData).filter((t=>this.currencyData[t].sources.includes(e)))}isCrypto(e){return this.currencyData[e].type===ee.Z.CRYPTO}}class Ss extends Es{constructor(e,t,n){super(t,n),this.currencyDataLoader=e,this.rates=t,this.sentry=n}loadFiat(e){const t=this.currencyDataLoader.loadFiat(e),n=gs,i=ys,s=Object.assign(Object.assign({},t),this._currencyData);this.setData(s,n,i)}loadCrypto(){return(0,c.sH)(this,void 0,void 0,(function*(){const e=yield this.currencyDataLoader.loadCrypto(),t=Object.assign(Object.assign({},e),this._currencyData);this.setData(t)}))}convertFeeCurrency(e,t,n,i){const s=Math.abs(i||1);return this.convertBase(e,t,n)*s}}function vs(e){return!!e.campaign.config.donationTypes.crypto.enabled||e.checkoutType===Ce.PAGE&&e.showDonorImpactSection}const As={"US States":[{code:"AL",name:"Alabama"},{code:"AK",name:"Alaska"},{code:"AZ",name:"Arizona"},{code:"AR",name:"Arkansas"},{code:"CA",name:"California"},{code:"CO",name:"Colorado"},{code:"CT",name:"Connecticut"},{code:"DC",name:"District of Columbia"},{code:"DE",name:"Delaware"},{code:"FL",name:"Florida"},{code:"GA",name:"Georgia"},{code:"HI",name:"Hawaii"},{code:"ID",name:"Idaho"},{code:"IL",name:"Illinois"},{code:"IN",name:"Indiana"},{code:"IA",name:"Iowa"},{code:"KS",name:"Kansas"},{code:"KY",name:"Kentucky"},{code:"LA",name:"Louisiana"},{code:"ME",name:"Maine"},{code:"MD",name:"Maryland"},{code:"MA",name:"Massachusetts"},{code:"MI",name:"Michigan"},{code:"MN",name:"Minnesota"},{code:"MS",name:"Mississippi"},{code:"MO",name:"Missouri"},{code:"MT",name:"Montana"},{code:"NE",name:"Nebraska"},{code:"NV",name:"Nevada"},{code:"NH",name:"New Hampshire"},{code:"NJ",name:"New Jersey"},{code:"NM",name:"New Mexico"},{code:"NY",name:"New York"},{code:"NC",name:"North Carolina"},{code:"ND",name:"North Dakota"},{code:"OH",name:"Ohio"},{code:"OK",name:"Oklahoma"},{code:"OR",name:"Oregon"},{code:"PA",name:"Pennsylvania"},{code:"RI",name:"Rhode Island"},{code:"SC",name:"South Carolina"},{code:"SD",name:"South Dakota"},{code:"TN",name:"Tennessee"},{code:"TX",name:"Texas"},{code:"UT",name:"Utah"},{code:"VT",name:"Vermont"},{code:"VA",name:"Virginia"},{code:"WA",name:"Washington"},{code:"WV",name:"West Virginia"},{code:"WI",name:"Wisconsin"},{code:"WY",name:"Wyoming"}],"US Territories":[{code:"AS",name:"American Samoa"},{code:"GU",name:"Guam"},{code:"MP",name:"Northern Mariana Islands"},{code:"PR",name:"Puerto Rico"},{code:"VI",name:"U.S. Virgin Islands"}],"US Military":[{code:"AA",name:"Armed Forces America"},{code:"AE",name:"Armed Forces"},{code:"AP",name:"Armed Forces Pacific"}]};var Cs,Ps;!function(e){e.DEFAULT="default",e.POSTAL_CODE_FIRST="postalCodeFirst"}(Cs||(Cs={})),function(e){e.DEFAULT="default",e.ALTERNATIVE="alternative"}(Ps||(Ps={}));const Ns={autocomplete:{enabled:[{option:!0}]},layout:{type:[{option:Cs.POSTAL_CODE_FIRST,countries:[D.tg.UNITED_KINGDOM,D.tg.IRELAND]},{option:Cs.DEFAULT}]},labels:{type:[{option:Ps.ALTERNATIVE,countries:[D.tg.UNITED_KINGDOM,D.tg.IRELAND]},{option:Ps.DEFAULT}]},region:{enabled:[{option:!1,countries:[D.tg.UNITED_KINGDOM,D.tg.ISRAEL,D.tg.FRANCE,D.tg.NETHERLANDS,D.tg.GERMANY,D.tg.NEW_ZEALAND,D.tg.BELGIUM]},{option:!0}],required:[{option:!1,countries:[D.tg.UNITED_KINGDOM,D.tg.ISRAEL,D.tg.FRANCE,D.tg.NETHERLANDS,D.tg.GERMANY,D.tg.NEW_ZEALAND,D.tg.BELGIUM]},{option:!0}],predefinedRegions:[{option:As,countries:[D.tg.UNITED_STATES]},{option:[{code:"AB",name:"Alberta"},{code:"BC",name:"British Columbia"},{code:"MB",name:"Manitoba"},{code:"NB",name:"New Brunswick"},{code:"NL",name:"Newfoundland and Labrador"},{code:"NS",name:"Nova Scotia"},{code:"NT",name:"Northwest Territories"},{code:"NU",name:"Nunavut"},{code:"ON",name:"Ontario"},{code:"PE",name:"Prince Edward Island"},{code:"QC",name:"Quebec"},{code:"SK",name:"Saskatchewan"},{code:"YT",name:"Yukon"}],countries:[D.tg.CANADA]},{option:[{code:"Carlow",name:"Carlow"},{code:"Cavan",name:"Cavan"},{code:"Clare",name:"Clare"},{code:"Cork",name:"Cork"},{code:"Donegal",name:"Donegal"},{code:"Dublin",name:"Dublin"},{code:"Dublin 1",name:"Dublin 1"},{code:"Dublin 2",name:"Dublin 2"},{code:"Dublin 3",name:"Dublin 3"},{code:"Dublin 4",name:"Dublin 4"},{code:"Dublin 5",name:"Dublin 5"},{code:"Dublin 6",name:"Dublin 6"},{code:"Dublin 6W",name:"Dublin 6W"},{code:"Dublin 7",name:"Dublin 7"},{code:"Dublin 8",name:"Dublin 8"},{code:"Dublin 9",name:"Dublin 9"},{code:"Dublin 10",name:"Dublin 10"},{code:"Dublin 11",name:"Dublin 11"},{code:"Dublin 12",name:"Dublin 12"},{code:"Dublin 13",name:"Dublin 13"},{code:"Dublin 14",name:"Dublin 14"},{code:"Dublin 15",name:"Dublin 15"},{code:"Dublin 16",name:"Dublin 16"},{code:"Dublin 17",name:"Dublin 17"},{code:"Dublin 18",name:"Dublin 18"},{code:"Dublin 20",name:"Dublin 20"},{code:"Dublin 22",name:"Dublin 22"},{code:"Dublin 24",name:"Dublin 24"},{code:"Galway",name:"Galway"},{code:"Kerry",name:"Kerry"},{code:"Kildare",name:"Kildare"},{code:"Kilkenny",name:"Kilkenny"},{code:"Laois",name:"Laois"},{code:"Leitrim",name:"Leitrim"},{code:"Limerick",name:"Limerick"},{code:"Longford",name:"Longford"},{code:"Louth",name:"Louth"},{code:"Mayo",name:"Mayo"},{code:"Meath",name:"Meath"},{code:"Monaghan",name:"Monaghan"},{code:"Offaly",name:"Offaly"},{code:"Roscommon",name:"Roscommon"},{code:"Sligo",name:"Sligo"},{code:"Tipperary",name:"Tipperary"},{code:"Waterford",name:"Waterford"},{code:"Westmeath",name:"Westmeath"},{code:"Wexford",name:"Wexford"},{code:"Wicklow",name:"Wicklow"}],countries:[D.tg.IRELAND]}]},postalCode:{required:[{option:!1,countries:[D.tg.HONG_KONG]},{option:!0}],autocomplete:{enabled:[{option:!0}]},validation:[{option:/^\d{5}(-\d{4})?$/,countries:[D.tg.UNITED_STATES]},{option:/^[A-Z]\d[A-Z]\s?\d[A-Z]\d$/i,countries:[D.tg.CANADA]},{option:/^(?:[AC-FHKNPRTV-Y]\d{2}|D6W)\s?[A-Z0-9]{4}$/i,countries:[D.tg.IRELAND]}]}};class bs{constructor(e){this._config=e}isLayoutPostalCodeFirst(e){return this.findOption(this._config.layout.type,e)===Cs.POSTAL_CODE_FIRST}isAlternativeLabels(e){return this.findOption(this._config.labels.type,e)===Ps.ALTERNATIVE}isAutocompleteEnabled(e){return!!this.findOption(this._config.autocomplete.enabled,e)}isRegionEnabled(e){return!!this.findOption(this._config.region.enabled,e)}isRegionRequired(e){return!!this.findOption(this._config.region.required,e)}getPredefinedRegions(e){return this.findOption(this._config.region.predefinedRegions,e)}isPostalCodeRequired(e){return!!this.findOption(this._config.postalCode.required,e)}isPostalCodeAutocompleteEnabled(e){return!!this.findOption(this._config.postalCode.autocomplete.enabled,e)}getPostalCodeValidation(e){return this.findOption(this._config.postalCode.validation,e)}findOption(e,t){var n;const i=e.find((e=>{var n,i;if(!e.countries&&!e.companies)return!0;const s=t.country&&(null===(n=e.countries)||void 0===n?void 0:n.includes(t.country)),a=t.company&&(null===(i=e.companies)||void 0===i?void 0:i.includes(t.company));return s||a}));return null!==(n=null==i?void 0:i.option)&&void 0!==n?n:null}}const Ds=n(3325);class Ts{constructor(e,t){this.schema=e,this.config=t}validate(e){return this.schema.validate(e)}allowed(e,t){const n=this.schema.path(e);return!!n&&!n.validate(t,{[e]:t},e)}isRequired(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.schema.path(e);return!!n&&!!n.validate(null,t,e)}getProvider(){return this.config.provider}}class _s{constructor(e,t){this.config=e,this.paymentMethodConfigParser=t,this.managersMap=new Map}createManager(e,t){const n=this.config[e],i=n[t],s=this.paymentMethodConfigParser.parse(i);return new Ts(s,Object.assign(Object.assign({},i),{name:n.name,provider:n.provider}))}getManager(e,t){const n=e+"_"+t;let i=this.managersMap.get(n);return i||(i=this.createManager(e,t),this.managersMap.set(n,i),i)}}var ks=n(9901),Os=n.n(ks),Is=n(8034),xs=n.n(Is),ws=n(3410),Rs=n.n(ws),Ms=n(496),Ls=n.n(Ms),Us=n(6942),Fs=n.n(Us),js=n(8858),Bs=n.n(js);const Gs=(e,t,n)=>{const i=Ls()(t,"ibanCountry");return!i||!n.includes(i)||!!e&&!Fs()(e)},qs=(e,t,n)=>!!Bs()(e)||e>=n.size,Hs=e=>!!Bs()(e)||!!e;var Vs=n(4566),Ks=n(2453),Ys=n.n(Ks);class zs extends Error{constructor(e,t){super(e),Ws(this,"path",t),Ws(this,"expose",!0),Ws(this,"status",400),Error.captureStackTrace&&Error.captureStackTrace(this,zs)}}const Ws=(e,t,n)=>{Object.defineProperty(e,t,{enumerable:!1,configurable:!0,writable:!0,value:n})},$s={type(e,t,n){return"function"==typeof n&&(n=n.name),`${e} must be of type ${n}.`},required(e){return`${e} is required.`},match(e,t,n){return`${e} must match ${n}.`},length(e,t,n){if("number"==typeof n)return`${e} must have a length of ${n}.`;const{min:i,max:s}=n;return i&&s?`${e} must have a length between ${i} and ${s}.`:s?`${e} must have a maximum length of ${s}.`:i?`${e} must have a minimum length of ${i}.`:void 0},size(e,t,n){if("number"==typeof n)return`${e} must have a size of ${n}.`;const{min:i,max:s}=n;return void 0!==i&&void 0!==s?`${e} must be between ${i} and ${s}.`:void 0!==s?`${e} must be less than ${s}.`:void 0!==i?`${e} must be greater than ${i}.`:void 0},enum(e,t,n){const i=n.slice(),s=i.pop();return`${e} must be either ${i.join(", ")} or ${s}.`},illegal(e){return`${e} is not allowed.`},default(e){return`Validation failed for ${e}.`}};var Xs=$s,Qs=n(1740),Zs=n.n(Qs);function Js(e,t,n){"string"!=typeof e?Object.keys(e).forEach((t=>n[t]=e[t])):n[e]=t}function ea(e,t,n){const i=e.split(/\.\$(?=\.|$)/),s=i.shift(),a=Vs.get(t,s);if(!i.length)return n(s,a);if(Array.isArray(a))for(let e=0;e<a.length;e++)ea(na(e,s)+i.join(".$"),t,n)}function ta(e,t,n,i){const s=Zs()(e);if("array"!==s){if("object"===s)for(const[s,a]of Object.entries(e)){const e=na(s,n),o=na(s,i);t(e,o)&&ta(a,t,e,o)}}else e.forEach(((e,s)=>ta(e,t,na(s,n),na("$",i))))}function na(e,t){return t?`${t}.${e}`:e}class ia{constructor(e,t){this.name=e,this.registry={},this._schema=t,this._type=null,this.messages={}}message(e){"string"==typeof e&&(e={default:e});const t=Object.entries(e);for(const[e,n]of t)this.messages[e]=n;return this}schema(e){return this._schema.path(this.name,e),this}use(e){return Object.keys(e).forEach((t=>{let n=e[t];Array.isArray(n)||(n=[n]);const i=n.shift();this._register(t,n,i)})),this}required(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._register("required",[e])}type(e){return this._type=e,this._register("type",[e])}string(){return this.type(String)}number(){return this.type(Number)}array(){return this.type(Array)}date(){return this.type(Date)}length(e){return this._register("length",[e])}size(e){return this._register("size",[e])}enum(e){return this._register("enum",[e])}match(e){return this._register("match",[e])}each(e){return this._schema.path(na("$",this.name),e),this}elements(e){return e.forEach(((e,t)=>{this._schema.path(na(t,this.name),e)})),this}properties(e){for(const[t,n]of Object.entries(e))this._schema.path(na(t,this.name),n);return this}path(){return this._schema.path(...arguments)}typecast(e){const t=this._schema;let n=this._type;if(!n)return e;"function"==typeof n&&(n=n.name);const i=t.typecasters[n]||t.typecasters[n.toLowerCase()];if("function"!=typeof i)throw new Error(`Typecasting failed: No typecaster defined for ${n}.`);return i(e)}validate(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.name;const i=Object.keys(this.registry);for(const s of i){const i=this._run(s,e,t,n);if(i)return i}return null}_run(e,t,n,i){if(!this.registry[e])return;const s=this._schema,{args:a,fn:o}=this.registry[e];return(o||s.validators[e])(t,n,...a,i)?void 0:this._error(e,n,a,i)}_register(e,t,n){return this.registry[e]={args:t,fn:n},this}_error(e,t,n,i){const s=this._schema;let a=this.messages[e]||this.messages.default||s.messages[e]||s.messages.default;return"function"==typeof a&&(a=a(i,t,...n)),new zs(a,i)}}const sa={required(e,t,n){return!1===n||null!=e&&""!==e},type(e,t,n){return null==e||("function"==typeof n?e.constructor===n:Zs()(e)===n)},length(e,t,n){if(null==e)return!0;if("number"==typeof n)return e.length===n;const{min:i,max:s}=n;return!(i&&e.length<i||s&&e.length>s)},size(e,t,n){if(null==e)return!0;if("number"==typeof n)return e===n;const{min:i,max:s}=n;return!(null!=parseInt(i)&&e<i||null!=parseInt(s)&&e>s)},enum(e,t,n){return null==e||n.includes(e)},match(e,t,n){return null==e||n.test(e)}};var aa,oa,ra=sa;class ca{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.opts=t,this.hooks=[],this.props={},this.messages=Object.assign({},Xs),this.validators=Object.assign({},ra),this.typecasters=Object.assign({},Ys()),Object.keys(e).forEach((t=>this.path(t,e[t])))}path(e,t){const n=e.split("."),i=n.pop(),s=n.join(".");if(s&&this.path(s),"$"===i&&this.path(s).type(Array),t instanceof ca)return t.hook(((t,n)=>this.path(na(t,e),n))),this.path(e,t.props);if(t instanceof ia)return this.props[e]=t,this.propagate(e,t),t;const a=this.props[e]||new ia(e,this);if(this.props[e]=a,this.propagate(e,a),!t)return a;if("string"==typeof t||"function"==typeof t)return a.type(t),a;if(Array.isArray(t))return a.type(Array),1===t.length?a.each(t[0]):a.elements(t),a;const o=Object.keys(t);let r=!1;for(const e of o)if("function"!=typeof a[e]){a.type(Object),r=!0;break}return o.forEach((n=>{const i=t[n];if(r)return this.path(na(n,e),i);a[n](i)})),a}typecast(e){for(const[t,n]of Object.entries(this.props))ea(t,e,((t,i)=>{if(null==i)return;const s=n.typecast(i);s!==i&&Vs.set(e,t,s)}));return this}strip(e){return ta(e,((t,n)=>!!this.props[n]||(Vs.delete(e,t),!1))),this}enforce(e){const t=[];return ta(e,((e,n)=>{if(this.props[n])return!0;const i=new zs(Xs.illegal(e),e);return t.push(i),!1})),t}validate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=Object.assign(this.opts,t);const n=[];t.typecast&&this.typecast(e),t.strict&&n.push(...this.enforce(e)),!1!==t.strip&&this.strip(e);for(const[t,i]of Object.entries(this.props))ea(t,e,((t,s)=>{const a=i.validate(s,e,t);a&&n.push(a)}));return n}assert(e,t){const[n]=this.validate(e,t);if(n)throw n}message(e,t){return Js(e,t,this.messages),this}validator(e,t){return Js(e,t,this.validators),this}typecaster(e,t){return Js(e,t,this.typecasters),this}hook(e){return this.hooks.push(e),this}propagate(e,t){return this.hooks.forEach((n=>n(e,t))),this}}ca.ValidationError=zs;class la{constructor(e){this.validationMessagesService=e,this.props={},this.customValidations={requiredIfIbanCountry:Gs,availableAll:Hs,minAmount:qs}}parse(e){return Os()(e,((e,t)=>this._parse(t,e))),new ca(this.props,{strip:!1})}_parse(e,t){if("repeat"===e&&xs()(t))return this.props.period={enum:Rs()(t,W.ONCE),message:{enum:(e,n)=>this.validationMessagesService.get("period")(e,n,Rs()(t,W.ONCE))}},void(this.props[e]={enum:t,message:{enum:(e,n)=>this.validationMessagesService.get("enum")(e,n,t)}});xs()(t)?this.props[e]={enum:t,message:{enum:(e,n)=>this.validationMessagesService.get("enum")(e,n,t)}}:Os()(t,((t,n)=>{n in this.customValidations?this.props[e]={use:{[n]:(e,i)=>this.customValidations[n](e,i,t)},message:{[n]:(e,i)=>this.validationMessagesService.get(n)(e,i,t)}}:this.props[e]={[n]:t,message:{[n]:(e,i)=>this.validationMessagesService.get(n)(e,i,t)}}}))}}(oa=aa||(aa={})).SHORT="short",oa.ADVERB="adverb",oa.NOUN="noun",oa.ADJECTIVE="adjective",aa.SHORT,aa.ADVERB,aa.NOUN;const ua={daily:{short:"day",noun:"day",adverb:"daily",adjective:"daily"},weekly:{short:"w",noun:"week",adverb:"weekly",adjective:"weekly"},biweekly:{short:"2w",noun:"2 weeks",adverb:"biweekly",adjective:"biweekly"},every4weeks:{short:"4w",noun:"4 weeks",adverb:"every 4 weeks",adjective:"4-weekly"},monthly:{short:"mo",noun:"month",adverb:"monthly",adjective:"monthly"},bimonthly:{short:"2mo",noun:"2 months",adverb:"bimonthly",adjective:"bimonthly"},quarterly:{short:"qrt",noun:"quarter",adverb:"quarterly",adjective:"quarterly"},semiannual:{short:"6mo",noun:"6 months",adverb:"semiannually",adjective:"semiannual"},annual:{short:"yr",noun:"year",adverb:"annually",adjective:"annual"}};function da(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:aa.ADVERB;const n=ua[e];return n&&n[t]}class ha{constructor(e,t){this.currencyFormatter=e,this.translateServices=t}get(e){switch(e){case"enum":return this.enum.bind(this);case"minAmount":return this.minAmount.bind(this);case"required":case"requiredIfIbanCountry":return this.required.bind(this);case"period":return this.period.bind(this);default:return this.default.bind(this)}}enum(e,t,n){return this.translateServices?this.translateServices.intlService.translate("paymentMethodValidationMessages.enum",{enums:n.join(", ")}):`This value must be either ${n.join(", ")}`}period(e,t,n){if(this.translateServices){const e=this.translateServices.subscriptionPeriodLabelsService,t=n.map((t=>e.getLabel(t,aa.ADJECTIVE))).join(", ");return this.translateServices.intlService.translate("paymentMethodValidationMessages.period",{periods:t})}return`The chosen payment method only works with the following frequencies: ${n.map((e=>da(e,aa.ADJECTIVE))).join(", ")}`}minAmount(e,t,n){if(this.translateServices){const e=this.translateServices.intlService.formatCurrency(n.size,{currency:n.currency});return this.translateServices.intlService.translate("paymentMethodValidationMessages.minAmount",{minAmount:e})}return`This amount must be at least ${this.currencyFormatter.format(n.size,{currency:n.currency})} due to the payment method chosen.`}required(e){return this.translateServices?this.translateServices.intlService.translate("paymentMethodValidationMessages.required"):`${e} is required`}default(e){return this.translateServices?this.translateServices.intlService.translate("paymentMethodValidationMessages.default"):`Validation failed for ${e}`}}var ma=n(6308);class pa{constructor(){this._token=this.generateToken()}get token(){return this._token}setToken(e){this._token=e}generateToken(){return`${e=(0,ma.i)().slice(0,-1)}${os(e)}`;var e}}class ga{get all(){return ua}}class ya{constructor(e){this.subscriptionPeriodLabelsProvider=e}getLabel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:aa.ADVERB;if(!e)return;const n=this.subscriptionPeriodLabelsProvider.all[e];return n&&n[t]}getValueWithLabel(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:aa.SHORT;return function(e,t){let n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:aa.SHORT;return t?(n=(arguments.length>3?arguments[3]:void 0)||da(t,i),n?`${e}/${n}`:e):e}(e,t,n,this.getLabel(t,n))}}class fa{constructor(e){this.intl=e}get all(){return{daily:{short:this.intl.translate("widgetSubscriptionPeriodLabel.daily.short"),noun:this.intl.translate("widgetSubscriptionPeriodLabel.daily.noun"),adverb:this.intl.translate("widgetSubscriptionPeriodLabel.daily.adverb"),adjective:this.intl.translate("widgetSubscriptionPeriodLabel.daily.adjective")},weekly:{short:this.intl.translate("widgetSubscriptionPeriodLabel.weekly.short"),noun:this.intl.translate("widgetSubscriptionPeriodLabel.weekly.noun"),adverb:this.intl.translate("widgetSubscriptionPeriodLabel.weekly.adverb"),adjective:this.intl.translate("widgetSubscriptionPeriodLabel.weekly.adjective")},biweekly:{short:this.intl.translate("widgetSubscriptionPeriodLabel.biweekly.short"),noun:this.intl.translate("widgetSubscriptionPeriodLabel.biweekly.noun"),adverb:this.intl.translate("widgetSubscriptionPeriodLabel.biweekly.adverb"),adjective:this.intl.translate("widgetSubscriptionPeriodLabel.biweekly.adjective")},every4weeks:{short:this.intl.translate("widgetSubscriptionPeriodLabel.every4weeks.short"),noun:this.intl.translate("widgetSubscriptionPeriodLabel.every4weeks.noun"),adverb:this.intl.translate("widgetSubscriptionPeriodLabel.every4weeks.adverb"),adjective:this.intl.translate("widgetSubscriptionPeriodLabel.every4weeks.adjective")},monthly:{short:this.intl.translate("widgetSubscriptionPeriodLabel.monthly.short"),noun:this.intl.translate("widgetSubscriptionPeriodLabel.monthly.noun"),adverb:this.intl.translate("widgetSubscriptionPeriodLabel.monthly.adverb"),adjective:this.intl.translate("widgetSubscriptionPeriodLabel.monthly.adjective")},bimonthly:{short:this.intl.translate("widgetSubscriptionPeriodLabel.bimonthly.short"),noun:this.intl.translate("widgetSubscriptionPeriodLabel.bimonthly.noun"),adverb:this.intl.translate("widgetSubscriptionPeriodLabel.bimonthly.adverb"),adjective:this.intl.translate("widgetSubscriptionPeriodLabel.bimonthly.adjective")},quarterly:{short:this.intl.translate("widgetSubscriptionPeriodLabel.quarterly.short"),noun:this.intl.translate("widgetSubscriptionPeriodLabel.quarterly.noun"),adverb:this.intl.translate("widgetSubscriptionPeriodLabel.quarterly.adverb"),adjective:this.intl.translate("widgetSubscriptionPeriodLabel.quarterly.adjective")},semiannual:{short:this.intl.translate("widgetSubscriptionPeriodLabel.semiannual.short"),noun:this.intl.translate("widgetSubscriptionPeriodLabel.semiannual.noun"),adverb:this.intl.translate("widgetSubscriptionPeriodLabel.semiannual.adverb"),adjective:this.intl.translate("widgetSubscriptionPeriodLabel.semiannual.adjective")},annual:{short:this.intl.translate("widgetSubscriptionPeriodLabel.annual.short"),noun:this.intl.translate("widgetSubscriptionPeriodLabel.annual.noun"),adverb:this.intl.translate("widgetSubscriptionPeriodLabel.annual.adverb"),adjective:this.intl.translate("widgetSubscriptionPeriodLabel.annual.adjective")}}}}class Ea{constructor(e,t,n){this.checkoutConfiguration=e,this.sessionTokenService=t,this.params=n,this.currentScreenDataGetter=null}getCommonEventPayload(){var e,t,n,i,s,a,o,r,c,l,u,d,h,m,p,g;return{widgetKey:this.checkoutConfiguration.campaign.key,checkoutCompanyKey:this.checkoutConfiguration.campaign.company,elementReminderKey:this.checkoutConfiguration.element.reminderKey,elementKey:this.checkoutConfiguration.element.key,elementType:this.checkoutConfiguration.element.type,elementLocale:this.checkoutConfiguration.element.locale,splitTestName:null!==(t=null===(e=this.checkoutConfiguration.external.element)||void 0===e?void 0:e.splitTestName)&&void 0!==t?t:"",splitTestVariant:null!==(i=null===(n=this.checkoutConfiguration.external.element)||void 0===n?void 0:n.splitTestVariant)&&void 0!==i?i:"",elementData:JSON.stringify(null===(s=this.checkoutConfiguration.external.element)||void 0===s?void 0:s.trackingData),fundraisingPageKey:null!==(o=null===(a=this.checkoutConfiguration.fundraisingPage)||void 0===a?void 0:a.key)&&void 0!==o?o:"",fundraisingPageCustomerKey:null!==(d=null!==(l=null===(c=null===(r=this.checkoutConfiguration.external.campaign)||void 0===r?void 0:r.fundraiser)||void 0===c?void 0:c.customerKey)&&void 0!==l?l:null===(u=this.checkoutConfiguration.fundraisingPage)||void 0===u?void 0:u.admin)&&void 0!==d?d:"",checkoutType:this.checkoutConfiguration.checkoutType,donationType:this.checkoutConfiguration.defaultFlowType,eventTags:null!==(p=null===(m=null===(h=this.checkoutConfiguration.external.tracker)||void 0===h?void 0:h.eventTags)||void 0===m?void 0:m.split(","))&&void 0!==p?p:[],eventComment:(null===(g=this.checkoutConfiguration.external.tracker)||void 0===g?void 0:g.embedClientId)?{embedClientId:this.checkoutConfiguration.external.tracker.embedClientId}:{},checkoutViewId:this.sessionTokenService.token,checkoutOpenTime:this.params.checkoutOpenTimestamp,checkoutLifetime:Date.now()-this.params.checkoutOpenTimestamp,checkoutLocale:this.params.checkoutLocale,funEmbedRelease:this.params.funEmbedRelease}}setCurrentScreenDataGetter(e){this.currentScreenDataGetter=e}getCurrentScreenData(){var e,t;try{return null!==(t=null===(e=this.currentScreenDataGetter)||void 0===e?void 0:e.call(this))&&void 0!==t?t:null}catch(e){if(e instanceof Error&&"Cannot identify current screen"===e.message)return null;throw e}}getOpeningTime(){switch(this.checkoutConfiguration.checkoutType){case Ce.PAGE:return Math.round(window.performance.now());case Ce.MODAL:return Date.now()-this.params.checkoutOpenTimestamp;default:throw new le.HP(this.checkoutConfiguration.checkoutType,"Unexpected checkout type")}}}class Sa extends Error{constructor(e){super(`Method is not implemented: ${e}`)}}class va extends Ea{createCheckoutViewEvent(){throw new Sa("createCheckoutViewEvent")}createCheckoutScreenViewEvent(){throw new Sa("createCheckoutScreenViewEvent")}createCheckoutChargeEvent(){throw new Sa("createCheckoutChargeEvent")}createCheckoutErrorEvent(){throw new Sa("createCheckoutErrorEvent")}createCheckoutCloseEvent(){throw new Sa("createCheckoutCloseEvent")}createCheckoutClickEvent(){throw new Sa("createCheckoutClickEvent")}createCheckoutCustomEvent(){throw new Sa("createCheckoutCustomEvent")}}class Aa{constructor(e){this.targetWindow=e,this.isTrackingClicks=!1,this.clickHandler=this.handleClick.bind(this)}setTrackSender(e){this.trackSender=e}startTracking(){if(this.isTrackingClicks)throw new Error("Already tracking clicks");this.targetWindow.addEventListener("click",this.clickHandler,!0),this.isTrackingClicks=!0}stopTracking(){this.targetWindow.removeEventListener("click",this.clickHandler),this.isTrackingClicks=!1}handleClick(e){var t;const n=e.target;if(!n)return;if(n.closest("label")&&"INPUT"!==n.tagName)return;const i=si(n,(e=>e&&e.hasAttribute&&e.hasAttribute(Aa.ElementNameDataAttr)));null===(t=this.trackSender)||void 0===t||t.call(this,{target:n,elementName:null==i?void 0:i.getAttribute(Aa.ElementNameDataAttr)})}}Aa.ElementNameDataAttr="data-tracking-element-name";class Ca{constructor(){this.payload={}}merge(e){const t={};for(const n in e)t[n]=e[n];for(const e in this.payload)t[e]=this.payload[e];var n;!e.elementType||(n=e.elementType)&&Object.values(Ae).includes(n)||delete t.elementType,this.payload=t,e.eventComment&&this.mergeEventComment(e.eventComment)}validate(){return!(!this.payload.companyKey||8!==this.payload.companyKey.length||!this.payload.clientId||!this.eventType)}toObject(){const e={};for(const t in this.payload)e[t]=this.payload[t];return this.payload.eventComment&&(e.eventComment=JSON.stringify(this.payload.eventComment)),e.eventType=this.eventType,e}mergeEventComment(e){this.payload.eventComment||(this.payload.eventComment={}),Object.assign(this.payload.eventComment,e)}}class Pa extends Ca{get eventType(){return"pageLeave"}}const Na="fun_test";class ba extends Ca{constructor(e){super();const t=ii(location.href);t[Na]&&(this.payload.splitTestName=t[Na]),t.fun_variant&&(this.payload.splitTestVariant=t[Na]),e&&(this.payload.eventComment=Object.assign(Object.assign({},this.payload.eventComment),e))}get eventType(){return"pageView"}}class Da extends Ca{get eventType(){return"ping"}}var Ta;!function(e){e.CHECKOUT="checkout"}(Ta||(Ta={}));class _a{constructor(e){this.tags=new Set,this.tracker=e}get companyKey(){return this.tracker.companyKey}get clientId(){return this.tracker.clientId}get livemode(){return this.tracker.livemode}get clientLocale(){return this.tracker.clientLocale}get debug(){return this.tracker.debug}get page(){return this.tracker.page}get isPingAvailable(){return this.tracker.isPingAvailable}getTags(){return Array.from(this.tags)}customTrack(e){return this.tracker.customTrack(e)}track(e,t){return this.tracker.track(e,t)}ping(e,t){const n=e||new Da;this.tracker.ping(n,t)}initializePointerUsageTracking(){this.tracker.initializePointerUsageTracking()}subscribe(e,t){return this.tracker.subscribe(e,t)}setEventTags(e){e.forEach((e=>this.tags.add(e)))}removeEventTags(e){this.tags.forEach((t=>{e.some((e=>t.substring(0,e.length)===e))&&this.tags.delete(t)}))}mergeEventTags(e){let t=[];e.payload.eventTags&&(t=e.payload.eventTags.slice()),this.tags.forEach((e=>{-1===t.indexOf(e)&&t.push(e)})),e.payload.eventTags=t}}class ka extends _a{constructor(e,t,n,i){super(e),this.tracker=e,this.checkoutConfiguration=t,this.trackerClickInterception=n,this.params=i,this._trackerCheckoutEventService=null,this.trackerClickInterception.setTrackSender((e=>this.trackClick(e.elementName||"",e.target)))}get pageViewId(){var e;return null===(e=this.tracker.page)||void 0===e?void 0:e.pageViewId}get checkoutOpenTimestamp(){return this.params.checkoutOpenTimestamp}initialize(){this.tracker.initializePointerUsageTracking(this.params.targetWindow),this.trackerClickInterception.startTracking()}dispose(){this.trackerClickInterception.stopTracking()}trackCheckoutView(){this.trackEvent((()=>this.trackerCheckoutEventService.createCheckoutViewEvent()))}trackCheckoutScreenView(e){this.trackEvent((()=>this.trackerCheckoutEventService.createCheckoutScreenViewEvent(e)))}trackCheckoutCharge(e){this.trackEvent((()=>this.trackerCheckoutEventService.createCheckoutChargeEvent(e)))}trackCheckoutError(e){this.trackEvent((()=>this.trackerCheckoutEventService.createCheckoutErrorEvent(e)))}trackCheckoutClose(){this.trackEvent((()=>this.trackerCheckoutEventService.createCheckoutCloseEvent()))}trackCheckoutCustomEvent(e){this.trackEvent((()=>this.trackerCheckoutEventService.createCheckoutCustomEvent(e)))}trackClick(e,t){this.trackEvent((()=>this.trackerCheckoutEventService.createCheckoutClickEvent({target:t,elementName:e})))}trackPageView(e){this.trackEvent((()=>new ba(e)))}trackPageLeave(){this.trackEvent((()=>new Pa))}track(e){this.trackEvent((()=>e))}customTrack(e){this.trackEvent((()=>this.trackerCheckoutEventService.createCheckoutCustomEvent(e)))}ping(e){this.pingEvent(e||new Da)}getTags(){return[...super.getTags(),...this.tracker.getTags()]}setTrackerCheckoutEventService(e){this._trackerCheckoutEventService=e}get trackerCheckoutEventService(){if(!this._trackerCheckoutEventService)throw new Error("TrackerCheckoutEventService should be set");return this._trackerCheckoutEventService}trackEvent(e){if(!this.checkoutConfiguration.infrastructureParams.showcase)try{const t=e();this.mergeEventPayload(t),this.tracker.track(t,{url:this.params.url,trackerType:Ta.CHECKOUT})}catch(e){if(e instanceof Sa)return;throw e}}pingEvent(e){this.checkoutConfiguration.infrastructureParams.showcase||this.tracker.isPingAvailable&&(this.mergeEventPayload(e),this.tracker.ping(e,{url:this.params.url}))}mergeEventPayload(e){const t=this.trackerCheckoutEventService.getCommonEventPayload();e.merge(t),this.mergeEventTags(e)}}var Oa,Ia=n(2155);!function(e){e.SHOULD_SHOW="should-show",e.SHOULD_HIDE="should-hide",e.WAS_HIDDEN="was-hidden"}(Oa||(Oa={}));const xa=(0,Ia.createContext)(null);function wa(){const e=(0,Ia.useContext)(xa);if(!e)throw new Error("View event emitter was not provided");return e}class Ra extends Yt{tryStart(){this.isActive||super.start()}}class Ma extends Yt{}function La(e){let t,n,i,s,a,o,r,c,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(t=3&e.length,n=e.length-t,i=l,a=3432918353,o=461845907,c=0;c<n;)r=255&e.charCodeAt(c)|(255&e.charCodeAt(++c))<<8|(255&e.charCodeAt(++c))<<16|(255&e.charCodeAt(++c))<<24,++c,r=(65535&r)*a+(((r>>>16)*a&65535)<<16)&4294967295,r=r<<15|r>>>17,r=(65535&r)*o+(((r>>>16)*o&65535)<<16)&4294967295,i^=r,i=i<<13|i>>>19,s=5*(65535&i)+((5*(i>>>16)&65535)<<16)&4294967295,i=27492+(65535&s)+((58964+(s>>>16)&65535)<<16);switch(r=0,t){case 3:r^=(255&e.charCodeAt(c+2))<<16;break;case 2:r^=(255&e.charCodeAt(c+1))<<8;break;case 1:r^=255&e.charCodeAt(c),r=(65535&r)*a+(((r>>>16)*a&65535)<<16)&4294967295,r=r<<15|r>>>17,r=(65535&r)*o+(((r>>>16)*o&65535)<<16)&4294967295,i^=r}return i^=e.length,i^=i>>>16,i=2246822507*(65535&i)+((2246822507*(i>>>16)&65535)<<16)&4294967295,i^=i>>>13,i=3266489909*(65535&i)+((3266489909*(i>>>16)&65535)<<16)&4294967295,i^=i>>>16,i>>>0}function Ua(e,t){if(t.length<3)return t;const n=La(e)%t.length,i=(La(e+"_secondary")%t.length+n+1)%t.length;return[t[n],t[i]].sort(((e,t)=>null===e||null===t?0:e-t))}class Fa extends Yt{get isTestGroup(){return this.isActive&&this.isVariant(Qe.TEST)}get upsellAmountsMap(){const e=this.tracker.clientId;return{[Li.UP_TO_25]:Ua(e,[1500,2e3]),[Li.UP_TO_35]:Ua(e,[2e3,2500,3e3]),[Li.UP_TO_55]:Ua(e,[2500,3e3,3500,4e3]),[Li.UP_TO_100]:Ua(e,[3500,4500,5500]),[Li.UP_TO_150]:Ua(e,[4e3,5e3,6e3]),[Li.UP_TO_200]:Ua(e,[5e3,7500,1e4])}}tryStart(e){this.active||this.canBeStarted(e)&&this.start(e)}canBeStarted(e){return!!e.preDonationUpsellIsEnabled}isEnabled(e){return this.canBeStarted(e)&&this.isTestGroup}tryToExpose(e){e!==W.MONTHLY&&e!==W.EVERY_4_WEEKS||this.exposure()}}class ja extends Yt{get isTestGroup(){return this.isActive&&this.isVariant(st.TEST)}tryStart(e){this.active||e.isPreDonationUpsellEnabled&&this.start(e)}tryExposure(e){e.preDonationUpsellTargetFrequency!==W.MONTHLY&&e.preDonationUpsellTargetFrequency!==W.EVERY_4_WEEKS||this.exposure()}}class Ba{constructor(e){this._locale=e}get intl(){if(!this._intl)throw new Error("Intl service is undefined in date formatter");return this._intl}set intl(e){this._intl=e}changeLocale(e){return this.locale=e,this.locale}get locale(){return this._locale}set locale(e){this._locale=e}}var Ga;!function(e){e.LONG="long",e.SHORT="short",e.LONG_WITH_YEAR="longWithYear",e.SHORT_WITH_YEAR="shortWithYear"}(Ga||(Ga={}));class qa extends Ba{format(e){const t={numberingSystem:"latn"};switch((arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:Ga.SHORT}).type){case Ga.LONG:t.month="long",t.day="numeric";break;case Ga.LONG_WITH_YEAR:t.month="long",t.day="numeric",t.year="numeric";break;case Ga.SHORT_WITH_YEAR:t.month="short",t.day="numeric",t.year="numeric";break;default:t.month="short",t.day="numeric"}return new Date(e).toLocaleString(this.locale,t)}}class Ha{load(e){const t=this.getTranslationFilename(e);return this.loadFile(t)}getTranslationFilename(e){return e.replace("-","_")}}class Va extends Ha{loadFile(e){return(0,c.sH)(this,void 0,void 0,(function*(){return(yield n(3367)(`./${e}.json`)).default}))}}const Ka=["common.screenAriaLabel","common.thankYouBadge","common.paymentNotAuthorizedError","confirmCloseDialog.question","confirmCloseDialog.instructions","paymentLoader.text","sharing.label","sharing.ariaLabel","tributeBadge.tooltipLabel","blockedScreen.description","mailingAddressScreen.onBehalfOfSubtitle","privacyScreen.titleFastTrackChoose","privacyScreen.alert.message","privacyScreen.donateAnonymously.label","privacyScreen.donateAnonymously.helpAriaLabel","privacyScreen.donateAsOrganization.label","privacyScreen.donateAsOrganization.input.helpAriaLabel","privacyScreen.donateAsOrganization.input.tooltipLabel","privacyScreen.donateAsOrganization.input.error.required","privacyScreen.donateAsOrganization.input.error.minLength","thankYouScreen.description.once","thankYouScreen.description.recurring.default","thankYouScreen.description.recurring.withEndDate","thankYouScreen.description.upsell","thankYouScreen.description.tribute.once","thankYouScreen.description.tribute.recurring.withEndDate","thankYouScreen.postDonationUpsell.description","thankYouScreen.postDonationUpsell.message","thankYouScreen.postDonationUpsell.error.min","thankYouScreen.postDonationUpsell.error.max","thankYouScreen.postDonationUpsell.button.confirm","thankYouScreen.share.emailSubject","thankYouScreen.makeAnotherTribute.button","payButton.label.annual","payButton.label.continue","payButton.label.once","payButton.label.daily","payButton.label.weekly","payButton.label.biweekly","payButton.label.every4weeks","payButton.label.monthly","payButton.label.bimonthly","payButton.label.quarterly","payButton.label.semiannual","donateForm.donationCurrency","donateForm.title","donateForm.frequencyAriaLabel","donateForm.donationCurrency","donateForm.donationAmountField.label","donateForm.donationAmountField.average.hint","donateForm.donationAmountField.error.required","donateForm.donationAmountField.error.min","donateForm.annualDonation.label","donateForm.dailyDonation.label","donateForm.designation.error.required","donateForm.tribute.label.dedication","donateForm.tribute.tooltipLabel","donateForm.donateButton.once","donateForm.donateButton.daily","donateForm.donateButton.weekly","donateForm.donateButton.biweekly","donateForm.donateButton.every4weeks","donateForm.donateButton.monthly","donateForm.donateButton.bimonthly","donateForm.donateButton.quarterly","donateForm.donateButton.semiannual","donateForm.donateButton.annual","doubleDonationScreen.description.desktop","doubleDonationScreen.description.mobile","doubleDonationScreen.tooltipLabel","doubleDonationScreen.nameMatch","doubleDonationScreen.message","doubleDonationScreen.matchedCompanyBlock.name","doubleDonationScreen.smallDonationAmountExperiment.name","doubleDonationScreen.button.donate.once","doubleDonationScreen.button.donate.recurring","fastTrackPaymentOptionsScreen.title","idealConfirmationScreen.nextStepOverview","idealConfirmationScreen.nextStep","idealConfirmationScreen.returnLabel","paymentMethodScreen.title","paymentMethodScreen.transactionCostsInfo","paymentMethodScreen.donateNow","paymentMethodScreen.applePayDonateButton","paymentMethodScreen.applePayDonateButtonAriaLabel","paymentMethodScreen.paypal.errors.unavailable","paymentMethodScreen.creditCardIsUnavailableInfo.part-1","paymentMethodScreen.creditCardIsUnavailableInfo.part-2","upsellScreen.questionShort","upsellScreen.questionShortEvery4Weeks","upsellScreen.description","upsellScreen.descriptionEvery4Weeks","upsellScreen.button.donate4Weeks","upsellScreen.button.donateMonthly","usBankAccountScreen.description.desktop","usBankAccountConfirmationScreen.button","usBankAccountGuideScreen.description.descriptorCode"];var Ya=n(8453),za=n(2532);class Wa{static isLocaleCode(e){return void 0!==e&&Ya.O.includes(e)}constructor(e,t,n,i,s,a,o){this.translationService=e,this.dateFormatter=t,this.currencyFormatter=n,this.numberFormatter=i,this.company=s,this.donateToPayTokens=a,this._locale=Wa.DEFAULT_LOCALE,this.availableLocales=o.availableLocales,this.locale=o.locale,this.company=s,this.donateToPayTokens=a,this.dateFormatter.intl=this}get locale(){return this._locale}get language(){return this.locale.split("-")[0]}getCurrencyFormat(){return this.currencyFormatter.getFormat()}setLocale(e){const t=this.locale;this.locale=e;const n=[this.translationService.changeLocale(this.locale)];return Promise.all(n).then((()=>this.locale)).catch((e=>(this.locale=t,Promise.reject(e)))).finally((()=>{this.dateFormatter.changeLocale(this.locale),this.currencyFormatter.changeLocale(this.locale),this.numberFormatter.changeLocale(this.locale)}))}translate(e,t){const n=(0,za.q1)(this.translationService.translate(e,t));return this.replaceDonateToPay(e,n)}safeTranslate(e,t){const n=(0,za.q1)(this.translationService.safeTranslate(e,t));return this.replaceDonateToPay(e,n)}formatDate(e,t){return this.dateFormatter.format(e,t)}formatCurrency(e,t){return this.currencyFormatter.format(e,t)}formatSymbol(e,t){return this.currencyFormatter.formatCurrencySymbol(e,t)}formatNumber(e,t){return this.numberFormatter.format(e,t)}isLocaleAvailable(e){return this.availableLocales.some((t=>t===e))}replaceDonateToPay(e,t){if("AFJCHFEK"===this.company&&this.locale===ne.D.EN_US&&this.donateToPayTokens.includes(e)){const e={donation:"payment",Donation:"Payment",Donate:"Pay",donate:"pay",donating:"paying"};return t.replace(/donation|Donation|Donate|donate|donating/g,(t=>e[t]))}return t}set locale(e){this.isLocaleAvailable(e)?this._locale=e:this._locale=Wa.DEFAULT_LOCALE}}Wa.DEFAULT_LOCALE=ne.D.EN_US;class $a{constructor(e,t){this.translationProvider=e,this.translationLoader=t}changeLocale(e){return this.loadTranslation(e).then((t=>{this.translationProvider.locale(e),this.translationProvider.extend(t)}))}translate(e,t){return this.translationProvider.t(e,t)}safeTranslate(e,t){return this.translationProvider.safeT(e,t)}loadTranslation(e){return this.translationLoader.load(e)}}var Xa=n(2094),Qa=n(1427);class Za{constructor(e,t){this.baseLocale=e,this.lingui=(0,Xa.sK)({locale:e,messages:{[e]:t||{}},localeData:{[e]:Za.makeLocaleData(e)}})}static extractLanguageFromLocale(e){const[t]=e.split("-");return t}static makeLocaleData(e){const t=this.extractLanguageFromLocale(e);return{plurals:Qa[t]}}get defaultMessages(){return this.lingui._messages[this.baseLocale]}locale(e){if(void 0!==e){const t=Za.makeLocaleData(e);this.lingui.loadLocaleData(e,t),this.lingui.activate(e)}return this.lingui.locale}t(e,t){const n=this.lingui._(e,t,{formats:{number:{numberingSystem:"latn"}}});return n===e?"":n}safeT(e,t){const n=Object.fromEntries(Object.entries(t||{}).map((e=>{let[t,n]=e;return[t,(0,za.ZD)(String(n))]})));return this.t(e,n)}extend(e){const t=Object.assign({},this.defaultMessages,e);this.lingui.load(this.locale(),t)}}function Ja(e,t,n,i){return(Number(e)||0).toLocaleString(i||"en-US",{style:"decimal",currency:"USD",minimumFractionDigits:t||0,maximumFractionDigits:n||0,numberingSystem:"latn"})}class eo{constructor(e){this._locale=e}changeLocale(e){return this.locale=e,this.locale}get locale(){return this._locale}set locale(e){this._locale=e}}class to extends eo{constructor(e){super(e),this.formatNumber=Ja}format(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{minimumFractionDigits:0,maximumFractionDigits:0};return this.formatNumber(e,t.minimumFractionDigits,t.maximumFractionDigits,this.locale)}}class no{constructor(e,t,n){this.locale=e,this.widgetLocalizationConfig=t,this.companyLocalizationConfig=n}getDataLanguage(){const e=(0,za.Qk)(this.locale);return-1!==this.widgetLocalizationConfig.supportedLanguages.indexOf(e)?e:(0,za.Qk)(this.widgetLocalizationConfig.defaultLocale)}getUILocale(){const e=this.locale,t=this.widgetLocalizationConfig.useCompanyInterfaceLocales,n=-1!==this.companyLocalizationConfig.interfaceLocales.indexOf(e),i=-1!==this.widgetLocalizationConfig.supportedLanguages.indexOf((0,za.Qk)(e));return t&&!n||!t&&!i?this.widgetLocalizationConfig.defaultLocale:e}}var io=n(1755);const so={base:{color:"#222832",fontWeight:400,fontFamily:"'IBM Plex Sans', sans-serif",fontSize:"16px",lineHeight:"24px",fontSmoothing:"antialiased",":focus":{color:"#222832"},"::placeholder":{color:"#697484"},":focus::placeholder":{color:"#697484"}},invalid:{color:"#dA2243",":focus":{color:"#dA2243"},"::placeholder":{color:"#697484"},":focus::placeholder":{color:"#697484"}}},ao={focus:"focused",empty:"empty",invalid:"invalid"},oo={fonts:[{family:"IBM Plex Sans",src:`url(${io}) format('woff2')`,weight:"400",style:"normal"}]},ro=/#([\da-z_-]{1,25})(\?|&|$)/i,co=e=>{var t,n,i;return"string"==typeof(null===(t=e.navigator)||void 0===t?void 0:t.userAgent)&&!!(null===(i=null===(n=e.navigator)||void 0===n?void 0:n.userAgent)||void 0===i?void 0:i.match("CriOS"))},lo=/^X[\dA-Z]{7}/,uo=new RegExp("\\/-\\/(N[\\dA-Z]{7})");var ho,mo,po;new RegExp(`${uo.source}(?!\\/join)`),new RegExp(`${uo.source}\\/join`),function(e){e.WIDGET="WIDGET",e.ELEMENT="ELEMENT",e.FUNDRAISING_PAGE="FUNDRAISING_PAGE"}(ho||(ho={})),function(e){e.type="type",e.recurring="recurring",e.amount="amount",e.modifyAmount="modifyAmount",e.designationId="designationId",e.fundraiser="fundraiser",e.modifyDesignation="modifyDesignation",e.firstName="firstName",e.lastName="lastName",e.email="email",e[e.fundraiseupLivemode="fundraiseupLivemode"]="fundraiseupLivemode",e.restoreToken="restoreToken",e.clientId="clientId",e.paymentIntent="payment_intent",e.paymentIntentClientSecret="payment_intent_client_secret",e.redirectStatus="redirect_status"}(mo||(mo={})),function(e){e.fundraiser="fundraiser",e.element="element"}(po||(po={}));let go=!1;class yo{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;this.keysKeeper=e,this._disabled=!1,this.originalQueryStringAndHash="",this.window=t}get disabled(){return this._disabled}set disabled(e){e!==this._disabled&&(this._disabled=e)}checkUrl(){if(this.disabled)return;if(!this.window.location.hash)return;if(!this.keysKeeper.exists(ho.WIDGET,this.window.location.hash))return;go=!1;const e=this.keysKeeper.getOriginalWidgetKey(this.window.location.hash),t=this.window.location.href.replace(this.window.location.hash,"#"+e);this.window.history.replaceState(null,this.window.document.title,t)}setUrl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this.disabled)return;if(!this.keysKeeper.exists(ho.WIDGET,e)&&!this.isModalKey(e))return;const s=this.getQueryString({keyOrHash:e,hrefParams:t,queryString:this.window.location.search,hash:this.window.location.hash,fundraisingPageKey:n}),a=this.cleanHash(this.window.location.hash);this.originalQueryStringAndHash=this.cleanQueryString(s,t,i)+a;const o=this.window.location.origin+this.normalizePathname(this.window.location.pathname)+s+a;this.window.history.replaceState(null,this.window.document.title,o),go=!1}back(){co(this.window)||this.window.history.go(-2),setTimeout((()=>{const e=ii(this.window.location.search,!1).form;if(this.keysKeeper.exists(ho.WIDGET,e)||this.isModalKey(e))return go?void this.window.history.back():this.clearUrl()}),150)}clearUrl(){if(this.disabled)return;const e=ii(this.window.location.search,!1).form;if(!this.keysKeeper.exists(ho.WIDGET,e)&&!this.isModalKey(e))return;const t=this.window.location.origin+this.normalizePathname(this.window.location.pathname)+this.originalQueryStringAndHash;this.window.history.replaceState(null,this.window.document.title,t),go=!0}isModalKey(e){return[Ae.P2P_BUTTON,Ae.P2P_LINK].some((t=>this.keysKeeper.checkElementType(t,e)))}getQueryString(e){let{keyOrHash:t,hrefParams:n,hash:i,queryString:s,fundraisingPageKey:a}=e;const o=ii(n,!0),r={form:t},c=ii(i,!1),l=ii(s,!1),u=function(e){const t=ro.exec(e);return t&&t[1]?t[1]:""}(i)||l.form||"",d=0!==u.length&&u.toLowerCase()!==t.toLowerCase();return a&&(r.fundraiser=a),Object.keys(c).forEach((e=>{d&&e in r||(r[e]=c[e])})),Object.keys(l).forEach((e=>{d&&e in r||(r[e]=l[e])})),Object.assign(r,o),r.form=t,r.element&&lo.test(r.element)&&delete r.element,"?"+oi(r,!1)}cleanHash(e){const t=e.split("&",1)[0];return this.keysKeeper.exists(ho.WIDGET,t)||"#"===t||-1!==t.indexOf("=")?"":t}cleanQueryString(e,t,n){const i=ii(t,!1),s=ii(e,!1);delete s.form,Object.values(mo).forEach((e=>delete s[e])),Object.keys(po).forEach((e=>delete s[e])),n||Object.keys(i).forEach((e=>delete s[e]));const a=oi(s,!1);return""===a?"":"?"+a}normalizePathname(e){return e.startsWith("//")?e.slice(1):e}}function fo(e){return new Promise((t=>{setTimeout(t,e)}))}class Eo{static forKey(e){return new Eo(e)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this.key=e,this.params=t,this.customParams=n}toString(){const e=[].concat(this.params,this.customParams);return["#"+this.key,e.map((e=>{let[t,n]=e;return t+"="+encodeURIComponent(n)})).join("&")].filter(Boolean).join("&")}addRecurring(e){return e&&this.params.push([mo.recurring,e]),this}addAmount(e){return e&&this.params.push([mo.amount,e.toString()]),this}addModifyAmount(e){return!1!==e&&"no"!==e||this.params.push([mo.modifyAmount,"no"]),this}addModifyDesignation(e){return!1!==e&&"no"!==e||this.params.push([mo.modifyDesignation,"no"]),this}addDesignation(e){return"no"===e?this.params.push(["designation",e]):e&&this.params.push([mo.designationId,e]),this}addFirstName(e){return e&&this.params.push([mo.firstName,e]),this}addLastName(e){return e&&this.params.push([mo.lastName,e]),this}addEmail(e){return e&&this.params.push([mo.email,e]),this}addFundraiseupLivemode(e){return!1!==e&&"no"!==e||this.params.push([mo.fundraiseupLivemode,"no"]),this}addCustomQueryParams(e){if(!e)return this;for(const[t,n]of Object.entries(e))n&&this.customParams.push([t,n]);return this}}var So,vo,Ao;!function(e){e.POP="popstate"}(So||(So={})),function(e){e.INITIAL="initial",e.LOOP="loop"}(vo||(vo={}));class Co{constructor(e){this.window=e,this.navigationHandlers=new Set,this.isLoop=!1,this.historyStateStack=[],this.historyApi=this.window.history,this._handleNavigation=this.handleNavigation.bind(this)}initialize(e){var t;this.historyStateStack=[],this.url=e;const n=(null===(t=this.historyApi.state)||void 0===t?void 0:t.state)||this.historyApi.state;return n!==vo.INITIAL&&this.setInitialNavigationState(n),this.window.addEventListener(So.POP,this._handleNavigation),this}dispose(){this.historyStateStack.length&&(this.historyApi.go(-this.historyStateStack.length),this.historyStateStack=[]),this.window.removeEventListener(So.POP,this._handleNavigation)}onNavigation(e){this.navigationHandlers.add(e)}activateLoop(){this.isLoop||(this.isLoop=!0,this.setNavigationState(vo.LOOP,{replace:!0}))}deactivateLoop(){this.isLoop&&(this.isLoop=!1,this.setNavigationState(vo.INITIAL,{replace:!0}))}callNavigationHandlers(){this.navigationHandlers.forEach((e=>{e()}))}handleNavigationInitialState(){this.historyApi.length>2?this.historyApi.back():this.setNavigationState(vo.INITIAL)}handleNavigation(e){var t;const n=(null===(t=e.state)||void 0===t?void 0:t.state)||e.state,i=null===n||""===n,s=n===vo.INITIAL;this.historyStateStack.pop(),this.isLoop&&(s||i)&&this.setNavigationState(vo.LOOP),this.isLoop||!s&&!i?this.callNavigationHandlers():this.handleNavigationInitialState()}setNavigationState(e,t){(null==t?void 0:t.replace)?this.historyApi.replaceState({state:e},"",this.url):(this.historyApi.pushState({state:e},"",this.url),this.historyStateStack.push(e))}setInitialNavigationState(e){const t=e===vo.LOOP;this.setNavigationState(vo.INITIAL,{replace:t})}}class Po extends Co{handleNavigationInitialState(){this.callNavigationHandlers()}}!function(e){e.CHECKOUT_INTENT="checkoutIntent",e.TRIBUTE_SELECTED="tributeSelected",e.EMAIL_LOG="emailLog",e.EMAIL_LOG_ID="emailLogId",e.RESTORE_TOKEN="restoreToken",e.CLIENT_ID="clientId",e.PAYMENT_INTENT="payment_intent",e.PAYMENT_INTENT_CLIENT_SECRET="payment_intent_client_secret",e.REDIRECT_STATUS="redirect_status"}(Ao||(Ao={}));class No{constructor(e,t,n,i){this.globalWindow=e,this.keysKeeper=t,this.checkoutConfiguration=n,this.isOpenedFromUrl=i}initialize(){this.setUrl();const e=this.clearUrl();this.flowNavigationRouter.initialize(e)}dispose(){return(0,c.sH)(this,void 0,void 0,(function*(){this.flowNavigationRouter.dispose(),yield fo(150),this.urlRouter.clearUrl()}))}onNavigation(e){this.flowNavigationRouter.onNavigation(e)}activateNavigationLoop(){this.flowNavigationRouter.activateLoop()}deactivateNavigationLoop(){this.flowNavigationRouter.deactivateLoop()}get fundraiserIdentifier(){var e,t,n,i;return null!==(i=(null===(t=null===(e=this.checkoutConfiguration.external.campaign)||void 0===e?void 0:e.fundraiser)||void 0===t?void 0:t.key)||(null===(n=this.checkoutConfiguration.fundraisingPage)||void 0===n?void 0:n.key))&&void 0!==i?i:""}get urlRouter(){return this._urlRouter||(this._urlRouter=new yo(this.keysKeeper,this.globalWindow)),this._urlRouter}get flowNavigationRouter(){return this._flowNavigationRouter||(this._flowNavigationRouter=new Po(this.globalWindow)),this._flowNavigationRouter}clearUrl(){const e=ii(this.globalWindow.location.search,!1),t={},n=Object.values(Ao);Object.keys(e).forEach((i=>{n.includes(i)||(t[i]=e[i])}));const i=oi(t,!1);return`${this.globalWindow.location.origin}${this.globalWindow.location.pathname}${i?`?${i}`:""}`}setUrl(){this.urlRouter.disabled=!!this.checkoutConfiguration.showcase;const e=Eo.forKey("").addCustomQueryParams(this.checkoutConfiguration.rawExternal.queryParams);this.urlRouter.checkUrl(),this.urlRouter.setUrl(this.checkoutConfiguration.campaign.customHash||this.checkoutConfiguration.campaign.key,e.toString().slice(1),this.fundraiserIdentifier,this.isOpenedFromUrl)}}class bo{constructor(e){let{distributionId:t,name:n,variants:i,sentry:s}=e;this.variants=new Map,this.distributionId=t,this.name=n,this.sentry=s,i.forEach((e=>{this.variants.set(e.name,{name:e.name,key:e.key,weight:e.weight})})),this.variantSelectors=this.getDistributedSelectors()}get currentVariantName(){return this._currentVariantName}get currentVariantKey(){var e;return this._currentVariantName?null===(e=this.variants.get(this._currentVariantName))||void 0===e?void 0:e.key:void 0}get previousVariantName(){return this._previousVariantName}initCurrentVariantName(){var e;const t=this.getSelection(),n=[];this.variantSelectors.forEach(((e,t)=>{n.push([t,e])})),this.currentVariantName=null===(e=n.find((e=>{let[,[n,i]]=e;return t>=n&&t<i})))||void 0===e?void 0:e[0]}setVariant(e){this.variants.has(e)?this.currentVariantName=e:this.sentry.captureException(new Vt(this.name))}set currentVariantName(e){this._previousVariantName=this._currentVariantName,this._currentVariantName=e}getSelection(){const e=this.getMaxDistributionValue();return Number(La(`${this.distributionId}:${this.name}`)%e)}getDistributedSelectors(){let e=0;const t=new Map;return this.assertVariantsWithWeight(this.variants),this.variants.forEach(((n,i)=>{let{weight:s}=n;const a=this.getWeightSum(),o=this.getMaxDistributionValue()/a;t.set(i,[e,e+o*s]),e+=o*s})),t}getWeightSum(){let e=0;return this.assertVariantsWithWeight(this.variants),this.variants.forEach((t=>{let{weight:n}=t;return e+=n})),e}getMaxDistributionValue(){return 100*this.variants.size}assertVariantsWithWeight(e){if(![...e.entries()].every((e=>{let[,{weight:t}]=e;return void 0!==t})))throw new Error("Every variant should have weight")}}class Do{constructor(e){this.experiments=new Map;const{experimentsSettings:t,tracker:n,funStorage:i,companyKey:s,widgetKey:a,user:o,parentCompanyKey:r,infrastructureParams:c,sentry:l,distributionId:u,isDebugMode:d,isFundraiseupVisitor:h,isAbTestMode:m=!1}=e;if(this.experimentsSettings=t,this.tracker=n,this.funStorage=i,this.companyKey=s,this.parentCompanyKey=r,this.widgetKey=a,this.user=o,this.infrastructureParams=c,this.sentry=l,this.distributionId=u,this.isDebugMode=d,this.isFundraiseupVisitor=h,this.isAbTestMode=m,!this.distributionId)throw new Error("ExperimentController: Distribution ID is required")}get allowExperiments(){return!!this.isDebugMode||!this.isFundraiseupVisitor&&!this.isAbTestMode}register(e,t){if(this.experiments.has(e))return;const n=this.createExperiment(e,t);n&&this.experiments.set(e,n)}get(e){if(!this.experiments.has(e)){const t=new Kt(e);throw this.sentry.captureException(t),t}return this.experiments.get(e)}registerAndGet(e,t){return this.register(e,t),this.get(e)}has(e){return this.experiments.has(e)}createExperiment(e,t){const n=Ie[e];if(!n)throw new Error(`ExperimentController: Experiment ID not found for experiment ${e}`);const i=this.experimentsSettings.find((e=>e.experimentId===n));if(!i)return this.sentry.captureException(new Ht(e)),null;const s=this.getDistributionExperimentName(i),a=new bo({distributionId:this.distributionId,name:s,variants:i.variants,sentry:this.sentry});return new t({settings:i,companyKey:this.companyKey,parentCompanyKey:this.parentCompanyKey,tracker:this.tracker,funStorage:this.funStorage,user:this.user,widgetKey:this.widgetKey,infrastructureParams:this.infrastructureParams,sentry:this.sentry,distribution:a,allowExperiments:this.allowExperiments})}getDistributionExperimentName(e){return e.experimentId===Ie[be.AMOUNT_PRESETS_DONATION_FORM_V_4_EXPERIMENT]||e.experimentId===Ie[be.AMOUNT_PRESETS_PAGES_V_4_EXPERIMENT]?be.AMOUNT_PRESETS_CHECKOUT_V_4_EXPERIMENT:e.name}}function To(e){return e.map((e=>Object.assign(Object.assign({},e),{variants:_o(e.variants)})))}function _o(e){return e.map((e=>Object.assign(Object.assign({},e),{key:e.key||e.name})))}const ko={experimentId:Ie[be.CAMPAIGN_PAGE_TEST_EXPERIMENT],name:be.CAMPAIGN_PAGE_TEST_EXPERIMENT,enabled:!1,scope:xe.CAMPAIGN_PAGES,variants:[{name:Le.CONTROL,weight:1},{name:Le.TEST,weight:1}]},Oo={experimentId:Ie[be.ML_POST_DONATION_UPSELL_CAMPAIGN_PAGES_EXPERIMENT],name:be.ML_POST_DONATION_UPSELL_CAMPAIGN_PAGES_EXPERIMENT,enabled:!1,scope:xe.CAMPAIGN_PAGES,variants:[{name:"control",weight:1},{name:"test",weight:1}]},Io={experimentId:Ie[be.CAMPAIGN_PAGES_WITHOUT_PRE_DONATION_UPSELL_EXPERIMENT],name:be.CAMPAIGN_PAGES_WITHOUT_PRE_DONATION_UPSELL_EXPERIMENT,enabled:!1,scope:xe.CAMPAIGN_PAGES,variants:[{name:qe.CONTROL,weight:1},{name:qe.TEST,weight:1}]},xo={experimentId:Ie[be.SMART_COVERING_FEE_CAMPAIGN_PAGES_V_2_EXPERIMENT],name:be.SMART_COVERING_FEE_CAMPAIGN_PAGES_V_2_EXPERIMENT,enabled:!1,scope:xe.CAMPAIGN_PAGES,variants:[{name:Ye.CONTROL,weight:1},{name:Ye.TEST,weight:1}]},wo={experimentId:Ie[be.SMART_POST_DONATION_UPSELL_CAMPAIGN_PAGES_V_2_EXPERIMENT],name:be.SMART_POST_DONATION_UPSELL_CAMPAIGN_PAGES_V_2_EXPERIMENT,enabled:!1,scope:xe.CAMPAIGN_PAGES,variants:[{name:Xe.CONTROL,weight:1},{name:Xe.TEST,weight:1}]},Ro={experimentId:Ie[be.UPSELL_AMOUNTS_DATASET_PAGES_EXPERIMENT],name:be.UPSELL_AMOUNTS_DATASET_PAGES_EXPERIMENT,enabled:!1,scope:xe.CAMPAIGN_PAGES,variants:[{name:Ze.CONTROL,weight:0},{name:Ze.TEST,weight:1}]},Mo={experimentId:Ie[be.COLLECT_DATASET_POST_DONATION_UPSELL_AMOUNT_CAMPAIGN_PAGES_V_3_EXPERIMENT],name:be.COLLECT_DATASET_POST_DONATION_UPSELL_AMOUNT_CAMPAIGN_PAGES_V_3_EXPERIMENT,enabled:!1,scope:xe.CAMPAIGN_PAGES,variants:[{name:it.CONTROL,weight:0},{name:it.TEST,weight:1}]},Lo={experimentId:Ie[be.UPSELL_AMOUNTS_SUGGESTION_PAGES_EXPERIMENT],name:be.UPSELL_AMOUNTS_SUGGESTION_PAGES_EXPERIMENT,enabled:!1,scope:xe.CAMPAIGN_PAGES,variants:[{name:at.CONTROL,weight:1},{name:at.TEST,weight:1}]},Uo={experimentId:Ie[be.SMART_PDU_CAMPAIGN_PAGES_V_3_EXPERIMENT],name:be.SMART_PDU_CAMPAIGN_PAGES_V_3_EXPERIMENT,enabled:!1,scope:xe.CAMPAIGN_PAGES,variants:[{name:lt.CONTROL,weight:1},{name:lt.TEST,weight:1}]},Fo={experimentId:Ie[be.RECURRING_FREQUENCY_HINT_CAMPAIGN_PAGES_EXPERIMENT],name:be.RECURRING_FREQUENCY_HINT_CAMPAIGN_PAGES_EXPERIMENT,enabled:!1,scope:xe.CAMPAIGN_PAGES,variants:[{name:ut.CONTROL,weight:1},{name:ut.TEST,weight:1}]},jo={experimentId:Ie[be.CHECKOUT_STEPS_CAMPAIGN_PAGES_EXPERIMENT],name:be.CHECKOUT_STEPS_CAMPAIGN_PAGES_EXPERIMENT,enabled:!1,scope:xe.CAMPAIGN_PAGES,variants:[{name:mt.CONTROL,weight:1},{name:mt.TEST,weight:1}]},Bo={experimentId:Ie[be.DONOR_RATING_CAMPAIGN_PAGES_EXPERIMENT],name:be.DONOR_RATING_CAMPAIGN_PAGES_EXPERIMENT,enabled:!1,scope:xe.CAMPAIGN_PAGES,variants:[{name:yt.CONTROL,weight:1},{name:yt.TEST_1,weight:1},{name:yt.TEST_2,weight:1}]},Go={experimentId:Ie[be.UPSELL_SCREEN_DATA_COLLECT_CAMPAIGN_PAGES_EXPERIMENT],name:be.UPSELL_SCREEN_DATA_COLLECT_CAMPAIGN_PAGES_EXPERIMENT,enabled:!1,scope:xe.CAMPAIGN_PAGES,variants:[{name:Et.CONTROL,weight:9},{name:Et.TEST,weight:1}]},qo={experimentId:Ie[be.AMOUNT_PRESETS_PAGES_V_4_EXPERIMENT],name:be.AMOUNT_PRESETS_PAGES_V_4_EXPERIMENT,enabled:!1,scope:xe.CAMPAIGN_PAGES,variants:[{name:At.CONTROL,weight:1},{name:At.TEST,weight:1}]},Ho={experimentId:Ie[be.AMOUNTS_ON_UPSELL_V_2_CAMPAIGN_PAGES_EXPERIMENT],name:be.AMOUNTS_ON_UPSELL_V_2_CAMPAIGN_PAGES_EXPERIMENT,enabled:!1,scope:xe.CAMPAIGN_PAGES,variants:[{name:Pt.CONTROL,weight:1},{name:Pt.TEST_1,weight:1},{name:Pt.TEST_2,weight:1},{name:Pt.TEST_3,weight:1}]},Vo={experimentId:Ie[be.AVERAGE_DONATION_HINT_CAMPAIGN_PAGES_EXPERIMENT],name:be.AVERAGE_DONATION_HINT_CAMPAIGN_PAGES_EXPERIMENT,enabled:!1,scope:xe.CAMPAIGN_PAGES,variants:[{name:Dt.CONTROL,weight:1},{name:Dt.TEST,weight:1}]},Ko={experimentId:Ie[be.FAST_TRACK_CAMPAIGN_PAGES_EXPERIMENT],name:be.FAST_TRACK_CAMPAIGN_PAGES_EXPERIMENT,enabled:!1,scope:xe.CAMPAIGN_PAGES,variants:[{name:Tt.CONTROL,weight:1},{name:Tt.TEST_1,weight:1},{name:Tt.TEST_2,weight:1}]},Yo={experimentId:Ie[be.SMART_COVERING_FEE_CAMPAIGN_PAGES_V_4_EXPERIMENT],name:be.SMART_COVERING_FEE_CAMPAIGN_PAGES_V_4_EXPERIMENT,enabled:!1,scope:xe.CAMPAIGN_PAGES,variants:[{name:wt.CONTROL,weight:1},{name:wt.TEST,weight:1}]},zo={experimentId:Ie[be.MULTIPLE_RECURRING_PLAN_CAMPAIGN_PAGES_EXPERIMENT],name:be.MULTIPLE_RECURRING_PLAN_CAMPAIGN_PAGES_EXPERIMENT,enabled:!1,scope:xe.CAMPAIGN_PAGES,variants:[{name:Mt.CONTROL,weight:1},{name:Mt.TEST_1,weight:1},{name:Mt.TEST_2,weight:1}]};const Wo={experimentId:Ie[be.DUMMY_EXPERIMENT],name:be.DUMMY_EXPERIMENT,enabled:!1,scope:xe.EMBED,variants:[{name:we.CONTROL,weight:1},{name:we.TEST,weight:1}]},$o={experimentId:Ie[be.ML_POST_DONATION_UPSELL_CHECKOUT_EXPERIMENT],name:be.ML_POST_DONATION_UPSELL_CHECKOUT_EXPERIMENT,enabled:!1,scope:xe.EMBED,variants:[{name:Be.CONTROL,weight:1},{name:Be.TEST,weight:1}]},Xo={experimentId:Ie[be.CHECKOUT_WITHOUT_PRE_DONATION_UPSELL_EXPERIMENT],name:be.CHECKOUT_WITHOUT_PRE_DONATION_UPSELL_EXPERIMENT,enabled:!1,scope:xe.EMBED,variants:[{name:Ge.CONTROL,weight:1},{name:Ge.TEST,weight:1}]},Qo={experimentId:Ie[be.SMART_COVERING_FEE_CHECKOUT_V_2_EXPERIMENT],name:be.SMART_COVERING_FEE_CHECKOUT_V_2_EXPERIMENT,enabled:!1,scope:xe.EMBED,variants:[{name:Ke.CONTROL,weight:1},{name:Ke.TEST_1,weight:1},{name:Ke.TEST_2,weight:1}]},Zo={experimentId:Ie[be.AA_CHECKOUT_EXPERIMENT],name:be.AA_CHECKOUT_EXPERIMENT,enabled:!1,scope:xe.EMBED,variants:[{name:ze.CONTROL,weight:1},{name:ze.TEST,weight:1}]},Jo={experimentId:Ie[be.SMART_POST_DONATION_UPSELL_CHECKOUT_V_2_EXPERIMENT],name:be.SMART_POST_DONATION_UPSELL_CHECKOUT_V_2_EXPERIMENT,enabled:!1,scope:xe.EMBED,variants:[{name:$e.CONTROL,weight:1},{name:$e.TEST,weight:1}]},er={experimentId:Ie[be.UPSELL_AMOUNTS_DATASET_MODAL_EXPERIMENT],name:be.UPSELL_AMOUNTS_DATASET_MODAL_EXPERIMENT,enabled:!1,scope:xe.EMBED,variants:[{name:Qe.CONTROL,weight:0},{name:Qe.TEST,weight:1}]},tr={experimentId:Ie[be.COLLECT_DATASET_POST_DONATION_UPSELL_AMOUNT_CHECKOUT_V_3_EXPERIMENT],name:be.COLLECT_DATASET_POST_DONATION_UPSELL_AMOUNT_CHECKOUT_V_3_EXPERIMENT,enabled:!1,scope:xe.EMBED,variants:[{name:nt.CONTROL,weight:0},{name:nt.TEST,weight:1}]},nr={experimentId:Ie[be.UPSELL_AMOUNTS_SUGGESTION_MODAL_EXPERIMENT],name:be.UPSELL_AMOUNTS_SUGGESTION_MODAL_EXPERIMENT,enabled:!1,scope:xe.EMBED,variants:[{name:st.CONTROL,weight:1},{name:st.TEST,weight:1}]},ir={experimentId:Ie[be.SMART_PDU_CHECKOUT_V_3_EXPERIMENT],name:be.SMART_PDU_CHECKOUT_V_3_EXPERIMENT,enabled:!1,scope:xe.EMBED,variants:[{name:ct.CONTROL,weight:1},{name:ct.TEST,weight:1}]},sr={experimentId:Ie[be.RECURRING_FREQUENCY_HINT_CHECKOUT_DESKTOP_EXPERIMENT],name:be.RECURRING_FREQUENCY_HINT_CHECKOUT_DESKTOP_EXPERIMENT,enabled:!1,scope:xe.EMBED,variants:[{name:dt.CONTROL,weight:1},{name:dt.TEST_1,weight:1},{name:dt.TEST_2,weight:1}]},ar={experimentId:Ie[be.RECURRING_FREQUENCY_HINT_CHECKOUT_MOBILE_EXPERIMENT],name:be.RECURRING_FREQUENCY_HINT_CHECKOUT_MOBILE_EXPERIMENT,enabled:!1,scope:xe.EMBED,variants:[{name:ht.CONTROL,weight:1},{name:ht.TEST,weight:1}]},or={experimentId:Ie[be.CHECKOUT_STEPS_CHECKOUT_MODAL_EXPERIMENT],name:be.CHECKOUT_STEPS_CHECKOUT_MODAL_EXPERIMENT,enabled:!1,scope:xe.EMBED,variants:[{name:pt.CONTROL,weight:1},{name:pt.TEST,weight:1}]},rr={experimentId:Ie[be.DONOR_RATING_CHECKOUT_EXPERIMENT],name:be.DONOR_RATING_CHECKOUT_EXPERIMENT,enabled:!1,scope:xe.EMBED,variants:[{name:gt.CONTROL,weight:1},{name:gt.TEST_1,weight:1},{name:gt.TEST_2,weight:1}]},cr={experimentId:Ie[be.UPSELL_SCREEN_DATA_COLLECT_CHECKOUT_EXPERIMENT],name:be.UPSELL_SCREEN_DATA_COLLECT_CHECKOUT_EXPERIMENT,enabled:!1,scope:xe.EMBED,variants:[{name:St.CONTROL,weight:9},{name:St.TEST,weight:1}]},lr={experimentId:Ie[be.AMOUNT_PRESETS_CHECKOUT_V_4_EXPERIMENT],name:be.AMOUNT_PRESETS_CHECKOUT_V_4_EXPERIMENT,enabled:!1,scope:xe.EMBED,variants:[{name:vt.CONTROL,weight:1},{name:vt.TEST,weight:1}]},ur={experimentId:Ie[be.AMOUNTS_ON_UPSELL_V_2_CHECKOUT_EXPERIMENT],name:be.AMOUNTS_ON_UPSELL_V_2_CHECKOUT_EXPERIMENT,enabled:!1,scope:xe.EMBED,variants:[{name:Nt.CONTROL,weight:1},{name:Nt.TEST_1,weight:1},{name:Nt.TEST_2,weight:1},{name:Nt.TEST_3,weight:1}]},dr={experimentId:Ie[be.AVERAGE_DONATION_HINT_EXPERIMENT],name:be.AVERAGE_DONATION_HINT_EXPERIMENT,enabled:!1,scope:xe.EMBED,variants:[{name:bt.CONTROL,weight:1},{name:bt.TEST_1,weight:1},{name:bt.TEST_2,weight:1},{name:bt.TEST_3,weight:1}]},hr={experimentId:Ie[be.FAST_TRACK_CHECKOUT_EXPERIMENT],name:be.FAST_TRACK_CHECKOUT_EXPERIMENT,enabled:!1,scope:xe.EMBED,variants:[{name:_t.CONTROL,weight:1},{name:_t.TEST_1,weight:1},{name:_t.TEST_2,weight:1}]},mr={experimentId:Ie[be.SMART_COVERING_FEE_CHECKOUT_V_4_EXPERIMENT],name:be.SMART_COVERING_FEE_CHECKOUT_V_4_EXPERIMENT,enabled:!1,scope:xe.EMBED,variants:[{name:xt.CONTROL,weight:1},{name:xt.TEST,weight:1}]},pr={experimentId:Ie[be.MULTIPLE_RECURRING_PLAN_CHECKOUT_EXPERIMENT],name:be.MULTIPLE_RECURRING_PLAN_CHECKOUT_EXPERIMENT,enabled:!1,scope:xe.EMBED,variants:[{name:Rt.CONTROL,weight:1},{name:Rt.TEST_1,weight:1},{name:Rt.TEST_2,weight:1}]};var gr,yr,fr,Er,Sr=function(e){return To([Wo,$o,Xo,Qo,Zo,Jo,er,nr,tr,ir,sr,ar,or,rr,cr,lr,ur,dr,hr,mr,pr]).map((t=>{const n=e.find((e=>e.experimentId===t.experimentId));return n?{experimentId:n.experimentId,enabledWidgets:n.enabledWidgets,disabledWidgets:n.disabledWidgets,scope:n.scope,name:n.name,enabled:n.enabled,variants:_o(n.variants),disabledAccounts:n.disabledAccounts,enabledAccounts:n.enabledAccounts}:t}))};!function(e){e.SESSION="fundraiseup_session",e.FUNC="fundraiseup_func",e.PERFORMANCE="fundraiseup_stat",e.CONSENT="fundraiseup_consent",e.MARKETING="fundraiseup_mark",e.CID="fundraiseup_cid",e.DEBUG="fundraiseup_debug",e.EXPERIMENTS="fundraiseup_experiments",e.FUN_AB_STORAGE="fundraiseup_ab_test",e.DEV_MODE="developmentMode"}(gr||(gr={}));class vr{constructor(e,t){this.storage=e,this.initAt=t||(new Date).getTime(),this.read()}incrementSession(){this.sessionPage++,this.refresh()}refresh(){this.sessionAt||this.addSession(),this.write()}addSession(){this.sessionAt=this.initAt}write(){this.storage.setField(Qn.SESSION_AT,this.sessionAt.toString(10)),this.storage.setField(Qn.SESSION_PAGE,this.sessionPage)}read(){this.sessionAt=Number(this.storage.getField(Qn.SESSION_AT))||0,this.sessionPage=Number(this.storage.getField(Qn.SESSION_PAGE))||0}}class Ar{constructor(e,t){this.field=e,this.storage=t}get(){return this.storage.get(this.field)}set(e,t){this.storage.set(this.field,e,t)}remove(e){this.storage.remove(this.field,e)}}!function(e){e.DEVELOPMENT="development",e.PRODUCTION="production",e.STAGING="staging",e.TESTING="testing"}(yr||(yr={})),function(e){e.STRING="string",e.OBJECT="object"}(fr||(fr={})),function(e){e.ENABLED="1"}(Er||(Er={}));var Cr,Pr=n(4698);function Nr(){const e=[],t=window.location.hostname.split(".");let n=t.splice(-1).join();for(let i=t.length;i>0;i--)n=t.splice(-1).join()+"."+n,e.push(n);return e}!function(e){e.STRING="string",e.OBJECT="object"}(Cr||(Cr={}));class br extends zn{constructor(e,t,n,i,s,a,o,r,c,l,u){super(),this.embedTracker=e,this.debug=t,this.keysKeeper=n,this.checkoutViewEventEmitter=i,this.targetWindow=s,this.globalWindow=a,this.params=o,this.servicesFactoryMap=r,this.funSessionStorage=l,this.isFontsLoaded=u,this.sentryInstance=c;const d=this.createCoreInstances();this.flowManager=d.flowManager,this.intl=d.intl,this.trackerCheckout=d.trackerCheckout,this.experiments=d.experiments,this.currencyService=d.currencyService,this.checkoutConfiguration=d.checkoutConfiguration,this.checkoutAPIBridge=d.checkoutAPIBridge,this.checkoutRouter=d.checkoutRouter,this.logger=d.logger,this.userInteraction=d.userInteraction,this.currencyFilter=d.currencyFilter,this.checkoutCurrencyFormatter=d.checkoutCurrencyFormatter}setLocale(e){return(0,c.sH)(this,void 0,void 0,(function*(){yield this.intl.setLocale(e||this.intl.locale)}))}initializePublicJsApi(){}initializePageGuardManager(){}initializeIFrameRemover(){}initializeCookieConsent(){}initializeUserSession(){}initializeRouter(){this.checkoutConfiguration.infrastructureParams.showcase||this.checkoutRouter.initialize()}initializeTracker(){this.trackerCheckout.initialize()}initializeExperiments(){this.experiments.register(be.SMART_PDU_CHECKOUT_V_3_EXPERIMENT,rn),this.experiments.register(be.SMART_PDU_CAMPAIGN_PAGES_V_3_EXPERIMENT,on),this.initializeAACheckoutExperiment(),this.initializeUpsellAmountsDatasetModalExperiment(),this.initializeUpsellAmountsSuggestionModalExperiment(),this.initializeRecurringFrequencyHintCheckoutMobileExperiment(),this.initializeRecurringFrequencyHintCheckoutDesktopExperiment(),this.initializeDonorRatingCheckoutExperiment(),this.initializeCheckoutStepsExperiments(),this.initializeUpsellScreenDataCollectCheckoutExperiment(),this.initializeAmountsOnUpsellV2CheckoutExperiment(),this.registerFastTrackExperiments(),this.initializeMultipleRecurringPlanCheckoutExperiment()}initializeAACheckoutExperiment(){this.experiments.register(be.AA_CHECKOUT_EXPERIMENT,Ra),this.experiments.get(be.AA_CHECKOUT_EXPERIMENT).tryStart()}initializeUpsellAmountsDatasetModalExperiment(){this.experiments.register(be.UPSELL_AMOUNTS_DATASET_MODAL_EXPERIMENT,Fa);const e=this.experiments.get(be.UPSELL_AMOUNTS_DATASET_MODAL_EXPERIMENT);e.tryStart({preDonationUpsellIsEnabled:this.checkoutConfiguration.campaign.config.showUpsell}),this.checkoutConfiguration.mergePreDonationUpsellSettings(this.getUpsellAmountsDatasetConfiguration(e))}initializeUpsellAmountsSuggestionModalExperiment(){this.experiments.register(be.UPSELL_AMOUNTS_SUGGESTION_MODAL_EXPERIMENT,ja),this.experiments.get(be.UPSELL_AMOUNTS_SUGGESTION_MODAL_EXPERIMENT).tryStart({isPreDonationUpsellEnabled:this.checkoutConfiguration.campaign.config.showUpsell})}initializeRecurringFrequencyHintCheckoutMobileExperiment(){this.experiments.register(be.RECURRING_FREQUENCY_HINT_CHECKOUT_MOBILE_EXPERIMENT,an),this.experiments.get(be.RECURRING_FREQUENCY_HINT_CHECKOUT_MOBILE_EXPERIMENT).tryStart({enabledFrequencies:this.checkoutConfiguration.enabledFrequencies,locale:this.params.localeCode,isMobile:this.params.isMobile,isFontsLoaded:this.checkoutConfiguration.infrastructureParams.isFontsLoaded})}initializeMultipleRecurringPlanCheckoutExperiment(){this.experiments.register(be.MULTIPLE_RECURRING_PLAN_CHECKOUT_EXPERIMENT,nn),this.experiments.register(be.MULTIPLE_RECURRING_PLAN_CAMPAIGN_PAGES_EXPERIMENT,tn);const e=this.experiments.get(be.MULTIPLE_RECURRING_PLAN_CHECKOUT_EXPERIMENT);e.tryStart({checkoutConfiguration:this.checkoutConfiguration}),e.isTestGroup&&this.checkoutConfiguration.cloneOnceFrequencyToAnnual()}initializeCheckoutStepsExperiments(){this.experiments.register(be.CHECKOUT_STEPS_CHECKOUT_MODAL_EXPERIMENT,Xt),this.experiments.register(be.CHECKOUT_STEPS_CAMPAIGN_PAGES_EXPERIMENT,$t)}initializeUpsellScreenDataCollectCheckoutExperiment(){this.experiments.register(be.UPSELL_SCREEN_DATA_COLLECT_CHECKOUT_EXPERIMENT,ln),this.experiments.get(be.UPSELL_SCREEN_DATA_COLLECT_CHECKOUT_EXPERIMENT).tryStart({isUpsellEnabled:this.checkoutConfiguration.campaign.config.showUpsell}),this.experiments.register(be.UPSELL_SCREEN_DATA_COLLECT_CAMPAIGN_PAGES_EXPERIMENT,cn),this.experiments.get(be.UPSELL_SCREEN_DATA_COLLECT_CAMPAIGN_PAGES_EXPERIMENT).tryStart({isUpsellEnabled:this.checkoutConfiguration.campaign.config.showUpsell})}initializeRecurringFrequencyHintCheckoutDesktopExperiment(){this.experiments.register(be.RECURRING_FREQUENCY_HINT_CHECKOUT_DESKTOP_EXPERIMENT,sn)}initializeAmountsOnUpsellV2CheckoutExperiment(){this.experiments.register(be.AMOUNTS_ON_UPSELL_V_2_CHECKOUT_EXPERIMENT,Wt),this.experiments.get(be.AMOUNTS_ON_UPSELL_V_2_CHECKOUT_EXPERIMENT).tryStart({isUpsellEnabled:this.checkoutConfiguration.campaign.config.showUpsell}),this.experiments.register(be.AMOUNTS_ON_UPSELL_V_2_CAMPAIGN_PAGES_EXPERIMENT,zt),this.experiments.get(be.AMOUNTS_ON_UPSELL_V_2_CAMPAIGN_PAGES_EXPERIMENT).tryStart({isUpsellEnabled:this.checkoutConfiguration.campaign.config.showUpsell})}initializeCurrencyService(){return(0,c.sH)(this,void 0,void 0,(function*(){yield function(e,t,n){return(0,c.sH)(this,void 0,void 0,(function*(){e.loadFiat(n),vs(t)&&(yield e.loadCrypto())}))}(this.currencyService,this.checkoutConfiguration,this.intl)}))}initializeCurrencyFilter(){return(0,c.sH)(this,void 0,void 0,(function*(){yield function(e,t,i){return(0,c.sH)(this,void 0,void 0,(function*(){if(function(){try{Intl.NumberFormat("fr-FR",{style:"currency",currency:"VND",currencyDisplay:"narrowSymbol",minimumFractionDigits:0,maximumFractionDigits:0}).format(8e3)}catch(e){return!1}return!0}())vs(i)&&(yield e.loadCrypto());else{const e=yield function(){return(0,c.sH)(this,void 0,void 0,(function*(){const e=yield n.e(173).then(n.bind(n,7662));return{formatCurrency:e.currencyFilter,formatSymbol:(e,t)=>t===Q.PREFIX?e:"",getCurrencyFormat:e.getCurrencyFormat,loadCrypto:()=>Promise.resolve()}}))}();t.replaceCurrencyFilter(e)}}))}(this.currencyFilter,this.checkoutCurrencyFormatter,this.checkoutConfiguration)}))}subscribeOnUserInteraction(){return this.userInteraction.subscribeOnUserInteraction((()=>{this.trackerCheckout.ping()}))}subscribeOnHistoryInteraction(){this.checkoutRouter.onNavigation((()=>{const e=this.flowManager.getCurrentFlow();e.isCurrentScreenFirst()||e.isCurrentScreenLast()?this.checkoutViewEventEmitter.emit(Oa.SHOULD_HIDE,{}):e.canGoBack&&e.prev()})),this.flowManager.onScreenChanged((()=>{const e=this.flowManager.getCurrentFlow();e.isCurrentScreenFirst()||e.isCurrentScreenLast()?this.checkoutRouter.deactivateNavigationLoop():this.checkoutRouter.activateNavigationLoop()}))}startFlow(e){return(0,c.sH)(this,void 0,void 0,(function*(){yield this.flowManager.setInitialScreen(e).startDefaultFlow()}))}createCoreInstances(){var e,t,n,i,a,o,r,c,l,u,d;const h=this.params.externalParams,p=(null===(t=null===(e=h.launcher)||void 0===e?void 0:e.element)||void 0===t?void 0:t.type)===Ae.DIRECT_LINK,g={livemode:this.params.livemode,env:this.params.env,isMobile:this.params.isMobile,showcase:this.params.showcase,isDevelopmentMode:Se(),OS:this.params.browserData.os.name||"",browser:this.params.browserData.browser.name||"",browserVersion:this.params.browserData.browser.major||"",isInAppBrowser:this.params.browserData.isInAppBrowser,isSSLEnabled:"https:"===window.location.protocol,fromDonorPortal:this.params.fromDonorPortal,isFontsLoaded:this.isFontsLoaded},f=this.params.steplessCheckoutExperimentVariant===tt.CONTROL,E=new ls(this.params.resolvedConfig,h,g,this.params.integrations,{locale:this.params.localeCode},Object.assign(Object.assign({checkoutType:Ce.MODAL,donationSettings:{isAdaptiveDefaultFrequencySuggestionEnabled:!0},paymentOptionsSettings:{isNewIdealPaymentFlowEnabled:!0}},f?{preDonationUpsellSettings:{enabledForDonationFrequencies:[W.ONCE,W.MONTHLY],enabledTargetFrequencies:[W.MONTHLY],isAdaptiveSuggestionEnabled:!1},paymentOptionsSettings:{disabledPaymentMethods:[De._.US_BANK_ACCOUNT]},remindMeLaterSettings:{isEnabled:!1}}:{}),{currencySettings:{ratesId:this.params.currencyRates.id}}),this.params.infrastructureQueryParams),S=new No(this.globalWindow,this.keysKeeper,E,p),v=function(e,t,n){const i=function(e,t){return Object.assign(Object.assign({},e),Object.fromEntries(Object.entries(t).map((e=>{let[n]=e;var i;return[n,Number(null!==(i=t[n])&&void 0!==i?i:1)]}))))}(e,t.cryptoCurrencies),s=new re;return new Ss(s,i,n)}(this.params.currencyRates.rates,E,this.sentryInstance),A=new ye(v),C=new ae(new re),P=new ds(Wa.DEFAULT_LOCALE,C),N=function(e,t,n){const i=new no(e,{defaultLocale:t.campaign.config.localization.defaultLocale,useCompanyInterfaceLocales:t.campaign.config.localization.useCompanyInterfaceLocales,supportedLanguages:[...t.campaign.config.localization.supportedLanguages]},{interfaceLocales:[...t.company.localization.interfaceLocales]}).getUILocale();return function(e){let{dateFormatter:t,currencyFormatter:n,numberFormatter:i,availableLocales:s=[Wa.DEFAULT_LOCALE],translationLoader:a,locale:o=Wa.DEFAULT_LOCALE,phrases:r,company:c="",donateToPayTokens:l=[]}=e;const u=new Za(o,r),d=new $a(u,a);return new Wa(d,t,n,i,c,l,{locale:o,availableLocales:s})}({dateFormatter:new qa(Wa.DEFAULT_LOCALE),currencyFormatter:n,numberFormatter:new to(Wa.DEFAULT_LOCALE),availableLocales:Ya.O,translationLoader:new Va,locale:i,company:t.campaign.company,donateToPayTokens:Ka})}(this.params.localeCode,E,P),b=new pa,D=new Aa(this.targetWindow),T=new ka(this.embedTracker,E,D,{targetWindow:this.targetWindow,url:this.params.trackingUrls.checkout,checkoutOpenTimestamp:this.params.checkoutOpenTimestamp});T.setTrackerCheckoutEventService(new va(E,b,{checkoutOpenTimestamp:T.checkoutOpenTimestamp,checkoutLocale:T.clientLocale,funEmbedRelease:this.params.embedVersion}));const _=me(),k=(O={sentry:this.sentryInstance,requestService:_,createFundraiseupAddressProvider:(e,t)=>new Nn(e,_,t,b),baseURL:s,locale:N.locale},new X(O.createFundraiseupAddressProvider,O.sentry,O.requestService,{locale:O.locale,baseURL:O.baseURL,fundraiseupAddressProviderHeaders:O.fundraiseupAddressProviderHeaders}));var O;const I=new vr(this.funSessionStorage),x=E.company,w=this.params.livemode?m.LIVE:m.TEST,R=Yn({publicKey:this.params.paymentMethods.stripePublicKey[w],targetWindow:this.targetWindow,locale:N.locale,stripeAccount:x.stripeAccount,showcase:this.params.showcase},this.sentryInstance),M=Yn({publicKey:this.params.paymentMethods.stripePublicKey[w],targetWindow:this.globalWindow,locale:N.locale,stripeAccount:x.stripeAccount,showcase:this.params.showcase},this.sentryInstance),L=function(e,t){if(!Object.keys(Cr).find((e=>Cr[e]===t)))throw new Error(`UNSUPPORTED_TYPE_OF_STORAGE ${t}`);return new Ar(e,function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pr.A;function n(e,n){t.remove(e,n)}function i(e){return!!window.FUN_DO_NOT_TRACK||!!window.FUN_ONLY_STRICTLY_NECESSARY_COOKIES&&e!==gr.CID}return window.FUN_DO_NOT_TRACK&&Nr().forEach((e=>{n(gr.CID,{domain:e}),n(gr.SESSION,{domain:e}),n(gr.FUNC,{domain:e}),n(gr.PERFORMANCE,{domain:e})})),window.FUN_ONLY_STRICTLY_NECESSARY_COOKIES&&Nr().forEach((e=>{n(gr.SESSION,{domain:e}),n(gr.FUNC,{domain:e}),n(gr.PERFORMANCE,{domain:e})})),{get:function(n){if(i(n))return null;const s=t.get(n);if(!s)return null;if(e===fr.OBJECT){let e=null;return e=JSON.parse(s),e}return s},set:function(n,s,a){i(n)||(e===fr.OBJECT&&(s=JSON.stringify(s)),t.set(n,s,a))},remove:n}}(t))}(gr.EXPERIMENTS,Cr.OBJECT),U=new Do({companyKey:x.key,parentCompanyKey:x.parentKey,widgetKey:E.campaign.key,tracker:T,experimentsSettings:[...(F=this.params.experimentsConfig.experiments,To([ko,Oo,Io,xo,wo,Ro,Lo,Mo,Uo,Fo,jo,Bo,Go,qo,Ho,Vo,Ko,Yo,zo]).map((e=>{const t=F.find((t=>t.experimentId===e.experimentId));return t?{experimentId:t.experimentId,enabledWidgets:t.enabledWidgets,disabledWidgets:t.disabledWidgets,scope:t.scope,name:t.name,enabled:t.enabled,variants:_o(t.variants),disabledAccounts:t.disabledAccounts,enabledAccounts:t.enabledAccounts}:e}))),...Sr(this.params.experimentsConfig.experiments)],user:E.user,funStorage:L,infrastructureParams:E.infrastructureParams,sentry:this.sentryInstance,isDebugMode:this.params.isDebugMode,isFundraiseupVisitor:this.params.isFundraiseupVisitor,isAbTestMode:this.params.isAbTestMode,distributionId:T.clientId});var F;U.register(be.DUMMY_EXPERIMENT,Ma),U.get(be.DUMMY_EXPERIMENT).start();const j=new y.A,B=new Xn(E),G=new Oe({window:window,tracker:T,enabledByDefault:!0,sentry:this.sentryInstance,checkoutConfiguration:E,sessionTokenService:b}),q=me(),H=function(e){return function(e){const t=e||new ga;return new ya(t)}(new fa(e))}(N),V=new z({company:E.company,parentCompany:E.parentCompanyConfig,isDevelopmentMode:Se()}),K=function(e,t,n){const i=new ha(e,{intlService:t,subscriptionPeriodLabelsService:n}),s=new la(i);return new _s(Ds,s)}(P,N,H),Y=new bs(Ns),$=new On({apiHost:s,isShowcase:this.params.showcase,isLighthouse:!1,sessionTokenService:b}),Q=Sr(this.params.experimentsConfig.experiments).find((e=>e.name===be.AMOUNT_PRESETS_CHECKOUT_V_4_EXPERIMENT)),Z=null===(n=this.embedTracker.page)||void 0===n?void 0:n.toObject(),J=new _n({sentry:this.sentryInstance,apiHost:s,companyKey:E.company.key,campaignKey:E.campaign.key,clientLocale:this.params.localeCode,currencyRates:this.params.currencyRates.rates,utmSource:null!==(o=null===(a=null===(i=E.external)||void 0===i?void 0:i.utm)||void 0===a?void 0:a.source)&&void 0!==o?o:"",currencyService:v,sessionTokenService:b,experimentSettings:Q,experimentsStorage:L,fundraiserKey:null===(r=E.fundraisingPage)||void 0===r?void 0:r.key,fundraiserMemberKey:null!==(u=null===(l=null===(c=E.external.campaign)||void 0===c?void 0:c.fundraiser)||void 0===l?void 0:l.customerKey)&&void 0!==u?u:null===(d=E.fundraisingPage)||void 0===d?void 0:d.admin,clientId:this.embedTracker.clientId,clientConnectionType:null==Z?void 0:Z.clientConnectionType,clientDeviceMemory:null==Z?void 0:Z.clientDeviceMemory,clientHardwareConcurrency:null==Z?void 0:Z.clientHardwareConcurrency,clientConnectionDownlink:null==Z?void 0:Z.clientConnectionDownlink,clientDoNotTrack:null==Z?void 0:Z.clientDoNotTrack,clientDevicePixelRatio:null==Z?void 0:Z.clientDevicePixelRatio,clientBatteryLevel:null==Z?void 0:Z.clientBatteryLevel,checkoutType:Ce.MODAL,elementType:E.element.type});return{flowManager:new ps(j,E,N,T,b,this.debug,v,A,this.targetWindow,this.globalWindow,this.sentryInstance,this.params.paymentMethods,R,M,I,k,B,U,this.servicesFactoryMap,G,q,H,V,K,Y,$,J,{stripe:{elementsOptions:oo,elementStyles:so,elementClasses:ao},screenSet:{ukBacs:ve.UK_BACS,paymentOptions:ve.PAYMENT_OPTIONS,fastTrackPaymentOptions:ve.FAST_TRACK_PAYMENT_OPTIONS},funEmbedRelease:this.params.embedVersion,pendingRequests:this.params.pendingRequests}),intl:N,trackerCheckout:T,experiments:U,currencyService:v,checkoutConfiguration:E,checkoutAPIBridge:B,checkoutRouter:S,logger:G,userInteraction:new fe(this.targetWindow,this.sentryInstance),currencyFilter:C,checkoutCurrencyFormatter:P}}initializeDonorRatingCheckoutExperiment(){var e;this.experiments.register(be.DONOR_RATING_CHECKOUT_EXPERIMENT,Zt);const t=this.experiments.get(be.DONOR_RATING_CHECKOUT_EXPERIMENT),n={enabledFrequencies:this.checkoutConfiguration.enabledFrequencies,donorRating:this.checkoutConfiguration.company.donorRating};t.tryStart(n),this.experiments.register(be.DONOR_RATING_CAMPAIGN_PAGES_EXPERIMENT,Qt),this.experiments.get(be.DONOR_RATING_CAMPAIGN_PAGES_EXPERIMENT).tryStart(Object.assign(Object.assign({},n),{isMatchingEnabled:Boolean(null===(e=this.checkoutConfiguration.campaign.config.campaignPage)||void 0===e?void 0:e.rateMatching.show)}))}getUpsellAmountsDatasetConfiguration(e){const t={};return e.active&&(t.isAdaptiveSuggestionEnabled=!1),e.isEnabled({preDonationUpsellIsEnabled:this.checkoutConfiguration.campaign.config.showUpsell})&&(t.amountsMap=e.upsellAmountsMap),t}registerFastTrackExperiments(){this.experiments.register(be.FAST_TRACK_CHECKOUT_EXPERIMENT,en),this.experiments.register(be.FAST_TRACK_CAMPAIGN_PAGES_EXPERIMENT,Jt)}}var Dr=n(5723),Tr=n(8997),_r=n(7554),kr=n(4906);const Or=(0,Ia.createContext)(null);function Ir(){const e=(0,Ia.useContext)(Or);if(!e)throw new Error("SentryService is not provided");return e}class xr extends Ia.Component{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,t){if(!this.context)throw new Error("SentryService is not provided");this.context.captureException(e,{extra:{componentStack:t.componentStack}})}render(){return this.state.hasError?(0,Dr.jsx)("h1",{children:this.props.fallback||"something went wrong"}):this.props.children}}xr.contextType=Or;var wr,Rr=n(851),Mr=n(2994);!function(e){e.CLICK_SHOWCASE="click-showcase"}(wr||(wr={}));var Lr=n(8469),Ur=n(1268);const Fr=(0,Ia.createContext)(null);var jr=n(177),Br=n(400);function Gr(){const e=(0,Ur.P)(),t=(0,Ia.useCallback)((t=>`${t} ${t}-${e?"mobile":"desktop"}`),[e]);return(0,Ia.useCallback)((e=>e.split(" ").map(t).join(" ")),[t])}const qr=["button","input","select","textarea","iframe","object","embed","a","[tabindex]","[href]","[contenteditable]"].join(", ");var Hr,Vr,Kr,Yr,zr=n(5955);function Wr(e,t){if(!e.current)throw new Error("Ref was not passed");e.current.addEventListener("transitionend",(function n(){e.current&&(e.current.removeEventListener("transitionend",n),t())}),!1)}function $r(e){return(0,Ia.useCallback)((t=>{Wr(e,t)}),[e])}!function(e){e.DONOR_NAME="DonorName",e.DONOR_EMAIL="DonorEmail",e.MAILING_ADDRESS="MailingAddress",e.TRIBUTE="Tribute",e.DESIGNATION="Designation",e.DESIGNATIONS="Designations",e.QUESTIONS="Questions",e.PHONE_NUMBER="PhoneNumber",e.TERMS_AND_CONDITIONS="TermsAndConditions",e.REMIND_ME_LATER="RemindMeLater",e.ON_BEHALF_OF="OnBehalfOf",e.DONATE_ANONYMOUS="DonateAnonymous",e.CUSTOMER_TITLE="CustomerTitle",e.COMMENT="Comment",e.COMMUNICATION_CONSENT="CommunicationConsent",e.PROCESS="Process"}(Hr||(Hr={})),function(e){e.SHARING="Sharing",e.TRIBUTE="Tribute",e.DEFAULT="Default"}(Vr||(Vr={})),function(e){e.PENDING="pending",e.SUCCESS="success",e.ERROR="error",e.IDLE="idle"}(Kr||(Kr={})),function(e){e.FUNDRAISER="fundraiser",e.CAUSE="cause"}(Yr||(Yr={}));var Xr=n(110),Qr=n(9453);const Zr=(0,Ia.lazy)((()=>n.e(429).then(n.bind(n,5429)))),Jr=e=>{let{askPageConfig:t,fundraisingPage:n,showCauseTab:i,tracker:s}=e;var a,o,r;const c=(0,Qr.t)(),l=Gr(),u=(0,kr.M)(),[d,h]=(0,Ia.useState)(!1),m=(0,Ia.useCallback)((()=>{var e,n;h(!0),s&&(null===(e=t.mainVideo)||void 0===e?void 0:e.videoId)&&(null===(n=t.mainVideo)||void 0===n?void 0:n.provider)&&s.trackCheckoutCustomEvent({type:Xr.f.ASK_VIDEO_SHOW_IMAGE_AS_FALLBACK,data:{videoId:t.mainVideo.videoId,videoProvider:t.mainVideo.provider}})}),[h,s,null===(a=t.mainVideo)||void 0===a?void 0:a.videoId,null===(o=t.mainVideo)||void 0===o?void 0:o.provider]),p=(null===(r=null==n?void 0:n.image)||void 0===r?void 0:r.alt)||"",g=t.fundraiserImage?t.fundraiserImage:t.mainImage,y=t.fundraiserImage?p:t.mainImageAltText,f=!g||i,E=f?t.mainImage:g,S=f?t.mainImageAltText:y,v=t.mainMediaProvider===bi.VIDEO&&!d,A=!v&&!!E;return(0,Dr.jsxs)(Dr.Fragment,{children:[v&&t.mainVideo&&(0,Dr.jsx)("div",{className:(0,Rr.A)("p-rel bg-gray-10",l("campaign-video")),"data-qa":"campaign-video",children:(0,Dr.jsx)(Ia.Suspense,{fallback:(0,Dr.jsx)("div",{className:"campaign-video-skeleton p-abs inset-0","aria-label":c.translate("common.loading")}),children:(0,Dr.jsx)(Zr,{className:"p-abs inset-0 w-100 h-100",mainVideo:t.mainVideo,locale:c.locale,tracker:s,width:516,height:289,onInitError:m,targetWindow:u})})}),A&&E&&(0,Dr.jsx)("img",{className:l("campaign-image"),src:E,alt:S||c.translate("campaign.imageAlt"),width:516,height:289,"data-qa":"ask-image","data-testid":"campaign-preview"})]})},ec=(0,Ia.memo)(Jr),tc=e=>{let{tab:t,setActiveTab:n}=e;const i=(0,Qr.t)(),s=Gr();return(0,Dr.jsx)("div",{className:s("campaign-tabs-holder"),role:"tablist",children:(0,Dr.jsxs)("div",{className:"campaign-tabs",children:[(0,Dr.jsx)("button",{type:"button",className:(0,Rr.A)(s("campaign-tab"),{active:t===Yr.FUNDRAISER}),role:"tab","aria-selected":t===Yr.FUNDRAISER,"data-qa":"fundraiser-component-button","data-tracking-element-name":"switchToFundraisingPageTab",onClick:()=>n(Yr.FUNDRAISER),children:(0,Dr.jsx)("span",{className:"text-truncate",children:i.translate("campaign.campaignTabs.fundraiser")})}),(0,Dr.jsx)("button",{type:"button",className:(0,Rr.A)(s("campaign-tab"),{active:t===Yr.CAUSE}),role:"tab","aria-selected":t===Yr.CAUSE,"data-qa":"ask-component-button","data-tracking-element-name":"switchToAskPageTab",onClick:()=>n(Yr.CAUSE),children:(0,Dr.jsx)("span",{className:"text-truncate",children:i.translate("campaign.campaignTabs.cause")})})]})})},nc=(0,Ia.memo)(tc),ic=e=>{let{links:t,className:n}=e;const i=(0,Ur.P)(),s=Gr(),a=(0,Qr.t)();return(0,Dr.jsx)("div",{className:(0,Rr.A)({"campaign-links-wrap":!i},n),children:(0,Dr.jsx)("div",{className:s("campaign-links"),children:t.map(((e,t)=>(0,Dr.jsxs)(Ia.Fragment,{children:[!!t&&!i&&(0,Dr.jsx)("span",{className:(0,Rr.A)("text-gray-60 px-1-5",i?"link-2":"link-3"),"aria-hidden":!0,children:"·"}),(0,Dr.jsx)("a",{href:e.url,className:s("campaign-link"),target:"_blank",rel:"noreferrer","data-tracking-element-name":"askPageLink","data-qa":"ask-link","aria-label":a.translate("common.externalLinkAriaLabel",{label:e.label}),children:e.label})]},t)))})})};var sc=(0,Ia.memo)(ic);const ac=e=>{let{title:t,description:n,links:i,hideTitle:s,showText:a}=e;const o=(0,Ur.P)(),r=Gr(),c=!!i.length;return(0,Dr.jsxs)(Dr.Fragment,{children:[(t||n)&&(0,Dr.jsxs)("div",{className:"min-h-0","data-qa":"ask-component",children:[!s&&t&&(0,Dr.jsx)("h2",{className:r("campaign-title"),"data-qa":"ask-title",dangerouslySetInnerHTML:{__html:t},dir:"auto"}),a&&n&&(0,Dr.jsx)("p",{"data-qa":"ask-message",className:(0,Rr.A)(r("campaign-text"),{"mt-0":!t,"campaign-text-sm":c&&t,"campaign-text-md":c&&!t||!c&&t,"campaign-text-lg":!c&&!t}),dangerouslySetInnerHTML:{__html:n},dir:"auto"})]}),!o&&c&&(0,Dr.jsx)(sc,{links:i})]})};var oc;!function(e){e.COMMENT="comment",e.MAILING_ADDRESS="mailing-address",e.PRIVACY="privacy",e.THANK_YOU="thank-you",e.REMIND_ME="remind-me",e.QUESTIONS="questions",e.MANDATORY_QUESTIONS="mandatory-questions",e.BLOCKED="blocked"}(oc||(oc={}));class rc{static calculateProgressData(e){const t=rc.round(e.currentAmount/e.targetAmount),n=e.increaseAmount?rc.round(e.increaseAmount/e.targetAmount):0,i=e.increaseAmount?rc.applyMinIncreasePercent(n):0,s=e.unlimitedProgress?t:rc.limitMaxPercent(t),a=e.unlimitedProgress?i:Math.min(i,rc.MAX_PROGRESS-s),o=t+n,r=e.currentAmount+(e.increaseAmount||0);return{progressPercent:s,progressIncreasePercent:a,totalProgressPercent:e.unlimitedProgress?o:Math.min(o,rc.MAX_PROGRESS),totalAmount:r,isDone:o>=rc.MAX_PROGRESS}}static round(e){return Math.round(1e3*e)/10}static limitMaxPercent(e){return Math.min(e,rc.MAX_PROGRESS)}static applyMinIncreasePercent(e){return Math.max(e,rc.MIN_INCREASE_PERCENT)}}rc.MAX_PROGRESS=100,rc.MIN_INCREASE_PERCENT=4;var cc=n(1130);const lc=e=>{let{as:t,id:n,className:i,style:s,token:a,params:o,role:r,dataQa:c,dataTestId:l}=e;const u=(0,Qr.t)();Se()&&!/<\/?[a-z][\s\S]*>/i.test(u.translate(a))&&console.warn('Use "intl.translate" for translations without HTML');const d=null!=t?t:"span";return(0,Dr.jsx)(d,{id:n,className:i,style:s,dangerouslySetInnerHTML:{__html:u.safeTranslate(a,o)},role:r,"data-qa":c,"data-testid":l})},uc=(0,Ia.memo)(lc),dc=e=>{let{fundraiser:t,userAmount:n,isActualProgressShown:i}=e;const s=(0,Qr.t)(),a=(0,cc.Q)(),o=(0,Br.C)(),r=t.goalAmount||1,c=rc.calculateProgressData({currentAmount:t.donationsAmount||0,targetAmount:r,increaseAmount:n}),[l,u]=(0,Ia.useState)(c.progressPercent);(0,Ia.useEffect)((()=>{i&&u(c.totalProgressPercent)}),[c.totalProgressPercent,i]);const d=!!n,h=c.progressPercent>=100,m=c.isDone&&(i||h),p=o&&d?c.progressIncreasePercent:null,g=function(e,t,n){return(t?100-t-e:100)*(n?1:-1)}(c.progressPercent,p,a),y={translate:`${g}% 0 0`},f={width:`${l}%`,borderInlineEnd:l>0&&l<100?"1px solid #fff":void 0},E=i?c.totalAmount:t.donationsAmount;return(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsx)(uc,{as:"p",className:"body-2 text-ellipsis",token:"campaign.campaignMeter.raisedAmountOfGoal",params:{amount:s.formatCurrency(E||0,{currency:t.currency||"USD"}),goal:s.formatCurrency(t.goalAmount||0,{currency:t.currency||"USD"})},dataQa:"fundraiser-goal-raised-amount",dataTestId:"raised-amount"}),(0,Dr.jsxs)("div",{className:"campaign-meter mt-2-5","data-qa":"fundraiser-goal-progress-bar",children:[(0,Dr.jsx)("div",{className:(0,Rr.A)("campaign-meter-progress-increase",{"campaign-meter-done":m}),style:y,"data-testid":"progress-increase"}),(0,Dr.jsx)("div",{className:(0,Rr.A)("campaign-meter-progress",{"campaign-meter-hidden":!o,"campaign-meter-done":m}),style:f,"data-testid":"progress","data-qa":"fundraiser-goal-progress-bar-progress"})]})]})},hc=(0,Ia.memo)(dc);var mc=n(5284);const pc={4:4,8:8,12:12,16:14,18:16,20:18,24:20,28:24,32:26,36:28,40:32,48:36,56:40,64:48,80:56},gc=e=>{let{className:t,size:n,sizeMin:i,isBreakpoint:s,notAdaptive:a}=e;const[o,r]=(0,Ia.useState)(n);(0,Ia.useEffect)((()=>{r(s&&!a?pc[n]:n)}),[n,s,a]);const c=Object.assign({width:`${o}px`,height:`${o}px`},i&&{lineHeight:`${i}px`});return(0,Dr.jsx)("div",{className:(0,mc.A)("opacity-0",t),style:c,"aria-hidden":"true","data-testid":"spacer-base",children:" "})},yc=e=>{const{className:t,size:n,sizeMin:i}=e;return(0,Dr.jsx)(gc,{className:t,size:n,sizeMin:i})};var fc=n(5291);const Ec=(0,Ia.createContext)(null);function Sc(){const e=(0,Ia.useContext)(Ec);if(!e)throw new Error("FlowManager is not provided");return e}function vc(e){const t=function(e){const t=Sc(),[n,i]=(0,Ia.useState)((()=>t.getCurrentFlow().getScreen(e))),s=(0,fc.a)();return(0,Ia.useEffect)((()=>{let n=t.getCurrentFlow();const a=t.onScreenChanged((()=>{s.current&&i(n.getScreen(e))})),o=t.onFlowChanged((()=>{const i=t.getCurrentFlow();i.checkHasScreen(e)&&(n=i)}));return()=>{o(),a()}}),[t,e,s]),n}(e);return{controller:t,state:function(e){const[t,n]=(0,Ia.useState)((()=>e.getScreenData()));return(0,Ia.useEffect)((()=>{const t=()=>n(e.getScreenData());return t(),e.onUpdate(t),()=>e.removeUpdateListener(t)}),[e]),t}(t)}}function Ac(){const e=Sc(),[t,n]=(0,Ia.useState)((()=>e.getCurrentFlow().getCurrentScreen().name));return(0,Ia.useEffect)((()=>e.onScreenChanged((()=>{n(e.getCurrentFlow().getCurrentScreen().name)}))),[e]),t}const Cc=e=>{let{fundraiser:t,userAmount:n,links:i,showAskLinks:s}=e;const{withoutGoal:a}=t,o=(0,Ur.P)(),r=Gr(),c=Ac(),[l,u]=(0,Ia.useState)(!1),d=!!i.length&&s;return(0,Ia.useEffect)((()=>{c===oc.THANK_YOU&&u(!0)}),[c]),(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsxs)("div",{className:"min-h-0","data-qa":"fundraiser-component",children:[(0,Dr.jsx)("h2",{className:r("campaign-title"),dir:"auto","data-qa":"fundraiser-display-name",children:t.name}),(0,Dr.jsx)("p",{className:(0,Rr.A)(r("campaign-text"),{"campaign-text-xs":d&&!a,"campaign-text-sm":d&&a||!d&&!a,"campaign-text-md":!d&&a}),dir:"auto","data-qa":"fundraiser-message",children:t.message})]}),(!a||!o&&d)&&(0,Dr.jsx)(yc,{size:16,className:"mt-auto"}),!a&&(0,Dr.jsx)(hc,{isActualProgressShown:l,fundraiser:t,userAmount:n}),!o&&d&&(0,Dr.jsx)(sc,{links:i,className:(0,Rr.A)({"mt-4":!a})})]})},Pc=(0,Ia.createContext)(!1),Nc=(0,Ia.createContext)(null);function bc(){const e=(0,Ia.useContext)(Nc);if(!e)throw new Error("currency service is not provided");return e}const Dc=(0,Ia.createContext)(null);function Tc(){const e=(0,Ia.useContext)(Dc);if(!e)throw new Error("Tracker is not provided");return e}function _c(){const e=Sc(),[t,n]=(0,Ia.useState)(e.checkoutService);return(0,Ia.useEffect)((()=>e.onFlowChanged((()=>{n(e.checkoutService)}))),[e]),t}function kc(){const e=Sc(),[t,n]=(0,Ia.useState)(e.checkoutState),[,i]=(0,Ia.useState)({});return(0,Ia.useEffect)((()=>e.onFlowChanged((()=>n(e.checkoutState)))),[e]),(0,Ia.useEffect)((()=>t.onStateUpdate((()=>i({})))),[t]),t}const Oc=(0,Ia.createContext)(null);function Ic(){const e=(0,Ia.useContext)(Oc);if(!e)throw new Error("Experiments is not provided");return e}const xc=()=>{const e=Ic(),t=Sc(),n=(0,zr.$)(),i=Ac(),s=(0,_r.n)().getAskPageConfig().show,a=i===ve.DONATE,o=i===oc.REMIND_ME,r=i===oc.THANK_YOU,c=i===oc.COMMENT,l=e.get(be.CHECKOUT_STEPS_CHECKOUT_MODAL_EXPERIMENT),u=!n&&s&&t.flowType===Ft.MONEY&&!a&&!r&&!o&&!c&&l.isTestGroup();return{isTestGroup:l.isTestGroup(),showProgressBar:u,isThankYouScreen:r}};function wc(){const e=_c(),[t,n]=(0,Ia.useState)((()=>e.checkoutUIState));return(0,Ia.useEffect)((()=>(n((t=>{const n=e.checkoutUIState;return e.checkoutUIState.askPageActiveTab=t.askPageActiveTab,n})),e.onStateUpdate((()=>{n(e.checkoutUIState)})))),[e]),t}const Rc=e=>window.matchMedia(`(min-width: ${e}px)`),Mc={sm:536,lg:1128};function Lc(e){return function(e){const t=(0,Ia.useRef)(Rc(e)),[n,i]=(0,Ia.useState)(Rc(e).matches);return(0,Ia.useEffect)((()=>{const e=t.current,n=e=>{i(e.matches)};return e.addListener(n),()=>e.removeListener(n)}),[]),n}(Mc[e])}const Uc=window.devicePixelRatio>1,Fc=()=>{const e=Gr(),t=bc(),n=_c(),i=wc(),s=Ac(),a=kc(),o=(0,_r.n)(),r=Tc(),c=a.donation.dataPoint,l=(0,Ia.useCallback)((e=>{i.askPageActiveTab=e,n.syncUpdateCheckoutState()}),[n,i]),u=(0,Ia.useMemo)((()=>o.getAskPageConfig(Uc)),[o]),d=(0,Ur.P)(),h=Lc("lg"),{isTestGroup:m}=xc(),p=o.fundraisingPage,g=!!d&&i.isMobileScreenWithoutAskTitle(s)&&!m,y=!d||i.isMobileScreenWithAskText(s),f=y||!g,E=!g&&u.title||y&&u.text,S=!p||i.askPageActiveTab===Yr.CAUSE,v=p&&i.askPageActiveTab===Yr.FUNDRAISER;(0,Ia.useEffect)((()=>{p&&u.show&&l(Yr.FUNDRAISER)}),[u.show,p,l]);const A=(0,Ia.useMemo)((()=>p&&p.currency?t.convert(c.amount||0,c.currency,p.currency):0),[c.amount,c.currency,t,p]),C=(0,Ia.useRef)(null),P=(0,Ia.useRef)(null);!function(e,t){const n=(0,kr.M)(),i=(0,Ur.P)(),s=(0,Ia.useContext)(Pc),a=(0,Ia.useCallback)((()=>{if(!i||s)return;const t=e.current;if(!t)throw new Error("scrollRef was not passed");const a=window.pageYOffset||n.pageYOffset;t.offsetTop>a||t.scrollIntoView(!0)}),[e,n,i,s]);(0,Ia.useEffect)(a,[t,a])}(f?C:P,s);const[N,b]=(0,Ia.useState)(!0),[D,T]=(0,Ia.useState)(!1),_=(0,Ia.useRef)(null);(0,Ia.useEffect)((()=>{b(i.isScreenWithoutAskOverlay(s))}),[s,b,i]);const k=$r(_);return(0,Dr.jsxs)("div",{className:(0,Rr.A)(e("campaign"),{"p-rel":!N&&!d}),onMouseEnter:()=>T(!0),onMouseLeave:()=>T(!1),ref:P,"data-qa":"campaign-info-section",children:[f&&(0,Dr.jsxs)("div",{className:e("campaign-image-holder"),children:[(0,Dr.jsx)(ec,{askPageConfig:u,fundraisingPage:p,showCauseTab:S,tracker:r}),u.showTabs&&(0,Dr.jsx)(nc,{tab:i.askPageActiveTab,setActiveTab:l})]}),(0,Dr.jsx)("div",{className:e("campaign-header"),"data-qa":"ask-company-name",children:u.logoImage?(0,Dr.jsx)("img",{src:u.logoImage,alt:u.logoAltText||u.companyName,className:e("campaign-header-logo"),"data-testid":"campaign-logo"}):(0,Dr.jsx)("p",{className:e("campaign-header-name"),dir:"auto",title:u.companyName,"data-testid":"campaign-name",children:u.companyName})}),f&&(0,Dr.jsxs)("div",{ref:C,className:(0,Rr.A)(e("campaign-body"),{"px-5 py-6":d&&(E||i.askPageActiveTab===Yr.FUNDRAISER)}),role:p?"tabpanel":"",children:[S&&(0,Dr.jsx)(ac,{title:u.title,description:u.text,links:u.links,hideTitle:g,showText:y}),v&&(0,Dr.jsx)(Cc,{fundraiser:p,userAmount:A,links:u.links,showAskLinks:!u.showTabs})]}),(0,Dr.jsx)(Mr.A,{classNames:"rtg-fade",nodeRef:_,in:!N&&!D&&!d&&h,addEndListener:k,mountOnEnter:!0,unmountOnExit:!0,children:(0,Dr.jsx)("div",{ref:_,className:"campaign-faded-overlay"})})]})},jc=[D.tg.UNITED_STATES,D.tg.CANADA,D.tg.MEXICO,D.tg.AUSTRALIA];var Bc;function Gc(){return Gc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Gc.apply(null,arguments)}var qc=function(e,t){return Ia.createElement("svg",Gc({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.4,strokeLinecap:"round",strokeLinejoin:"round",ref:t},e),Bc||(Bc=Ia.createElement("polyline",{points:"9 18 15 12 9 6"})))},Hc=(0,Ia.forwardRef)(qc),Vc=(0,Ia.memo)(Hc),Kc=n(6706);const Yc=e=>{let{title:t,children:n,className:i,dataQa:s}=e;const a=(0,Ur.P)(),o=(0,cc.Q)(),r=Gr(),[c,l]=(0,Ia.useState)(!1),u=(0,Ia.useRef)(null),d=(0,Ia.useRef)(null),h=(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsx)("p",{className:"subtitle-5",children:t}),(0,Dr.jsx)("div",{className:"body-3 mt-1",children:n})]});return(0,Dr.jsxs)("li",{className:(0,Rr.A)(r("faq-link-item"),i),"data-qa":s,children:[(0,Dr.jsx)(Kc.S,{content:!a&&h,trigger:"click",className:a?"ui-tooltip-mobile":"ui-tooltip-desktop",placement:"top",maxWidth:"300px",hasPortal:!1,"data-qa":`${s}-popover`,children:(0,Dr.jsxs)("button",{ref:d,type:"button",className:(0,Rr.A)("btn-reset",r("faq-link"),{"font-weight-600":c&&a}),"data-qa":`${s}-button`,"data-tracking-element-name":`faq-${s}`,onClick:()=>l(!c),children:[a&&(0,Dr.jsx)("span",{className:"icon-slot icon-slot-14 me-0-5 shrink-0","aria-hidden":!0,children:(0,Dr.jsx)("span",{className:"p-abs inset-centered font-size-14",children:(0,Dr.jsx)(Vc,{className:(0,Rr.A)("icon d-block faq-link-icon",{"icon-rotate-90":!o&&c,"icon-rotate-180":o&&!c,"icon-rotate-270":o&&c})})})}),(0,Dr.jsx)("span",{className:"faq-link-title",children:t})]})}),a&&(0,Dr.jsx)(Mr.A,{nodeRef:u,in:c,timeout:200,classNames:"rtg-fade",mountOnEnter:!0,unmountOnExit:!0,children:(0,Dr.jsx)("div",{ref:u,className:"body-3 py-2 ps-4 shrink-0","data-qa":`${s}-popover`,children:n})})]})},zc=(0,Ia.memo)(Yc),Wc=e=>{const t=(0,Qr.t)(),n=(0,Ur.P)(),i=Gr(),s=_c(),a=(0,_r.n)(),o=a.campaign.config.frequencies,r=a.company,c=Lc("lg"),l=(0,Ia.useMemo)((()=>s.type===Ft.MONEY),[s]),u=(0,Ia.useMemo)((()=>s.type===Ft.CRYPTO),[s.type]),d=(h=r.country,m=r.nonProfit,jc.includes(h)&&m);var h,m;const p=l&&!ci.isOnetimeOnly(o)&&r.donorPortal.canCancelSubscription;return(0,Dr.jsxs)("ul",{className:i("faq-links"),children:[(0,Dr.jsxs)(zc,{title:t.translate("faq.isDonationSecure.title"),dataQa:"is-donation-secure",children:[(0,Dr.jsxs)("p",{className:"faq-link-text",children:[l&&t.translate("faq.isDonationSecure.message.fiat.part-1"),u&&t.translate("faq.isDonationSecure.message.crypto.part-1")]}),(0,Dr.jsxs)("p",{className:"faq-link-text mt-1",children:[l&&t.translate("faq.isDonationSecure.message.fiat.part-2"),u&&t.translate("faq.isDonationSecure.message.crypto.part-2")]}),l&&(0,Dr.jsx)("p",{className:"faq-link-text mt-1",children:t.translate("faq.isDonationSecure.message.fiat.part-3")})]}),d&&(0,Dr.jsxs)(Dr.Fragment,{children:[e.showAskPage&&!n&&c&&(0,Dr.jsx)("li",{className:"body-4 text-white opacity-80 mx-3","aria-hidden":!0,children:"·"}),(0,Dr.jsxs)(zc,{title:t.translate("faq.isTaxDeductible.title"),dataQa:"is-tax-deductible",children:[(0,Dr.jsxs)("p",{className:"faq-link-text",children:[l&&t.translate("faq.isTaxDeductible.message.fiat.part-1"),u&&t.translate("faq.isTaxDeductible.message.crypto.part-1")]}),(0,Dr.jsxs)("p",{className:"faq-link-text mt-1",children:[l&&t.translate("faq.isTaxDeductible.message.fiat.part-2"),u&&t.translate("faq.isTaxDeductible.message.crypto.part-2")]}),u&&(0,Dr.jsx)("p",{className:"faq-link-text mt-1",children:t.translate("faq.isTaxDeductible.message.crypto.part-3")})]})]}),p&&(0,Dr.jsxs)(Dr.Fragment,{children:[e.showAskPage&&!n&&c&&(0,Dr.jsx)("li",{className:"body-4 text-white opacity-80 mx-3","aria-hidden":!0,children:"·"}),(0,Dr.jsx)(zc,{title:t.translate("faq.cancelRecurringDonation.title"),dataQa:"cancel-recurring-donation",children:(0,Dr.jsx)("p",{className:"faq-link-text",children:t.translate("faq.cancelRecurringDonation.message")})})]})]})},$c=(0,Ia.memo)(Wc);var Xc,Qc;!function(e){e[e.BACKWARD=1]="BACKWARD",e[e.FORWARD=2]="FORWARD"}(Xc||(Xc={})),function(e){e.TOP="top",e.LEFT="left",e.FOREGROUND="foreground"}(Qc||(Qc={}));var Zc=n(7992);const Jc=e=>{var{className:t,progressBarPercent:n,isSuccess:i}=e,s=(0,c.Tt)(e,["className","progressBarPercent","isSuccess"]);const a={width:`${i?100:n}%`};return(0,Dr.jsx)("div",Object.assign({className:(0,Rr.A)("progress-bar",t,{"progress-bar-success":i})},s,{"data-qa":"progress-bar",children:(0,Dr.jsx)("span",{className:"progress-bar-fill",style:a,"data-qa":"progress-bar-line"})}))},el=(0,Ia.memo)(Jc);var tl;function nl(){return nl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},nl.apply(null,arguments)}var il=function(e,t){return Ia.createElement("svg",nl({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),tl||(tl=Ia.createElement("path",{d:"M12 20C28.659 10.9628 18.2615 0.617428 12 6.95101C5.73851 0.617357 -4.659 10.9627 12 20Z",fill:"currentColor"})))},sl=(0,Ia.forwardRef)(il),al=(0,Ia.memo)(sl);const ol=["bottom"],rl=e=>{let{name:t,className:n}=e;const i=(0,Qr.t)(),s=(0,cc.Q)(),a=(0,Ur.P)(),o=(0,jr.wf)(),r=Gr(),c=(0,_r.n)(),l=c.campaign.config.tribute.showAddress||c.campaign.config.tribute.showEmail;return(0,Dr.jsx)(Kc.S,{content:l&&i.translate("tributeBadge.tooltipLabel"),trigger:a?"click":"hover",className:a?"ui-tooltip-mobile":"ui-tooltip-desktop",placement:s?"left-start":"right-start",fallbackPlacements:ol,maxWidth:"300px",rootContainer:o,children:(0,Dr.jsxs)("p",{className:(0,Rr.A)(r("tribute-badge"),n),"data-qa":"tribute-badge","data-tracking-element-name":"tributeBadge",children:[(0,Dr.jsxs)("span",{className:"body-2 d-flex",children:[(0,Dr.jsx)("span",{className:"icon-slot icon-slot-18 shrink-0 me-1","aria-hidden":!0,children:(0,Dr.jsx)("span",{className:"p-abs inset-centered font-size-18 text-red-60",children:(0,Dr.jsx)(al,{className:"icon-fill d-block"})})}),(0,Dr.jsx)("span",{className:"text-truncate me-1",children:i.translate("tributeBadge.label")})]}),(0,Dr.jsx)("span",{className:(0,Rr.A)("label-2",a?"text-ellipsis":"text-truncate"),dir:"auto",children:t})]})})};var cl=(0,Ia.memo)(rl);const ll=[oc.THANK_YOU];class ul{constructor(){this.progress=0}calculateProgress(e){const t=e[e.length-1];if(!t)return void(this.progress=0);if(ll.includes(t))return void(this.progress=100);const n=this.calculateProgressFromStepsCount(e);this.progress=Math.round(n>95?95:n)}getProgress(){return this.progress}calculateProgressFromStepsCount(e){let t=0,n=24;const i=e.length;for(let s=0;s<i;s++){const i=e[s];i!==ve.DONATE&&(i===oc.PRIVACY&&t<40?(t=40,n*=.76):i===ve.PAYMENT_OPTIONS&&t<80?(t=80,n=6):(t+=n,n*=.76))}return t}}function dl(e,t,n){return!n.isShowcase&&!e.isScreenWithoutTributeBadge(n.currentScreen)&&t.isEnabled&&t.isActive&&!!t.tributeeName}function hl(e){const t=(0,_r.n)(),n=kc(),i=wc(),s=n.tribute.dataPoint;return{shouldShowTributeBadge:dl(i,s,{isShowcase:t.infrastructureParams.showcase,currentScreen:e}),tributeeName:s.tributeeName}}const ml=e=>{let{children:t,className:n}=e;const i=(0,Ur.P)(),s=Gr(),a=(()=>{const e=Sc(),[t]=(0,Ia.useState)(new ul),[n,i]=(0,Ia.useState)(0),[s,a]=(0,Ia.useState)((()=>e.getCurrentFlow())),o=Ac();return(0,Ia.useEffect)((()=>{e.onFlowChanged((()=>{a(e.getCurrentFlow())}))}),[e]),(0,Ia.useEffect)((()=>{const e=s.getHistoricalScreens();t.calculateProgress(e),i(t.getProgress())}),[s,o,t]),n})(),{showProgressBar:o}=xc(),r=function(){const e=_c(),[t,n]=(0,Ia.useState)(!1);return(0,Ia.useEffect)((()=>e.onStateUpdate((()=>{n(e.checkoutUIState.showCheckoutStepsSuccess)}))),[e]),t}(),c=Ac(),{shouldShowTributeBadge:l,tributeeName:u}=hl(c);return(0,Dr.jsxs)("div",{className:(0,Rr.A)(s("flow"),n),children:[o&&(0,Dr.jsxs)("div",{className:(0,Rr.A)({"p-rel mt-15":!i}),children:[l&&!i&&(0,Dr.jsx)(cl,{name:u,className:"invisible"}),(0,Dr.jsx)(el,{className:(0,Rr.A)("p-abs z-index-3",i?"inset-top-start mt-minus-0-5":"inset-bottom-start mb-minus-0-5"),progressBarPercent:a,isSuccess:r})]}),t]})},pl=(0,Ia.forwardRef)((function(e,t){const{children:n,hide:i,className:s}=e,a=Gr();return(0,Dr.jsx)("div",{className:(0,Rr.A)(a("flow-slide"),s,{"flow-slide-hidden":i}),ref:t,children:n})})),gl=e=>{const{alwaysMount:t,show:n,Screen:i,screenDirection:s,animationDisabled:a,onScreenEntered:o}=e,r=(0,Ia.useRef)(null),[c,l]=(0,Ia.useState)(!n),u=!n&&c,d=(0,Ia.useCallback)((()=>{l(!1)}),[]),h=(0,Ia.useCallback)((()=>{o()}),[o]),m=(0,Ia.useCallback)((()=>{l(!0)}),[]),p=$r(r);return(0,Dr.jsx)(Mr.A,{in:n,classNames:`rtg-${s}`,addEndListener:p,onEnter:d,onEntered:h,onExited:m,nodeRef:r,mountOnEnter:!t,unmountOnExit:!t,children:e=>(0,Dr.jsx)(pl,{ref:r,hide:u,className:a?"no-animation":"",children:(0,Dr.jsx)(Ia.Suspense,{fallback:(0,Dr.jsx)("span",{}),children:(0,Dr.jsx)(i,{transitionEntered:"entered"===e})})})})};var yl,fl;!function(e){e.CRYPTO_CURRENCY="crypto-currency",e.CRYPTO_WALLET="crypto-wallet"}(yl||(yl={})),function(e){e.DONATION="CryptoDonation",e.CRYPTO_WALLET="CryptoWallet"}(fl||(fl={}));var El=n(7485);const Sl=e=>{var t,n;const i=(0,El.Y)();return(0,Dr.jsxs)("svg",{className:(0,Rr.A)(e.className),"aria-hidden":!!e.ariaHidden||void 0,fill:"none",viewBox:"0 0 56 56",height:null!==(t=e.height)&&void 0!==t?t:56,width:null!==(n=e.width)&&void 0!==n?n:56,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink","data-qa":"attention-icon",children:[(0,Dr.jsxs)("filter",{id:`a-${i}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"52",width:"43",x:"7",y:"2.5",children:[(0,Dr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Dr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Dr.jsx)("feOffset",{dx:".5",dy:".5"}),(0,Dr.jsx)("feGaussianBlur",{stdDeviation:"2"}),(0,Dr.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,Dr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.958333 0 0 0 0 0.345 0 0 0 0 0 0 0 0 1 0"}),(0,Dr.jsx)("feBlend",{in2:"BackgroundImageFix",mode:"normal",result:"effect1_dropShadow_8986_17752"}),(0,Dr.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_8986_17752",mode:"normal",result:"shape"})]}),(0,Dr.jsxs)("filter",{id:`b-${i}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"32",width:"14.7373",x:"21.1348",y:"11.5",children:[(0,Dr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Dr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Dr.jsx)("feOffset",{dx:".5",dy:".5"}),(0,Dr.jsx)("feGaussianBlur",{stdDeviation:"2"}),(0,Dr.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,Dr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.958333 0 0 0 0 0.345 0 0 0 0 0 0 0 0 1 0"}),(0,Dr.jsx)("feBlend",{in2:"BackgroundImageFix",mode:"normal",result:"effect1_dropShadow_8986_17752"}),(0,Dr.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_8986_17752",mode:"normal",result:"shape"})]}),(0,Dr.jsxs)("linearGradient",{id:`c-${i}`,gradientUnits:"userSpaceOnUse",x1:"16.9167",x2:"54.2937",y1:"13.1351",y2:"54.7877",children:[(0,Dr.jsx)("stop",{offset:"0",stopColor:"#ffdc62"}),(0,Dr.jsx)("stop",{offset:"1",stopColor:"#ffdc62",stopOpacity:".15"})]}),(0,Dr.jsxs)("linearGradient",{id:`d-${i}`,gradientUnits:"userSpaceOnUse",x1:"23.3333",x2:"36.1947",y1:"26.1546",y2:"31.9633",children:[(0,Dr.jsx)("stop",{offset:"0",stopColor:"#ffeeb1"}),(0,Dr.jsx)("stop",{offset:"1",stopColor:"#ffeeb1",stopOpacity:"0"})]}),(0,Dr.jsx)("clipPath",{id:`e-${i}`,children:(0,Dr.jsx)("path",{d:"m0 0h56v56h-56z"})}),(0,Dr.jsxs)("g",{clipPath:`url(#e-${i})`,children:[(0,Dr.jsx)("path",{d:"m29.3957.519694c-.9003-.335221-1.8911-.335221-2.7915 0l-20.80207 7.745476c-.78289.2915-1.30213 1.03889-1.30213 1.87433v17.8605c0 17.5 18.4643 28 23.5 28s23.5-10.5 23.5-28v-17.8605c0-.83544-.5192-1.58283-1.3021-1.87433z",fill:"#ffa800"}),(0,Dr.jsxs)("g",{filter:`url(#a-${i})`,children:[(0,Dr.jsx)("path",{clipRule:"evenodd",d:"m10.5 12.6455v15.205c0 6.6656 3.4432 12.2152 7.7738 16.2673 2.1476 2.0096 4.4134 3.549 6.3471 4.566.9661.5081 1.8026.8611 2.4565 1.0783.5577.1851.8514.2276.9186.2373l.004.0006.004-.0006c.0672-.0097.3609-.0522.9186-.2373.6539-.2172 1.4904-.5702 2.4565-1.0783 1.9337-1.017 4.1995-2.5564 6.3471-4.566 4.3306-4.0521 7.7738-9.6017 7.7738-16.2673v-15.205l-17.5-6.6455z",fill:"#ffa800",fillRule:"evenodd"}),(0,Dr.jsx)("path",{d:"m28.7178 49.1452c-.3645.121-.5992.1738-.7178.1961-.1187-.0223-.3533-.0751-.7178-.1961-.6142-.204-1.4178-.5419-2.3587-1.0367-1.8834-.9905-4.1014-2.4964-6.2056-4.4653-4.2479-3.9747-7.5679-9.3643-7.5679-15.7927v-14.7565l16.85-6.39871 16.85 6.39871v14.7565c0 6.4284-3.32 11.818-7.5679 15.7927-2.1042 1.9689-4.3222 3.4748-6.2056 4.4653-.9409.4948-1.7445.8327-2.3587 1.0367z",stroke:`url(#c-${i})`,strokeWidth:"1.3"})]}),(0,Dr.jsxs)("g",{filter:`url(#b-${i})`,children:[(0,Dr.jsx)("path",{d:"m30.3683 15c.6011 0 1.0662.5266.9968 1.1237-.548 4.7133-.8884 9.4483-1.5544 14.1405h-3.5607c-.6658-4.6909-1.0302-9.4239-1.6072-14.1342-.0734-.5992.3925-1.13.9962-1.13zm-4.7016 21.5342c0-.3397.0599-.663.1796-.9698.1307-.3069.3049-.5699.5227-.7891.2287-.2191.4954-.3945.8003-.526s.6316-.1972.98-.1972c.3376 0 .6588.0657.9637.1972s.5662.3069.784.526c.2287.2192.4083.4822.539.7891.1307.3068.196.6301.196.9698 0 .3507-.0653.6795-.196.9863-.1307.2959-.3103.5535-.539.7726-.2178.2192-.4791.3891-.784.5096-.3049.1315-.6261.1973-.9637.1973-.3484 0-.6751-.0658-.98-.1973-.3049-.1205-.5716-.2904-.8003-.5096-.2178-.2191-.392-.4767-.5227-.7726-.1197-.3068-.1796-.6356-.1796-.9863z",fill:"#ffe792"}),(0,Dr.jsx)("path",{d:"m29.631 35.0397h-.0001l.0066.0064c.1902.1822.3416.4025.4535.6652.1105.2595.166.5327.166.8229 0 .302-.0558.5798-.1651.8371-.1112.2511-.2624.4671-.4544.6511l-.0001-.0001-.0064.0065c-.1792.1803-.3961.3225-.6559.4252v-.0002l-.0106.0046c-.2572.1109-.5278.1666-.8152.1666-.2999 0-.5758-.0563-.8314-.1666v-.0002l-.0107-.0042c-.2598-.1027-.4838-.2456-.6754-.4284-.1806-.1826-.3272-.3979-.4391-.649-.0998-.2585-.151-.5383-.151-.8424 0-.2925.051-.5677.1519-.8282.1126-.2626.2592-.4821.4382-.6631.1941-.1853.4218-.3353.6861-.4492.2556-.1103.5315-.1666.8314-.1666.2874 0 .558.0556.8152.1666.2643.1139.4849.2632.6665.446zm.7373-19.6647c.3749 0 .6681.3291.6243.7054-.2146 1.8462-.3967 3.6864-.5783 5.5223-.2741 2.7698-.5471 5.5299-.9297 8.2865h-2.9086c-.3677-2.6452-.6417-5.2899-.9166-7.9435-.2019-1.9478-.4042-3.9003-.6444-5.8613-.0462-.3776.2475-.7094.624-.7094z",stroke:`url(#d-${i})`,strokeWidth:".75"})]})]})]})},vl=(0,Ia.memo)(Sl),Al=(0,Ia.forwardRef)((function(e,t){return(0,Dr.jsx)("div",{ref:t,className:(0,Rr.A)("body",e.className),children:e.children})}));var Cl,Pl;function Nl(){return Nl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Nl.apply(null,arguments)}var bl,Dl=function(e,t){return Ia.createElement("svg",Nl({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.4,strokeLinecap:"round",strokeLinejoin:"round",ref:t},e),Cl||(Cl=Ia.createElement("line",{x1:19,y1:12,x2:5,y2:12})),Pl||(Pl=Ia.createElement("polyline",{points:"12 19 5 12 12 5"})))},Tl=(0,Ia.forwardRef)(Dl),_l=(0,Ia.memo)(Tl);function kl(){return kl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},kl.apply(null,arguments)}var Ol=function(e,t){return Ia.createElement("svg",kl({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.4,strokeLinecap:"round",strokeLinejoin:"round",ref:t},e),bl||(bl=Ia.createElement("polyline",{points:"15 18 9 12 15 6"})))},Il=(0,Ia.forwardRef)(Ol),xl=(0,Ia.memo)(Il),wl=n(7730);const Rl=e=>{let{type:t,className:n,disabled:i,isBackFlowDisabled:s,onClick:a}=e;const o=(0,Qr.t)(),r=(0,cc.Q)(),c=(0,Ur.P)(),l=(0,jr.wf)(),[u,d]=(0,Ia.useState)(!1),h=(0,wl.D)((e=>d(e))),m=(0,Ia.useCallback)((()=>{if(s)return h.set([!0]),void h.set([!1],2e3);a()}),[s,h,a]);return(0,Dr.jsx)(Kc.S,{content:o.translate("common.backFlowDisabled"),trigger:"manual",manualOpen:u,className:c?"ui-tooltip-mobile":"ui-tooltip-desktop",placement:c?"bottom":"top",rootContainer:l,"data-qa":"back-checkout-tooltip",children:"header"===t?(0,Dr.jsx)("button",{type:"button",className:(0,Rr.A)("back-btn btn-icon d-flex items-center justify-center font-size-24 border-radius-4",n,{"visually-disabled":s}),"aria-label":o.translate("common.backButton"),disabled:i,"data-qa":"back-checkout","data-testid":"back.checkout.header","data-tracking-element-name":"backButton",onClick:m,children:(0,Dr.jsx)(xl,{className:(0,Rr.A)("icon-stroke icon-stroke-2 d-block",{"icon-flip-horizontal":r}),"aria-hidden":!0,"data-testid":"back-icon"})}):(0,Dr.jsxs)("button",{type:"button",className:(0,Rr.A)("btn-link link-1 d-flex items-center justify-center",n),disabled:i,"data-qa":"back-checkout","data-testid":"back.checkout","data-tracking-element-name":"backButton",onClick:m,children:[(0,Dr.jsx)("span",{className:"icon-slot icon-slot-14 shrink-0 me-1","aria-hidden":!0,children:(0,Dr.jsx)("span",{className:"p-abs inset-centered font-size-14",children:(0,Dr.jsx)(_l,{className:(0,Rr.A)("icon-stroke d-block",{"icon-flip-horizontal":r}),"data-testid":"back-icon"})})}),(0,Dr.jsx)("span",{className:"text-truncate",children:o.translate("common.backButton")}),(0,Dr.jsx)("span",{className:"icon-slot icon-slot-14 shrink-0 ms-1"})]})})},Ml=(0,Ia.memo)(Rl),Ll=e=>{const t=(0,Ur.P)(),n=Gr(),i=Sc(),[s,a]=(0,Ia.useState)((()=>i.getCurrentFlow())),[o,r]=(0,Ia.useState)(s.isLocked),[c,l]=(0,Ia.useState)((()=>s.canGoBack)),u=(0,Zc.Q)();(0,Ia.useEffect)((()=>{u&&l(i.getCurrentFlow().canGoBack)}),[i,u]),(0,Ia.useEffect)((()=>{const e=s.on(hs.LOCKED,(()=>{r(!0)})),t=s.on(hs.UNLOCKED,(()=>{r(!1)}));return()=>{e(),t()}}),[s]),(0,Ia.useEffect)((()=>i.onFlowChanged((()=>{a(i.getCurrentFlow())}))),[i]);const d=(0,Ia.useCallback)((()=>{c&&s.prev()}),[s,c]),h=t&&(e.forceShowBackButton||c);return(0,Dr.jsx)("div",{className:(0,Rr.A)(n("footer"),e.className),children:(0,Dr.jsxs)("div",{className:"fixed-container p-rel",children:[e.children,h&&(0,Dr.jsx)("div",{className:(0,Rr.A)("d-flex justify-center",{"mt-6":e.children}),children:(0,Dr.jsx)(Ml,{type:"footer",className:e.backButtonClass,disabled:o,isBackFlowDisabled:e.isBackFlowDisabled,onClick:e.backButtonClickHandler||d})})]})})},Ul=()=>{const e=(0,Qr.t)(),t=(0,Ur.P)(),n=wa();return(0,Dr.jsxs)("div",{className:"flow-screen",children:[(0,Dr.jsx)(Al,{className:(0,Rr.A)("px-body justify-center",t?"pt-8 pb-16":"pt-2"),children:(0,Dr.jsxs)("div",{className:"fixed-container",children:[(0,Dr.jsx)(vl,{className:"d-block mx-auto",ariaHidden:!0}),(0,Dr.jsx)("p",{className:"text-center text-ellipsis mt-6","data-qa":"blocked-message-text",children:e.translate("blockedScreen.description")})]})}),!t&&(0,Dr.jsx)(Ll,{children:(0,Dr.jsx)("div",{className:"d-flex justify-center",children:(0,Dr.jsx)("button",{type:"button",className:"btn-link text-truncate",onClick:()=>{n.emit(Oa.SHOULD_HIDE,{})},"data-qa":"close","data-tracking-element-name":"closeButton",children:e.translate("blockedScreen.button")})})})]})};var Fl;!function(e){e[e.MAX_LENGTH=500]="MAX_LENGTH"}(Fl||(Fl={}));var jl=n(6360);function Bl(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=(0,Ia.useRef)(null),n=Ir(),i=(0,jl.k)(),s=(0,zr.$)();return(0,Ia.useEffect)((()=>{if(s)return;if(!e||!i)return;if(!t.current)return void n.captureException(new Error("ref is not provided"));const a=window.setTimeout((()=>{var e,n;null===(e=t.current)||void 0===e||e.setAttribute("tabindex","0"),null===(n=t.current)||void 0===n||n.focus({preventScroll:!0})}),50);return()=>window.clearTimeout(a)}),[e,i,s,n]),t}function Gl(e){const t=Bl(e.autoFocus);return(0,Dr.jsx)("div",{className:"sr-only",role:"status","aria-live":"polite",ref:t,children:e.children})}var ql=n(8056),Hl=n(2129);const Vl=window.devicePixelRatio>1,Kl=e=>{const t=(0,Ur.P)(),n=Gr(),i=Ac(),{shouldShowTributeBadge:s,tributeeName:a}=hl(i),o=Sc(),[r,c]=(0,Ia.useState)((()=>o.getCurrentFlow())),[l,u]=(0,Ia.useState)(r.isLocked),[d,h]=(0,Ia.useState)((()=>r.canGoBack)),m=(0,Zc.Q)(),p=(0,_r.n)(),g=p.getAskPageConfig(Vl),y=g.show||!!p.fundraisingPage,f=g.show?g.logoImage:g.fallbackCompanyLogo;(0,Ia.useEffect)((()=>{m&&h(o.getCurrentFlow().canGoBack)}),[o,m]),(0,Ia.useEffect)((()=>{const e=r.on(hs.LOCKED,(()=>{u(!0)})),t=r.on(hs.UNLOCKED,(()=>{u(!1)}));return()=>{e(),t()}}),[r,e]),(0,Ia.useEffect)((()=>o.onFlowChanged((()=>{const e=o.getCurrentFlow();c(e)}))),[o]);const E=e.onBackButtonClick,S=(0,Ia.useCallback)((()=>{d&&(null==E||E(),r.prev())}),[r,d,E]);return(0,Dr.jsxs)(Dr.Fragment,{children:[s&&(0,Dr.jsx)(rl,{name:a}),(0,Dr.jsxs)("div",{className:(0,Rr.A)(n("header"),e.className),"data-qa":"header-block",children:[!t&&!e.titleFullWidth&&(0,Dr.jsx)("div",{className:"header-aside",children:(0,Dr.jsx)("div",{className:"icon-slot icon-slot-24",children:(0,Dr.jsx)("div",{className:"p-abs inset-centered",children:(e.forceShowBackButton||d)&&(0,Dr.jsx)(Ml,{type:"header",disabled:l,isBackFlowDisabled:e.isBackFlowDisabled,onClick:e.backButtonClickHandler||S})})})}),t&&!y&&(0,Dr.jsx)("div",{className:"header-company",children:f?(0,Dr.jsx)("img",{src:f,alt:g.logoAltText||g.companyName,className:"header-company-logo",height:"32","data-qa":"campaign-logo-image"}):(0,Dr.jsx)("p",{className:"header-company-name",title:g.companyName,children:g.companyName})}),(e.children||e.title)&&(0,Dr.jsx)("div",{className:(0,Rr.A)(n("header-main"),{"header-main-full":!t&&e.titleFullWidth}),children:e.title?(0,Dr.jsx)("h2",{className:(0,Rr.A)("title-2",t?"text-ellipsis":"text-line-clamp-2"),"data-testid":e.titleTestId,"data-qa":e.titleQa,children:e.title}):e.children}),!t&&!e.titleFullWidth&&(0,Dr.jsx)("div",{className:"header-aside",children:(0,Dr.jsx)("div",{className:"icon-slot icon-slot-24"})})]})]})};function Yl(){const e=(0,Ia.useRef)();return void 0===e.current&&(e.current=(0,ma.i)()),e.current}const zl={minHeight:"200px"},Wl=e=>{const{state:t,controller:n}=vc(oc.COMMENT),i=(0,Qr.t)(),s=(0,Ur.P)(),a=Yl(),o=(0,Ia.useRef)(null);(0,Hl.f)({ref:o,autoFocus:!0,mode:ql.Q.ALL});const r=(0,Ia.useCallback)((e=>{e.preventDefault(),n.submitComment()}),[n]),c=(0,Ia.useCallback)((e=>{n.setComment(e.target.value)}),[n]);return(0,Dr.jsxs)("form",{"data-testid":"comment-form",onSubmit:r,className:"flow-screen","data-qa":"active-screen-comment",children:[(0,Dr.jsx)(Gl,{autoFocus:s,children:i.translate("common.screenAriaLabel",{screenTitle:`${i.translate("commentScreen.title")}`})}),(0,Dr.jsx)(Kl,{title:i.translate("commentScreen.title")}),(0,Dr.jsx)(Al,{className:(0,Rr.A)("px-body",{"pt-8 pb-10":!s}),children:(0,Dr.jsx)("div",{className:(0,Rr.A)("fixed-container",{"grow-1 d-flex flex-column":!s}),children:(0,Dr.jsxs)("div",{className:(0,Rr.A)({"grow-1 d-flex flex-column":!s}),children:[(0,Dr.jsx)("label",{htmlFor:`comment-${a}`,className:"sr-only","data-qa":"comment-label",children:i.translate("commentScreen.textareaPlaceholder")}),(0,Dr.jsx)("textarea",{ref:o,id:`comment-${a}`,className:(0,Rr.A)("form-control",{"grow-1":!s}),style:zl,onChange:c,value:t.comment,placeholder:i.translate("commentScreen.textareaPlaceholder"),"data-qa":"comment","data-testid":"comment-input",maxLength:Fl.MAX_LENGTH})]})})}),(0,Dr.jsx)(Ll,{children:(0,Dr.jsx)("button",{type:"submit",className:"btn btn-primary","data-qa":"save-comment","data-tracking-element-name":"nextButton",children:i.translate("commentScreen.button")})})]})};var $l;function Xl(e){return e.replace(/(<([^>]+)>)/gi,"")}!function(e){e.CHECKBOX="checkbox",e.MULTIOPTION="multioption",e.RADIO="radio",e.DROPDOWN="dropdown",e.LINE="line",e.MULTILINE="multiline",e.DATE="date"}($l||($l={}));const Ql=e=>e.type===$l.CHECKBOX,Zl=e=>e.type===$l.DROPDOWN,Jl=e=>e.type===$l.MULTILINE,eu=e=>e.type===$l.RADIO,tu=e=>e.type===$l.LINE,nu=e=>e.type===$l.MULTIOPTION,iu=e=>e.type===$l.DATE;var su;function au(){return au=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},au.apply(null,arguments)}var ou=function(e,t){return Ia.createElement("svg",au({width:14,height:10,viewBox:"0 0 14 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),su||(su=Ia.createElement("path",{d:"M12.3333 1L5 8.33333L1.66667 5",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})))},ru=(0,Ia.forwardRef)(ou),cu=(0,Ia.memo)(ru);const lu=e=>{var{setRef:t,innerRef:n,className:i,customLabelClasses:s,customControlClasses:a,labelTruncated:o=!0,disabled:r,error:l,checked:u,checkboxValue:d,children:h,hint:m,dataQa:p,dataTestId:g,trackingElement:y,onChange:f}=e,E=(0,c.Tt)(e,["setRef","innerRef","className","customLabelClasses","customControlClasses","labelTruncated","disabled","error","checked","checkboxValue","children","hint","dataQa","dataTestId","trackingElement","onChange"]);const S=(0,Ia.useRef)(null);return(0,Ia.useImperativeHandle)(t,(()=>S.current),[]),(0,Dr.jsxs)("div",{ref:n,className:(0,mc.A)("ui-checkbox",{"ui-checkbox-disabled":r},i),children:[(0,Dr.jsxs)("label",{className:(0,mc.A)("ui-checkbox-label",s),"data-qa":p+"-label",children:[(0,Dr.jsxs)("span",{className:(0,mc.A)("ui-checkbox-control",a),children:[(0,Dr.jsx)("input",Object.assign({ref:S,type:"checkbox",className:(0,mc.A)("ui-checkbox-input",{"has-error":l}),disabled:r,checked:u,value:d,"aria-invalid":l,"data-qa":p,"data-tracking-element-name":y,"data-testid":g,onChange:()=>{r||f(!u)}},E)),(0,Dr.jsx)("span",{className:"ui-checkbox-icon","aria-hidden":!0,children:u&&(0,Dr.jsx)(cu,{})})]}),h&&(0,Dr.jsx)("span",{className:(0,mc.A)("ui-checkbox-text",{"ui-checkbox-text-ellipsis":o}),children:h})]}),m&&(0,Dr.jsx)("div",{className:"ui-checkbox-hint",children:m})]})};var uu=n(1430);const{useAddFieldToScroll:du,useScrollToFieldsTrigger:hu,ScrollToFieldsProvider:mu}=(0,uu.J)(),pu=e=>{let{id:t,className:n,question:i,questionText:s,answer:a,required:o,hasError:r,type:c,onChange:l}=e;const u=(0,Qr.t)(),d=(0,El.Y)(),h=(0,Ia.useCallback)((()=>{l(!a)}),[l,a]),m=(0,Ia.useRef)(null);return du(m,(e=>!!e[t])),(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsxs)(lu,{setRef:m,className:n,checked:!!a,error:r,onChange:h,dataQa:"question-"+c,"aria-required":o,"aria-describedby":`question-${c}-${d}-error`,"data-testid":"question-checkbox-single",children:[(0,Dr.jsx)("span",{dangerouslySetInnerHTML:{__html:i},dir:"auto"}),!o&&(0,Dr.jsxs)("span",{className:"text-gray-60",children:[" (",u.translate("common.optional"),")"]})]}),r&&(0,Dr.jsx)("p",{id:`question-${c}-${d}-error`,className:"sr-only",children:u.translate("questionsScreen.error.required",{question:s})})]})},gu=(0,Ia.memo)(pu);var yu;!function(e){e[e.ANSWER_MAX_LENGTH=500]="ANSWER_MAX_LENGTH"}(yu||(yu={}));var fu=n(5621),Eu=n(4902);const Su={marginBottom:"13px"},vu=e=>{let{id:t,className:n,question:i,questionText:s,answer:a,required:o,hasError:r,type:c,onChange:l}=e;const u=(0,Qr.t)(),d=Yl(),[h,m]=(0,Ia.useState)(!1),p=(0,Ia.useRef)(null);return du(p,(e=>!!e[t])),(0,Dr.jsx)(fu.t,{id:`oneline-${d}`,setRef:p,error:r,className:(0,Rr.A)({"pe-10":r}),formGroupClass:n,label:(0,Dr.jsx)("span",{className:"text-break-word",dir:"auto",dangerouslySetInnerHTML:{__html:i}}),labelOptional:o?"":u.translate("common.optional"),value:a||"",maxLength:yu.ANSWER_MAX_LENGTH,"aria-required":o,"aria-describedby":`question-${c}-${d}-error`,onChange:e=>{l(e.target.value)},onFocus:()=>m(!0),onBlur:()=>m(!1),dataQa:"question-"+c,"data-testid":"question-oneline",children:r&&(0,Dr.jsx)(Eu.U,{className:"p-abs inset-bottom-end z-index-5 me-4",style:Su,showTooltip:h,children:(0,Dr.jsx)("p",{id:`question-${c}-${d}-error`,children:u.translate("questionsScreen.error.required",{question:s})})})})},Au=(0,Ia.memo)(vu);function Cu(e,t){const[n,i]=(0,Ia.useState)(!1);return(0,Ia.useEffect)((()=>{if(!t)return;i(!0);const e=setTimeout((()=>{i(!1)}),400);return()=>clearTimeout(e)}),[e,t]),n}const Pu=e=>{const t=Ir(),n=(0,Ia.useCallback)((t=>{e.handleChange(e.id,t)}),[e]),i=Cu(e.shakeKey,e.hasError),s=(0,Ia.useMemo)((()=>Xl(e.question)),[e.question]);return Object.values($l).includes(e.type)?(0,Dr.jsxs)(Dr.Fragment,{children:[Ql(e)&&(0,Dr.jsx)(gu,{id:e.id,answer:e.answer,options:e.options,question:e.question,questionText:s,required:e.required,hasError:e.hasError,onChange:n,className:(0,Rr.A)({shake:i}),type:e.type}),tu(e)&&(0,Dr.jsx)(Au,{id:e.id,answer:e.answer,options:e.options,question:e.question,questionText:s,required:e.required,hasError:e.hasError,onChange:n,className:(0,Rr.A)({shake:i}),type:e.type})]}):(t.captureException(new Error(`Unknown type of question: "${e.type}"`)),null)},Nu=(0,Ia.memo)(Pu),bu=()=>{var e;const{state:t,controller:n}=vc(oc.MANDATORY_QUESTIONS),i=Boolean(null===(e=t.forwardBlueQuestions.retiredOrUnemployed)||void 0===e?void 0:e.answer),s=!i,a=!i,o=(0,Qr.t)(),r=(0,Ur.P)(),c=hu(),l=(0,Ia.useCallback)(((e,t)=>{n.answerForwardBlueQuestion(e,t,"retiredOrUnemployed")}),[n]),u=(0,Ia.useCallback)(((e,t)=>{n.answerForwardBlueQuestion(e,t,"occupation")}),[n]),d=(0,Ia.useCallback)(((e,t)=>{n.answerForwardBlueQuestion(e,t,"employer")}),[n]),h=(0,Ia.useCallback)((e=>{e.preventDefault(),n.leave(),c()}),[n,c]);return(0,Dr.jsxs)("form",{onSubmit:h,className:"flow-screen","data-qa":"mandatory-questions-form",children:[(0,Dr.jsx)("div",{className:"sr-only",role:"status","aria-live":"polite",children:o.translate("common.screenAriaLabel",{screenTitle:`${o.translate("mandatoryQuestionsScreen.title")}`})}),(0,Dr.jsx)(Kl,{title:o.translate("mandatoryQuestionsScreen.title")}),(0,Dr.jsx)(Al,{className:(0,Rr.A)("px-body",{"py-8":!r}),children:(0,Dr.jsxs)("div",{className:"fixed-container",children:[(0,Dr.jsx)(uc,{as:"p",className:r?"text-ellipsis":"text-line-clamp-6",token:"mandatoryQuestionsScreen.description"}),(0,Dr.jsx)(yc,{size:24}),t.forwardBlueQuestions.retiredOrUnemployed&&(0,Dr.jsx)(Nu,{id:t.forwardBlueQuestions.retiredOrUnemployed.key,type:t.forwardBlueQuestions.retiredOrUnemployed.type,answer:t.forwardBlueQuestions.retiredOrUnemployed.answer,options:t.forwardBlueQuestions.retiredOrUnemployed.options,question:t.forwardBlueQuestions.retiredOrUnemployed.question,required:t.forwardBlueQuestions.retiredOrUnemployed.required,hasError:!!t.questionErrors[t.forwardBlueQuestions.retiredOrUnemployed.key],handleChange:l,shakeKey:t.shakeKey},t.forwardBlueQuestions.retiredOrUnemployed.key),s&&t.forwardBlueQuestions.occupation&&(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsx)(yc,{size:24}),(0,Dr.jsx)(Nu,{id:t.forwardBlueQuestions.occupation.key,type:t.forwardBlueQuestions.occupation.type,answer:t.forwardBlueQuestions.occupation.answer,options:t.forwardBlueQuestions.occupation.options,question:t.forwardBlueQuestions.occupation.question,required:s,hasError:!!t.questionErrors[t.forwardBlueQuestions.occupation.key],handleChange:u,shakeKey:t.shakeKey},t.forwardBlueQuestions.occupation.key)]}),a&&t.forwardBlueQuestions.employer&&(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsx)(yc,{size:24}),(0,Dr.jsx)(Nu,{id:t.forwardBlueQuestions.employer.key,type:t.forwardBlueQuestions.employer.type,answer:t.forwardBlueQuestions.employer.answer,options:t.forwardBlueQuestions.employer.options,question:t.forwardBlueQuestions.employer.question,required:a,hasError:!!t.questionErrors[t.forwardBlueQuestions.employer.key],handleChange:d,shakeKey:t.shakeKey},t.forwardBlueQuestions.employer.key)]})]})}),(0,Dr.jsx)(Ll,{className:(0,Rr.A)({"pt-12":r}),children:(0,Dr.jsx)("button",{type:"submit",className:"btn btn-primary","data-qa":"mandatory-questions-button",children:o.translate("mandatoryQuestionsScreen.button")})})]})},Du=(0,Ia.memo)(bu),Tu=()=>{const{state:e}=vc(oc.MANDATORY_QUESTIONS);return(0,Dr.jsx)(mu,{state:e.questionErrors,children:(0,Dr.jsx)(Du,{})})};function _u(e,t,n){switch(n){case W.ONCE:return e.translate("payButton.label.once",{amount:t});case W.DAILY:return e.translate("payButton.label.daily",{amount:t});case W.WEEKLY:return e.translate("payButton.label.weekly",{amount:t});case W.BIWEEKLY:return e.translate("payButton.label.biweekly",{amount:t});case W.EVERY_4_WEEKS:return e.translate("payButton.label.every4weeks",{amount:t});case W.MONTHLY:return e.translate("payButton.label.monthly",{amount:t});case W.BIMONTHLY:return e.translate("payButton.label.bimonthly",{amount:t});case W.QUARTERLY:return e.translate("payButton.label.quarterly",{amount:t});case W.SEMIANNUAL:return e.translate("payButton.label.semiannual",{amount:t});case W.ANNUAL:return e.translate("payButton.label.annual",{amount:t});default:throw new Error(`Unknown frequency "${n}"`)}}function ku(e,t){switch(t){case W.DAILY:return e.translate("paymentMethodScreen.perDay");case W.WEEKLY:return e.translate("paymentMethodScreen.perWeek");case W.BIWEEKLY:return e.translate("paymentMethodScreen.per2Weeks");case W.EVERY_4_WEEKS:return e.translate("paymentMethodScreen.per4Weeks");case W.MONTHLY:return e.translate("paymentMethodScreen.perMonth");case W.BIMONTHLY:return e.translate("paymentMethodScreen.per2Months");case W.QUARTERLY:return e.translate("paymentMethodScreen.perQuarter");case W.SEMIANNUAL:return e.translate("paymentMethodScreen.per6Months");case W.ANNUAL:return e.translate("paymentMethodScreen.perYear");default:return""}}function Ou(e,t){switch(t){case W.ONCE:return e.translate("donateForm.giveOnce");case W.DAILY:return e.translate("donateForm.daily");case W.WEEKLY:return e.translate("donateForm.weekly");case W.EVERY_4_WEEKS:return e.translate("donateForm.every4weeks");case W.BIWEEKLY:return e.translate("donateForm.biweekly");case W.MONTHLY:return e.translate("donateForm.monthly");case W.BIMONTHLY:return e.translate("donateForm.bimonthly");case W.QUARTERLY:return e.translate("donateForm.quarterly");case W.SEMIANNUAL:return e.translate("donateForm.semiannual");case W.ANNUAL:return e.translate("donateForm.annual");default:throw new le.HP(t)}}var Iu;function xu(){return xu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},xu.apply(null,arguments)}var wu=function(e,t){return Ia.createElement("svg",xu({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.4,strokeLinecap:"round",strokeLinejoin:"round",ref:t},e),Iu||(Iu=Ia.createElement("polyline",{points:"20 6 9 17 4 12"})))},Ru=(0,Ia.forwardRef)(wu),Mu=(0,Ia.memo)(Ru),Lu=n(8480);const Uu=e=>{let{errorTitle:t,errorMessage:n,dataQa:i,dataTestId:s,dataTrackingElementName:a,onMessageClick:o}=e;return(0,Dr.jsxs)(Dr.Fragment,{children:[t&&(0,Dr.jsx)("p",{className:"subtitle-5 text-red-80 text-ellipsis","data-qa":i+"-error-title","data-testid":s+"-error-title",dangerouslySetInnerHTML:{__html:t}}),n&&(0,Dr.jsx)("p",{className:(0,Rr.A)("text-ellipsis",t?"body-3 text-color mt-1":"subtitle-5 text-red-80"),"data-qa":i+"-error-message","data-testid":s+"-error-message",dangerouslySetInnerHTML:{__html:n},"data-tracking-element-name":a,onClick:o})]})},Fu=(0,Ia.memo)(Uu),ju=e=>{const{children:t,setRef:n,className:i,role:s,dataQa:a,dataTestId:o}=e;return(0,Dr.jsx)("div",{ref:n,className:(0,Rr.A)("text-red-80 bg-red-10 p-3 border border-red-20 border-radius-5",i),role:null!=s?s:"alert","data-qa":a,"data-testid":o,children:t})},Bu=(0,Ia.memo)(ju),Gu=(0,Ia.forwardRef)(((e,t)=>{const{buttonType:n,type:i,processingState:s,className:a,spinnerColorDefault:o,children:r,errorTitle:c,errorMessage:l,disabled:u,testMode:d,dataQa:h,dataTestId:m,trackingElement:p,serverErrors:g,onClick:y}=e,f=(0,Qr.t)(),E=(0,Ur.P)(),S=(0,Ia.useRef)(null),v=(0,Ia.useRef)(null),A=(0,jr.wf)(),C="link"===n,P=s===Kr.IDLE,N=s===Kr.PENDING,b=s===Kr.SUCCESS,D=s===Kr.ERROR,T=!P&&!D||u,_=D&&(!!c||!!l),[k,O]=(0,Ia.useState)(D),[I,x]=(0,Ia.useState)(_);(0,Ia.useImperativeHandle)(t,(()=>v.current),[]);const w=!(null==g?void 0:g.email),R=(0,wl.D)((()=>{O(!1),x(!1)})),M=()=>{k&&O(!1),I&&x(!1)};return function(e){const{document:t}=(0,kr.M)();(0,Ia.useEffect)((()=>{const n=()=>{e()};return t.addEventListener("stripeElementEvent",n),t.addEventListener("click",n),()=>{t.removeEventListener("click",n),t.removeEventListener("stripeElementEvent",n)}}),[t,e])}(M),function(e){const{document:t}=(0,kr.M)();(0,Ia.useEffect)((()=>{const n=t=>{"Tab"===t.key&&e()};return t.addEventListener("keydown",n),()=>{t.removeEventListener("keydown",n)}}),[t,e])}(M),(0,Ia.useEffect)((()=>{w&&(O(D),x(_))}),[D,_,w]),(0,Ia.useEffect)((()=>{k?R.set([],yi):R.clear()}),[k,R]),(0,Dr.jsxs)(Dr.Fragment,{children:[E&&(0,Dr.jsx)(Mr.A,{nodeRef:S,in:I,timeout:200,classNames:"rtg-fade",mountOnEnter:!0,unmountOnExit:!0,children:(0,Dr.jsx)(Bu,{setRef:S,className:"mb-3",role:k?"alert":"none",children:(0,Dr.jsx)(Fu,{errorTitle:c,errorMessage:l,dataQa:h,dataTestId:m})})}),(0,Dr.jsx)(Kc.S,{ref:v,content:(0,Dr.jsx)(Fu,{errorTitle:c,errorMessage:l,dataQa:h,dataTestId:m}),trigger:"manual",manualOpen:!E&&I,className:E?"ui-tooltip-mobile":"ui-tooltip-desktop",placement:"top",maxWidth:"300px",rootContainer:A,children:(0,Dr.jsxs)("button",{type:null!=i?i:"button",className:(0,Rr.A)(C?"btn-link p-rel max-w-100":"btn",a,{"w-100":C&&!P,"btn-testmode":!C&&d,"btn-loading":N||b||k,"is-success":b,"has-error":k}),disabled:T,"aria-disabled":T,"aria-busy":N,"data-qa":h,"data-tracking-element-name":p,"data-testid":m,onClick:y,children:[C?(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsx)("span",{className:(0,Rr.A)("text-truncate",{invisible:N||b||k}),"data-testid":"link-children-container",children:r}),(N||b)&&(0,Dr.jsxs)("span",{className:"p-abs inset-centered max-w-100 d-flex items-center justify-center",children:[(0,Dr.jsx)("span",{className:"spinner spinner-md spinner-primary shrink-0 me-1"}),(0,Dr.jsx)("span",{className:"text-truncate",children:f.translate("payButton.processingShort")})]}),k&&(0,Dr.jsx)("span",{className:"p-abs inset-centered text-truncate text-red-80 max-w-100",children:f.translate("payButton.error")})]}):(0,Dr.jsxs)(Dr.Fragment,{children:[r,N&&(0,Dr.jsx)("span",{className:"p-abs inset-centered",children:(0,Dr.jsx)("span",{className:(0,Rr.A)("spinner spinner-lg",o?"spinner-default":"spinner-white")})}),(b||k)&&(0,Dr.jsxs)("span",{className:"btn-state",children:[b&&(0,Dr.jsx)(Mu,{className:"icon-stroke icon-stroke-2","data-testid":"pay-button-success-icon"}),k&&(0,Dr.jsx)(Lu.A,{className:"icon-stroke icon-stroke-2","data-testid":"pay-button-error-icon"})]})]}),(0,Dr.jsx)("span",{className:"sr-only",role:"status","aria-live":"polite",children:N&&f.translate("payButton.processing")}),(0,Dr.jsx)("span",{className:"sr-only",role:"status","aria-live":"polite",children:b&&f.translate("payButton.done")})]})})]})}));Gu.displayName="RawPayButton";const qu=(0,Ia.memo)(Gu);var Hu,Vu,Ku;function Yu(){return Yu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Yu.apply(null,arguments)}!function(e){e.CARD="creditCard",e.APPLE_PAY="applePay",e.GOOGLE_PAY="googlePay",e.SEPA="sepa",e.PAYPAL="paypal",e.AU_BECS="auBecsDebit",e.UK_BACS="ukBacs",e.VENMO="venmo",e.ACSS="acss",e.IDEAL="ideal",e.US_BANK_ACCOUNT="usBankAccount",e.US_BANK_ACCOUNT_INSTANT="usBankAccountInstant",e.US_BANK_ACCOUNT_VERIFICATION="usBankAccountVerification"}(Hu||(Hu={}));var zu,Wu,$u,Xu,Qu,Zu=function(e,t){return Ia.createElement("svg",Yu({fill:"none",height:22,viewBox:"0 0 34 22",width:34,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t},e),Vu||(Vu=Ia.createElement("clipPath",{id:"a"},Ia.createElement("path",{d:"m.5.4375h33v21.1263h-33z"}))),Ku||(Ku=Ia.createElement("g",{clipPath:"url(#a)"},Ia.createElement("path",{d:"m30.5447.4375h-27.0894c-.11282 0-.22584 0-.33847.000658-.0952.000678-.19018.001734-.28516.004326-.20714.005603-.41606.017824-.62062.054588-.20782.037402-.40121.098409-.58988.194466-.18547.094322-.35527.217692-.50243.364912-.147214.14721-.270584.31674-.364886.50241-.096077.18866-.157124.38211-.194267.5901-.036961.20461-.049264.41349-.054847.62042-.002552.09498-.003646.18996-.004266.28492-.000658.11286-.000439.22564-.000439.33871v15.21549c0 .1131-.000219.2257.000439.3388.00062.0949.001714.1899.004266.2849.005583.2067.017886.4156.054847.6201.037143.2081.09819.4015.194267.5902.094302.1856.217672.3554.364886.5024.14716.1474.31696.2708.50243.3649.18867.0963.38206.1573.58988.1947.20456.0365.41348.049.62062.0546.09498.0021.18996.0034.28516.0038.11263.0009.22565.0009.33847.0009h27.0894c.1127 0 .2257 0 .3383-.0009.095-.0004.1899-.0017.2854-.0038.2067-.0056.4155-.0181.6206-.0546.2075-.0374.401-.0984.5897-.1947.1856-.0941.3549-.2175.5024-.3649.147-.147.2703-.3168.3649-.5024.0963-.1887.1573-.3821.1942-.5902.037-.2045.049-.4134.0546-.6201.0026-.095.0039-.19.0043-.2849.0009-.1131.0009-.2257.0009-.3388v-15.21549c0-.11307 0-.22585-.0009-.33871-.0004-.09496-.0017-.18994-.0043-.28492-.0056-.20693-.0176-.41581-.0546-.62042-.0369-.20799-.0979-.40144-.1942-.5901-.0946-.18567-.2179-.3552-.3649-.50241-.1475-.14722-.3168-.27059-.5024-.364912-.1887-.096057-.3822-.157064-.5897-.194466-.205-.036764-.4139-.048985-.6206-.054588-.0955-.002592-.1904-.003648-.2854-.004326-.1126-.000658-.2256-.000658-.3383-.000658z",fill:"#fff"}),Ia.createElement("path",{d:"m30.5446 1.14062.3333.00064c.0903.00064.1805.00162.2713.00409.1579.00427.3426.01282.5148.04368.1497.02696.2752.06795.3957.12927.1189.06043.2278.13962.323.23462.0955.09564.1748.20478.236.32502.061.11952.1017.24444.1285.39521.0308.1703.0393.35552.0436.51439.0025.08968.0037.17936.0041.27117.0009.11103.0008.222.0008.33325v15.21554c0 .1112.0001.222-.0008.3354-.0004.0896-.0016.1793-.0041.2692-.0043.1586-.0128.3437-.044.516-.0264.1487-.0671.2737-.1284.3938-.0611.1199-.1402.2289-.2353.324-.0957.0957-.2043.1746-.3246.2356-.1196.061-.2449.102-.3931.1287-.1757.0313-.3681.0399-.5131.0438-.0911.0021-.1819.0033-.2749.0037-.1108.0009-.2219.0009-.3328.0009h-27.08939c-.00147 0-.00291 0-.0044 0-.10954 0-.21929 0-.33082-.0009-.09093-.0004-.18166-.0016-.26939-.0036-.14825-.004-.34082-.0126-.51505-.0437-.14947-.0269-.27477-.0679-.39591-.1297-.1192-.0604-.22772-.1393-.32344-.2352-.09498-.0948-.17391-.2035-.23494-.3236-.06108-.12-.10196-.2453-.12883-.3958-.03106-.172-.0396-.3563-.04386-.5139-.00243-.0902-.00345-.1804-.00403-.2701l-.00044-.2647.00002-.0699v-15.21554l-.00002-.0699.00042-.26419c.0006-.09021.00162-.18041.00405-.27055.00426-.15772.0128-.34217.04412-.51559.02663-.14911.06748-.27443.12889-.39503.06055-.1192.13962-.22802.2351-.32348.0951-.09514.20397-.17423.32394-.23524.11984-.06102.24538-.10199.39485-.12889.17222-.03094.35705-.03947.51535-.04376.09024-.00245.18047-.00343.27003-.00405l.33436-.00066z",fill:"#fff"}),Ia.createElement("g",{fill:"#000"},Ia.createElement("path",{d:"m9.50896 7.53943c.28256-.35342.4743-.82795.42373-1.31287-.41362.02057-.91837.27288-1.21059.62658-.26239.30288-.49462.79728-.43408 1.26187.46431.04028.9282-.23208 1.22094-.57558z"}),Ia.createElement("path",{d:"m9.92743 8.20582c-.6743-.04017-1.24761.38269-1.56962.38269-.32218 0-.81529-.36245-1.34862-.35269-.69416.0102-1.33826.40268-1.69052 1.02692-.72453 1.24876-.1912 3.10116.51337 4.11816.34216.5032.75451 1.0572 1.29785 1.0373.51337-.0201.71459-.3324 1.33861-.3324.62356 0 .80481.3324 1.34824.3224.56356-.0101.91586-.5034 1.25806-1.0071.3925-.5736.5532-1.1274.5633-1.1578-.0101-.0101-1.0867-.4231-1.0967-1.6615-.0102-1.03695.8452-1.53017.8855-1.56075-.4831-.71444-1.2378-.79499-1.49947-.81523z"}),Ia.createElement("path",{d:"m15.7986 6.80469c1.4655 0 2.4861 1.01023 2.4861 2.48104 0 1.47607-1.0416 2.49157-2.5229 2.49157h-1.6226v2.5805h-1.1724v-7.55311zm-1.6594 3.98851h1.3452c1.0207 0 1.6016-.5495 1.6016-1.50222 0-.95258-.5809-1.49696-1.5964-1.49696h-1.3504z"}),Ia.createElement("path",{d:"m18.5908 12.7909c0-.9632.7381-1.5546 2.0467-1.6279l1.5074-.089v-.4239c0-.6124-.4136-.97882-1.1043-.97882-.6545 0-1.0628.31399-1.1621.80612h-1.0678c.0628-.99462.9107-1.7274 2.2717-1.7274 1.3347 0 2.1878.70663 2.1878 1.8111v3.7948h-1.0835v-.9055h-.0261c-.3192.6124-1.0154.9997-1.7377.9997-1.0783 0-1.8321-.67-1.8321-1.6592zm3.5541-.4972v-.4345l-1.3557.0837c-.6753.0472-1.0573.3455-1.0573.8166 0 .4815.3978.7956 1.005.7956.7903 0 1.408-.5444 1.408-1.2614z"}),Ia.createElement("path",{d:"m24.2934 16.3837v-.916c.0836.0209.272.0209.3663.0209.5234 0 .8061-.2198.9787-.7851 0-.0105.0996-.335.0996-.3402l-1.989-5.51174h1.2247l1.3925 4.48064h.0208l1.3924-4.48064h1.1934l-2.0625 5.79434c-.4708 1.3348-1.0152 1.764-2.1563 1.764-.0943 0-.377-.0105-.4606-.0262z"})))))},Ju=(0,Ia.forwardRef)(Zu),ed=(0,Ia.memo)(Ju);function td(){return td=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},td.apply(null,arguments)}var nd,id=function(e,t){return Ia.createElement("svg",td({fill:"none",height:26,viewBox:"0 0 53 26",width:53,xmlns:"http://www.w3.org/2000/svg",ref:t},e),zu||(zu=Ia.createElement("g",{fill:"#fff"},Ia.createElement("path",{d:"m25.011 13.6095v5.8583h-1.8898v-14.48819h4.9134c1.1969 0 2.3307.44095 3.2126 1.25985.8819.7559 1.3228 1.88976 1.3228 3.08661 0 1.19683-.4409 2.26773-1.3228 3.08663s-1.9528 1.2598-3.2126 1.2598zm0-6.86611v5.03941h3.1496c.6929 0 1.3858-.252 1.8268-.7559 1.0078-.9449 1.0078-2.51973.0629-3.46461l-.0629-.06299c-.504-.50394-1.1339-.8189-1.8268-.75591z"}),Ia.createElement("path",{d:"m36.9168 9.26294c1.3858 0 2.4567.37795 3.2756 1.13386.8189.7559 1.1968 1.7638 1.1968 3.0236v6.0473h-1.7638v-1.3859h-.063c-.7559 1.1339-1.8267 1.7008-3.0866 1.7008-1.0708 0-2.0157-.3149-2.7716-.9449-.6929-.6299-1.1339-1.5118-1.1339-2.4567 0-1.0078.378-1.8267 1.1339-2.4566.7559-.63 1.8267-.8819 3.0866-.8819 1.1338 0 2.0157.1889 2.7086.6299v-.441c0-.6299-.2519-1.2598-.7559-1.6378-.5039-.4409-1.1338-.6929-1.8267-.6929-1.0709 0-1.8898.441-2.4567 1.3229l-1.6378-1.0079c1.0079-1.32284 2.3307-1.95276 4.0945-1.95276zm-2.3937 7.18106c0 .504.2519.9449.6299 1.1969.4409.315.9449.5039 1.4488.5039.7559 0 1.5118-.3149 2.0787-.8819.63-.5669.9449-1.2598.9449-2.0157-.5669-.441-1.3858-.6929-2.4567-.6929-.7559 0-1.3858.189-1.8897.5669-.504.315-.7559.7559-.7559 1.3228z"}),Ia.createElement("path",{d:"m51.5937 9.57788-6.2362 14.29922h-1.8897l2.3307-4.9764-4.0945-9.25983h2.0157l2.9607 7.11813h.0629l2.8977-7.11813h1.9527z"}))),Wu||(Wu=Ia.createElement("path",{d:"m17.5146 12.3496c0-.5669-.0629-1.1339-.1259-1.7008h-7.87405v3.2126h4.47245c-.189 1.0079-.7559 1.9528-1.6378 2.5197v2.0787h2.7087c1.5748-1.4488 2.4566-3.5905 2.4566-6.1102z",fill:"#4285f4"})),$u||($u=Ia.createElement("path",{d:"m9.51486 20.4756c2.26774 0 4.15744-.7559 5.54334-2.0158l-2.7087-2.0787c-.7559.5039-1.7008.8189-2.83464.8189-2.14173 0-4.0315-1.4488-4.66142-3.4646h-2.77165v2.1417c1.44882 2.8347 4.28346 4.5985 7.43307 4.5985z",fill:"#34a853"})),Xu||(Xu=Ia.createElement("path",{d:"m4.85386 13.7354c-.37795-1.0078-.37795-2.1417 0-3.2126v-2.1417h-2.77165c-1.196852 2.3307-1.196852 5.1024 0 7.4961z",fill:"#fbbc04"})),Qu||(Qu=Ia.createElement("path",{d:"m9.51461 7.12126c1.19689 0 2.33069.44095 3.21259 1.25985l2.3937-2.3937c-1.5118-1.38583-3.5276-2.20473-5.5433-2.14174-3.1496 0-6.04724 1.76378-7.43307 4.59843l2.77165 2.1417c.56693-2.01572 2.4567-3.46454 4.59843-3.46454z",fill:"#ea4335"})))},sd=(0,Ia.forwardRef)(id),ad=(0,Ia.memo)(sd);function od(){return od=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},od.apply(null,arguments)}var rd=function(e,t){return Ia.createElement("svg",od({fill:"none",height:13,viewBox:"0 0 46 13",width:46,xmlns:"http://www.w3.org/2000/svg",ref:t},e),nd||(nd=Ia.createElement("g",{fill:"#fff"},Ia.createElement("path",{d:"m30.7248.710938h-3.484c-.2382 0-.441.173342-.4781.408542l-1.409 8.93382c-.0278.1763.1082.336.2869.336h1.7876c.1666 0 .309-.1213.3346-.2861l.3998-2.53277c.037-.23536.2397-.40854.4782-.40854h1.1026c2.2948 0 3.6192-1.11068 3.9654-3.31199.1558-.96255.0063-1.71918-.4446-2.2486-.4954-.58251-1.3737-.890362-2.5394-.890362zm.4022 3.262822c-.1904 1.25067-1.1455 1.25067-2.0695 1.25067h-.5253l.3686-2.33504c.0224-.14093.144-.24491.2868-.24491h.241c.6289 0 1.2231 0 1.5293.35828.183.21421.2384.53193.1691.971z"}),Ia.createElement("path",{d:"m5.87487.710938h-3.48408c-.23817 0-.44095.173342-.47822.408542l-1.408979 8.93382c-.027716.1763.108516.336.287026.336h1.663593c.23817 0 .44095-.1733.47822-.40867l.38019-2.4102c.03711-.23536.23989-.40854.47806-.40854h1.10254c2.29495 0 3.61937-1.11068 3.96559-3.31199.1558-.96255.00626-1.71918-.4444-2.2486-.49591-.58251-1.37406-.890362-2.53954-.890362zm.40196 3.262822c-.19041 1.25067-1.1456 1.25067-2.06931 1.25067h-.52567l.36861-2.33504c.0224-.14093.14391-.24491.28687-.24491h.24099c.62886 0 1.22295 0 1.52908.35828.18321.21421.23864.53193.16943.971z"}),Ia.createElement("path",{d:"m16.2878 3.93034h-1.6681c-.1428 0-.2645.10397-.2869.24522l-.0734.46647-.1167-.1688c-.3614-.52473-1.1665-.69979-1.9706-.69979-1.8431 0-3.41771 1.39676-3.72415 3.35599-.15957.97711.06686 1.91115.62103 2.56287.50906.599 1.23562.8482 2.10122.8482 1.4856 0 2.3097-.95452 2.3097-.95452l-.0745.46382c-.0281.1763.1082.336.2868.336h1.5025c.2382 0 .4408-.1733.4781-.40851l.9021-5.71123c.0275-.17647-.1086-.33572-.2871-.33572zm-2.3251 3.24732c-.161.9533-.9178 1.59312-1.883 1.59312-.4839 0-.8713-.15565-1.1202-.45019-.2468-.29219-.3397-.70824-.2614-1.17174.1502-.9447.9192-1.60534 1.8697-1.60534.4737 0 .8584.15721 1.1122.45442.2556.29955.3559.71842.2827 1.17973z"}),Ia.createElement("path",{d:"m41.1378 3.93034h-1.6681c-.143 0-.2646.10397-.2869.24522l-.0736.46647-.1165-.1688c-.3615-.52473-1.1666-.69979-1.9706-.69979-1.8432 0-3.4177 1.39676-3.724 3.35599-.1597.97711.067 1.91115.621 2.56287.5091.599 1.2358.8482 2.1013.8482 1.4855 0 2.3096-.95452 2.3096-.95452l-.0745.46382c-.028.1763.1081.336.2869.336h1.5024c.2382 0 .4407-.1733.4781-.40851l.9019-5.71123c.0279-.17647-.1085-.33572-.287-.33572zm-2.3248 3.24732c-.1612.9533-.9178 1.59312-1.883 1.59312-.4842 0-.8713-.15565-1.1204-.45019-.2466-.29219-.3396-.70824-.2613-1.17174.1503-.9447.919-1.60534 1.8695-1.60534.4735 0 .8582.15721 1.1124.45442.2552.29955.3557.71842.2828 1.17973z"}),Ia.createElement("path",{d:"m25.1741 3.9375h-1.6769c-.1604 0-.3102.0797-.4006.21218l-2.3131 3.40688-.9804-3.27363c-.0615-.20497-.2499-.34543-.4636-.34543h-1.6485c-.199 0-.339.19573-.2749.38427l1.8465 5.41982-1.7367 2.45031c-.1364.1924.0012.4585.237.4585h1.675c.159 0 .3076-.0779.3979-.2083l5.5769-8.04862c.1334-.1926-.0045-.45598-.2386-.45598z"}),Ia.createElement("path",{d:"m43.1046.955998-1.4301 9.097302c-.0277.1763.1084.3359.2869.3359h1.4382c.2382 0 .441-.1734.4784-.40857l1.4099-8.93381c.0279-.176319-.1082-.335882-.2869-.335882h-1.6094c-.1431-.000313-.2648.103818-.287.24506z"}))))},cd=(0,Ia.forwardRef)(rd),ld=(0,Ia.memo)(cd);const ud={[Hu.APPLE_PAY]:{icon:{name:ed,width:34,height:22},label:"paymentMethodScreen.button.applePay.label"},[Hu.GOOGLE_PAY]:{icon:{name:ad,width:38,height:20},label:"paymentMethodScreen.button.googlePay.label"},[Hu.PAYPAL]:{icon:{name:ld,width:46,height:13},label:"paymentMethodScreen.button.paypal.label"}},dd=e=>{let{availableOptions:t,buttonOptions:n,disabled:i,onClick:s}=e;const a=(0,Qr.t)(),o=(0,Ia.useMemo)((()=>t.map((e=>{const{visible:t}=n[e],i=ud[e].icon.name,s={marginTop:e===Hu.PAYPAL?"3px":e===Hu.GOOGLE_PAY?"1px":void 0};return t&&(0,Dr.jsx)(i,{width:ud[e].icon.width,height:ud[e].icon.height,className:"shrink-0",style:s,"aria-hidden":!0},e)}))),[t,n]),r=(0,Ia.useMemo)((()=>{const e=t.map((e=>{const{visible:t}=n[e];return t?a.translate(ud[e].label):null})).filter(Boolean);return 1===e.length?a.translate("paymentMethodScreen.button.continueWithAriaLabel",{paymentMethod:e[0]}):2===e.length?a.translate("paymentMethodScreen.button.continueWithOrAriaLabel",{firstPaymentMethod:e[0],secondPaymentMethod:e[1]}):a.translate("paymentMethodScreen.button.continueWith")}),[a,t,n]);return(0,Dr.jsxs)("button",{type:"button",className:"btn btn-black d-flex justify-center items-center gap-x-3",disabled:i,"aria-label":r,onClick:s,"data-tracking-element-name":"payment-option-fast-track","data-qa":"fast-track-continue-button","data-testid":"fast-track-continue-button",children:[(0,Dr.jsx)("span",{className:"text-truncate","aria-hidden":!0,children:a.translate("paymentMethodScreen.button.continueWith")}),o]})},hd=(0,Ia.memo)(dd);var md;function pd(){return pd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},pd.apply(null,arguments)}var gd=function(e,t){return Ia.createElement("svg",pd({fill:"none",height:26,viewBox:"0 0 51 26",width:51,xmlns:"http://www.w3.org/2000/svg",ref:t},e),md||(md=Ia.createElement("g",{fill:"currentColor"},Ia.createElement("path",{d:"m10.7677 6.37383c.5615-.70228.9425-1.64523.842-2.60882-.8219.04087-1.82492.54225-2.4056 1.24508-.52139.60186-.98286 1.5843-.86255 2.50749.92264.08003 1.84445-.46118 2.42615-1.14375z"}),Ia.createElement("path",{d:"m11.5996 7.69773c-1.3399-.07981-2.47913.76045-3.119.76045-.64022 0-1.62007-.72023-2.67985-.70082-1.37938.02026-2.65929.80017-3.35926 2.0406-1.43973 2.48144-.37995 6.16234 1.02012 8.18334.6799.9999 1.4993 2.1008 2.57898 2.0612 1.02012-.04 1.41996-.6605 2.65996-.6605 1.23909 0 1.59925.6605 2.67915.6405 1.1198-.02 1.8199-1.0003 2.4998-2.0012.78-1.1398 1.0993-2.2403 1.1193-2.3007-.02-.02-2.1593-.8407-2.1792-3.3016-.0201-2.0604 1.6796-3.04053 1.7596-3.10131-.9599-1.41967-2.4596-1.57974-2.9796-1.61996z"}),Ia.createElement("path",{d:"m23.2667 4.90918c2.9123 0 4.9402 2.00744 4.9402 4.93011 0 2.93311-2.0697 4.95101-5.0132 4.95101h-3.2244v5.1277h-2.3297v-15.00882zm-3.2974 7.92562h2.6731c2.0283 0 3.1827-1.092 3.1827-2.98508 0-1.89288-1.1544-2.97463-3.1723-2.97463h-2.6835z"}),Ia.createElement("path",{d:"m28.8154 16.8081c0-1.914 1.4666-3.0892 4.0671-3.2349l2.9953-.1767v-.8425c0-1.2169-.8218-1.945-2.1945-1.945-1.3004 0-2.1117.6239-2.3091 1.6018h-2.1218c.1248-1.9764 1.8096-3.43248 4.514-3.43248 2.6522 0 4.3475 1.40418 4.3475 3.59878v7.5408h-2.1531v-1.7994h-.0517c-.6344 1.217-2.0179 1.9866-3.4532 1.9866-2.1426 0-3.6405-1.3313-3.6405-3.297zm7.0624-.9881v-.8633l-2.694.1663c-1.3418.0937-2.1009.6866-2.1009 1.6227 0 .9567.7904 1.5809 1.997 1.5809 1.5704 0 2.7979-1.0818 2.7979-2.5066z"}),Ia.createElement("path",{d:"m40.1472 23.9432v-1.8202c.1661.0415.5405.0415.7279.0415 1.04 0 1.6017-.4368 1.9448-1.56 0-.0209.1978-.6657.1978-.6761l-3.9523-10.95245h2.4336l2.767 8.90345h.0413l2.767-8.90345h2.3714l-4.0984 11.51395c-.9357 2.6524-2.0174 3.5053-4.2849 3.5053-.1873 0-.7491-.0209-.9152-.052z"}))))},yd=(0,Ia.forwardRef)(gd),fd=(0,Ia.memo)(yd);const Ed=e=>{let{disabled:t,onClick:n}=e;const i=(0,Qr.t)();return(0,Dr.jsx)("button",{type:"button",className:"btn btn-black d-flex items-center justify-center",disabled:t,"aria-label":i.translate("paymentMethodScreen.button.applePay.label"),onClick:n,"data-tracking-element-name":"payment-option-applePay","data-qa":"fast-track-apple-pay-button","data-testid":"fast-track-apple-pay-button",children:(0,Dr.jsx)(fd,{width:50,height:26,className:"shrink-0","aria-hidden":!0})})},Sd=(0,Ia.memo)(Ed),vd=e=>{let{disabled:t,onClick:n}=e;const i=(0,Qr.t)();return(0,Dr.jsx)("button",{type:"button",className:"btn btn-black p-rel d-flex items-center justify-center",disabled:t,"aria-label":i.translate("paymentMethodScreen.button.googlePay.label"),onClick:n,"data-tracking-element-name":"payment-option-googlePay","data-qa":"fast-track-google-pay-button","data-testid":"fast-track-google-pay-button",children:(0,Dr.jsx)(ad,{width:53,height:26,className:"shrink-0","aria-hidden":!0})})},Ad=(0,Ia.memo)(vd);var Cd,Pd;function Nd(){return Nd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Nd.apply(null,arguments)}var bd=function(e,t){return Ia.createElement("svg",Nd({height:32,preserveAspectRatio:"xMinYMin meet",viewBox:"0 0 101 32",width:101,xmlns:"http://www.w3.org/2000/svg",ref:t},e),Cd||(Cd=Ia.createElement("g",{fill:"#003087"},Ia.createElement("path",{d:"m12.237 2.8h-7.8c-.5 0-1 .4-1.1.9l-3.1 20c-.1.4.2.7.6.7h3.7c.5 0 1-.4 1.1-.9l.8-5.4c.1-.5.5-.9 1.1-.9h2.5c5.1 0 8.1-2.5 8.9-7.4.3-2.1 0-3.8-1-5-1.1-1.3-3.1-2-5.7-2zm.9 7.3c-.4 2.8-2.6 2.8-4.6 2.8h-1.2l.8-5.2c0-.3.3-.5.6-.5h.5c1.4 0 2.7 0 3.4.8.5.4.7 1.1.5 2.1z"}),Ia.createElement("path",{d:"m35.437 10h-3.7c-.3 0-.6.2-.6.5l-.2 1-.3-.4c-.8-1.2-2.6-1.6-4.4-1.6-4.1 0-7.6 3.1-8.3 7.5-.4 2.2.1 4.3 1.4 5.7 1.1 1.3 2.8 1.9 4.7 1.9 3.3 0 5.2-2.1 5.2-2.1l-.2 1c-.1.4.2.8.6.8h3.4c.5 0 1-.4 1.1-.9l2-12.8c.1-.2-.3-.6-.7-.6zm-5.1 7.2c-.4 2.1-2 3.6-4.2 3.6-1.1 0-1.9-.3-2.5-1s-.8-1.6-.6-2.6c.3-2.1 2.1-3.6 4.2-3.6 1.1 0 1.9.4 2.5 1 .5.7.7 1.6.6 2.6z"}),Ia.createElement("path",{d:"m55.337 10h-3.7c-.4 0-.7.2-.9.5l-5.2 7.6-2.2-7.3c-.1-.5-.6-.8-1-.8h-3.7c-.4 0-.8.4-.6.9l4.1 12.1-3.9 5.4c-.3.4 0 1 .5 1h3.7c.4 0 .7-.2.9-.5l12.5-18c.3-.3 0-.9-.5-.9z"}))),Pd||(Pd=Ia.createElement("g",{fill:"#009cde"},Ia.createElement("path",{d:"m67.737 2.8h-7.8c-.5 0-1 .4-1.1.9l-3.1 19.9c-.1.4.2.7.6.7h4c.4 0 .7-.3.7-.6l.9-5.7c.1-.5.5-.9 1.1-.9h2.5c5.1 0 8.1-2.5 8.9-7.4.3-2.1 0-3.8-1-5-1.2-1.2-3.1-1.9-5.7-1.9zm.9 7.3c-.4 2.8-2.6 2.8-4.6 2.8h-1.2l.8-5.2c0-.3.3-.5.6-.5h.5c1.4 0 2.7 0 3.4.8.5.4.6 1.1.5 2.1z"}),Ia.createElement("path",{d:"m90.937 10h-3.7c-.3 0-.6.2-.6.5l-.2 1-.3-.4c-.8-1.2-2.6-1.6-4.4-1.6-4.1 0-7.6 3.1-8.3 7.5-.4 2.2.1 4.3 1.4 5.7 1.1 1.3 2.8 1.9 4.7 1.9 3.3 0 5.2-2.1 5.2-2.1l-.2 1c-.1.4.2.8.6.8h3.4c.5 0 1-.4 1.1-.9l2-12.8c0-.2-.3-.6-.7-.6zm-5.2 7.2c-.4 2.1-2 3.6-4.2 3.6-1.1 0-1.9-.3-2.5-1s-.8-1.6-.6-2.6c.3-2.1 2.1-3.6 4.2-3.6 1.1 0 1.9.4 2.5 1 .6.7.8 1.6.6 2.6z"}),Ia.createElement("path",{d:"m95.337 3.3-3.2 20.3c-.1.4.2.7.6.7h3.2c.5 0 1-.4 1.1-.9l3.2-19.9c.1-.4-.2-.7-.6-.7h-3.6c-.4 0-.6.2-.7.5z"}))))},Dd=(0,Ia.forwardRef)(bd),Td=(0,Ia.memo)(Dd);const _d=e=>{let{disabled:t,onClick:n}=e;const i=(0,Qr.t)();return(0,Dr.jsx)("button",{type:"button",className:"btn btn-paypal-gold p-rel d-flex items-center justify-center",disabled:t,"aria-label":i.translate("paymentMethodScreen.button.paypal.label"),onClick:n,"data-tracking-element-name":"payment-option-paypal","data-qa":"fast-track-paypal-button","data-testid":"fast-track-paypal-button",children:(0,Dr.jsx)(Td,{width:69,height:22,className:"shrink-0","aria-hidden":!0})})},kd=(0,Ia.memo)(_d),Od={[Hu.APPLE_PAY]:Sd,[Hu.GOOGLE_PAY]:Ad,[Hu.PAYPAL]:kd},Id=e=>{let{option:t,show:n,disabled:i,onClick:s}=e;const a=Od[t],o=(0,Ia.useCallback)((()=>{s(t)}),[s,t]);return(0,Dr.jsx)("div",{className:(0,Rr.A)("w-100",{"d-none":!n}),children:(0,Dr.jsx)(a,{disabled:i,onClick:o})},t)},xd=e=>{let{availableOptions:t,buttonOptions:n,disabled:i,onChoosePaymentOption:s}=e;return(0,Dr.jsx)("div",{className:"d-flex items-center gap-x-2","data-qa":"fast-track-payment-option-buttons",children:t.map((e=>{const{visible:t}=n[e];return(0,Dr.jsx)(Id,{option:e,show:t,disabled:i,onClick:s},e)}))})},wd=(0,Ia.memo)(xd);var Rd=n(7998);const Md=["top","bottom"],Ld=e=>{let{anonymousChecked:t,locked:n,className:i,dataTestId:s,onToggle:a}=e;const o=(0,Qr.t)(),r=(0,cc.Q)(),c=(0,Ur.P)(),l=(0,jr.wf)();return(0,Dr.jsxs)("div",{className:(0,Rr.A)("d-flex",i),children:[(0,Dr.jsx)(lu,{checked:t,disabled:n,onChange:a,dataQa:"anonymously-checkbox",trackingElement:"anonymousCheckbox",dataTestId:s,children:(0,Dr.jsx)("span",{className:"text-truncate",children:o.translate("privacyScreen.donateAnonymously.label")})}),(0,Dr.jsx)("div",{className:"shrink-0 icon-slot icon-slot-18 ms-2",children:(0,Dr.jsx)(Kc.S,{content:!n&&o.translate("privacyScreen.donateAnonymously.tooltipLabel"),trigger:"click",className:c?"ui-tooltip-mobile":"ui-tooltip-desktop",placement:r?"left-start":"right-start",fallbackPlacements:Md,rootContainer:l,children:(0,Dr.jsx)("button",{type:"button",className:"btn-icon p-abs inset-centered text-gray-60 font-size-18",disabled:n,"aria-label":o.translate("privacyScreen.donateAnonymously.helpAriaLabel"),"data-qa":"anonymous-checkbox-help-button",children:(0,Dr.jsx)(Rd.A,{className:(0,Rr.A)("icon-stroke d-block",{"icon-flip-horizontal":r}),"aria-hidden":!0})})})})]})},Ud=(0,Ia.memo)(Ld);var Fd=n(5077),jd=n(6443);const Bd=e=>{var t,{label:n,labelOptional:i,labelSrOnly:s,labelFloating:a,id:o,className:r,value:l,formGroupClass:u,formLabelClass:d,dataQa:h,dataTestId:m,options:p=[],groupedOptions:g,children:y,autoFocus:f,hasCustomValue:E,customPlaceholder:S,error:v,setRef:A,autoScroll:C}=e,P=(0,c.Tt)(e,["label","labelOptional","labelSrOnly","labelFloating","id","className","value","formGroupClass","formLabelClass","dataQa","dataTestId","options","groupedOptions","children","autoFocus","hasCustomValue","customPlaceholder","error","setRef","autoScroll"]);const N=(0,Ia.useRef)(null),b=""===(null===(t=null==p?void 0:p[0])||void 0===t?void 0:t.value);return(0,Ia.useImperativeHandle)(A,(()=>N.current),[]),(0,Hl.f)({ref:N,autoFocus:f,mode:ql.Q.DESKTOP}),(0,jd.Q)(N,{shouldScroll:C,shouldFocus:!0}),(0,Dr.jsxs)(Fd.s,{htmlFor:o,label:n,labelOptional:i,labelSrOnly:s,labelFloating:a,formGroupClass:u,formLabelClass:(0,Rr.A)(d,{"has-error":v}),formControlValue:l,dataQa:h+"-label",children:[(0,Dr.jsxs)("select",Object.assign({id:o,ref:N,className:(0,Rr.A)("form-control form-control-select",r,{"has-label-floating":a,"has-error":v}),"aria-invalid":v,value:l,"data-qa":h,"data-testid":m},P,{children:[!b&&(0,Dr.jsx)("option",{value:"",disabled:!0}),p&&p.map((e=>{let{value:t,label:n}=e;return(0,Dr.jsx)("option",{value:t,children:n},t)})),g&&Object.entries(g).map((e=>{let[t,n]=e;return(0,Dr.jsx)("optgroup",{label:t,children:n.map((e=>{let{value:t,label:n}=e;return(0,Dr.jsx)("option",{value:t,children:n},t)}))},t)}))]})),(E||!a&&S)&&(0,Dr.jsx)("span",{className:(0,Rr.A)("form-control-placeholder p-abs inset-bottom-start inset-bottom-end text-truncate pointer-events-none z-index-4",{"text-gray-60":!l,"has-label-floating":a}),children:l||S}),y]})};var Gd=n(7289);const qd={minWidth:"100px",maxWidth:"170px",width:"auto"},Hd=e=>{let{validation:t,customerTitle:n,className:i,autoFocus:s,locked:a,dataTestId:o,onChange:r}=e;const c=(0,Qr.t)(),l=Yl(),[u,d]=(0,Ia.useState)(!1),h=!t.customerTitle.isValid,m=n.list.map((e=>({value:e,label:e}))),p=(0,Ia.useRef)(null);return(0,Gd.FM)(p,(e=>!e.validation.customerTitle.isValid)),(0,Dr.jsxs)("div",{className:(0,Rr.A)("p-rel",i),style:qd,children:[(0,Dr.jsx)(Bd,{setRef:p,id:`title-${l}`,label:c.translate("privacyScreen.customerTitle.label"),labelFloating:!0,formGroupClass:"p-abs inset-0",value:n.title,options:m,customPlaceholder:c.translate("privacyScreen.customerTitle.placeholder"),autoFocus:s,disabled:a,error:h,"aria-describedby":`customer-title-${l}-error`,dataTestId:o,onChange:e=>r(e.target.value),onFocus:()=>d(!0),onBlur:()=>d(!1),dataQa:"customer-title-select",children:h&&(0,Dr.jsx)(Eu.U,{className:"p-abs inset-centered-end z-index-5 me-10",showTooltip:u,children:(0,Dr.jsx)("p",{id:`customer-title-${l}-error`,children:c.translate("privacyScreen.customerTitle.error.required")})})}),(0,Dr.jsxs)("span",{className:"invisible form-control-placeholder has-label-floating d-flex","aria-hidden":!0,children:[c.translate("privacyScreen.customerTitle.placeholder"),(0,Dr.jsx)("span",{className:"icon-slot icon-slot-18 shrink-0 ms-2"})]})]})},Vd=(0,Ia.memo)(Hd);var Kd;!function(e){e[e.NAME_MIN_LENGTH=1]="NAME_MIN_LENGTH",e[e.NAME_MAX_LENGTH=100]="NAME_MAX_LENGTH",e[e.EMAIL_MAX_LENGTH=320]="EMAIL_MAX_LENGTH",e[e.ON_BEHALF_OF_MAX_LENGTH=60]="ON_BEHALF_OF_MAX_LENGTH"}(Kd||(Kd={}));const Yd=["top","bottom"],zd=e=>{let{className:t,isDisabled:n}=e;const i=(0,Qr.t)(),s=(0,cc.Q)(),a=(0,Ur.P)(),o=(0,jr.wf)();return(0,Dr.jsx)(Kc.S,{content:!n&&i.translate("privacyScreen.emailInput.tooltipLabel"),trigger:"click",className:a?"ui-tooltip-mobile":"ui-tooltip-desktop",placement:s?"left-start":"right-start",fallbackPlacements:Yd,maxWidth:"260px",rootContainer:o,"data-qa":"privacy-email-consent-tooltip",children:(0,Dr.jsx)("button",{type:"button",className:(0,Rr.A)("btn-icon font-size-18 text-gray-60",t),disabled:n,"aria-label":i.translate("privacyScreen.emailInput.helpAriaLabel"),"data-testid":"privacy-email-consent-tooltip-trigger","data-qa":"email-consent-tooltip-trigger",children:(0,Dr.jsx)(Rd.A,{className:(0,Rr.A)("icon-stroke d-block",{"icon-flip-horizontal":s}),"data-qa":"privacy-email-consent-tooltip-trigger","aria-hidden":!0})})})},Wd=e=>{let{validation:t,emailConsent:n,className:i,email:s,serverError:a,locked:o,dataTestId:r,onChange:c}=e;const l=(0,Qr.t)(),u=Yl(),d=!t.donorEmail.fields.email.isValid||a,h=t.donorEmail.fields.email.errors.required,m=t.donorEmail.fields.email.errors.email,p=(0,Ia.useRef)(null),[g,y]=(0,Ia.useState)(!1);return(0,Gd.FM)(p,(e=>!e.validation.donorEmail.fields.email.isValid||Boolean(e.serverErrors.email))),(0,Dr.jsx)(fu.t,{id:`personal-email-${u}`,setRef:p,type:"text",label:l.translate("privacyScreen.emailInput.label"),labelFloating:!0,className:(0,Rr.A)({"pe-10":n.isEnabled&&!d||!n.isEnabled&&d,"pe-16":n.isEnabled&&d}),formGroupClass:i,formLabelClass:(0,Rr.A)({"pe-6":n.isEnabled&&!d||!n.isEnabled&&d,"pe-12":n.isEnabled&&d}),placeholder:l.translate("privacyScreen.emailInput.placeholder"),value:s,maxLength:Kd.EMAIL_MAX_LENGTH,inputMode:"email",autoComplete:"email",name:"email",error:d,disabled:o,"aria-required":!0,"aria-describedby":`personal-email-${u}-error`,onChange:e=>c(e.target.value),onFocus:()=>y(!0),onBlur:()=>y(!1),dataQa:"personal-email",dataTestId:r,children:(0,Dr.jsxs)("div",{className:"p-abs inset-centered-end d-flex items-center z-index-5 me-4",children:[d&&(0,Dr.jsx)(Eu.U,{className:"shrink-0",dataQa:"personal-email",showTooltip:g,children:(0,Dr.jsxs)("p",{id:`personal-email-${u}-error`,children:[h&&l.translate("privacyScreen.emailInput.error.required"),!h&&m&&l.translate("privacyScreen.emailInput.error.invalid"),a&&(0,Dr.jsx)(uc,{token:"privacyScreen.emailInput.error.server"})]})}),n.isEnabled&&(0,Dr.jsx)(zd,{className:(0,Rr.A)("shrink-0",{"ms-2":d}),isDisabled:o})]})})},$d=(0,Ia.memo)(Wd),Xd=e=>e.fields.firstName.errors.required?"privacyScreen.firstNameInput.error.required":e.fields.firstName.errors.characters?"privacyScreen.firstNameInput.error.characters":e.fields.firstName.errors.minLength?"privacyScreen.firstNameInput.error.minLength":"privacyScreen.firstNameInput.error.required",Qd=e=>{let{validation:t,className:n,firstName:i,locked:s,autoFocus:a,dataTestId:o,onChange:r}=e;const c=(0,Qr.t)(),l=Yl(),[u,d]=(0,Ia.useState)(!1),h=(0,Ia.useRef)(null),m=!t.donorName.fields.firstName.isValid;return(0,Gd.FM)(h,(e=>!e.validation.donorName.fields.firstName.isValid)),(0,Dr.jsx)(fu.t,{id:`personal-first-name-${l}`,setRef:h,label:c.translate("privacyScreen.firstNameInput.label"),labelFloating:!0,className:(0,Rr.A)({"pe-10":m}),formLabelClass:(0,Rr.A)({"pe-6":m}),formGroupClass:n,placeholder:c.translate("privacyScreen.firstNameInput.placeholder"),value:i,maxLength:Kd.NAME_MAX_LENGTH,autoComplete:"given-name",autoFocus:a,name:"firstName",disabled:s,error:m,"aria-required":!0,"aria-describedby":`personal-first-name-${l}-error`,onChange:e=>r(e.target.value),onFocus:()=>d(!0),onBlur:()=>d(!1),dataQa:"personal-first-name",dataTestId:o,children:m&&(0,Dr.jsx)(Eu.U,{className:"p-abs inset-centered-end z-index-5 me-4",showTooltip:u,children:(0,Dr.jsx)("p",{id:`personal-first-name-${l}-error`,children:c.translate(Xd(t.donorName))})})})},Zd=(0,Ia.memo)(Qd),Jd=["top","bottom"],eh=e=>{let{generalConsent:t,locked:n,className:i,dataTestId:s,onToggle:a,onShowConsent:o}=e;const r=(0,Qr.t)(),c=(0,cc.Q)(),l=(0,Ur.P)(),u=(0,jr.wf)(),d=(0,_r.n)(),{checkboxText:h}=d.campaign.config.consentText.general,{additionalInfoText:m}=d.campaign.config.consentText.general;return(0,Ia.useEffect)((()=>{o()}),[o]),(0,Dr.jsxs)("div",{className:(0,Rr.A)("d-flex",i),children:[(0,Dr.jsx)(lu,{checked:t.isAccepted,disabled:n,onChange:a,dataQa:"general-consent-checkbox",trackingElement:"generalConsentCheckbox",dataTestId:s,children:(0,Dr.jsx)("span",{className:"text-truncate",dir:"auto",children:h?(0,Dr.jsx)("span",{dangerouslySetInnerHTML:{__html:h},"data-qa":"general-consent-text"}):r.translate("privacyScreen.generalConsent.label")})}),m&&(0,Dr.jsx)("div",{className:"shrink-0 icon-slot icon-slot-18 ms-2",children:(0,Dr.jsx)(Kc.S,{content:!n&&(0,Dr.jsx)("p",{dangerouslySetInnerHTML:{__html:m},dir:"auto"}),trigger:"click",className:l?"ui-tooltip-mobile":"ui-tooltip-desktop",placement:c?"left-start":"right-start",fallbackPlacements:Jd,maxWidth:"260px",maxHeight:"220px",rootContainer:u,"data-qa":"general-consent-checkbox-text-popover",children:(0,Dr.jsx)("button",{type:"button",className:"btn-icon p-abs inset-centered text-gray-60 font-size-18",disabled:n,"aria-label":r.translate("privacyScreen.generalConsent.helpAriaLabel"),"data-qa":"general-consent-checkbox-help-button","data-testid":"general-consent-checkbox-help-button",children:(0,Dr.jsx)(Rd.A,{className:(0,Rr.A)("icon-stroke d-block",{"icon-flip-horizontal":c}),"aria-hidden":!0})})})})]})},th=(0,Ia.memo)(eh),nh=e=>e.fields.lastName.errors.required?"privacyScreen.lastNameInput.error.required":e.fields.lastName.errors.characters?"privacyScreen.lastNameInput.error.characters":e.fields.lastName.errors.minLength?"privacyScreen.lastNameInput.error.minLength":"privacyScreen.lastNameInput.error.required",ih=e=>{let{validation:t,className:n,lastName:i,locked:s,dataTestId:a,onChange:o}=e;const r=(0,Qr.t)(),c=Yl(),l=(0,Ia.useRef)(null),u=!t.donorName.fields.lastName.isValid,[d,h]=(0,Ia.useState)(!1);return(0,Gd.FM)(l,(e=>!e.validation.donorName.fields.lastName.isValid)),(0,Dr.jsx)(fu.t,{id:`personal-last-name-${c}`,setRef:l,label:r.translate("privacyScreen.lastNameInput.label"),labelFloating:!0,className:(0,Rr.A)({"pe-10":u}),formLabelClass:(0,Rr.A)({"pe-6":u}),formGroupClass:n,placeholder:r.translate("privacyScreen.lastNameInput.placeholder"),value:i,maxLength:Kd.NAME_MAX_LENGTH,autoComplete:"family-name",name:"lastName",disabled:s,error:u,"aria-required":!0,"aria-describedby":`personal-last-name-${c}-error`,onChange:e=>o(e.target.value),onFocus:()=>h(!0),onBlur:()=>h(!1),dataQa:"personal-last-name",dataTestId:a,children:u&&(0,Dr.jsx)(Eu.U,{className:"p-abs inset-centered-end z-index-5 me-4",showTooltip:d,children:(0,Dr.jsx)("p",{id:`personal-last-name-${c}-error`,children:r.translate(nh(t.donorName))})})})},sh=(0,Ia.memo)(ih),ah=["top","bottom"],oh=e=>{let{validation:t,onBehalfOf:n,className:i,locked:s,dataTestIdCheckbox:a,dataTestIdInput:o,onToggleOnBehalfOf:r,onChangeCompanyName:c}=e;var l;const u=(0,Qr.t)(),d=(0,cc.Q)(),h=(0,Ur.P)(),m=Yl(),p=(0,jr.wf)(),g=!t.onBehalfOf.isValid,y=t.onBehalfOf.fields.onBehalfOf.errors.required,f=t.onBehalfOf.fields.onBehalfOf.errors.minLength,[E,S]=(0,Ia.useState)(!1),[v,A]=(0,Ia.useState)(!1),C=(0,Ia.useRef)(null);return(0,Gd.FM)(C,(e=>!e.validation.onBehalfOf.isValid)),(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsxs)("div",{className:(0,Rr.A)("d-flex",i),children:[(0,Dr.jsx)(lu,{checked:n.isActive,disabled:s,dataQa:"behalf-company-button",trackingElement:"showBehalfOfInput",dataTestId:a,onChange:()=>{r(),S(!0)},children:(0,Dr.jsx)("span",{className:"text-truncate",children:u.translate("privacyScreen.donateAsOrganization.label")})}),(0,Dr.jsx)("div",{className:"shrink-0 icon-slot icon-slot-18 ms-2",children:(0,Dr.jsx)(Kc.S,{content:!s&&u.translate("privacyScreen.donateAsOrganization.input.tooltipLabel"),trigger:"click",className:h?"ui-tooltip-mobile":"ui-tooltip-desktop",placement:d?"left-start":"right-start",fallbackPlacements:ah,maxWidth:"220px",rootContainer:p,children:(0,Dr.jsx)("button",{type:"button",className:"btn-icon p-abs inset-centered text-gray-60 font-size-18",disabled:s,"aria-label":u.translate("privacyScreen.donateAsOrganization.input.helpAriaLabel"),"data-qa":"donate-as-organization-help-button",children:(0,Dr.jsx)(Rd.A,{className:(0,Rr.A)("icon-stroke d-block",{"icon-flip-horizontal":d}),"aria-hidden":!0})})})})]}),n.isActive&&(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsx)(yc,{size:8,sizeMin:4}),(0,Dr.jsx)(fu.t,{id:`on-behalf-${m}`,setRef:C,label:u.translate("privacyScreen.donateAsOrganization.input.label"),labelFloating:!0,autoFocus:n.isActive&&E,autoFocusMode:ql.Q.ALL,className:(0,Rr.A)({"pe-10":g}),formLabelClass:(0,Rr.A)({"pe-6":g}),formGroupClass:"shrink-0",placeholder:u.translate("privacyScreen.donateAsOrganization.input.placeholder"),value:null!==(l=n.companyName)&&void 0!==l?l:"",maxLength:Kd.ON_BEHALF_OF_MAX_LENGTH,autoComplete:"organization",disabled:s,error:g,"aria-required":!0,"aria-describedby":`on-behalf-${m}-error`,dataQa:"behalf-company-field",dataTestId:o,onChange:e=>c(e.target.value),onFocus:()=>A(!0),onBlur:()=>A(!1),children:g&&(0,Dr.jsx)(Eu.U,{className:"p-abs inset-centered-end z-index-5 me-4",showTooltip:v,children:(0,Dr.jsxs)("p",{id:`on-behalf-${m}-error`,children:[y&&u.translate("privacyScreen.donateAsOrganization.input.error.required"),!y&&f&&u.translate("privacyScreen.donateAsOrganization.input.error.minLength")]})})})]})]})},rh=(0,Ia.memo)(oh),ch=e=>{var t;const n=(0,Ur.P)(),i=(0,Qr.t)(),s=(0,El.Y)(),a=(0,Ia.useRef)(null);return(0,Gd.FM)(a,(e=>!e.validation.isAccepted.isValid)),(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsx)(lu,{setRef:a,className:e.className,checked:null!==(t=e.termsAndConditions.isAccepted)&&void 0!==t&&t,error:!e.validation.isAccepted.isValid,disabled:e.locked,"aria-required":!0,"aria-describedby":`terms-checkbox-${s}-error`,onChange:e.onToggle,dataQa:"accept-terms-checkbox",trackingElement:"termsChecked",dataTestId:e.dataTestId,children:(0,Dr.jsx)("span",{className:(0,Rr.A)({"text-line-clamp-2":!n}),dir:"auto","data-qa":"accept-terms-text",children:e.termsAndConditions.text?(0,Dr.jsx)("span",{dangerouslySetInnerHTML:{__html:e.termsAndConditions.text},"data-qa":"accept-terms-link"}):(0,Dr.jsx)(uc,{token:"privacyScreen.terms.label"})})}),e.validation.isAccepted.fields.isAccepted.errors.required&&(0,Dr.jsx)("p",{id:`terms-checkbox-${s}-error`,className:"sr-only",children:i.translate("privacyScreen.terms.error.required")})]})},lh=(0,Ia.memo)(ch),uh=(0,Ia.lazy)((()=>Promise.all([n.e(624),n.e(833)]).then(n.bind(n,5833)))),dh=()=>{const{controller:e,state:t}=vc(oc.PRIVACY),n=(0,Ur.P)(),i=(0,Qr.t)(),s=Cu(t.shakeKey,0!==t.shakeKey),a=t.onBehalfOf.isEnabled||t.showAnonymous||t.termsAndConditions.isEnabled||t.generalConsent.isEnabled,o=(0,Gd.pv)(),r=(0,Ia.useCallback)((t=>(0,c.sH)(void 0,void 0,void 0,(function*(){t.preventDefault(),yield e.leave(),o()}))),[e,o]),l=(0,Ia.useCallback)((t=>e.changeCustomerTitle(t)),[e]),u=(0,Ia.useCallback)((t=>e.changeFirstName(t)),[e]),d=(0,Ia.useCallback)((t=>e.changeLastName(t)),[e]),h=(0,Ia.useCallback)((t=>{e.clearEmailServerError(),e.changeEmail(t)}),[e]),m=(0,Ia.useCallback)((t=>e.changePhone(t)),[e]),p=(0,Ia.useCallback)((t=>e.changePlainPhone(t)),[e]),g=(0,Ia.useCallback)((t=>e.changeCountryCode(t)),[e]),y=(0,Ia.useCallback)((t=>e.changeCompanyName(t)),[e]),f=(0,Ia.useCallback)((()=>e.toggleOnBehalfOf()),[e]),E=(0,Ia.useCallback)((()=>e.toggleAnonymousChecked()),[e]),S=(0,Ia.useCallback)((t=>e.toggleGeneralConsentChecked(t)),[e]),v=(0,Ia.useCallback)((()=>e.toggleTermsAndConditionsAccepted()),[e]),A=(0,Ia.useCallback)((()=>e.setGeneralConsentShown()),[e]),C=Ic().get(be.FAST_TRACK_CHECKOUT_EXPERIMENT),P=e.isFastTrackExperimentEnabled(),N=P&&C.isTestGroup1,b=P&&C.isTestGroup2,D=P?N?i.translate("privacyScreen.titleFastTrackChoose"):i.translate("privacyScreen.titleFastTrackPersonal"):i.translate("privacyScreen.title"),T=(0,Ia.useCallback)((t=>e.chooseFastTrackPaymentOptionOrProceedToNextScreen(t)),[e]),_=(0,Ia.useCallback)((()=>{e.chooseFastTrackPaymentOptionOrProceedToNextScreen()}),[e]);return(0,Dr.jsxs)("form",{onSubmit:r,className:"flow-screen","data-qa":"active-screen-privacy","data-testid":"form",children:[(0,Dr.jsx)("div",{className:"sr-only",role:"status","aria-live":"polite","data-testid":"status",children:i.translate("common.screenAriaLabel",{screenTitle:D})}),(0,Dr.jsxs)(Kl,{children:[t.isApplePayAlertVisible&&n&&(0,Dr.jsx)("div",{className:"fixed-container mb-5",children:(0,Dr.jsxs)("div",{className:"py-2 px-3 border border-gray-20 bg-blue-10 border-radius-6 text-center",children:[(0,Dr.jsx)("p",{className:"subtitle-5 text-ellipsis",children:i.translate("privacyScreen.alert.title")}),(0,Dr.jsx)("p",{className:"body-3 text-ellipsis mt-0-5",children:i.translate("privacyScreen.alert.message")})]})}),(0,Dr.jsx)("h2",{className:(0,Rr.A)("title-2",n?"text-ellipsis":"text-line-clamp-2"),"data-testid":"title",children:D})]}),(0,Dr.jsxs)(Al,{className:(0,Rr.A)("px-body",{"pt-5":!n&&!P,"pt-8":!n&&P}),children:[(0,Dr.jsxs)("div",{className:"fixed-container shrink-0",children:[N&&(0,Dr.jsx)(wd,{availableOptions:t.availableFastTrackPaymentOptions,buttonOptions:t.fastTrackButtonOptions,disabled:t.locked,onChoosePaymentOption:T}),b&&(0,Dr.jsx)(hd,{availableOptions:t.availableFastTrackPaymentOptions,buttonOptions:t.fastTrackButtonOptions,disabled:t.locked,onClick:_}),P&&(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsx)(yc,{size:24}),(0,Dr.jsxs)("div",{className:"p-rel d-flex items-center justify-center","data-qa":"fast-track-or-label",children:[(0,Dr.jsx)("hr",{className:"p-abs centered-left w-100"}),(0,Dr.jsx)("p",{className:"body-3 shrink-0 p-rel max-w-100 text-truncate text-gray-70 bg-white px-2-5",children:N?i.translate("common.or"):i.translate("privacyScreen.description")})]}),(0,Dr.jsx)(yc,{size:24})]})]}),(0,Dr.jsxs)("div",{className:(0,Rr.A)("fixed-container grow-1 min-h-0 d-flex flex-column",{shake:s}),"aria-label":i.translate("privacyScreen.fieldsetAriaLabel"),children:[(0,Dr.jsxs)("div",{className:"group-stacked-vertical shrink-0",children:[(0,Dr.jsxs)("div",{className:"group-stacked-vertical group-stacked-item","data-testid":"privacy-personal-information-container",children:[(0,Dr.jsxs)("div",{className:(0,Rr.A)("group-stacked-item",{"group-stacked-horizontal":t.customerTitle.isEnabled}),children:[t.customerTitle.isEnabled&&(0,Dr.jsx)(Vd,{className:"group-stacked-item shrink-0",customerTitle:t.customerTitle,locked:t.locked,validation:t.validation,autoFocus:t.autoFocus.customerTitle,dataTestId:"privacy-customer-title-select",onChange:l}),(0,Dr.jsx)(Zd,{className:(0,Rr.A)({"group-stacked-item":t.customerTitle.isEnabled}),firstName:t.firstName,autoFocus:t.autoFocus.firstName,locked:t.locked,validation:t.validation,dataTestId:"privacy-first-name-input",onChange:u})]}),(0,Dr.jsx)(sh,{className:"group-stacked-item",lastName:t.lastName,locked:t.locked,validation:t.validation,dataTestId:"privacy-last-name-input",onChange:d})]}),(0,Dr.jsxs)("div",{className:(0,Rr.A)("group-stacked-item",{"group-stacked-vertical":t.showPhone}),children:[(0,Dr.jsx)($d,{className:(0,Rr.A)({"group-stacked-item":t.showPhone}),email:t.email,emailConsent:t.emailConsent,locked:t.locked,validation:t.validation,serverError:Boolean(t.serverErrors.email),dataTestId:"privacy-email-input",onChange:h}),t.showPhone&&(0,Dr.jsx)(Ia.Suspense,{fallback:(0,Dr.jsx)("span",{"data-testid":"privacy-phone-input-fallback"}),children:(0,Dr.jsx)(uh,{className:(0,Rr.A)({"group-stacked-item":t.showPhone}),phone:t.phone,phoneRequired:t.phoneRequired,userCountryCode:t.userCountryCode,showPhoneLegalText:t.showPhoneLegalText,phoneLegalText:t.phoneLegalText,locked:t.locked,validation:t.validation,isPhoneCountryCodeDisabled:t.isPhoneCountryCodeDisabled,dataTestId:"privacy-phone-input",onChange:m,onChangeCountryCode:g,onChangePlain:p})})]})]}),a&&(0,Dr.jsx)(yc,{size:16,sizeMin:8}),t.onBehalfOf.isEnabled&&(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsx)(rh,{className:"shrink-0",onBehalfOf:t.onBehalfOf,locked:t.locked,validation:t.validation,dataTestIdCheckbox:"privacy-on-behalf-on-checkbox",dataTestIdInput:"privacy-on-behalf-on-input",onToggleOnBehalfOf:f,onChangeCompanyName:y}),t.onBehalfOf.isActive?(0,Dr.jsx)(yc,{size:16,sizeMin:8}):(0,Dr.jsx)(yc,{size:8,sizeMin:4})]}),t.showAnonymous&&(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsx)(Ud,{className:"shrink-0",anonymousChecked:t.anonymousChecked,locked:t.locked,dataTestId:"privacy-anonymous-checkbox",onToggle:E}),(0,Dr.jsx)(yc,{size:8,sizeMin:4})]}),t.generalConsent.isEnabled&&(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsx)(th,{className:"shrink-0",generalConsent:t.generalConsent,locked:t.locked,dataTestId:"general-consent-checkbox",onToggle:S,onShowConsent:A}),(0,Dr.jsx)(yc,{size:8,sizeMin:4})]}),t.termsAndConditions.isEnabled&&(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsx)(lh,{className:"shrink-0",termsAndConditions:t.termsAndConditions,locked:t.locked,validation:t.validation,dataTestId:"privacy-terms-checkbox",onToggle:v}),(0,Dr.jsx)(yc,{size:16,sizeMin:8})]})]})]}),(0,Dr.jsx)(Ll,{children:(0,Dr.jsx)(qu,{type:"submit",className:"btn-primary",processingState:t.processingState,serverErrors:t.serverErrors,onClick:r,errorTitle:t.payErrorMessage||i.safeTranslate("common.errorOccurredText"),errorMessage:t.additionalPayErrorMessage,dataQa:"privacy-continue",trackingElement:t.isPaymentScreen?"payButton":"nextButton",dataTestId:"pay-button",children:t.isPaymentScreen?_u(i,t.donation.formattedAmount,t.donation.frequency):i.translate("privacyScreen.button")})})]})},hh=e=>{const{state:t}=vc(oc.PRIVACY);return(0,Dr.jsx)(Gd.rp,{state:{validation:t.validation,serverErrors:t.serverErrors},children:(0,Dr.jsx)(dh,Object.assign({},e))})};var mh=n(316),ph=n(8994);const gh=e=>{const[t,n]=(0,Ia.useState)(!1),[i,s]=(0,Ia.useState)(!1),[a,o]=(0,Ia.useState)(!1),[r,c]=(0,Ia.useState)(!1),l=(0,Ia.useRef)(null),u=t||i||a||r,d=(0,Ia.useCallback)((()=>{if(!l.current)return;const e=l.current.clientWidth<l.current.scrollWidth,t=l.current.clientHeight<l.current.scrollHeight,i=Math.ceil(l.current.offsetWidth+l.current.scrollLeft),a=Math.ceil(l.current.offsetHeight+l.current.scrollTop),r=0===l.current.scrollTop,u=i>=l.current.scrollWidth,d=a>=l.current.scrollHeight,h=0===l.current.scrollLeft;n(t&&!r),s(e&&!u),o(t&&!d),c(e&&!h)}),[l]);return(0,Ia.useEffect)((()=>{if(!l.current)throw new Error("ScrollContainerRef is undefined");const e=(t=d,new ResizeObserver((e=>e.map(t))));var t;return null==e||e.observe(l.current),()=>null==e?void 0:e.disconnect()}),[l,d]),(0,Dr.jsx)("div",{className:(0,Rr.A)({"scroll-wrap":u},e.className),children:(0,Dr.jsxs)("div",{ref:l,className:(0,Rr.A)("scroll-container custom-scrollbar",e.scrollContainerClass),onScroll:()=>{d()},children:[e.children,u&&(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsx)("span",{className:(0,Rr.A)("shadow-top",{"is-active":t})}),(0,Dr.jsx)("span",{className:(0,Rr.A)("shadow-right",{"is-active":i})}),(0,Dr.jsx)("span",{className:(0,Rr.A)("shadow-bottom",{"is-active":a})}),(0,Dr.jsx)("span",{className:(0,Rr.A)("shadow-left",{"is-active":r})})]})]})})},yh=(0,Ia.memo)(gh),fh=(0,Ia.createContext)(null);var Eh=n(6922);const Sh=e=>{let{id:t,className:n,question:i,questionText:s,answer:a,required:o,hasError:r,type:c,onChange:l}=e;const u=(0,Qr.t)(),d=(0,El.Y)(),h=(0,Ia.useCallback)((()=>{l(!a)}),[l,a]),m=(0,Ia.useRef)(null);return(0,Eh.FM)(m,(e=>!!e[t])),(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsxs)(lu,{setRef:m,className:n,checked:!!a,error:r,onChange:h,dataQa:"question-"+c,"aria-required":o,"aria-describedby":`question-${c}-${d}-error`,"data-testid":"question-checkbox-single",children:[(0,Dr.jsx)("span",{dangerouslySetInnerHTML:{__html:i},dir:"auto"}),!o&&(0,Dr.jsxs)("span",{className:"text-gray-60",children:[" (",u.translate("common.optional"),")"]})]}),r&&(0,Dr.jsx)("p",{id:`question-${c}-${d}-error`,className:"sr-only",children:u.translate("questionsScreen.error.required",{question:s})})]})},vh=(0,Ia.memo)(Sh),Ah=e=>{let{question:t,required:n}=e;const i=(0,El.Y)(),s=(0,Qr.t)();return(0,Dr.jsx)(fu.t,{id:`date-${i}`,type:"text",label:(0,Dr.jsx)("span",{className:"text-break-word",dir:"auto",dangerouslySetInnerHTML:{__html:t}}),labelOptional:n?"":s.translate("common.optional"),dataTestId:"question-date",dataQa:"question-date-fallback"})},Ch={marginBottom:"13px"},Ph=e=>{let{id:t,className:n,question:i,questionText:s,answer:a,options:o,required:r,hasError:c,type:l,onChange:u}=e;const d=(0,Qr.t)(),h=Yl(),[m,p]=(0,Ia.useState)(!1),g=(0,Ia.useCallback)((e=>{u(e.target.value)}),[u]),y=o.map((e=>({value:e,label:e}))),f=(0,Ia.useRef)(null);return(0,Eh.FM)(f,(e=>!!e[t])),(0,Dr.jsx)(Bd,{setRef:f,id:`dropdown-${h}`,label:(0,Dr.jsx)("span",{className:"text-break-word",dir:"auto",dangerouslySetInnerHTML:{__html:i}}),labelOptional:r?"":d.translate("common.optional"),options:y,className:(0,Rr.A)({"pe-16":c}),formLabelClass:(0,Rr.A)({"pe-12":c}),formGroupClass:n,error:c,value:a||"","aria-required":r,"aria-describedby":`question-${l}-${h}-error`,onChange:g,onFocus:()=>p(!0),onBlur:()=>p(!1),dataQa:"question-"+l,dataTestId:"question-dropdown",children:c&&(0,Dr.jsx)(Eu.U,{className:"p-abs inset-bottom-end z-index-5 me-10",style:Ch,showTooltip:m,children:(0,Dr.jsx)("p",{id:`question-${l}-${h}-error`,children:d.translate("questionsScreen.error.required",{question:s})})})})},Nh=(0,Ia.memo)(Ph),bh={marginTop:"13px"},Dh=e=>{let{id:t,className:n,question:i,questionText:s,answer:a,required:o,hasError:r,type:c,onChange:l}=e;const u=(0,Qr.t)(),d=Yl(),[h,m]=(0,Ia.useState)(!1),p=(0,Ia.useRef)(null);return(0,Eh.FM)(p,(e=>!!e[t])),(0,Dr.jsxs)("div",{className:n,children:[(0,Dr.jsxs)("label",{htmlFor:`multiline-${d}`,className:"label-3 max-w-100","data-qa":"question-"+c+"-label",children:[(0,Dr.jsx)("span",{className:"text-break-word",dir:"auto",dangerouslySetInnerHTML:{__html:i}}),!o&&(0,Dr.jsxs)("span",{className:"text-gray-60",children:[" (",u.translate("common.optional"),")"]})]}),(0,Dr.jsxs)("div",{className:"p-rel",children:[(0,Dr.jsx)("textarea",{ref:p,id:`multiline-${d}`,className:(0,Rr.A)("form-control mt-3",{"has-error":r}),rows:7,value:a||"",maxLength:yu.ANSWER_MAX_LENGTH,"aria-required":o,"aria-describedby":`question-${c}-${d}-error`,onChange:e=>{l(e.target.value)},onFocus:()=>m(!0),onBlur:()=>m(!1),"data-qa":"question-"+c,"data-testid":"question-multiline"}),r&&(0,Dr.jsx)(Eu.U,{className:"p-abs inset-top-end z-index-5 me-4",style:bh,showTooltip:h,dataQa:"question-multiline",children:(0,Dr.jsx)("p",{id:`question-${c}-${d}-error`,children:u.translate("questionsScreen.error.required",{question:s})})})]})]})},Th=(0,Ia.memo)(Dh),_h=e=>{var t,{children:n,setRef:i,innerRef:s,className:a,customLabelClasses:o,checkedValues:r,checkboxValue:l,disabled:u,error:d,hint:h,dataQa:m,onChange:p}=e,g=(0,c.Tt)(e,["children","setRef","innerRef","className","customLabelClasses","checkedValues","checkboxValue","disabled","error","hint","dataQa","onChange"]);const y=null!==(t=null==r?void 0:r.includes(l))&&void 0!==t&&t,f=(0,Ia.useCallback)((()=>{if(u)return;const e=!y,t=null!==r?new Set([...r]):new Set;e?t.add(l):t.delete(l),p([...t])}),[p,y,u,r,l]);return(0,Dr.jsx)(lu,Object.assign({setRef:i,innerRef:s,className:a,customLabelClasses:o,checkboxValue:l,checked:y,disabled:u,error:d,hint:h,onChange:f,dataQa:m},g,{children:n}))},kh=e=>{let{id:t,className:n,question:i,questionText:s,answer:a,options:o,required:r,hasError:c,type:l,onChange:u}=e;const d=(0,Qr.t)(),h=Yl(),m=(0,Ia.useCallback)((e=>{u(e)}),[u]),p=(0,Ia.useRef)(null);return(0,Eh.FM)(p,(e=>!!e[t])),(0,Dr.jsxs)("div",{className:n,role:"group","aria-labelledby":`checkbox-group-${h}`,"data-testid":"question-multioption",children:[(0,Dr.jsxs)("p",{id:`checkbox-group-${h}`,className:"label-3",children:[(0,Dr.jsx)("span",{className:"text-break-word",dir:"auto",dangerouslySetInnerHTML:{__html:i}}),!r&&(0,Dr.jsxs)("span",{className:"text-gray-60",children:[" (",d.translate("common.optional"),")"]})]}),o.map(((e,t)=>{const n=0===t;return(0,Dr.jsx)(_h,{setRef:n?p:void 0,className:t?"mt-2":"mt-3",checkedValues:a,checkboxValue:e,error:c,"aria-required":r,"aria-describedby":`question-${l}-${h}-error`,onChange:m,dataQa:"question-"+l,children:e},`${e}-${t}`)})),c&&(0,Dr.jsx)("p",{id:`question-${l}-${h}-error`,className:"sr-only",children:d.translate("questionsScreen.error.required",{question:s})})]})},Oh=(0,Ia.memo)(kh),Ih={marginBottom:"13px"},xh=e=>{let{id:t,className:n,question:i,questionText:s,answer:a,required:o,hasError:r,type:c,onChange:l}=e;const u=(0,Qr.t)(),d=Yl(),[h,m]=(0,Ia.useState)(!1),p=(0,Ia.useRef)(null);return(0,Eh.FM)(p,(e=>!!e[t])),(0,Dr.jsx)(fu.t,{id:`oneline-${d}`,setRef:p,error:r,className:(0,Rr.A)({"pe-10":r}),formGroupClass:n,label:(0,Dr.jsx)("span",{className:"text-break-word",dir:"auto",dangerouslySetInnerHTML:{__html:i}}),labelOptional:o?"":u.translate("common.optional"),value:a||"",maxLength:yu.ANSWER_MAX_LENGTH,"aria-required":o,"aria-describedby":`question-${c}-${d}-error`,onChange:e=>{l(e.target.value)},onFocus:()=>m(!0),onBlur:()=>m(!1),dataQa:"question-"+c,"data-testid":"question-oneline",children:r&&(0,Dr.jsx)(Eu.U,{className:"p-abs inset-bottom-end z-index-5 me-4",style:Ih,showTooltip:h,children:(0,Dr.jsx)("p",{id:`question-${c}-${d}-error`,children:u.translate("questionsScreen.error.required",{question:s})})})})},wh=(0,Ia.memo)(xh),Rh=e=>{var{setRef:t,children:n,className:i,customLabelClasses:s,customInputClasses:a,labelTruncated:o=!0,disabled:r,radioName:l,radioValue:u,checked:d,error:h,hint:m,dataQa:p,trackingElement:g,onChange:y,onClick:f}=e,E=(0,c.Tt)(e,["setRef","children","className","customLabelClasses","customInputClasses","labelTruncated","disabled","radioName","radioValue","checked","error","hint","dataQa","trackingElement","onChange","onClick"]);const S=(0,Ia.useRef)(null);return(0,Ia.useImperativeHandle)(t,(()=>S.current),[]),(0,Dr.jsxs)("div",{className:(0,mc.A)("ui-radio",{"ui-radio-disabled":r},i),children:[(0,Dr.jsxs)("label",{className:(0,mc.A)(["ui-radio-label",s]),"data-qa":p+"-label",children:[(0,Dr.jsxs)("span",{className:"ui-radio-control",children:[(0,Dr.jsx)("input",Object.assign({type:"radio",ref:S,className:(0,mc.A)("ui-radio-input",{"has-error":h},a),name:l,value:u,checked:d,disabled:r,"aria-invalid":h,"data-qa":p,"data-tracking-element-name":g,onChange:()=>{r||y(u)},onClick:()=>{f&&f()}},E)),(0,Dr.jsx)("span",{className:"ui-radio-icon"})]}),n&&(0,Dr.jsx)("span",{className:(0,mc.A)("ui-radio-text",{"ui-radio-text-ellipsis":o}),children:n})]}),m&&(0,Dr.jsx)("div",{className:"ui-radio-hint",children:m})]})},Mh=e=>{let{className:t,id:n,question:i,questionText:s,answer:a,options:o,required:r,hasError:c,type:l,onChange:u}=e;const d=(0,Qr.t)(),h=(0,El.Y)(),m=(0,Ia.useRef)(null);return(0,Eh.FM)(m,(e=>!!e[n])),(0,Dr.jsxs)("div",{className:t,role:"radiogroup","aria-labelledby":`radio-group-${h}`,"data-testid":"question-radio",children:[(0,Dr.jsxs)("p",{id:`radio-group-${h}`,className:"label-3",children:[(0,Dr.jsx)("span",{className:"text-break-word",dir:"auto",dangerouslySetInnerHTML:{__html:i}}),!r&&(0,Dr.jsxs)("span",{className:"text-gray-60",children:[" (",d.translate("common.optional"),")"]})]}),o.map(((e,t)=>{const i=0===t;return(0,Dr.jsx)(Rh,{setRef:i?m:void 0,className:t?"mt-2":"mt-3",checked:e===a,radioValue:e,radioName:n,error:c,"aria-required":r,"aria-describedby":`question-${l}-${h}-error`,onChange:u,dataQa:"question-"+l,children:e},`${e}-${t}`)})),c&&(0,Dr.jsx)("p",{id:`question-${l}-${h}-error`,className:"sr-only",children:d.translate("questionsScreen.error.required",{question:s})})]})},Lh=(0,Ia.memo)(Mh),Uh=(0,Ia.lazy)((()=>Promise.all([n.e(806),n.e(672)]).then(n.bind(n,5672)))),Fh=e=>{const{controller:t}=vc(oc.QUESTIONS),n=Ir(),i=(0,Ia.useCallback)((n=>{t.answerQuestion(e.id,n)}),[t,e.id]),s=Cu(e.shakeKey,e.hasError),a=(0,Ia.useMemo)((()=>Xl(e.question)),[e.question]);return Object.values($l).includes(e.type)?(0,Dr.jsxs)("div",{className:"py-3",children:[Ql(e)&&(0,Dr.jsx)(vh,{id:e.id,answer:e.answer,options:e.options,question:e.question,questionText:a,required:e.required,hasError:e.hasError,onChange:i,className:(0,Rr.A)({shake:s}),type:e.type}),Zl(e)&&(0,Dr.jsx)(Nh,{id:e.id,answer:e.answer,options:e.options,question:e.question,questionText:a,required:e.required,hasError:e.hasError,onChange:i,className:(0,Rr.A)({shake:s}),type:e.type}),Jl(e)&&(0,Dr.jsx)(Th,{id:e.id,answer:e.answer,options:e.options,question:e.question,questionText:a,required:e.required,hasError:e.hasError,onChange:i,className:(0,Rr.A)({shake:s}),type:e.type}),nu(e)&&(0,Dr.jsx)(Oh,{id:e.id,answer:e.answer,options:e.options,question:e.question,questionText:a,required:e.required,hasError:e.hasError,onChange:i,className:(0,Rr.A)({shake:s}),type:e.type}),tu(e)&&(0,Dr.jsx)(wh,{id:e.id,answer:e.answer,options:e.options,question:e.question,questionText:a,required:e.required,hasError:e.hasError,onChange:i,className:(0,Rr.A)({shake:s}),type:e.type}),eu(e)&&(0,Dr.jsx)(Lh,{id:e.id,answer:e.answer,options:e.options,question:e.question,questionText:a,required:e.required,hasError:e.hasError,onChange:i,className:(0,Rr.A)({shake:s}),type:e.type}),iu(e)&&(0,Dr.jsx)(Ia.Suspense,{fallback:(0,Dr.jsx)(Ah,{question:e.question,required:e.required}),children:(0,Dr.jsx)(Uh,{id:e.id,answer:e.answer,question:e.question,questionText:a,required:e.required,hasError:e.hasError,onChange:i,className:(0,Rr.A)({shake:s}),type:e.type})})]}):(n.captureException(new Error(`Unknown type of question: "${e.type}"`)),null)},jh=(0,Ia.memo)(Fh),Bh={borderTop:"0"},Gh=()=>{const{state:e,controller:t}=vc(oc.QUESTIONS),n=(0,Qr.t)(),i=(0,Ia.useRef)(null),s=(0,Ia.useRef)(null),a=(0,Ur.P)(),o=Gr(),[r,c]=(0,Ia.useState)("next"),l=(0,Eh.pv)(),u=(0,Ia.useContext)(fh)||null,{showProgressBar:d}=xc(),h=(0,Ia.useCallback)((e=>{e.preventDefault(),(0,mh.flushSync)((()=>{c("next")})),t.leave(),l()}),[t,l]),m=(0,Ia.useCallback)((()=>{(0,mh.flushSync)((()=>{c("previous")})),t.back()}),[t]),p=(0,Ia.useMemo)((()=>e.isMeasuring?e.questions:e.questions.filter((t=>{let{page:n}=t;return n===e.page}))),[e.isMeasuring,e.page,e.questions]);(0,Ia.useEffect)((()=>{if(!e.isMeasuring)return;if(!i.current)throw new Error("bodyRef was not provided");if(!s.current)throw new Error("questionsContainerRef was not provided");const n=[].slice.call(s.current.children),o=i.current.getBoundingClientRect(),r=a||u?455:o.height-20;setTimeout((()=>{var e;const i=t.completeMeasurement(function(e){const{height:t,children:n}=e,i=new Map;let s=1,a=0;return n.map((e=>e.offsetHeight)).forEach(((e,n)=>{a+e>t&&n>0&&(s+=1,a=0),a+=e,i.set(n,s)})),i}({height:r,children:n}));u&&(null===(e=u.updateQuestionsScreenPageCount)||void 0===e||e.call(u,i))}))}),[e.isMeasuring,a,t,s,u]);const g=(0,Ia.useCallback)((e=>Ia.cloneElement(e,{classNames:`rtg-${r}`})),[r]),y={minHeight:a?"200px":void 0};return(0,Dr.jsxs)("form",{onSubmit:h,className:"flow-screen","data-testid":"questions-form",children:[(0,Dr.jsx)("div",{className:"sr-only",role:"status","aria-live":"polite",children:n.translate("common.screenAriaLabel",{screenTitle:`${n.translate("questionsScreen.title")}`})}),(0,Dr.jsx)(Kl,{backButtonClickHandler:m,forceShowBackButton:t.showBackButton.header,title:n.translate("questionsScreen.title")}),(0,Dr.jsx)(Al,{ref:i,children:(0,Dr.jsx)(ph.A,{childFactory:g,children:(()=>{const t=(0,Ia.createRef)();return(0,Dr.jsx)(Mr.A,{classNames:`rtg-${r}`,nodeRef:t,addEndListener:e=>{Wr(t,e)},mountOnEnter:!0,unmountOnExit:!0,children:(0,Dr.jsx)("div",{ref:t,className:o("flow-slide"),style:Bh,children:(0,Dr.jsx)(yh,{className:(0,Rr.A)(a?"grow-1":"h-100"),scrollContainerClass:(0,Rr.A)("px-body",a?"my-minus-3":"h-100",{"pt-8":!a}),children:(0,Dr.jsx)("div",{ref:s,className:(0,Rr.A)("fixed-container",{"opacity-0":e.isMeasuring,"my-minus-3":!a}),style:y,children:p.map(((t,n)=>(0,Dr.jsx)(jh,{id:t.key,type:t.type,answer:t.answer,options:t.options,question:t.question,required:t.required,hasError:!!e.questionErrors[t.key],shakeKey:e.shakeKey},t.key)))})})})},a||e.isShowcase||d?null:e.page)})()})}),(0,Dr.jsx)(Ll,{className:(0,Rr.A)({"pt-7":!a}),backButtonClickHandler:m,forceShowBackButton:t.showBackButton.footer,children:(0,Dr.jsx)(qu,{type:"submit",className:"btn-primary",processingState:Kr.IDLE,dataQa:"questions-button",trackingElement:"nextButton",children:n.translate("questionsScreen.button")})})]})},qh=(0,Ia.memo)(Gh),Hh=()=>{const{state:e}=vc(oc.QUESTIONS);return(0,Dr.jsx)(Eh.rp,{state:e.questionErrors,children:(0,Dr.jsx)(qh,{})})},Vh=e=>{var t,n;const i=(0,Ia.useId)();return(0,Dr.jsxs)("svg",{className:e.className,"aria-hidden":e.ariaHidden&&!0,fill:"none",height:null!==(t=e.height)&&void 0!==t?t:80,viewBox:"0 0 80 80",width:null!==(n=e.width)&&void 0!==n?n:80,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[(0,Dr.jsxs)("filter",{id:`a-${i}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"61.5195",width:"68.5254",x:"6",y:"8.5",children:[(0,Dr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Dr.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Dr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Dr.jsx)("feOffset",{}),(0,Dr.jsx)("feGaussianBlur",{stdDeviation:"2.8107"}),(0,Dr.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Dr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.7875 0 0 0 0 0.85975 0 0 0 0 1 0 0 0 0.24 0"}),(0,Dr.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_248_1821"})]}),(0,Dr.jsxs)("filter",{id:`b-${i}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"65.9294",width:"70.8122",x:"5.14271",y:"7.91224",children:[(0,Dr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Dr.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Dr.jsx)("feGaussianBlur",{result:"effect1_foregroundBlur_248_1821",stdDeviation:"2.747"})]}),(0,Dr.jsxs)("filter",{id:`c-${i}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"24.9624",width:"28.6284",x:"9.07347",y:"9.62816",children:[(0,Dr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Dr.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Dr.jsx)("feGaussianBlur",{result:"effect1_foregroundBlur_248_1821",stdDeviation:"2.44178"})]}),(0,Dr.jsxs)("filter",{id:`d-${i}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"43.3417",width:"56.1601",x:"12.4698",y:"31.1026",children:[(0,Dr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Dr.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Dr.jsx)("feGaussianBlur",{result:"effect1_foregroundBlur_248_1821",stdDeviation:"3.05223"})]}),(0,Dr.jsxs)("radialGradient",{id:`e-${i}`,cx:"0",cy:"0",gradientTransform:"matrix(24.7229859 44.86886612 -67.71805502 37.31301155 21.6271 25.9168)",gradientUnits:"userSpaceOnUse",r:"1",children:[(0,Dr.jsx)("stop",{offset:"0",stopColor:"#ff4747"}),(0,Dr.jsx)("stop",{offset:".621322",stopColor:"#e60202"}),(0,Dr.jsx)("stop",{offset:".962109",stopColor:"#ff4040"})]}),(0,Dr.jsxs)("linearGradient",{id:`f-${i}`,gradientUnits:"userSpaceOnUse",x1:"15.9153",x2:"33.2743",y1:"13.4062",y2:"50.0842",children:[(0,Dr.jsx)("stop",{offset:"0",stopColor:"#ffaeae"}),(0,Dr.jsx)("stop",{offset:"1",stopColor:"#ff4040",stopOpacity:"0"})]}),(0,Dr.jsxs)("radialGradient",{id:`g-${i}`,cx:"0",cy:"0",gradientTransform:"matrix(19.40170475 9.13574724 -3.49178952 7.41555864 24.9016 22.4695)",gradientUnits:"userSpaceOnUse",r:"1",children:[(0,Dr.jsx)("stop",{offset:"0",stopColor:"#fff"}),(0,Dr.jsx)("stop",{offset:"1",stopColor:"#fff",stopOpacity:"0"})]}),(0,Dr.jsxs)("linearGradient",{id:`h-${i}`,gradientUnits:"userSpaceOnUse",x1:"51.5894",x2:"42.6758",y1:"66.766",y2:"15.4326",children:[(0,Dr.jsx)("stop",{offset:"0",stopColor:"#ff5252"}),(0,Dr.jsx)("stop",{offset:".518422",stopColor:"#e60202"}),(0,Dr.jsx)("stop",{offset:"1",stopColor:"#ff5252",stopOpacity:"0"})]}),(0,Dr.jsx)("g",{filter:`url(#a-${i})`,children:(0,Dr.jsx)("path",{d:"m37.3622 69.2005c1.7421 1.0931 4.0584 1.0931 5.8005 0 59.2853-37.1981 20.5641-78.53995-2.9003-52.5752-23.4643-25.96504-62.1856 15.3768-2.9002 52.5752z",fill:`url(#e-${i})`})}),(0,Dr.jsx)("g",{filter:`url(#b-${i})`,children:(0,Dr.jsx)("path",{d:"m40.5485 68.3463c55.3668-33.1004 20.8103-70.99196 0-47.7941-20.8103-23.19812-55.3667 14.6935 0 47.7941z",fill:`url(#f-${i})`})}),(0,Dr.jsx)("g",{filter:`url(#c-${i})`,opacity:".5",children:(0,Dr.jsx)("path",{d:"m32.5907 20.1894c.2684-.3893.3123-.8798.062-1.281-1.6815-2.6952-8.0251-6.4401-11.3305-3.0477-.0606.0622-.1255.124-.1925.1793-3.3897 2.7972-5.3696 6.1192-7.025 9.935-.508 1.1709.3605 2.4626 1.6329 2.5621 2.3377.1828 4.6623.5588 6.9308 1.1238.1549.0386.3148.064.4702.0275 2.1821-.5125 7.8492-7.1733 9.4521-9.499z",fill:`url(#g-${i})`,fillOpacity:".5"})}),(0,Dr.jsx)("g",{filter:`url(#d-${i})`,opacity:".6",children:(0,Dr.jsx)("path",{d:"m40.5502 68.3397c35.3589-20.8074 20.799-36.5915 6.3451-29.345-3.8981 1.9543-8.792 1.9543-12.6901 0-14.4539-7.2467-29.01388 8.5374 6.345 29.345z",fill:`url(#h-${i})`})})]})},Kh=(0,Ia.memo)(Vh),Yh=e=>{let{className:t,transitionEntered:n}=e;return(0,Dr.jsx)("div",{className:(0,Rr.A)("beating-heart",t),"aria-hidden":!0,"data-qa":"beating-heart-icon",children:(0,Dr.jsx)(Kh,{className:(0,Rr.A)({"beating-heart-beat":n})})})},zh=(0,Ia.memo)(Yh);var Wh,$h,Xh,Qh,Zh,Jh,em,tm,nm,im,sm,am,om,rm,cm;function lm(){return lm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},lm.apply(null,arguments)}var um,dm,hm=function(e,t){return Ia.createElement("svg",lm({width:80,height:80,viewBox:"0 0 80 80",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),Ia.createElement("mask",{id:"mask0_248_1829",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:7,y:9,width:66,height:68},Wh||(Wh=Ia.createElement("path",{d:"M38.054 9.94859L10.5577 24.2155C8.42711 25.321 7.08984 27.5215 7.08984 29.9218V58.3464C7.08984 60.4571 8.2768 62.3885 10.1599 63.3419L34.0584 75.4414C37.8326 77.3523 42.2917 77.3494 46.0635 75.4338L69.8685 63.3436C71.7481 62.3889 72.9322 60.4595 72.9322 58.3513V29.9161C72.9322 27.5188 71.5982 25.3206 69.4717 24.2137L42.0704 9.95118C40.812 9.29615 39.3133 9.29518 38.054 9.94859Z",fill:"url(#paint0_linear_248_1829)"}))),Ia.createElement("g",{mask:"url(#mask0_248_1829)"},$h||($h=Ia.createElement("path",{d:"M38.054 9.94859L10.5577 24.2155C8.42711 25.321 7.08984 27.5215 7.08984 29.9218V58.3464C7.08984 60.4571 8.2768 62.3885 10.1599 63.3419L34.0584 75.4414C37.8326 77.3523 42.2917 77.3494 46.0635 75.4338L69.8685 63.3436C71.7481 62.3889 72.9322 60.4595 72.9322 58.3513V29.9161C72.9322 27.5188 71.5982 25.3206 69.4717 24.2137L42.0704 9.95118C40.812 9.29615 39.3133 9.29518 38.054 9.94859Z",fill:"url(#paint1_linear_248_1829)"})),Xh||(Xh=Ia.createElement("g",{filter:"url(#filter0_f_248_1829)"},Ia.createElement("path",{d:"M38.054 9.94859L10.5577 24.2155C8.42711 25.321 7.08984 27.5215 7.08984 29.9218V58.3464C7.08984 60.4571 8.2768 62.3885 10.1599 63.3419L34.0584 75.4414C37.8326 77.3523 42.2917 77.3494 46.0635 75.4338L69.8685 63.3436C71.7481 62.3889 72.9322 60.4595 72.9322 58.3513V29.9161C72.9322 27.5188 71.5982 25.3206 69.4717 24.2137L42.0704 9.95118C40.8119 9.29615 39.3133 9.29518 38.054 9.94859Z",fill:"url(#paint2_linear_248_1829)"}),Ia.createElement("path",{d:"M38.054 9.94859L10.5577 24.2155C8.42711 25.321 7.08984 27.5215 7.08984 29.9218V58.3464C7.08984 60.4571 8.2768 62.3885 10.1599 63.3419L34.0584 75.4414C37.8326 77.3523 42.2917 77.3494 46.0635 75.4338L69.8685 63.3436C71.7481 62.3889 72.9322 60.4595 72.9322 58.3513V29.9161C72.9322 27.5188 71.5982 25.3206 69.4717 24.2137L42.0704 9.95118C40.8119 9.29615 39.3133 9.29518 38.054 9.94859Z",fill:"url(#paint3_linear_248_1829)"}))),Ia.createElement("g",{filter:"url(#filter1_f_248_1829)"},Ia.createElement("path",{d:"M73.0352 61.8106L42.5507 77.3392V44.1341L73.0352 28.6055V61.8106Z",fill:"url(#paint4_linear_248_1829)",style:{mixBlendMode:"lighten"}})),Ia.createElement("g",{filter:"url(#filter2_f_248_1829)"},Ia.createElement("path",{d:"M7.91992 60.74L39.0266 76.09V43.9661L7.91992 29.2305V60.74Z",fill:"url(#paint5_linear_248_1829)",style:{mixBlendMode:"color"}})),Qh||(Qh=Ia.createElement("path",{d:"M61.9336 64.584C61.9336 64.5975 61.937 67.2722 60.9639 67.8662L59.5068 68.6084C56.9117 69.9199 51.6758 72.5684 51.6758 72.5684C51.6758 72.5684 52.7119 71.9785 52.7119 68.835V36.2041L61.9336 31.5078V64.584Z",fill:"url(#paint6_linear_248_1829)"})),Ia.createElement("path",{d:"M61.9336 64.584C61.9336 64.5975 61.937 67.2722 60.9639 67.8662L59.5068 68.6084C56.9117 69.9199 51.6758 72.5684 51.6758 72.5684C51.6758 72.5684 52.7119 71.9785 52.7119 68.835V36.2041L61.9336 31.5078V64.584Z",fill:"url(#paint7_linear_248_1829)",fillOpacity:.15,style:{mixBlendMode:"plus-darker"}}),Ia.createElement("path",{d:"M17.873 64.584C17.873 64.5975 17.8696 67.2722 18.8428 67.8662L20.2998 68.6084C22.8949 69.9199 28.1309 72.5684 28.1309 72.5684C28.1309 72.5684 27.0947 71.9785 27.0947 68.835V36.2041L17.873 31.5078V64.584Z",fill:"url(#paint8_linear_248_1829)",fillOpacity:.15,style:{mixBlendMode:"plus-darker"}}),Zh||(Zh=Ia.createElement("path",{d:"M17.873 64.584C17.873 64.5975 17.8696 67.2722 18.8428 67.8662L20.2998 68.6084C22.8949 69.9199 28.1309 72.5684 28.1309 72.5684C28.1309 72.5684 27.0947 71.9785 27.0947 68.835V36.2041L17.873 31.5078V64.584Z",fill:"url(#paint9_linear_248_1829)"}))),Jh||(Jh=Ia.createElement("g",{filter:"url(#filter3_d_248_1829)"},Ia.createElement("path",{d:"M5.43164 26.5733V31.8164C5.43164 32.5867 5.85863 33.2936 6.54048 33.652L33.577 47.8646C37.4433 49.897 42.062 49.897 45.9282 47.8646L72.9648 33.652C73.6466 33.2936 74.0736 32.5867 74.0736 31.8164V26.5733C74.0736 24.1907 72.7559 22.0036 70.6497 20.89L41.7881 5.63085C40.5146 4.95756 38.9906 4.95756 37.7171 5.63085L8.85559 20.89C6.74931 22.0036 5.43164 24.1907 5.43164 26.5733Z",fill:"url(#paint10_linear_248_1829)"}))),em||(em=Ia.createElement("g",{filter:"url(#filter4_f_248_1829)"},Ia.createElement("path",{d:"M40.3035 43.2293L73.2085 26.113C73.2336 24.0394 72.9206 22.8266 70.9633 21.766L37.1408 38.9395C39.6292 38.9696 40.3161 42.1925 40.3035 43.2293Z",fill:"url(#paint11_linear_248_1829)",fillOpacity:.4}))),tm||(tm=Ia.createElement("g",{filter:"url(#filter5_f_248_1829)"},Ia.createElement("path",{d:"M40.2275 43.0775L6.71099 27.192C6.6091 25.1207 6.87692 23.8972 8.79362 22.7648L43.2291 38.6734C40.7435 38.7957 40.1765 42.0418 40.2275 43.0775Z",fill:"url(#paint12_linear_248_1829)"}))),nm||(nm=Ia.createElement("g",{filter:"url(#filter6_f_248_1829)"},Ia.createElement("path",{d:"M48.1504 45.8221L46.4952 46.7548C42.4911 49.0113 37.6046 49.0355 33.5783 46.8189L31.7676 45.8221L32.3897 36.5938L34.3026 37.4994C37.939 39.2212 42.1602 39.2004 45.7795 37.4429L47.5283 36.5938L48.1504 45.8221Z",fill:"url(#paint13_linear_248_1829)",fillOpacity:.7}))),Ia.createElement("mask",{id:"mask1_248_1829",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:5,y:5,width:70,height:45},im||(im=Ia.createElement("path",{d:"M5.43164 26.5733V31.8164C5.43164 32.5867 5.85863 33.2936 6.54048 33.652L33.577 47.8646C37.4433 49.897 42.062 49.897 45.9282 47.8646L72.9648 33.652C73.6466 33.2936 74.0736 32.5867 74.0736 31.8164V26.5733C74.0736 24.1907 72.7559 22.0036 70.6497 20.89L41.7881 5.63085C40.5146 4.95756 38.9906 4.95756 37.7171 5.63085L8.85559 20.89C6.74931 22.0036 5.43164 24.1907 5.43164 26.5733Z",fill:"url(#paint14_linear_248_1829)"}))),Ia.createElement("g",{mask:"url(#mask1_248_1829)"},Ia.createElement("g",{filter:"url(#filter7_f_248_1829)"},Ia.createElement("path",{d:"M40.517 5.62525C40.2199 5.47305 39.8678 5.47313 39.5708 5.62549L9.71807 20.941C8.96665 21.3265 8.96663 22.4006 9.71804 22.7861L39.5901 38.113C39.8872 38.2654 40.2396 38.2654 40.5368 38.113L70.4078 22.7867C71.1594 22.401 71.1591 21.3266 70.4073 20.9414L40.517 5.62525Z",fill:"url(#paint15_linear_248_1829)",style:{mixBlendMode:"color"}}))),sm||(sm=Ia.createElement("path",{d:"M46.3498 21.0605C49.3832 22.6276 52.3521 24.1672 54.8908 25.5C59.0383 27.6774 63.1856 28.7148 63.1857 34.7285C63.1857 36.8021 63.3935 38.5649 62.1496 39.3945C61.6519 39.7264 52.8496 44.2324 52.8381 44.2383C52.8421 44.2362 53.9571 43.6726 53.9572 40.5352C53.9572 36.5956 53.6024 34.1835 50.8469 32.6553C47.5117 30.8055 43.6158 28.7214 39.7063 26.6641C35.7972 28.7211 31.9013 30.8048 28.5666 32.6543C25.8114 34.1826 25.4563 36.5948 25.4563 40.5342C25.4563 43.6774 26.6652 44.2383 26.6652 44.2383C26.6652 44.2383 17.7629 39.7256 17.2648 39.3936C16.0208 38.564 16.2277 36.8012 16.2277 34.7275C16.2279 28.7142 20.3754 27.6772 24.5227 25.5C26.4794 24.4727 28.6882 23.3185 30.9816 22.1211C30.8981 22.078 30.8148 22.035 30.7316 21.9922L38.801 18.0449C39.7258 17.5637 40.634 17.0909 41.5148 16.6328L46.3498 21.0605Z",fill:"url(#paint16_linear_248_1829)"})),Ia.createElement("path",{d:"M46.3498 21.0605C49.3832 22.6276 52.3521 24.1672 54.8908 25.5C59.0383 27.6774 63.1856 28.7148 63.1857 34.7285C63.1857 36.8021 63.3935 38.5649 62.1496 39.3945C61.6519 39.7264 52.8496 44.2324 52.8381 44.2383C52.8421 44.2362 53.9571 43.6726 53.9572 40.5352C53.9572 36.5956 53.6024 34.1835 50.8469 32.6553C47.5117 30.8055 43.6158 28.7214 39.7063 26.6641C35.7972 28.7211 31.9013 30.8048 28.5666 32.6543C25.8114 34.1826 25.4563 36.5948 25.4563 40.5342C25.4563 43.6774 26.6652 44.2383 26.6652 44.2383C26.6652 44.2383 17.7629 39.7256 17.2648 39.3936C16.0208 38.564 16.2277 36.8012 16.2277 34.7275C16.2279 28.7142 20.3754 27.6772 24.5227 25.5C26.4794 24.4727 28.6882 23.3185 30.9816 22.1211C30.8981 22.078 30.8148 22.035 30.7316 21.9922L38.801 18.0449C39.7258 17.5637 40.634 17.0909 41.5148 16.6328L46.3498 21.0605Z",fill:"url(#paint17_linear_248_1829)",fillOpacity:.15,style:{mixBlendMode:"plus-darker"}}),Ia.createElement("g",{style:{mixBlendMode:"plus-darker"},filter:"url(#filter8_f_248_1829)"},Ia.createElement("path",{d:"M61.5993 16.0296C56.3917 14.9131 50.8638 18.5962 47.1174 21.0922C45.7642 21.9937 46.1091 20.3325 44.1982 19.2316C43.1711 18.6399 41.693 18.4146 40.8815 18.4146C40.07 18.4146 37.8255 18.2436 36.4532 18.4145C35.0537 18.5887 34.8786 18.4139 33.6285 19.2316C32.2417 20.1388 31.8926 20.4743 30.8038 19.749C27.0574 17.253 22.164 15.1186 16.9565 16.2352C11.3626 17.4346 10.3584 23.2222 12.0348 25.1411C13.4238 26.7311 23.1366 27.2575 34.5699 23.2222C35.0606 23.6029 35.2553 25.2399 37.2602 25.2399H41.9681C43.1715 25.2399 43.591 23.7252 43.9857 23.2222C56.0916 27.2575 65.5073 26.1459 66.8524 24.5673C68.5716 22.5497 67.1933 17.229 61.5993 16.0296Z",fill:"#5200AE",fillOpacity:.2,style:{mixBlendMode:"plus-darker"}})),am||(am=Ia.createElement("path",{d:"M17.2569 4.11946C25.3389 0.902245 34.1556 18.1143 36.5881 18.1141V22.8621C18.8723 25.2361 12.0603 22.9758 11.3795 21.492C10.3565 19.7115 11.3797 6.45908 17.2569 4.11946Z",fill:"url(#paint18_linear_248_1829)"})),Ia.createElement("path",{d:"M17.2569 4.11946C25.3389 0.902245 34.1556 18.1143 36.5881 18.1141V22.8621C18.8723 25.2361 12.0603 22.9758 11.3795 21.492C10.3565 19.7115 11.3797 6.45908 17.2569 4.11946Z",fill:"url(#paint19_linear_248_1829)",fillOpacity:.15,style:{mixBlendMode:"plus-darker"}}),om||(om=Ia.createElement("path",{d:"M61.2998 4.11946C53.2177 0.902245 44.401 18.1143 41.9686 18.1141V22.8621C59.6844 25.2361 66.4963 22.9758 67.1772 21.492C68.2002 19.7115 67.177 6.45908 61.2998 4.11946Z",fill:"url(#paint20_linear_248_1829)"})),Ia.createElement("path",{d:"M61.2998 4.11946C53.2177 0.902245 44.401 18.1143 41.9686 18.1141V22.8621C59.6844 25.2361 66.4963 22.9758 67.1772 21.492C68.2002 19.7115 67.177 6.45908 61.2998 4.11946Z",fill:"url(#paint21_linear_248_1829)",fillOpacity:.15,style:{mixBlendMode:"plus-darker"}}),Ia.createElement("path",{d:"M36.8575 18.3108C34.4283 18.311 25.3539 1.09985 17.2826 4.09143C12.1463 6.4848 31.4496 19.3488 36.8575 18.3108Z",fill:"url(#paint22_linear_248_1829)",fillOpacity:.15,style:{mixBlendMode:"plus-darker"}}),Ia.createElement("path",{d:"M41.1924 18.8257C43.6216 18.8259 53.2035 0.83794 61.2749 4.12868C66.4112 6.76138 46.6002 19.9675 41.1924 18.8257Z",fill:"url(#paint23_linear_248_1829)",fillOpacity:.15,style:{mixBlendMode:"plus-darker"}}),rm||(rm=Ia.createElement("path",{d:"M34.2785 17.3696C34.3979 16.0778 35.5116 15.1523 36.8089 15.1523C38.6088 15.1523 40.8532 15.1523 42.4806 15.1524C43.7505 15.1524 44.8493 16.0409 44.9984 17.302C45.3166 19.9934 45.4173 24.2551 42.8632 24.2551C39.1304 24.2551 39.9799 24.2551 36.4345 24.2551C34.0287 24.2551 34.0294 20.0641 34.2785 17.3696Z",fill:"url(#paint24_linear_248_1829)"})),Ia.createElement("path",{d:"M34.2785 17.3696C34.3979 16.0778 35.5116 15.1523 36.8089 15.1523C38.6088 15.1523 40.8532 15.1523 42.4806 15.1524C43.7505 15.1524 44.8493 16.0409 44.9984 17.302C45.3166 19.9934 45.4173 24.2551 42.8632 24.2551C39.1304 24.2551 39.9799 24.2551 36.4345 24.2551C34.0287 24.2551 34.0294 20.0641 34.2785 17.3696Z",fill:"url(#paint25_radial_248_1829)",fillOpacity:.15,style:{mixBlendMode:"plus-darker"}}),cm||(cm=Ia.createElement("defs",null,Ia.createElement("filter",{id:"filter0_f_248_1829",x:5.41083,y:7.78193,width:69.1998,height:70.7682,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},Ia.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),Ia.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),Ia.createElement("feGaussianBlur",{stdDeviation:.839506,result:"effect1_foregroundBlur_248_1829"})),Ia.createElement("filter",{id:"filter1_f_248_1829",x:38.5691,y:24.6238,width:38.4477,height:56.6977,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},Ia.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),Ia.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),Ia.createElement("feGaussianBlur",{stdDeviation:1.99082,result:"effect1_foregroundBlur_248_1829"})),Ia.createElement("filter",{id:"filter2_f_248_1829",x:3.93827,y:25.2488,width:39.0707,height:54.8227,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},Ia.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),Ia.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),Ia.createElement("feGaussianBlur",{stdDeviation:1.99082,result:"effect1_foregroundBlur_248_1829"})),Ia.createElement("filter",{id:"filter3_d_248_1829",x:4.39475,y:4.71024,width:70.7164,height:46.3394,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},Ia.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),Ia.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),Ia.createElement("feOffset",{dy:.622133}),Ia.createElement("feGaussianBlur",{stdDeviation:.518444}),Ia.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),Ia.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.243137 0 0 0 0 0.254902 0 0 0 0 1 0 0 0 0.4 0"}),Ia.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_248_1829"}),Ia.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_248_1829",result:"shape"})),Ia.createElement("filter",{id:"filter4_f_248_1829",x:35.0668,y:19.6918,width:40.2159,height:25.6124,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},Ia.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),Ia.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),Ia.createElement("feGaussianBlur",{stdDeviation:1.03689,result:"effect1_foregroundBlur_248_1829"})),Ia.createElement("filter",{id:"filter5_f_248_1829",x:4.61958,y:20.6918,width:40.6827,height:24.4601,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},Ia.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),Ia.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),Ia.createElement("feGaussianBlur",{stdDeviation:1.03689,result:"effect1_foregroundBlur_248_1829"})),Ia.createElement("filter",{id:"filter6_f_248_1829",x:29.6938,y:34.52,width:20.5304,height:16.0186,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},Ia.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),Ia.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),Ia.createElement("feGaussianBlur",{stdDeviation:1.03689,result:"effect1_foregroundBlur_248_1829"})),Ia.createElement("filter",{id:"filter7_f_248_1829",x:6.20954,y:2.56696,width:67.7059,height:38.6044,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},Ia.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),Ia.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),Ia.createElement("feGaussianBlur",{stdDeviation:1.47238,result:"effect1_foregroundBlur_248_1829"})),Ia.createElement("filter",{id:"filter8_f_248_1829",x:8.60864,y:13.134,width:61.6265,height:15.8804,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},Ia.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),Ia.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),Ia.createElement("feGaussianBlur",{stdDeviation:1.3451,result:"effect1_foregroundBlur_248_1829"})),Ia.createElement("linearGradient",{id:"paint0_linear_248_1829",x1:56.5482,y1:74.9645,x2:27.8848,y2:19.568,gradientUnits:"userSpaceOnUse"},Ia.createElement("stop",{stopColor:"#9F0000"}),Ia.createElement("stop",{offset:.59302,stopColor:"#E10000"})),Ia.createElement("linearGradient",{id:"paint1_linear_248_1829",x1:56.5482,y1:74.9645,x2:27.8848,y2:19.568,gradientUnits:"userSpaceOnUse"},Ia.createElement("stop",{stopColor:"#3E41FF"}),Ia.createElement("stop",{offset:.59302,stopColor:"#877DF7"})),Ia.createElement("linearGradient",{id:"paint2_linear_248_1829",x1:26.4185,y1:70.9023,x2:50.6161,y2:19.2974,gradientUnits:"userSpaceOnUse"},Ia.createElement("stop",{stopColor:"#584EEA"}),Ia.createElement("stop",{offset:.0278224,stopColor:"#584EEA",stopOpacity:0}),Ia.createElement("stop",{offset:.895,stopColor:"#584EEA",stopOpacity:0})),Ia.createElement("linearGradient",{id:"paint3_linear_248_1829",x1:59.2581,y1:68.6801,x2:35.6043,y2:20.001,gradientUnits:"userSpaceOnUse"},Ia.createElement("stop",{stopColor:"#362BE7",stopOpacity:.8}),Ia.createElement("stop",{offset:.0371922,stopColor:"#584EEA",stopOpacity:0}),Ia.createElement("stop",{offset:.62,stopColor:"#584EEA",stopOpacity:0})),Ia.createElement("linearGradient",{id:"paint4_linear_248_1829",x1:68.7111,y1:60.0883,x2:48.8727,y2:40.1978,gradientUnits:"userSpaceOnUse"},Ia.createElement("stop",{stopColor:"#0C14E4",stopOpacity:.7}),Ia.createElement("stop",{offset:1,stopColor:"#8385FF",stopOpacity:0})),Ia.createElement("linearGradient",{id:"paint5_linear_248_1829",x1:37.0362,y1:71.1503,x2:1.12055,y2:38.3657,gradientUnits:"userSpaceOnUse"},Ia.createElement("stop",{stopColor:"#A1BCFF",stopOpacity:.7}),Ia.createElement("stop",{offset:1,stopColor:"#A8C1FE",stopOpacity:0})),Ia.createElement("linearGradient",{id:"paint6_linear_248_1829",x1:52.8824,y1:36.2135,x2:58.7659,y2:87.3144,gradientUnits:"userSpaceOnUse"},Ia.createElement("stop",{stopColor:"#FFD345"}),Ia.createElement("stop",{offset:.435,stopColor:"#FFBD89"}),Ia.createElement("stop",{offset:1,stopColor:"#FF9FE2"})),Ia.createElement("linearGradient",{id:"paint7_linear_248_1829",x1:40.6782,y1:41.3582,x2:56.8055,y2:72.5679,gradientUnits:"userSpaceOnUse"},Ia.createElement("stop",{offset:.295,stopColor:"#FF00B3"}),Ia.createElement("stop",{offset:.499667,stopColor:"#FF78D7",stopOpacity:0})),Ia.createElement("linearGradient",{id:"paint8_linear_248_1829",x1:39.1285,y1:41.3582,x2:23.0012,y2:72.5679,gradientUnits:"userSpaceOnUse"},Ia.createElement("stop",{offset:.295,stopColor:"#FF85DB"}),Ia.createElement("stop",{offset:.499667,stopColor:"#FF78D7",stopOpacity:0})),Ia.createElement("linearGradient",{id:"paint9_linear_248_1829",x1:26.9243,y1:36.2135,x2:21.0407,y2:87.3144,gradientUnits:"userSpaceOnUse"},Ia.createElement("stop",{stopColor:"#FFD345"}),Ia.createElement("stop",{offset:.435,stopColor:"#FFBD89"}),Ia.createElement("stop",{offset:1,stopColor:"#FF9FE2"})),Ia.createElement("linearGradient",{id:"paint10_linear_248_1829",x1:61.2341,y1:44.7326,x2:42.1931,y2:5.00786,gradientUnits:"userSpaceOnUse"},Ia.createElement("stop",{stopColor:"#3E41FF"}),Ia.createElement("stop",{offset:.3,stopColor:"#5D5FFF"}),Ia.createElement("stop",{offset:.59302,stopColor:"#898AFF"})),Ia.createElement("linearGradient",{id:"paint11_linear_248_1829",x1:59.4538,y1:36.6972,x2:54.6841,y2:27.4689,gradientUnits:"userSpaceOnUse"},Ia.createElement("stop",{stopColor:"white",stopOpacity:0}),Ia.createElement("stop",{offset:.502191,stopColor:"#7A44FF",stopOpacity:.4}),Ia.createElement("stop",{offset:1,stopColor:"white",stopOpacity:0})),Ia.createElement("linearGradient",{id:"paint12_linear_248_1829",x1:21.7362,y1:35.0686,x2:24.9415,y2:28.4744,gradientUnits:"userSpaceOnUse"},Ia.createElement("stop",{stopColor:"white",stopOpacity:0}),Ia.createElement("stop",{offset:.503023,stopColor:"#A1BCFF",stopOpacity:.5}),Ia.createElement("stop",{offset:1,stopColor:"white",stopOpacity:0})),Ia.createElement("linearGradient",{id:"paint13_linear_248_1829",x1:47.5283,y1:44.2388,x2:31.975,y2:44.2388,gradientUnits:"userSpaceOnUse"},Ia.createElement("stop",{stopColor:"white",stopOpacity:0}),Ia.createElement("stop",{offset:.503023,stopColor:"#A1BCFF",stopOpacity:.7}),Ia.createElement("stop",{offset:1,stopColor:"white",stopOpacity:0})),Ia.createElement("linearGradient",{id:"paint14_linear_248_1829",x1:56.9929,y1:48.7576,x2:42.9365,y2:6.43309,gradientUnits:"userSpaceOnUse"},Ia.createElement("stop",{stopColor:"#8385F9"}),Ia.createElement("stop",{offset:.3,stopColor:"#B991FF"}),Ia.createElement("stop",{offset:.59302,stopColor:"#D581F1"})),Ia.createElement("linearGradient",{id:"paint15_linear_248_1829",x1:39.9992,y1:5.47251,x2:25.0131,y2:16.2613,gradientUnits:"userSpaceOnUse"},Ia.createElement("stop",{stopColor:"#A4BEFF",stopOpacity:.7}),Ia.createElement("stop",{offset:1,stopColor:"#A1BCFF",stopOpacity:0})),Ia.createElement("linearGradient",{id:"paint16_linear_248_1829",x1:50.6158,y1:44.4556,x2:60.5892,y2:7.06824,gradientUnits:"userSpaceOnUse"},Ia.createElement("stop",{stopColor:"#FFD345"}),Ia.createElement("stop",{offset:.435,stopColor:"#FFBD89"}),Ia.createElement("stop",{offset:1,stopColor:"#FF9FE2"})),Ia.createElement("linearGradient",{id:"paint17_linear_248_1829",x1:-27.4087,y1:21.5168,x2:-26.7712,y2:45.9713,gradientUnits:"userSpaceOnUse"},Ia.createElement("stop",{offset:.243422,stopColor:"#FF00B3"}),Ia.createElement("stop",{offset:.619079,stopColor:"#FF78D7",stopOpacity:0})),Ia.createElement("linearGradient",{id:"paint18_linear_248_1829",x1:14.0374,y1:6.03106,x2:14.6148,y2:31.4609,gradientUnits:"userSpaceOnUse"},Ia.createElement("stop",{stopColor:"#FFD345"}),Ia.createElement("stop",{offset:.435,stopColor:"#FFBD89"}),Ia.createElement("stop",{offset:1,stopColor:"#FF56CC"})),Ia.createElement("linearGradient",{id:"paint19_linear_248_1829",x1:34.6062,y1:29.9171,x2:42.096,y2:8.50557,gradientUnits:"userSpaceOnUse"},Ia.createElement("stop",{offset:.295,stopColor:"#FF00B3"}),Ia.createElement("stop",{offset:.775,stopColor:"#FF78D7",stopOpacity:0})),Ia.createElement("linearGradient",{id:"paint20_linear_248_1829",x1:64.5193,y1:6.03106,x2:63.9418,y2:31.4609,gradientUnits:"userSpaceOnUse"},Ia.createElement("stop",{stopColor:"#FFD345"}),Ia.createElement("stop",{offset:.435,stopColor:"#FFBD89"}),Ia.createElement("stop",{offset:1,stopColor:"#FF56CC"})),Ia.createElement("linearGradient",{id:"paint21_linear_248_1829",x1:43.9504,y1:29.9171,x2:36.4606,y2:8.50557,gradientUnits:"userSpaceOnUse"},Ia.createElement("stop",{offset:.295,stopColor:"#FF00B3"}),Ia.createElement("stop",{offset:.715,stopColor:"#FF78D7",stopOpacity:0})),Ia.createElement("linearGradient",{id:"paint22_linear_248_1829",x1:-5.48754,y1:7.25144,x2:-4.19679,y2:21.2197,gradientUnits:"userSpaceOnUse"},Ia.createElement("stop",{offset:.0428352,stopColor:"#FF00B3"}),Ia.createElement("stop",{offset:.935943,stopColor:"#A40073"})),Ia.createElement("linearGradient",{id:"paint23_linear_248_1829",x1:64.6919,y1:1.27575,x2:67.8375,y2:12.6963,gradientUnits:"userSpaceOnUse"},Ia.createElement("stop",{offset:.0428352,stopColor:"#FF00B3"}),Ia.createElement("stop",{offset:.935943,stopColor:"#A40073"})),Ia.createElement("linearGradient",{id:"paint24_linear_248_1829",x1:35.4645,y1:16.1956,x2:35.7378,y2:27.6678,gradientUnits:"userSpaceOnUse"},Ia.createElement("stop",{stopColor:"#FFD345"}),Ia.createElement("stop",{offset:.435,stopColor:"#FFBD89"}),Ia.createElement("stop",{offset:1,stopColor:"#FF9FE2"})),Ia.createElement("radialGradient",{id:"paint25_radial_248_1829",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"translate(39.5051 26.7086) rotate(-91.9979) scale(21.2475 14.2433)"},Ia.createElement("stop",{offset:.295,stopColor:"#FF00B3"}),Ia.createElement("stop",{offset:1,stopColor:"#FF78D7",stopOpacity:0})))))},mm=(0,Ia.forwardRef)(hm),pm=(0,Ia.memo)(mm);function gm(){return gm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},gm.apply(null,arguments)}var ym=function(e,t){return Ia.createElement("svg",gm({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),um||(um=Ia.createElement("path",{d:"M12 0L14.5456 9.45442L24 12L14.5456 14.5456L12 24L9.45442 14.5456L0 12L9.45442 9.45442L12 0Z",fill:"url(#bouncing-gift-start-gradient)"})),dm||(dm=Ia.createElement("defs",null,Ia.createElement("linearGradient",{id:"bouncing-gift-start-gradient",x1:7.5,y1:17,x2:17,y2:6.5,gradientUnits:"userSpaceOnUse"},Ia.createElement("stop",{stopColor:"#FFB900"}),Ia.createElement("stop",{offset:1,stopColor:"#FFE55E"})))))},fm=(0,Ia.forwardRef)(ym),Em=(0,Ia.memo)(fm);const Sm=e=>{let{className:t,transitionEntered:n}=e;return(0,Dr.jsxs)("div",{className:(0,Rr.A)("bouncing-gift p-rel",t),"aria-hidden":!0,"data-qa":"bouncing-gift-icon",children:[(0,Dr.jsx)(pm,{className:(0,Rr.A)({"bouncing-gift-bounce":n})}),(0,Dr.jsx)(Em,{className:(0,Rr.A)("bouncing-gift-star p-abs inset-bottom-start ms-minus-0-5 mb-2 z-index-1",{"bouncing-gift-star-bounce bouncing-gift-star-1-bounce":n})}),(0,Dr.jsx)(Em,{className:(0,Rr.A)("bouncing-gift-star p-abs inset-top-end me-1 mt-minus-2 z-index-1",{"bouncing-gift-star-bounce bouncing-gift-star-2-bounce":n})})]})},vm=(0,Ia.memo)(Sm);var Am=n(1253),Cm=n.n(Am);const Pm=e=>{let{className:t,transitionEntered:n}=e;return(0,Dr.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"150",height:"150",viewBox:"0 0 150 150",fill:"none",className:(0,Rr.A)({"confetti-curves-bounce":n},t),children:[(0,Dr.jsx)("g",{className:"orange-wave-wrap",children:(0,Dr.jsx)("path",{className:"orange-wave",d:"M792.5 92.8804C749.91 178.05 707.33 178.05 664.74 92.8804C622.15 7.71043 579.57 7.71043 536.98 92.8804C494.39 178.05 451.81 178.05 409.22 92.8804C366.63 7.71043 324.05 7.71043 281.46 92.8804C238.87 178.05 196.29 178.05 153.7 92.8804",stroke:"#FF8B66",strokeWidth:"58",strokeLinecap:"butt",strokeDasharray:"950",strokeDashoffset:"0",fill:"none"})}),(0,Dr.jsx)("g",{className:"orange-wave-wrap-final",children:(0,Dr.jsx)("path",{className:"orange-wave-final",d:"M792.5 92.8804C749.91 178.05 707.33 178.05 664.74 92.8804C622.15 7.71043 579.57 7.71043 536.98 92.8804C494.39 178.05 451.81 178.05 409.22 92.8804C366.63 7.71043 324.05 7.71043 281.46 92.8804C238.87 178.05 196.29 178.05 153.7 92.8804",stroke:"#FF8B66",strokeWidth:"58",strokeLinecap:"butt",strokeDasharray:"950",strokeDashoffset:"0",fill:"none"})}),(0,Dr.jsx)("g",{transform:"translate(123, 118) rotate(234) scale(0.075)",children:(0,Dr.jsx)("path",{className:"red-spiral",d:"M670.9 3.9502C692.71 162.58 422.44 386.09 232.04 291.51C105.6 228.7 234.74 103.94 305.91 190.7C377.07 277.46 223.9 500.17 7.28003 444.09",stroke:"#E74A6D",strokeWidth:"58",strokeLinecap:"butt",strokeDasharray:"1350",strokeDashoffset:"0",fill:"none"})}),(0,Dr.jsx)("g",{transform:"translate(123, 118) rotate(234) scale(0.075)",children:(0,Dr.jsx)("path",{className:"red-spiral-final",d:"M670.9 3.9502C692.71 162.58 422.44 386.09 232.04 291.51C105.6 228.7 234.74 103.94 305.91 190.7C377.07 277.46 223.9 500.17 7.28003 444.09",stroke:"#E74A6D",strokeWidth:"58",strokeLinecap:"butt",strokeDasharray:"1350",strokeDashoffset:"0",fill:"none"})}),(0,Dr.jsx)("g",{transform:"translate(43, 41) rotate(29) scale(0.075, -0.075)",children:(0,Dr.jsx)("path",{className:"purple-line",d:"M561.88 6.57031C512.52 218.64 180.6 518.81 23.72 295.91",stroke:"#6767F5",strokeWidth:"58",strokeLinecap:"butt",strokeDasharray:"740",strokeDashoffset:"0",fill:"none"})}),(0,Dr.jsx)("g",{transform:"translate(43, 41) rotate(29) scale(0.075, -0.075)",children:(0,Dr.jsx)("path",{className:"purple-line-final",d:"M561.88 6.57031C512.52 218.64 180.6 518.81 23.72 295.91",stroke:"#6767F5",strokeWidth:"58",strokeLinecap:"butt",strokeDasharray:"740",strokeDashoffset:"0",fill:"none"})}),(0,Dr.jsx)("g",{transform:"translate(65, 100) rotate(0) scale(0.075)",children:(0,Dr.jsx)("path",{className:"purple-wave",d:"M204.15 24.4502C204.15 24.4502 56.3 118.75 32.47 273.17C-11.85 560.45 383.07 -168.85 378.86 304.12C376.15 608.45 596.15 -159.55 745 420.28",stroke:"#6767F5",strokeWidth:"58",strokeLinecap:"butt",strokeDasharray:"1570",strokeDashoffset:"0",fill:"none"})}),(0,Dr.jsx)("g",{transform:"translate(35, 70) rotate(-120) scale(0.075)",children:(0,Dr.jsx)("path",{className:"red-wave",d:"M204.15 24.4502C204.15 24.4502 56.3 118.75 32.47 273.17C-11.85 560.45 383.07 -168.85 378.86 304.12C376.15 608.45 596.15 -159.55 745 420.28",stroke:"#E74A6D",strokeWidth:"58",strokeLinecap:"butt",strokeDasharray:"1570",strokeDashoffset:"0",fill:"none"})}),(0,Dr.jsx)("g",{transform:"translate(-5, 65) rotate(-20) scale(0.075)",children:(0,Dr.jsx)("path",{className:"yellow-spiral",d:"M576.19 399.15C576.19 399.15 668.19 75.15 364.19 31.15C200.65 7.48003 16.14 183.6 84.06 340.99C134.19 457.15 295.59 413.61 234.89 266.38C199.41 180.32 95.16 155.5 13.05 196.86",stroke:"#F0C946",strokeWidth:"58",strokeLinecap:"butt",strokeDasharray:"1550",strokeDashoffset:"0",fill:"none"})})]})},Nm=(0,Ia.memo)(Pm),bm=e=>{var t,n;const i=(0,Ia.useId)();return(0,Dr.jsxs)("svg",{className:e.className,"aria-hidden":e.ariaHidden&&!0,fill:"none",height:null!==(t=e.height)&&void 0!==t?t:80,viewBox:"0 0 80 80",width:null!==(n=e.width)&&void 0!==n?n:80,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[(0,Dr.jsxs)("filter",{id:`a-${i}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"39.6121",width:"26.3425",x:"6.04553",y:"29.1451",children:[(0,Dr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Dr.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Dr.jsx)("feGaussianBlur",{result:"effect1_foregroundBlur_251_3312",stdDeviation:".714538"})]}),(0,Dr.jsxs)("linearGradient",{id:`b-${i}`,gradientUnits:"userSpaceOnUse",x1:"12.5577",x2:"55.119",y1:"38.0845",y2:"65.9012",children:[(0,Dr.jsx)("stop",{offset:".135247",stopColor:"#f3c352"}),(0,Dr.jsx)("stop",{offset:".249813",stopColor:"#ffd87c"}),(0,Dr.jsx)("stop",{offset:".409209",stopColor:"#f3c352"}),(0,Dr.jsx)("stop",{offset:".752403",stopColor:"#c57429"}),(0,Dr.jsx)("stop",{offset:"1",stopColor:"#bf7c19"})]}),(0,Dr.jsxs)("linearGradient",{id:`c-${i}`,gradientUnits:"userSpaceOnUse",x1:"36.6435",x2:"31.0267",y1:"61.4175",y2:"49.3545",children:[(0,Dr.jsx)("stop",{offset:"0",stopColor:"#b25b0a"}),(0,Dr.jsx)("stop",{offset:"1",stopColor:"#f3c352",stopOpacity:"0"})]}),(0,Dr.jsxs)("linearGradient",{id:`d-${i}`,gradientUnits:"userSpaceOnUse",x1:"57.7848",x2:"60.6488",y1:"53.077",y2:"60.2946",children:[(0,Dr.jsx)("stop",{offset:"0",stopColor:"#f3c352",stopOpacity:"0"}),(0,Dr.jsx)("stop",{offset:"1",stopColor:"#ffe8b0"})]}),(0,Dr.jsxs)("linearGradient",{id:`e-${i}`,gradientUnits:"userSpaceOnUse",x1:"40.6584",x2:"42.8079",y1:"43.6421",y2:"86.2711",children:[(0,Dr.jsx)("stop",{offset:"0",stopColor:"#ffda82",stopOpacity:"0"}),(0,Dr.jsx)("stop",{offset:"1",stopColor:"#a61840"})]}),(0,Dr.jsxs)("linearGradient",{id:`f-${i}`,gradientUnits:"userSpaceOnUse",x1:"-8.52904",x2:"25.4558",y1:"70.9171",y2:"76.1978",children:[(0,Dr.jsx)("stop",{offset:"0",stopColor:"#fff"}),(0,Dr.jsx)("stop",{offset:"1",stopColor:"#fff",stopOpacity:"0"})]}),(0,Dr.jsxs)("linearGradient",{id:`g-${i}`,gradientUnits:"userSpaceOnUse",x1:"5.46237",x2:"27.7636",y1:"70.4215",y2:"32.7753",children:[(0,Dr.jsx)("stop",{offset:"0",stopColor:"#ffecc0",stopOpacity:".6"}),(0,Dr.jsx)("stop",{offset:"1",stopColor:"#ffda82",stopOpacity:"0"})]}),(0,Dr.jsxs)("linearGradient",{id:`h-${i}`,gradientUnits:"userSpaceOnUse",x1:"54.7555",x2:"45.9387",y1:"28.1659",y2:"36.11",children:[(0,Dr.jsx)("stop",{offset:"0",stopColor:"#f3c352"}),(0,Dr.jsx)("stop",{offset:"1",stopColor:"#8f4500"})]}),(0,Dr.jsxs)("linearGradient",{id:`i-${i}`,gradientUnits:"userSpaceOnUse",x1:"50.0855",x2:"41.2526",y1:"23.1149",y2:"31.8851",children:[(0,Dr.jsx)("stop",{offset:"0",stopColor:"#8f4500",stopOpacity:".5"}),(0,Dr.jsx)("stop",{offset:"1",stopColor:"#ffda82"})]}),(0,Dr.jsxs)("linearGradient",{id:`j-${i}`,children:[(0,Dr.jsx)("stop",{offset:".115167",stopColor:"#8385f9"}),(0,Dr.jsx)("stop",{offset:".972595",stopColor:"#f181bd"})]}),(0,Dr.jsx)("linearGradient",{id:`k-${i}`,gradientUnits:"userSpaceOnUse",x1:"50.0045",x2:"22.3004",xlinkHref:`#j-${i}`,y1:"62.3252",y2:"32.1713"}),(0,Dr.jsx)("linearGradient",{id:`l-${i}`,gradientUnits:"userSpaceOnUse",x1:"32.8147",x2:"11.5765",xlinkHref:`#j-${i}`,y1:"70.8432",y2:"47.7176"}),(0,Dr.jsx)("clipPath",{id:`m-${i}`,children:(0,Dr.jsx)("path",{d:"m0 0h80v80h-80z"})}),(0,Dr.jsxs)("mask",{id:`n-${i}`,height:"62",maskUnits:"userSpaceOnUse",width:"64",x:"5",y:"13",children:[(0,Dr.jsx)("path",{d:"m6.36222 62.9922c-3.25192 6.5634 3.34401 13.662 10.12818 10.9l51.1017-20.8048.7412-3.0027-35.8483-35.8824-1.5244-.8576z",fill:`url(#b-${i})`}),(0,Dr.jsx)("path",{d:"m6.36222 62.9922c-3.25192 6.5634 3.34401 13.662 10.12818 10.9l51.1017-20.8048.7412-3.0027-35.8483-35.8824-1.5244-.8576z",fill:`url(#c-${i})`,fillOpacity:".8"}),(0,Dr.jsx)("path",{d:"m6.36222 62.9922c-3.25192 6.5634 3.34401 13.662 10.12818 10.9l51.1017-20.8048.7412-3.0027-35.8483-35.8824-1.5244-.8576z",fill:`url(#d-${i})`}),(0,Dr.jsx)("path",{d:"m6.36222 62.9922c-3.25192 6.5634 3.34401 13.662 10.12818 10.9l51.1017-20.8048.7412-3.0027-35.8483-35.8824-1.5244-.8576z",fill:`url(#e-${i})`}),(0,Dr.jsx)("path",{d:"m6.52258 63.0712c-3.17889 6.416 3.26855 13.3554 9.90032 10.6554l51.0173-20.7711.695-2.8153-35.759-35.7933-1.3394-.7542z",fill:"none",stroke:`url(#f-${i})`,strokeOpacity:".6",strokeWidth:".357269"})]}),(0,Dr.jsx)("mask",{height:"68",maskUnits:"userSpaceOnUse",width:"76",x:"27",y:"-13",children:(0,Dr.jsx)("path",{d:"m43.7115 36.6806-.0047-.0048c-13.2118-13.2106-44.060846-69.2695 44.5233-41.23664 11.4375 9.6423 32.7599 67.65504-20.6572 57.94294-8.7493-1.5908-15.1125-7.9534-23.8614-16.7015z",fill:"#d9d9d9"})}),(0,Dr.jsxs)("g",{clipPath:`url(#m-${i})`,children:[(0,Dr.jsx)("path",{d:"m6.36222 62.9922c-3.25192 6.5634 3.34401 13.662 10.12818 10.9l51.1017-20.8048.7412-3.0027-35.8483-35.8824-1.5244-.8576z",fill:`url(#b-${i})`}),(0,Dr.jsx)("path",{d:"m6.36222 62.9922c-3.25192 6.5634 3.34401 13.662 10.12818 10.9l51.1017-20.8048.7412-3.0027-35.8483-35.8824-1.5244-.8576z",fill:`url(#c-${i})`,fillOpacity:".8"}),(0,Dr.jsx)("path",{d:"m6.36222 62.9922c-3.25192 6.5634 3.34401 13.662 10.12818 10.9l51.1017-20.8048.7412-3.0027-35.8483-35.8824-1.5244-.8576z",fill:`url(#d-${i})`}),(0,Dr.jsx)("path",{d:"m6.36222 62.9922c-3.25192 6.5634 3.34401 13.662 10.12818 10.9l51.1017-20.8048.7412-3.0027-35.8483-35.8824-1.5244-.8576z",fill:`url(#e-${i})`}),(0,Dr.jsx)("path",{d:"m6.52258 63.0712c-3.17889 6.416 3.26855 13.3554 9.90032 10.6554l51.0173-20.7711.695-2.8153-35.759-35.7933-1.3394-.7542z",stroke:`url(#f-${i})`,strokeOpacity:".6",strokeWidth:".357269"}),(0,Dr.jsx)("g",{filter:`url(#a-${i})`,children:(0,Dr.jsx)("path",{d:"m30.8376 38.3058-3.0181-6.8662c-.4815-1.0955-2.0002-1.1693-2.5531-.1081-3.3323 6.3959-11.4798 22.0852-17.61456 33.9021-.80506 1.5507 1.34712 2.9063 2.40706 1.5173l20.6065-27.0031c.3155-.4135.3815-.9658.1722-1.442z",fill:`url(#g-${i})`})}),(0,Dr.jsx)("path",{d:"m68.0914 53.3407c-2.9921 2.788-13.5417-3.6709-24.0687-14.9688-10.5271-11.298-16.4305-22.4969-13.4384-25.2849 2.9921-2.7879 13.7466 3.8909 24.2737 15.1889 10.527 11.298 16.2254 22.2769 13.2334 25.0648z",fill:"#c57429"}),(0,Dr.jsx)("path",{d:"m54.4658 28.6415c5.2411 5.6249 9.262 11.1582 11.5942 15.6148 1.168 2.2319 1.8973 4.1663 2.158 5.6897.2649 1.5477.0245 2.5212-.5244 3.0327-.5491.5116-1.537.6826-3.0623.3092-1.5012-.3675-3.3793-1.2315-5.5232-2.554-4.2809-2.6409-9.5168-7.0421-14.7579-12.6671-5.2413-5.6251-9.3142-11.2147-11.698-15.7277-1.1937-2.2598-1.9484-4.2221-2.2278-5.7674-.2845-1.5732-.0517-2.5547.493-3.0622s1.5409-.6712 3.0901-.2764c1.5216.3878 3.4253 1.2798 5.5951 2.6298 4.3335 2.6963 9.6219 7.1535 14.8632 12.7786z",fill:`url(#h-${i})`,stroke:`url(#i-${i})`,strokeWidth:"1.07181"}),(0,Dr.jsxs)("g",{mask:`url(#n-${i})`,strokeWidth:"9.54646",children:[(0,Dr.jsx)("path",{d:"m62.6579 62.2169c-4.2676 3.9763-17.7953-2.3864-29.4671-14.9129s-16.3861-25.7417-12.1185-29.7181",stroke:`url(#k-${i})`}),(0,Dr.jsx)("path",{d:"m42.3693 70.8978c-3.1799 2.9629-12.6644-2.0476-21.6141-11.6526-8.9497-9.6051-13.45271-19.6065-10.2728-22.5694",stroke:`url(#l-${i})`})]})]})]})},Dm=(0,Ia.memo)(bm),Tm=e=>{let{className:t,transitionEntered:n}=e;return(0,Dr.jsx)("div",{className:(0,Rr.A)("party-popper",t),children:(0,Dr.jsx)(Dm,{className:(0,Rr.A)({"party-popper-bounce":n})})})},_m=(0,Ia.memo)(Tm),km=["#E74A6D","#F0C946","#6767F5"],Om=["circle","square"],Im=e=>{let{className:t,transitionEntered:n}=e;const i=(0,Ia.useRef)(null),[s,a]=(0,Ia.useState)(!1);return(0,Ia.useEffect)((()=>{let e;return n?e=window.setTimeout((()=>{a(!0)}),174):a(!1),()=>{e&&window.clearTimeout(e)}}),[n]),(0,Ia.useEffect)((()=>{s&&i.current&&i.current.shoot()}),[s]),(0,Dr.jsxs)("div",{className:(0,Rr.A)("confetti p-rel",t),"aria-hidden":!0,"data-qa":"confetti-icon",children:[(0,Dr.jsx)(_m,{className:"p-abs inset-centered",transitionEntered:n}),(0,Dr.jsx)(Nm,{className:"p-abs inset-centered",transitionEntered:n}),(0,Dr.jsx)(Cm(),{width:360,height:360,className:"p-abs inset-centered",onInit:e=>{let{conductor:t}=e;i.current=t},globalOptions:{disableForReducedMotion:!0},decorateOptions:e=>Object.assign(Object.assign({},e),{colors:km,shapes:Om,particleCount:20,scalar:.9,spread:360,startVelocity:7,gravity:0,decay:.94,ticks:60,origin:{y:.5}})})]})},xm=(0,Ia.memo)(Im);var wm=n(3299),Rm=n(1167),Mm=n(5302);const Lm=/[0-9]/;var Um;!function(e){e.MONEY="money",e.STOCK="stock",e.CRYPTO="crypto"}(Um||(Um={}));class Fm{constructor(e){let{digits:t,withoutFraction:n,getCurrencyFormat:i,locale:s,donationType:a,setZeroOnBlur:o,sentry:r}=e;this.digits=t,this.withoutFraction=n,this.locale=s,this.donationType=a,this.getCurrencyFormat=i,this.setZeroOnBlur=o,this.sentry=r,this.groupSeparator=this.getCurrencyFormat().groupSeparator,this.decimalSeparator=this.getCurrencyFormat().decimalSeparator}get alternativeDecimalSeparator(){return"."===this.decimalSeparator?",":"."}parseAmountOrNull(e){return Number.isNaN(e)?null:e}formatValue(e){let{value:t,minimumFractionDigits:n=0,currencySymbol:i=""}=e;const s=null===t?"":Ja(t/Math.pow(10,this.digits),n,this.digits,this.locale);return`${null===t?"":i}${this.removeFractionZeroes(s,n)}`}convertStringToNumber(e,t){const n=this.toJsFloatFormat(e),i=this.parsePrice(n,t);return Math.round(Number.parseFloat(i)*Math.pow(10,this.digits))}handleKeyDown(e,t,n){if(!(this.withoutFraction?Fm.DIGITS_REG_EXP:Fm.DIGITS_WITH_DOT_COMMA_REG_EXP).test(e.key)&&e.key&&1===e.key.length&&!e.ctrlKey&&!e.metaKey)return e.preventDefault();const i=t.value;if(i.includes(this.decimalSeparator)&&(","===e.key||"."===e.key))return e.preventDefault();const s=i.split(this.decimalSeparator),a=s[0],o=a?a.length:0,r=s[1];if((r?r.length:0)>=this.digits&&e.key&&1===e.key.length&&t.selectionStart&&t.selectionStart===t.selectionEnd&&t.selectionStart>o&&!e.ctrlKey&&!e.metaKey)return e.preventDefault();n()}handlePaste(e,t){e.preventDefault(),t((e.clipboardData||e.originalEvent&&e.originalEvent.clipboardData||window.clipboardData).getData("text"))}handleChange(e,t,n,i,s){let a=e.target.value;if(t){const e=this.getCommaPosition(n,a);-1!==e&&(a=a.substring(0,e)+this.decimalSeparator+a.substring(e+1))}const o=new RegExp(`\\${this.decimalSeparator}$`);(a.match(o)||n.match(o)&&!a.includes(this.decimalSeparator))&&i(a);const r=new RegExp(`[${this.decimalSeparator}][0-9]{0,${this.digits}}$`),c="0"===a[a.length-1]&&e.target.selectionStart===a.length,l="0"===n[n.length-1]&&n.length>a.length&&n.length===Number(e.target.selectionStart)+1;a.match(r)&&(c||l)&&i(a),s(a)}handleBlur(e,t){this.setZeroOnBlur&&""===e.target.value&&(e.target.value="0"),t(e)}getInputMode(){return this.withoutFraction?"numeric":"decimal"}calculateInitialCursorPosition(e,t){const n=e.slice(0,t),i=[...n].filter((e=>e===this.groupSeparator)).length;return n.length-i}calculateFormattedCursorPosition(e,t){let n=0,i=0;for(;i<t&&n<e.length;)e[n]!==this.groupSeparator&&i++,n++;return n}limitCryptoAmount(e){const t=e.split("."),n=t[0];if(n.length>Fm.CRYPTO_MAXIMUM_INTEGER_LENGTH&&(e=e.replace(/^([0-9]*)/,n.slice(0,Fm.CRYPTO_MAXIMUM_INTEGER_LENGTH))),e.includes(".")){const n=t[1];n.length>Fm.CRYPTO_MAXIMUM_FRACTION_LENGTH&&(e=e.replace(/[.]([0-9]*)/,n.slice(0,Fm.CRYPTO_MAXIMUM_FRACTION_LENGTH)))}return e}parsePrice(e,t){let n=e||"";if(n=n.replace(/[^\d.]/g,""),this.donationType===Um.MONEY){const e=(0,Ki.Bm)(t);n=n.slice(0,e+2)}return this.donationType===Um.CRYPTO&&(n=this.limitCryptoAmount(n)),Number.parseFloat(n).toFixed(this.withoutFraction?0:this.digits)}getCommaPosition(e,t){const n=e.length>=t.length?e:t,i=e.length>=t.length?t:e,s=n.split("");for(const e in s)if(s[e]===this.alternativeDecimalSeparator&&s[e]!==i.charAt(Number(e)))return Number(e);return-1}toJsFloatFormat(e){var t;try{return e.replace(new RegExp(`\\${this.groupSeparator}`,"g"),"").replace(new RegExp(`\\${this.decimalSeparator}`,"g"),".")}catch(n){throw null===(t=this.sentry)||void 0===t||t.captureException(n,{extra:{value:e,locale:this.locale,groupSeparator:this.groupSeparator,decimalSeparator:this.decimalSeparator}}),n}}removeFractionZeroes(e,t){const n=new RegExp(`\\${this.decimalSeparator}0+$`);return 0!==t?e.replace(n,""):e}}Fm.DIGITS_WITH_DOT_COMMA_REG_EXP=/[0-9.,]/,Fm.DIGITS_REG_EXP=/[0-9]/,Fm.CRYPTO_MAXIMUM_FRACTION_LENGTH=8,Fm.CRYPTO_MAXIMUM_INTEGER_LENGTH=9;const jm=(0,Ia.forwardRef)((function(e,t){var{className:n,placeholder:i,disabled:s,trackingElement:a,withoutFraction:o,digits:r,donationType:l,value:u,dataQa:d,currency:h,onChange:m,onFocus:p,onBlur:g,onClick:y}=e,f=(0,c.Tt)(e,["className","placeholder","disabled","trackingElement","withoutFraction","digits","donationType","value","dataQa","currency","onChange","onFocus","onBlur","onClick"]);const[E,S]=(0,Ia.useState)(!1),[v,A]=(0,Ia.useState)(null),C=(0,Qr.t)(),P=function(e){let{withoutFraction:t,digits:n,donationType:i,intl:s}=e;const a=Ir();return(0,Ia.useMemo)((()=>new Fm({withoutFraction:t,getCurrencyFormat:()=>s.getCurrencyFormat(),locale:s.locale,digits:n,donationType:i,sentry:a})),[n,i,s,a,t])}({withoutFraction:o,digits:r,intl:C,donationType:l}),N=(0,Ia.useMemo)((()=>P.alternativeDecimalSeparator),[P]),b=(0,Ia.useMemo)((()=>P.getInputMode()),[P]),D=(0,Ia.useRef)(null),T=(0,Ia.useCallback)((e=>P.formatValue({value:e,minimumFractionDigits:E?0:r})),[P,E,r]),[_,k]=(0,Ia.useState)(T(u)),[O,I]=(0,Ia.useState)(h),x=(0,Ia.useRef)(!1),w=(0,Ia.useCallback)(((e,t)=>P.convertStringToNumber(e,t)),[P]);(0,Ia.useEffect)((()=>{w(_,O)!==u&&(I(h),k(T(u)))}),[u,T,w,_,h,O]),(0,Ia.useEffect)((()=>{if(null===D.current||null===v)return;const e=P.calculateFormattedCursorPosition(_,v);D.current.selectionStart=e,D.current.selectionEnd=e}),[v,_,P]);const R=(0,Ia.useCallback)((e=>{const t=w(e,h);m(P.parseAmountOrNull(t))}),[w,m,P,h]);return(0,Ia.useImperativeHandle)(t,(()=>D.current)),(0,Dr.jsx)("input",Object.assign({ref:D,type:"text",className:n,autoComplete:"off",value:_,onChange:e=>{if(E||S(!0),!(e=>{const t=e[e.length-1];return Lm.test(t)})(e.target.value)&&o&&""!==e.target.value)return e.preventDefault();P.handleChange(e,x.current,_,k,(t=>{var n;const i=P.calculateInitialCursorPosition(t,null!==(n=e.target.selectionStart)&&void 0!==n?n:0);A(i),R(t)}))},onPaste:e=>{P.handlePaste(e,(e=>{R(e)}))},onKeyDown:e=>{D.current&&P.handleKeyDown(e,D.current,(()=>{x.current=e.key===N}))},onFocus:()=>{p&&p()},onBlur:e=>{g&&P.handleBlur(e,(()=>{g()}))},onClick:()=>{y&&y()},disabled:s,inputMode:b,placeholder:i,"data-qa":d,"data-tracking-element-name":a,"data-testid":"price-input"},f))})),Bm=(0,Ia.memo)(jm),Gm=(0,Ia.forwardRef)(((e,t)=>{const[n,i]=(0,Ia.useState)(!1),{onAmountChange:s,onAmountInputBlur:a,onAmountInputFocus:o,currencyService:r,withoutFraction:l=!0,qaActiveAttribute:u,qaDisabledAttribute:d,trackingElement:h,placeholder:m,donationType:p,isCustomAmount:g,isPDUPriceInput:y,className:f,canModifyAmount:E,showCurrencySymbol:S,useSpaceAfterCurrencySymbol:v,showDisabledInput:A,disabled:C,currency:P,currencyCodeNode:N,canSelectCurrency:b,amount:D,hasError:T,errorLabel:_}=e,k=(0,c.Tt)(e,["onAmountChange","onAmountInputBlur","onAmountInputFocus","currencyService","withoutFraction","qaActiveAttribute","qaDisabledAttribute","trackingElement","placeholder","donationType","isCustomAmount","isPDUPriceInput","className","canModifyAmount","showCurrencySymbol","useSpaceAfterCurrencySymbol","showDisabledInput","disabled","currency","currencyCodeNode","canSelectCurrency","amount","hasError","errorLabel"]),O=(0,Qr.t)(),I=(0,Ur.P)(),x=(0,El.Y)(),w=Gr(),R=(0,Ia.useCallback)((e=>{s(e)}),[s]),M=(0,Ia.useCallback)((()=>{a&&a(),i(!1)}),[a]),L=(0,Ia.useCallback)((()=>{o&&o(),i(!0)}),[o]),U=/\s/.test(O.formatCurrency(null!=D?D:0,{currency:P,display:"short"})),F=v&&U,j=r.getDigits(P),B=Ja((D||0)/Math.pow(10,j),0,2);return(0,Dr.jsxs)("div",{className:(0,Rr.A)(f,{"text-color":p===Ft.CRYPTO,"text-white":A,"has-error":T,focus:n,disabled:!E}),"data-qa":"input-wrapper",children:[S&&r.getSymbol(P)&&(null!==D||y)&&(0,Dr.jsxs)("div",{className:(0,Rr.A)("shrink-0 self-center text-sans-serif",{"label-3 text-gray-80 me-1":!y&&!g}),"aria-hidden":"true","data-qa":"currency-symbol",children:[r.getSymbol(P),F&&(0,Dr.jsx)(Dr.Fragment,{children:" "})]}),(0,Dr.jsxs)("label",{className:(0,Rr.A)("grow-1",{"p-rel":y}),"data-qa":u+"-label",children:[(0,Dr.jsxs)("span",{className:"sr-only",children:[O.translate("donateForm.donationAmountField.label")," ",P]}),y&&(0,Dr.jsx)("span",{className:"price-control invisible","aria-hidden":"true","data-qa":u+"-value",children:B}),E?(0,Dr.jsx)(Bm,Object.assign({ref:t,className:(0,Rr.A)(w("price-control"),{"p-abs inset-0":y,"body-1":null===D&&!g&&!y||null===D&&g&&I,"body-3":null===D&&g&&!I,disabled:C}),digits:r.getDigits(P),value:D,onChange:R,onBlur:M,onFocus:L,withoutFraction:l,pattern:"[\\d,.\\s]*",placeholder:"string"==typeof m?m:O.translate("donateForm.donationAmountField.placeholder"),disabled:A||C,"aria-invalid":T,"aria-describedby":`price-control-${x}-error`,dataQa:u,trackingElement:h,donationType:p,currency:P},k)):(0,Dr.jsx)("span",{className:w("price-control"),"data-qa":d,children:O.formatCurrency(D||0,{currency:P,display:"floatcents",withoutPrefix:!0})})]}),T&&_&&(0,Dr.jsx)(Dr.Fragment,{children:y?(0,Dr.jsx)("p",{id:`price-control-${x}-error`,className:"sr-only",dangerouslySetInnerHTML:{__html:_},"data-testid":"amount-input-error"}):(0,Dr.jsx)(Eu.U,{className:"shrink-0 self-center me-1",showTooltip:n,"data-testid":"price-control-error",children:(0,Dr.jsx)("p",{id:`price-control-${x}-error`,dangerouslySetInnerHTML:{__html:_}})})}),y?N:(0,Dr.jsxs)("div",{className:"shrink-0 self-center p-rel",children:[N,(0,Dr.jsxs)("span",{className:(0,Rr.A)("currency-select-label d-flex items-center",{"ps-2 pe-1-5 border-radius-6":b,"px-2-5":!b,"py-2":!g,"py-1":g}),"data-qa":"selected-currency","aria-hidden":"true",children:[P,b&&(0,Dr.jsx)(Mm.A,{className:"currency-select-arrow icon-stroke font-size-16 shrink-0"})]})]})]})}));Gm.displayName="RawCurrencyInputSection";const qm=(0,Ia.memo)(Gm),{useAddFieldToScroll:Hm,useScrollToFieldsTrigger:Vm,ScrollToFieldsProvider:Km}=(0,uu.J)(),Ym={minHeight:"64px"},zm=["bottom"],Wm=e=>{let{className:t}=e;const{state:n,controller:i}=vc(oc.THANK_YOU),{postDonationUpsell:s}=n,a=(0,Qr.t)(),o=(0,cc.Q)(),r=(0,Ur.P)(),c=(0,Ia.useRef)(null),l=(0,jr.wf)(),[u,d]=(0,Ia.useState)(!s.isShowcase&&s.errors.min),[h,m]=(0,Ia.useState)(!s.isShowcase&&s.errors.max),p=(0,Ia.useCallback)((()=>u?a.translate("thankYouScreen.postDonationUpsell.error.min",{amount:a.formatCurrency(s.recurringMinAmount,{currency:n.currency,display:"round"})}):h?a.translate("thankYouScreen.postDonationUpsell.error.max",{amount:a.formatCurrency(s.upsellMaxAmount,{currency:n.currency,display:"round"})}):""),[a,h,u,n.currency,s.recurringMinAmount,s.upsellMaxAmount]);(0,Hl.f)({ref:c,autoFocus:s.showAmountInput,mode:ql.Q.ALL});const g=(0,Ia.useCallback)((e=>{i.changePduAmount(e)}),[i]),y=bc(),f=(0,Ia.useMemo)((()=>y.getSymbol(n.currency)),[y,n.currency]),E=(0,Ia.useMemo)((()=>(0,Rm.p)(n.currency,a.locale)),[a.locale,n.currency]),S=Cu(s.shakeKey,0!==s.shakeKey),v=(0,Ia.useCallback)((()=>{d(!s.isShowcase&&s.errors.min),m(!s.isShowcase&&s.errors.max)}),[s.isShowcase,s.errors.min,s.errors.max]);(0,Ia.useEffect)((()=>{d(!s.isShowcase&&s.errors.min),m(!s.isShowcase&&s.errors.max)}),[s.isShowcase,s.errors.min,s.errors.max]);const A=(0,Ia.useCallback)((()=>{i.makePduAmountInputVisible()}),[i]);return Hm(c,(e=>!e.postDonationUpsell.isAmountValid)),(0,Dr.jsxs)("div",{className:(0,Rr.A)("d-flex flex-column items-center",t),style:Ym,children:[(0,Dr.jsx)(Kc.S,{content:(0,Dr.jsx)("p",{dangerouslySetInnerHTML:{__html:p()}}),trigger:"manual",manualOpen:u||h,className:r?"ui-tooltip-mobile":"ui-tooltip-desktop",placement:o?"left":"right",fallbackPlacements:zm,maxWidth:"300px",rootContainer:l,"data-qa":"amount-error-popover",children:(0,Dr.jsx)("div",{className:"max-w-100",children:(0,Dr.jsx)(qm,{ref:c,className:(0,Rr.A)("group-frequency-control",{"bg-white border-radius-base":s.showAmountInput,shake:S,disabled:n.locked&&s.showAmountInput}),currency:n.currency,amount:s.amount,onAmountChange:g,canModifyAmount:!0,currencyService:y,showCurrencySymbol:!0,currencyCodeNode:(0,Dr.jsxs)("span",{className:(0,Rr.A)("subtitle-3 shrink-0 text-nowrap ms-1",{"text-gray-60":s.showAmountInput}),children:[!f&&E,"/",a.translate("widgetSubscriptionPeriodLabel.monthly.short")]}),isPDUPriceInput:!0,hasError:!s.isAmountValid,errorLabel:p(),onAmountInputBlur:v,showDisabledInput:!s.showAmountInput,qaActiveAttribute:"post-donation-amount-input",trackingElement:"postDonationInput",placeholder:"",disabled:n.locked&&s.showAmountInput,donationType:n.flowType})})}),!s.showAmountInput&&(0,Dr.jsx)("button",{type:"button",className:"btn-link link-3 text-white-hover-white text-truncate max-w-100 opacity-75",disabled:n.locked,onClick:A,"data-qa":"post-donation-another-amount","data-tracking-element-name":"postDonationAnotherAmountButton",children:a.translate("thankYouScreen.postDonationUpsell.amount.link")})]})},$m=(0,Ia.memo)(Wm),Xm=()=>{const{state:e,controller:t}=vc(oc.THANK_YOU),{postDonationUpsell:n}=e,i=(0,Qr.t)(),s=(0,Ur.P)(),a=(0,Ia.useRef)(null),o=Vm();return(0,Dr.jsxs)(Dr.Fragment,{children:[s&&(0,Dr.jsx)(Mr.A,{nodeRef:a,in:n.confirmError,timeout:200,classNames:"rtg-fade",mountOnEnter:!0,unmountOnExit:!0,children:(0,Dr.jsx)(Bu,{setRef:a,className:"text-center mb-3",role:n.confirmError?"alert":"none",children:(0,Dr.jsx)(Fu,{errorTitle:i.safeTranslate("thankYouScreen.postDonationUpsell.error.service"),dataQa:"post-donation-upsell-confirm-error"})})}),(0,Dr.jsx)(Kc.S,{content:(0,Dr.jsx)(Fu,{errorTitle:i.safeTranslate("thankYouScreen.postDonationUpsell.error.service"),dataQa:"post-donation-upsell-confirm-error"}),trigger:"manual",manualOpen:!s&&n.confirmError,className:s?"ui-tooltip-mobile":"ui-tooltip-desktop",placement:"top",maxWidth:"300px",hasPortal:!1,children:(0,Dr.jsx)("button",{type:"button",className:"btn pdu-confirm-btn",disabled:e.locked||n.confirmError,onClick:()=>{o(),t.pduAccept()},"data-qa":"post-donation-upsell-confirm","data-tracking-element-name":"confirmButton",children:i.translate("thankYouScreen.postDonationUpsell.button.confirm",{recurringType:t.periodLabelPdu})})}),(0,Dr.jsx)("button",{type:"button",className:"btn pdu-skip-btn mt-2",disabled:e.locked,onClick:()=>(0,c.sH)(void 0,void 0,void 0,(function*(){yield t.closePduScreen()})),"data-qa":"post-donation-not-this-time","data-tracking-element-name":"skipButton",children:i.translate("thankYouScreen.postDonationUpsell.button.cancel")})]})},Qm=(0,Ia.memo)(Xm),Zm=e=>{let{className:t}=e;const{state:n,controller:i}=vc(oc.THANK_YOU),{postDonationUpsell:s}=n,a=(0,Ur.P)(),o=(0,Qr.t)(),r=(0,Ia.useMemo)((()=>(0,Dr.jsx)(uc,{token:"thankYouScreen.postDonationUpsell.message",params:{date:o.formatDate(s.startDate)}})),[o,s.startDate]);return(0,Ia.useEffect)((()=>{i.pduSetShowedInSession()}),[i]),(0,Dr.jsx)("div",{className:(0,Rr.A)("text-white bg-primary p-4 border-radius-12",t),"data-qa":"post-donation-upsell-block",children:(0,Dr.jsxs)("div",{className:"fixed-container",children:[(0,Dr.jsx)("h4",{className:(0,Rr.A)("subtitle-4 text-center max-w-100",a?"text-ellipsis":"text-truncate"),children:o.translate("thankYouScreen.postDonationUpsell.title")}),(0,Dr.jsx)("p",{className:(0,Rr.A)("body-3 text-with-nowrap text-center max-w-100 mt-1",a?"text-ellipsis":"text-line-clamp-4"),children:r}),(0,Dr.jsx)($m,{className:"mt-3"}),(0,Dr.jsx)(yc,{size:24}),(0,Dr.jsx)(Qm,{})]})})},Jm=(0,Ia.memo)(Zm);var ep;function tp(){return tp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},tp.apply(null,arguments)}var np=function(e,t){return Ia.createElement("svg",tp({fill:"none",height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",ref:t},e),ep||(ep=Ia.createElement("path",{clipRule:"evenodd",d:"m21.999 12c0 5.5228-4.4771 10-10 10-5.52282 0-9.99998-4.4772-9.99998-10 0-5.52285 4.47716-10 9.99998-10 5.5229 0 10 4.47715 10 10zm-4.1446-2.84096c.2929-.29289.2929-.76777 0-1.06066-.2928-.29289-.7677-.29289-1.0606 0l-6.83456 6.83452-2.81739-2.8173c-.2929-.2929-.76777-.2929-1.06066 0s-.29289.7678.00001 1.0607l3.34772 3.3476c.29289.2929.76778.2929 1.06068 0z",fill:"currentColor",fillRule:"evenodd"})))},ip=(0,Ia.forwardRef)(np),sp=(0,Ia.memo)(ip);const ap=e=>{let{className:t,hasTribute:n}=e;const i=(0,Qr.t)(),s=(0,Ur.P)(),a=(0,zr.$)(),o=Gr(),{isTestGroup:r}=xc(),c=!a&&r;return(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsxs)("div",{className:(0,Rr.A)(o("thank-you-badge"),"p-rel d-flex items-center justify-center bg-green-10 px-8",t,{"thank-you-badge-animated":c}),"data-qa":"thank-you-badge",children:[(0,Dr.jsx)(sp,{className:"shrink-0 icon-fill font-size-20 text-green-90 me-2","aria-hidden":!0}),(0,Dr.jsx)("p",{className:"body-2 text-truncate",children:i.translate("common.thankYouBadge")})]}),c&&(0,Dr.jsx)("div",{className:(0,Rr.A)(o("fake-progress"),{"has-tribute":n&&!s})})]})},op=(0,Ia.memo)(ap),rp=e=>{let{transitionEntered:t,ThankYouAnimation:n,displayPDU:i,thankYouTitle:s,descriptionPDU:a,descriptionSharing:o,descriptionUpsell:r,handleCloseClick:c}=e;const l=(0,Qr.t)(),u=(0,Ur.P)(),d=(0,Ia.useRef)(null),h=(0,Ia.useRef)(null),m=(0,Ia.useRef)(null),[p,g]=(0,Ia.useState)(i),[y,f]=(0,Ia.useState)(24);(0,Ia.useEffect)((()=>{const e=setTimeout((()=>{g(i)}),150);return()=>{clearTimeout(e)}}),[i]),(0,Ia.useEffect)((()=>{if(m.current&&i){const e=m.current.offsetHeight;f(e)}}),[i,a]);const E={height:`${y}px`};return(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsx)(op,{className:(0,Rr.A)("shrink-0 border-radius-10 mt-2",u?"mx-3":"mx-2")}),(0,Dr.jsx)(yc,{size:u?40:32,sizeMin:24}),(0,Dr.jsx)(Al,{className:"px-body shrink-0",children:(0,Dr.jsxs)("div",{className:"fixed-container grow-1 d-flex flex-column justify-center",children:[(0,Dr.jsx)(n,{className:"mx-auto",transitionEntered:t}),(0,Dr.jsx)("h2",{className:(0,Rr.A)("title-1 text-center mt-4",u?"text-ellipsis":"text-line-clamp-2"),"data-qa":"sharing-disable-thank-you-title",children:s}),(0,Dr.jsx)(wm.A,{children:(0,Dr.jsx)(Mr.A,{nodeRef:d,timeout:200,classNames:r?"rtg-thank-you-description":"",children:(0,Dr.jsx)("div",{ref:d,className:"p-rel mt-2",style:E,children:i?(0,Dr.jsx)("p",{ref:m,className:(0,Rr.A)("p-abs inset-top-start inset-top-end text-center",u?"text-ellipsis":"text-line-clamp-2"),"data-qa":"post-donation-upsell-title-label",children:a}):(0,Dr.jsx)("p",{className:(0,Rr.A)("p-abs inset-top-start inset-top-end text-with-nowrap text-center",u?"text-ellipsis":"text-line-clamp-5"),"data-qa":"sharing-disable-thank-you-text",dangerouslySetInnerHTML:{__html:r||o}})})},i?"before-pdu-label":"after-pdu-label")})]})}),(0,Dr.jsx)(wm.A,{children:(0,Dr.jsx)(Mr.A,{nodeRef:h,timeout:250,classNames:"rtg-pdu-display-default",children:(0,Dr.jsx)("div",{ref:h,className:"shrink-0",children:p?(0,Dr.jsx)(Jm,{className:u?"mt-12 mx-3 mb-13":"mt-5 mx-1 mb-1"}):(0,Dr.jsxs)(Ll,{className:u?"pt-12":"pt-8 pb-9",children:[(0,Dr.jsx)(yc,{size:48}),(0,Dr.jsx)("div",{className:"d-flex justify-center",children:(0,Dr.jsx)("button",{type:"button",className:"btn-link text-truncate",onClick:c,"data-qa":"close","data-tracking-element-name":"closeButton",children:l.translate("thankYouScreen.button")})})]})})},p?"before-pdu":"after-pdu")})]})},cp=(0,Ia.memo)(rp);var lp,up;function dp(){return dp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},dp.apply(null,arguments)}var hp,mp,pp,gp=function(e,t){return Ia.createElement("svg",dp({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.4,strokeLinecap:"round",strokeLinejoin:"round",ref:t},e),lp||(lp=Ia.createElement("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"})),up||(up=Ia.createElement("polyline",{points:"22,6 12,13 2,6"})))},yp=(0,Ia.forwardRef)(gp),fp=(0,Ia.memo)(yp);function Ep(){return Ep=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ep.apply(null,arguments)}var Sp,vp=function(e,t){return Ia.createElement("svg",Ep({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.4,strokeLinecap:"round",strokeLinejoin:"round",ref:t},e),hp||(hp=Ia.createElement("circle",{cx:12,cy:12,r:1})),mp||(mp=Ia.createElement("circle",{cx:19,cy:12,r:1})),pp||(pp=Ia.createElement("circle",{cx:5,cy:12,r:1})))},Ap=(0,Ia.forwardRef)(vp),Cp=(0,Ia.memo)(Ap);function Pp(){return Pp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Pp.apply(null,arguments)}var Np,bp=function(e,t){return Ia.createElement("svg",Pp({fill:"none",height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",ref:t},e),Sp||(Sp=Ia.createElement("path",{d:"m24 12c0-6.6288-5.3712-12-12-12s-12 5.3712-12 12c0 5.6256 3.8736 10.3488 9.1008 11.6448v-7.9776h-2.4768v-3.6672h2.4768v-1.5792c0-4.0848 1.848-5.976 5.856-5.976.7584 0 2.0736.1488 2.6064.2976v3.3216c-.2832-.0288-.7728-.0432-1.3872-.0432-1.968 0-2.7264.744-2.7264 2.6832v1.296h3.9216l-.672 3.6672h-3.2448v8.2464c5.9424-.72 10.5456-5.7792 10.5456-11.9136z",fill:"#0866ff"})))},Dp=(0,Ia.forwardRef)(bp),Tp=(0,Ia.memo)(Dp);function _p(){return _p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_p.apply(null,arguments)}var kp,Op=function(e,t){return Ia.createElement("svg",_p({fill:"none",height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",ref:t},e),Np||(Np=Ia.createElement("g",{clipRule:"evenodd",fillRule:"evenodd"},Ia.createElement("path",{d:"m2.66641 23.9977h18.66489c1.4726 0 2.6664-1.1938 2.6664-2.6664v-18.66489c0-1.47262-1.1938-2.66641-2.6664-2.66641h-18.66489c-1.47262 0-2.66641 1.19379-2.66641 2.66641v18.66489c0 1.4726 1.19379 2.6664 2.66641 2.6664z",fill:"#007ebb"}),Ia.createElement("path",{d:"m20.6642 20.6647h-3.5611v-6.0654c0-1.663-.6319-2.5923-1.9481-2.5923-1.4319 0-2.18.9671-2.18 2.5923v6.0654h-3.43196v-11.55446h3.43196v1.55636s1.0319-1.90937 3.4838-1.90937c2.4508 0 4.2054 1.49657 4.2054 4.59187zm-15.21543-13.06743c-1.16899 0-2.11625-.95469-2.11625-2.13213s.94726-2.13213 2.11625-2.13213c1.16898 0 2.11568.95469 2.11568 2.13213s-.9467 2.13213-2.11568 2.13213zm-1.7721 13.06743h3.57861v-11.55446h-3.57861z",fill:"#fff"}))))},Ip=(0,Ia.forwardRef)(Op),xp=(0,Ia.memo)(Ip);function wp(){return wp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},wp.apply(null,arguments)}var Rp,Mp,Lp=function(e,t){return Ia.createElement("svg",wp({fill:"none",height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",ref:t},e),kp||(kp=Ia.createElement("path",{d:"m13.9139 10.4273 7.4524-8.6629h-1.766l-6.4709 7.52184-5.16835-7.52184h-5.96105l7.81552 11.3743-7.81552 9.0844h1.76609l6.83351-7.9433 5.4581 7.9433h5.9611l-8.1054-11.7958zm-2.4189 2.8117-.7919-1.1327-6.30067-9.01241h2.71261l5.08476 7.27331.7918 1.1326 6.6096 9.4543h-2.7127l-5.3935-7.7147z",fill:"#000"})))},Up=(0,Ia.forwardRef)(Lp),Fp=(0,Ia.memo)(Up);!function(e){e.FACEBOOK="Facebook",e.TWITTER="Twitter",e.LINKEDIN="Linkedin",e.EMAIL="Email",e.MORE="More",e.LINK="Link"}(Rp||(Rp={})),function(e){e.PAGE="page_thankyou",e.MODAL="modal_thankyou",e.HEADER="top_sharing_button"}(Mp||(Mp={}));const jp={width:"44px",height:"44px"},Bp=e=>{let{as:t,type:n,href:i,label:s,icon:a,className:o,trackingElement:r,dataQa:c,onClick:l}=e;const u=null!=t?t:"button";return(0,Dr.jsx)(u,{href:null!=i?i:void 0,type:null!=n?n:void 0,className:(0,Rr.A)("btn btn-default d-flex justify-center items-center py-0",o),style:jp,"aria-label":s,onClick:()=>null==l?void 0:l(),"data-tracking-element-name":r,"data-qa":c,children:a})},Gp=e=>{let{className:t,showFacebook:n,showTwitter:i,showLinkedin:s,showEmail:a,sharingText:o,share:r,getSharingLink:l}=e;const d=(0,Qr.t)(),h=(0,Ur.P)(),m=(0,zr.$)(),p=Tc(),{share:g,isAvailable:y}=((e,t)=>{const[n,i]=(0,Ia.useState)(!1),[s,a]=(0,Ia.useState)(!1),[o,r]=(0,Ia.useState)(null);(0,Ia.useEffect)((()=>{let t=!1;"function"==typeof navigator.share&&void 0!==navigator.canShare&&(t=navigator.canShare(e)),i(t)}),[e]);const l=(0,Ia.useCallback)((()=>(0,c.sH)(void 0,void 0,void 0,(function*(){if(n){if(!s){a(!0);try{yield navigator.share(e)}catch(e){if(r(null==e?void 0:e.message),"AbortError"!==e.name||!t)throw e;t.trackCheckoutCustomEvent({type:u.WEB_SHARE_API_MORE_OPTIONS_ABORTED})}finally{a(!1)}}}else r("Web Share API is not available or disabled.")}))),[n,s,e,t]);return(0,Ia.useMemo)((()=>({isAvailable:n,share:l,isSharing:s,errorMessage:o})),[n,l,s,o])})({text:o,url:l(Rp.MORE)},p),f=h&&y;return(0,Dr.jsx)("div",{className:(0,Rr.A)("text-center",t),role:"group","aria-label":d.translate("sharing.ariaLabel"),children:(0,Dr.jsxs)("div",{className:"d-flex justify-center item-center",children:[n&&(0,Dr.jsx)(Bp,{type:"button",label:d.translate("sharing.facebookAriaLabel"),icon:(0,Dr.jsx)(Tp,{className:"icon font-size-20","aria-hidden":!0}),className:"shrink-0 mx-1",onClick:()=>r(Rp.FACEBOOK,Mp.MODAL),trackingElement:"shareOnFacebook",dataQa:"share-via-facebook"}),i&&(0,Dr.jsx)(Bp,{type:"button",label:d.translate("sharing.twitterAriaLabel"),icon:(0,Dr.jsx)(Fp,{className:"icon font-size-20","aria-hidden":!0}),className:"shrink-0 mx-1",onClick:()=>r(Rp.TWITTER,Mp.MODAL),trackingElement:"shareOnTwitter",dataQa:"share-via-twitter"}),s&&(0,Dr.jsx)(Bp,{type:"button",label:d.translate("sharing.linkedinAriaLabel"),icon:(0,Dr.jsx)(xp,{className:"icon font-size-20","aria-hidden":!0}),className:"shrink-0 mx-1",onClick:()=>r(Rp.LINKEDIN,Mp.MODAL),trackingElement:"shareOnLinkedin",dataQa:"share-via-linkedin"}),a&&(0,Dr.jsx)(Bp,{as:"a",href:m?void 0:l(Rp.EMAIL),label:d.translate("sharing.emailAriaLabel"),icon:(0,Dr.jsx)(fp,{className:"icon font-size-20","aria-hidden":!0}),className:"shrink-0 mx-1",trackingElement:"shareOnEmail",dataQa:"share-via-email"}),f&&(0,Dr.jsx)(Bp,{type:"button",label:d.translate("sharing.moreOptionsAriaLabel"),icon:(0,Dr.jsx)(Cp,{className:"icon font-size-20","aria-hidden":!0}),className:"shrink-0 mx-1",onClick:g,trackingElement:"shareOnMoreOptions",dataQa:"share-via-more-options"})]})})},qp=(0,Ia.memo)(Gp),Hp={minHeight:"48px"},Vp=e=>{let{transitionEntered:t,ThankYouAnimation:n,displayPDU:i,thankYouTitle:s,descriptionPDU:a,descriptionSharing:o,descriptionUpsell:r,showFacebook:c,showTwitter:l,showLinkedin:u,showEmail:d,sharingText:h,share:m,getSharingLink:p,handleCloseClick:g}=e;const y=(0,Qr.t)(),f=(0,Ur.P)(),E=(0,Ia.useRef)(null),S=(0,Ia.useRef)(null),v=(0,Ia.useRef)(null),[A,C]=(0,Ia.useState)(i),[P,N]=(0,Ia.useState)(24);(0,Ia.useEffect)((()=>{const e=setTimeout((()=>{C(i)}),150);return()=>{clearTimeout(e)}}),[i]),(0,Ia.useEffect)((()=>{if(v.current&&i){const e=v.current.offsetHeight;N(e)}}),[i,a]);const b={height:`${P}px`};return(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsx)(op,{className:(0,Rr.A)("shrink-0 border-radius-10 mt-2",f?"mx-3":"mx-2")}),(0,Dr.jsx)(yc,{size:f?40:32,sizeMin:24}),(0,Dr.jsx)(Al,{className:"px-body shrink-0",children:(0,Dr.jsxs)("div",{className:"fixed-container grow-1 d-flex flex-column justify-center",children:[(0,Dr.jsx)(n,{className:"mx-auto",transitionEntered:t}),(0,Dr.jsx)("h2",{className:(0,Rr.A)("title-1 text-center mt-4",f?"text-ellipsis":"text-line-clamp-2"),"data-qa":"thank-you-header-title",children:s}),(0,Dr.jsx)(wm.A,{children:(0,Dr.jsx)(Mr.A,{nodeRef:E,timeout:200,classNames:r?"rtg-thank-you-description":"",children:(0,Dr.jsx)("div",{ref:E,className:"p-rel mt-2",style:b,children:i?(0,Dr.jsx)("p",{ref:v,className:(0,Rr.A)("p-abs inset-top-start inset-top-end text-center",f?"text-ellipsis":"text-line-clamp-2"),"data-qa":"post-donation-upsell-title-label",children:a}):(0,Dr.jsx)("p",{className:(0,Rr.A)("p-abs inset-top-start inset-top-end text-with-nowrap text-center",f?"text-ellipsis":"text-line-clamp-5"),"data-qa":"thank-you-header-label",dangerouslySetInnerHTML:{__html:r||o}})})},i?"before-pdu-label":"after-pdu-label")})]})}),(0,Dr.jsx)(wm.A,{children:(0,Dr.jsx)(Mr.A,{nodeRef:S,timeout:250,classNames:"rtg-pdu-display-sharing",children:(0,Dr.jsx)("div",{ref:S,className:"shrink-0",children:A?(0,Dr.jsx)(Jm,{className:f?"mt-12 mx-3 mb-13":"mt-5 mx-1 mb-1"}):(0,Dr.jsxs)(Ll,{className:f?"pt-12":"pt-8 pb-9",children:[(0,Dr.jsx)("div",{className:"d-flex flex-column justify-end",style:Hp,children:(0,Dr.jsx)("p",{className:(0,Rr.A)("subtitle-4 text-center",f?"text-ellipsis":"text-line-clamp-2"),children:y.translate("sharing.label")})}),(0,Dr.jsx)(qp,{className:"mt-4",showFacebook:c,showTwitter:l,showLinkedin:u,showEmail:d,sharingText:h,share:m,getSharingLink:p}),(0,Dr.jsx)("div",{className:"d-flex justify-center mt-13",children:(0,Dr.jsx)("button",{type:"button",className:"btn-link text-truncate",onClick:g,"data-qa":"close","data-tracking-element-name":"closeButton",children:y.translate("thankYouScreen.button")})})]})})},A?"before-pdu":"after-pdu")})]})},Kp=(0,Ia.memo)(Vp),Yp=e=>{var t,n;const i=Yl();return(0,Dr.jsxs)("svg",{className:(0,Rr.A)(e.className),"aria-hidden":!!e.ariaHidden||void 0,fill:"none",height:null!==(t=e.height)&&void 0!==t?t:48,viewBox:"0 0 48 48",width:null!==(n=e.width)&&void 0!==n?n:48,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[(0,Dr.jsxs)("filter",{id:`a-${i}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"52.4762",width:"45",x:"1.5",y:"-9.47619",children:[(0,Dr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Dr.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Dr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Dr.jsx)("feMorphology",{in:"SourceAlpha",operator:"erode",radius:"14.4762",result:"effect1_innerShadow_8986_17764"}),(0,Dr.jsx)("feOffset",{dy:"-14.4762"}),(0,Dr.jsx)("feGaussianBlur",{stdDeviation:"12.0635"}),(0,Dr.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Dr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 0.439937 0 0 0 0 0.429167 0 0 0 1 0"}),(0,Dr.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_8986_17764"}),(0,Dr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Dr.jsx)("feOffset",{dy:"-9.65079"}),(0,Dr.jsx)("feGaussianBlur",{stdDeviation:"4.8254"}),(0,Dr.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Dr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.941667 0 0 0 0 0.0293161 0 0 0 0 0.0117708 0 0 0 1 0"}),(0,Dr.jsx)("feBlend",{in2:"effect1_innerShadow_8986_17764",mode:"normal",result:"effect2_innerShadow_8986_17764"})]}),(0,Dr.jsxs)("filter",{id:`b-${i}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"14",width:"14",x:"29.5",y:"26",children:[(0,Dr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Dr.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Dr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Dr.jsx)("feOffset",{dx:"-1",dy:"-1"}),(0,Dr.jsx)("feGaussianBlur",{stdDeviation:"1"}),(0,Dr.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Dr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.843137 0 0 0 0 0 0 0 0 0 0.14902 0 0 0 0.75 0"}),(0,Dr.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_8986_17764"})]}),(0,Dr.jsxs)("linearGradient",{id:`c-${i}`,children:[(0,Dr.jsx)("stop",{offset:"0",stopColor:"#ef5350"}),(0,Dr.jsx)("stop",{offset:".766418",stopColor:"#f00703"}),(0,Dr.jsx)("stop",{offset:"1",stopColor:"#d90400"})]}),(0,Dr.jsx)("linearGradient",{id:`d-${i}`,gradientUnits:"userSpaceOnUse",x1:"13.5",x2:"26",xlinkHref:`#c-${i}`,y1:"9",y2:"40"}),(0,Dr.jsxs)("radialGradient",{id:`e-${i}`,cx:"0",cy:"0",gradientTransform:"matrix(8.99996281 14.49996639 -14.49996639 8.99996281 32.5 30)",gradientUnits:"userSpaceOnUse",r:"1",children:[(0,Dr.jsx)("stop",{offset:"0",stopColor:"#fff"}),(0,Dr.jsx)("stop",{offset:".674662",stopColor:"#e7e7e7"}),(0,Dr.jsx)("stop",{offset:"1",stopColor:"#c4c4c4"})]}),(0,Dr.jsx)("linearGradient",{id:`f-${i}`,gradientUnits:"userSpaceOnUse",x1:"33.9667",x2:"38.7609",xlinkHref:`#c-${i}`,y1:"28.3684",y2:"38.4087"}),(0,Dr.jsx)("g",{filter:`url(#a-${i})`,children:(0,Dr.jsx)("path",{d:"m24 43c41.6475-22.8943 15.6537-49.10252 0-33.05744-15.65373-16.04526-41.6475 10.16294 0 33.05744z",fill:`url(#d-${i})`})}),(0,Dr.jsx)("circle",{cx:"37",cy:"33.5",fill:`url(#e-${i})`,r:"9.5"}),(0,Dr.jsx)("g",{filter:`url(#b-${i})`,children:(0,Dr.jsx)("path",{d:"m38.5 28.5c0-.8284-.6716-1.5-1.5-1.5s-1.5.6716-1.5 1.5v3.5h-3.5c-.8284 0-1.5.6716-1.5 1.5s.6716 1.5 1.5 1.5h3.5v3.5c0 .8284.6716 1.5 1.5 1.5s1.5-.6716 1.5-1.5v-3.5h3.5c.8284 0 1.5-.6716 1.5-1.5s-.6716-1.5-1.5-1.5h-3.5z",fill:`url(#f-${i})`})})]})},zp=(0,Ia.memo)(Yp),Wp=e=>{let{className:t,isMobileView:n,onMakeAnotherDonation:i}=e;return(0,Dr.jsxs)("button",{type:"button",className:(0,Rr.A)("btn btn-default h-auto d-flex items-center text-start text-wrap-normal px-6 py-4",t),onClick:i,"data-qa":"tribute-make-another","data-tracking-element-name":"makeAnotherTribute",children:[(0,Dr.jsx)(zp,{className:"shrink-0 me-5",width:32,height:32,ariaHidden:!0}),(0,Dr.jsx)(uc,{className:(0,Rr.A)("body-1 grow-1",n?"text-ellipsis":"text-line-clamp-2"),token:"thankYouScreen.makeAnotherTribute.button"})]})},$p=(0,Ia.memo)(Wp),Xp=e=>{var t,n;const i=(0,El.Y)();return(0,Dr.jsxs)("svg",{className:e.className,"aria-hidden":e.ariaHidden&&!0,fill:"none",height:null!==(t=e.height)&&void 0!==t?t:48,viewBox:"0 0 48 48",width:null!==(n=e.width)&&void 0!==n?n:48,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[(0,Dr.jsxs)("linearGradient",{id:`a-${i}`,children:[(0,Dr.jsx)("stop",{offset:"0",stopColor:"#afd9ff"}),(0,Dr.jsx)("stop",{offset:"1",stopColor:"#afd9ff",stopOpacity:"0"})]}),(0,Dr.jsx)("linearGradient",{id:`b-${i}`,gradientUnits:"userSpaceOnUse",x1:"50.5",x2:"31.9257",xlinkHref:`#a-${i}`,y1:"32",y2:"6.87716"}),(0,Dr.jsxs)("linearGradient",{id:`c-${i}`,gradientUnits:"userSpaceOnUse",x1:"16",x2:"20",y1:"39.5",y2:"40.5",children:[(0,Dr.jsx)("stop",{offset:"0",stopColor:"#8fbcff"}),(0,Dr.jsx)("stop",{offset:".208333",stopColor:"#8fbcff",stopOpacity:".813559"}),(0,Dr.jsx)("stop",{offset:".234375",stopColor:"#8fbcff",stopOpacity:"0"})]}),(0,Dr.jsxs)("linearGradient",{id:`d-${i}`,gradientUnits:"userSpaceOnUse",x1:"67.2852",x2:"2.79451",y1:"17.1454",y2:"39.9202",children:[(0,Dr.jsx)("stop",{offset:".442708",stopColor:"#fff",stopOpacity:"0"}),(0,Dr.jsx)("stop",{offset:"1",stopColor:"#fff"})]}),(0,Dr.jsx)("linearGradient",{id:`e-${i}`,gradientUnits:"userSpaceOnUse",x1:"25.5",x2:"40",xlinkHref:`#a-${i}`,y1:"20.5",y2:"27"}),(0,Dr.jsx)("path",{d:"m4.88359 25.1745h.00002l.05609-.0474h.00001l.03057-.0259c3.24586-2.7466 4.28803-3.6284 39.39632-18.14832l-33.4844 25.29342c-4.27204 1.4893-7.23131 1.0342-8.7118-.4983-.40047-.6047-.53429-1.5383-.16141-2.6895.37824-1.1677 1.27292-2.5289 2.8746-3.884z",fill:"#8fbcff",stroke:`url(#b-${i})`}),(0,Dr.jsx)("path",{d:"m47.7789 5.00045-36.6327 27.66835 3.9702 10.7136 2.3144-11.4342z",fill:"#5a9bfc"}),(0,Dr.jsx)("path",{d:"m24.7306 34.3642-8.8354 7.6768 1.9178-9.4742z",fill:"#2169d6",stroke:`url(#c-${i})`}),(0,Dr.jsx)("path",{d:"m17.9212 32.183 29.061-25.80479c-.2055.91261-.5316 2.26188-1.0254 4.07169-1.0305 3.7768-2.791 9.5588-5.7082 17.5634-2.6186 7.1853-6.5442 10.3049-10.3618 11.2275-3.8293.9254-7.6707-.3285-10.191-2.1484-.9843-1.0568-1.4305-2.3209-1.6277-3.3432-.0993-.5145-.134-.9608-.144-1.2765-.0036-.1154-.0039-.213-.0029-.2897z",fill:"#6ca7ff"}),(0,Dr.jsx)("path",{d:"m17.9212 32.183 29.061-25.80479c-.2055.91261-.5316 2.26188-1.0254 4.07169-1.0305 3.7768-2.791 9.5588-5.7082 17.5634-2.6186 7.1853-6.5442 10.3049-10.3618 11.2275-3.8293.9254-7.6707-.3285-10.191-2.1484-.9843-1.0568-1.4305-2.3209-1.6277-3.3432-.0993-.5145-.134-.9608-.144-1.2765-.0036-.1154-.0039-.213-.0029-.2897z",fill:`url(#d-${i})`,fillOpacity:".4"}),(0,Dr.jsx)("path",{d:"m17.9212 32.183 29.061-25.80479c-.2055.91261-.5316 2.26188-1.0254 4.07169-1.0305 3.7768-2.791 9.5588-5.7082 17.5634-2.6186 7.1853-6.5442 10.3049-10.3618 11.2275-3.8293.9254-7.6707-.3285-10.191-2.1484-.9843-1.0568-1.4305-2.3209-1.6277-3.3432-.0993-.5145-.134-.9608-.144-1.2765-.0036-.1154-.0039-.213-.0029-.2897z",stroke:`url(#e-${i})`})]})},Qp=(0,Ia.memo)(Xp),Zp=e=>{let{tributeDonorPortalLink:t,isMobileView:n}=e;return(0,Dr.jsxs)("a",{href:t,className:"btn btn-default h-auto d-flex items-center text-start text-wrap-normal px-6 py-4",target:"_blank",rel:"noreferrer","data-qa":"tribute-send-card","data-tracking-element-name":"completeDedication",children:[(0,Dr.jsx)(Qp,{className:"shrink-0 me-5",width:32,height:32,ariaHidden:!0}),(0,Dr.jsx)(uc,{className:(0,Rr.A)("body-1 grow-1",n?"text-ellipsis":"text-line-clamp-2"),token:"thankYouScreen.sendCard.button"})]})},Jp=(0,Ia.memo)(Zp),eg=e=>{let{transitionEntered:t,ThankYouAnimation:n,thankYouTitle:i,descriptionTribute:s,tributeDonorPortalLink:a,handleCloseClick:o,handleMakeAnotherDonationClick:r}=e;const c=(0,Qr.t)(),l=(0,Ur.P)();return(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsx)(op,{className:(0,Rr.A)("shrink-0 border-radius-10 mt-2",l?"mx-3":"mx-2"),hasTribute:!0}),(0,Dr.jsx)(Al,{className:(0,Rr.A)("px-body",l?"pt-10":"pt-8"),children:(0,Dr.jsxs)("div",{className:"fixed-container grow-1 d-flex flex-column justify-center",children:[(0,Dr.jsx)(n,{className:"mx-auto",transitionEntered:t}),(0,Dr.jsx)("h2",{className:(0,Rr.A)("title-1 text-center mt-4",l?"text-ellipsis":"text-line-clamp-2"),children:i}),(0,Dr.jsx)("p",{className:(0,Rr.A)("text-with-nowrap text-center mt-2",l?"text-ellipsis":"text-line-clamp-4"),dangerouslySetInnerHTML:{__html:s}})]})}),(0,Dr.jsxs)(Ll,{className:l?"pt-12":"pt-8 pb-9",children:[(0,Dr.jsx)(Jp,{tributeDonorPortalLink:a,isMobileView:l}),(0,Dr.jsx)($p,{className:"mt-3",isMobileView:l,onMakeAnotherDonation:r}),(0,Dr.jsx)("div",{className:"d-flex justify-center mt-8",children:(0,Dr.jsx)("button",{type:"button",className:"btn-link text-truncate",onClick:o,"data-qa":"close","data-tracking-element-name":"closeButton",children:c.translate("thankYouScreen.button")})})]})]})},tg=(0,Ia.memo)(eg),ng={[Vr.SHARING]:Kp,[Vr.TRIBUTE]:tg,[Vr.DEFAULT]:cp},ig={[Jn.SAD]:zh,[Jn.NEUTRAL]:vm,[Jn.HAPPY]:xm},sg=e=>{let{transitionEntered:t}=e;const{state:n,controller:i}=vc(oc.THANK_YOU),s=(0,Ur.P)(),a=wa(),o=ng[n.variant],r=ig[n.emotionalType],c=Tc(),l=(0,Ia.useRef)(!1),d=(0,_r.n)().getAskPageConfig().show,h=(0,Ia.useCallback)(((e,t)=>{i.share(e,t)}),[i]),m=(0,Ia.useCallback)((e=>i.getSharingLink(e)),[i]);return(0,Ia.useEffect)((()=>{l.current||(c.trackCheckoutCustomEvent({type:u.POST_DONATION_CELEBRATION_ANIMATION_SHOWN,data:i.postDonationCelebrationAnimationTrackingData}),l.current=!0)}),[c,i]),(0,Dr.jsxs)("div",{className:"flow-screen","data-qa":"active-screen-thank-you",children:[s&&!d&&(0,Dr.jsx)(Kl,{}),(0,Dr.jsx)(o,{transitionEntered:t,ThankYouAnimation:r,thankYouTitle:i.thankYouTitle,descriptionSharing:i.descriptionSharing,descriptionUpsell:i.descriptionUpsell,descriptionPDU:i.descriptionPdu,descriptionTribute:i.descriptionTribute,displayPDU:n.postDonationUpsell.displayPduScreen,showFacebook:n.sharing.showFacebook,showTwitter:n.sharing.showTwitter,showLinkedin:n.sharing.showLinkedin,showEmail:n.sharing.showEmail,sharingText:n.sharing.sharingText,share:h,getSharingLink:m,tributeDonorPortalLink:n.tributeDonorPortalLink,handleCloseClick:()=>{a.emit(Oa.SHOULD_HIDE,{})},handleMakeAnotherDonationClick:()=>{a.emit(Oa.SHOULD_HIDE,{shouldReopen:!0,tributeSelected:!0})}})]})},ag=(0,Ia.memo)(sg);var og;function rg(){return rg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},rg.apply(null,arguments)}var cg=function(e,t){return Ia.createElement("svg",rg({fill:"none",height:28,viewBox:"0 0 28 28",width:28,xmlns:"http://www.w3.org/2000/svg",ref:t},e),og||(og=Ia.createElement("path",{clipRule:"evenodd",d:"m2 14c0-6.62742 5.37258-12 12-12 6.6274 0 12 5.37258 12 12 0 6.6274-5.3726 12-12 12-6.62742 0-12-5.3726-12-12zm12-14c-7.73199 0-14 6.26801-14 14 0 7.732 6.26801 14 14 14 7.732 0 14-6.268 14-14 0-7.73199-6.268-14-14-14zm-4.10223 5.74899c-.14294-.53346-.69128-.85004-1.22475-.7071-.53346.14294-.85005.69128-.7071 1.22474l.87766 3.27549c-1.42369 1.64968-2.03436 3.95478-1.42697 6.22158s2.2888 3.9578 4.34659 4.6746l.8777 3.2758c.143.5335.6913.85 1.2248.7071s.85-.6913.7071-1.2247l-.6378-2.3802c.6039.0055 1.2181-.0698 1.8287-.2334.3343-.0896.6565-.2027.965-.3371l.5933 2.214c.1429.5335.6913.8501 1.2247.7071.5335-.1429.8501-.6913.7071-1.2247l-.7558-2.8206c.8423-.7407 1.4859-1.6767 1.8788-2.7157.1953-.5166-.0651-1.0937-.5817-1.2891-.5166-.1953-1.0937.0651-1.2891.5817-.3369.8912-.9339 1.6736-1.7219 2.232-.452.3203-.9684.5679-1.538.7206-.8223.2203-1.649.214-2.417.0207-1.6417-.4133-3.01255-1.6788-3.48064-3.4257-.4681-1.747.08637-3.5283 1.30144-4.7071.5685-.55143 1.2813-.97021 2.1035-1.19054.5697-.15263 1.1407-.19634 1.6923-.14497.9617.08956 1.8698.46873 2.6072 1.07201.4275.3497 1.0575.2867 1.4072-.1408.3497-.42746.2867-1.05748-.1408-1.40719-.8597-.70339-1.885-1.19215-2.9848-1.41247l-.7557-2.82032c-.1429-.53347-.6913-.85005-1.2248-.70711-.5334.14294-.85.69128-.7071 1.22475l.5932 2.21369c-.3345.03787-.67.10099-1.0043.19056-.6106.1636-1.1801.40556-1.7004.71221z",fill:"currentColor",fillRule:"evenodd"})))},lg=(0,Ia.forwardRef)(cg),ug=(0,Ia.memo)(lg);const dg=e=>{let{prevContent:t,content:n,disabled:i,onAddComment:s,onHighlight:a}=e;const o=(0,Qr.t)(),[r,c]=(0,Ia.useState)(!1);return(0,Ia.useEffect)((()=>{if(t===n||!n)return void c(!1);a(),c(!0);const e=window.setTimeout((()=>{c(!1)}),400);return()=>{window.clearTimeout(e)}}),[n,t,a]),(0,Dr.jsxs)("button",{type:"button",className:(0,Rr.A)("comment-btn btn-reset body-3 self-start",{"is-highlighted":r}),dir:"auto",disabled:i,onClick:()=>s(),"data-qa":"comment-link","data-tracking-element-name":"navigateToComment",children:[(0,Dr.jsx)("span",{className:"comment-highlight"}),n?(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsx)("span",{className:"comment-btn-title",children:o.translate("donateForm.comment.commentAdded")}),(0,Dr.jsx)("span",{className:"comment-btn-link",title:n,dir:"auto",children:n})]}):(0,Dr.jsx)(Dr.Fragment,{children:(0,Dr.jsx)("span",{className:"comment-btn-link",children:o.translate("donateForm.comment.label")})})]})},hg=(0,Ia.memo)(dg),mg=e=>{let{goal:t,className:n,disabled:i}=e;const s=(t?null==t?void 0:t.name:"").trim().split(" "),a=s.slice(0,-1).join(" "),o=s.length>1?` ${s.pop()}`:s.pop();return(0,Dr.jsxs)("span",{className:(0,Rr.A)("text-decor",n,{"pointer-events-none":i}),"data-qa":"selected-goal",children:[a,(0,Dr.jsxs)("span",{className:"text-nowrap",children:[o,(0,Dr.jsx)("span",{className:"icon-slot icon-slot-14 d-inline-block font-size-14","aria-hidden":!0,children:(0,Dr.jsx)(Mm.A,{className:"icon-stroke p-abs inset-centered mt-0-5"})})]})]})},pg=(0,Ia.memo)(mg),gg=(0,Ia.forwardRef)(((e,t)=>{let{goal:n,goals:i,goalKey:s,isEditable:a,shake:o,disabled:r,changeGoal:c,hasError:l,isDesignationRequired:u}=e;var d;const h=(0,Qr.t)(),m=Tc(),p=(0,Ur.P)(),g=Yl(),[y,f]=(0,Ia.useState)(!1),E=e=>{c(e.target.value),m.trackClick("goalSelector",e.target)},S=i.map((e=>({value:e.key,label:e.name})));return(0,Dr.jsx)(Dr.Fragment,{children:u?(0,Dr.jsx)(Bd,{setRef:t,id:`designation-${g}`,label:h.translate("donateForm.designation.label"),labelFloating:!0,error:l,className:(0,Rr.A)({"pe-16":l}),formLabelClass:(0,Rr.A)({"pe-12":l}),formGroupClass:(0,Rr.A)({shake:o}),value:null!=s?s:"",options:S,disabled:r,"aria-required":!0,"aria-describedby":`designation-${g}-error`,dataQa:"goal-selector","data-tracking-element-name":"goalSelect",onChange:E,onFocus:()=>f(!0),onBlur:()=>f(!1),children:l&&(0,Dr.jsx)(Eu.U,{className:"p-abs inset-centered-end z-index-5 me-10",showTooltip:y,dataQa:"goal-select",children:(0,Dr.jsx)("p",{id:`designation-${g}-error`,children:h.translate("donateForm.designation.error.required")})})}):(0,Dr.jsx)("div",{className:"designation self-start","data-qa":"goal-component",children:a?(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsx)("select",{id:`designation-${g}`,className:"designation-select p-abs inset-0 max-w-100 font-size-16 text-noselect p-0 border-0 m-0 overflow-hidden cursor-pointer z-index-1",value:null!=s?s:"",disabled:r,"aria-hidden":"true",onChange:E,"data-qa":"goal-selector","data-tracking-element-name":"goalSelect",children:i.map((e=>(0,Dr.jsx)("option",{value:e.key,children:e.name},e.key)))}),(0,Dr.jsxs)("label",{htmlFor:`designation-${g}`,className:(0,Rr.A)("designation-label",p?"d-block text-ellipsis":"text-line-clamp-2"),"data-qa":"goal-selector-label",children:[h.translate("donateForm.designation.label"),(0,Dr.jsx)(pg,{goal:n,className:"designation-text ms-1",disabled:r})]})]}):(0,Dr.jsxs)("p",{className:p?"text-ellipsis":"text-line-clamp-2",children:[h.translate("donateForm.designation.label"),(0,Dr.jsx)("span",{className:"ms-1","data-qa":"selected-goal",children:null!==(d=null==n?void 0:n.name)&&void 0!==d?d:""})]})})})}));gg.displayName="RawDesignationSection";const yg=(0,Ia.memo)(gg),fg={background:"rgba(255, 255, 255, 0.9)"},Eg=["top","bottom"],Sg=e=>{const{className:t,label:n,labelOptional:i,labelFloating:s,selectedOption:a,options:o,value:r,placeholder:l,displayName:u,inputClasses:d,loading:h,showIcons:m,showArrow:p,hint:g,hintAriaLabel:y,allowClear:f,maxLength:E,hasError:S,errorLabel:v,disabled:A,SelectedIconToRender:C,ListItemToRender:P,filterRegex:N,autoComplete:b="new-password",dataQa:D,trackingElement:T,autoFocus:_,autoFocusMode:k,onChange:O,onSelect:I,onBlur:x,onClear:w,onFocus:R}=e,M=(0,c.Tt)(e,["className","label","labelOptional","labelFloating","selectedOption","options","value","placeholder","displayName","inputClasses","loading","showIcons","showArrow","hint","hintAriaLabel","allowClear","maxLength","hasError","errorLabel","disabled","SelectedIconToRender","ListItemToRender","filterRegex","autoComplete","dataQa","trackingElement","autoFocus","autoFocusMode","onChange","onSelect","onBlur","onClear","onFocus"]),L=(0,Ur.P)(),U=(0,Qr.t)(),F=(0,cc.Q)(),j=(0,jr.wf)(),[B,G]=(0,Ia.useState)(!1),[q,H]=(0,Ia.useState)(!1),[V,K]=(0,Ia.useState)(null),Y=B&&!!o.length,z=(0,Ia.useRef)(null),W=(0,Ia.useRef)(null),$=(0,Ia.useRef)(null),X=(0,Ia.useRef)(null),Q=e=>{const t=I(e);H(!1),t||Z()},Z=()=>{if(G(!1),!W.current)throw new Error("inputRef was not provided");W.current.blur(),x&&x()},J=Yl();(0,Ia.useImperativeHandle)(e.inputRef,(()=>W.current),[]);const ee=void 0!==u?u:r,te=(null==r?void 0:r.length)>0;return(0,Dr.jsxs)("div",{ref:z,className:(0,Rr.A)("search-select",t),children:[(0,Dr.jsxs)(fu.t,Object.assign({setRef:W,id:`search-select-${J}`,label:n,labelFloating:s,labelOptional:i?U.translate("common.optional"):"",placeholder:l,customPrefix:m&&C&&(0,Dr.jsx)(C,{option:a,value:r,options:o,disabled:A}),className:(0,Rr.A)("search-select-input",d,{"search-select-input-active":Y,"search-select-input-offset-start":m,"search-select-input-offset-end":f,"search-select-input-with-arrow":p,"pe-10":S}),formLabelClass:(0,Rr.A)({"search-select-label-offset-start":m,"pe-6":f||S}),value:ee,autoComplete:b,maxLength:E,disabled:A,error:S,role:"combobox","aria-autocomplete":"list","aria-controls":`${J}-search-select-dropdown`,"aria-expanded":Y,"aria-activedescendant":`search-select-option-${V}`,"aria-describedby":`search-select-${J}-error`,dataQa:D,dataTestId:"search-input",dataTrackingElementName:T,onChange:e=>{return t=e.target.value,void(O&&O((n=t,void 0===N?n:n.split("").filter((e=>N.test(e))).join(""))));var t,n},onFocus:()=>{G(!0),R&&R()},onBlur:()=>!q&&Z(),onKeyDown:e=>{if(void 0!==N&&!N.test(e.key))return void e.preventDefault();if(!Y)return;const{currentOptionIdx:t,needSelectOption:n,closeDropdown:i}=(0,Lr.t)(e,V,o.length);i?Z():n&&null!==t?Q(o[t].id):null!==t&&K(t)},autoFocus:_,autoFocusMode:k},M,{children:[(!!g||f)&&(0,Dr.jsxs)("div",{className:"p-abs inset-centered-end d-flex items-center me-4",children:[!!g&&(0,Dr.jsx)(Dr.Fragment,{children:(0,Dr.jsx)(Kc.S,{content:!A&&g,trigger:"click",className:L?"ui-tooltip-mobile":"ui-tooltip-desktop",placement:F?"left":"right",fallbackPlacements:Eg,maxWidth:"220px",rootContainer:j,children:(0,Dr.jsx)("button",{type:"button",className:"btn-icon btn-icon-round font-size-18 text-gray-40 shrink-0 ms-1-5",disabled:A,"aria-label":y,"data-qa":"search-select-help-button",children:(0,Dr.jsx)(Rd.A,{className:(0,Rr.A)("icon-stroke d-block",{"icon-flip-horizontal":F}),"aria-hidden":!0})})})}),(0,Dr.jsx)(Mr.A,{classNames:"rtg-clear-button",nodeRef:X,in:te,timeout:100,mountOnEnter:!0,unmountOnExit:!0,children:(0,Dr.jsx)("button",{ref:X,type:"button",className:"btn-icon font-size-18 text-gray-60 shrink-0 ms-1-5",disabled:A,"aria-label":U.translate("common.clearButtonAriaLabel"),"data-qa":"search-select-clear-button",onClick:w,children:(0,Dr.jsx)(Lu.A,{className:"icon-stroke icon-stroke-2 d-block","aria-hidden":!0})})})]}),S&&v&&(0,Dr.jsx)(Eu.U,{className:"p-abs inset-centered-end z-index-5 me-4",showTooltip:B,children:(0,Dr.jsx)("p",{id:`search-select-${J}-error`,dangerouslySetInnerHTML:{__html:v}})})]})),Y&&(0,Dr.jsxs)("ul",{ref:$,id:`${J}-search-select-dropdown`,className:"search-select-dropdown custom-scrollbar",role:"listbox","data-testid":"menu",children:[h&&(0,Dr.jsx)("li",{className:"p-abs inset-0 d-flex items-center justify-center z-index-2",style:fg,"aria-label":U.translate("common.loading"),role:"status","aria-live":"polite",children:(0,Dr.jsx)("span",{className:"spinner spinner-lg spinner-primary","aria-hidden":!0})}),o.map(((e,t)=>(0,Dr.jsx)("li",{id:`search-select-option-${t}`,className:(0,Rr.A)("search-select-option",{"search-select-option-highlighted":t===V}),role:"option","aria-selected":t===V,"data-testid":"menuitem","data-tracking-element-name":T,"data-qa":D+"-item",onMouseDown:()=>H(!0),onClick:()=>Q(e.id),onMouseMove:()=>K(t),children:P?(0,Dr.jsx)(P,{option:e,showIcons:!0}):e.value},e.id)))]})]})};Sg.displayName="RawSearchManualSelect";const vg=(0,Ia.memo)(Sg),Ag=e=>{const{options:t,selectedOption:n,className:i,label:s,labelOptional:a,labelFloating:o,placeholder:r,shouldSearchById:l,displayName:u,clearOnFocus:d,isDynamicOptions:h,showArrow:m=!0,showIcons:p,SelectedIconToRender:g,ListItemToRender:y,disabled:f,hasError:E,trackingElement:S,dataQa:v,filterRegex:A,autoFocus:C,autoFocusMode:P,onChange:N,onSelect:b,onBlur:D}=e,T=(0,c.Tt)(e,["options","selectedOption","className","label","labelOptional","labelFloating","placeholder","shouldSearchById","displayName","clearOnFocus","isDynamicOptions","showArrow","showIcons","SelectedIconToRender","ListItemToRender","disabled","hasError","trackingElement","dataQa","filterRegex","autoFocus","autoFocusMode","onChange","onSelect","onBlur"]),[_,k]=(0,Ia.useState)((null==n?void 0:n.id)||""),[O,I]=(0,Ia.useState)(u),x=void 0!==u;(0,Ia.useEffect)((()=>{(null==n?void 0:n.id)&&k(null==n?void 0:n.id),x&&I(u)}),[u,x,n]);const w=(0,Ia.useCallback)((e=>(b(e),!1)),[b]),R=(0,Ia.useCallback)((e=>{k(e),N&&N(e),x&&I(e)}),[x,N]),M=(0,Ia.useMemo)((()=>{if(!t.length)return[];if(h)return t;const e=t.find((e=>{let{id:t}=e;return t===(null==n?void 0:n.id)}));if(_===(null==e?void 0:e.id))return[...t];const i=_.toLowerCase();return l?t.filter((e=>{let{id:t,value:n}=e;return n.toLowerCase().includes(i)||t.toLowerCase().includes(i)})):t.filter((e=>{let{value:t}=e;return t.toLowerCase().includes(i)}))}),[t,h,_,l,n]),L=(0,Ia.useCallback)((()=>{(null==n?void 0:n.id)?k(n.id):k(""),x&&I(u),null==D||D()}),[u,x,n,D]),U=(0,Ia.useCallback)((()=>{d&&x&&I("")}),[d,x]);return(0,Dr.jsx)(vg,Object.assign({options:M,value:_,onChange:R,onSelect:w,onBlur:L,onFocus:U,className:i,placeholder:r,label:s,labelOptional:a,labelFloating:o,displayName:O,isDynamicOptions:h,showArrow:m,showIcons:p,SelectedIconToRender:g,ListItemToRender:y,selectedOption:n,disabled:f,hasError:E,trackingElement:S,dataQa:v,filterRegex:A,autoFocus:C,autoFocusMode:P},T))};Ag.displayName="RawSearchFilterSelect";const Cg=(0,Ia.memo)(Ag),Pg=e=>{let{inHonorOfMaxLength:t,isActive:n,sharingEnabled:i,labelType:s,name:a,disabled:o,onInputFocusChange:r,onToggleTribute:c,onChangeTributeName:l}=e;const u=(0,Qr.t)(),d=(0,zr.$)(),h=(0,cc.Q)(),m=(0,Ur.P)(),p=Yl(),g=(0,jr.wf)(),[y,f]=(0,Ia.useState)(!1),[E,S]=(0,Ia.useState)(!1),v=n&&!d&&E,A=(0,_r.n)(),C=e=>{S(e),r&&r(e)};return(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsx)(lu,{className:"body-3",customLabelClasses:"line-height-20",checked:null!=n&&n,disabled:o,dataQa:"tribute-give-checkbox",trackingElement:"tributeCheckbox",onChange:()=>{f(!0),c()},children:(0,Dr.jsx)("span",{className:"text-truncate body-3","data-qa":"tribute-label",children:{[D.dR.IN_HONOR_MEMORY]:A.allowLegacyTributeLabel?u.translate("donateForm.tribute.label.inHonorMemory"):u.translate("donateForm.tribute.label.dedication"),[D.dR.DEDICATION]:u.translate("donateForm.tribute.label.dedication")}[s]})}),n&&(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsx)(Kc.S,{content:u.translate("donateForm.tribute.tooltipLabel"),trigger:"manual",manualOpen:v&&!m&&i,className:m?"ui-tooltip-mobile":"ui-tooltip-desktop",placement:h?"left":"right",maxWidth:"220px",rootContainer:g,"data-qa":"tribute-hint",children:(0,Dr.jsx)("div",{children:(0,Dr.jsx)(fu.t,{id:`tribute-${p}`,label:u.translate("donateForm.tribute.inputPlaceholder"),labelFloating:!0,formGroupClass:m?"mt-3":"mt-2",autoFocus:y,autoFocusMode:ql.Q.ALL,placeholder:u.translate("donateForm.tribute.inputPlaceholder"),value:null!=a?a:"",maxLength:t,disabled:o,onFocus:()=>C(!0),onBlur:()=>C(!1),onChange:e=>l(e.target.value),dataQa:"tribute-name"})})}),i&&m&&(0,Dr.jsx)("p",{className:"body-3 text-ellipsis mt-1-5","data-qa":"tribute-hint",children:u.translate("donateForm.tribute.tooltipLabel")})]})]})},Ng=(0,Ia.memo)(Pg);var bg,Dg;function Tg(){return Tg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Tg.apply(null,arguments)}var _g=function(e,t){return Ia.createElement("svg",Tg({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.4,strokeLinecap:"round",strokeLinejoin:"round",ref:t},e),bg||(bg=Ia.createElement("circle",{cx:11,cy:11,r:8})),Dg||(Dg=Ia.createElement("line",{x1:21,y1:21,x2:16.65,y2:16.65})))},kg=(0,Ia.forwardRef)(_g),Og=(0,Ia.memo)(kg);const Ig=(0,Ia.forwardRef)(((e,t)=>{if(void 0!==e.options){const n=e.options.find((t=>{let{id:n,value:i}=t;return n===e.name||i===e.name}));let i="";return n&&(i=n.id.toLowerCase()),i?(0,Dr.jsx)("span",{ref:t,className:(0,Rr.A)(`crypto-icon crypto-icon-${i} crypto-icon-${e.size}`,e.className),style:e.style,"aria-hidden":e.ariaHidden}):(0,Dr.jsx)(Og,{className:"icon-stroke font-size-20 text-gray-60","aria-hidden":!0})}const n=e.name.toLowerCase();return(0,Dr.jsx)("span",{ref:t,className:(0,Rr.A)(`crypto-icon crypto-icon-${n} crypto-icon-${e.size}`,e.className),style:e.style,"aria-hidden":e.ariaHidden})}));Ig.displayName="RawCryptoIcon";const xg=(0,Ia.memo)(Ig),wg=e=>(0,Dr.jsxs)(Dr.Fragment,{children:[e.showIcons&&(0,Dr.jsx)(xg,{name:e.option.id,size:"sm",className:"shrink-0 me-2",ariaHidden:!0}),(0,Dr.jsx)("span",{className:"text-ellipsis",children:e.option.value})]}),Rg=e=>(0,Dr.jsx)("div",{className:"search-select-input-icon","aria-hidden":!0,children:(0,Dr.jsx)(xg,{name:e.value,size:"md",options:e.options})}),Mg=(0,Ia.memo)(Rg),{useAddFieldToScroll:Lg,useScrollToFieldsTrigger:Ug,ScrollToFieldsProvider:Fg}=(0,uu.J)(),jg=()=>{const{state:e,controller:t}=vc(yl.CRYPTO_CURRENCY),n=(0,Qr.t)(),i=(0,Ur.P)(),s=Yl(),a=(0,zr.$)(),o=(0,_r.n)(),r=(0,Ia.useRef)(null),c=(0,Ia.useRef)(null),l=(0,Ia.useRef)(null);(0,Hl.f)({ref:r,autoFocus:!0,mode:ql.Q.DESKTOP});const u=!o.preselectDesignation,d=e.designation.shouldShowDesignation&&u,h=e.designation.shouldShowDesignation&&!u,m=Cu(e.designationShakeKey,0!==e.designationShakeKey),p=bc(),[g,y]=(0,Ia.useState)(!1),[f,E]=(0,Ia.useState)(!1),[S,v]=(0,Ia.useState)(!1),A=(0,Ia.useCallback)((()=>S?n.translate("donateForm.donationAmountField.error.crypto.required"):g?n.translate("donateForm.donationAmountField.error.crypto.min",{amount:n.formatCurrency(e.minAmount,{currency:"USD",display:"round"})}):f?n.translate("donateForm.donationAmountField.error.crypto.max",{amount:n.formatCurrency(e.maxAmount,{currency:"USD",display:"round"})}):""),[n,f,g,S,e.maxAmount,e.minAmount]),C=(0,Ia.useMemo)((()=>g||f||S),[g,f,S]),P=(0,Ia.useMemo)((()=>e.currencies.map((e=>{let{name:t,code:n}=e;return{id:n,value:t}}))),[e.currencies]),N=(0,Ia.useMemo)((()=>({id:e.currencyCode,value:e.currencyName})),[e.currencyCode,e.currencyName]),b=(0,Ia.useCallback)((e=>{t.changeCryptoCurrency(e)}),[t]),D=(0,Ia.useCallback)((e=>{t.changeAmount(e)}),[t]),T=(0,Ia.useCallback)((()=>{t.validateAmount(),y(!a&&e.errors.amount.min),E(!a&&e.errors.amount.max),v(!a&&e.errors.amount.required)}),[t,a,e.errors.amount.min,e.errors.amount.max,e.errors.amount.required]);(0,Ia.useEffect)((()=>{c.current&&(y(!a&&e.errors.amount.min),E(!a&&e.errors.amount.max),v(!a&&e.errors.amount.required))}),[c,a,e.errors.amount.min,e.errors.amount.max,e.errors.amount.required]);const _=(0,Ia.useCallback)((()=>t.toggleTribute()),[t]),k=(0,Ia.useCallback)((e=>{t.changeTributeName(e)}),[t]),O=(0,Ia.useCallback)((e=>t.changeGoal(e)),[t]),I=(0,Ia.useCallback)((()=>t.savePrevComment()),[t]),x=(0,Ia.useCallback)((()=>t.addComment()),[t]),[w,R]=(0,Ia.useState)(!1),M=(0,wl.D)((e=>R(e))),L=Ug();return Lg(r,(e=>e.amount.min||e.amount.max||e.amount.required)),Lg(l,(e=>e.designation.required)),(0,Dr.jsxs)("form",{onSubmit:n=>{if(n.preventDefault(),L(),!e.livemode)return M.set([!0]),void M.set([!1],3e3);t.leave()},className:"flow-screen",children:[(0,Dr.jsx)(Gl,{autoFocus:i,children:n.translate("common.screenAriaLabel",{screenTitle:`${n.translate("cryptoCurrencyScreen.title")}`})}),(0,Dr.jsx)(Kl,{className:"border-bottom-0",titleFullWidth:!0,children:(0,Dr.jsxs)("div",{className:(0,Rr.A)("d-flex items-center justify-center",i?"pt-3 pb-2":"pt-6 pb-4"),children:[(0,Dr.jsx)(ug,{className:"icon-fill shrink-0 font-size-28 text-green-80 me-2","aria-hidden":!0}),(0,Dr.jsx)("h2",{className:"title-1 text-truncate","data-qa":"crypto-donation-header",children:n.translate("cryptoCurrencyScreen.title")})]})}),(0,Dr.jsx)(Al,{className:"px-body",children:(0,Dr.jsxs)("div",{className:(0,Rr.A)("fixed-container",{"grow-1 d-flex flex-column":!i}),children:[(0,Dr.jsx)(Cg,{className:"search-select-crypto",label:n.translate("cryptoCurrencyScreen.selectCurrency.label"),labelFloating:!0,selectedOption:N,options:P,onSelect:b,displayName:e.currencyName,shouldSearchById:!0,clearOnFocus:!0,showIcons:!0,SelectedIconToRender:Mg,ListItemToRender:wg,disabled:e.locked,dataQa:"currency"}),(0,Dr.jsxs)("div",{className:(0,Rr.A)("mt-3",{shake:C}),children:[(0,Dr.jsx)("div",{ref:c,children:(0,Dr.jsx)(qm,{ref:r,className:(0,Rr.A)("group-price-control",{"has-error":C,disabled:e.locked}),currency:e.currencyCode,amount:e.amount,canModifyAmount:!0,withoutFraction:!1,disabled:e.locked,currencyService:p,donationType:Ft.CRYPTO,hasError:C,errorLabel:A(),"aria-required":!0,"aria-invalid":C,"aria-describedby":`price-control-${s}-error`,qaActiveAttribute:"amount",onAmountChange:D,onAmountInputBlur:T})}),(0,Dr.jsx)("p",{className:"body-3 text-sans-serif d-flex items-center text-gray-60 mt-2",children:e.amount?(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsxs)("span",{className:"text-truncate",children:["≈",n.formatCurrency(e.amountInDefaultFiat,{currency:e.defaultFiatCurrency})]}),(0,Dr.jsx)("span",{className:"shrink-0 ms-1",children:e.defaultFiatCurrency})]}):(0,Dr.jsx)("span",{children:" "})})]}),d&&(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsx)(yc,{size:20,sizeMin:4}),(0,Dr.jsx)(yg,{goal:e.designation.goal,goals:a?[]:e.designation.goals,shake:m,hasError:e.errors.designation.required,disabled:e.locked,changeGoal:O,goalKey:e.designation.goalKey,isEditable:e.designation.isEditable,isDesignationRequired:u,ref:l})]}),e.tribute.show&&(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsx)(yc,{size:20,sizeMin:4}),(0,Dr.jsx)(Ng,{inHonorOfMaxLength:e.tribute.inHonorOfMaxLength,isActive:e.tribute.isActive,sharingEnabled:e.tribute.sharingEnabled,labelType:e.tribute.labelType,name:e.tribute.name,disabled:e.locked,onToggleTribute:_,onChangeTributeName:k})]}),(0,Dr.jsx)(yc,{size:12,sizeMin:4,className:"mt-auto"}),h&&(0,Dr.jsx)(yg,{goal:e.designation.goal,goals:e.designation.goals,shake:m,disabled:e.locked,hasError:e.errors.designation.required,changeGoal:O,goalKey:e.designation.goalKey,isEditable:e.designation.isEditable}),e.comment.isEnabled&&(0,Dr.jsxs)(Dr.Fragment,{children:[h&&(0,Dr.jsx)(yc,{size:12,sizeMin:4}),(0,Dr.jsx)(hg,{prevContent:e.comment.prevContent,content:e.comment.content,disabled:e.locked,onAddComment:x,onHighlight:I})]}),!i&&(0,Dr.jsx)(yc,{size:20,sizeMin:16})]})}),(0,Dr.jsx)(Ll,{children:e.isCryptoAccountConnected?(0,Dr.jsx)(qu,{type:"submit",className:"btn-primary",processingState:e.processingState,errorTitle:e.errors.payment.title,errorMessage:e.errors.payment.message,disabled:w,testMode:w,dataQa:"donate-button",trackingElement:"payButton",children:w?n.translate("cryptoCurrencyScreen.testModeButton"):n.translate("cryptoCurrencyScreen.button")}):(0,Dr.jsx)("p",{className:"label-2 text-center text-red-80 text-ellipsis",dangerouslySetInnerHTML:{__html:n.safeTranslate("cryptoCurrencyScreen.connectionInfo")}})})]})};var Bg=n(1953),Gg=n.n(Bg);const qg=["bottom-end"],Hg=()=>{const e=(0,Qr.t)(),t=(0,Ur.P)(),n=(0,cc.Q)(),i=Gr(),s=(0,jr.wf)(),{countdown:a,isActive:o}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;const n=(0,Ia.useRef)(Date.now()+e),i=(0,Ia.useRef)(null),[s,a]=(0,Ia.useState)(e),[o,r]=(0,Ia.useState)(!0),c=(0,Zc.Q)(),l=(0,Ia.useCallback)((()=>{i.current&&(clearInterval(i.current),r(!1))}),[i]),u=(0,Ia.useCallback)((()=>{const e=n.current-Date.now();a(e)}),[n]);return(0,Ia.useEffect)((()=>{if(c)return r(!0),u(),i.current=setInterval(u,t),l}),[u,c,t,l]),(0,Ia.useEffect)((()=>{s<t&&l()}),[t,l,s]),{countdown:s,isActive:o}}(9e5),[r,c]=(0,Ia.useMemo)((()=>function(e){const t=new Date(e),[,n,i]=t.toISOString().slice(11,-5).split(":");return[n,i]}(a)),[a]),l=a<6e4;return(0,Dr.jsx)(Dr.Fragment,{children:o&&(0,Dr.jsx)(Kc.S,{content:e.translate("cryptoWalletScreen.cryptoTimer.tooltipLabel"),trigger:"click",className:t?"ui-tooltip-mobile":"ui-tooltip-desktop",placement:n?"left-start":"right-start",fallbackPlacements:qg,maxWidth:"220px",rootContainer:s,children:(0,Dr.jsxs)("button",{type:"button",className:(0,Rr.A)(i("crypto-timer"),{"crypto-timer-danger":l}),"aria-label":e.translate("cryptoWalletScreen.cryptoTimer.ariaLabel",{minutes:r,seconds:c}),"data-qa":"crypto-timer",children:[r,":",c]})})})},Vg=(0,Ia.memo)(Hg),Kg={src:"",height:40,width:40,excavate:!0},Yg={width:"168px",height:"168px"},zg={[yl.CRYPTO_CURRENCY]:()=>{const{state:e}=vc(yl.CRYPTO_CURRENCY);return(0,Dr.jsx)(Fg,{state:e.errors,children:(0,Dr.jsx)(jg,{})})},[yl.CRYPTO_WALLET]:e=>{const{state:t}=vc(yl.CRYPTO_WALLET),n=(0,Ur.P)(),i=(0,Qr.t)(),s=Gr(),a=(0,kr.M)(),[o,r]=(0,Ia.useState)(!1),c=(0,wl.D)((e=>r(e))),l=t.protocol?` (${t.protocol}) `:" ",u=`${t.networkName}${l}`;return(0,Dr.jsxs)("div",{className:"flow-screen",children:[(0,Dr.jsx)("div",{className:"sr-only",role:"status","aria-live":"polite",children:i.translate("common.screenAriaLabel",{screenTitle:`${i.translate("cryptoWalletScreen.title")}`})}),(0,Dr.jsx)(Kl,{children:(0,Dr.jsxs)("div",{className:s("crypto-timer-holder"),children:[(0,Dr.jsx)("h2",{className:(0,Rr.A)("title-2",n?"text-ellipsis":"text-line-clamp-2"),children:i.translate("cryptoWalletScreen.title")}),(0,Dr.jsx)(Vg,{})]})}),(0,Dr.jsx)(Al,{className:(0,Rr.A)("px-body",{"py-6":!n}),children:(0,Dr.jsxs)("div",{className:"fixed-container",children:[(0,Dr.jsx)("p",{className:(0,Rr.A)("text-center",n?"text-ellipsis":"text-line-clamp-4"),"data-qa":"crypto-wallet-screen",children:i.translate("cryptoWalletScreen.description")}),(0,Dr.jsxs)("p",{className:"text-center text-ellipsis mt-5",children:[(0,Dr.jsx)("span",{className:"subtitle-1 d-inline-block text-sans-serif",children:t.formattedAmount}),(0,Dr.jsx)("span",{className:"subtitle-2 d-inline-block ms-1-5",children:t.currencyCode})]}),(0,Dr.jsxs)("div",{className:"p-rel d-flex items-center justify-center bg-white border border-gray-20 border-radius-base mx-auto mt-2",style:Yg,"aria-hidden":!0,children:[(0,Dr.jsx)(Gg(),{value:t.walletAddress,renderAs:"svg",size:122,level:"H",imageSettings:Kg}),(0,Dr.jsx)(xg,{name:t.currencyCode,size:"lg",className:"qr-code-icon"})]}),(0,Dr.jsxs)("button",{type:"button",className:"btn btn-default h-auto d-flex items-baseline text-left px-0 py-2-5 mt-8","aria-label":i.translate("cryptoWalletScreen.copyButtonAriaLabel"),disabled:o,"data-qa":"crypto-wallet-copy-button",onClick:()=>{if(c.set([!0]),c.set([!1],2e3),navigator.clipboard)navigator.clipboard.writeText(t.walletAddress);else{const e=a.document.createElement("textarea");e.value=t.walletAddress,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-9999px",a.document.body.appendChild(e),e.select(),a.document.execCommand("copy"),a.document.body.removeChild(e)}},children:[(0,Dr.jsx)("span",{className:"btn-copy-address label-3 grow-1 text-nowrap ps-3 pe-2 overflow-x-auto","aria-hidden":!0,children:t.walletAddress}),(0,Dr.jsxs)("span",{className:(0,Rr.A)("btn-copy-text caption-1 shrink-0 d-flex items-center p-rel pe-3",o?"text-green-80":"text-primary"),children:[o&&(0,Dr.jsx)("span",{className:"shrink-0 icon-slot icon-slot-18 me-1","aria-hidden":!0,children:(0,Dr.jsx)("span",{className:"p-abs inset-centered font-size-18 text-green-80",children:(0,Dr.jsx)(Mu,{className:"icon-stroke icon-stroke-2 d-block"})})}),(0,Dr.jsx)("span",{className:"p-rel","aria-live":o?"polite":"off",children:o?i.translate("cryptoWalletScreen.copyButtonCopied"):i.translate("cryptoWalletScreen.copyButton")})]})]}),(0,Dr.jsxs)("p",{className:"body-4 mt-2 text-center text-truncate",dir:"ltr",children:[(0,Dr.jsx)("span",{className:"font-weight-500",children:u}),i.translate("cryptoWalletScreen.network")]})]})}),(0,Dr.jsx)(Ll,{className:(0,Rr.A)({"pt-8":n}),children:(0,Dr.jsx)("p",{className:(0,Rr.A)("body-3 text-center",n?"text-ellipsis":"text-line-clamp-2"),children:i.translate("cryptoWalletScreen.message")})})]})},[oc.COMMENT]:Wl,[oc.PRIVACY]:hh,[oc.THANK_YOU]:ag,[oc.MANDATORY_QUESTIONS]:Tu,[oc.QUESTIONS]:Hh,[oc.BLOCKED]:Ul};var Wg;!function(e){e.AUSTRALIA="AU",e.AUSTRIA="AT",e.BELGIUM="BE",e.BRAZIL="BR",e.BULGARIA="BG",e.CANADA="CA",e.CROATIA="HR",e.CYPRUS="CY",e.CZECH_REPUBLIC="CZ",e.DENMARK="DK",e.ESTONIA="EE",e.FINLAND="FI",e.FRANCE="FR",e.GERMANY="DE",e.GREECE="GR",e.HONG_KONG="HK",e.HUNGARY="HU",e.INDIA="IN",e.INDONESIA="ID",e.IRELAND="IE",e.ITALY="IT",e.JAPAN="JP",e.LATVIA="LV",e.LITHUANIA="LT",e.LUXEMBOURG="LU",e.MALAYSIA="MY",e.MALTA="MT",e.MEXICO="MX",e.NETHERLANDS="NL",e.NEW_ZEALAND="NZ",e.NORWAY="NO",e.POLAND="PL",e.PORTUGAL="PT",e.ROMANIA="RO",e.SINGAPORE="SG",e.SLOVAKIA="SK",e.SLOVENIA="SI",e.SPAIN="ES",e.SWEDEN="SE",e.SWITZERLAND="CH",e.THAILAND="TH",e.UNITED_ARAB_EMIRATES="AE",e.UNITED_KINGDOM="GB",e.UNITED_STATES="US",e.GIBRALTAR="GI",e.LIECHTENSTEIN="LI",e.PHILIPPINES="PH",e.ISRAEL="IL"}(Wg||(Wg={}));class $g{get default(){return{state:"State",postcode:"Zip code"}}get[Wg.UNITED_KINGDOM](){return Object.assign(Object.assign({},this.default),{state:"County",postcode:"Postcode"})}get[Wg.CANADA](){return Object.assign(Object.assign({},this.default),{state:"Province",postcode:"Postal code"})}get[Wg.IRELAND](){return Object.assign(Object.assign({},this.default),{state:"Province",postcode:"Eircode"})}get[Wg.DENMARK](){return Object.assign(Object.assign({},this.default),{state:"Region",postcode:"Postcode"})}}const Xg=[Wg.UNITED_KINGDOM,Wg.CANADA,Wg.IRELAND,Wg.DENMARK];class Qg{constructor(e){this.addressLabelsProvider=e}get default(){return this.addressLabelsProvider.default}getByCountry(e){if(t=e,Xg.some((e=>t===e)))switch(e){case Wg.UNITED_KINGDOM:return this.addressLabelsProvider[Wg.UNITED_KINGDOM];case Wg.CANADA:return this.addressLabelsProvider[Wg.CANADA];case Wg.IRELAND:return this.addressLabelsProvider[Wg.IRELAND];case Wg.DENMARK:return this.addressLabelsProvider[Wg.DENMARK];default:throw new Error(`Unhandled custom country case: ${e}`)}var t;return this.default}}class Zg{constructor(e){this.intl=e}get default(){return{state:this.intl.translate("mailingAddressScreen.addressForm.state"),postcode:this.intl.translate("mailingAddressScreen.addressForm.postcode")}}get[D.tg.UNITED_KINGDOM](){return{state:this.intl.translate("mailingAddressScreen.addressForm.GB.state"),postcode:this.intl.translate("mailingAddressScreen.addressForm.GB.postcode")}}get[D.tg.CANADA](){return{state:this.intl.translate("mailingAddressScreen.addressForm.CA.state"),postcode:this.intl.translate("mailingAddressScreen.addressForm.CA.postcode")}}get[D.tg.IRELAND](){return{state:this.intl.translate("mailingAddressScreen.addressForm.IE.state"),postcode:this.intl.translate("mailingAddressScreen.addressForm.IE.postcode")}}get[D.tg.DENMARK](){return{state:this.intl.translate("mailingAddressScreen.addressForm.DK.state"),postcode:this.intl.translate("mailingAddressScreen.addressForm.DK.postcode")}}}const Jg=e=>{const{onChange:t,onSearch:n,onSelect:i,onClear:s,value:a,options:o,className:r,inputClasses:l,loading:u,placeholder:d,label:h,labelOptional:m,disabled:p,debounce:g=500,allowClear:y,hint:f,hintAriaLabel:E,hasError:S,errorLabel:v,dataQa:A,dataTestId:C,trackingElement:P,maxLength:N,selectedOption:b,ListItemToRender:D,SelectedIconToRender:T,showIcons:_,labelFloating:k,autoComplete:O,inputRef:I,autoFocus:x,autoFocusMode:w}=e,R=(0,c.Tt)(e,["onChange","onSearch","onSelect","onClear","value","options","className","inputClasses","loading","placeholder","label","labelOptional","disabled","debounce","allowClear","hint","hintAriaLabel","hasError","errorLabel","dataQa","dataTestId","trackingElement","maxLength","selectedOption","ListItemToRender","SelectedIconToRender","showIcons","labelFloating","autoComplete","inputRef","autoFocus","autoFocusMode"]),{set:M,clear:L}=(0,wl.D)((e=>{n(e)})),U=(0,Ia.useCallback)((e=>{t(e),L(),M([e],g)}),[t,M,L,g]);return(0,Dr.jsx)(vg,Object.assign({inputRef:I,options:o,value:a,onChange:U,onSelect:i,className:r,inputClasses:l,placeholder:d,label:h,labelOptional:m,disabled:p,loading:u,hint:f,hintAriaLabel:E,allowClear:y,onClear:s,selectedOption:b,dataQa:A,dataTestId:C,hasError:S,errorLabel:v,trackingElement:P,ListItemToRender:D,SelectedIconToRender:T,showIcons:_,maxLength:N,labelFloating:k,autoComplete:O,autoFocus:x,autoFocusMode:w},R))};Jg.displayName="RawAutocomplete";const ey=(0,Ia.memo)(Jg),ty=e=>{let{className:t,isCountryFieldDisabled:n}=e;const{state:i,controller:s}=vc(oc.MAILING_ADDRESS),a=(0,Qr.t)(),o=Yl(),[r,c]=(0,Ia.useState)(!1),l=!i.validation.fields.countryCode.isValid,u=a.translate("mailingAddressScreen.addressForm.country"),d=i.countries.map((e=>{let{countryCode:t,countryName:n}=e;return{value:t,label:n}}));return(0,Dr.jsx)(Bd,{id:`country-${o}`,label:u,labelFloating:!0,className:(0,Rr.A)({"pe-16":l,"is-visually-disabled":n}),formLabelClass:(0,Rr.A)({"pe-12":l}),formGroupClass:t,value:i.countryCode,disabled:i.locked||n,error:l,dataQa:"country-selector",options:d,autoComplete:"country-name","aria-required":!0,"aria-describedby":`country-${o}-error`,onChange:e=>s.changeSelectedCountry(e.target.value),onFocus:()=>c(!0),onBlur:()=>c(!1),children:l&&(0,Dr.jsx)(Eu.U,{className:"p-abs inset-centered-end z-index-5 me-10",showTooltip:r,children:(0,Dr.jsx)("p",{id:`country-${o}-error`,className:"sr-only",children:s.getAriaErrorMessage(u)})})})},ny=(0,Ia.memo)(ty),iy=e=>{let{setSelectRef:t,setInputRef:n,label:i,className:s}=e;const{state:a,controller:o}=vc(oc.MAILING_ADDRESS),r=Yl(),[c,l]=(0,Ia.useState)(!1),[u,d]=(0,Ia.useState)(!1),h=o.getStates(a.countryCode),m=!a.validation.fields.region.isValid,p=Array.isArray(h)?h.map((e=>{let{code:t,name:n}=e;return{value:t,label:n}})):[],g={};if(h&&!Array.isArray(h))for(const[e,t]of Object.entries(h))g[e]=t.map((e=>{let{code:t,name:n}=e;return{value:t,label:n}}));return(0,Dr.jsx)(Dr.Fragment,{children:h?(0,Dr.jsx)(Bd,{id:`select-region-${r}`,setRef:t,label:i,labelFloating:!0,className:(0,Rr.A)({"pe-16":m}),formLabelClass:(0,Rr.A)({"pe-12":m}),formGroupClass:s,value:a.region,hasCustomValue:Boolean(a.region),customPlaceholder:i,options:p,groupedOptions:g,autoComplete:"address-level1",disabled:a.locked,error:m,"aria-required":!0,"aria-describedby":`region-${r}-error`,dataQa:"state-selector",onChange:e=>o.changeRegion(e.target.value),onFocus:()=>d(!0),onBlur:()=>d(!1),children:m&&(0,Dr.jsx)(Eu.U,{className:"p-abs inset-centered-end me-10 z-index-5",showTooltip:u,children:(0,Dr.jsx)("p",{id:`region-${r}-error`,children:o.getAriaErrorMessage(i)})})}):(0,Dr.jsx)(fu.t,{id:`input-region-${r}`,setRef:n,label:i,labelFloating:!0,className:(0,Rr.A)({"pe-10":m}),formLabelClass:(0,Rr.A)({"pe-6":m}),formGroupClass:s,value:a.region,placeholder:i,autoComplete:"address-level1",disabled:a.locked,error:m,"aria-required":!0,"aria-describedby":`region-${r}-error`,dataQa:"state-field",onChange:e=>o.changeRegion(e.target.value),onFocus:()=>l(!0),onBlur:()=>l(!1),children:m&&(0,Dr.jsx)(Eu.U,{className:"p-abs inset-centered-end me-4 z-index-5",showTooltip:c,children:(0,Dr.jsx)("p",{id:`region-${r}-error`,children:o.getAriaErrorMessage(i)})})})})},sy=(0,Ia.memo)(iy),{useAddFieldToScroll:ay,useScrollToFieldsTrigger:oy,ScrollToFieldsProvider:ry}=(0,uu.J)(),cy=e=>{const{state:t,controller:n}=vc(oc.MAILING_ADDRESS),i=(0,Qr.t)(),s=(0,Ur.P)(),a=(0,zr.$)(),o=Yl(),[r,c]=(0,Ia.useState)(!1),[l,u]=(0,Ia.useState)(!1),[d,h]=(0,Ia.useState)(!1),m=oy(),p=(0,Ia.useCallback)((e=>{e.preventDefault(),m(),n.leave()}),[n,m]),g=(0,Ia.useMemo)((()=>function(e){return function(e){const t=e||new $g;return new Qg(t)}(new Zg(e))}(i)),[i]),y=(0,Ia.useMemo)((()=>g.getByCountry(t.countryCode)),[g,t.countryCode]),f=Cu(t.shakeKey,0!==t.shakeKey),E=n.isOnBehalfOf?i.translate("mailingAddressScreen.onBehalfOfTitle"):i.translate("mailingAddressScreen.title"),S=t.isAlternativeLabels?i.translate("mailingAddressScreen.addressForm.zipFirst.line1"):i.translate("mailingAddressScreen.addressForm.line1"),v=t.isAlternativeLabels?i.translate("mailingAddressScreen.addressForm.zipFirst.line2"):i.translate("mailingAddressScreen.addressForm.line2"),A=!t.validation.fields.postal.isValid,C=!t.validation.fields.line1.isValid,P=!t.validation.fields.line2.isValid,N=!t.validation.fields.city.isValid,b=(0,Ia.useCallback)((e=>{a||n.search(e)}),[n,a]),D=(0,Ia.useCallback)((e=>n.changeLine1(e)),[n]),T=(0,Ia.useCallback)((e=>n.changeLine2(e.target.value)),[n]),_=(0,Ia.useCallback)((e=>n.changePostalCode(e)),[n]),k=(0,Ia.useCallback)((e=>n.changePostalCode(e.target.value)),[n]),O=(0,Ia.useCallback)((e=>n.changeCity(e.target.value)),[n]),I=(0,Ia.useCallback)(((e,t)=>{const i=n.getPlaceById(e),s=n.shouldFindSubplaces(i);return s?n.retrieveSubplaces(i,t):n.retrieveDetails(i),s}),[n]),x=(0,Ia.useCallback)((e=>I(e,"line1")),[I]),w=(0,Ia.useCallback)((e=>I(e,"postal")),[I]),R=(0,Ia.useMemo)((()=>t.places.map((e=>{let{description:t,innerId:n}=e;return{id:n,value:t}}))),[t.places]),M=(0,Ia.useRef)(null),L=(0,Ia.useRef)(null),U=(0,Ia.useRef)(null),F=(0,Ia.useRef)(null),j=(0,Ia.useRef)(null),B=(0,Ia.useRef)(null);(0,Hl.f)({ref:t.isLayoutPostalCodeFirst?L:M,autoFocus:!0,mode:ql.Q.DESKTOP});const G=t.isLayoutPostalCodeFirst;return ay(L,(e=>G&&!e.fields.postal.isValid)),ay(M,(e=>!e.fields.line1.isValid)),ay(U,(e=>!e.fields.city.isValid)),ay(F,(e=>!e.fields.region.isValid)),ay(j,(e=>!e.fields.region.isValid)),ay(B,(e=>!G&&!e.fields.postal.isValid)),(0,Dr.jsxs)("form",{className:"flow-screen",onSubmit:p,"data-qa":"active-screen-mailing-address","data-testid":"active-screen-mailing-address",children:[(0,Dr.jsx)("div",{className:"sr-only",role:"status","aria-live":"polite",children:i.translate("common.screenAriaLabel",{screenTitle:E})}),(0,Dr.jsx)(Kl,{title:E}),(0,Dr.jsx)(Al,{className:(0,Rr.A)("px-body",{"py-8":!s,shake:f}),children:(0,Dr.jsxs)("div",{className:"fixed-container",children:[n.isOnBehalfOf&&(0,Dr.jsx)("p",{className:(0,Rr.A)("text-center mb-5",s?"text-ellipsis":"text-line-clamp-3"),children:i.translate("mailingAddressScreen.onBehalfOfSubtitle")}),(0,Dr.jsxs)("div",{role:"group","aria-label":i.translate("mailingAddressScreen.addressGroupAriaLabel"),children:[t.isLayoutPostalCodeFirst&&(0,Dr.jsx)("div",{className:"mb-4",children:(0,Dr.jsx)(ey,{labelFloating:!0,inputRef:L,inputClasses:"text-sans-serif",options:R,value:t.postal,onChange:_,onSelect:w,onSearch:b,hasError:A,errorLabel:i.translate("mailingAddressScreen.addressForm.error.valid",{field:y.postcode}),placeholder:y.postcode,label:y.postcode,disabled:t.locked,loading:t.isLoadingPlaces,dataQa:"post-code",maxLength:hn.ZIP,autoComplete:"postal-code","aria-required":!0})}),(0,Dr.jsxs)("div",{className:"group-stacked-vertical",children:[(0,Dr.jsxs)("div",{className:"group-stacked-vertical group-stacked-item",children:[(0,Dr.jsx)(ey,{inputRef:M,labelFloating:!0,label:S,className:"group-stacked-item",value:t.line1,placeholder:S,options:R,maxLength:hn.STREET,loading:t.isLoadingPlaces,disabled:t.locked,hasError:C,errorLabel:n.getAriaErrorMessage(S),"aria-required":!0,onChange:D,onSelect:x,onSearch:b,dataQa:"street",dataTestId:"street",autoComplete:"address-line1"}),(0,Dr.jsx)(fu.t,{id:`address-line2-${o}`,label:v,labelFloating:!0,className:(0,Rr.A)({"pe-10":P}),formLabelClass:(0,Rr.A)({"pe-6":P}),formGroupClass:"group-stacked-item",value:t.line2,onChange:T,error:P,disabled:t.locked,autoComplete:"address-line2",placeholder:v,dataQa:"apartment-field",maxLength:hn.APARTMENT,"aria-describedby":`line-2-${o}-error`,onFocus:()=>c(!0),onBlur:()=>c(!1),children:P&&(0,Dr.jsx)(Eu.U,{className:"p-abs inset-centered-end z-index-5 me-4",showTooltip:r,children:(0,Dr.jsx)("p",{id:`line-2-${o}-error`,children:n.getAriaErrorMessage(v)})})})]}),(0,Dr.jsx)(fu.t,{label:i.translate("mailingAddressScreen.addressForm.city"),labelFloating:!0,id:`city-${o}`,setRef:U,className:(0,Rr.A)({"pe-10":N}),formLabelClass:(0,Rr.A)({"pe-6":N}),formGroupClass:"group-stacked-item",value:t.city,placeholder:i.translate("mailingAddressScreen.addressForm.city"),autoComplete:"address-level2",maxLength:hn.CITY,disabled:t.locked,error:N,"aria-required":!0,"aria-describedby":`city-${o}-error`,dataQa:"city",dataTestId:"city",onChange:O,onFocus:()=>u(!0),onBlur:()=>u(!1),children:N&&(0,Dr.jsx)(Eu.U,{className:"p-abs inset-centered-end z-index-5 me-4",showTooltip:l,children:(0,Dr.jsx)("p",{id:`city-${o}-error`,children:n.getAriaErrorMessage(i.translate("mailingAddressScreen.addressForm.city"))})})})]}),(0,Dr.jsxs)("div",{className:"group-stacked-vertical mt-4",children:[!t.isLayoutPostalCodeFirst&&(0,Dr.jsxs)("div",{className:"group-stacked-horizontal group-stacked-item",children:[t.isRegionEnabled&&(0,Dr.jsx)(sy,{label:y.state,className:"group-stacked-item w-50 me-1",setInputRef:F,setSelectRef:j}),(0,Dr.jsx)(fu.t,{id:`postal-${o}`,setRef:B,label:y.postcode,labelFloating:!0,className:(0,Rr.A)("text-sans-serif",{"pe-10":A}),formLabelClass:(0,Rr.A)({"pe-6":A}),formGroupClass:(0,Rr.A)("group-stacked-item",t.isRegionEnabled?"w-50 ms-1":"w-100"),value:t.postal,error:A,disabled:t.locked,autoComplete:"postal-code",placeholder:y.postcode,dataQa:"zip-code",maxLength:hn.ZIP,"aria-required":!0,"aria-describedby":`postcode-${o}-error`,onChange:k,onFocus:()=>h(!0),onBlur:()=>h(!1),children:A&&(0,Dr.jsx)(Eu.U,{className:"p-abs inset-centered-end z-index-5 me-4",showTooltip:d,children:(0,Dr.jsx)("p",{id:`postcode-${o}-error`,children:i.translate("mailingAddressScreen.addressForm.error.valid",{field:y.postcode})})})})]}),t.isLayoutPostalCodeFirst&&t.isRegionEnabled&&(0,Dr.jsx)(sy,{label:y.state,className:"group-stacked-item",setInputRef:F,setSelectRef:j}),(0,Dr.jsx)(ny,{className:"group-stacked-item",isCountryFieldDisabled:n.isCountryFieldDisabled})]})]})]})}),(0,Dr.jsxs)(Ll,{children:[(0,Dr.jsx)(qu,{type:"submit",className:"btn-primary",processingState:t.processingState,errorTitle:t.hasServerValidationError?i.safeTranslate("mailingAddressScreen.validationError.title"):t.payErrorMessage||i.safeTranslate("common.errorOccurredText"),errorMessage:t.additionalPayErrorMessage,dataQa:"mailing-continue",trackingElement:t.isPaymentScreen&&t.isRequired?"payButton":"nextButton",dataTestId:"mailing-continue-button",children:t.isPaymentScreen&&t.isRequired?_u(i,t.formattedAmount,t.frequency):i.translate("mailingAddressScreen.button.continue")}),!t.isRequired&&(0,Dr.jsx)("div",{className:"d-flex justify-center mt-5",children:(0,Dr.jsx)("button",{type:"button",className:"btn-link text-truncate",disabled:t.locked,onClick:()=>n.skip(),"data-qa":"skip-button","data-tracking-element-name":"skipButton","data-testid":"mailing-skip-button",children:i.translate("mailingAddressScreen.button.skip")})})]})]})},ly=(0,Ia.memo)(cy),uy=e=>{let{disabled:t,onClose:n,onSave:i,processingState:s,serverErrors:a}=e;const o=(0,Qr.t)();return(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsx)(qu,{type:"submit",className:"btn-primary",disabled:t,onClick:i,trackingElement:"remindMeLaterConfirmButton",processingState:s,serverErrors:a,errorTitle:o.safeTranslate("common.errorOccurredText"),dataQa:"remind-me-later-confirm-button",children:o.translate("remindMeScreen.button.confirm")}),(0,Dr.jsx)("button",{type:"button",className:"btn btn-default mt-2",disabled:t,onClick:n,"data-tracking-element-name":"remindMeLaterCloseButton","data-qa":"remind-me-later-no-thanks-button",children:o.translate("remindMeScreen.button.close")})]})},dy=(0,Ia.memo)(uy),hy=e=>{let{onTermsAcceptionChange:t,checked:n,isValid:i,className:s,locked:a,text:o,setRef:r}=e;const c=(0,Qr.t)(),l=(0,Ur.P)(),u=(0,Ia.useRef)(null);return(0,Ia.useImperativeHandle)(r,(()=>u.current),[]),(0,Dr.jsx)(lu,{setRef:u,className:s,checked:n,error:!i,disabled:a,onChange:t,dataQa:"remind-me-later-accept-terms-checkbox",children:(0,Dr.jsx)("span",{className:(0,Rr.A)({"text-line-clamp-2":!l}),dir:"auto",children:void 0===o||""===o?c.translate("remindMeScreen.termsText"):(0,Dr.jsx)("span",{dangerouslySetInnerHTML:{__html:o}})})})},my=e=>{const t=Yl();return(0,Dr.jsxs)("svg",{className:e.className,"aria-hidden":!!e.ariaHidden||void 0,height:e.height||24,width:e.width||22,fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[(0,Dr.jsxs)("radialGradient",{id:`a-${t}`,cx:"0",cy:"0",gradientTransform:"matrix(2.74225404 11.29096326 -11.5614986 2.80795938 12 10.9506)",gradientUnits:"userSpaceOnUse",r:"1",children:[(0,Dr.jsx)("stop",{offset:"0",stopColor:"#4cadf4"}),(0,Dr.jsx)("stop",{offset:".816847",stopColor:"#44b8f0"}),(0,Dr.jsx)("stop",{offset:".861287",stopColor:"#409ff2"}),(0,Dr.jsx)("stop",{offset:"1",stopColor:"#1f6fef"})]}),(0,Dr.jsxs)("radialGradient",{id:`b-${t}`,cx:"0",cy:"0",gradientTransform:"matrix(-2.81274751 -9.14752313 9.64618176 -2.96607873 12 11.4004)",gradientUnits:"userSpaceOnUse",r:"1",children:[(0,Dr.jsx)("stop",{offset:".561045",stopColor:"#4dd0f0",stopOpacity:"0"}),(0,Dr.jsx)("stop",{offset:".868337",stopColor:"#4dd0f0",stopOpacity:".754177"}),(0,Dr.jsx)("stop",{offset:"1",stopColor:"#4dd0f0",stopOpacity:"0"})]}),(0,Dr.jsxs)("radialGradient",{id:`c-${t}`,cx:"0",cy:"0",gradientTransform:"matrix(-4.76432055 -9.71917643 20.58418864 -10.09032748 13.0442 14.6319)",gradientUnits:"userSpaceOnUse",r:"1",children:[(0,Dr.jsx)("stop",{offset:".0102742",stopColor:"#4c9ef6"}),(0,Dr.jsx)("stop",{offset:".885024",stopColor:"#4b9ef6",stopOpacity:"0"})]}),(0,Dr.jsxs)("radialGradient",{id:`d-${t}`,cx:"0",cy:"0",gradientTransform:"matrix(3.31321384 4.86948528 -10.57415853 7.19469231 8.68678 7.00844)",gradientUnits:"userSpaceOnUse",r:"1",children:[(0,Dr.jsx)("stop",{offset:".173971",stopColor:"#4bcdf0"}),(0,Dr.jsx)("stop",{offset:".885024",stopColor:"#4ccef1",stopOpacity:"0"})]}),(0,Dr.jsxs)("linearGradient",{id:`e-${t}`,gradientUnits:"userSpaceOnUse",x1:"11.9996",x2:"13.77",y1:"6.09863",y2:"23.2126",children:[(0,Dr.jsx)("stop",{offset:"0",stopColor:"#fff"}),(0,Dr.jsx)("stop",{offset:"1",stopColor:"#fff",stopOpacity:"0"})]}),(0,Dr.jsxs)("radialGradient",{id:`f-${t}`,cx:"0",cy:"0",gradientTransform:"matrix(0 6.71448 -11.4928 0 11.9996 11.1869)",gradientUnits:"userSpaceOnUse",r:"1",children:[(0,Dr.jsx)("stop",{offset:"0",stopColor:"#fff",stopOpacity:"0"}),(0,Dr.jsx)("stop",{offset:".91",stopColor:"#fff"})]}),(0,Dr.jsx)("circle",{cx:"12",cy:"11.8779",fill:`url(#a-${t})`,r:"11"}),(0,Dr.jsx)("circle",{cx:"12",cy:"11.8779",fill:`url(#b-${t})`,fillOpacity:".3",r:"11"}),(0,Dr.jsx)("circle",{cx:"12",cy:"11.8779",fill:`url(#c-${t})`,r:"11"}),(0,Dr.jsx)("circle",{cx:"12",cy:"11.8779",fill:`url(#d-${t})`,fillOpacity:".8",r:"11"}),(0,Dr.jsx)("path",{d:"m11.2885 8.33683.7111.71934.7112-.71934c2.0415-2.06503 4.4425-1.26364 5.1381.30145.3554.79955.3807 1.98542-.4866 3.44802-.8318 1.4027-2.4787 3.034-5.3627 4.6715-2.88397-1.6375-4.53087-3.2689-5.36268-4.6716-.8673-1.4626-.84197-2.64841-.48661-3.44797.69559-1.56507 3.09662-2.36647 5.13819-.3014z",stroke:"#fff",strokeWidth:"2"}),(0,Dr.jsx)("path",{d:"m11.9996 17.9014c13.1081-7.111 4.9269-15.25119 0-10.26762-4.92684-4.98363-13.10811 3.15662 0 10.26762z",fill:"#6bb1d4",fillOpacity:".6"}),(0,Dr.jsx)("path",{d:"m11.9996 17.9014c13.1081-7.111 4.9269-15.25119 0-10.26762-4.92684-4.98363-13.10811 3.15662 0 10.26762z",fill:`url(#e-${t})`,fillOpacity:".8"}),(0,Dr.jsx)("path",{d:"m11.9996 17.9014c13.1081-7.111 4.9269-15.25119 0-10.26762-4.92684-4.98363-13.10811 3.15662 0 10.26762z",fill:`url(#f-${t})`}),(0,Dr.jsx)("path",{d:"m11.644 7.98531.3556.35967.3556-.35967c2.2525-2.27841 5.0915-1.48313 5.9506.4499.4334.97502.4199 2.33219-.5134 3.90609-.9147 1.5424-2.71 3.2801-5.7928 4.9898-3.08277-1.7097-4.8781-3.4474-5.79275-4.9898-.93333-1.574-.94679-2.93111-.51345-3.90614.85913-1.93302 3.69816-2.72829 5.9506-.44985z",stroke:"#3398f1"})]})},py=(0,Ia.memo)(my),gy=e=>{const t=Yl();return(0,Dr.jsxs)("svg",{className:e.className,"aria-hidden":!!e.ariaHidden||void 0,height:e.height||46,width:e.width||41,viewBox:"0 0 41 46",fill:"none",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[(0,Dr.jsxs)("filter",{id:`a-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"38",width:"40.3477",x:"0",y:"7",children:[(0,Dr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Dr.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Dr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Dr.jsx)("feOffset",{dx:"-1",dy:"-1"}),(0,Dr.jsx)("feGaussianBlur",{stdDeviation:".5"}),(0,Dr.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Dr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.722448 0 0 0 0 0.424883 0 0 0 0 0.0858854 0 0 0 0.59 0"}),(0,Dr.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_35866_79093"})]}),(0,Dr.jsxs)("radialGradient",{id:`b-${t}`,cx:"0",cy:"0",gradientTransform:"matrix(4.80000386 4.99999715 -4.99583475 4.79600795 18.6719 3.5)",gradientUnits:"userSpaceOnUse",r:"1",children:[(0,Dr.jsx)("stop",{offset:".394249",stopColor:"#f3c352"}),(0,Dr.jsx)("stop",{offset:"1",stopColor:"#d97922"})]}),(0,Dr.jsxs)("linearGradient",{id:`c-${t}`,children:[(0,Dr.jsx)("stop",{offset:"0",stopColor:"#fff"}),(0,Dr.jsx)("stop",{offset:"1",stopColor:"#fff",stopOpacity:"0"})]}),(0,Dr.jsx)("linearGradient",{id:`d-${t}`,gradientUnits:"userSpaceOnUse",x1:"17.6719",x2:"19.9748",xlinkHref:`#c-${t}`,y1:"2.66667",y2:"5.77561"}),(0,Dr.jsxs)("linearGradient",{id:`e-${t}`,gradientUnits:"userSpaceOnUse",x1:"1.17334",x2:"41.6738",y1:"34",y2:"34",children:[(0,Dr.jsx)("stop",{offset:".135247",stopColor:"#f3c352"}),(0,Dr.jsx)("stop",{offset:".249813",stopColor:"#ffd87c"}),(0,Dr.jsx)("stop",{offset:".409209",stopColor:"#f3c352"}),(0,Dr.jsx)("stop",{offset:".752403",stopColor:"#c57429"}),(0,Dr.jsx)("stop",{offset:"1",stopColor:"#bf7c19"})]}),(0,Dr.jsxs)("linearGradient",{id:`f-${t}`,gradientUnits:"userSpaceOnUse",x1:"40.6738",x2:"32.1738",y1:"28.5",y2:"31.5",children:[(0,Dr.jsx)("stop",{offset:"0",stopColor:"#f3c352"}),(0,Dr.jsx)("stop",{offset:"1",stopColor:"#f3c352",stopOpacity:"0"})]}),(0,Dr.jsx)("linearGradient",{id:`g-${t}`,gradientUnits:"userSpaceOnUse",x1:"4.67334",x2:"28.1733",xlinkHref:`#c-${t}`,y1:"20.5",y2:"40.5"}),(0,Dr.jsx)("path",{d:"m17.1719 5c0-1.933 1.567-3.5 3.5-3.5s3.5 1.567 3.5 3.5v5.5h-7z",fill:`url(#b-${t})`,stroke:`url(#d-${t})`}),(0,Dr.jsxs)("g",{filter:`url(#a-${t})`,children:[(0,Dr.jsx)("path",{d:"m20.6737 8c-8.8365 0-14.99999 7.1634-14.99999 16l-1 9.4441c0 1.9793-2.03499 3.6492-2.72998 5.5025l-.75 2c-.735473 1.9613.71437 4.0534 2.80899 4.0534h33.34198c2.0946 0 3.5445-2.0921 2.809-4.0534l-.75-2c-.695-1.8533-2.73-3.5232-2.73-5.5025l-1-9.4441c0-8.8366-6.1634-16-15-16z",fill:`url(#e-${t})`}),(0,Dr.jsx)("path",{d:"m20.6737 8c-8.8365 0-14.99999 7.1634-14.99999 16l-1 9.4441c0 1.9793-2.03499 3.6492-2.72998 5.5025l-.75 2c-.735473 1.9613.71437 4.0534 2.80899 4.0534h33.34198c2.0946 0 3.5445-2.0921 2.809-4.0534l-.75-2c-.695-1.8533-2.73-3.5232-2.73-5.5025l-1-9.4441c0-8.8366-6.1634-16-15-16z",fill:`url(#f-${t})`,fillOpacity:".8"})]}),(0,Dr.jsx)("path",{d:"m5.92232 24.0263.00139-.0131v-.0132c0-8.7202 6.07229-15.75 14.74999-15.75s14.75 7.0298 14.75 15.75v.0132l.0014.0131.9986 9.4313c.0046 1.0662.5526 2.0299 1.1461 2.9233.1312.1975.2644.3913.3959.5828.4816.7012.9414 1.3706 1.2039 2.0707l.75 2c.6742 1.7978-.6548 3.7156-2.5749 3.7156h-33.34198c-1.92007 0-3.249092-1.9178-2.57491-3.7156l.75-2c.26254-.7001.72236-1.3696 1.20396-2.0707.1315-.1915.26463-.3853.39581-.5828.59354-.8934 1.14152-1.8571 1.1461-2.9234z",stroke:`url(#g-${t})`,strokeOpacity:".6",strokeWidth:".5"})]})},yy=(0,Ia.memo)(gy),fy=e=>{const t=Yl();return(0,Dr.jsxs)("svg",{className:e.className,"aria-hidden":!!e.ariaHidden||void 0,height:e.height||80,width:e.width||80,fill:"none",viewBox:"0 0 80 80",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[(0,Dr.jsxs)("filter",{id:`a-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"67",width:"81",x:"-.972656",y:"30",children:[(0,Dr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Dr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Dr.jsx)("feMorphology",{in:"SourceAlpha",operator:"dilate",radius:"3",result:"effect1_dropShadow_35224_19304"}),(0,Dr.jsx)("feOffset",{dy:"4"}),(0,Dr.jsx)("feGaussianBlur",{stdDeviation:"2"}),(0,Dr.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,Dr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),(0,Dr.jsx)("feBlend",{in2:"BackgroundImageFix",mode:"normal",result:"effect1_dropShadow_35224_19304"}),(0,Dr.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_35224_19304",mode:"normal",result:"shape"})]}),(0,Dr.jsxs)("filter",{id:`b-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"52.8696",width:"72.2329",x:"8.26211",y:"35.5863",children:[(0,Dr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Dr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Dr.jsx)("feOffset",{dx:"-.695652",dy:"-.695652"}),(0,Dr.jsx)("feGaussianBlur",{stdDeviation:".57971"}),(0,Dr.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,Dr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),(0,Dr.jsx)("feBlend",{in2:"BackgroundImageFix",mode:"normal",result:"effect1_dropShadow_35224_19304"}),(0,Dr.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_35224_19304",mode:"normal",result:"shape"})]}),(0,Dr.jsxs)("filter",{id:`c-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"52.8696",width:"72.2329",x:"-.432518",y:"35.5863",children:[(0,Dr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Dr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Dr.jsx)("feOffset",{dx:".695652",dy:"-.695652"}),(0,Dr.jsx)("feGaussianBlur",{stdDeviation:".57971"}),(0,Dr.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,Dr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),(0,Dr.jsx)("feBlend",{in2:"BackgroundImageFix",mode:"normal",result:"effect1_dropShadow_35224_19304"}),(0,Dr.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_35224_19304",mode:"normal",result:"shape"})]}),(0,Dr.jsxs)("filter",{id:`d-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"29.7837",width:"82.3188",x:"-1.13208",y:"58.664",children:[(0,Dr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Dr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Dr.jsx)("feOffset",{dy:"-.695652"}),(0,Dr.jsx)("feGaussianBlur",{stdDeviation:".57971"}),(0,Dr.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,Dr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),(0,Dr.jsx)("feBlend",{in2:"BackgroundImageFix",mode:"normal",result:"effect1_dropShadow_35224_19304"}),(0,Dr.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_35224_19304",mode:"normal",result:"shape"})]}),(0,Dr.jsxs)("linearGradient",{id:`e-${t}`,gradientUnits:"userSpaceOnUse",x1:"40.0273",x2:"40.0273",y1:"44.5256",y2:"88.0038",children:[(0,Dr.jsx)("stop",{offset:"0",stopColor:"#2c3440"}),(0,Dr.jsx)("stop",{offset:"1",stopColor:"#2c2d31"})]}),(0,Dr.jsxs)("radialGradient",{id:`f-${t}`,cx:"0",cy:"0",gradientTransform:"matrix(0 -24 33.5 0 39.5273 57)",gradientUnits:"userSpaceOnUse",r:"1",children:[(0,Dr.jsx)("stop",{offset:"0",stopColor:"#eba837"}),(0,Dr.jsx)("stop",{offset:"1",stopColor:"#915b00",stopOpacity:"0"})]}),(0,Dr.jsxs)("linearGradient",{id:`g-${t}`,children:[(0,Dr.jsx)("stop",{offset:"0",stopColor:"#151518"}),(0,Dr.jsx)("stop",{offset:"1",stopColor:"#313b48"})]}),(0,Dr.jsx)("linearGradient",{id:`h-${t}`,gradientUnits:"userSpaceOnUse",x1:"62",x2:"62",xlinkHref:`#g-${t}`,y1:"88",y2:"51"}),(0,Dr.jsxs)("linearGradient",{id:`i-${t}`,children:[(0,Dr.jsx)("stop",{offset:"0",stopColor:"#cf8413"}),(0,Dr.jsx)("stop",{offset:"1",stopColor:"#2d3541",stopOpacity:"0"})]}),(0,Dr.jsx)("radialGradient",{id:`j-${t}`,cx:"0",cy:"0",gradientTransform:"matrix(27.50001912 27.50001912 -27.50001912 27.50001912 49.5352 60)",gradientUnits:"userSpaceOnUse",r:"1",xlinkHref:`#i-${t}`}),(0,Dr.jsxs)("radialGradient",{id:`k-${t}`,cx:"0",cy:"0",gradientTransform:"matrix(20.50001554 20.50001554 -20.50001554 20.50001554 52.5273 57)",gradientUnits:"userSpaceOnUse",r:"1",children:[(0,Dr.jsx)("stop",{offset:"0",stopColor:"#f1bf51"}),(0,Dr.jsx)("stop",{offset:"1",stopColor:"#cd8131",stopOpacity:"0"})]}),(0,Dr.jsx)("linearGradient",{id:`l-${t}`,gradientUnits:"userSpaceOnUse",x1:"18.0625",x2:"18.0625",xlinkHref:`#g-${t}`,y1:"88",y2:"51"}),(0,Dr.jsx)("radialGradient",{id:`m-${t}`,cx:"0",cy:"0",gradientTransform:"matrix(-27.50001912 27.50001912 -27.50001912 -27.50001912 30.5273 60)",gradientUnits:"userSpaceOnUse",r:"1",xlinkHref:`#i-${t}`}),(0,Dr.jsxs)("radialGradient",{id:`n-${t}`,cx:"0",cy:"0",gradientTransform:"matrix(-17.4999736 17.4999736 -17.4999736 -17.4999736 23.5273 55)",gradientUnits:"userSpaceOnUse",r:"1",children:[(0,Dr.jsx)("stop",{offset:"0",stopColor:"#fff"}),(0,Dr.jsx)("stop",{offset:".0001",stopColor:"#ffe24b"}),(0,Dr.jsx)("stop",{offset:"1",stopColor:"#fff",stopOpacity:"0"})]}),(0,Dr.jsxs)("radialGradient",{id:`o-${t}`,cx:"0",cy:"0",gradientTransform:"matrix(0 24.5 -24.5 0 40.0273 61.5)",gradientUnits:"userSpaceOnUse",r:"1",children:[(0,Dr.jsx)("stop",{offset:"0",stopColor:"#e4a946"}),(0,Dr.jsx)("stop",{offset:".542849",stopColor:"#b37c20",stopOpacity:".7"}),(0,Dr.jsx)("stop",{offset:"1",stopOpacity:"0"})]}),(0,Dr.jsxs)("linearGradient",{id:`p-${t}`,gradientUnits:"userSpaceOnUse",x1:"40.0273",x2:"40.0273",y1:"60.5",y2:"86.5",children:[(0,Dr.jsx)("stop",{offset:"0",stopColor:"#ffd267"}),(0,Dr.jsx)("stop",{offset:"1",stopOpacity:"0"})]}),(0,Dr.jsxs)("linearGradient",{id:`q-${t}`,gradientUnits:"userSpaceOnUse",x1:"65.0273",x2:"65.0273",y1:"80",y2:"51",children:[(0,Dr.jsx)("stop",{offset:"0",stopColor:"#222832"}),(0,Dr.jsx)("stop",{offset:"1",stopColor:"#31373f",stopOpacity:"0"})]}),(0,Dr.jsx)("clipPath",{id:`r-${t}`,children:(0,Dr.jsx)("rect",{height:"80",rx:"2",width:"80"})}),(0,Dr.jsx)("clipPath",{id:`s-${t}`,children:(0,Dr.jsx)("rect",{height:"80",rx:"1.3913",width:"80",x:".027344"})}),(0,Dr.jsx)("g",{clipPath:`url(#r-${t})`,children:(0,Dr.jsxs)("g",{clipPath:`url(#s-${t})`,children:[(0,Dr.jsx)("path",{d:"m.027344 37.4531h80v50.5507h-80z",fill:`url(#e-${t})`}),(0,Dr.jsx)("path",{d:"m.0273438 37.4531h79.9999562l-36.7516-26.4186c-1.9409-1.39512-4.5558-1.39513-6.4967 0z",fill:"#2c3440"}),(0,Dr.jsx)("path",{d:"m6.48047 37.4591h67.09683l-30.3001-21.7809c-1.9409-1.3952-4.5558-1.3952-6.4967 0z",fill:"#222832"}),(0,Dr.jsxs)("g",{filter:`url(#a-${t})`,children:[(0,Dr.jsx)("rect",{fill:"#4a4a4d",height:"53",rx:"1.15942",width:"67",x:"6.02734",y:"33"}),(0,Dr.jsx)("rect",{fill:`url(#f-${t})`,fillOpacity:".3",height:"53",rx:"1.15942",width:"67",x:"6.02734",y:"33"})]}),(0,Dr.jsxs)("g",{filter:`url(#b-${t})`,children:[(0,Dr.jsx)("path",{d:"m80.0312 37.4414-69.913 50.5507h69.913z",fill:`url(#h-${t})`}),(0,Dr.jsx)("path",{d:"m80.0312 37.4414-69.913 50.5507h69.913z",fill:`url(#j-${t})`,fillOpacity:".3"}),(0,Dr.jsx)("path",{d:"m79.7812 87.7421v-49.8114l-68.8906 49.8114z",stroke:`url(#k-${t})`,strokeOpacity:".5",strokeWidth:".5"})]}),(0,Dr.jsxs)("g",{filter:`url(#c-${t})`,children:[(0,Dr.jsx)("path",{d:"m.03125 37.4414 69.91305 50.5507h-69.91305z",fill:`url(#l-${t})`}),(0,Dr.jsx)("path",{d:"m.03125 37.4414 69.91305 50.5507h-69.91305z",fill:`url(#m-${t})`,fillOpacity:".3"}),(0,Dr.jsx)("path",{d:"m.28125 87.7421v-49.8114l68.89065 49.8114z",stroke:`url(#n-${t})`,strokeOpacity:".5",strokeWidth:".5"})]}),(0,Dr.jsxs)("g",{filter:`url(#d-${t})`,children:[(0,Dr.jsx)("path",{d:"m.0273438 87.9839h79.9999562l-36.7516-26.4186c-1.9409-1.3952-4.5558-1.3952-6.4967 0z",fill:"#1e2736"}),(0,Dr.jsx)("path",{d:"m.0273438 87.9839h79.9999562l-36.7516-26.4186c-1.9409-1.3952-4.5558-1.3952-6.4967 0z",fill:`url(#o-${t})`,fillOpacity:".3"}),(0,Dr.jsx)("path",{d:"m36.9249 61.7683-36.121461 25.9656h78.447861l-36.1215-25.9656c-1.8537-1.3325-4.3512-1.3325-6.2049 0z",stroke:`url(#p-${t})`,strokeWidth:".5"})]}),(0,Dr.jsx)("path",{d:"m.027344 51h80v29h-80z",fill:`url(#q-${t})`})]})})]})},Ey=(0,Ia.memo)(fy),Sy=e=>{const t=Yl();return(0,Dr.jsxs)("svg",{className:e.className,"aria-hidden":!!e.ariaHidden||void 0,height:e.height||61,width:e.width||60,viewBox:"0 0 60 61",fill:"none",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[(0,Dr.jsxs)("filter",{id:`a-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"62",width:"62",x:"0",y:"1",children:[(0,Dr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Dr.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Dr.jsx)("feGaussianBlur",{result:"effect1_foregroundBlur_35868_79127",stdDeviation:"4.5"})]}),(0,Dr.jsx)("clipPath",{id:`b-${t}`,children:(0,Dr.jsx)("path",{d:"m0 0h60v61h-60z"})}),(0,Dr.jsx)("g",{clipPath:`url(#b-${t})`,children:(0,Dr.jsx)("g",{filter:`url(#a-${t})`,children:(0,Dr.jsx)("path",{d:"m26.6492 13.8261c0-2.1131 1.7248-3.8261 3.8524-3.8261 2.1277 0 3.8525 1.713 3.8525 3.8261v3.3681c6.3974 1.7208 10.5959 7.6973 10.5959 14.8058l.9631 9.0335c0 1.1458.718-1.6428 1.4332-.6092.4665.6741.9319 1.3466 1.1961 2.0464l.7223 1.913c.7084 1.876 5.2393 9.6163 3.2219 9.6163l-15.3115-5.7391c-.4673 3.2448-2.962 3.8261-6.3584 3.8261s-6.5212-.5813-6.9886-3.8261l-14.19963 5.2608c-2.01735 0 1.40523-7.262 2.11353-9.138l.7224-1.913c.2642-.6998.7296-1.3723 1.1961-2.0464.7152-1.0336 1.4331 1.755 1.4331.6092l.9632-9.0335c0-7.1072 4.1969-13.0828 10.5924-14.8049z",fill:"#252525",fillOpacity:".7"})})})]})},vy=(0,Ia.memo)(Sy),Ay=e=>{const t=Yl();return(0,Dr.jsxs)("svg",{className:e.className,"aria-hidden":!!e.ariaHidden||void 0,height:e.height||14,width:e.width||14,viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[(0,Dr.jsxs)("radialGradient",{id:`a-${t}`,cx:"0",cy:"0",gradientTransform:"matrix(-2.50005399 6.4999748 -9.01804898 -3.46856872 7 7)",gradientUnits:"userSpaceOnUse",r:"1",children:[(0,Dr.jsx)("stop",{offset:"0",stopColor:"#f3c352"}),(0,Dr.jsx)("stop",{offset:"1",stopColor:"#e38937"})]}),(0,Dr.jsxs)("radialGradient",{id:`b-${t}`,cx:"0",cy:"0",gradientTransform:"matrix(-1.99995166 7.00001393 -7.00001393 -1.99995166 5.5 14)",gradientUnits:"userSpaceOnUse",r:"1",children:[(0,Dr.jsx)("stop",{offset:".0899711",stopColor:"#f3c352",stopOpacity:"0"}),(0,Dr.jsx)("stop",{offset:"1",stopColor:"#b25b0a"})]}),(0,Dr.jsxs)("linearGradient",{id:`c-${t}`,gradientUnits:"userSpaceOnUse",x1:"4.5",x2:"9.5",y1:"19.5",y2:"8",children:[(0,Dr.jsx)("stop",{offset:"0",stopColor:"#ffeab4"}),(0,Dr.jsx)("stop",{offset:"1",stopColor:"#eaaf6a",stopOpacity:"0"})]}),(0,Dr.jsx)("circle",{cx:"7",cy:"7",fill:`url(#a-${t})`,r:"7"}),(0,Dr.jsx)("circle",{cx:"7",cy:"7",fill:`url(#b-${t})`,fillOpacity:".7",r:"7"}),(0,Dr.jsx)("circle",{cx:"7",cy:"7",r:"6.75",stroke:`url(#c-${t})`,strokeOpacity:".6",strokeWidth:".5"})]})},Cy=(0,Ia.memo)(Ay),{useAddFieldToScroll:Py,useScrollToFieldsTrigger:Ny,ScrollToFieldsProvider:by}=(0,uu.J)(),Dy={maxWidth:"260px"},Ty=()=>{const{state:e,controller:t}=vc(oc.REMIND_ME),n=(0,Qr.t)(),i=(0,Ur.P)(),s=Sc(),a=(0,Ia.useRef)(null),o=(0,Ia.useRef)(null),r=!e.email.isValid||e.serverErrors.email,[l,u]=(0,Ia.useState)(!1),d=Cu(e.shakeKey,0!==e.shakeKey),h=wa(),m=(0,Ia.useId)(),p=Ny(),g=(0,Ia.useCallback)((()=>{t.updateIsTermsAndConditionsAccepted(!e.termsAndConditions.isAccepted)}),[t,e]),y=(0,Ia.useCallback)((e=>{t.clearEmailServerError(),t.updateEmail(e.target.value)}),[t]),f=(0,Ia.useCallback)((()=>(0,c.sH)(void 0,void 0,void 0,(function*(){(yield t.save())&&h.emit(Oa.SHOULD_HIDE,{isManualCall:!0}),p()}))),[t,h,p]),E=(0,Ia.useCallback)((()=>{t.saveOnClose(),s.getCurrentFlow().isCurrentScreenLast()?h.emit(Oa.SHOULD_HIDE,{isManualCall:!0}):t.leave()}),[t,h,s]);return Py(a,(e=>{var t;return!e.validation.email.isValid||Boolean(null===(t=e.serverErrors)||void 0===t?void 0:t.email)})),Py(o,(e=>!e.validation.termsAndConditions.isValid)),(0,Dr.jsxs)("div",{className:"flow-screen dark-mode-screen","data-qa":"remind-me-later-screen",children:[(0,Dr.jsx)("div",{className:"sr-only",role:"status","aria-live":"polite",children:n.translate("common.screenAriaLabel",{screenTitle:`${n.translate("remindMeScreen.title")}`})}),(0,Dr.jsx)(Kl,{backButtonClickHandler:()=>{t.resetToDefaultState(),s.getCurrentFlow().prev()},children:(0,Dr.jsx)("h2",{className:(0,Rr.A)(i?"title-1 text-ellipsis":"title-2 text-line-clamp-2"),children:n.translate("remindMeScreen.title")})}),(0,Dr.jsx)(Al,{className:(0,Rr.A)("px-body py-8",{shake:d}),children:(0,Dr.jsxs)("div",{className:"fixed-container",children:[(0,Dr.jsxs)("div",{className:"bell-wrap","aria-hidden":!0,children:[(0,Dr.jsx)(Ey,{className:"d-block mx-auto"}),(0,Dr.jsx)(vy,{className:"bell-shadow"}),(0,Dr.jsx)(Cy,{className:"bell-tongue"}),(0,Dr.jsx)(yy,{className:"bell"}),(0,Dr.jsx)(py,{className:"bell-heart"})]}),(0,Dr.jsx)("p",{className:(0,Rr.A)("text-center mx-auto mt-6",i?"text-ellipsis":"text-line-clamp-5"),style:Dy,children:n.translate("remindMeScreen.description")}),(0,Dr.jsxs)("div",{className:(0,Rr.A)(i?"mt-6":"mt-8",{shake:r}),children:[(0,Dr.jsx)(fu.t,{id:m,setRef:a,name:"email",autoComplete:"email",autoFocus:!0,label:n.translate("remindMeScreen.emailInput.label"),labelFloating:!0,placeholder:n.translate("remindMeScreen.emailInput.placeholder"),className:(0,Rr.A)({"pe-10":r}),formLabelClass:(0,Rr.A)({"pe-6":r}),error:r,value:e.email.value,disabled:e.locked,dataQa:"remind-me-later-email-input","data-testid":"remind-me-later-email-input",inputMode:"email","aria-required":!0,"aria-describedby":`${m}-error`,onChange:y,onFocus:()=>u(!0),onBlur:()=>u(!1),children:r&&(0,Dr.jsx)(Eu.U,{className:"p-abs inset-centered-end z-index-5 me-4",showTooltip:l,children:(0,Dr.jsxs)("p",{id:`${m}-error`,children:[!e.email.isValid&&n.translate("remindMeScreen.emailInput.error.required"),e.serverErrors.email&&(0,Dr.jsx)(uc,{token:"remindMeScreen.emailInput.error.server"})]})})}),e.isTermsAndConditionsEnabled&&(0,Dr.jsx)(hy,{className:"mt-4",text:e.termsAndConditions.text,checked:e.termsAndConditions.isAccepted,isValid:e.termsAndConditions.isValid,onTermsAcceptionChange:g,setRef:o})]})]})}),(0,Dr.jsx)(Ll,{backButtonClass:"text-white-hover-white",children:(0,Dr.jsx)(dy,{disabled:e.locked,onClose:E,onSave:f,processingState:e.processingState,serverErrors:e.serverErrors})})]})};var _y,ky,Oy=n(4390);!function(e){e.CARD_NUMBER="cardNumber",e.CARD_EXPIRY="cardExpiry",e.CARD_CVC="cardCvc",e.AU_BANK_ACCOUNT="auBankAccount",e.IBAN="iban",e.IDEAL_BANK="idealBank"}(_y||(_y={})),function(e){e.CARD="card",e.PAYMENT_OPTIONS="paymentOptions"}(ky||(ky={}));var Iy=n(1487),xy=n(9873);const wy={isEmpty:!0,error:null,isFocused:!1,isReady:!1};function Ry(){const[e,t]=(0,Ia.useState)(wy);return{stripeElementState:e,setStripeElementState:t}}const My={boxShadow:"0 0 0 4px rgba(51, 113, 230, 0.5)"},Ly=e=>{let{className:t,firstNumber:n,secondNumber:i,firstNumberHighlighted:s,secondNumberHighlighted:a}=e;const o=Yl();return(0,Dr.jsxs)("div",{className:(0,Rr.A)("check-image",t),"aria-hidden":"true",children:[(0,Dr.jsxs)("svg",{className:"d-block",width:266,height:104,viewBox:"0 0 266 104",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,Dr.jsx)("rect",{width:"266",height:"104",rx:"4",fill:"#F5FAFF"}),(0,Dr.jsx)("rect",{width:"266",height:"104",rx:"4",fill:`url(#${o}-paint0_linear_12221_26907)`}),(0,Dr.jsx)("rect",{x:"4.5",y:"4.5",width:"257",height:"95",rx:"0.5",stroke:`url(#${o}-paint1_linear_12221_26907)`}),(0,Dr.jsx)("path",{d:"M213.213 36.3C213.513 40.8 213.813 45.2 214.113 49.7C214.313 51.9 214.513 54.1 214.513 56.2C214.513 56.6 214.513 57.5 214.213 57.2C212.813 55.8 212.013 53 211.313 51.2C210.413 49.1 209.913 47 210.013 44.6C210.113 41 212.713 37.4 216.513 36.4C218.513 35.9 220.013 37 220.113 39C220.313 41.2 218.713 43.5 217.313 45.1C217.013 45.5 210.613 51.6 213.013 52.3C214.613 52.7 217.113 51.6 218.313 50.7C219.113 50.1 218.613 50.4 218.513 51.2C218.313 52.4 218.913 57.7 221.013 56.7C222.613 55.9 225.513 51.3 223.413 49.7C222.713 49.2 222.013 49.5 221.413 49.9C220.213 50.7 220.313 51.6 221.213 52.6C222.413 53.8 224.313 55.1 226.013 54C228.413 52.5 229.813 49.8 230.413 47.2C231.013 44.9 229.213 48 229.013 48.7C228.813 49.3 228.613 50.2 228.913 50.8C229.713 52.3 232.213 48.8 232.513 48.4C233.013 47.7 233.513 46.8 233.913 46.1C234.113 45.7 234.813 44.8 234.413 44.9C233.313 45.4 232.813 47.4 232.713 48.4C232.613 49.2 232.213 50.8 233.013 51.5C234.813 52.9 237.313 47.7 237.813 46.7C238.013 46.4 238.313 45.7 238.413 45.3C238.513 45 238.313 44.8 238.113 45.1C237.513 46 236.213 49.7 238.213 50C239.113 50.1 239.613 49.3 240.013 48.7C241.813 46.3 243.013 43.5 244.413 41C246.013 38.2 247.513 35.2 249.913 33",stroke:"#A6C2DD",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Dr.jsx)("path",{d:"M20 14.5H48C50.2 14.5 52 16.3 52 18.5C52 20.7 50.2 22.5 48 22.5H20C17.8 22.5 16 20.7 16 18.5C16 16.3 17.8 14.5 20 14.5Z",fill:"#A4CDF3",fillOpacity:"0.5"}),(0,Dr.jsx)("path",{d:"M59 14.5H68C70.2 14.5 72 16.3 72 18.5C72 20.7 70.2 22.5 68 22.5H59C56.8 22.5 55 20.7 55 18.5C55 16.3 56.8 14.5 59 14.5Z",fill:"#A4CDF3",fillOpacity:"0.5"}),(0,Dr.jsx)("path",{d:"M19 32.5H118C119.7 32.5 121 33.8 121 35.5C121 37.2 119.7 38.5 118 38.5H19C17.3 38.5 16 37.2 16 35.5C16 33.8 17.3 32.5 19 32.5Z",fill:"#A4CDF3",fillOpacity:"0.5"}),(0,Dr.jsx)("path",{d:"M227 16.5H247C248.7 16.5 250 17.8 250 19.5C250 21.2 248.7 22.5 247 22.5H227C225.3 22.5 224 21.2 224 19.5C224 17.8 225.3 16.5 227 16.5Z",fill:"#A4CDF3",fillOpacity:"0.5"}),(0,Dr.jsx)("path",{d:"M19 42.5H100C101.7 42.5 103 43.8 103 45.5C103 47.2 101.7 48.5 100 48.5H19C17.3 48.5 16 47.2 16 45.5C16 43.8 17.3 42.5 19 42.5Z",fill:"#A4CDF3",fillOpacity:"0.5"}),(0,Dr.jsxs)("defs",{children:[(0,Dr.jsxs)("linearGradient",{id:`${o}-paint0_linear_12221_26907`,x1:"38.3423",y1:"21.9516",x2:"46.3388",y2:"103.855",gradientUnits:"userSpaceOnUse",children:[(0,Dr.jsx)("stop",{stopColor:"#F2F9FF",stopOpacity:"0.5"}),(0,Dr.jsx)("stop",{offset:"0.629481",stopColor:"#D1E1F0",stopOpacity:"0.5"})]}),(0,Dr.jsxs)("linearGradient",{id:`${o}-paint1_linear_12221_26907`,x1:"43.314",y1:"64.3826",x2:"226.883",y2:"215.125",gradientUnits:"userSpaceOnUse",children:[(0,Dr.jsx)("stop",{stopColor:"#CDE3FA"}),(0,Dr.jsx)("stop",{offset:"1",stopColor:"#9CBBDA"})]})]})]}),(0,Dr.jsxs)("div",{className:"check-image-numbers d-flex items-center text-sans-serif",dir:"ltr",children:[(0,Dr.jsx)("p",{className:(0,Rr.A)("body-4 px-1 py-0-5 border-radius-2 me-3",{"text-white bg-primary":s}),style:s?My:void 0,children:n}),(0,Dr.jsx)("p",{className:(0,Rr.A)("body-4 px-1 py-0-5 border-radius-2",{"text-white bg-primary":a}),style:a?My:void 0,children:i})]})]})},{ScrollToFieldsProvider:Uy,useAddFieldToScroll:Fy,useScrollToFieldsTrigger:jy,useFakeStripeElement:By}=(0,uu.J)(),Gy=e=>{let{transitionEntered:t,stripeElementState:n,setStripeElementState:i}=e;const{state:s,controller:a}=vc(ve.AU_BECS),o=(0,Ur.P)(),r=(0,Qr.t)(),l=(0,zr.$)(),u=(0,Iy.j)(),d=(0,xy.l)(Oy.bG.SAFARI,18),h=(0,kr.M)(),[m,p]=(0,Ia.useState)(),g=(0,Ia.useRef)(null),y=Cu(s.shakeKey,0!==s.shakeKey),f=(0,Ia.useRef)(!1),E=jy(),S=By({scrollIntoView:e=>{var t;return null===(t=g.current)||void 0===t?void 0:t.scrollIntoView(e)},focus:()=>{var e;return null===(e=null==m?void 0:m.getElement(_y.AU_BANK_ACCOUNT))||void 0===e?void 0:e.focus()}});return Fy(S,(e=>Boolean(e.error)||e.isEmpty)),(0,Ia.useEffect)((()=>{(0,c.sH)(void 0,void 0,void 0,(function*(){if(l)return;if(!g.current)throw new Error("auBankAccountContainerRef is not provided");const{stripeElements:e}=yield a.initiateAuBECS(g.current,{onAuBankAccountElementReady:()=>{i((e=>Object.assign(Object.assign({},e),{isReady:!0})))}});p(e)}))}),[a,l,i]),(0,Ia.useEffect)((()=>{if(!n.isReady||!m||!t)return;const e=m.getElement(_y.AU_BANK_ACCOUNT);if(!e){if(l)return;throw new Error("auBankAccount element is not initialized")}const s=()=>{f.current?h.document.dispatchEvent(new Event("stripeElementEvent")):f.current=!0,i((e=>Object.assign(Object.assign({},e),{isFocused:!0})))},a=()=>{i((e=>Object.assign(Object.assign({},e),{isFocused:!1})))},o=e=>{i((t=>{var n,i;return Object.assign(Object.assign({},t),{error:null!==(i=null===(n=e.error)||void 0===n?void 0:n.message)&&void 0!==i?i:null})}))};return e.on("focus",s),e.on("blur",a),e.on("change",o),u||d||f.current||e.focus(),()=>{e.off("focus",s),e.off("blur",a),e.off("change",o)}}),[a,t,m,l,h,i,n.isReady,u,d]),(0,Dr.jsxs)("form",{className:"flow-screen",onSubmit:e=>{e.preventDefault(),E(),a.leave()},children:[(0,Dr.jsx)("div",{className:"sr-only",role:"status","aria-live":"polite",children:r.translate("common.screenAriaLabel",{screenTitle:`${r.translate("auBECSScreen.title")}`})}),(0,Dr.jsx)(Kl,{title:r.translate("auBECSScreen.title"),titleQa:"au-becs-title"}),(0,Dr.jsx)(Al,{className:(0,Rr.A)("px-body",{"pt-5 pb-8":!o}),children:(0,Dr.jsxs)("div",{className:(0,Rr.A)("fixed-container",{"grow-1 d-flex flex-column":!o}),children:[(0,Dr.jsx)("p",{className:(0,Rr.A)("text-center",o?"text-ellipsis":"text-line-clamp-4"),children:r.translate("auBECSScreen.description")}),(0,Dr.jsx)(Ly,{className:(0,Rr.A)("mx-auto",o?"mt-7":"mt-5"),firstNumber:"000-000",secondNumber:"000123456",firstNumberHighlighted:n.isFocused,secondNumberHighlighted:n.isFocused}),(0,Dr.jsxs)("div",{className:(0,Rr.A)("p-rel",o?"mt-7":"mt-5",{shake:y,"pointer-events-none":s.locked}),children:[(0,Dr.jsx)("div",{ref:g,className:"StripeElement"}),n.error&&(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsx)(Eu.U,{className:"p-abs inset-centered-end z-index-5 me-4",children:n.error}),(0,Dr.jsx)("p",{role:"alert",className:"sr-only",children:n.error})]})]}),(0,Dr.jsx)("div",{className:o?"mt-5":"grow-1 min-h-0 p-rel mt-4",children:(0,Dr.jsx)("div",{className:(0,Rr.A)({"p-abs inset-0 scroll-box":!o}),children:(0,Dr.jsx)(uc,{className:(0,Rr.A)("body-4 text-gray-80 text-ellipsis",{"px-3 py-2-5":!o,"pointer-events-none":s.locked}),as:"p",token:"auBECSScreen.legalInformation",params:{link:"https://stripe.com/au/legal/becs-dd-service-agreement"}})})})]})}),(0,Dr.jsx)(Ll,{children:(0,Dr.jsx)(qu,{type:"submit",className:"btn-primary",errorTitle:s.payErrorMessage,processingState:s.processingState,dataQa:"au-becs-continue-button",trackingElement:"nextButton",children:s.isPaymentScreen?_u(r,s.formattedAmount,s.frequency):r.translate("auBECSScreen.button")})})]})};function qy(e){const[t,n]=(0,Ia.useState)(!1);return(0,Ia.useLayoutEffect)((()=>{const{current:t}=e;if(!t)return;const i=()=>{const e=t.offsetWidth<t.scrollWidth||t.offsetHeight<t.scrollHeight;n(e)},s=new ResizeObserver(i);return t&&(s.observe(t),i()),()=>s.disconnect()}),[e]),t}const Hy=e=>{var t,n;const i=(0,El.Y)();return(0,Dr.jsxs)("svg",{className:(0,Rr.A)(e.className),"aria-hidden":!!e.ariaHidden||void 0,fill:"none",viewBox:"0 0 64 64",height:null!==(t=e.height)&&void 0!==t?t:64,width:null!==(n=e.width)&&void 0!==n?n:64,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[(0,Dr.jsxs)("filter",{id:`a-${i}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"24.0263",width:"26",x:"14",y:"23.5",children:[(0,Dr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Dr.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Dr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Dr.jsx)("feOffset",{dy:"-1.5"}),(0,Dr.jsx)("feGaussianBlur",{stdDeviation:"2"}),(0,Dr.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Dr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.753923 0 0 0 0 0.0394018 0 0 0 0 0.468114 0 0 0 0.16 0"}),(0,Dr.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_5614_10321"})]}),(0,Dr.jsxs)("filter",{id:`b-${i}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"15.5483",width:"14.1826",x:"14.085",y:"22.9985",children:[(0,Dr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Dr.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Dr.jsx)("feGaussianBlur",{result:"effect1_foregroundBlur_5614_10321",stdDeviation:"2"})]}),(0,Dr.jsxs)("filter",{id:`c-${i}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"15.5483",width:"14.1826",x:"25.5386",y:"22.9985",children:[(0,Dr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Dr.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Dr.jsx)("feGaussianBlur",{result:"effect1_foregroundBlur_5614_10321",stdDeviation:"2"})]}),(0,Dr.jsxs)("linearGradient",{id:`d-${i}`,gradientUnits:"userSpaceOnUse",x1:"39.4602",x2:"43.2501",y1:"9.34783",y2:"49.635",children:[(0,Dr.jsx)("stop",{offset:"0",stopColor:"#d4e8ff"}),(0,Dr.jsx)("stop",{offset:"1",stopColor:"#aed0f9"})]}),(0,Dr.jsxs)("linearGradient",{id:`e-${i}`,gradientUnits:"userSpaceOnUse",x1:"14.1589",x2:"26.5091",y1:"19.2105",y2:"52.5764",children:[(0,Dr.jsx)("stop",{offset:"0",stopColor:"#ef505a"}),(0,Dr.jsx)("stop",{offset:".766418",stopColor:"#e61446"}),(0,Dr.jsx)("stop",{offset:"1",stopColor:"#d60443"})]}),(0,Dr.jsxs)("linearGradient",{id:`f-${i}`,gradientUnits:"userSpaceOnUse",x1:"20.9333",x2:"28.7525",y1:"27.4211",y2:"45.932",children:[(0,Dr.jsx)("stop",{offset:"0",stopColor:"#fff1f3"}),(0,Dr.jsx)("stop",{offset:".71",stopColor:"#ffe0e7"}),(0,Dr.jsx)("stop",{offset:"1",stopColor:"#fed4e1"})]}),(0,Dr.jsxs)("radialGradient",{id:`g-${i}`,cx:"0",cy:"0",gradientTransform:"matrix(0 15.1591 -13.8222 0 27 28.1364)",gradientUnits:"userSpaceOnUse",r:"1",children:[(0,Dr.jsx)("stop",{offset:"0",stopColor:"#fff",stopOpacity:".7"}),(0,Dr.jsx)("stop",{offset:"1",stopColor:"#fff",stopOpacity:"0"})]}),(0,Dr.jsxs)("linearGradient",{id:`h-${i}`,gradientUnits:"userSpaceOnUse",x1:"2.65798",x2:"2.65798",y1:"0",y2:"8.18031",children:[(0,Dr.jsx)("stop",{offset:"0",stopColor:"#fff"}),(0,Dr.jsx)("stop",{offset:"1",stopColor:"#fff",stopOpacity:"0"})]}),(0,Dr.jsx)("path",{d:"m28 9c-8.8366 0-16 7.1634-16 16v8c0 8.8366 7.1634 16 16 16h18c3.4031 0 6.5581-1.0625 9.1514-2.8738 3.0372.8662 5.5406.5697 7.9294-.4701.7855-.3419.6816-1.4562-.0809-1.8466-1.5753-.8065-2.6265-1.7568-3.2995-2.5406 1.4596-2.4131 2.2996-5.2429 2.2996-8.2689v-8c0-8.8366-7.1634-16-16-16z",fill:`url(#d-${i})`}),(0,Dr.jsx)("path",{d:"m18.0005 15c-8.83654 0-15.99998 7.1634-15.99998 16v8c0 3.0319.84333 5.8669 2.30821 8.2831-.67348.7811-1.72144 1.7247-3.28728 2.5264-.76252.3904-.86638 1.5047-.080911 1.8466 2.384981 1.0381 4.884101 1.3353 7.914641.4743 2.59212 1.8088 5.74482 2.8696 9.14532 2.8696h18c8.8366 0 16-7.1634 16-16v-8c0-8.8366-7.1634-16-16-16z",fill:`url(#e-${i})`}),(0,Dr.jsxs)("g",{filter:`url(#a-${i})`,children:[(0,Dr.jsx)("path",{d:"m25.5002 47.1028c.9081.5647 2.0915.5647 2.9996 0 21.9195-13.6308 7.3499-28.6137-1.4998-19.1112-8.8497-9.5026-23.4193 5.4802-1.4998 19.1112z",fill:`url(#f-${i})`}),(0,Dr.jsx)("path",{d:"m25.5002 47.1028c.9081.5647 2.0915.5647 2.9996 0 21.9195-13.6308 7.3499-28.6137-1.4998-19.1112-8.8497-9.5026-23.4193 5.4802-1.4998 19.1112z",fill:`url(#g-${i})`,fillOpacity:".4"})]}),(0,Dr.jsx)("g",{filter:`url(#b-${i})`,children:(0,Dr.jsx)("ellipse",{cx:"2.65798",cy:"4.09016",fill:`url(#h-${i})`,rx:"2.65798",ry:"4.09016",transform:"matrix(.754153 -.656699 .575342 .817913 16.8184 29.1728)"})}),(0,Dr.jsx)("g",{filter:`url(#c-${i})`,children:(0,Dr.jsx)("ellipse",{cx:"2.65798",cy:"4.09016",fill:`url(#h-${i})`,rx:"2.65798",ry:"4.09016",transform:"matrix(-.754153 -.656699 -.575342 .817913 36.9878 29.1728)"})})]})},Vy=(0,Ia.memo)(Hy);var Ky;function Yy(){return Yy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Yy.apply(null,arguments)}var zy,Wy,$y=function(e,t){return Ia.createElement("svg",Yy({fill:"none",height:28,viewBox:"0 0 28 28",width:28,xmlns:"http://www.w3.org/2000/svg",ref:t},e),Ky||(Ky=Ia.createElement("g",{fill:"currentColor"},Ia.createElement("path",{clipRule:"evenodd",d:"m15.0393 2.44995c-.6707-.24772-1.4079-.24772-2.0786 0l-8.30715 3.06797c-.39274.14504-.65355.51939-.65355.93807v7.54411c0 3.6861 1.95965 6.6874 4.28911 8.8073 1.16017 1.0557 2.38789 1.8689 3.45309 2.4137 1.1081.5668 1.9145.779 2.2578.779s1.1497-.2122 2.2578-.779c1.0652-.5448 2.2929-1.358 3.4531-2.4137 2.3294-2.1199 4.2891-5.1212 4.2891-8.8073v-7.54411c0-.41868-.2608-.79303-.6536-.93807zm-2.7715-1.876139c1.1179-.412868 2.3465-.412868 3.4644 0l8.3071 3.067969c1.1783.43514 1.9607 1.55819 1.9607 2.81421v7.54411c0 4.4389-2.3618 7.9375-4.943 10.2865-1.2952 1.1786-2.6702 2.092-3.8885 2.7151-1.1754.6012-2.3332.9984-3.1685.9984s-1.9931-.3972-3.1685-.9984c-1.21831-.6231-2.59328-1.5365-3.88847-2.7151-2.58125-2.349-4.94303-5.8476-4.94303-10.2865v-7.54411c0-1.25602.78243-2.37907 1.96066-2.81421z",fillRule:"evenodd"}),Ia.createElement("path",{d:"m18.2906 11.75h-.2535v-1.1855c0-2.19278-1.7415-4.02451-3.9182-4.06361-.0595-.00107-.1783-.00107-.2378 0-2.1767.0391-3.91819 1.87083-3.91819 4.06361v1.1855h-.25354c-.39069 0-.70937.4028-.70937.9003v5.9463c0 .4969.31868.9035.7094.9035h8.5812c.3907 0 .7094-.4066.7094-.9035v-5.9463c0-.4974-.3187-.9003-.7094-.9003zm-3.4867 3.8674v1.7967c0 .2058-.1723.3799-.3784.3799h-.8509c-.2061 0-.3785-.1741-.3785-.3799v-1.7967c-.1999-.1966-.3162-.4684-.3162-.7691 0-.5698.4408-1.0594 1.0013-1.082.0594-.0024.1783-.0024.2377 0 .5605.0226 1.0013.5122 1.0013 1.082 0 .3007-.1164.5725-.3163.7691zm1.5623-3.8674h-4.7323v-1.1855c0-1.30621 1.0623-2.38623 2.3661-2.38623s2.3662 1.08002 2.3662 2.38623z"}))))},Xy=(0,Ia.forwardRef)($y),Qy=(0,Ia.memo)(Xy);function Zy(){return Zy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Zy.apply(null,arguments)}var Jy=function(e,t){return Ia.createElement("svg",Zy({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.4,strokeLinecap:"round",strokeLinejoin:"round",ref:t},e),zy||(zy=Ia.createElement("line",{x1:12,y1:5,x2:12,y2:19})),Wy||(Wy=Ia.createElement("line",{x1:5,y1:12,x2:19,y2:12})))},ef=(0,Ia.forwardRef)(Jy),tf=(0,Ia.memo)(ef);const nf={minWidth:"80px"},sf=e=>{let{amount:t,donation:n,rate:i,className:s}=e;const a=(0,Qr.t)(),{controller:o}=vc(ve.DONATE);return(0,Dr.jsxs)("div",{className:(0,Rr.A)("d-flex items-center justify-between gap-x-4",s),children:[(0,Dr.jsx)(uc,{as:"p",className:"donor-rating-label body-3 text-ellipsis",dataQa:"donor-rating-upsell-tooltip-label",token:"donorRatingBanner.upsell.label",params:{amount:a.formatCurrency(t,{currency:n.currency,display:"short"}),rate:i}}),(0,Dr.jsxs)("button",{type:"button",className:"btn btn-xs btn-primary shrink-0 d-flex items-center justify-center w-auto max-w-50",style:nf,"data-qa":"donor-rating-upsell-tooltip-button",onClick:()=>o.applyDonorRatingUpsell(),children:[(0,Dr.jsx)(tf,{className:"icon-stroke icon-stroke-2 shrink-0 me-0-5 font-size-16"}),(0,Dr.jsx)("span",{className:"text-truncate",children:a.formatCurrency(t,{currency:n.currency,display:"short"})})]})]})},af=(0,Ia.memo)(sf),of=()=>{const{state:e}=vc(ve.DONATE),t=Ic().get(be.DONOR_RATING_CHECKOUT_EXPERIMENT),n=Zt.THRESHOLD_NAME_MAP[e.donorRating.upsell.position];return{isDonorRatingExperimentTestGroup2Enabled:t.isTestGroup2,donorRatingUpsellRate:n}},{useAddFieldToScroll:rf,useScrollToFieldsTrigger:cf,ScrollToFieldsProvider:lf}=(0,uu.J)(),uf=e=>{let{hint:t,donation:n,currency:i,disabled:s,errors:a,onSelect:o,donorRatingUpsell:r}=e;const c=(0,Qr.t)(),l=(0,Ur.P)(),u=(0,cc.Q)(),d=Gr(),h=(0,jr.wf)(),m=(0,Ia.useMemo)((()=>t.default),[t.default]),p=(0,Ia.useRef)(null),g=a.amount.min&&m,{isDonorRatingExperimentTestGroup2Enabled:y,donorRatingUpsellRate:f}=of(),E=r.position!==jt.NONE,S=y&&E&&!l&&!s&&m;return rf(p,(()=>g)),(0,Hl.f)({ref:p,mode:ql.Q.ALL,autoFocus:m,preventScroll:!0}),(0,Dr.jsx)(Kc.S,{content:(0,Dr.jsx)(af,{amount:r.amount,donation:n,rate:f}),trigger:"manual",manualOpen:S,className:l?"ui-tooltip-mobile":"ui-tooltip-desktop",placement:u?"left":"right",maxWidth:"300px",rootContainer:h,children:(0,Dr.jsxs)("div",{className:(0,Rr.A)("amount-hint",{"amount-hint-checked":m}),children:[(0,Dr.jsx)("input",{type:"radio",id:`${t.id}-hint`,className:(0,Rr.A)("amount-hint-radio",{"has-error":g}),value:t.id,title:c.formatCurrency(t.amount,{currency:i,display:"short"})+", "+t.description,name:"hintOptions",checked:m,disabled:s,"aria-invalid":g,"aria-describedby":`${t.id}-hint-error`,"data-qa":"suggested-amount-hint-button",onChange:()=>o(t),ref:p}),(0,Dr.jsxs)("label",{htmlFor:`${t.id}-hint`,className:d("amount-hint-label"),"data-qa":"suggested-amount-hint-label",children:[(0,Dr.jsxs)("span",{className:"label-2 d-flex p-rel z-index-2",children:[(0,Dr.jsx)("span",{className:"text-truncate me-2",children:c.formatCurrency(t.amount,{currency:i,display:"short"})}),(0,Dr.jsx)("span",{className:"icon-slot icon-slot-18 shrink-0 ms-auto","aria-hidden":!0,children:g&&(0,Dr.jsx)(Eu.U,{className:"p-abs inset-centered","data-testid":"min-amount-tooltip-trigger",dataQa:"suggested-amount-hint",children:(0,Dr.jsx)(uc,{as:"p",token:"donateForm.donationAmountField.error.min",params:{amount:c.formatCurrency(n.minAmount,{currency:n.currency,display:"round"})}})})})]}),(0,Dr.jsx)("span",{className:"p-rel text-truncate z-index-2",children:t.description})]}),g&&(0,Dr.jsx)(uc,{as:"p",id:`${t.id}-hint-error`,className:"sr-only",token:"donateForm.donationAmountField.error.min",params:{amount:c.formatCurrency(n.minAmount,{currency:n.currency,display:"round"})}})]})})},df=(0,Ia.memo)(uf),hf=e=>{const{disabled:t,onShowCustomAmount:n}=e,i=(0,Qr.t)(),s=Gr();return(0,Dr.jsx)("button",{type:"button",className:s("custom-amount-btn"),disabled:t,onClick:()=>n(),"data-qa":"suggested-amount-custom-button",children:i.translate("donateForm.amountHint.customAmount")})},mf=(0,Ia.memo)(hf),pf=e=>{let{currency:t,disabled:n,onChange:i,list:s}=e;const a=(0,Qr.t)(),o=bc(),r=Yl();return(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsxs)("label",{className:"sr-only",htmlFor:`currency-${r}`,"data-qa":"currency-selector-label",children:[a.translate("donateForm.donationCurrency")," ",t]}),(0,Dr.jsx)("select",{id:`currency-${r}`,className:"currency-select p-abs inset-0 max-w-100 text-noselect p-0 border-0 m-0 overflow-hidden cursor-pointer z-index-1",value:t,onChange:e=>{i(e.target.value)},"data-qa":"currency-selector","data-tracking-element-name":"changeCurrency",disabled:n,children:s.map(((e,t)=>(0,Dr.jsx)("optgroup",{children:e.map(((e,t)=>(0,Dr.jsxs)("option",{value:e,children:[e," · ",o.getName(e)]},t)))},t)))})]})},gf=(0,Ia.memo)(pf),yf=e=>{let{donation:t,disabled:n,autofocusMode:i,flowType:s,className:a,style:o,useSpaceAfterCurrencySymbol:r,isCustomAmount:c,placeholder:l,guessedCurrenciesList:d,allCurrenciesList:h,showError:m,errors:p,donorRatingUpsell:g}=e;const{controller:y,state:f}=vc(ve.DONATE),E=(0,zr.$)(),S=(0,cc.Q)(),v=(0,Ur.P)(),A=Lc("lg"),C=(0,Qr.t)(),P=bc(),N=Tc(),b=(0,_r.n)().getAskPageConfig().show,D=(0,jr.wf)(),T=(0,Ia.useRef)(null),_=(0,Ia.useRef)(null);(0,Hl.f)({ref:_,autoFocus:t.canModifyAmount,mode:i}),rf(_,(e=>e.amount.required||e.amount.min||e.amount.max));const k=(e=>{const t=(0,_r.n)();return(0,Ia.useMemo)((()=>{var n,i,s,a;return t.company.allowCentsForCharges?e>0:void 0!==(null===(i=null===(n=t.external.state)||void 0===n?void 0:n.donation)||void 0===i?void 0:i.amount)&&!Number.isInteger(null===(a=null===(s=t.external.state)||void 0===s?void 0:s.donation)||void 0===a?void 0:a.amount)}),[t,e])})(P.getDigits(t.currency)),[O,I]=(0,Ia.useState)(!1),[x,w]=(0,Ia.useState)(!1),[R,M]=(0,Ia.useState)(!1),[L,U]=(0,Ia.useState)(!1),{isDonorRatingExperimentTestGroup2Enabled:F,donorRatingUpsellRate:j}=of(),B=y.isAverageDonationAmountVariantTestGroup(bt.TEST_1),G=f.donation.averageDonationAmount,q=B&&Boolean(G),H=(0,Ia.useCallback)((()=>L?C.translate("donateForm.donationAmountField.error.required"):x?C.translate("donateForm.donationAmountField.error.min",{amount:C.formatCurrency(t.minAmount,{currency:t.currency,display:"round"})}):R?C.translate("donateForm.donationAmountField.error.max",{amount:C.formatCurrency(t.maxAmount,{currency:t.currency,display:"floatcents"})}):""),[C,R,x,L,t.currency,t.maxAmount,t.minAmount]),V=(0,Ia.useCallback)((e=>{y.changeAmount(e),y.tryToCalculateDonorRating({debounce:!0})}),[y]),K=(0,Ia.useCallback)((e=>{y.changeCurrency(e),y.validateAmount(),N.trackCheckoutCustomEvent({type:u.DONATION_CURRENCY_SELECTED,data:{currency:e}})}),[y,N]),Y=(0,Ia.useMemo)((()=>[d,h]),[d,h]),z=(0,Ia.useMemo)((()=>(0,Dr.jsx)(gf,{currency:t.currency,disabled:n,onChange:K,list:Y})),[Y,K,t.currency,n]),W=(0,Ia.useCallback)((()=>{y.validateAmount(p.amount.required),w(!E&&p.amount.min),M(!E&&p.amount.max),U(!E&&p.amount.required)}),[y,E,p.amount.min,p.amount.max,p.amount.required]);(0,Ia.useEffect)((()=>{T.current&&(w(!E&&p.amount.min),M(!E&&p.amount.max),U(!E&&p.amount.required),I(q))}),[p.amount.max,p.amount.min,p.amount.required,E,T,q]);let $={content:"",trigger:"manual",className:v?"ui-tooltip-mobile":"ui-tooltip-desktop",placement:S?"left":"right",maxWidth:"300px",rootContainer:D};if(B&&($=Object.assign(Object.assign({},$),{content:(0,Dr.jsx)(uc,{as:"p",token:"donateForm.donationAmountField.average.hint",params:{amount:C.formatCurrency(null!=G?G:0,{currency:t.currency,display:"round"})}}),manualOpen:O&&b&&A&&!v&&!n&&!f.forceHideAverageDonationHintTooltip,dataQa:"average-donation-amount-tooltip"})),F){const e=g.position!==jt.NONE;$=Object.assign(Object.assign({},$),{content:(0,Dr.jsx)(af,{amount:g.amount,donation:t,rate:j}),manualOpen:e&&!v&&!n&&!!_.current})}return(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsx)("div",{ref:T,className:a,style:o,children:(0,Dr.jsx)(Kc.S,Object.assign({},$,{children:(0,Dr.jsx)("div",{children:(0,Dr.jsx)(qm,{ref:_,className:(0,Rr.A)("group-price-control",{"group-price-control-custom-amount":c}),showCurrencySymbol:!0,useSpaceAfterCurrencySymbol:r,currency:t.currency,amount:t.amount,canModifyAmount:t.canModifyAmount,withoutFraction:!k,canSelectCurrency:t.canModifyAmount&&t.canSelectCurrency,currencyCodeNode:t.canModifyAmount&&t.canSelectCurrency&&z,currencyService:P,hasError:m,errorLabel:H(),"aria-required":!0,qaActiveAttribute:"amount",qaDisabledAttribute:"disabled-amount",trackingElement:"amountInput",onAmountChange:V,onAmountInputBlur:W,donationType:s,isCustomAmount:c,placeholder:l,disabled:n})})}))}),q&&(v||!A||!b)&&(0,Dr.jsx)("div",{className:"bg-blue-10 border-radius-10 px-4 py-3 mt-3",children:(0,Dr.jsx)(uc,{as:"p",className:"body-3 text-truncate",token:"donateForm.donationAmountField.average.hint",dataQa:"average-donation-amount-tooltip",params:{amount:C.formatCurrency(null!=G?G:0,{currency:t.currency,display:"round"})}})})]})},ff=(0,Ia.memo)(yf),Ef={marginLeft:"-1px",marginRight:"-1px",marginBottom:"-1px"},Sf=e=>{const{controller:t}=vc(ve.DONATE),n=(0,Ia.useCallback)((e=>{t.changeCurrentHint(e),t.tryToCalculateDonorRating()}),[t]),i=(0,Ia.useMemo)((()=>e.donation.hintOptions),[e.donation.hintOptions]),s=(0,Ia.useCallback)((()=>{t.changeAmount(null),t.tryToCalculateDonorRating()}),[t]);return(0,Dr.jsxs)("div",{className:(0,Rr.A)("border border-gray-20 border-radius-base",e.className,{shake:e.shake}),children:[i&&i.map(((t,i)=>(0,Dr.jsx)(df,{hint:t,donation:e.donation,currency:e.donation.currency,disabled:e.disabled,errors:e.errors,onSelect:n,donorRatingUpsell:e.donorRatingUpsell},i))),e.showFrequencyCustomAmountInput?(0,Dr.jsx)(ff,{donation:e.donation,errors:e.errors,tribute:e.tribute,guessedCurrenciesList:e.guessedCurrenciesList,allCurrenciesList:e.allCurrenciesList,showError:e.showError,flowType:e.flowType,useSpaceAfterCurrencySymbol:!0,isCustomAmount:!0,style:Ef,disabled:e.disabled,animationEnded:e.animationEnded,autofocusMode:e.autofocusMode,donorRatingUpsell:e.donorRatingUpsell}):(0,Dr.jsx)(mf,{disabled:e.disabled,onShowCustomAmount:s})]})},vf=(0,Ia.memo)(Sf),Af=e=>{let{donation:t,shake:n,animationEnded:i,autofocusMode:s,disabled:a,errors:o,tribute:r,guessedCurrenciesList:c,allCurrenciesList:l,showError:u,flowType:d,donorRatingUpsell:h}=e;var m;const{controller:p,state:g}=vc(ve.DONATE),y=(0,Qr.t)(),f=Gr(),E=g.donation.averageDonationAmount===g.donation.amount,[S,v]=(0,Ia.useState)({[g.donation.frequency]:E}),A=null!==(m=S[g.donation.frequency])&&void 0!==m&&m,C=p.isAverageDonationAmountVariantTestGroup(bt.TEST_2),P=p.isAverageDonationAmountVariantTestGroup(bt.TEST_3),N=()=>{v((e=>Object.assign(Object.assign({},e),{[g.donation.frequency]:!0})))};return(0,Dr.jsxs)(Dr.Fragment,{children:[t.showAmountSuggestions&&(0,Dr.jsx)("div",{className:(0,Rr.A)("amount-options",C||P?" gap-y-3":"gap-y-2-5",{shake:n}),"aria-label":y.translate("donateForm.suggestionAriaLabel"),children:t.amountOptions.map(((e,n)=>{const i=e===g.donation.averageDonationAmount,s=e===t.amount,o=i&&!s&&!A;return(0,Dr.jsxs)("div",{className:"amount-option","data-qa":"suggested-amount-button",children:[(0,Dr.jsx)("input",{type:"radio",id:`${e}-option`,className:(0,Rr.A)("amount-option-radio",{"z-index-2":P&&i}),title:y.formatCurrency(e,{currency:t.currency,display:"shortlabel"}),name:"amountOptions",value:e,checked:s,disabled:a,"aria-label":y.translate("donateForm.suggestionAmountAriaLabel",{amount:y.formatCurrency(e,{currency:t.currency,display:"shortlabel"})}),onChange:e=>(e=>{p.changeAmount(e),p.tryToCalculateDonorRating(),p.validateAmount(),v((e=>Object.assign(Object.assign({},e),{[g.donation.frequency]:!0})))})(Number.parseInt(e.target.value)),"data-tracking-element-name":"suggestionButton","data-qa":"suggested-amount-radio"}),(0,Dr.jsx)("label",{htmlFor:`${e}-option`,className:(0,Rr.A)(f("amount-option-label"),{"amount-option-popular-gradient":P&&o}),"aria-hidden":!0,"data-qa":"suggested-amount-label",children:(0,Dr.jsx)("span",{className:(0,Rr.A)("text-truncate",{"p-rel z-index-1":P&&i}),children:y.formatCurrency(e,{currency:t.currency,display:"shortlabel"})})}),(C||P)&&i&&(0,Dr.jsxs)("div",{className:"p-abs inset-top-centered max-w-100 mt-minus-2 overflow-hidden",children:[(0,Dr.jsx)("p",{className:(0,Rr.A)("font-size-10 line-height-17 font-weight-700 text-uppercase border-radius-10 px-2",s?"bg-primary text-white":"bg-white text-primary",{invisible:P&&o}),"data-qa":"suggested-amount-popular-label",children:y.translate("donateForm.donationAmountField.average.popular")}),P&&o&&(0,Dr.jsx)("div",{className:(0,Rr.A)("amount-option-popular-badge p-abs inset-top-start d-flex border-radius-10 overflow-hidden",s?"bg-primary text-white":"bg-white text-primary"),onAnimationEnd:N,children:(0,Dr.jsx)("p",{className:"font-size-10 line-height-17 font-weight-700 text-uppercase px-2","data-qa":"suggested-amount-popular-animated-label",children:y.translate("donateForm.donationAmountField.average.popular")})})]})]},n)}))}),(0,Dr.jsx)(ff,{donation:t,errors:o,tribute:r,guessedCurrenciesList:c,allCurrenciesList:l,showError:u,flowType:d,disabled:a,className:(0,Rr.A)({"mt-2-5":t.showAmountSuggestions&&!C&&!P,"mt-3":t.showAmountSuggestions&&(C||P),shake:n}),animationEnded:i,autofocusMode:s,donorRatingUpsell:h})]})},Cf=(0,Ia.memo)(Af),Pf=e=>{let{isActive:t,disabled:n,toggleAnnualDonation:i}=e;const s=(0,Qr.t)();return(0,Dr.jsx)(lu,{className:"body-3",customLabelClasses:"line-height-20",checked:t,disabled:n,dataQa:"annual-donation-checkbox",dataTestId:"annual-donation-checkbox",trackingElement:"repeatAnnualCheckbox",onChange:i,children:(0,Dr.jsx)("span",{className:"body-3 text-truncate","data-qa":"annual-donation-label",children:s.translate("donateForm.annualDonation.label")})})},Nf=(0,Ia.memo)(Pf),bf=e=>{let{isActive:t,endDate:n,disabled:i,className:s,toggleDailyDonation:a}=e;const o=(0,Qr.t)(),r=o.formatDate(n,{type:Ga.SHORT_WITH_YEAR});return(0,Dr.jsx)(lu,{className:(0,Rr.A)("body-3",s),customLabelClasses:"line-height-20",checked:t,disabled:i,onChange:a,dataQa:"daily-donation-checkbox",dataTestId:"daily-donation-checkbox",trackingElement:"dailyDonationCheckbox",children:(0,Dr.jsx)("span",{className:"body-3 text-truncate","data-qa":"daily-donation-label",children:o.translate("donateForm.dailyDonation.label",{endDate:r})})})},Df=(0,Ia.memo)(bf),Tf=e=>{let{donorRating:t}=e;const i=Zt.THRESHOLD_NAME_MAP[t.thresholdName];return(0,Dr.jsxs)("div",{className:"donor-rating-banner body-3 fixed-container d-flex items-center justify-center border-radius-10 bg-orange-30 border border-orange-40 px-2",children:[void 0!==t.iconName&&(0,Dr.jsx)("img",{className:"d-block shrink-0 me-2",src:n(3862)(`./${t.iconName}.png`),width:20,height:20,"aria-hidden":!0,alt:t.iconName}),(0,Dr.jsx)(uc,{as:"p",className:"donor-rating-label text-truncate",dataQa:"donor-rating-label",token:"donorRatingBanner.rate",params:{rate:i}})]})},_f=(0,Ia.memo)(Tf),kf=e=>{const{index:t,onAnimationEnd:n}=e,i=(0,Ia.useRef)(null),[s,a]=(0,Ia.useState)(!1);(0,Ia.useEffect)((()=>{a(!0)}),[]);const o=(0,Ia.useCallback)((()=>{n(t)}),[t,n]);return(0,Dr.jsx)(Mr.A,{nodeRef:i,classNames:"rtg-flying-heart",in:s,timeout:2500,onEntered:o,children:(0,Dr.jsx)("span",{ref:i,className:"flying-heart",children:(0,Dr.jsx)(al,{className:"d-block",width:14,height:14})})})},Of=(0,Ia.memo)(kf),If=e=>{let{heartTrigger:t}=e;const[n,i]=(0,Ia.useState)([]);(0,Ia.useEffect)((()=>{null!==t&&i((e=>{const t=(e[e.length-1]||0)+1,n=[...e,t];return n.length===e.length?e:n}))}),[t]);const s=(0,Ia.useCallback)((e=>{i((t=>t.filter((t=>t!==e))))}),[]);return(0,Dr.jsx)(Dr.Fragment,{children:n.map((e=>(0,Dr.jsx)(Of,{index:e,onAnimationEnd:s},e)))})},xf=(0,Ia.memo)(If),wf=e=>{const{state:t,controller:n}=vc(ve.DONATE),i=(0,Qr.t)(),s=Gr(),[a,o]=(0,Ia.useState)(null),r=(0,Ia.useCallback)((e=>{n.validateAmount(),n.changeFrequency(e),e===t.rightButtonFrequency&&o((a||0)+1)}),[n,a,t.rightButtonFrequency]),c=(0,Ia.useMemo)((()=>t.donation.frequency===t.rightButtonFrequency),[t.donation.frequency,t.rightButtonFrequency]),l=(0,Ia.useMemo)((()=>t.donation.frequency===W.ANNUAL),[t.donation.frequency]),u=(0,Ia.useMemo)((()=>t.donation.frequency===W.ANNUAL&&t.donation.showAnnualCheckbox),[t.donation.frequency,t.donation.showAnnualCheckbox]),d=(0,Ia.useCallback)((()=>{const e=t.donation.annualCheckboxChecked?W.ANNUAL:t.leftButtonFrequency;r(e)}),[r,t.leftButtonFrequency,t.donation.annualCheckboxChecked]);return(0,Dr.jsxs)("div",{className:(0,Rr.A)("frequency-wrap",{"frequency-wrap-three-columns":t.donation.showAnnualTab},e.className),"aria-label":i.translate("donateForm.frequencyAriaLabel"),children:[(0,Dr.jsx)("button",{type:"button",className:(0,Rr.A)(s("frequency-btn"),{"frequency-btn-selected":t.donation.frequency===t.leftButtonFrequency||u}),"aria-current":t.donation.frequency===t.leftButtonFrequency||u,disabled:e.disabled,onClick:d,"data-qa":"less-frequent-button","data-tracking-element-name":"onceRepeat",children:(0,Dr.jsx)("span",{className:"p-rel text-truncate","data-testid":"left-button-label",children:t.leftButtonLabel})}),(0,Dr.jsxs)("button",{type:"button",className:(0,Rr.A)(s("frequency-btn"),{"frequency-btn-selected":c}),"aria-current":t.donation.frequency===t.rightButtonFrequency,disabled:e.disabled,onClick:()=>r(t.rightButtonFrequency),"data-qa":"more-frequent-button","data-tracking-element-name":"monthlyPlan",children:[(0,Dr.jsxs)("span",{className:"p-rel shrink-0 text-fuchsia-80 me-1","aria-hidden":!0,children:[(0,Dr.jsx)(al,{className:"d-block",width:14,height:14}),(0,Dr.jsx)(xf,{heartTrigger:a})]}),(0,Dr.jsx)("span",{className:"p-rel text-truncate mx-0-5","data-testid":"right-button-label",children:t.rightButtonLabel})]}),t.donation.showAnnualTab&&(0,Dr.jsx)("button",{type:"button",className:(0,Rr.A)(s("frequency-btn"),{"frequency-btn-selected":l}),"aria-current":l,disabled:e.disabled,onClick:()=>r(W.ANNUAL),"data-qa":"annual-frequent-button","data-tracking-element-name":"repeatAnnualTab",children:(0,Dr.jsx)("span",{className:"p-rel text-truncate",children:i.translate("donateForm.annual")})}),!t.donation.showAnnualTab&&(0,Dr.jsx)("div",{className:"frequency-frame p-abs inset-0"})]})},Rf=(0,Ia.memo)(wf);var Mf,Lf,Uf;function Ff(){return Ff=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ff.apply(null,arguments)}var jf=function(e,t){return Ia.createElement("svg",Ff({fill:"none",height:31,viewBox:"0 0 22 31",width:22,xmlns:"http://www.w3.org/2000/svg",ref:t},e),Mf||(Mf=Ia.createElement("g",{clipRule:"evenodd",fillRule:"evenodd"},Ia.createElement("path",{d:"m.507812 24.6719c-.026481-.0459-.052961-.0918-.098827-.0653l.026481.0459s.045865-.0265.072346.0194z"}),Ia.createElement("path",{d:"m.185395 24.0017c.045867-.0265.045867-.0265 0 0 .118215-.0071.118214-.0071.045866-.0265 0 0 .000001 0-.045866.0265z"}),Ia.createElement("path",{d:"m.179981 24.0035.019687-.0735z"}))),Lf||(Lf=Ia.createElement("path",{d:"m16.9661 23.931c-5.446 2.8727-8.22466 5.3799-8.22466 5.3799s-.80873-4.5387-.05829-9.6647",stroke:"#222832",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2})),Uf||(Uf=Ia.createElement("path",{d:"m9.35452 27.0478c22.14548-34.0478 3.64548-27.04779997-.35409-21.0478",stroke:"#222832",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2})))},Bf=(0,Ia.forwardRef)(jf),Gf=(0,Ia.memo)(Bf);const qf=e=>{let{className:t}=e;const n=(0,Qr.t)(),i=(0,cc.Q)();return(0,Dr.jsxs)("div",{className:(0,Rr.A)("frequency-hint-top d-flex items-center justify-center pt-1 mx-minus-3",t),children:[(0,Dr.jsx)("p",{className:"frequency-hint-top-text text-truncate","data-qa":"recurring-frequency-hint-label",children:n.translate("frequencyHint.label")}),(0,Dr.jsx)("span",{className:(0,Rr.A)("icon-slot icon-slot-12 shrink-0 mt-1-5",{"icon-flip-horizontal":i}),"aria-hidden":!0,children:(0,Dr.jsx)(Gf,{className:"p-abs inset-top-start",width:19,height:27})})]})},Hf=(0,Ia.memo)(qf),Vf=()=>{var e;const{state:t,controller:n}=vc(ve.DONATE),i=(0,Qr.t)(),s=(0,Ur.P)(),a=Lc("lg"),o=(0,_r.n)(),r=(0,Ia.useRef)(null),c=(0,Ia.useRef)(null),l=Ic(),u=Gr(),d=cf(),[h,m]=(0,Ia.useState)(!0),p=Cu(t.amountShakeKey,0!==t.amountShakeKey),g=Cu(t.designationShakeKey,0!==t.designationShakeKey),y=!o.preselectDesignation,f=t.designation.shouldShowDesignation&&y,E=t.designation.shouldShowDesignation&&!y,S=l.get(be.RECURRING_FREQUENCY_HINT_CHECKOUT_DESKTOP_EXPERIMENT),v=l.get(be.RECURRING_FREQUENCY_HINT_CHECKOUT_MOBILE_EXPERIMENT),A=!!t.donation.showAmountSuggestions&&t.donation.hintOptions,C=!A,P=t.donation.showDonationEndDate&&t.donation.donationEndDate,N=v.isTestGroup||S.isTestGroup1()||S.isTestGroup2()&&!a,b=t.donation.showAnnualCheckbox&&(t.donation.frequency===W.ONCE||t.donation.frequency===W.ANNUAL);rf(c,(e=>e.designation.required));const D=(0,Ia.useCallback)((()=>{n.toggleTribute()}),[n]),T=(0,Ia.useCallback)((e=>{n.changeTributeName(e)}),[n]),_=(0,Ia.useCallback)((()=>{n.addComment()}),[n]),k=(0,Ia.useCallback)((e=>{n.setIsTributeInputFocused(e)}),[n]),O=(0,Ia.useCallback)((e=>n.changeGoal(e)),[n]),I=(0,Ia.useCallback)((()=>n.savePrevComment()),[n]),x=(0,Ia.useCallback)((()=>{m(!0)}),[]),w=(0,Ia.useCallback)((()=>{m(!1)}),[]),R=(0,Ia.useCallback)((e=>{n.toggleDonationEndDateActive(e)}),[n]);(0,Ia.useEffect)((()=>{v.exposure(),S.exposure()}),[v,S]);const{isDonorRatingExperimentTestGroup2Enabled:M,donorRatingUpsellRate:L}=of(),U=(0,Ia.useRef)(null);return(0,Dr.jsxs)("form",{onSubmit:e=>{d(),e.preventDefault(),n.leave()},className:"flow-screen","data-qa":"fiat-donate-form",children:[(0,Dr.jsx)(Mr.A,{nodeRef:U,in:t.donorRating.shouldShowDonorRatingBanner,timeout:150,classNames:s?"rtg-donor-rating-mobile":"rtg-donor-rating-desktop",unmountOnExit:!0,exit:!t.donorRating.immediateExit,children:(0,Dr.jsx)("div",{ref:U,className:(0,Rr.A)(u("donor-rating-banner-wrapper"),"w-100 px-body"),role:"alert",children:(0,Dr.jsx)(_f,{donorRating:t.donorRating})})}),(0,Dr.jsx)(Gl,{autoFocus:s,children:i.translate("common.screenAriaLabel",{screenTitle:`${i.translate("donateForm.title")}`})}),(0,Dr.jsx)(Kl,{className:"border-bottom-0",titleFullWidth:!0,children:(0,Dr.jsxs)("div",{className:(0,Rr.A)("d-flex items-center justify-center",s?"pt-3 pb-2":"py-3"),children:[(0,Dr.jsx)(Qy,{className:"icon-fill shrink-0 font-size-28 text-green-80 me-2","aria-hidden":!0}),(0,Dr.jsx)("h2",{className:"title-1 text-truncate",children:i.translate("donateForm.title")})]})}),(0,Dr.jsx)(Al,{className:"px-body",children:(0,Dr.jsxs)("div",{className:"fixed-container grow-1 min-h-0 d-flex flex-column",children:[N&&(0,Dr.jsx)(Hf,{className:"mb-3"}),t.donation.canModifyFrequency&&(0,Dr.jsx)(Rf,{className:s?"mb-4":"mb-3",disabled:n.isLocked}),(0,Dr.jsx)(wm.A,{children:(0,Dr.jsx)(Mr.A,{nodeRef:r,timeout:150,onEntered:x,onExited:w,classNames:A?"rtg-amount-hints":"rtg-amount-suggestions",children:(0,Dr.jsxs)("div",{ref:r,className:(0,Rr.A)({"p-rel z-index-1":M&&s}),children:[A&&(0,Dr.jsx)(vf,{donation:t.donation,tribute:t.tribute,errors:t.errors,guessedCurrenciesList:t.guessedCurrenciesList,allCurrenciesList:t.allCurrenciesList,showError:t.showError,flowType:t.flowType,showFrequencyCustomAmountInput:t.showFrequencyCustomAmountInput,shake:p,disabled:n.isLocked,animationEnded:h,autofocusMode:ql.Q.ALL,donorRatingUpsell:t.donorRating.upsell}),C&&(0,Dr.jsx)(Cf,{donation:t.donation,tribute:t.tribute,errors:t.errors,guessedCurrenciesList:t.guessedCurrenciesList,allCurrenciesList:t.allCurrenciesList,showError:t.showError,flowType:t.flowType,shake:p,disabled:n.isLocked,animationEnded:h,autofocusMode:ql.Q.DESKTOP,donorRatingUpsell:t.donorRating.upsell})]})},A?"amount-hints":"amount-suggestions")}),M&&s&&(0,Dr.jsxs)("div",{className:(0,Rr.A)("donor-rating-upsell-wrapper",{"is-visible":t.donorRating.upsell.position!==jt.NONE}),role:"alert",children:[(0,Dr.jsx)(yc,{size:12}),(0,Dr.jsx)(af,{amount:t.donorRating.upsell.amount,donation:t.donation,rate:L,className:"bg-blue-10 px-4 py-3 border-radius-10"})]}),!f&&!P&&!b&&(0,Dr.jsx)(yc,{size:s?12:8,sizeMin:4}),f&&(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsx)(yc,{size:12,sizeMin:4}),(0,Dr.jsx)(yg,{goal:t.designation.goal,goals:t.designation.goals,shake:g,hasError:t.errors.designation.required,changeGoal:O,goalKey:t.designation.goalKey,isEditable:t.designation.isEditable,isDesignationRequired:y,disabled:n.isLocked,ref:c})]}),b&&(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsx)(yc,{size:f?16:20}),(0,Dr.jsx)(Nf,{isActive:null!==(e=t.donation.annualCheckboxChecked)&&void 0!==e&&e,disabled:n.isLocked,toggleAnnualDonation:e=>n.toggleAnnualCheckbox(e)})]}),P&&t.donation.donationEndDate&&(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsx)(yc,{size:12,sizeMin:4}),(0,Dr.jsx)(Df,{endDate:t.donation.donationEndDate,isActive:t.donation.isDonationEndDateActive,toggleDailyDonation:R,disabled:n.isLocked})]}),t.tribute.show&&(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsx)(yc,{size:12,sizeMin:4}),(0,Dr.jsx)(Ng,{inHonorOfMaxLength:t.tribute.inHonorOfMaxLength,isActive:t.tribute.isActive,sharingEnabled:t.tribute.sharingEnabled,labelType:t.tribute.labelType,name:t.tribute.name,disabled:n.isLocked,onToggleTribute:D,onChangeTributeName:T,onInputFocusChange:k})]}),(0,Dr.jsx)(yc,{size:12,sizeMin:4,className:"mt-auto"}),E&&(0,Dr.jsx)(yg,{goal:t.designation.goal,goals:t.designation.goals,shake:g,hasError:t.errors.designation.required,changeGoal:O,goalKey:t.designation.goalKey,isEditable:t.designation.isEditable,disabled:n.isLocked}),t.comment.isEnabled&&(0,Dr.jsxs)(Dr.Fragment,{children:[E&&(0,Dr.jsx)(yc,{size:12,sizeMin:4}),(0,Dr.jsx)(hg,{prevContent:t.comment.prevContent,content:t.comment.content,onAddComment:_,onHighlight:I,disabled:n.isLocked})]}),!s&&(0,Dr.jsx)(yc,{size:20,sizeMin:16})]})}),(0,Dr.jsx)(Ll,{children:(0,Dr.jsx)(qu,{type:"submit",className:"btn btn-primary",disabled:n.isLocked,processingState:t.processingState,trackingElement:"nextButton",dataQa:"donate-button",children:t.donateButtonLabel})})]})};var Kf;!function(e){e.CONTINUE="continue",e.UPSELL_PAY_LATER="upsell_pay_later"}(Kf||(Kf={}));const Yf=e=>{const{controller:t}=vc(ve.DOUBLE),n=(0,Qr.t)();return(0,Dr.jsx)("div",{className:(0,Rr.A)("d-flex justify-center",e.className),children:(0,Dr.jsx)("button",{type:"button",className:"btn-link text-truncate",disabled:e.locked,onClick:()=>t.skip(),"data-qa":"skip-to-the-next-step","data-tracking-element-name":"skipButton",children:n.translate("doubleDonationScreen.button.skip")})})},zf=(0,Ia.memo)(Yf),Wf=e=>{const t=(0,Qr.t)(),n=(0,Ia.useCallback)((()=>{e.onLeave()}),[e]),i=(0,Ia.useCallback)((()=>{e.onAcceptUpsell()}),[e]);return(0,Dr.jsx)("div",{className:(0,Rr.A)(e.className),children:e.isAlreadyPaidAmountNotMatched?(0,Dr.jsx)(qu,{className:"btn-primary",processingState:e.processingState,onClick:n,dataQa:"double-continue",trackingElement:"nextButton",errorTitle:e.payErrorMessage,errorMessage:e.additionalPayErrorMessage,children:t.translate("doubleDonationScreen.button.continue")}):(0,Dr.jsxs)(Dr.Fragment,{children:[e.buttonType===Kf.CONTINUE&&(0,Dr.jsx)(qu,{className:"btn-primary",processingState:e.processingState,onClick:n,dataQa:"double-continue",trackingElement:"nextButton",errorTitle:e.payErrorMessage,errorMessage:e.additionalPayErrorMessage,children:t.translate("doubleDonationScreen.button.continue")}),e.buttonType===Kf.UPSELL_PAY_LATER&&(0,Dr.jsxs)("div",{className:"d-block",children:[(0,Dr.jsx)(qu,{className:"btn-primary",processingState:e.processingState,onClick:i,dataQa:"double-continue",trackingElement:"nextButton",errorTitle:e.payErrorMessage,errorMessage:e.additionalPayErrorMessage,children:e.changeAmountButtonLabel}),(0,Dr.jsx)("div",{className:"d-flex justify-center mt-5",children:(0,Dr.jsx)("button",{type:"button",className:"btn-link text-truncate",disabled:e.locked,onClick:n,"data-qa":"skip-to-the-next-step","data-tracking-element-name":"skipButton",children:e.noChangeAmountButtonLabel})})]}),e.showSkipButton&&(0,Dr.jsx)(zf,{locked:e.locked,className:"mt-5"})]})})},$f=(0,Ia.memo)(Wf),Xf=e=>{const{controller:t}=vc(ve.DOUBLE),n=(0,Qr.t)(),i=(0,zr.$)(),s=(0,Ia.useMemo)((()=>e.isIntegrationEnabled?e.companies.map((e=>({id:e.id.toString(),value:e.company_name}))):[]),[e.companies,e.isIntegrationEnabled]),a=(0,Ia.useCallback)((n=>{i||e.isIntegrationEnabled&&t.getDTDCompanies(n)}),[t,i,e.isIntegrationEnabled]),o=(0,Ia.useCallback)((e=>{t.changeEmployerName(e)}),[t]),r=(0,Ia.useCallback)((()=>{t.changeEmployerName(""),t.resetEmployerDTD()}),[t]),c=(0,Ia.useCallback)((e=>t.setEmployerDTD(Number(e))),[t]);return(0,Dr.jsx)(ey,{className:(0,Rr.A)("search-select-double",{"search-select-double-active":e.showEmployerMatchedBlock||e.showDTDUpsell}),labelFloating:!0,labelOptional:!0,label:n.translate("doubleDonationScreen.matchInput.label"),options:s,value:e.employer.name,autoComplete:"organization",onSearch:a,onSelect:c,onChange:o,placeholder:n.translate("doubleDonationScreen.matchInput.placeholder"),onClear:r,disabled:e.locked,hint:(0,Dr.jsx)(uc,{token:"doubleDonationScreen.tooltipLabel",params:{link:"https://doublethedonation.com/privacy-policy/"}}),hintAriaLabel:n.translate("doubleDonationScreen.helpAriaLabel"),allowClear:!0,dataQa:"company-field",trackingElement:"selectEmployer",autoFocus:e.autoFocus,autoFocusMode:ql.Q.DESKTOP})},Qf=(0,Ia.memo)(Xf),Zf=e=>{const t=(0,Qr.t)(),n=(0,Ia.useRef)(null),i=(0,Ur.P)(),s=$r(n);return(0,Dr.jsx)(Mr.A,{classNames:i?"rtg-dtd-description-mobile":"rtg-dtd-description",nodeRef:n,in:e.showDTDDescription,addEndListener:s,mountOnEnter:!0,unmountOnExit:!0,children:(0,Dr.jsxs)("div",{ref:n,children:[(0,Dr.jsx)(uc,{className:(0,Rr.A)("text-center",i?"text-ellipsis":"text-line-clamp-4"),as:"p",token:"doubleDonationScreen.description.desktop"}),(0,Dr.jsx)("p",{className:(0,Rr.A)("font-weight-500 text-center mt-1-5",i?"text-ellipsis":"text-line-clamp-4"),children:t.translate("doubleDonationScreen.callToAction")}),(0,Dr.jsx)(yc,{size:16})]})})},Jf=(0,Ia.memo)(Zf);var eE,tE,nE;function iE(){return iE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},iE.apply(null,arguments)}var sE,aE=function(e,t){return Ia.createElement("svg",iE({fill:"none",height:100,viewBox:"0 0 100 100",width:100,xmlns:"http://www.w3.org/2000/svg",ref:t},e),eE||(eE=Ia.createElement("circle",{cx:50,cy:50,fill:"#c4c4c4",r:50})),tE||(tE=Ia.createElement("circle",{cx:50,cy:50,fill:"#fff",r:49.5,stroke:"#c7cdd6"})),nE||(nE=Ia.createElement("path",{clipRule:"evenodd",d:"m23 92.0905v-19.1493c0-2.1476 1.7185-3.9412 3.8729-3.9412h2.1271v-13.127c0-2.1175 1.7054-3.873 3.8279-3.873h1.1721v-10.984c0-2.2061 1.7927-4.016 4-4.016h1.2055l1.4179-6.1095.002-.0079c.4286-1.7193 1.9819-2.8826 3.7361-2.8826h4.1385v-11c0-.8284.6716-1.5 1.5-1.5s1.5.6716 1.5 1.5v11h4.2669c1.7542 0 3.3075 1.1633 3.7362 2.8826l.0041.0165 1.3019 6.1009h1.1909c2.2073 0 4 1.8099 4 4.016v10.984h2.1721c2.1225 0 3.8279 1.7555 3.8279 3.873v13.127h2.1271c2.1544 0 3.8729 1.7936 3.8729 3.9412v18.4895c-.6557.444-1.3226.8729-2 1.2861v-19.7756c0-1.0877-.8671-1.9412-1.8729-1.9412h-16.2542c-1.0058 0-1.8729.8535-1.8729 1.9412v26.7025c-.6628.0793-1.3295.1456-2 .1986v-43.9693c0-2.1175 1.7054-3.873 3.8279-3.873h6.1721v-10.984c0-1.1115-.9073-2.016-2-2.016h-24c-1.0927 0-2 .9045-2 2.016v10.984h7.1721c2.1225 0 3.8279 1.7555 3.8279 3.873v44.0385c-.6703-.0397-1.3371-.0926-2-.1584v-26.8119c0-1.0877-.8671-1.9412-1.8729-1.9412h-16.2542c-1.0058 0-1.8729.8535-1.8729 1.9412v20.3697c-.6769-.3916-1.3437-.7985-2-1.2204zm19.5677-60.7311-1.309 5.6406h17.5054l-1.2053-5.6483c-.2039-.7888-.9281-1.3517-1.7919-1.3517h-11.4054c-.8666 0-1.5927.5665-1.7938 1.3594zm.5594 37.6406h-12.1271v-13.127c0-1.0428.8397-1.873 1.8279-1.873h10.3442c.9882 0 1.8279.8302 1.8279 1.873v13.6198c-.5536-.3134-1.1914-.4928-1.8729-.4928zm26.8729 0v-13.127c0-1.0428-.8397-1.873-1.8279-1.873h-10.3442c-.9882 0-1.8279.8302-1.8279 1.873v13.6198c.5536-.3134 1.1914-.4928 1.8729-.4928zm-26-36v2h2v-2zm5 0v2h2v-2zm5 2v-2h2v2zm-20 26v-3h2v3zm0 5v-3h2v3zm6-5v-3h2v3zm0 2v3h2v-3zm19-5v3h2v-3zm0 5v3h2v-3zm6-5v3h2v-3zm0 8v-3h2v3zm-34 10v14.5268h-2v-14.5268zm5 19.3691v-19.3691h-2v19.3691zm31 0v-19.3691h-2v19.3691zm5-4.8423v-14.5268h-2v14.5268zm-32-47.5268v6.0193h2v-6.0193zm6 6.0193v-6.0193h2v6.0193zm6-6.0193v6.0193h2v-6.0193zm6 6.0193v-6.0193h2v6.0193z",fill:"#619fff",fillRule:"evenodd"})))},oE=(0,Ia.forwardRef)(aE),rE=(0,Ia.memo)(oE);function cE(){return cE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},cE.apply(null,arguments)}var lE,uE,dE=function(e,t){return Ia.createElement("svg",cE({fill:"none",height:26,viewBox:"0 0 26 26",width:26,xmlns:"http://www.w3.org/2000/svg",ref:t},e),sE||(sE=Ia.createElement("g",{stroke:"#428dff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:4},Ia.createElement("path",{d:"m13 2v22"}),Ia.createElement("path",{d:"m2 13h22"}))))},hE=(0,Ia.forwardRef)(dE),mE=(0,Ia.memo)(hE);function pE(){return pE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},pE.apply(null,arguments)}var gE=function(e,t){return Ia.createElement("svg",pE({fill:"none",height:100,viewBox:"0 0 100 100",width:100,xmlns:"http://www.w3.org/2000/svg",ref:t},e),lE||(lE=Ia.createElement("circle",{cx:50,cy:50,fill:"#fff",r:49.5,stroke:"#c7cdd6"})),uE||(uE=Ia.createElement("g",{fill:"#619fff"},Ia.createElement("path",{d:"m57.2608 62.7612c-2.0159 1.5341-4.5318 2.4449-7.2605 2.4449s-5.2446-.9108-7.2604-2.4449c-.4176-.3178-.8138-.6623-1.1859-1.0311-.146-.1447-.2884-.2931-.4268-.4451-.7192-.7894.3304-1.6178 1.2605-1.1484.0241.0122.0481.0252.072.0391.4596.2678.9347.5119 1.4236.7305 1.8681.8354 3.9383 1.2999 6.117 1.2999s4.2489-.4645 6.117-1.2999c.489-.2186.9641-.4627 1.4236-.7305.0239-.0139.048-.0269.0721-.0391.93-.4694 1.9796.359 1.2605 1.1484-.1385.152-.2808.3004-.4269.4451-.3721.3688-.7682.7133-1.1858 1.0311z"}),Ia.createElement("path",{d:"m39 50c0-1.6569 1.1123-3 2.4845-3h.031c1.3722 0 2.4845 1.3431 2.4845 3s-1.1123 3-2.4845 3h-.031c-1.3722 0-2.4845-1.3431-2.4845-3z"}),Ia.createElement("path",{d:"m58.4845 47c-1.3722 0-2.4845 1.3431-2.4845 3s1.1123 3 2.4845 3h.031c1.3722 0 2.4845-1.3431 2.4845-3s-1.1123-3-2.4845-3z"}),Ia.createElement("path",{clipRule:"evenodd",d:"m50 75c13.8071 0 25-11.1929 25-25s-11.1929-25-25-25-25 11.1929-25 25 11.1929 25 25 25zm23-25c0 12.7026-10.2974 23-23 23-12.7025 0-23-10.2974-23-23 0-12.7025 10.2975-23 23-23 12.7026 0 23 10.2975 23 23z",fillRule:"evenodd"}))))},yE=(0,Ia.forwardRef)(gE),fE=(0,Ia.memo)(yE);const EE=()=>{const{state:e}=vc(ve.DOUBLE);return(0,Dr.jsxs)("div",{className:(0,Rr.A)("double-img shrink-0 mx-auto",{enabled:!e.showDTDDescription}),"aria-hidden":!0,children:[(0,Dr.jsx)("div",{className:"double-img-user",children:(0,Dr.jsx)(fE,{className:"d-block",width:80,height:80})}),(0,Dr.jsx)("div",{className:"double-img-plus",children:(0,Dr.jsx)(mE,{className:"d-block",width:21,height:21})}),(0,Dr.jsx)("div",{className:"double-img-company",children:(0,Dr.jsx)(rE,{className:"d-block",width:80,height:80})})]})},SE=(0,Ia.memo)(EE),vE={characterData:!0,childList:!0,subtree:!0},AE=e=>{let{currency:t,showDTDUpsell:n,isAlreadyPaidAmountNotMatched:i,showEmployerMatchedBlock:s,employer:a,minimumMatchedAmount:o,upsellTotal:r,DTDUpsellDoubledAmount:c,DTDDoubledAmount:l,isFeeCovered:u}=e;const d=(0,Qr.t)(),h=(0,Ur.P)(),[m,p]=(0,Ia.useState)(!1),g=(0,Ia.useCallback)((e=>{const t=e.parentElement,n=e.firstChild;t&&n&&t.offsetHeight<=n.offsetHeight+44&&p(!0)}),[]),{mutableElementRef:y}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vE;const n=(0,Ia.useRef)(null);return(0,Ia.useEffect)((()=>{if(!(null==n?void 0:n.current)||!e)return;const i=new MutationObserver((()=>{e(n.current)}));return i.observe(n.current,t),()=>i.disconnect()}),[e,t,n]),{mutableElementRef:n}}(g),f=Bl(n||s||i);return(0,Dr.jsxs)("div",{ref:y,className:(0,Rr.A)("p-rel",{"grow-1":!h&&m}),children:[n&&!i&&(0,Dr.jsxs)("div",{ref:f,className:(0,Rr.A)("px-3 py-2-5 border border-gray-20 border-top-0 border-bottom-radius-8 focus-not-visible",{"p-abs inset-top-start inset-top-end":!h&&!m,"p-abs inset-0 scroll-box border-top-radius-0":!h&&m}),"aria-live":"polite","data-qa":"dtd-upsell-message","data-testid":"dtd-upsell-message",children:[(0,Dr.jsx)("p",{className:"subtitle-4 text-ellipsis",children:d.translate("doubleDonationScreen.nameMatch",{name:a.name,amount:d.formatCurrency(o,{currency:t,display:"floatcents"})})}),(0,Dr.jsx)("p",{className:"body-3 text-ellipsis mt-1",children:d.translate("doubleDonationScreen.message",{withCosts:u?d.translate("doubleDonationScreen.withCosts"):"",amount:d.formatCurrency(r,{currency:t,display:"floatcents"}),doubleAmount:d.formatCurrency(c,{currency:t,display:"floatcents"})})})]}),s&&!i&&(0,Dr.jsxs)("div",{ref:f,className:(0,Rr.A)("px-3 py-2-5 border border-gray-20 border-top-0 border-bottom-radius-8 focus-not-visible",{"p-abs inset-top-start inset-top-end":!h&&!m,"p-abs inset-0 scroll-box border-top-radius-0":!h&&m}),"aria-live":"polite","data-qa":"dtd-employer-matched-message","data-testid":"dtd-employer-matched-message",children:[(0,Dr.jsx)("p",{className:"subtitle-4 text-ellipsis",children:d.translate("doubleDonationScreen.matchedCompanyBlock.name",{name:a.name})}),(0,Dr.jsx)("p",{className:"body-3 text-ellipsis mt-1",children:d.translate("doubleDonationScreen.matchedCompanyBlock.message",{doubleAmount:d.formatCurrency(l,{currency:t,display:"floatcents"})})})]}),i&&(0,Dr.jsxs)("div",{ref:f,className:(0,Rr.A)("px-3 py-2-5 border border-gray-20 border-top-0 border-bottom-radius-8 focus-not-visible",{"p-abs inset-top-start inset-top-end":!h&&!m,"p-abs inset-0 scroll-box border-top-radius-0":!h&&m}),"aria-live":"polite","data-qa":"dtd-is-already-paid-amount-not-matched-message",children:[(0,Dr.jsx)("p",{className:"subtitle-4 text-ellipsis",children:d.translate("doubleDonationScreen.smallDonationAmountExperiment.name",{name:a.name})}),(0,Dr.jsx)("p",{className:"body-3 text-ellipsis mt-1",children:d.translate("doubleDonationScreen.smallDonationAmountExperiment.message")})]})]})},CE=e=>{const{state:t,controller:n}=vc(ve.DOUBLE),i=(0,Qr.t)(),s=(0,Ur.P)(),a=(0,Ia.useCallback)((()=>n.leave()),[n]),o=(0,Ia.useCallback)((()=>n.acceptUpsell()),[n]);return(0,Dr.jsxs)("div",{className:"flow-screen","data-qa":"active-screen-dtd",children:[(0,Dr.jsx)("div",{className:"sr-only",role:"status","aria-live":"polite",children:i.translate("common.screenAriaLabel",{screenTitle:`${i.translate("doubleDonationScreen.title")}`})}),(0,Dr.jsx)(Kl,{title:i.translate("doubleDonationScreen.title")}),(0,Dr.jsx)(Al,{className:(0,Rr.A)("px-body d-flex flex-column",{"pt-6 pb-4":!s,"z-index-4":t.showDTDDescription,"overflow-hidden":!t.showDTDDescription}),children:(0,Dr.jsxs)("div",{className:"fixed-container grow-1 min-h-0 d-flex flex-column",children:[(0,Dr.jsx)(SE,{}),(0,Dr.jsxs)("div",{className:(0,Rr.A)("grow-1 d-flex flex-column",s?"mt-6":"mt-4"),children:[(0,Dr.jsx)(Jf,{showDTDDescription:t.showDTDDescription}),(0,Dr.jsx)(Qf,{isIntegrationEnabled:t.isIntegrationEnabled,companies:t.companies,showEmployerMatchedBlock:t.showEmployerMatchedBlock,showDTDUpsell:t.showDTDUpsell,employer:t.employer,locked:t.locked,autoFocus:!0}),(0,Dr.jsx)(AE,{showDTDUpsell:t.showDTDUpsell,employer:t.employer,minimumMatchedAmount:t.minimumMatchedAmount,currency:t.currency,isFeeCovered:t.isFeeCovered,upsellTotal:t.upsellTotal,DTDUpsellDoubledAmount:t.DTDUpsellDoubledAmount,DTDDoubledAmount:t.DTDDoubledAmount,showEmployerMatchedBlock:t.showEmployerMatchedBlock,isAlreadyPaidAmountNotMatched:t.isAlreadyPaidAmountNotMatched})]})]})}),(0,Dr.jsx)(Ll,{children:(0,Dr.jsx)($f,{buttonType:t.buttonType,processingState:t.processingState,formattedTotal:t.formattedTotal,frequency:t.frequency,locked:t.locked,formattedUpsellTotal:t.formattedUpsellTotal,declineButtonLabel:t.declineButtonLabel,changeAmountButtonLabel:t.changeAmountButtonLabel,noChangeAmountButtonLabel:t.noChangeAmountButtonLabel,showSkipButton:t.showSkipButton,isAlreadyPaidAmountNotMatched:t.isAlreadyPaidAmountNotMatched,onLeave:a,onAcceptUpsell:o,additionalPayErrorMessage:t.additionalPayErrorMessage,payErrorMessage:t.payErrorMessage})})]})},PE=(0,Ia.memo)(CE),NE=()=>{const{stripeElementState:e,setStripeElementState:t}=Ry(),{stripeElementState:n,setStripeElementState:i}=Ry(),{stripeElementState:s,setStripeElementState:a}=Ry(),o=(0,Ia.useCallback)(((e,n)=>{switch(e){case _y.CARD_NUMBER:t(n);break;case _y.CARD_EXPIRY:i(n);break;case _y.CARD_CVC:a(n)}}),[t,a,i]);return{stripeElementsCardState:{[_y.CARD_NUMBER]:e,[_y.CARD_EXPIRY]:n,[_y.CARD_CVC]:s},setStripeElementsCardState:o}},bE=()=>{const e=(0,Qr.t)(),t=Gr();return(0,Dr.jsxs)("div",{className:(0,Rr.A)(t("payment-loader"),"p-abs inset-0 d-flex flex-column items-center justify-center p-8 bg-white"),children:[(0,Dr.jsx)("div",{className:"spinner spinner-primary spinner-xl"}),(0,Dr.jsx)("p",{className:"mt-6 body-1 text-center text-ellipsis max-w-100",children:e.translate("paymentLoader.text")})]})},DE=e=>{let{disabled:t,onClick:n}=e;const i=(0,Qr.t)();return(0,Dr.jsxs)("button",{type:"button",className:"btn btn-black d-flex items-center justify-center",disabled:t,"aria-label":i.translate("paymentMethodScreen.button.donateWithAriaLabel",{paymentMethod:i.translate("paymentMethodScreen.button.applePay.label")}),onClick:n,"data-tracking-element-name":"paymentMethod-applePay","data-qa":"fast-track-apple-pay-button","data-testid":"fast-track-apple-pay-button",children:[(0,Dr.jsx)("span",{className:"text-truncate me-1-5","aria-hidden":!0,children:i.translate("paymentMethodScreen.button.donateWith")}),(0,Dr.jsx)(fd,{width:50,height:26,className:"shrink-0","aria-hidden":!0})]})},TE=(0,Ia.memo)(DE),_E=e=>{const{onClick:t,disabled:n}=e,{state:i}=vc(ve.FAST_TRACK_PAYMENT_OPTIONS),s=(0,Qr.t)(),[a,o]=(0,Ia.useState)(!1),r=(0,wl.D)((e=>o(e))),c=(0,Ia.useCallback)((()=>i.livemode?t():(r.set([!0]),void r.set([!1],3e3))),[t,i.livemode,r]);return(0,Dr.jsx)("button",{type:"button",className:(0,Rr.A)("btn p-rel d-flex items-center justify-center",a?"btn-testmode":"btn-black"),disabled:n,"aria-label":s.translate("paymentMethodScreen.button.donateWithAriaLabel",{paymentMethod:s.translate("paymentMethodScreen.button.googlePay.label")}),onClick:c,"data-tracking-element-name":"paymentMethod-googlePay","data-qa":"fast-track-google-pay-button","data-testid":"fast-track-google-pay-button",children:a?(0,Dr.jsx)("span",{role:"alert",children:s.translate("paymentMethodScreen.googlePay.notAvailableInTestMode.oneLine")}):(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsx)("span",{className:"text-truncate me-1-5","aria-hidden":!0,children:s.translate("paymentMethodScreen.button.donateWith")}),(0,Dr.jsx)(ad,{width:53,height:26,className:"shrink-0","aria-hidden":!0})]})})},kE=(0,Ia.memo)(_E);var OE;!function(e){e.SILVER="silver",e.WHITE="white",e.GOLD="gold"}(OE||(OE={}));const{useAddFieldToScroll:IE,useScrollToFieldsTrigger:xE,ScrollToFieldsProvider:wE}=(0,uu.J)(),RE="paymentMethod-paypal",ME=e=>{let{disabled:t}=e;const{state:n,controller:i}=vc(ve.FAST_TRACK_PAYMENT_OPTIONS),s=(0,Qr.t)(),a=(0,Ia.useRef)(null),[o,r]=(0,Ia.useState)(!1),c=(0,wl.D)((e=>r(e))),l=Tc(),u=xE();(0,Ia.useEffect)((()=>{if(a.current&&n.livemode)return i.initiatePaypal({element:a.current,buttonColor:OE.GOLD,onClick:()=>{a.current&&(u(),l.trackClick(RE,a.current))}}),()=>i.closePaypalButton()}),[i,n.livemode,l,u]);const d=(0,Ia.useCallback)((()=>{n.livemode||(c.set([!0]),c.set([!1],3e3))}),[n.livemode,c]);return(0,Dr.jsxs)("div",{className:(0,Rr.A)("btn p-rel px-1 d-flex items-center justify-center",{"btn-paypal-gold":!o,"btn-testmode":o,disabled:t}),role:n.livemode?void 0:"button",tabIndex:n.livemode?void 0:0,"aria-labelledby":"paypal-button",onClick:d,onKeyPress:d,"data-qa":"fast-track-paypal-button","data-testid":"fast-track-paypal-button",children:[(0,Dr.jsx)("div",{ref:a,id:"paypal-button",className:"p-abs inset-centered min-w-100 line-height-0","data-tracking-element-name":RE}),o?(0,Dr.jsx)("p",{className:"text-truncate",role:"alert",children:s.translate("paymentMethodScreen.paypal.notAvailableInTestMode.oneLine")}):(0,Dr.jsx)(Td,{width:69,height:22,className:"shrink-0","aria-hidden":!0})]})},LE=(0,Ia.memo)(ME),UE={[Hu.APPLE_PAY]:TE,[Hu.GOOGLE_PAY]:kE,[Hu.PAYPAL]:LE},FE=e=>{let{option:t,show:n,locked:i,onClick:s}=e;const a=UE[t],o=(0,Ia.useCallback)((()=>{s(t)}),[s,t]);return(0,Dr.jsx)("div",{className:(0,Rr.A)({"d-none":!n}),children:(0,Dr.jsx)(a,{disabled:i,onClick:o})},t)},jE=e=>{let{availableOptions:t,buttonOptions:n,errorTitle:i,errorMessage:s,locked:a,onChoosePaymentOption:o,onErrorClick:r}=e;const c=(0,Ia.useRef)(null),l=Boolean(i||s),u=(0,Ia.useCallback)((e=>{e.preventDefault(),r()}),[r]);return(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsx)(Mr.A,{nodeRef:c,in:l,timeout:0,classNames:"rtg-fade",mountOnEnter:!0,unmountOnExit:!0,children:(0,Dr.jsx)(Bu,{setRef:c,className:"mb-3",role:l?"alert":"none",children:(0,Dr.jsx)(Fu,{errorTitle:i,errorMessage:s,dataQa:"fast-track-payment-option",dataTrackingElementName:"fast-track-payment-options-screen-back-button",onMessageClick:u})})}),(0,Dr.jsx)("div",{className:"d-flex flex-column gap-y-2",children:t.map((e=>{const{visible:t}=n[e];return(0,Dr.jsx)(FE,{option:e,show:t,locked:a,onClick:o},e)}))})]})},BE=(0,Ia.memo)(jE),GE=["top","bottom"],qE=e=>{let{anonymousChecked:t,locked:n,className:i,dataTestId:s,onToggle:a}=e;const o=(0,Qr.t)(),r=(0,cc.Q)(),c=(0,Ur.P)(),l=(0,jr.wf)();return(0,Dr.jsxs)("div",{className:(0,Rr.A)("d-flex",i),children:[(0,Dr.jsx)(lu,{checked:t,disabled:n,onChange:a,dataQa:"anonymously-checkbox",trackingElement:"anonymousCheckbox",dataTestId:s,children:(0,Dr.jsx)("span",{className:"text-truncate",children:o.translate("privacyScreen.donateAnonymously.label")})}),(0,Dr.jsx)("div",{className:"shrink-0 icon-slot icon-slot-18 ms-2",children:(0,Dr.jsx)(Kc.S,{content:!n&&o.translate("privacyScreen.donateAnonymously.tooltipLabel"),trigger:"click",className:c?"ui-tooltip-mobile":"ui-tooltip-desktop",placement:r?"left-start":"right-start",fallbackPlacements:GE,rootContainer:l,children:(0,Dr.jsx)("button",{type:"button",className:"btn-icon p-abs inset-centered text-gray-60 font-size-18",disabled:n,"aria-label":o.translate("privacyScreen.donateAnonymously.helpAriaLabel"),"data-qa":"anonymous-checkbox-help-button",children:(0,Dr.jsx)(Rd.A,{className:(0,Rr.A)("icon-stroke d-block",{"icon-flip-horizontal":r}),"aria-hidden":!0})})})})]})},HE=(0,Ia.memo)(qE),VE=["top","bottom"],KE=e=>{let{generalConsent:t,locked:n,className:i,dataTestId:s,onToggle:a,onShowConsent:o}=e;const r=(0,Qr.t)(),c=(0,cc.Q)(),l=(0,Ur.P)(),u=(0,jr.wf)(),d=(0,_r.n)(),{checkboxText:h}=d.campaign.config.consentText.general,{additionalInfoText:m}=d.campaign.config.consentText.general;return(0,Ia.useEffect)((()=>{o()}),[o]),(0,Dr.jsxs)("div",{className:(0,Rr.A)("d-flex",i),children:[(0,Dr.jsx)(lu,{checked:t.isAccepted,disabled:n,onChange:a,dataQa:"general-consent-checkbox",trackingElement:"generalConsentCheckbox",dataTestId:s,children:(0,Dr.jsx)("span",{className:"text-truncate",dir:"auto",children:h?(0,Dr.jsx)("span",{dangerouslySetInnerHTML:{__html:h},"data-qa":"general-consent-text"}):r.translate("privacyScreen.generalConsent.label")})}),m&&(0,Dr.jsx)("div",{className:"shrink-0 icon-slot icon-slot-18 ms-2",children:(0,Dr.jsx)(Kc.S,{content:!n&&(0,Dr.jsx)("p",{dangerouslySetInnerHTML:{__html:m},dir:"auto"}),trigger:"click",className:l?"ui-tooltip-mobile":"ui-tooltip-desktop",placement:c?"left-start":"right-start",fallbackPlacements:VE,maxWidth:"260px",maxHeight:"220px",rootContainer:u,"data-qa":"general-consent-checkbox-text-popover",children:(0,Dr.jsx)("button",{type:"button",className:"btn-icon p-abs inset-centered text-gray-60 font-size-18",disabled:n,"aria-label":r.translate("privacyScreen.generalConsent.helpAriaLabel"),"data-qa":"general-consent-checkbox-help-button","data-testid":"general-consent-checkbox-help-button",children:(0,Dr.jsx)(Rd.A,{className:(0,Rr.A)("icon-stroke d-block",{"icon-flip-horizontal":c}),"aria-hidden":!0})})})})]})},YE=(0,Ia.memo)(KE),zE=["top","bottom"],WE=e=>{let{validation:t,onBehalfOf:n,className:i,locked:s,dataTestIdCheckbox:a,dataTestIdInput:o,onToggleOnBehalfOf:r,onChangeCompanyName:c}=e;var l;const u=(0,Qr.t)(),d=(0,cc.Q)(),h=(0,Ur.P)(),m=Yl(),p=(0,jr.wf)(),g=!t.onBehalfOf.isValid,y=t.onBehalfOf.fields.onBehalfOf.errors.required,f=t.onBehalfOf.fields.onBehalfOf.errors.minLength,[E,S]=(0,Ia.useState)(!1),[v,A]=(0,Ia.useState)(!1),C=(0,Ia.useRef)(null);return IE(C,(e=>!e.onBehalfOf.isValid)),(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsxs)("div",{className:(0,Rr.A)("d-flex",i),children:[(0,Dr.jsx)(lu,{checked:n.isActive,disabled:s,dataQa:"behalf-company-button",trackingElement:"showBehalfOfInput",dataTestId:a,onChange:()=>{r(),S(!0)},children:(0,Dr.jsx)("span",{className:"text-truncate",children:u.translate("privacyScreen.donateAsOrganization.label")})}),(0,Dr.jsx)("div",{className:"shrink-0 icon-slot icon-slot-18 ms-2",children:(0,Dr.jsx)(Kc.S,{content:!s&&u.translate("privacyScreen.donateAsOrganization.input.tooltipLabel"),trigger:"click",className:h?"ui-tooltip-mobile":"ui-tooltip-desktop",placement:d?"left-start":"right-start",fallbackPlacements:zE,maxWidth:"220px",rootContainer:p,children:(0,Dr.jsx)("button",{type:"button",className:"btn-icon p-abs inset-centered text-gray-60 font-size-18",disabled:s,"aria-label":u.translate("privacyScreen.donateAsOrganization.input.helpAriaLabel"),"data-qa":"donate-as-organization-help-button",children:(0,Dr.jsx)(Rd.A,{className:(0,Rr.A)("icon-stroke d-block",{"icon-flip-horizontal":d}),"aria-hidden":!0})})})})]}),n.isActive&&(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsx)(yc,{size:8,sizeMin:4}),(0,Dr.jsx)(fu.t,{id:`on-behalf-${m}`,setRef:C,label:u.translate("privacyScreen.donateAsOrganization.input.label"),labelFloating:!0,autoFocus:n.isActive&&E,autoFocusMode:ql.Q.ALL,className:(0,Rr.A)({"pe-10":g}),formLabelClass:(0,Rr.A)({"pe-6":g}),formGroupClass:"shrink-0",placeholder:u.translate("privacyScreen.donateAsOrganization.input.placeholder"),value:null!==(l=n.companyName)&&void 0!==l?l:"",maxLength:Kd.ON_BEHALF_OF_MAX_LENGTH,autoComplete:"organization",disabled:s,error:g,"aria-required":!0,"aria-describedby":`on-behalf-${m}-error`,dataQa:"behalf-company-field",dataTestId:o,onChange:e=>c(e.target.value),onFocus:()=>A(!0),onBlur:()=>A(!1),children:g&&(0,Dr.jsx)(Eu.U,{className:"p-abs inset-centered-end z-index-5 me-4",showTooltip:v,children:(0,Dr.jsxs)("p",{id:`on-behalf-${m}-error`,children:[y&&u.translate("privacyScreen.donateAsOrganization.input.error.required"),!y&&f&&u.translate("privacyScreen.donateAsOrganization.input.error.minLength")]})})})]})]})},$E=(0,Ia.memo)(WE),XE=e=>{var t;const n=(0,Ur.P)(),i=(0,Qr.t)(),s=(0,El.Y)(),a=(0,Ia.useRef)(null);return IE(a,(e=>!e.isAccepted.isValid)),(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsx)(lu,{setRef:a,className:e.className,checked:null!==(t=e.termsAndConditions.isAccepted)&&void 0!==t&&t,error:!e.validation.isAccepted.isValid,disabled:e.locked,"aria-required":!0,"aria-describedby":`terms-checkbox-${s}-error`,onChange:e.onToggle,dataQa:"accept-terms-checkbox",trackingElement:"termsChecked",dataTestId:e.dataTestId,children:(0,Dr.jsx)("span",{className:(0,Rr.A)({"text-line-clamp-2":!n}),dir:"auto","data-qa":"accept-terms-text",children:e.termsAndConditions.text?(0,Dr.jsx)("span",{dangerouslySetInnerHTML:{__html:e.termsAndConditions.text},"data-qa":"accept-terms-link"}):(0,Dr.jsx)(uc,{token:"privacyScreen.terms.label"})})}),e.validation.isAccepted.fields.isAccepted.errors.required&&(0,Dr.jsx)("p",{id:`terms-checkbox-${s}-error`,className:"sr-only",children:i.translate("privacyScreen.terms.error.required")})]})},QE=(0,Ia.memo)(XE),ZE=e=>{let{currency:t,prefixCurrencySymbol:n,postfixCurrencySymbol:i,total:s,isRecurring:a,recurringLabel:o}=e;const r=(0,Qr.t)(),c=(0,Ia.useMemo)((()=>(0,Rm.p)(t,r.locale)),[r.locale,t]);return(0,Dr.jsxs)("div",{className:"d-flex",children:[(0,Dr.jsx)("p",{className:"body-3 text-truncate me-4",children:r.translate("paymentMethodScreen.amountLabel")}),(0,Dr.jsxs)("p",{className:"label-4 shrink-0 max-w-70 text-truncate ms-auto","data-qa":"donation-amount-label",children:[n&&(0,Dr.jsx)("span",{className:"d-inline-block text-sans-serif","aria-hidden":"true",children:n}),(0,Dr.jsx)("span",{className:"d-inline-block text-sans-serif",children:r.formatCurrency(s,{currency:t,display:"trimzeroes",withoutPrefix:!0,withoutSuffix:!0})}),i&&(0,Dr.jsx)("span",{className:"d-inline-block text-sans-serif","aria-hidden":"true",children:i}),(0,Dr.jsx)("span",{className:"d-inline-block text-sans-serif ms-0-5",children:c}),a&&(0,Dr.jsx)("span",{className:"d-inline-block",children:o})]})]})};function JE(e,t){const{document:n}=(0,kr.M)();(0,Ia.useEffect)((()=>{const i=n=>{if(!e.current)return;const i=n.target;i&&!si(i,(t=>t===e.current))&&t(n)};return n.addEventListener("click",i),()=>n.removeEventListener("click",i)}),[n,e,t])}const eS=(e,t)=>{(0,Ia.useEffect)((()=>{const n=null==e?void 0:e.current;if(n)return n.addEventListener("blur",t),()=>{n.removeEventListener("blur",t)}}),[e,t])},tS=["top","top-end","bottom","bottom-end"],nS=e=>{let{includeFees:t,isFeeCovered:n,currency:i,processingFee:s,showIncludeFee:a,locked:o,transitionEntered:r,isPaymentLoader:c,dataQa:l,dataTestId:u,toggleCheckbox:d}=e;const h=(0,Qr.t)(),m=(0,cc.Q)(),p=(0,Ur.P)(),g=t!==D.XN.ONLY_NO,y=t===D.XN.ONLY_YES,f=(0,Ia.useRef)(null),E=(0,Ia.useRef)(null),S=(0,Ia.useRef)(null),v=(0,jr.wf)(),A=[m?"right":"left","top"],C=$r(S),[P,N]=(0,Ia.useState)(!1),{showHelpTooltip:b,helpTooltipRef:T,handleHelpTooltipKeyDown:_,handleHelpTooltipChecked:k}=function(e){const t=(0,Ia.useRef)(null),[n,i]=(0,Ia.useState)(!1),s=()=>{i((e=>!e))},a=()=>{i(!1)};return JE(t,a),eS(e,a),{helpTooltipRef:t,showHelpTooltip:n,handleHelpTooltipChecked:e=>{e.stopPropagation(),s()},handleHelpTooltipKeyDown:e=>{e.code!==Lr.J.ENTER&&e.code!==Lr.J.SPACE||(e.stopPropagation(),e.preventDefault(),s())}}}(E);(0,Ia.useEffect)((()=>{N(!!f.current&&!n&&!b)}),[n,b]);const O=(0,Dr.jsxs)(Dr.Fragment,{children:[y&&h.translate("paymentMethodScreen.transactionCostsInfo"),a&&(0,Dr.jsx)(uc,{className:"fee-tooltip",token:"paymentMethodScreen.transactionCostsTooltipMessage",params:{processingFee:h.formatCurrency(s,{currency:i,display:"floatcents"})}})]});return(0,Dr.jsx)(Dr.Fragment,{children:g&&(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsx)(Kc.S,{content:h.translate("paymentMethodScreen.coverCostsQuestion"),trigger:"manual",manualOpen:r&&!c&&!o&&!p&&P,className:p?"ui-tooltip-mobile":"ui-tooltip-desktop",placement:m?"left":"right",fallbackPlacements:A,maxWidth:"220px",rootContainer:v,"data-qa":"cover-fee-tooltip",children:(0,Dr.jsxs)("div",{className:"d-flex items-center px-4 mx-minus-4","data-qa":l,"data-testid":u,children:[y&&(0,Dr.jsx)("p",{className:"body-3 text-truncate","data-qa":"fee-amount-text",children:h.translate("paymentMethodScreen.transactionCostsIncluded",{amount:h.formatCurrency(s,{currency:i,display:"floatcents"})})}),a&&(0,Dr.jsx)(lu,{innerRef:f,className:"body-3",customLabelClasses:"line-height-20",checked:n,disabled:o,onChange:d,dataQa:"cover-fee-checkbox",trackingElement:"coverFee",children:(0,Dr.jsx)("span",{className:"body-3 text-truncate",children:h.translate("paymentMethodScreen.coverLabel")})}),(0,Dr.jsx)(Kc.S,{ref:T,content:O,trigger:"manual",manualOpen:r&&!o&&b,className:p?"ui-tooltip-mobile":"ui-tooltip-desktop",placement:m?"left":"right",fallbackPlacements:tS,maxWidth:"220px",rootContainer:v,"data-qa":"why-cover-fee-tooltip",children:(0,Dr.jsx)("button",{ref:E,type:"button",className:"btn-icon shrink-0 font-size-18 text-gray-60 ms-2","aria-label":h.translate("paymentMethodScreen.transactionCostsHelpAriaLabel"),disabled:o,onClick:k,onKeyDown:_,"data-qa":"transaction-cost-tip","data-testid":"transaction-cost-tip",children:(0,Dr.jsx)(Rd.A,{className:(0,Rr.A)("icon-stroke d-block",{"icon-flip-horizontal":m}),"aria-hidden":!0})})})]})}),(0,Dr.jsx)(Mr.A,{nodeRef:S,in:p&&a&&!n,mountOnEnter:!0,unmountOnExit:!0,addEndListener:C,classNames:"rtg-fee-accordion-mobile",children:(0,Dr.jsx)("p",{ref:S,className:"body-3 text-ellipsis mt-2",role:"alert","data-qa":"cover-fee-tooltip",children:h.translate("paymentMethodScreen.coverCostsQuestion")})}),(0,Dr.jsx)("hr",{className:"border-gray-15 mt-3 mb-2-5","aria-hidden":!0})]})})};function iS(){const e=_c(),[t,n]=(0,Ia.useState)(!1);return(0,Ia.useEffect)((()=>e.onStateUpdate((()=>{n(e.checkoutUIState.showPaymentLoader)}))),[e]),t}const sS=e=>{let{transitionEntered:t}=e;const{state:n,controller:i}=vc(ve.FAST_TRACK_PAYMENT_OPTIONS),s=(0,Qr.t)(),a=(0,Ur.P)(),o=iS(),r=n.availableOptions,c=(0,Ia.useCallback)((()=>{i.toggleFeeCovered()}),[i]),l=xE(),u=(0,Ia.useCallback)((e=>{i.choosePaymentOption(e),l()}),[i,l]),d=(0,Ia.useCallback)((e=>i.changeCompanyName(e)),[i]),h=(0,Ia.useCallback)((()=>i.toggleOnBehalfOf()),[i]),m=(0,Ia.useCallback)((()=>i.toggleAnonymousChecked()),[i]),p=(0,Ia.useCallback)((e=>i.toggleGeneralConsentChecked(e)),[i]),g=(0,Ia.useCallback)((()=>i.toggleTermsAndConditionsAccepted()),[i]),y=(0,Ia.useCallback)((()=>i.setGeneralConsentShown()),[i]),f=(0,Ia.useCallback)((()=>{i.resetError(),i.goToPrivacyScreen()}),[i]);return(0,Dr.jsxs)("div",{className:"p-rel flow-screen","data-qa":"fast-track-payment-option-screen",children:[(0,Dr.jsx)("div",{className:"sr-only",role:"status","aria-live":"polite",children:s.translate("common.screenAriaLabel",{screenTitle:`${s.translate("fastTrackPaymentOptionsScreen.title")}`})}),(0,Dr.jsx)(Kl,{title:s.translate("fastTrackPaymentOptionsScreen.title"),onBackButtonClick:()=>i.resetError()}),(0,Dr.jsx)(Al,{className:(0,Rr.A)("px-body",{"py-8":!a}),children:(0,Dr.jsxs)("div",{className:"fixed-container",children:[(0,Dr.jsxs)("div",{className:"bg-gray-10 border-radius-16 px-4 py-5",children:[(0,Dr.jsx)(nS,{showIncludeFee:n.showIncludeFee,isFeeCovered:n.isFeeCovered,locked:n.locked,processingFee:n.processingFee,currency:n.currency,toggleCheckbox:c,includeFees:n.includeFees,transitionEntered:t,isPaymentLoader:o,dataQa:"transaction-costs-lpo",dataTestId:"transaction-costs-lpo"}),(0,Dr.jsx)(ZE,{prefixCurrencySymbol:n.prefixCurrencySymbol,postfixCurrencySymbol:n.postfixCurrencySymbol,currency:n.currency,total:n.total,isRecurring:n.isRecurring,recurringLabel:n.recurringLabel})]}),(0,Dr.jsx)(yc,{size:a?16:20}),n.onBehalfOf.isEnabled&&(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsx)(yc,{size:8}),(0,Dr.jsx)($E,{onBehalfOf:n.onBehalfOf,locked:n.locked,validation:n.validation,dataTestIdCheckbox:"privacy-on-behalf-on-checkbox",dataTestIdInput:"privacy-on-behalf-on-input",onToggleOnBehalfOf:h,onChangeCompanyName:d})]}),n.showAnonymous&&(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsx)(yc,{size:8}),(0,Dr.jsx)(HE,{anonymousChecked:n.anonymousChecked,locked:n.locked,dataTestId:"privacy-anonymous-checkbox",onToggle:m})]}),n.generalConsent.isEnabled&&(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsx)(yc,{size:8}),(0,Dr.jsx)(YE,{generalConsent:n.generalConsent,locked:n.locked,dataTestId:"general-consent-checkbox",onToggle:p,onShowConsent:y})]}),n.termsAndConditions.isEnabled&&(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsx)(yc,{size:8}),(0,Dr.jsx)(QE,{termsAndConditions:n.termsAndConditions,locked:n.locked,validation:n.validation,dataTestId:"privacy-terms-checkbox",onToggle:g})]})]})}),(0,Dr.jsx)(Ll,{children:(0,Dr.jsx)(BE,{availableOptions:r,buttonOptions:n.buttonOptions,errorTitle:n.paymentError.title,errorMessage:n.paymentError.message,locked:n.locked,onChoosePaymentOption:u,onErrorClick:f})}),o&&(0,Dr.jsx)(bE,{})]})};var aS;function oS(){return oS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},oS.apply(null,arguments)}var rS=function(e,t){return Ia.createElement("svg",oS({fill:"none",height:36,viewBox:"0 0 102 36",width:102,xmlns:"http://www.w3.org/2000/svg",ref:t},e),aS||(aS=Ia.createElement("path",{d:"m51.768 17.256c2.83-4.4504 1.4109-5.1346 1.2663-5.0523-2.7532 1.5572-4.8499 6.2447-4.6739 7.806.243 2.1494 1.9046-.3916 3.4076-2.7537zm10.7215-4.0841c-.5126.9186-.8436 1.928-.9748 2.9726-.0724.522-.1568 2.7897-.1381 3.0979.0289.5006.0924.9985.1902 1.4902.0673.2455.4869 1.128-.8596 1.3145-.7923.1094-.7768-1.881-.7923-2.2068-.0304-.6942.0842-3.1333.1576-3.4953.0774-.3703-.077.0221-.2228.2645-.3357.564-.7264 1.3271-1.1943 2.0785-.6145.988-1.9851 3.3414-3.8543 3.2013-.6993-.0531-1.4106-.1435-1.8169-2.0999-.1558-.7499-.0954-1.7357-.0794-2.3275-.0195-.1219-.0029-.2617-.1045-.2047-.662 1.5506-2.8121 6.1205-5.2416 5.0932-1.1252-.4744-1.6796-1.9326-.4375-4.7802 1.2101-2.7754 4.2625-6.2172 5.4784-6.4483 1.0837-.2066 1.1964.3414 1.1964.3414.0988-.2022.7744-.1785.9222.1116.1974.388.3292.4552.1974 1.4787-.0746.5903-.6208 4.2824-.5265 5.551.0434.5945.145 2.0594.7469 2.1299 1.0514.1264 2.3256-2.1189 2.4703-2.3535.2832-.4587 2.5518-4.2769 2.8311-4.8344.3005-.6011.4905-1.04.6844-1.4226s.7783-.4251 1.2878-.0762c.5094.3489.2543.8285.0799 1.1244zm-48.0051 1.8703c-1.3339.1442-3.7659 3.3812-4.267 4.5307-.51231 1.1738-.69726 2.3054-.0893 2.7775 1.2581.9807 2.5596-.6817 2.9421-1.0681.2367-.2379 1.8919-2.0504 2.3081-3.8913.2752-1.2155.4026-2.4881-.8939-2.3488zm.6951 14.367c-.092.1652-.1866.3288-.2838.491-.9827 1.6379-2.2719 3.0993-3.8704 4.1527-2.1651 1.4262-4.1985 1.9741-6.47046 1.9467-1.32108-.0153-2.59509-.23-3.681415-.9237-.89044-.5686-1.017386-1.4576-.747703-2.0445.374914-.8176 1.545208-.738 2.043118-.2688 1.24319 1.1703 1.98527 1.6241 3.58363 1.5464 1.31769-.0756 2.60043-.4542 3.74914-1.1067 6.61179-3.8762 6.55139-10.8443 6.81979-15.043.0284-.2553-.1098-.0696-.1565.0694-.3191.8933-.7141 1.7575-1.1806 2.5828-.6777 1.2294-1.6366 2.2796-2.7977 3.0641-.8373.5552-2.1971.8239-3.15466.1973-.34712-.2287-2.37703-1.4216-.65659-4.9754 1.08192-2.2361 3.35855-3.7871 3.87215-4.116 1.2558-.8052 2.1532-1.1881 3.0942-1.1155.4792.035.5483.2244.9046.2149.2028-.239.3147-.4146.6484-.5072.4479-.0718.9798.3049 1.1844 1.0188.2045.7139-.3282 1.8607-.4627 2.4122.0011-.0003.4742 7.1534-2.4369 12.4045zm7.5328-16.1178c-.8104.0153-.7441.6025-.914 1.1162-.1644.5122-1.561 5.1182-1.7384 5.944-.1773.8258-.2989 1.5674-.0425 2.7007.2609 1.1585 1.5837.8199 1.724.6166.6462-.9086.0738-1.1763.053-1.8109-.0166-.6632.1643-1.359.3008-2.257.0486-.3201.146-1.7758.1939-1.9734.0539-.2134.5102-1.8343 1.1675-2.8201.2814-.4226.5291-1.5382-.7443-1.5161zm2.2057-5.38681c-.1108-.22866-.7137-.94895-1.5005-.38979-1.1705.83202.1791 1.98174.3958 2.5458.2167.564 1.3867 1.0366 1.2159-.07625-.0249-.16006.2108-1.41755-.1112-2.07976zm12.9236 5.42541c-.381.0852-1.1413.2392-1.6197.3201-.7243.122-1.1189.5793-1.0916 1.0415.0273.4656.186.6849.8323.5617.5843-.1109 1.083-.6097 1.5944-.6119 0 0-1.056 4.4695-1.1251 5.0684-.069.599-.3814 2.2376.2602 3.1673 1.4273 2.0695 4.2821-.3026 4.5489-.561.196-.191 1.9995-1.7787 2.6109-3.052.3097-.6462-.2176-.7889-.5746-.9208-.357-.1318-1.1112.0961-1.2166.5686-.2296 1.0266-2.7272 3.7958-3.9633 3.2406-1.4568-.6555 1.1712-7.9999 1.1712-7.9999.3134-.1412 1.9007-.5519 3.4034-.9398 1.7337-.4459 7.0324-1.4963 5.8365-3.0855-.5853-.77741-2.098.4065-2.6106.6543-1.8366.8842-6.3321 2.1822-6.3321 2.1822s.5837-2.6403.7726-3.1604c.217-.59528 1.0174-.98477 1.1339-2.04454.1374-1.23265-1.3416-1.79394-2.0476-.44437-.146.27699-.3472 1.04148-.367 1.06054-.1896.18293-1.8222.83736-3.4274 1.60566-.5059.24211-3.3795 1.29101-3.3848 1.28421.0039-.022.8725-2.78682 1.879-5.09342.6696-1.53371 1.613-3.66866 3.2844-4.10205 1.5653-.40504.8273 1.23173 1.5316 1.65719.8933.53934 1.4413-.14085 1.5781-.79132.1073-.50946.0789-3.18283-2.6284-2.9156001-2.5762.2550351-4.629 4.2029701-7.1673 11.5801001-.0273.0295-2.0434 1.3369-3.7148 1.6729-.8265.1658-1.1922.2376-1.3015.5335-.0902.2374-.1095.496-.0556.7442.0539.2483.1788.4753.3593.6534.4763.5707 4.198-1.9023 4.194-1.8852-.0759.1007-3.1294 11.7808-3.1539 11.9171-.1759.9727-1.1604 3.5375-1.1071 4.7017.0295.599.2633 1.8456 1.1223 1.79 1.7988.1185 1.4519-2.4185 1.331-2.8837-.2519-.9624 1.0403-7.3241 2.2-12.0124.2364-.9563.7222-2.5254.8067-2.8986.0487-.2687.1595-.5223.3235-.7403.1641-.218.3768-.3943.621-.5147 0 0 6.4662-3.05997 6.5263-3.04229.0005.00671-1.0325 3.69459-1.0325 3.69459zm44.3013 5.8385c1.252 1.1886 2.4972.4351 3.1381-.0832 1.9657-1.5869 6.0185-8.8192 6.0185-8.8192.0231.242-1.6887 8.5367.5998 9.4564 1.4675.5884 4.8829-2.337 5.274-2.6078 2.2551-1.5627.8733-2.1342.4383-2.1342-1.1629-.0037-.9535.8416-1.2716 1.2212-.5246.6271-2.6332 2.8049-3.6656 2.2267-.556-.3128-.4188-2.1555-.3634-2.5802.3249-4.3903.4117-5.183.6665-6.19282.1427-.56129.8239-.5465 1.241-.62333 5.6306-1.04438 6.6405-.62318 7.3425-.96679.557-.27515.657-1.45962-.133-1.71435-.362-.11418-.82.16219-1.6491.47256-.8247.30595-4.9793 1.22823-5.5903 1.31923-.5628.08171-.6833.00214-.82-.17485-.1345-.17515.1245-2.23525.9316-3.9429.3512-.73904.3605-1.87-.7863-1.9575-.4716-.034-.8722.10076-1.0514.50427-.1784.40093-.522 4.05953-.6023 4.30313-.0813.24055-.5163.42836-.6124.84589-.0962.41754-.0292.67807-.3091.77197-.2829.0965-1.0576.17119-1.3763.24817-.3354.08202-.5344.72609-.5467 1.0985-.0123.37242.5862.15107.8748.10884.3295-.04817 1.1352-.45229.5619.24058-.2173.2648-4.1258 6.3984-5.6521 7.6614-1.7563 1.4514-1.6307-1.4025-1.5869-1.8886.2655-2.9104 1.5337-4.8629 1.7159-5.3263.1792-.4657.2547-1.84563-1.2425-1.54075-.1745.04422-.3349.13231-.4661.25598s-.2288.27885-.2838.45089c-.0025.00999-.0039.0202-.0044.03049-.1505 1.36019-2.7506 7.47449-.7896 9.33709zm2.2821-14.24048c.4614.90306 1.2496.58369 1.3838.35061.1347-.23125.2422-.27927.6244-.43385.7017-.28141-.5099-1.54576-1.6624-1.18904-.0741.03234-.1379.08452-.1844.15082s-.074.14418-.0794.2251c.0313.26464-.239.59437-.082.89681zm-14.1346 7.09688s.7563-.6542 1.0766-.6373c.1486.0073-.1106.4206.4091.6759.276.1372-.3019 1.9828-1.4444 3.7543-2.6238 4.0675-3.8678 3.8839-3.9757 2.6486-.2219-2.5774 3.1735-5.9166 3.9344-6.4415zm1.332 3.3348s-.0097.8764.0583 1.6257c.0607.6726.2897 2.0799.5257 2.5351.3657.7012 1.141.7012 1.7381.3576.7815-.4508.4119-1.2939.1143-1.5745-.2598-.2472-.8912-.5641-1.0824-1.6228-.1125-.6267-.0205-3.4508.1645-4.4388.1915-.9067.4776-1.7907.8535-2.63723.3113-.61662 2.1866-4.14733 2.2141-5.33256.0114-.51723-.5193-.94605-1.3865-.85642-.8672.08964-1.083.78676-1.0845 1.24378-.0021.45442-.9204 3.65448-.9679 3.80006-.0759.2186-.2264 1.52884-.6744 1.53173-.9977-.01753-1.9712.30954-2.7574.92654-.4321.3287-1.8994 1.4746-2.7465 2.6702-.3843.5411-2.1316 2.7961-1.9341 5.4879.18 2.4476 1.8859 2.0145 2.3753 1.936 2.2262-.359 3.7915-4.035 4.0182-4.4858.401-.8001.2654-.5849.5715-1.1665zm-8.7702-8.94233c-.1631.20122-.1224.8398.2328 1.16999.2674.24894.3048.29482.3134.49604.0152.37105.2512.39163.6146.38644.4444-.0064.8078-.31601.8527-.94605.045-.63004-.563-1.16892-1.0524-1.29027-.4894-.12134-.7495-.07942-.9611.18385z",fill:"#000"})))},cS=(0,Ia.forwardRef)(rS),lS=(0,Ia.memo)(cS);const uS=()=>{const{state:e}=vc(ve.GIFT_AID),t=(0,Ur.P)(),n=(0,Ia.useRef)(null),i=qy(n);return(0,Dr.jsx)("div",{className:"p-rel grow-1","data-qa":"legal-text",children:(0,Dr.jsx)("div",{ref:n,className:(0,Rr.A)({"border-top border-gray-20":!i||t,"p-abs inset-0":!t,"scroll-box":i,"pointer-events-none":e.locked}),children:(0,Dr.jsx)("p",{className:(0,Rr.A)("body-4 text-gray-80 text-ellipsis",i?"px-3 py-2-5":"pt-4-5"),dangerouslySetInnerHTML:{__html:e.legalText}})})})},dS=(0,Ia.memo)(uS),hS={boxShadow:"inset 0 0 0 1px #c7cdd6"},mS={boxShadow:"inset 0 -1px 0 0 #c7cdd6"},pS=e=>{let{className:t,email:n,name:i}=e;const s=(0,Qr.t)();return(0,Dr.jsxs)("div",{className:t,children:[(0,Dr.jsx)("p",{className:"text-center text-truncate",children:s.translate("idealConfirmationScreen.description")}),(0,Dr.jsxs)("div",{className:"bg-white border-radius-8 mt-5",style:hS,children:[(0,Dr.jsxs)("div",{className:"px-3 py-2",style:mS,children:[(0,Dr.jsx)("p",{className:"caption-1 text-truncate text-gray-60",children:s.translate("idealConfirmationScreen.email")}),(0,Dr.jsx)("p",{className:"label-3 text-truncate",children:n})]}),(0,Dr.jsxs)("div",{className:"px-3 py-2",children:[(0,Dr.jsx)("p",{className:"caption-1 text-truncate text-gray-60",children:s.translate("idealConfirmationScreen.name")}),(0,Dr.jsx)("p",{className:"label-3 text-truncate",children:i})]})]})]})},gS=(0,Ia.memo)(pS);var yS;function fS(){return fS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},fS.apply(null,arguments)}var ES,SS,vS,AS,CS,PS,NS=function(e,t){return Ia.createElement("svg",fS({fill:"none",height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",ref:t},e),yS||(yS=Ia.createElement("g",{stroke:"currentColor",strokeWidth:1.4},Ia.createElement("g",{strokeLinecap:"round"},Ia.createElement("path",{d:"m12 12v5"}),Ia.createElement("path",{d:"m7 12v5"}),Ia.createElement("path",{d:"m17 12v5"})),Ia.createElement("path",{d:"m12 4-8 5h16z",strokeLinejoin:"round"}),Ia.createElement("path",{d:"m5 20h14",strokeLinecap:"round"}))))},bS=(0,Ia.forwardRef)(NS),DS=(0,Ia.memo)(bS);function TS(){return TS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},TS.apply(null,arguments)}var _S=function(e,t){return Ia.createElement("svg",TS({fill:"none",height:28,viewBox:"0 0 28 28",width:28,xmlns:"http://www.w3.org/2000/svg",ref:t},e),ES||(ES=Ia.createElement("path",{d:"m0 2.99597v21.02063c0 1.0062.82326 1.8294 1.82947 1.8294h12.55933c9.4949 0 13.6112-5.3146 13.6112-12.3672 0-7.01599-4.1163-12.3123-13.6112-12.3123h-12.55933c-1.00621 0-1.82947.82326-1.82947 1.82947z",fill:"#fff"})),SS||(SS=Ia.createElement("path",{d:"m8.40625 6.32564v15.53216h6.75985c6.1379 0 8.7998-3.4668 8.7998-8.3698 0-4.69257-2.6619-8.33321-8.7998-8.33321h-5.58899c-.64946 0-1.17086.53054-1.17086 1.17085z",fill:"#c06"})),vS||(vS=Ia.createElement("path",{d:"m14.3891 24.1721h-10.92187c-.96962 0-1.75629-.7867-1.75629-1.7563v-17.8099c0-.96962.78667-1.75629 1.75629-1.75629h10.92187c10.364 0 11.9099 6.66841 11.9099 10.63839 0 6.8879-4.2352 10.6841-11.9099 10.6841zm-10.92187-20.73706c-.64946 0-1.17086.5214-1.17086 1.17086v17.8099c0 .6494.5214 1.1708 1.17086 1.1708h10.92187c7.2996 0 11.3244-3.5857 11.3244-10.0986 0-8.74489-7.0983-10.05296-11.3244-10.05296z",fill:"#000"})),AS||(AS=Ia.createElement("g",{fill:"#fff"},Ia.createElement("path",{d:"m10.7856 11.3934c.2378 0 .4574.0366.6678.1098s.3842.1921.5397.3384c.1463.1555.2652.3476.3567.5672.0823.2287.1281.4939.1281.8049 0 .2745-.0366.5214-.1006.7501-.0732.2287-.1738.43-.3111.5946-.1372.1647-.311.2927-.5214.3933-.2103.0915-.4573.1464-.7409.1464h-1.60078v-3.7138h1.58248zm-.0549 3.0278c.1189 0 .2287-.0183.3476-.0549.1098-.0366.2104-.1006.2927-.1921.0824-.0915.1555-.2012.2104-.3476.0549-.1463.0824-.311.0824-.5214 0-.1829-.0183-.3567-.0549-.5031-.0366-.1463-.1006-.2836-.183-.3842-.0823-.1006-.1921-.1921-.3293-.247-.1372-.0548-.3018-.0823-.5031-.0823h-.5854v2.3417h.7226z"}),Ia.createElement("path",{d:"m15.7795 11.3934v.6861h-1.9576v.7958h1.8021v.6312h-1.8021v.9055h2.0033v.6861h-2.8174v-3.7138h2.7717z"}),Ia.createElement("path",{d:"m18.5784 11.3936 1.3904 3.7138h-.8507l-.2836-.8233h-1.3904l-.2927.8233h-.8233l1.3996-3.7138zm.0457 2.2776-.4665-1.3629h-.0092l-.4848 1.3629z"}),Ia.createElement("path",{d:"m21.2965 11.3936v3.0277h1.8112v.6861h-2.6253v-3.7138z"}))),CS||(CS=Ia.createElement("path",{d:"m5.35118 14.9607c.94471 0 1.71055-.7659 1.71055-1.7106s-.76584-1.7105-1.71055-1.7105-1.71056.7658-1.71056 1.7105.76585 1.7106 1.71056 1.7106z",fill:"#000"})),PS||(PS=Ia.createElement("path",{d:"m6.64143 21.8579c-1.43613 0-2.5887-1.1617-2.5887-2.5887v-2.0215c0-.7135.57629-1.299 1.29893-1.299.71349 0 1.29892.5763 1.29892 1.299v4.6102z",fill:"#000"})))},kS=(0,Ia.forwardRef)(_S),OS=(0,Ia.memo)(kS);const IS=e=>{let{className:t}=e;const n=(0,Qr.t)();return(0,Dr.jsxs)("div",{className:t,children:[(0,Dr.jsxs)("div",{className:"d-flex items-center justify-center","aria-hidden":!0,children:[(0,Dr.jsx)("div",{className:"ideal-img-logo",children:(0,Dr.jsx)(OS,{className:"icon d-block"})}),(0,Dr.jsx)("div",{className:"ideal-img-bank",children:(0,Dr.jsx)(DS,{className:"icon-stroke d-block"})})]}),(0,Dr.jsx)("p",{className:"text-center mt-8",children:n.translate("idealConfirmationScreen.returnInfoLabel")})]})},xS=(0,Ia.memo)(IS),wS=e=>{let{className:t,locked:n}=e;const i=(0,Ur.P)();return(0,Dr.jsx)("div",{className:(0,Rr.A)("p-rel",t),children:(0,Dr.jsx)("div",{className:(0,Rr.A)({"p-abs inset-0 scroll-box":!i}),children:(0,Dr.jsx)(uc,{className:(0,Rr.A)("body-4 text-gray-80 text-ellipsis",{"px-3 py-2-5":!i,"pointer-events-none":n}),as:"p",token:"idealConfirmationScreen.legalInformation"})})})},RS=(0,Ia.memo)(wS);var MS;!function(e){e.VISA="visa",e.MASTERCARD="mastercard",e.AMEX="amex",e.DISCOVER="discover",e.DINERS="diners",e.JCB="jcb",e.UNIONPAY="unionpay",e.UNKNOWN="unknown",e.UNKNOWN_ERROR="unknown-error"}(MS||(MS={}));const LS={visa:MS.VISA,mastercard:MS.MASTERCARD,amex:MS.AMEX,discover:MS.DISCOVER,diners:MS.DINERS,jcb:MS.JCB,unionpay:MS.UNIONPAY,unknown:MS.UNKNOWN};var US,FS;function jS(){return jS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},jS.apply(null,arguments)}var BS=function(e,t){return Ia.createElement("svg",jS({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.4,strokeLinecap:"round",strokeLinejoin:"round",ref:t},e),US||(US=Ia.createElement("rect",{x:9,y:9,width:13,height:13,rx:2,ry:2})),FS||(FS=Ia.createElement("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})))},GS=(0,Ia.forwardRef)(BS),qS=(0,Ia.memo)(GS);const HS=e=>{let{isBottomPlacement:t,locked:n}=e;const i=(0,Qr.t)(),s=(0,Ur.P)(),a=(0,Ia.useRef)(null),o=(0,kr.M)();return(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsx)("div",{className:"ui-tooltip-stripes-top"}),(0,Dr.jsx)("p",{className:"text-gray-80 mt-1",children:i.translate("creditCard.testModeTooltip.instructions")}),(0,Dr.jsxs)("div",{className:"d-flex items-center mt-1",children:[(0,Dr.jsxs)("p",{ref:a,className:"label-4 text-sans-serif text-select-all","data-qa":"testmode-tooltip-card-number",children:["4242",(0,Dr.jsx)("span",{className:"text-transparent",children:"."}),"4242",(0,Dr.jsx)("span",{className:"text-transparent",children:"."}),"4242",(0,Dr.jsx)("span",{className:"text-transparent",children:"."}),"4242"]}),!s&&(0,Dr.jsx)("button",{type:"button",className:"btn-icon text-gray-40 ms-1-5",disabled:n,"aria-label":i.translate("creditCard.testModeTooltip.copyAriaLabel"),"data-qa":"testmode-tooltip-copy-button",onClick:()=>{var e;if(!a.current)throw new Error("Number ref is not defined");null===(e=o.getSelection())||void 0===e||e.selectAllChildren(a.current);try{o.document.execCommand("copy"),setTimeout((()=>{var e;null===(e=o.getSelection())||void 0===e||e.removeAllRanges()}),2e3)}catch(e){}},children:(0,Dr.jsx)(qS,{className:"icon-stroke icon-stroke-2 d-block","aria-hidden":!0})})]}),(0,Dr.jsxs)("div",{className:"d-flex flex-wrap items-center gap-x-4 gap-y-1 mt-0-5",children:[(0,Dr.jsxs)("p",{children:[(0,Dr.jsx)("span",{className:"text-gray-80 me-1",children:i.translate("creditCard.testModeTooltip.expireDate")}),(0,Dr.jsxs)("b",{className:"label-4 text-sans-serif text-select-all","data-qa":"testmode-tooltip-expire",children:["04/",((new Date).getFullYear()+2).toString().slice(-2)]})]}),(0,Dr.jsxs)("p",{children:[(0,Dr.jsx)("span",{className:"text-gray-80 me-1",children:i.translate("creditCard.testModeTooltip.cvc")}),(0,Dr.jsx)("b",{className:"label-4 text-sans-serif text-select-all","data-qa":"testmode-tooltip-cvc",children:"000"})]})]})]})},VS=(0,Ia.memo)(HS),{ScrollToFieldsProvider:KS,useAddFieldToScroll:YS,useScrollToFieldsTrigger:zS,useFakeStripeElement:WS}=(0,uu.J)(),$S=["top","bottom"],XS=e=>{const{isReady:t,locked:i,stripeElementsCardState:s,setStripeElementsCardState:a}=e,{state:o,controller:r}=vc(ve.PAYMENT_OPTIONS),l=(0,Qr.t)(),u=(0,cc.Q)(),d=Yl(),h=(0,Ur.P)(),m=(0,Iy.j)(),p=(0,zr.$)(),g=(0,xy.l)(Oy.bG.SAFARI,18),[y,f]=(0,Ia.useState)(),E=Cu(o.shakeKey,0!==o.shakeKey),S=(0,Ia.useRef)(null),v=(0,Ia.useRef)(null),A=(0,Ia.useRef)(null),C=(0,jr.wf)(),P=[u?"right":"left","top-end"],[N,b]=(0,Ia.useState)(!1),[D,T]=(0,Ia.useState)(MS.UNKNOWN),_=(0,Ia.useRef)(!1),k=(0,kr.M)(),O=WS({scrollIntoView:e=>{var t;return null===(t=S.current)||void 0===t?void 0:t.scrollIntoView(e)},focus:()=>{var e;return null===(e=null==y?void 0:y.getElement(_y.CARD_NUMBER))||void 0===e?void 0:e.focus()}}),I=WS({scrollIntoView:e=>{var t;return null===(t=v.current)||void 0===t?void 0:t.scrollIntoView(e)},focus:()=>{var e;return null===(e=null==y?void 0:y.getElement(_y.CARD_EXPIRY))||void 0===e?void 0:e.focus()}}),x=WS({scrollIntoView:e=>{var t;return null===(t=A.current)||void 0===t?void 0:t.scrollIntoView(e)},focus:()=>{var e;return null===(e=null==y?void 0:y.getElement(_y.CARD_CVC))||void 0===e?void 0:e.focus()}});return YS(O,(e=>Boolean(e.cardNumber.error)||e.cardNumber.isEmpty)),YS(I,(e=>Boolean(e.cardExpiry.error)||e.cardExpiry.isEmpty)),YS(x,(e=>Boolean(e.cardCvc.error)||e.cardCvc.isEmpty)),(0,Ia.useEffect)((()=>{(0,c.sH)(void 0,void 0,void 0,(function*(){if(p)return;if(!S.current||!v.current||!A.current)throw new Error("Card containers are not provided");const{stripeElements:e}=yield r.initiateCreditCard({source:ky.PAYMENT_OPTIONS,onCardElementReady:e=>{a(e,(e=>Object.assign(Object.assign({},e),{isReady:!0})))},cardCvcContainer:A.current,cardExpiryContainer:v.current,cardNumberContainer:S.current,cardNumberOptions:{placeholder:"1234 1234 1234 1234",showIcon:!1},cardCvcOptions:{placeholder:"123"},stripeElementStyleOverride:Object.assign(Object.assign({},so),{base:Object.assign(Object.assign({},so.base),{"::placeholder":{color:"transparent"}}),invalid:Object.assign(Object.assign({},so.invalid),{color:"#222832",":focus":{color:"#222832"},"::placeholder":{color:"transparent"}})})});f(e)}))}),[r,p,a]),(0,Ia.useEffect)((()=>{const e=null==y?void 0:y.getElement(_y.CARD_NUMBER),t=null==y?void 0:y.getElement(_y.CARD_EXPIRY),n=null==y?void 0:y.getElement(_y.CARD_CVC);e&&t&&n&&(e.update({disabled:i}),t.update({disabled:i}),n.update({disabled:i}))}),[i,y]),(0,Ia.useEffect)((()=>{if(!s.cardNumber.isReady||!y||!t)return;const e=y.getElement(_y.CARD_NUMBER),n=y.getElement(_y.CARD_EXPIRY),i=y.getElement(_y.CARD_CVC);if(!e||!n||!i){if(p)return;throw new Error("Card elements are not initialized")}const o={[_y.CARD_NUMBER]:!1,[_y.CARD_EXPIRY]:!1,[_y.CARD_CVC]:!1},c={[_y.CARD_NUMBER]:e,[_y.CARD_EXPIRY]:n,[_y.CARD_CVC]:i};function l(e){if(r.changeCardFilledFields(e.elementType,e.complete),e.elementType===_y.CARD_NUMBER&&(e.error?T(MS.UNKNOWN_ERROR):T(LS[e.brand]||MS.UNKNOWN)),a(e.elementType,(t=>{var n;return Object.assign(Object.assign({},t),{isEmpty:e.empty,error:(null===(n=e.error)||void 0===n?void 0:n.message)||null})})),!e.complete)return void(o[e.elementType]=!1);o[e.elementType]=!0;const[t]=Object.entries(o).find((e=>{let[,t]=e;return!t}))||[];t&&c[t].focus()}const u=e=>{b(!0),_.current?k.document.dispatchEvent(new Event("stripeElementEvent")):_.current=!0};return e.on("focus",u),n.on("focus",u),i.on("focus",u),m||g||_.current||e.focus(),e.on("change",l),n.on("change",l),i.on("change",l),()=>{e.off("change",l),n.off("change",l),i.off("change",l),e.off("focus",u),n.off("focus",u),i.off("focus",u)}}),[r,k.document,p,a,y,s.cardNumber.isReady,t,m,g]),(0,Dr.jsx)(Kc.S,{content:(0,Dr.jsx)(VS,{locked:o.locked}),trigger:"manual",manualOpen:t&&!i&&!o.locked&&o.showTestModeTooltipInfo,className:h?"ui-tooltip-mobile":"ui-tooltip-desktop",placement:u?"left":"right",fallbackPlacements:P,maxWidth:"220px",rootContainer:C,children:(0,Dr.jsxs)("div",{className:(0,Rr.A)("group-stacked-vertical group-shadow",{shake:E}),"data-qa":"payment-information-block",role:"group","aria-label":l.translate("creditCard.ariaLabel"),children:[(0,Dr.jsxs)(Fd.s,{htmlFor:`card-number-${d}`,label:l.translate("creditCard.numberInput.label"),labelFloating:!0,formGroupClass:(0,Rr.A)("group-stacked-item",{"pointer-events-none":o.locked||i}),formLabelClass:(0,Rr.A)({"has-value":!s[_y.CARD_NUMBER].isEmpty,"has-error":null!==s[_y.CARD_NUMBER].error}),dataQa:"card-number-label",children:[(0,Dr.jsx)("div",{ref:S,id:`card-number-${d}`,className:"StripeElement has-label-floating"}),(0,Dr.jsxs)("div",{className:"p-abs inset-centered-end d-flex items-center z-index-5 me-2-5",children:[s[_y.CARD_NUMBER].error&&(0,Dr.jsxs)(Dr.Fragment,{children:[t&&(0,Dr.jsx)(Eu.U,{className:"shrink-0 me-2",children:s[_y.CARD_NUMBER].error}),(0,Dr.jsx)("p",{role:"alert",className:"sr-only",children:s[_y.CARD_NUMBER].error})]}),(0,Dr.jsx)("img",{className:"shrink-0 pointer-events-none",src:n(534)(`./card-${D}.png`),width:30,height:20,alt:D,"aria-hidden":!0})]})]}),(0,Dr.jsxs)("div",{className:"group-stacked-item group-stacked-horizontal",children:[(0,Dr.jsxs)(Fd.s,{htmlFor:`expiration-${d}`,label:l.translate("creditCard.expirationDate.label"),labelFloating:!0,formGroupClass:(0,Rr.A)("group-stacked-item",{"pointer-events-none":o.locked||i}),formLabelClass:(0,Rr.A)({"has-value":!s[_y.CARD_EXPIRY].isEmpty,"has-error pe-6":null!==s[_y.CARD_EXPIRY].error}),dataQa:"expiration-label",children:[(0,Dr.jsx)("div",{ref:v,id:`expiration-${d}`,className:"StripeElement has-label-floating"}),s[_y.CARD_EXPIRY].error&&(0,Dr.jsxs)(Dr.Fragment,{children:[t&&(0,Dr.jsx)(Eu.U,{className:"p-abs inset-centered-end z-index-5 me-4",children:s[_y.CARD_EXPIRY].error}),(0,Dr.jsx)("p",{role:"alert",className:"sr-only",children:s[_y.CARD_EXPIRY].error})]})]}),(0,Dr.jsxs)(Fd.s,{htmlFor:`cvc-${d}`,label:l.translate("creditCard.cvcCode.label"),labelFloating:!0,formGroupClass:(0,Rr.A)("group-stacked-item",{"pointer-events-none":o.locked||i}),formLabelClass:(0,Rr.A)({"has-value":!s[_y.CARD_CVC].isEmpty,"has-error pe-12":null!==s[_y.CARD_CVC].error}),dataQa:"cvc-label",children:[(0,Dr.jsx)("div",{ref:A,id:`cvc-${d}`,className:"StripeElement has-label-floating"}),(0,Dr.jsxs)("div",{className:"p-abs inset-centered-end d-flex items-center z-index-5 me-4","data-qa":"cvc-wrapper",children:[s[_y.CARD_CVC].error&&(0,Dr.jsxs)(Dr.Fragment,{children:[t&&(0,Dr.jsx)(Eu.U,{className:"shrink-0 me-2",children:s[_y.CARD_CVC].error}),(0,Dr.jsx)("p",{role:"alert",className:"sr-only",children:s[_y.CARD_CVC].error})]}),(0,Dr.jsx)(Kc.S,{content:!o.locked&&!i&&t&&!N&&l.translate("creditCard.cvcCode.tooltipLabel"),trigger:"click",className:h?"ui-tooltip-mobile":"ui-tooltip-desktop",placement:u?"left-start":"right-start",fallbackPlacements:$S,rootContainer:C,children:(0,Dr.jsx)("button",{type:"button",className:"btn-icon font-size-18 text-gray-60",disabled:o.locked||i,"aria-label":l.translate("creditCard.cvcCode.helpAriaLabel"),"data-qa":"cvc-help-button",onClick:()=>b(!1),children:(0,Dr.jsx)(Rd.A,{className:(0,Rr.A)("icon-stroke d-block",{"icon-flip-horizontal":u}),"aria-hidden":!0})})})]})]})]})]})})},QS=(0,Ia.memo)(XS);function ZS(e){switch(e){case Hu.CARD:case Hu.APPLE_PAY:case Hu.GOOGLE_PAY:case Hu.SEPA:case Hu.PAYPAL:case Hu.AU_BECS:case Hu.UK_BACS:case Hu.VENMO:case Hu.ACSS:case Hu.IDEAL:return e;case Hu.US_BANK_ACCOUNT:case Hu.US_BANK_ACCOUNT_INSTANT:case Hu.US_BANK_ACCOUNT_VERIFICATION:return Hu.US_BANK_ACCOUNT;default:throw new le.HP(e)}}var JS,ev,tv,nv,iv;function sv(){return sv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},sv.apply(null,arguments)}var av,ov,rv,cv,lv,uv=function(e,t){return Ia.createElement("svg",sv({width:24,height:24,viewBox:"0 0 24 24",fill:"none",strokeWidth:1.4,xmlns:"http://www.w3.org/2000/svg",ref:t},e),JS||(JS=Ia.createElement("path",{d:"M12 11.5V17.5",stroke:"#2F2F39",strokeLinecap:"round"})),ev||(ev=Ia.createElement("path",{d:"M7 11.5V17.5",stroke:"#2F2F39",strokeLinecap:"round"})),tv||(tv=Ia.createElement("path",{d:"M17 11.5V17.5",stroke:"#2F2F39",strokeLinecap:"round"})),nv||(nv=Ia.createElement("path",{d:"M12 2L4 7.5H20L12 2Z",stroke:"#2F2F39",strokeLinejoin:"round"})),iv||(iv=Ia.createElement("path",{d:"M4 21H20",stroke:"#2F2F39",strokeLinecap:"round"})))},dv=(0,Ia.forwardRef)(uv),hv=(0,Ia.memo)(dv);function mv(){return mv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},mv.apply(null,arguments)}var pv,gv,yv=function(e,t){return Ia.createElement("svg",mv({width:24,height:24,viewBox:"0 0 24 24",fill:"none",strokeWidth:1.4,xmlns:"http://www.w3.org/2000/svg",ref:t},e),av||(av=Ia.createElement("path",{d:"M12 11.5V17.5",stroke:"#2F2F39",strokeLinecap:"round"})),ov||(ov=Ia.createElement("path",{d:"M7 11.5V17.5",stroke:"#2F2F39",strokeLinecap:"round"})),rv||(rv=Ia.createElement("path",{d:"M17 11.5V17.5",stroke:"#2F2F39",strokeLinecap:"round"})),cv||(cv=Ia.createElement("path",{d:"M12 2L4 7.5H20L12 2Z",stroke:"#2F2F39",strokeLinejoin:"round"})),lv||(lv=Ia.createElement("path",{d:"M4 21H20",stroke:"#2F2F39",strokeLinecap:"round"})))},fv=(0,Ia.forwardRef)(yv),Ev=(0,Ia.memo)(fv);function Sv(){return Sv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Sv.apply(null,arguments)}var vv,Av,Cv,Pv,Nv,bv=function(e,t){return Ia.createElement("svg",Sv({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),pv||(pv=Ia.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.1001 18.16C19.6901 17.26 19.9101 16.8 20.3601 15.79C17.0401 14.53 16.5101 9.8 19.7901 7.99C18.7901 6.73 17.3801 6 16.0501 6C15.0901 6 14.4301 6.25 13.8401 6.48C13.3401 6.67 12.8901 6.84 12.3301 6.84C11.7301 6.84 11.2001 6.65 10.6401 6.45C10.0301 6.23 9.39007 6 8.59007 6C7.10007 6 5.51007 6.91 4.50007 8.47C3.08007 10.67 3.33007 14.79 5.62007 18.31C6.44007 19.57 7.54007 20.98 8.97007 21C9.57007 21.01 9.96007 20.83 10.3901 20.64C10.8801 20.42 11.4101 20.18 12.3401 20.18C13.2701 20.17 13.7901 20.42 14.2801 20.64C14.7001 20.83 15.0801 21.01 15.6701 21C17.1201 20.98 18.2801 19.42 19.1001 18.16Z",fill:"black"})),gv||(gv=Ia.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.8399 1C15.9999 2.1 15.5499 3.19 14.9599 3.95C14.3299 4.77 13.2299 5.41 12.1699 5.37C11.9799 4.31 12.4699 3.22 13.0699 2.49C13.7399 1.69 14.8699 1.07 15.8399 1Z",fill:"black"})))},Dv=(0,Ia.forwardRef)(bv),Tv=(0,Ia.memo)(Dv);function _v(){return _v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_v.apply(null,arguments)}var kv,Ov,Iv,xv,wv=function(e,t){return Ia.createElement("svg",_v({width:24,height:24,viewBox:"0 0 24 24",fill:"none",strokeWidth:1.4,xmlns:"http://www.w3.org/2000/svg",ref:t},e),vv||(vv=Ia.createElement("path",{d:"M12 11.5V17.5",stroke:"#2F2F39",strokeLinecap:"round"})),Av||(Av=Ia.createElement("path",{d:"M7 11.5V17.5",stroke:"#2F2F39",strokeLinecap:"round"})),Cv||(Cv=Ia.createElement("path",{d:"M17 11.5V17.5",stroke:"#2F2F39",strokeLinecap:"round"})),Pv||(Pv=Ia.createElement("path",{d:"M12 2L4 7.5H20L12 2Z",stroke:"#2F2F39",strokeLinejoin:"round"})),Nv||(Nv=Ia.createElement("path",{d:"M4 21H20",stroke:"#2F2F39",strokeLinecap:"round"})))},Rv=(0,Ia.forwardRef)(wv),Mv=(0,Ia.memo)(Rv);function Lv(){return Lv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Lv.apply(null,arguments)}var Uv,Fv,jv,Bv,Gv,qv,Hv,Vv,Kv,Yv=function(e,t){return Ia.createElement("svg",Lv({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),kv||(kv=Ia.createElement("path",{d:"M21 12.2069C21 11.6015 20.9464 11.0268 20.8544 10.4674H12.1953V13.9234H17.1532C16.931 15.0575 16.2797 16.0154 15.3141 16.6667V18.9656H18.272C20.0038 17.364 21 15.0039 21 12.2069Z",fill:"#4285F4"})),Ov||(Ov=Ia.createElement("path",{d:"M12.1958 21.1954C14.6786 21.1954 16.7552 20.3678 18.2725 18.9655L15.3146 16.6666C14.487 17.2184 13.4372 17.5555 12.1958 17.5555C9.79728 17.5555 7.7666 15.9387 7.03862 13.7547H3.98877V16.1226C5.49837 19.1264 8.60186 21.1954 12.1958 21.1954Z",fill:"#34A853"})),Iv||(Iv=Ia.createElement("path",{d:"M7.03837 13.7547C6.84679 13.203 6.74717 12.6129 6.74717 11.9999C6.74717 11.3869 6.85446 10.7968 7.03837 10.2451V7.87726H3.98852C3.36016 9.11865 3 10.5133 3 11.9999C3 13.4865 3.36016 14.8812 3.98852 16.1226L7.03837 13.7547Z",fill:"#FBBC05"})),xv||(xv=Ia.createElement("path",{d:"M12.1958 6.44432C13.5521 6.44432 14.7629 6.91176 15.7207 7.82365L18.3414 5.20293C16.7552 3.71632 14.6786 2.80443 12.1958 2.80443C8.60186 2.80443 5.49837 4.87342 3.98877 7.87729L7.03862 10.2451C7.7666 8.0612 9.79728 6.44432 12.1958 6.44432Z",fill:"#EA4335"})))},zv=(0,Ia.forwardRef)(Yv),Wv=(0,Ia.memo)(zv);function $v(){return $v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},$v.apply(null,arguments)}var Xv,Qv,Zv,Jv,eA=function(e,t){return Ia.createElement("svg",$v({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),Uv||(Uv=Ia.createElement("path",{d:"M0 2.98816V21.0058C0 21.8683 0.705652 22.5739 1.56811 22.5739H12.3332C20.4717 22.5739 24 18.0185 24 11.9735C24 5.95974 20.4717 1.42004 12.3332 1.42004H1.56811C0.705652 1.42004 0 2.1257 0 2.98816Z",fill:"white"})),Fv||(Fv=Ia.createElement("path",{d:"M7.20551 5.84209V19.1554H12.9997C18.2607 19.1554 20.5423 16.1838 20.5423 11.9813C20.5423 7.95905 18.2607 4.8385 12.9997 4.8385H8.2091C7.65242 4.8385 7.20551 5.29325 7.20551 5.84209Z",fill:"#CC0066"})),jv||(jv=Ia.createElement("path",{d:"M12.3332 21.1391H2.97158C2.14048 21.1391 1.46619 20.4648 1.46619 19.6337V4.36806C1.46619 3.53696 2.14048 2.86267 2.97158 2.86267H12.3332C21.2166 2.86267 22.5416 8.57845 22.5416 11.9813C22.5416 17.8852 18.9115 21.1391 12.3332 21.1391ZM2.97158 3.36447C2.4149 3.36447 1.96798 3.81138 1.96798 4.36806V19.6337C1.96798 20.1903 2.4149 20.6373 2.97158 20.6373H12.3332C18.59 20.6373 22.0399 17.5637 22.0399 11.9813C22.0399 4.48567 15.9556 3.36447 12.3332 3.36447H2.97158V3.36447Z",fill:"black"})),Bv||(Bv=Ia.createElement("path",{d:"M9.24405 10.1858C9.44791 10.1858 9.63608 10.2172 9.81642 10.2799C9.99675 10.3426 10.1457 10.4446 10.279 10.57C10.4045 10.7033 10.5064 10.8679 10.5848 11.0561C10.6554 11.2521 10.6946 11.4795 10.6946 11.7461C10.6946 11.9813 10.6632 12.193 10.6083 12.389C10.5456 12.585 10.4593 12.7575 10.3417 12.8987C10.2241 13.0398 10.0752 13.1496 9.89482 13.2358C9.71449 13.3142 9.50279 13.3613 9.25973 13.3613H7.88763V10.178H9.24405V10.1858ZM9.19701 12.781C9.29894 12.781 9.39302 12.7654 9.49495 12.734C9.58904 12.7026 9.67529 12.6478 9.74585 12.5694C9.81642 12.4909 9.87914 12.3969 9.92618 12.2714C9.97323 12.146 9.99675 12.0048 9.99675 11.8245C9.99675 11.6677 9.98107 11.5187 9.94971 11.3933C9.91834 11.2678 9.86346 11.1502 9.79289 11.064C9.72233 10.9777 9.62824 10.8993 9.51063 10.8523C9.39303 10.8052 9.25189 10.7817 9.0794 10.7817H8.57761V12.7889H9.19701V12.781Z",fill:"white"})),Gv||(Gv=Ia.createElement("path",{d:"M13.525 10.1858V10.7739H11.8471V11.456H13.3917V11.997H11.8471V12.7732H13.5642V13.3613H11.1493V10.178H13.525V10.1858Z",fill:"white"})),qv||(qv=Ia.createElement("path",{d:"M15.9242 10.1858L17.116 13.3691H16.3868L16.1437 12.6634H14.952L14.7011 13.3691H13.9954L15.195 10.1858H15.9242V10.1858ZM15.9634 12.1381L15.5635 10.9698H15.5557L15.1401 12.1381H15.9634Z",fill:"white"})),Hv||(Hv=Ia.createElement("path",{d:"M18.2529 10.1858V12.781H19.8053V13.3691H17.5551V10.1858H18.2529V10.1858Z",fill:"white"})),Vv||(Vv=Ia.createElement("path",{d:"M4.58673 13.2437C5.39648 13.2437 6.05292 12.5872 6.05292 11.7775C6.05292 10.9677 5.39648 10.3113 4.58673 10.3113C3.77698 10.3113 3.12054 10.9677 3.12054 11.7775C3.12054 12.5872 3.77698 13.2437 4.58673 13.2437Z",fill:"black"})),Kv||(Kv=Ia.createElement("path",{d:"M5.69227 19.1555C4.4613 19.1555 3.47339 18.1597 3.47339 16.9366V15.2038C3.47339 14.5923 3.96734 14.0905 4.58675 14.0905C5.19832 14.0905 5.70011 14.5844 5.70011 15.2038V19.1555H5.69227Z",fill:"black"})))},tA=(0,Ia.forwardRef)(eA),nA=(0,Ia.memo)(tA);function iA(){return iA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},iA.apply(null,arguments)}var sA,aA=function(e,t){return Ia.createElement("svg",iA({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),Xv||(Xv=Ia.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.69207 19.9323C5.03411 19.9366 6.38045 19.9323 7.72248 19.928C7.82563 19.7521 7.84772 19.5591 7.86975 19.3671C7.87904 19.2859 7.88833 19.2048 7.90375 19.1253C8.01949 18.4432 8.12442 17.7589 8.2293 17.0755C8.27301 16.7905 8.31671 16.5056 8.36115 16.2212C8.48628 15.4229 8.61147 14.6245 8.7323 13.8262C8.75816 13.6622 8.80565 13.5069 8.85743 13.3516C8.85638 13.3478 8.85538 13.344 8.85439 13.3403C9.08728 12.9799 9.41037 12.8254 9.8493 12.8254C10.0894 12.8254 10.3296 12.8278 10.5697 12.8303C11.4297 12.8392 12.2893 12.8479 13.1461 12.7434C14.1214 12.6226 15.0621 12.3723 15.9338 11.9062C17.2758 11.1856 18.1906 10.0852 18.7646 8.69141C19.0365 8.02682 19.2522 7.34072 19.3428 6.6244C19.3479 6.61684 19.3515 6.60782 19.3553 6.59811C19.358 6.59129 19.3608 6.5841 19.3644 6.57692L19.3903 6.44748C19.3864 6.43578 19.379 6.42408 19.3712 6.40278C19.372 6.4032 19.3728 6.40357 19.3737 6.40399C19.4902 5.79989 19.529 5.19574 19.4211 4.5916C19.1881 3.29703 18.4761 2.34336 17.3067 1.75647C16.1803 1.18256 14.9505 1.02722 13.7121 1.01428C12.0904 0.995773 10.4666 0.999293 8.84374 1.00282C8.19504 1.00422 7.54651 1.00564 6.89829 1.00564C6.37184 1.00564 5.96623 1.35517 5.88852 1.86868C5.84823 2.13056 5.80841 2.39245 5.76864 2.65433C5.68905 3.1778 5.60946 3.70132 5.52604 4.22479C5.45285 4.67984 5.37918 5.13483 5.30547 5.58987C5.15762 6.50278 5.00982 7.41569 4.86581 8.32861C4.79251 8.79214 4.72353 9.25568 4.65455 9.71922C4.58545 10.1834 4.51634 10.6477 4.44291 11.1119C4.33948 11.7679 4.23153 12.4228 4.12368 13.077C4.02008 13.7054 3.91659 14.3333 3.81722 14.9611C3.7021 15.6916 3.5904 16.4231 3.47861 17.1553C3.37249 17.8505 3.26627 18.5462 3.15697 19.2419C3.09658 19.613 3.32958 19.9323 3.69207 19.9323Z",fill:"#012D8A"})),Qv||(Qv=Ia.createElement("path",{d:"M7.72489 19.9284C7.87159 19.6824 7.85433 19.3934 7.8975 19.1258C8.06146 18.1592 8.20386 17.1926 8.35491 16.2216C8.48004 15.4233 8.60517 14.625 8.726 13.8267C8.75192 13.6627 8.79935 13.5073 8.85113 13.352C9.08419 12.9895 9.4078 12.8298 9.84799 12.8342C10.9484 12.8342 12.0487 12.8903 13.1448 12.7522C14.1244 12.6314 15.0608 12.3811 15.9325 11.915C17.2745 11.1944 18.1893 10.094 18.7633 8.70017C19.0351 8.03563 19.2509 7.34947 19.3415 6.63315C19.3501 6.61589 19.3544 6.59863 19.3631 6.58567C19.3717 6.54254 19.3804 6.49937 19.389 6.45624C20.416 6.99995 20.9641 7.87162 21.1107 9.01087C21.2316 9.94729 21.0892 10.8578 20.8562 11.764C20.6706 12.4847 20.3858 13.1621 19.9802 13.7835C19.3199 14.8019 18.4008 15.5096 17.2573 15.9153C16.6617 16.1267 16.049 16.2475 15.4233 16.3209C14.9011 16.3813 14.379 16.3813 13.8568 16.3856C13.3304 16.3856 12.9938 16.6747 12.9204 17.1926C12.7608 18.2843 12.6011 19.3761 12.4112 20.4678C12.3465 20.839 12.2947 21.2144 12.23 21.5811C12.148 22.0299 11.8287 22.2975 11.3756 22.2975C10.2752 22.2975 9.17479 22.2975 8.07442 22.2975C7.65585 22.2975 7.45301 22.0559 7.52206 21.6502C7.60406 21.1497 7.68601 20.6534 7.76802 20.1528C7.78098 20.0709 7.80254 19.9888 7.72489 19.9284Z",fill:"#019AE0"})),Zv||(Zv=Ia.createElement("path",{d:"M19.3899 6.44723C19.3812 6.49036 19.3726 6.53354 19.364 6.57666C19.3554 6.59393 19.3511 6.61119 19.3424 6.62415C19.2518 7.34047 19.036 8.02657 18.7642 8.69116C18.1902 10.085 17.2754 11.1853 15.9334 11.906C15.0617 12.372 14.121 12.6223 13.1457 12.7432C12.0497 12.8769 10.9492 12.8251 9.84886 12.8251C9.40872 12.8251 9.08505 12.9805 8.85205 13.343C8.78301 13.1013 8.87792 12.864 8.9211 12.6353C9.05053 11.9448 9.14549 11.2458 9.24906 10.551C9.33102 10.003 9.42598 9.45496 9.51229 8.9069C9.62446 8.19488 9.73668 7.48716 9.85316 6.7752C9.88338 6.59393 9.90064 6.40405 9.96538 6.23144C10.1078 5.86465 10.4271 5.7136 10.7853 5.7136C12.4725 5.70069 14.1641 5.69633 15.8514 5.7136C16.5202 5.72225 17.1891 5.75678 17.8493 5.88621C18.3758 5.98978 18.8893 6.14949 19.3683 6.39545C19.3769 6.42131 19.3856 6.43427 19.3899 6.44723Z",fill:"#001F6B"})),Jv||(Jv=Ia.createElement("path",{d:"M19.3457 6.62828C19.3543 6.61102 19.3587 6.59376 19.3673 6.58085C19.3587 6.59376 19.3543 6.61102 19.3457 6.62828Z",fill:"#012D8A"})))},oA=(0,Ia.forwardRef)(aA),rA=(0,Ia.memo)(oA);function cA(){return cA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},cA.apply(null,arguments)}var lA,uA,dA=function(e,t){return Ia.createElement("svg",cA({fill:"none",height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",ref:t},e),sA||(sA=Ia.createElement("g",{clipRule:"evenodd",fillRule:"evenodd"},Ia.createElement("path",{d:"m1 5c0-2.20914 1.79086-4 4-4h14c2.2091 0 4 1.79086 4 4v14c0 2.2091-1.7909 4-4 4h-14c-2.20914 0-4-1.7909-4-4z",fill:"#10298d"}),Ia.createElement("path",{d:"m19.3801 13.5428h-1.767l-.2378.8626h-1.3665l1.4739-4.98914h1.9951l1.4944 4.98914h-1.3389zm-.2623-.9719-.6189-2.1622-.6017 2.1622zm-6.7181 1.8345v-4.98914h2.4618c.3381 0 .5965.02828.7732.08356.405.12984.6762.39337.8163.79248.0714.2089.1074.5245.1074.9449 0 .5065-.0386.8703-.1176 1.092-.1588.4371-.484.6891-.9751.7553-.0579.0096-.3034.018-.7366.0257l-.2192.0071h-.7893v1.2881zm1.3215-2.4457h.8241c.2616-.0097.4197-.0302.4782-.0617.0771-.0438.1298-.1312.1555-.2623.0167-.0874.0257-.2166.0257-.3882 0-.2115-.0167-.3683-.0508-.4705-.0469-.1427-.1606-.2301-.3406-.2616-.0855-.0068-.1714-.0091-.2571-.0071h-.835zm-6.72902-.9513h-1.22896c0-.2057-.02442-.3433-.0707-.4127-.07327-.1041-.27639-.1555-.60548-.1555-.32138 0-.53413.0295-.63826.0893-.10348.0598-.15555.1903-.15555.3908 0 .1819.04628.3015.1382.3587.08054.0442.17039.0689.26224.072l.24811.0167c.3323.0212.66397.0463.99628.0765.42036.0424.72374.1562.91336.3406.14847.1427.23782.3311.2661.5624.01607.1389.02378.2957.02378.4693 0 .4023-.03664.6961-.11248.8831-.13691.342-.44543.5579-.92365.6486-.20054.0385-.50649.0572-.91914.0572-.68904 0-1.16918-.0412-1.43979-.126-.3323-.1016-.55148-.3098-.65818-.6229-.05914-.1729-.08806-.4627-.08806-.8696h1.23024v.1041c0 .2166.06171.3561.18447.4178.08356.0431.1864.0649.3066.0681h.4525c.23075 0 .3773-.0122.44158-.0359.05086-.0179.09716-.0467.13561-.0845.03844-.0378.06807-.0835.08678-.1341.02037-.0784.02989-.1593.02829-.2404 0-.2192-.07906-.3535-.23654-.4011-.05913-.0192-.33423-.0456-.82273-.079-.27398-.0161-.54718-.0435-.81888-.0823-.40237-.0765-.67104-.234-.80473-.4731-.11827-.2024-.17676-.5097-.17676-.9204 0-.313.03214-.5637.09513-.752.06427-.189.16583-.33233.30852-.43003.20633-.15041.47243-.23847.79509-.26482.2976-.02571.59584-.03728.89408-.03599.51614 0 .8838.02956 1.10362.08998.53542.14591.80217.55466.80217 1.22706-.00112.0826-.00498.1651-.01157.2474z",fill:"#fff"}),Ia.createElement("path",{d:"m10.5749 10.118c.5457 0 1.0317.2558 1.3518.6556l.2854-.6209c-.4625-.44495-1.0796-.69312-1.7214-.69225-1.04123 0-1.93209.63955-2.29782 1.54395h-.55599l-.32781.7141h.71411c-.01157.1478-.01093.2956.00385.4435h-.35994l-.32781.7141h.8703c.19127.4462.50947.8264.91504 1.0932s.88067.4086 1.36607.4076c.5162 0 .9963-.1568 1.3929-.4255v-.8761c-.1617.1891-.3624.3409-.5883.4451-.2258.1041-.4716.1582-.7204.1585-.2905-.0011-.57605-.0752-.83053-.2153-.25447-.1402-.46969-.3419-.62592-.5869h1.82025l.3285-.7147h-2.41742c-.02116-.1469-.02461-.2958-.01029-.4435h2.63081l.3278-.7135h-2.73171c.15053-.2681.36947-.4914.63449-.6472s.56662-.2386.87402-.2398z",fill:"#ffcc02"}))))},hA=(0,Ia.forwardRef)(dA),mA=(0,Ia.memo)(hA);function pA(){return pA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},pA.apply(null,arguments)}var gA,yA=function(e,t){return Ia.createElement("svg",pA({width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t},e),lA||(lA=Ia.createElement("path",{d:"M18.6667 2H5.33333C3.49238 2 2 3.49238 2 5.33333V18.6667C2 20.5076 3.49238 22 5.33333 22H18.6667C20.5076 22 22 20.5076 22 18.6667V5.33333C22 3.49238 20.5076 2 18.6667 2Z",fill:"#008CFF"})),uA||(uA=Ia.createElement("path",{d:"M16.4377 7C16.8258 7.6 17 8.21869 17 9C17 11.4918 14.7315 14.7278 12.8903 17H8.6859L7 7.5459L10.6827 7.21803L11.5783 13.9449C12.4105 12.6721 13.4397 10.6721 13.4397 9.30951C13.4397 8.56295 13.3033 8.05541 13.09 7.63737L16.4377 7Z",fill:"white"})))},fA=(0,Ia.forwardRef)(yA),EA=(0,Ia.memo)(fA);function SA(){return SA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},SA.apply(null,arguments)}var vA,AA=function(e,t){return Ia.createElement("svg",SA({fill:"none",height:20,viewBox:"0 0 20 20",width:20,xmlns:"http://www.w3.org/2000/svg",ref:t},e),gA||(gA=Ia.createElement("g",{stroke:"currentColor",strokeWidth:1.4},Ia.createElement("rect",{height:10.9,rx:2.15,width:16.3,x:1.85,y:4.55313}),Ia.createElement("path",{d:"m1.89999 8.25156h16.30001"}),Ia.createElement("path",{d:"m4.60001 12.7031h5.39999",strokeLinecap:"round"}))))},CA=(0,Ia.forwardRef)(AA),PA=(0,Ia.memo)(CA);function NA(){return NA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},NA.apply(null,arguments)}var bA=function(e,t){return Ia.createElement("svg",NA({fill:"none",height:24,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",ref:t},e),vA||(vA=Ia.createElement("g",{fill:"currentColor"},Ia.createElement("path",{clipRule:"evenodd",d:"m12.5525 9.7447c-2.99092-.21639-9.77273 1.1855-9.77273 4.2535 0 2.0004 3.59111 4.9249 9.43923 5.0017.2308 0 6.8741-.2566 6.7717-7.3873-.0861-5.98915-5.0046-6.71876-6.438-6.90138l.0001-.70661c5.7145.36271 10.6447 3.82157 10.6447 7.99259 0 4.412-5.0276 8.0028-11.2092 8.0028s-11.183612-3.5911-11.183612-8.0028c0-4.41161 5.001722-8.00272 11.183612-8.00272.1894 0 .3776.00337.5645.01013z",fillRule:"evenodd"}),Ia.createElement("path",{d:"m6.83008 14.3939c0 3.9259 5.72712 4.9593 5.72712 4.9593v-4.9385-4.93856c-1.4874.40641-5.7268 1.78666-5.72712 4.91776z"}))))},DA=(0,Ia.forwardRef)(bA),TA=(0,Ia.memo)(DA);function _A(e,t){return t?e.translate("paymentMethodScreen.creditDebitCard"):e.translate("paymentMethodScreen.creditCard")}var kA=e=>{let{setRef:t,option:n,isActive:i,disabled:s,onChoosePaymentOption:a}=e;const o=(0,Qr.t)(),r=(0,_r.n)(),c=((e,t,n)=>{switch(e){case Hu.CARD:return{icon:(0,Dr.jsx)(PA,{className:"icon-stroke-2 text-black",width:20,height:20}),label:_A(t,n)};case Hu.APPLE_PAY:return{icon:(0,Dr.jsx)(Tv,{width:20,height:20}),label:t.translate("paymentMethodScreen.applePay")};case Hu.GOOGLE_PAY:return{icon:(0,Dr.jsx)(Wv,{width:20,height:20}),label:t.translate("paymentMethodScreen.googlePayButton")};case Hu.PAYPAL:return{icon:(0,Dr.jsx)(rA,{width:20,height:20}),label:t.translate("paymentMethodScreen.paypalButton")};case Hu.VENMO:return{icon:(0,Dr.jsx)(EA,{width:20,height:20}),label:t.translate("paymentMethodScreen.venmoButton")};case Hu.ACSS:return{icon:(0,Dr.jsx)(Ev,{width:20,height:20}),label:t.translate("paymentMethodScreen.bankTransfer")};case Hu.IDEAL:return{icon:(0,Dr.jsx)(nA,{width:20,height:20}),label:t.translate("paymentMethodScreen.idealButton")};case Hu.UK_BACS:return{icon:(0,Dr.jsx)(TA,{width:20,height:20}),label:t.translate("paymentMethodScreen.ukBacsButton")};case Hu.AU_BECS:return{icon:(0,Dr.jsx)(Mv,{width:20,height:20}),label:t.translate("paymentMethodScreen.auBECSButton")};case Hu.SEPA:return{icon:(0,Dr.jsx)(mA,{width:20,height:20}),label:t.translate("paymentMethodScreen.sepaButton")};case Hu.US_BANK_ACCOUNT_VERIFICATION:case Hu.US_BANK_ACCOUNT_INSTANT:case Hu.US_BANK_ACCOUNT:return{icon:(0,Dr.jsx)(hv,{width:20,height:20}),label:t.translate("paymentMethodScreen.bankTransfer")};default:throw new le.HP(e)}})(n,o,r.featureConfig.creditDebitCardLabel),l=ZS(n);return(0,Dr.jsxs)("button",{ref:t,type:"button",className:(0,Rr.A)("payment-option-list-item btn-reset",{"payment-option-list-item-active":i}),"aria-current":i,"data-tracking-element-name":`payment-option-${n}`,"data-qa":`payment-option-list-${l}`,disabled:s,"data-testid":`payment-option-list-${n}`,onClick:()=>{a(n)},children:[(0,Dr.jsx)("span",{className:"payment-option-list-item-icon p-rel me-2 z-index-1","aria-hidden":!0,children:c.icon}),(0,Dr.jsx)("span",{className:(0,Rr.A)("p-rel text-truncate z-index-1",i?"label-2":"label-3"),children:c.label})]})};const OA=(e,t)=>{let{className:n,disabled:i,onClick:s}=e;const a=(0,Qr.t)();return(0,Dr.jsx)("button",{ref:t,type:"button",className:(0,Rr.A)("btn-link link-2 text-nowrap text-ellipsis max-w-100",n),disabled:i,onClick:s,"data-tracking-element-name":"show-more-options","data-qa":"payment-option-more-button",children:a.translate("paymentMethodScreen.moreOptions")})};var IA=(0,Ia.forwardRef)(OA);const xA=e=>{let{displayedOptions:t,selectedOption:n,showAllPaymentOptions:i,shouldShowMoreButton:s,locked:a,onChoosePaymentOption:o,onShowMoreClick:r,onClickOutside:c}=e;const l=(0,Ur.P)(),u=(0,Ia.useRef)(null),d=Bl(i);JE(u,c);const h=e=>{o(e),!l&&i&&r()};return(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsxs)("div",{className:"p-rel",children:[!l&&(0,Dr.jsx)("div",{className:"invisible border",children:t.map((e=>(0,Dr.jsx)("div",{className:"payment-option-list-item"},e)))}),(0,Dr.jsx)("div",{className:(0,Rr.A)("bg-white border-radius-8 border border-gray-20",{"p-abs inset-top-start w-100":!l,"payment-option-list":i&&!l}),children:t.map(((e,t)=>(0,Dr.jsx)(kA,{disabled:a,setRef:i&&3===t?d:null,option:e,isActive:n===e,onChoosePaymentOption:h},e)))})]}),(0,Dr.jsx)(IA,{ref:u,className:(0,Rr.A)("self-start mt-2",{"d-none":!s,invisible:i&&!l}),disabled:a,onClick:()=>{r()}})]})},wA=e=>{const t=(0,Qr.t)();return(0,Dr.jsx)(qu,{processingState:e.processingState,className:"btn-primary",disabled:e.disabled,dataQa:"acss-button",trackingElement:"paymentMethod-acss",onClick:e.onClick,children:t.translate("paymentMethodScreen.continue")})},RA=(0,Ia.memo)(wA),MA=e=>{const t=(0,Qr.t)();return(0,Dr.jsxs)("button",{type:"button",className:"btn btn-black d-flex justify-center items-center",dir:"ltr","aria-label":t.translate("paymentMethodScreen.applePayButtonAriaLabel"),onClick:e.onClick,disabled:e.disabled,"data-tracking-element-name":"paymentMethod-applePay","data-qa":"apple-pay-button",children:[(0,Dr.jsx)("span",{className:"text-truncate me-1-5",children:t.translate("paymentMethodScreen.applePayButton")}),(0,Dr.jsx)(fd,{className:"shrink-0",width:50,height:26,"aria-hidden":!0})]})},LA=(0,Ia.memo)(MA),UA=e=>{const t=(0,Qr.t)();return(0,Dr.jsx)(qu,{processingState:e.processingState,className:"btn-primary",onClick:e.onClick,disabled:e.disabled,dataQa:"au-becs-button",trackingElement:"paymentMethod-auBECS",children:t.translate("paymentMethodScreen.continue")})},FA=(0,Ia.memo)(UA),jA=e=>{let{processingState:t,disabled:n,onClick:i}=e;const s=(0,Qr.t)(),a=zS(),o=(0,Ia.useCallback)((()=>{a(),i()}),[i,a]);return(0,Dr.jsx)(qu,{className:"btn-primary",processingState:t,disabled:n,dataQa:"cc-button",trackingElement:"paymentMethod-creditCard",onClick:o,children:s.translate("paymentMethodScreen.donate")})},BA=(0,Ia.memo)(jA),GA=e=>{const{state:t}=vc(ve.PAYMENT_OPTIONS),{onClick:n,disabled:i}=e,s=(0,Qr.t)(),[a,o]=(0,Ia.useState)(!1),r=(0,wl.D)((e=>o(e))),c=(0,Ia.useCallback)((()=>t.livemode?i?void 0:n():(r.set([!0]),void r.set([!1],3e3))),[i,n,t.livemode,r]);return(0,Dr.jsx)("button",{type:"button",className:(0,Rr.A)("btn p-rel d-flex justify-center items-center",a?"btn-testmode":"btn-black"),disabled:i,"aria-label":s.translate("paymentMethodScreen.googlePayButtonContinueAriaLabel"),onClick:c,"data-tracking-element-name":"paymentMethod-googlePay","data-qa":"google-pay-button",children:a?(0,Dr.jsx)("span",{role:"alert",children:s.translate("paymentMethodScreen.googlePay.notAvailableInTestMode.oneLine")}):(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsx)("span",{className:"text-truncate me-1-5",children:s.translate("paymentMethodScreen.googlePayButtonContinue")}),(0,Dr.jsx)(ad,{className:"shrink-0",width:62,height:31,"aria-hidden":!0})]})})},qA=(0,Ia.memo)(GA),HA=e=>{const t=(0,Qr.t)();return(0,Dr.jsx)(qu,{processingState:e.processingState,className:"btn-primary",onClick:e.onClick,disabled:e.disabled,dataQa:"ideal-button",trackingElement:"paymentMethod-ideal",children:t.translate("paymentMethodScreen.continue")})},VA=(0,Ia.memo)(HA),KA="paymentMethod-paypal",YA=e=>{let{disabled:t}=e;const{state:n,controller:i}=vc(ve.PAYMENT_OPTIONS),s=(0,Qr.t)(),a=(0,Ia.useRef)(null),[o,r]=(0,Ia.useState)(!1),c=(0,wl.D)((e=>r(e))),l=Tc();(0,Ia.useEffect)((()=>{if(a.current&&n.livemode)return i.initiatePaypal({element:a.current,buttonColor:OE.GOLD,onClick:()=>{a.current&&l.trackClick(KA,a.current)}}),()=>i.closePaypalButton()}),[i,n.livemode,l]);const u=(0,Ia.useCallback)((()=>{n.livemode||(c.set([!0]),c.set([!1],3e3))}),[n.livemode,c]);return(0,Dr.jsxs)("div",{className:(0,Rr.A)("btn p-rel px-1 d-flex items-center justify-center",{"btn-paypal-gold":!o,"btn-testmode":o,disabled:t}),role:n.livemode?void 0:"button",tabIndex:n.livemode?void 0:0,"aria-labelledby":"paypal-button",onClick:u,onKeyPress:u,"data-qa":"paypal-button",children:[(0,Dr.jsx)("div",{ref:a,id:"paypal-button",className:"p-abs inset-centered min-w-100 line-height-0","data-tracking-element-name":KA}),o?(0,Dr.jsx)("p",{className:"text-truncate",role:"alert",children:s.translate("paymentMethodScreen.paypal.notAvailableInTestMode.oneLine")}):(0,Dr.jsx)(Td,{width:69,height:22,"aria-hidden":!0})]})},zA=(0,Ia.memo)(YA),WA=e=>{const t=(0,Qr.t)();return(0,Dr.jsx)(qu,{processingState:e.processingState,className:"btn-primary",onClick:e.onClick,disabled:e.disabled,dataQa:"sepa-button",dataTestId:"sepa-button",trackingElement:"paymentMethod-sepa",children:t.translate("paymentMethodScreen.continue")})},$A=(0,Ia.memo)(WA),XA=e=>{const t=(0,Qr.t)();return(0,Dr.jsx)(qu,{processingState:e.processingState,className:"btn-primary",onClick:e.onClick,disabled:e.disabled,dataQa:"uk-bacs-button",trackingElement:"paymentMethod-ukBacs",children:t.translate("paymentMethodScreen.continue")})},QA=(0,Ia.memo)(XA),ZA=e=>{const t=(0,Qr.t)();return(0,Dr.jsx)(qu,{processingState:e.processingState,className:"btn-primary",disabled:e.disabled,dataQa:"us-bank-account-button",trackingElement:"paymentMethod-usBankAccount",onClick:e.onClick,children:t.translate("paymentMethodScreen.continue")})},JA=(0,Ia.memo)(ZA);var eC;function tC(){return tC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},tC.apply(null,arguments)}var nC=function(e,t){return Ia.createElement("svg",tC({fill:"none",height:16,viewBox:"0 0 69 16",width:69,xmlns:"http://www.w3.org/2000/svg",ref:t},e),eC||(eC=Ia.createElement("g",{fill:"#fff"},Ia.createElement("path",{d:"m13.2779 1.96094c.4249.70637.6165 1.43393.6165 2.35299 0 2.93132-2.4861 6.73937-4.50383 9.41327h-4.60865l-1.84833-11.12446 4.03538-.38563.97724 7.91579c.91309-1.49731 2.03989-3.8503 2.03989-5.45453 0-.87811-.14946-1.47621-.38302-1.96868z"}),Ia.createElement("path",{d:"m18.5093 6.8563c.7426 0 2.6121-.34193 2.6121-1.41142 0-.51356-.3607-.76973-.7859-.76973-.7438 0-1.7198.89776-1.8262 2.18115zm-.085 2.11812c0 1.30588.7214 1.81828 1.6778 1.81828 1.0415 0 2.0387-.2562 3.3348-.91921l-.4882 3.33671c-.9132.4491-2.3364.7488-3.7178.7488-3.5041 0-4.7582-2.139-4.7582-4.81307 0-3.46585 2.04-7.14593 6.2457-7.14593 2.3156 0 3.6104 1.30579 3.6104 3.12403.0002 2.93122-3.7375 3.8292-5.9045 3.85039z"}),Ia.createElement("path",{d:"m35.9733 4.56799c0 .42779-.0645 1.04829-.1287 1.4538l-1.2109 7.70191h-3.9293l1.1045-7.06022c.021-.1915.0854-.57702.0854-.79092 0-.51355-.3188-.64169-.702-.64169-.5091 0-1.0193.23509-1.3591.40672l-1.2528 8.08621h-3.9515l1.8052-11.53109h3.42l.0433.92037c.8069-.53474 1.8693-1.11308 3.3767-1.11308 1.9972-.00022 2.6992 1.027 2.6992 2.56799z"}),Ia.createElement("path",{d:"m47.64 3.26231c1.1253-.81211 2.188-1.26231 3.6532-1.26231 2.0176 0 2.7194 1.02722 2.7194 2.5682 0 .4278-.0642 1.0483-.1284 1.45381l-1.2095 7.70189h-3.9304l1.1256-7.20942c.0207-.19271.0642-.4278.0642-.57691 0-.57823-.3188-.70648-.702-.70648-.488 0-.9759.2139-1.3381.40671l-1.2526 8.0862h-3.9294l1.1256-7.20941c.0207-.19271.0629-.4278.0629-.57691 0-.57823-.3189-.70648-.7008-.70648-.5101 0-1.0192.23509-1.359.40671l-1.2538 8.08619h-3.9502l1.805-11.53107h3.3783l.1061.96266c.7859-.57691 1.8475-1.15525 3.2705-1.15525 1.2322-.00044 2.039.53442 2.4434 1.26187z"}),Ia.createElement("path",{d:"m61.8319 6.62143c0-.94135-.2339-1.58316-.9343-1.58316-1.5507 0-1.8692 2.75949-1.8692 4.17113 0 1.0709.2977 1.7337.9979 1.7337 1.4657 0 1.8056-2.91014 1.8056-4.32167zm-6.7967 2.41755c0-3.63637 1.9112-7.03898 6.3087-7.03898 3.3135 0 4.5248 1.96867 4.5248 4.68599 0 3.59421-1.8907 7.31631-6.3942 7.31631-3.3349 0-4.4393-2.2037-4.4393-4.96332z"}))))},iC=(0,Ia.forwardRef)(nC),sC=(0,Ia.memo)(iC);const aC="paymentMethod-venmo",oC=e=>{let{disabled:t,onClick:n}=e;const{state:i,controller:s}=vc(ve.PAYMENT_OPTIONS),a=(0,Qr.t)(),o=(0,Ia.useRef)(null),[r,c]=(0,Ia.useState)(!1),l=(0,wl.D)((e=>c(e))),u=Tc();(0,Ia.useEffect)((()=>{if(o.current)return s.initiateVenmo({element:o.current,onClick:()=>{o.current&&u.trackClick(aC,o.current)}}),()=>s.closeVenmoButton()}),[s,u]);const d=(0,Ia.useCallback)((()=>{if(!i.livemode)return l.set([!0]),void l.set([!1],3e3);t||n()}),[t,n,l,i.livemode]);return(0,Dr.jsxs)("div",{className:(0,Rr.A)("btn p-rel px-1 d-flex items-center justify-center",r?"btn-testmode":"btn-venmo",{disabled:t}),role:i.livemode?void 0:"button",tabIndex:i.livemode?void 0:0,"aria-labelledby":"venmo-button",onClick:d,onKeyPress:d,children:[(0,Dr.jsx)("div",{ref:o,id:"venmo-button",className:"p-abs inset-centered min-w-100 line-height-0","data-tracking-element-name":aC}),r?(0,Dr.jsx)("p",{className:"text-truncate",role:"alert",children:a.translate("paymentMethodScreen.venmo.notAvailableInTestMode.oneLine")}):(0,Dr.jsx)(sC,{width:76,height:24,"aria-hidden":!0})]})},rC=(0,Ia.memo)(oC),cC={[Hu.CARD]:BA,[Hu.APPLE_PAY]:LA,[Hu.GOOGLE_PAY]:qA,[Hu.PAYPAL]:zA,[Hu.VENMO]:rC,[Hu.UK_BACS]:QA,[Hu.AU_BECS]:FA,[Hu.ACSS]:RA,[Hu.SEPA]:$A,[Hu.IDEAL]:VA,[Hu.US_BANK_ACCOUNT]:JA,[Hu.US_BANK_ACCOUNT_INSTANT]:JA,[Hu.US_BANK_ACCOUNT_VERIFICATION]:JA},lC=e=>{let{transitionEntered:t,option:n,show:i,disabled:s,processingState:a,errorMessage:o,errorTitle:r,onClick:c}=e;const l=(0,Ur.P)(),u=(0,Ia.useRef)(null),d=(0,jr.wf)(),h=ZS(n),m=(0,Ia.useCallback)((()=>{c(n)}),[c,n]),p=cC[n];return(0,Dr.jsx)(Kc.S,{content:(0,Dr.jsx)(Fu,{errorTitle:r,errorMessage:o,dataQa:h,dataTestId:h}),trigger:"manual",manualOpen:t&&i&&Boolean(o),className:l?"ui-tooltip-mobile":"ui-tooltip-desktop",placement:"top",maxWidth:"300px",rootContainer:d,children:(0,Dr.jsx)("div",{ref:u,className:(0,Rr.A)({"d-none":!i}),children:(0,Dr.jsx)(p,{onClick:m,disabled:s,processingState:a})},n)})},uC=e=>{let{transitionEntered:t,availableOptions:n,buttonOptions:i,preSelectedPaymentOption:s,locked:a,onChoosePaymentOption:o,getProcessingState:r}=e;return(0,Dr.jsx)(Dr.Fragment,{children:n.map((e=>{const{errorTitle:n,error:c,visible:l}=i[e],u=s===e;return(0,Dr.jsx)(lC,{option:e,errorTitle:n,errorMessage:c,show:l&&u,onClick:o,processingState:r(e),disabled:a,transitionEntered:t},e)}))})},dC=(0,Ia.memo)(uC),hC=e=>{let{currency:t,prefixCurrencySymbol:n,postfixCurrencySymbol:i,total:s,isRecurring:a,recurringLabel:o}=e;const r=(0,Qr.t)(),c=(0,Ia.useMemo)((()=>(0,Rm.p)(t,r.locale)),[r.locale,t]);return(0,Dr.jsxs)("div",{className:"d-flex",children:[(0,Dr.jsx)("p",{className:"body-3 text-truncate me-4",children:r.translate("paymentMethodScreen.amountLabel")}),(0,Dr.jsxs)("p",{className:"label-4 shrink-0 max-w-70 text-truncate ms-auto","data-qa":"donation-amount-label",children:[n&&(0,Dr.jsx)("span",{className:"d-inline-block text-sans-serif","aria-hidden":"true",children:n}),(0,Dr.jsx)("span",{className:"d-inline-block text-sans-serif",children:r.formatCurrency(s,{currency:t,display:"trimzeroes",withoutPrefix:!0,withoutSuffix:!0})}),i&&(0,Dr.jsx)("span",{className:"d-inline-block text-sans-serif","aria-hidden":"true",children:i}),(0,Dr.jsx)("span",{className:"d-inline-block text-sans-serif ms-0-5",children:c}),a&&(0,Dr.jsx)("span",{className:"d-inline-block",children:o})]})]})},mC=["top","top-end","bottom","bottom-end"],pC=e=>{let{includeFees:t,isFeeCovered:n,currency:i,processingFee:s,showIncludeFee:a,locked:o,paymentOption:r,transitionEntered:c,isPaymentLoader:l,dataQa:u,dataTestId:d,toggleCheckbox:h}=e;const m=(0,Qr.t)(),p=(0,cc.Q)(),g=(0,Ur.P)(),y=Lc("lg"),f=t!==D.XN.ONLY_NO,E=t===D.XN.ONLY_YES,S=(0,Ia.useRef)(null),v=(0,Ia.useRef)(null),A=(0,Ia.useRef)(null),C=(0,jr.wf)(),P=[p?"right":"left","top"],N=$r(A),[b,T]=(0,Ia.useState)(!1),{showHelpTooltip:_,helpTooltipRef:k,handleHelpTooltipKeyDown:O,handleHelpTooltipChecked:I}=function(e){const t=(0,Ia.useRef)(null),[n,i]=(0,Ia.useState)(!1),s=()=>{i((e=>!e))},a=()=>{i(!1)};return JE(t,a),eS(e,a),{helpTooltipRef:t,showHelpTooltip:n,handleHelpTooltipChecked:e=>{e.stopPropagation(),s()},handleHelpTooltipKeyDown:e=>{e.code!==Lr.J.ENTER&&e.code!==Lr.J.SPACE||(e.stopPropagation(),e.preventDefault(),s())}}}(v);(0,Ia.useEffect)((()=>{const e=r===Hu.CARD&&!y;T(!(!S.current||n||_||e))}),[n,_,r,y]);const x=(0,Dr.jsxs)(Dr.Fragment,{children:[E&&m.translate("paymentMethodScreen.transactionCostsInfo"),a&&(0,Dr.jsx)(uc,{className:"fee-tooltip",token:"paymentMethodScreen.transactionCostsTooltipMessage",params:{processingFee:m.formatCurrency(s,{currency:i,display:"floatcents"})}})]});return(0,Dr.jsx)(Dr.Fragment,{children:f&&(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsx)(Kc.S,{content:m.translate("paymentMethodScreen.coverCostsQuestion"),trigger:"manual",manualOpen:c&&!l&&!o&&!g&&b,className:g?"ui-tooltip-mobile":"ui-tooltip-desktop",placement:p?"left":"right",fallbackPlacements:P,maxWidth:"220px",rootContainer:C,"data-qa":"cover-fee-tooltip",children:(0,Dr.jsxs)("div",{className:(0,Rr.A)("d-flex items-center",{"px-8 mx-minus-8":!g}),"data-qa":u,"data-testid":d,children:[E&&(0,Dr.jsx)("p",{className:"body-3 text-truncate","data-qa":"fee-amount-text",children:m.translate("paymentMethodScreen.transactionCostsIncluded",{amount:m.formatCurrency(s,{currency:i,display:"floatcents"})})}),a&&(0,Dr.jsx)(lu,{innerRef:S,className:"body-3",customLabelClasses:"line-height-20",checked:n,disabled:o,onChange:h,dataQa:"cover-fee-checkbox",trackingElement:"coverFee",children:(0,Dr.jsx)("span",{className:"body-3 text-truncate",children:m.translate("paymentMethodScreen.coverLabel")})}),(0,Dr.jsx)(Kc.S,{ref:k,content:x,trigger:"manual",manualOpen:c&&!o&&_,className:g?"ui-tooltip-mobile":"ui-tooltip-desktop",placement:p?"left":"right",fallbackPlacements:mC,maxWidth:"220px",rootContainer:C,"data-qa":"why-cover-fee-tooltip",children:(0,Dr.jsx)("button",{ref:v,type:"button",className:"btn-icon shrink-0 font-size-18 text-gray-60 ms-2","aria-label":m.translate("paymentMethodScreen.transactionCostsHelpAriaLabel"),disabled:o,onClick:I,onKeyDown:O,"data-qa":"transaction-cost-tip","data-testid":"transaction-cost-tip",children:(0,Dr.jsx)(Rd.A,{className:(0,Rr.A)("icon-stroke d-block",{"icon-flip-horizontal":p}),"aria-hidden":!0})})})]})}),(0,Dr.jsx)(Mr.A,{nodeRef:A,in:g&&a&&!n,mountOnEnter:!0,unmountOnExit:!0,addEndListener:N,classNames:"rtg-fee-accordion-mobile",children:(0,Dr.jsx)("p",{ref:A,className:"body-3 text-ellipsis mt-2",role:"alert","data-qa":"cover-fee-tooltip",children:m.translate("paymentMethodScreen.coverCostsQuestion")})}),(0,Dr.jsx)("hr",{className:"border-gray-15 mt-3 mb-2-5","aria-hidden":!0})]})})},gC=()=>{const e=(0,Qr.t)(),t=window.document.location.href.replace("http://","https://");return(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsx)(vl,{className:"d-block mx-auto",ariaHidden:!0}),(0,Dr.jsx)("p",{className:"text-center text-ellipsis mt-6",children:e.translate("paymentMethodScreen.creditCardIsUnavailableInfo.part-1")}),(0,Dr.jsx)(uc,{className:"text-center text-ellipsis mt-2-5",as:"p",token:"paymentMethodScreen.creditCardIsUnavailableInfo.part-2",params:{link:t}})]})},yC=(0,Ia.memo)(gC),fC=e=>{const{transitionEntered:t,stripeElementsCardState:n,setStripeElementsCardState:i}=e,{state:s,controller:a}=vc(ve.PAYMENT_OPTIONS),o=(0,Ur.P)(),r=(0,Qr.t)(),c=iS(),l=a.getFrequency(),u=a.getCurrency();(0,Ia.useEffect)((()=>{a.syncPaymentButtons()}),[a,l,u]);const d=(0,Ia.useCallback)((()=>{a.toggleFeeCovered()}),[a]),h=(0,Ia.useCallback)((e=>a.choosePaymentOption(e)),[a]),m=(0,Ia.useCallback)((e=>{a.selectPaymentOption(e)}),[a]),p=(0,Ia.useCallback)((()=>{a.toggleShowAllPaymentOptions()}),[a]),g=(0,Ia.useCallback)((()=>{s.showAllPaymentOptions&&!o&&a.setShowAllPaymentOptions(!1)}),[a,s.showAllPaymentOptions,o]),y=(0,Ia.useCallback)((e=>{switch(e){case Hu.ACSS:return s.processingACSSState;case Hu.US_BANK_ACCOUNT:case Hu.US_BANK_ACCOUNT_INSTANT:case Hu.US_BANK_ACCOUNT_VERIFICATION:return s.processingUSBankAccountState;case Hu.CARD:return s.processingCardState;case Hu.IDEAL:return s.processingIdealState;default:return Kr.IDLE}}),[s.processingACSSState,s.processingCardState,s.processingIdealState,s.processingUSBankAccountState]);return(0,Dr.jsxs)("div",{className:"p-rel flow-screen","data-qa":"active-screen-payment-method",children:[(0,Dr.jsx)(Gl,{autoFocus:o,children:r.translate("common.screenAriaLabel",{screenTitle:`${r.translate("paymentMethodScreen.title")}`})}),(0,Dr.jsx)(Kl,{title:r.translate("paymentMethodScreen.title"),isBackFlowDisabled:s.isBackFlowDisabled,forceShowBackButton:s.isBackFlowDisabled}),s.stripeElementsAvailable?(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsx)(Al,{className:(0,Rr.A)("px-body",{"pt-8 pb-5":!o}),children:(0,Dr.jsxs)("div",{className:"fixed-container grow-1 min-h-0 d-flex flex-column",children:[(0,Dr.jsxs)("div",{className:"shrink-0",children:[s.isMultiplePaymentOptions&&(0,Dr.jsx)("p",{className:"label-2 text-truncate mb-2",children:r.translate("paymentMethodScreen.description")}),!!s.preSelectedPaymentOption&&s.isMultiplePaymentOptions&&(0,Dr.jsx)(xA,{displayedOptions:s.displayedPaymentOptions,locked:s.locked,selectedOption:s.preSelectedPaymentOption,shouldShowMoreButton:s.shouldShowMoreButton,showAllPaymentOptions:s.showAllPaymentOptions,onChoosePaymentOption:m,onShowMoreClick:p,onClickOutside:g})]}),s.preSelectedPaymentOption===Hu.CARD&&s.isMultiplePaymentOptions&&(0,Dr.jsx)(yc,{size:32,sizeMin:16}),(0,Dr.jsx)("div",{className:(0,Rr.A)(s.preSelectedPaymentOption===Hu.CARD?"shrink-0":"d-none",{"opacity-20":s.showAllPaymentOptions&&!o}),children:(0,Dr.jsx)(QS,{isReady:!!t&&s.preSelectedPaymentOption===Hu.CARD,locked:s.showAllPaymentOptions&&!o,stripeElementsCardState:n,setStripeElementsCardState:i})}),(0,Dr.jsx)(yc,{size:32,sizeMin:16,className:"mt-auto"}),(0,Dr.jsxs)("div",{className:(0,Rr.A)("shrink-0",{"opacity-20":s.showAllPaymentOptions&&!o}),children:[(0,Dr.jsx)(pC,{paymentOption:s.preSelectedPaymentOption,showIncludeFee:s.showIncludeFee,isFeeCovered:s.isFeeCovered,locked:s.locked||s.showAllPaymentOptions&&!o,processingFee:s.processingFee,currency:s.currency,toggleCheckbox:d,includeFees:s.includeFees,transitionEntered:t,isPaymentLoader:c,dataQa:"transaction-costs-lpo"}),(0,Dr.jsx)(hC,{prefixCurrencySymbol:s.prefixCurrencySymbol,postfixCurrencySymbol:s.postfixCurrencySymbol,currency:s.currency,total:s.total,isRecurring:s.isRecurring,recurringLabel:s.recurringLabel})]})]})}),(0,Dr.jsx)(Ll,{className:(0,Rr.A)({"opacity-20":s.showAllPaymentOptions&&!o}),isBackFlowDisabled:s.isBackFlowDisabled,children:s.isStripeAccountConnected?(0,Dr.jsx)(dC,{preSelectedPaymentOption:s.preSelectedPaymentOption,availableOptions:s.availableOptions,buttonOptions:s.buttonOptions,locked:s.locked||s.showAllPaymentOptions&&!o,onChoosePaymentOption:h,getProcessingState:y,transitionEntered:t}):(0,Dr.jsx)("p",{className:"font-weight-600 text-center text-red-80 text-ellipsis",dangerouslySetInnerHTML:{__html:r.safeTranslate("paymentMethodScreen.stripe.connectionInfo")},"data-qa":"stripe-danger-text"})})]}):(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsx)(Al,{className:(0,Rr.A)("px-body justify-center",{"pt-4 pb-6":o}),children:(0,Dr.jsx)("div",{className:"fixed-container",children:(0,Dr.jsx)(yC,{})})}),(0,Dr.jsx)(Ll,{className:(0,Rr.A)({"pt-10 pb-5":!o})})]}),c&&(0,Dr.jsx)(bE,{})]})},{ScrollToFieldsProvider:EC,useAddFieldToScroll:SC,useScrollToFieldsTrigger:vC,useFakeStripeElement:AC}=(0,uu.J)(),CC=e=>{let{transitionEntered:t,stripeElementState:n,setStripeElementState:i}=e;const{state:s,controller:a}=vc(ve.SEPA),o=(0,Qr.t)(),r=Yl(),l=(0,Ur.P)(),u=(0,zr.$)(),d=(0,Iy.j)(),h=(0,xy.l)(Oy.bG.SAFARI,18),m=(0,Ia.useRef)(null),[p,g]=(0,Ia.useState)(),y=Cu(s.shakeKey,0!==s.shakeKey),f={maxHeight:l?void 0:"150px"},E=(0,Ia.useRef)(!1),S=(0,kr.M)(),v=vC();(0,Ia.useEffect)((()=>{(0,c.sH)(void 0,void 0,void 0,(function*(){if(u)return;if(!m.current)throw new Error("ibanContainerRef is not provided");const e={onIbanElementReady:()=>{i((e=>Object.assign(Object.assign({},e),{isReady:!0})))}},{stripeElements:t}=yield a.initiateSepa(m.current,Object.assign(Object.assign({},e),{stripeElementStyleOverride:Object.assign(Object.assign({},so),{base:Object.assign(Object.assign({},so.base),{"::placeholder":{color:"transparent"}}),invalid:Object.assign(Object.assign({},so.invalid),{color:"#222832",":focus":{color:"#222832"},"::placeholder":{color:"transparent"}})}),showIcon:!1}));g(t)}))}),[a,u,i]),(0,Ia.useEffect)((()=>{if(!n.isReady||!p||!t)return;const e=p.getElement(_y.IBAN);if(!e)throw new Error("iban element is not initialized");const s=()=>{E.current?S.document.dispatchEvent(new Event("stripeElementEvent")):E.current=!0},o=e=>{a.recalculatePaymentScreen(),i((t=>{var n,i;return Object.assign(Object.assign({},t),{isEmpty:e.empty,error:null!==(i=null===(n=e.error)||void 0===n?void 0:n.message)&&void 0!==i?i:null})}))};return e.on("focus",s),e.on("change",o),d||h||E.current||e.focus(),()=>{e.off("focus",s),e.off("change",o)}}),[a,S.document,i,n.isReady,p,t,d,h]);const A=AC({focus:()=>{var e;return null===(e=null==p?void 0:p.getElement(_y.IBAN))||void 0===e?void 0:e.focus()},scrollIntoView:e=>{var t;return null===(t=m.current)||void 0===t?void 0:t.scrollIntoView(e)}});return SC(A,(e=>Boolean(e.error)||e.isEmpty)),(0,Dr.jsxs)("form",{className:"flow-screen",onSubmit:e=>{e.preventDefault(),v(),a.leave()},children:[(0,Dr.jsx)("div",{className:"sr-only",role:"status","aria-live":"polite",children:o.translate("common.screenAriaLabel",{screenTitle:`${o.translate("sepaScreen.title")}`})}),(0,Dr.jsx)(Kl,{title:o.translate("sepaScreen.title"),titleQa:"sepa-title"}),(0,Dr.jsx)(Al,{className:(0,Rr.A)("px-body",{"py-5":!l}),children:(0,Dr.jsxs)("div",{className:(0,Rr.A)("fixed-container",{"grow-1 d-flex flex-column":!l}),children:[(0,Dr.jsx)("p",{className:(0,Rr.A)("text-center",l?"text-ellipsis":"text-line-clamp-4"),children:o.translate("sepaScreen.description")}),(0,Dr.jsxs)(Fd.s,{htmlFor:`iban-number-${r}`,label:o.translate("sepaScreen.ibanNumberLabel"),labelFloating:!0,formGroupClass:(0,Rr.A)("mt-5",{"pointer-events-none":s.locked,shake:y}),formLabelClass:(0,Rr.A)({"has-value":!n.isEmpty,"has-error pe-6":null!==n.error}),dataQa:"iban-number-label",children:[(0,Dr.jsx)("div",{ref:m,id:`iban-number-${r}`,className:"StripeElement has-label-floating"}),n.error&&(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsx)(Eu.U,{className:"p-abs inset-centered-end z-index-5 me-4",children:n.error}),(0,Dr.jsx)("p",{role:"alert",className:"sr-only",children:n.error})]})]}),(0,Dr.jsx)("div",{className:l?"mt-5":"grow-1 min-h-0 p-rel mt-4",style:f,children:(0,Dr.jsx)("div",{className:(0,Rr.A)({"p-abs inset-0 scroll-box":!l}),children:(0,Dr.jsx)("p",{className:(0,Rr.A)("body-4 text-gray-80 text-ellipsis",{"px-3 py-2-5":!l,"pointer-events-none":s.locked}),children:o.translate("sepaScreen.legalInformation")})})})]})}),(0,Dr.jsx)(Ll,{children:(0,Dr.jsx)(qu,{type:"submit",className:"btn-primary",errorTitle:s.payErrorMessage,processingState:s.processingState,dataQa:"sepa-continue-button",trackingElement:"nextButton",children:s.isPaymentScreen?_u(o,s.formattedAmount,s.frequency):o.translate("sepaScreen.button")})})]})};function PC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ";return e.filter((e=>"string"==typeof e||"number"==typeof e)).map((e=>"string"==typeof e?e.trim():e)).filter((e=>""!==e)).join(t)}var NC;function bC(){return bC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},bC.apply(null,arguments)}var DC=function(e,t){return Ia.createElement("svg",bC({fill:"none",height:28,viewBox:"0 0 87 28",width:87,xmlns:"http://www.w3.org/2000/svg",ref:t},e),NC||(NC=Ia.createElement("path",{clipRule:"evenodd",d:"m40.6994 5.87862h4.4869s4.4427-.08959 4.3979 3.94846c-.0443 3.00672-4.3073 3.45522-4.3073 3.45522h-4.577v-7.40368zm13.4235 14.49468c.126.5873.5508 1.2346 1.9681 1.3011 1.8843.0443 2.9614-.6739 2.9614-.6739v1.3911s-2.064.4943-3.0515.4943c-1.0318 0-4.0833-.225-4.0833-3.0516 0-2.288 2.513-3.0062 3.9484-3.0062 2.513.0896 3.7245.9874 3.6797 3.5448 0 .0369-4.1346.0093-5.4228.0004zm.0059-1.1228h3.4429s0-1.3011-1.6604-1.3011c-1.2489 0-1.6575.6735-1.7825 1.3011zm10.8913-1.4049c.4982-.5405 1.3346-.9732 2.7375-.9732 2.7823 0 3.2312 2.3333 3.1864 2.9614-.0448.6282-.2692 3.0063-3.4995 3.0063-1.2203 0-1.9671-.4165-2.4239-.9333v.7536h-2.1989v-8.0771h2.1989v3.2623zm1.8854 3.7382c1.3011-.0453 1.8844-1.1661 1.8844-1.7047 0-.5385-.3146-1.6604-1.975-1.6604-1.2882 0-1.6806.9732-1.7948 1.4487v.5853c.1133.4849.5076 1.3311 1.8854 1.3311zm18.9812-.224.0443 1.2568s-1.0318.224-1.7047.224-2.4239-.4037-2.4239-2.1094v-2.6026h-1.8391v-1.1662h1.8391v-1.3911h2.2442v1.3911h1.8401v1.1662h-1.8401v2.2443s0 1.1218.8979 1.1218c.8969 0 .9422-.1349.9422-.1349zm-6.8208-14.26972h2.6026v6.23702h2.1979v-6.23702h2.6479v-1.30154h-7.4484zm-.8979.31407.2693-1.30155s-1.1219-.49325-3.0959-.49325c-1.9297 0-5.0255 1.07708-5.0255 3.99375 0 2.8719 3.2755 3.8589 5.2948 3.8589s2.6922-.3141 2.6922-.3141l-.224-1.4359s-.8979.2692-2.4239.2692c-1.4807-.0448-3.0053-1.2114-3.0053-2.51249.0443-1.16667 1.3902-2.46822 3.1412-2.46822 1.3453 0 2.3771.40366 2.3771.40366zm-19.8338-1.57032s3.6797-.17919 3.6797 1.97447c0 1.84009-2.1084 1.97447-2.1084 1.97447s.5828.08959.8526.49323c.224.3589 1.7047 3.0516 1.7047 3.0516h-2.2442s-.3589-.449-.5385-.7626c-.1344-.314-.5386-.9874-.5386-.9874s-.3136-1.1219-1.3911-1.1219c-.0271 0-.4652-.0167-.8078-.0295v2.9014h-2.1537v-7.49377zm-1.3911 3.36561h1.1671s1.6151-.09009 1.7047-1.07708c.0453-.94219-1.5698-1.07707-1.5698-1.07707h-1.302zm9.0192 1.16666h3.5901v-1.39113h-3.5901v-1.70521h3.9047v-1.43593h-6.1021v7.49377h6.1473v-1.3464h-3.9494v-1.6151zm8.75 5.7433h2.199v-1.5261h-2.199zm0 6.5515h2.199v-5.6985h-2.199zm-23.9609-9.3333h2.1536v-7.49377h-2.1536zm-10.052 1.8848h4.4869s4.4427-.0905 4.3979 3.9485c-.0443 3.0063-4.3073 3.4557-4.3073 3.4557h-4.577v-7.4042zm2.1989 6.0131h1.4359s2.9615-.1797 2.9615-2.4683c0-2.2885-3.1411-2.513-3.1411-2.513h-1.2563zm0-9.3339h1.4359s2.9615-.2244 2.9615-2.46818c0-2.33333-3.1411-2.51252-3.1411-2.51252h-1.2563zm-22.3468-1.5521v15.0141s-8.7057-1.5708-8.7057-7.5386c.0005-4.7597 6.4447-6.8577 8.7057-7.4755zm0-.2801c-5.2323-.37853-17.0963 2.0739-17.0963 7.4411 0 3.4995 6.28226 8.6156 16.513 8.75.4036 0 12.0255-.449 11.8463-12.9234-.1506-10.47738-7.9924-12.31254-10.5-12.632021v-.6384659c9.9969.6345289 17.8593 6.6465569 17.8593 13.9433869 0 7.7182-8.7952 14-19.6093 14-10.81402 0-19.5645-6.2823-19.5645-14 0-7.71772 8.74999-14 19.5645-14 .3313 0 .6606.0059087.9875.017723v10.041677z",fill:"currentColor",fillRule:"evenodd"})))},TC=(0,Ia.forwardRef)(DC),_C=(0,Ia.memo)(TC);const kC={boxShadow:"inset 0 0 0 1px #c7cdd6"},OC={boxShadow:"inset 0 -1px 0 0 #c7cdd6"};function IC(e){/[0-9]/.test(e.key)||!e.key||1!==e.key.length||e.ctrlKey||e.metaKey||e.preventDefault()}const{useAddFieldToScroll:xC,useScrollToFieldsTrigger:wC,ScrollToFieldsProvider:RC}=(0,uu.J)(),MC=e=>{var t,n,i;const{state:s,controller:a}=vc(ve.UK_BACS),o=(0,Ur.P)(),r=(0,Qr.t)(),c=Yl(),[l,u]=(0,Ia.useState)(!1),[d,h]=(0,Ia.useState)(!1),[m,p]=(0,Ia.useState)(!1),g=wC(),y=(0,Ia.useRef)(null),f=(0,Ia.useRef)(null),E=(0,Ia.useRef)(null),S=(0,Ia.useRef)(null),v=s.errors.sortCode,A=s.errors.accountNumber,C=s.errors.accountHolderName,P=Cu(s.shakeKey,0!==s.shakeKey),N=(0,jl.k)();xC(y,(e=>Boolean(e.sortCode))),xC(f,(e=>Boolean(e.accountNumber))),xC(E,(e=>Boolean(e.accountHolderName))),xC(S,(e=>Boolean(e.termsChecked))),(0,Ia.useEffect)((()=>{if(s.sortCode||s.accountNumber||s.accountHolderName)return;if(s.livemode||!N)return;if(!y.current||!f.current||!E.current)throw new Error("Input fields refs are not defined");const e=a.fillDemoData({sortCode:y,accountNumber:f,accountHolderName:E});return()=>{e()}}),[N,a,s.livemode]);const b=(0,Ia.useCallback)((e=>{const t=e.target.value;a.changeSortCode(t),f.current&&6===t.length&&f.current.focus()}),[a]),D=(0,Ia.useCallback)((e=>{const t=e.target.value;a.changeAccountNumber(t),E.current&&17===t.length&&E.current.focus()}),[a]);return(0,Dr.jsxs)("form",{onSubmit:e=>{g(),e.preventDefault(),a.leave()},className:"flow-screen","data-qa":"uk-bacs-title",children:[(0,Dr.jsx)("div",{className:"sr-only",role:"status","aria-live":"polite",children:r.translate("common.screenAriaLabel",{screenTitle:`${r.translate("ukBacsScreen.title")}`})}),(0,Dr.jsx)(Kl,{children:(0,Dr.jsx)("h2",{className:(0,Rr.A)("title-2",{"py-2":o}),"aria-label":r.translate("ukBacsScreen.title"),children:(0,Dr.jsx)("span",{className:"icon-slot d-block","aria-hidden":"true",children:(0,Dr.jsx)("span",{className:"p-abs inset-centered",children:(0,Dr.jsx)(_C,{className:"d-block text-black",width:87,height:28})})})})}),(0,Dr.jsx)(Al,{className:(0,Rr.A)("px-body d-flex flex-column",{"pt-8":!o,shake:P}),children:(0,Dr.jsxs)("div",{className:"fixed-container grow-1 min-h-0 d-flex flex-column",children:[(0,Dr.jsxs)("div",{className:"group-stacked-vertical",children:[(0,Dr.jsx)(fu.t,{id:`sort-code-${c}`,className:(0,Rr.A)("text-sans-serif",{"pe-10":v}),formLabelClass:(0,Rr.A)({"pe-6":v}),formGroupClass:"group-stacked-item",label:r.translate("ukBacsScreen.sortCode.label"),labelFloating:!0,setRef:y,autoFocus:!0,autoFocusMode:ql.Q.ALL,name:"sortCode",inputMode:"numeric",error:v,placeholder:r.translate("ukBacsScreen.sortCode.label"),value:null!==(t=s.sortCode)&&void 0!==t?t:"",disabled:s.locked,"aria-required":!0,"aria-describedby":`sort-code-${c}-error`,onKeyPress:IC,dataQa:"sort-code",onChange:b,onFocus:()=>u(!0),onBlur:()=>u(!1),children:v&&(0,Dr.jsx)(Eu.U,{className:"p-abs inset-centered-end z-index-5 me-4",showTooltip:l,children:(0,Dr.jsx)("p",{id:`sort-code-${c}-error`,children:r.translate("ukBacsScreen.sortCode.error")})})}),(0,Dr.jsx)(fu.t,{id:`account-number-${c}`,className:(0,Rr.A)("text-sans-serif",{"pe-10":A}),formLabelClass:(0,Rr.A)({"pe-6":A}),formGroupClass:"group-stacked-item",setRef:f,label:r.translate("ukBacsScreen.accountNumber.label"),labelFloating:!0,name:"ukBacsAccountNumber",inputMode:"numeric",error:A,placeholder:r.translate("ukBacsScreen.accountNumber.label"),value:null!==(n=s.accountNumber)&&void 0!==n?n:"",disabled:s.locked,"aria-required":!0,"aria-describedby":`account-number-${c}-error`,onKeyPress:IC,dataQa:"account-number",onChange:D,onFocus:()=>h(!0),onBlur:()=>h(!1),children:A&&(0,Dr.jsx)(Eu.U,{className:"p-abs inset-centered-end z-index-5 me-4",showTooltip:d,children:(0,Dr.jsx)("p",{id:`account-number-${c}-error`,children:r.translate("ukBacsScreen.accountNumber.error")})})})]}),(0,Dr.jsx)(yc,{size:16}),(0,Dr.jsx)(fu.t,{id:`account-holder-name-${c}`,className:(0,Rr.A)("text-sans-serif",{"pe-10":C}),formLabelClass:(0,Rr.A)({"pe-6":C}),formGroupClass:"p-rel",label:r.translate("ukBacsScreen.accountHolderName.label"),labelFloating:!0,setRef:E,name:"ukBacsAccountHolderName",error:C,placeholder:r.translate("ukBacsScreen.accountHolderName.label"),minLength:1,value:null!==(i=s.accountHolderName)&&void 0!==i?i:"",disabled:s.locked,"aria-required":!0,"aria-describedby":`account-holder-name-${c}-error`,dataQa:"account-holder-name",onChange:e=>a.changeAccountHolderName(e.target.value),onFocus:()=>p(!0),onBlur:()=>p(!1),children:C&&(0,Dr.jsx)(Eu.U,{className:"p-abs inset-centered-end z-index-5 me-4",showTooltip:m,children:(0,Dr.jsx)("p",{id:`account-holder-name-${c}-error`,children:r.translate("ukBacsScreen.accountHolderName.error")})})}),(0,Dr.jsx)(yc,{size:16}),(0,Dr.jsx)(lu,{setRef:S,customLabelClasses:"line-height-18 text-gray-80",checked:s.termsChecked,error:s.errors.termsChecked,disabled:s.locked,"aria-required":!0,"aria-describedby":`terms-checkbox-${c}-error`,onChange:()=>a.toggleTermsChecked(),dataQa:"uk-bacs-legal-checkbox",children:(0,Dr.jsx)("span",{className:(0,Rr.A)("body-4",{"text-line-clamp-8":!o}),"data-qa":"uk-bacs-legal-text-label",children:r.translate("ukBacsScreen.legalInformation.label",{companyName:s.companyName})})}),s.errors.termsChecked&&(0,Dr.jsx)("p",{id:`terms-checkbox-${c}-error`,className:"sr-only",children:r.translate("ukBacsScreen.legalInformation.error")}),!o&&(0,Dr.jsx)(yc,{size:20})]})}),(0,Dr.jsx)(Ll,{children:(0,Dr.jsx)(qu,{type:"submit",className:"btn-primary",processingState:s.processingState,errorTitle:s.payErrorMessage||r.safeTranslate("common.errorOccurredText"),dataQa:"uk-bacs-continue-button",trackingElement:"nextButton",children:r.translate("ukBacsScreen.button")})})]})},LC=e=>{const t=(0,El.Y)();return(0,Dr.jsxs)("svg",{className:e.className,"aria-hidden":e.ariaHidden&&!0,fill:"none",height:"96",viewBox:"0 0 96 96",width:"96",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[(0,Dr.jsxs)("linearGradient",{id:`a-${t}`,gradientUnits:"userSpaceOnUse",x1:"34",x2:"34",y1:"12",y2:"88",children:[(0,Dr.jsx)("stop",{offset:".360343",stopColor:"#e6f0ff"}),(0,Dr.jsx)("stop",{offset:"1",stopColor:"#c9deff"})]}),(0,Dr.jsxs)("linearGradient",{id:`b-${t}`,children:[(0,Dr.jsx)("stop",{offset:"0",stopColor:"#8dbaf8"}),(0,Dr.jsx)("stop",{offset:"1",stopColor:"#bfdaff",stopOpacity:"0"})]}),(0,Dr.jsx)("linearGradient",{id:`c-${t}`,gradientUnits:"userSpaceOnUse",x1:"25",x2:"34",xlinkHref:`#b-${t}`,y1:"24",y2:"24"}),(0,Dr.jsxs)("linearGradient",{id:`d-${t}`,children:[(0,Dr.jsx)("stop",{offset:"0",stopColor:"#739ad5"}),(0,Dr.jsx)("stop",{offset:"1",stopColor:"#c1dafc"})]}),(0,Dr.jsx)("linearGradient",{id:`e-${t}`,gradientUnits:"userSpaceOnUse",x1:"24.5",x2:"24.5",xlinkHref:`#d-${t}`,y1:"24",y2:"4"}),(0,Dr.jsxs)("linearGradient",{id:`f-${t}`,children:[(0,Dr.jsx)("stop",{offset:"0",stopColor:"#e8f4ff"}),(0,Dr.jsx)("stop",{offset:".756988",stopColor:"#4880d3",stopOpacity:".24"})]}),(0,Dr.jsx)("linearGradient",{id:`g-${t}`,gradientUnits:"userSpaceOnUse",x1:"25",x2:"25",xlinkHref:`#f-${t}`,y1:"4",y2:"24"}),(0,Dr.jsx)("linearGradient",{id:`h-${t}`,gradientUnits:"userSpaceOnUse",x1:"67",x2:"76",xlinkHref:`#b-${t}`,y1:"24",y2:"24"}),(0,Dr.jsx)("linearGradient",{id:`i-${t}`,gradientUnits:"userSpaceOnUse",x1:"66.5",x2:"66.5",xlinkHref:`#d-${t}`,y1:"24",y2:"4"}),(0,Dr.jsx)("linearGradient",{id:`j-${t}`,gradientUnits:"userSpaceOnUse",x1:"67",x2:"67",xlinkHref:`#f-${t}`,y1:"4",y2:"24"}),(0,Dr.jsx)("rect",{fill:"#a9cbff",height:"76",rx:"10",width:"92",x:"3",y:"16"}),(0,Dr.jsx)("rect",{fill:`url(#a-${t})`,height:"76",rx:"8",width:"90",x:"1",y:"12"}),(0,Dr.jsx)("path",{d:"m4.25439 86.4409c1.32765.9798 2.96908 1.559 4.74579 1.559h74.00002c4.4183 0 8-3.5817 8-8v-60c0-1.7767-.5792-3.4181-1.5591-4.7457.3599.843.5591 1.7711.5591 2.7457v62c0 3.866-3.134 7-7 7h-76.00002c-.97461 0-1.9027-.1991-2.74579-.559z",fill:"#dfecff"}),(0,Dr.jsx)("path",{clipRule:"evenodd",d:"m26.7465 16.6999c.7142-1.0714 1.2535-2.7243 1.2535-4.6999h6c0 2.9949-.8039 5.8421-2.2612 8.0281-1.4434 2.165-3.7668 3.9719-6.7388 3.9719v-6c.3417 0 1.0183-.2078 1.7465-1.3001z",fill:`url(#c-${t})`,fillRule:"evenodd"}),(0,Dr.jsx)("path",{d:"m25 4c-2.2091 0-4 1.79086-4 4v4h10v-4c0-2.20914-1.7909-4-4-4z",fill:"#739ad5"}),(0,Dr.jsx)("path",{d:"m25 4c-2.2091 0-4 1.79086-4 4v12c0 2.2091 1.7909 4 4 4s4-1.7909 4-4v-12c0-.55229.4477-1 1-1s1 .44771 1 1c0-2.20914-1.7909-4-4-4z",fill:`url(#e-${t})`}),(0,Dr.jsx)("path",{clipRule:"evenodd",d:"m25 5c-1.6569 0-3 1.34315-3 3v12c0 1.6569 1.3431 3 3 3s3-1.3431 3-3v-12c0-.87072.5564-1.61147 1.3331-1.8861-.55-.67948-1.3908-1.1139-2.3331-1.1139zm5.5007 1.06318c-.6822-1.23036-1.9942-2.06318-3.5007-2.06318h-2c-2.2091 0-4 1.79086-4 4v12c0 2.2091 1.7909 4 4 4s4-1.7909 4-4v-12c0-.49577.3608-.90727.8341-.9863.054-.00901.1094-.0137.1659-.0137.5523 0 1 .44771 1 1 0-.70264-.1812-1.36297-.4993-1.93682z",fill:`url(#g-${t})`,fillRule:"evenodd"}),(0,Dr.jsx)("path",{clipRule:"evenodd",d:"m68.7465 16.6999c.7142-1.0714 1.2535-2.7243 1.2535-4.6999h6c0 2.9949-.8039 5.8421-2.2612 8.0281-1.4434 2.165-3.7668 3.9719-6.7388 3.9719v-6c.3417 0 1.0183-.2078 1.7465-1.3001z",fill:`url(#h-${t})`,fillRule:"evenodd"}),(0,Dr.jsx)("path",{d:"m67 4c-2.2091 0-4 1.79086-4 4v4h10v-4c0-2.20914-1.7909-4-4-4z",fill:"#739ad5"}),(0,Dr.jsx)("path",{d:"m67 4c-2.2091 0-4 1.79086-4 4v12c0 2.2091 1.7909 4 4 4s4-1.7909 4-4v-12c0-.55229.4477-1 1-1s1 .44771 1 1c0-2.20914-1.7909-4-4-4z",fill:`url(#i-${t})`}),(0,Dr.jsx)("path",{clipRule:"evenodd",d:"m67 5c-1.6569 0-3 1.34315-3 3v12c0 1.6569 1.3431 3 3 3s3-1.3431 3-3v-12c0-.87072.5564-1.61147 1.3331-1.8861-.55-.67948-1.3908-1.1139-2.3331-1.1139zm5.5007 1.06318c-.6822-1.23036-1.9942-2.06318-3.5007-2.06318h-2c-2.2091 0-4 1.79086-4 4v12c0 2.2091 1.7909 4 4 4s4-1.7909 4-4v-12c0-.49577.3608-.90727.8341-.9863.054-.00901.1094-.0137.1659-.0137.5523 0 1 .44771 1 1 0-.70264-.1812-1.36297-.4993-1.93682z",fill:`url(#j-${t})`,fillRule:"evenodd"}),(0,Dr.jsxs)("g",{fill:"#b5cbee",children:[(0,Dr.jsx)("path",{d:"m14 51c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z"}),(0,Dr.jsx)("path",{d:"m32 51c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z"}),(0,Dr.jsx)("path",{d:"m50 51c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z"}),(0,Dr.jsx)("path",{d:"m68 51c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z"}),(0,Dr.jsx)("path",{d:"m14 69c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z"}),(0,Dr.jsx)("path",{d:"m32 69c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z"}),(0,Dr.jsx)("path",{d:"m50 69c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z"}),(0,Dr.jsx)("path",{d:"m68 69c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z"}),(0,Dr.jsx)("path",{d:"m14 33c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z"}),(0,Dr.jsx)("path",{d:"m32 33c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z"}),(0,Dr.jsx)("path",{d:"m50 33c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z"}),(0,Dr.jsx)("path",{d:"m68 33c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z"})]}),(0,Dr.jsx)("path",{d:"m13 50c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z",fill:"#f7faff"}),(0,Dr.jsx)("path",{d:"m31 50c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z",fill:"#f7faff"}),(0,Dr.jsx)("path",{d:"m49 50c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z",fill:"#f7faff"}),(0,Dr.jsx)("path",{d:"m67 50c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z",fill:"#f7faff"}),(0,Dr.jsx)("path",{d:"m13 68c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z",fill:"#f7faff"}),(0,Dr.jsx)("path",{d:"m31 68c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z",fill:"#f7faff"}),(0,Dr.jsx)("path",{d:"m49 68c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z",fill:"#f7faff"}),(0,Dr.jsx)("path",{d:"m67 68c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z",fill:"#f7faff"}),(0,Dr.jsx)("path",{d:"m13 32c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z",fill:"#f7faff"}),(0,Dr.jsx)("path",{d:"m31 32c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z",fill:"#f7faff"}),(0,Dr.jsx)("path",{d:"m49 32c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z",fill:"#f7faff"}),(0,Dr.jsx)("path",{d:"m67 32c0-1.1046.8954-2 2-2h8c1.1046 0 2 .8954 2 2v8c0 1.1046-.8954 2-2 2h-8c-1.1046 0-2-.8954-2-2z",fill:"#f7faff"}),(0,Dr.jsx)("path",{clipRule:"evenodd",d:"m60.9768 43.2791c3.0364.9078 5.2846 3.9193 4.9987 8.0868-.2477 3.6099-2.1691 7.1112-4.3664 9.9483-2.2111 2.855-4.8174 5.1863-6.6657 6.4679-.5554.3851-1.3173.2462-1.7017-.3103-.3845-.5565-.2458-1.3198.3096-1.705 1.6427-1.139 4.0669-3.2973 6.1252-5.9551 2.0723-2.6756 3.6593-5.7102 3.8586-8.6139.215-3.1337-1.4195-5.0206-3.2578-5.5701-1.83-.5472-4.1921.1325-5.6767 2.9002l-.6216 1.1588-1.1097-.7034c-1.879-1.1909-3.5844-1.2975-4.8373-.8748-1.2631.4261-2.1695 1.4163-2.4702 2.6611-.5706 2.3615 1.0339 6.6752 9.5698 9.5163.6411.2134.9881.907.7751 1.5493-.2129.6423-.9052.99-1.5463.7766-8.919-2.9687-12.2139-8.1234-11.1761-12.4189.5034-2.0837 2.0281-3.7192 4.067-4.4071 1.7439-.5884 3.7908-.4654 5.8467.5253 2.0401-2.8813 5.1448-3.8493 7.8788-3.032z",fill:"#fa4e77",fillRule:"evenodd"})]})},UC=(0,Ia.memo)(LC);var FC;!function(e){e.HIGH="high",e.LOW="low"}(FC||(FC={}));const jC=e=>{var t;const{state:n}=vc(ve.UPSELL),i=(0,Ia.useRef)(null);return(0,Hl.f)({ref:i,autoFocus:e.autoFocus,mode:ql.Q.DESKTOP}),(0,Dr.jsxs)(qu,{ref:i,className:"btn-danger d-flex items-center justify-center",processingState:n.processingState.highMonthly,disabled:e.disabled,onClick:()=>e.onClick(FC.HIGH),dataQa:"upsell-high",dataTestId:"upsell-high",trackingElement:null!==(t=e.trackingElement)&&void 0!==t?t:"",children:[(0,Dr.jsx)(al,{className:"icon-fill shrink-0 font-size-18 me-2","aria-hidden":!0}),(0,Dr.jsx)("span",{className:"text-truncate",children:n.highButtonText})]})},BC=(0,Ia.memo)(jC),GC=e=>{var t;const{state:n}=vc(ve.UPSELL),i=(0,Ia.useRef)(null);return(0,Hl.f)({ref:i,autoFocus:e.autoFocus,mode:ql.Q.DESKTOP}),(0,Dr.jsx)(qu,{ref:i,className:(0,Rr.A)("btn-primary",e.className),onClick:()=>e.onClick(FC.LOW),dataQa:"upsell-low-monthly",trackingElement:null!==(t=e.trackingElement)&&void 0!==t?t:"",dataTestId:"upsell-low",processingState:n.processingState.lowMonthly,disabled:e.disabled,children:n.lowButtonText})},qC=(0,Ia.memo)(GC),HC=e=>{const{amount:t,currency:n,trackingElement:i,disabled:s,onClick:a}=e,o=(0,Qr.t)();return(0,Dr.jsx)("button",{type:"button",className:"btn-link text-truncate",disabled:s,"data-tracking-element-name":i,"data-qa":"upsell-one-time","data-testid":"keep-one-time-link",onClick:a,children:o.translate("upsellScreen.button.keepOneTimeLink",{amount:o.formatCurrency(t,{currency:n,display:"floatcents"})})})},VC=(0,Ia.memo)(HC),KC=()=>{const{state:e}=vc(ve.UPSELL),t=(0,Ur.P)();return(0,Dr.jsx)("p",{className:(0,Rr.A)("text-center",t?"text-ellipsis":"text-line-clamp-6"),dangerouslySetInnerHTML:{__html:e.questionShortText},"data-testid":"upsell-screen-question-text"})},YC=(0,Ia.memo)(KC),zC=e=>{const{state:t,controller:n}=vc(ve.UPSELL),i=(0,Qr.t)(),s=(0,Ur.P)(),{tryToExpose:a}=function(){const e=(0,Ia.useRef)(!1),t=Ic().get(be.UPSELL_AMOUNTS_DATASET_MODAL_EXPERIMENT);return{tryToExpose:(0,Ia.useCallback)((n=>{e.current||n!==W.ANNUAL&&(t.tryToExpose(n),e.current=!0)}),[t])}}(),o=(0,Ia.useCallback)((e=>{n.confirm(e)}),[n]);return(0,Ia.useEffect)((()=>{n.setShowed()}),[n]),function(e){const t=(0,Ia.useRef)(!1),n=Ic().get(be.UPSELL_AMOUNTS_SUGGESTION_MODAL_EXPERIMENT);(0,Ia.useEffect)((()=>{t.current||(t.current=!0,n.tryExposure({preDonationUpsellTargetFrequency:e}))}),[n,e])}(t.targetFrequency),(0,Ia.useEffect)((()=>{a(t.targetFrequency)}),[t.targetFrequency,a]),(0,Dr.jsxs)("div",{className:"flow-screen","data-qa":"active-screen-upsell",children:[(0,Dr.jsx)("div",{className:"sr-only",role:"status","aria-live":"polite",children:i.translate("common.screenAriaLabel",{screenTitle:`${t.screenTitle}`})}),(0,Dr.jsx)(Kl,{title:t.screenTitle,titleTestId:"upsell-screen-title"}),(0,Dr.jsx)(Al,{className:(0,Rr.A)("px-body",{"py-6":t.isAnnualTribute&&!s,"py-8":!t.isAnnualTribute&&!s}),children:(0,Dr.jsxs)("div",{className:"fixed-container",children:[t.isAnnualTribute&&(0,Dr.jsx)(UC,{className:"d-block mx-auto mt-2 mb-6",ariaHidden:!0}),(0,Dr.jsx)(YC,{})]})}),(0,Dr.jsx)(Ll,{children:(0,Dr.jsxs)("div",{role:"group","aria-label":i.translate("upsellScreen.buttonGroupAriaLabel"),children:[t.highAmount&&(0,Dr.jsx)(BC,{amount:t.highAmount,autoFocus:!!t.highAmount,trackingElement:"oldUpsellHighMonthly",onClick:o,disabled:n.isLocked}),t.lowAmount&&(0,Dr.jsx)(qC,{onClick:o,className:"mt-2",amount:t.lowAmount,autoFocus:!t.highAmount,trackingElement:"oldUpsellLowMonthly",disabled:n.isLocked}),(0,Dr.jsx)("div",{className:"d-flex justify-center mt-4",children:(0,Dr.jsx)(VC,{amount:t.upsell.fromAmount,currency:t.currency,onClick:()=>o(null),trackingElement:"oldUpsellKeep",disabled:n.isLocked})})]})})]})},WC=(0,Ia.memo)(zC),$C={boxShadow:"inset 0 0 0 1px #c7cdd6"},XC={boxShadow:"inset 0 -1px 0 0 #c7cdd6"},QC={letterSpacing:"-0.2em"},ZC=e=>{const t=Yl();return(0,Dr.jsxs)("svg",{className:(0,Rr.A)(e.className),"aria-hidden":!!e.ariaHidden||void 0,fill:"none",height:e.height||128,viewBox:"0 0 158 128",width:e.width||158,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",children:[(0,Dr.jsxs)("filter",{id:`a-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"33",width:"11",x:"98.4998",y:"59",children:[(0,Dr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Dr.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Dr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Dr.jsx)("feOffset",{dy:"-1"}),(0,Dr.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Dr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.725694 0 0 0 0 0.753183 0 0 0 0 0.791667 0 0 0 1 0"}),(0,Dr.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_16856_24583"})]}),(0,Dr.jsxs)("filter",{id:`b-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"33",width:"11",x:"73.4998",y:"59",children:[(0,Dr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Dr.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Dr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Dr.jsx)("feOffset",{dy:"-1"}),(0,Dr.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Dr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.725694 0 0 0 0 0.753183 0 0 0 0 0.791667 0 0 0 1 0"}),(0,Dr.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_16856_24583"})]}),(0,Dr.jsxs)("filter",{id:`c-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"6",width:"91",x:"33.4998",y:"103",children:[(0,Dr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Dr.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Dr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Dr.jsx)("feOffset",{dy:"-1"}),(0,Dr.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Dr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.725694 0 0 0 0 0.753183 0 0 0 0 0.791667 0 0 0 1 0"}),(0,Dr.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_16856_24583"})]}),(0,Dr.jsxs)("filter",{id:`d-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"6",width:"79",x:"39.4998",y:"97",children:[(0,Dr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Dr.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Dr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Dr.jsx)("feOffset",{dy:"-1"}),(0,Dr.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Dr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.725694 0 0 0 0 0.753183 0 0 0 0 0.791667 0 0 0 1 0"}),(0,Dr.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_16856_24583"})]}),(0,Dr.jsxs)("filter",{id:`e-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"30",width:"90",x:"34.4998",y:"19",children:[(0,Dr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Dr.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Dr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Dr.jsx)("feOffset",{dy:"-1"}),(0,Dr.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Dr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.725694 0 0 0 0 0.753183 0 0 0 0 0.791667 0 0 0 1 0"}),(0,Dr.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_16856_24583"})]}),(0,Dr.jsxs)("filter",{id:`f-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"5",width:"15",x:"96.4998",y:"92",children:[(0,Dr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Dr.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Dr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Dr.jsx)("feOffset",{dy:"-1"}),(0,Dr.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Dr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.725694 0 0 0 0 0.753183 0 0 0 0 0.791667 0 0 0 1 0"}),(0,Dr.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_16856_24583"})]}),(0,Dr.jsxs)("filter",{id:`g-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"5",width:"15",x:"96.4998",y:"54",children:[(0,Dr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Dr.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Dr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Dr.jsx)("feOffset",{dy:"-1"}),(0,Dr.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Dr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.725694 0 0 0 0 0.753183 0 0 0 0 0.791667 0 0 0 1 0"}),(0,Dr.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_16856_24583"})]}),(0,Dr.jsxs)("filter",{id:`h-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"5",width:"15",x:"71.4998",y:"92",children:[(0,Dr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Dr.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Dr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Dr.jsx)("feOffset",{dy:"-1"}),(0,Dr.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Dr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.725694 0 0 0 0 0.753183 0 0 0 0 0.791667 0 0 0 1 0"}),(0,Dr.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_16856_24583"})]}),(0,Dr.jsxs)("filter",{id:`i-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"5",width:"15",x:"71.4998",y:"54",children:[(0,Dr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Dr.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Dr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Dr.jsx)("feOffset",{dy:"-1"}),(0,Dr.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Dr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.725694 0 0 0 0 0.753183 0 0 0 0 0.791667 0 0 0 1 0"}),(0,Dr.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_16856_24583"})]}),(0,Dr.jsxs)("filter",{id:`j-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"33",width:"11",x:"48.4998",y:"59",children:[(0,Dr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Dr.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Dr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Dr.jsx)("feOffset",{dy:"-1"}),(0,Dr.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Dr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.725694 0 0 0 0 0.753183 0 0 0 0 0.791667 0 0 0 1 0"}),(0,Dr.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_16856_24583"})]}),(0,Dr.jsxs)("filter",{id:`k-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"5",width:"15",x:"46.4998",y:"92",children:[(0,Dr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Dr.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Dr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Dr.jsx)("feOffset",{dy:"-1"}),(0,Dr.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Dr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.725694 0 0 0 0 0.753183 0 0 0 0 0.791667 0 0 0 1 0"}),(0,Dr.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_16856_24583"})]}),(0,Dr.jsxs)("filter",{id:`l-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"5",width:"15",x:"46.4998",y:"54",children:[(0,Dr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Dr.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Dr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Dr.jsx)("feOffset",{dy:"-1"}),(0,Dr.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Dr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.725694 0 0 0 0 0.753183 0 0 0 0 0.791667 0 0 0 1 0"}),(0,Dr.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_16856_24583"})]}),(0,Dr.jsxs)("filter",{id:`m-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"5",width:"82",x:"38.4998",y:"49",children:[(0,Dr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Dr.jsx)("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),(0,Dr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Dr.jsx)("feOffset",{dy:"-1"}),(0,Dr.jsx)("feComposite",{in2:"hardAlpha",k2:"-1",k3:"1",operator:"arithmetic"}),(0,Dr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.725694 0 0 0 0 0.753183 0 0 0 0 0.791667 0 0 0 1 0"}),(0,Dr.jsx)("feBlend",{in2:"shape",mode:"normal",result:"effect1_innerShadow_16856_24583"})]}),(0,Dr.jsxs)("filter",{id:`n-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"66.4238",width:"51.5996",x:"9.14014",y:"24.7031",children:[(0,Dr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Dr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Dr.jsx)("feOffset",{dx:".5",dy:".5"}),(0,Dr.jsx)("feGaussianBlur",{stdDeviation:"1"}),(0,Dr.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,Dr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.06125 0 0 0 0 0.525 0 0 0 0 0.132596 0 0 0 1 0"}),(0,Dr.jsx)("feBlend",{in2:"BackgroundImageFix",mode:"normal",result:"effect1_dropShadow_16856_24583"}),(0,Dr.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_16856_24583",mode:"normal",result:"shape"})]}),(0,Dr.jsxs)("filter",{id:`o-${t}`,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"34.9189",width:"28.3767",x:"20.7512",y:"39.0498",children:[(0,Dr.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,Dr.jsx)("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),(0,Dr.jsx)("feOffset",{dx:".5",dy:".5"}),(0,Dr.jsx)("feGaussianBlur",{stdDeviation:"1"}),(0,Dr.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,Dr.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.160784 0 0 0 0 0.619608 0 0 0 0 0.231373 0 0 0 1 0"}),(0,Dr.jsx)("feBlend",{in2:"BackgroundImageFix",mode:"normal",result:"effect1_dropShadow_16856_24583"}),(0,Dr.jsx)("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_16856_24583",mode:"normal",result:"shape"})]}),(0,Dr.jsxs)("linearGradient",{id:`p-${t}`,gradientUnits:"userSpaceOnUse",x1:"7.07017",x2:"54.682",y1:"32.2054",y2:"71.3086",children:[(0,Dr.jsx)("stop",{offset:"0",stopColor:"#beffd2"}),(0,Dr.jsx)("stop",{offset:"1",stopColor:"#beffd2",stopOpacity:".15"})]}),(0,Dr.jsxs)("linearGradient",{id:`q-${t}`,gradientUnits:"userSpaceOnUse",x1:"18.1884",x2:"39.841",y1:"54.9202",y2:"81.3544",children:[(0,Dr.jsx)("stop",{offset:"0",stopColor:"#ebfff1"}),(0,Dr.jsx)("stop",{offset:"1",stopColor:"#ebfff1",stopOpacity:"0"})]}),(0,Dr.jsx)("g",{filter:`url(#a-${t})`,children:(0,Dr.jsx)("path",{d:"m98.4998 59h11v33h-11z",fill:"#dde0eb"})}),(0,Dr.jsx)("g",{filter:`url(#b-${t})`,children:(0,Dr.jsx)("path",{d:"m73.4998 59h11v33h-11z",fill:"#dde0eb"})}),(0,Dr.jsx)("g",{filter:`url(#c-${t})`,children:(0,Dr.jsx)("path",{d:"m33.4998 103h91v6h-91z",fill:"#c9cfd7"})}),(0,Dr.jsx)("g",{filter:`url(#d-${t})`,children:(0,Dr.jsx)("path",{d:"m39.4998 97h79v6h-79z",fill:"#dde0eb"})}),(0,Dr.jsx)("g",{filter:`url(#e-${t})`,children:(0,Dr.jsx)("path",{d:"m34.4998 43.2308 45-24.2308 45.0002 24.2308v5.7692h-90.0002z",fill:"#c9cfd7"})}),(0,Dr.jsx)("path",{d:"m48.4998 43 31-16 31.0002 16z",fill:"#dde0eb"}),(0,Dr.jsx)("g",{filter:`url(#f-${t})`,children:(0,Dr.jsx)("path",{d:"m96.4998 94c0-1.1046.8954-2 2-2h11.0002c1.104 0 2 .8954 2 2v3h-15.0002z",fill:"#c9cfd7"})}),(0,Dr.jsx)("g",{filter:`url(#g-${t})`,children:(0,Dr.jsx)("path",{d:"m96.4998 57c0 1.1046.8954 2 2 2h11.0002c1.104 0 2-.8954 2-2v-3h-15.0002z",fill:"#c9cfd7"})}),(0,Dr.jsx)("g",{filter:`url(#h-${t})`,children:(0,Dr.jsx)("path",{d:"m71.4998 94c0-1.1046.8954-2 2-2h11c1.1045 0 2 .8954 2 2v3h-15z",fill:"#c9cfd7"})}),(0,Dr.jsx)("g",{filter:`url(#i-${t})`,children:(0,Dr.jsx)("path",{d:"m71.4998 57c0 1.1046.8954 2 2 2h11c1.1045 0 2-.8954 2-2v-3h-15z",fill:"#c9cfd7"})}),(0,Dr.jsx)("g",{filter:`url(#j-${t})`,children:(0,Dr.jsx)("path",{d:"m48.4998 59h11v33h-11z",fill:"#dde0eb"})}),(0,Dr.jsx)("g",{filter:`url(#k-${t})`,children:(0,Dr.jsx)("path",{d:"m46.4998 94c0-1.1046.8954-2 2-2h11c1.1045 0 2 .8954 2 2v3h-15z",fill:"#c9cfd7"})}),(0,Dr.jsx)("g",{filter:`url(#l-${t})`,children:(0,Dr.jsx)("path",{d:"m46.4998 57c0 1.1046.8954 2 2 2h11c1.1045 0 2-.8954 2-2v-3h-15z",fill:"#c9cfd7"})}),(0,Dr.jsx)("g",{filter:`url(#m-${t})`,children:(0,Dr.jsx)("path",{d:"m38.4998 49h82.0002l-2.216 5h-77.568z",fill:"#dde0eb"})}),(0,Dr.jsx)("path",{d:"m35.8866 19.5614c-.9308-.3612-1.963-.3612-2.8938 0l-28.21625 10.9479c-.7695.2985-1.27655 1.0392-1.27655 1.8645v25.0408c0 24.0092 24.3098 38.4147 30.9397 38.4147 6.63 0 30.9398-14.4055 30.9398-38.4147v-25.0408c0-.8253-.5071-1.566-1.2766-1.8645z",fill:"#3ac24f"}),(0,Dr.jsxs)("g",{filter:`url(#n-${t})`,children:[(0,Dr.jsx)("path",{clipRule:"evenodd",d:"m10.6401 35.6313v21.5716c0 9.4566 4.6827 17.33 10.5723 23.0788 2.9207 2.851 6.0022 5.0351 8.632 6.4779 1.3139.7208 2.4515 1.2217 3.3408 1.5298.7584.2627 1.1579.3229 1.2493.3367l.0054.0008.0054-.0008c.0915-.0138.4909-.074 1.2493-.3367.8893-.3081 2.0269-.809 3.3408-1.5298 2.6298-1.4428 5.7113-3.6269 8.6321-6.4779 5.8896-5.7488 10.5722-13.6222 10.5722-23.0788v-21.5716l-23.7998-9.4282z",fill:"#3bcb53",fillRule:"evenodd"}),(0,Dr.jsx)("path",{d:"m34.4399 87.9681c-.155-.0285-.4945-.1033-1.0419-.2929-.8485-.294-1.9525-.7786-3.2409-1.4855-2.5788-1.4148-5.6126-3.5638-8.4907-6.3731-5.8068-5.668-10.3763-13.3839-10.3763-22.6137v-21.13l23.1498-9.1706 23.1498 9.1706v21.13c0 9.2298-4.5694 16.9457-10.3762 22.6137-2.8781 2.8093-5.9119 4.9583-8.4907 6.3731-1.2884.7069-2.3924 1.1915-3.2409 1.4855-.5475.1896-.887.2644-1.042.2929z",stroke:`url(#p-${t})`,strokeWidth:"1.3"})]}),(0,Dr.jsxs)("g",{filter:`url(#o-${t})`,children:[(0,Dr.jsx)("path",{d:"m44.8987 53.0362h-.618v-2.8197c0-5.2152-4.2452-9.5718-9.5513-9.6648-.1449-.0025-.4346-.0025-.5796 0-5.3061.093-9.5513 4.4496-9.5513 9.6648v2.8197h-.6181c-.9523 0-1.7292.9581-1.7292 2.1413v14.1425c0 1.1819.7769 2.1489 1.7293 2.1489h20.9182c.9524 0 1.7293-.967 1.7293-2.1489v-14.1425c0-1.1832-.7769-2.1413-1.7293-2.1413zm-8.4993 9.1982v4.2733c0 .4893-.4203.9034-.9226.9034h-2.0743c-.5024 0-.9226-.4141-.9226-.9034v-4.2733c-.4872-.4675-.7708-1.114-.7708-1.8292 0-1.3552 1.0745-2.5197 2.4408-2.5735.1448-.0057.4348-.0057.5796 0 1.3663.0538 2.4408 1.2183 2.4408 2.5735-.0001.7152-.2837 1.3617-.7709 1.8292zm3.8082-9.1982h-5.4782-.5796-5.4781v-2.8197c0-3.1066 2.5897-5.6753 5.7679-5.6753s5.768 2.5687 5.768 5.6753z",fill:"#beffd2"}),(0,Dr.jsx)("path",{d:"m43.7807 53.0362v.5h.5.618c.5823 0 1.2293.6298 1.2293 1.6413v14.1425c0 1.0129-.6492 1.6489-1.2293 1.6489h-20.9182c-.5801 0-1.2293-.636-1.2293-1.6489v-14.1425c0-1.0116.647-1.6413 1.2292-1.6413h.6181.5v-.5-2.8197c0-4.9418 4.026-9.0766 9.0601-9.1649.1391-.0024.4229-.0024.5621 0 5.034.0883 9.06 4.2231 9.06 9.1649zm-6.1104 7.3691v-.0001c0-1.6134-1.2764-3.0083-2.9211-3.0731-.1579-.0063-.4611-.0063-.619 0-1.6447.0648-2.9211 1.4597-2.9211 3.0731 0 .7736.28 1.4858.7708 2.0312v4.0713c0 .7744.6531 1.4034 1.4226 1.4034h2.0743c.7695 0 1.4226-.629 1.4226-1.4034v-4.0713c.4907-.5454.7708-1.2576.7709-2.0311zm-9.4986-7.3691v.5h.5 5.4781.5796 5.4782.5v-.5-2.8197c0-3.3892-2.8202-6.1753-6.268-6.1753-3.4479 0-6.2679 2.7861-6.2679 6.1753z",stroke:`url(#q-${t})`})]})]})},JC=(0,Ia.memo)(ZC);var eP;!function(e){e.INDIVIDUAL="individual",e.COMPANY="company"}(eP||(eP={}));const{useAddFieldToScroll:tP,useScrollToFieldsTrigger:nP,ScrollToFieldsProvider:iP}=(0,uu.J)(),sP=e=>{var t,n,i;const{state:s,controller:a}=vc(ve.US_BANK_ACCOUNT),o=(0,Ur.P)(),r=(0,Qr.t)(),c=Yl(),l=s.errors.routingNumber,u=s.errors.accountNumber,d=s.errors.accountHolderName,h=nP(),m=Cu(s.shakeKey,0!==s.shakeKey),p=(0,jl.k)(),g=(0,Ia.useRef)(null),y=(0,Ia.useRef)(null),f=(0,Ia.useRef)(null),[E,S]=(0,Ia.useState)(!1),[v,A]=(0,Ia.useState)(!1),[C,P]=(0,Ia.useState)(!1);tP(g,(e=>Boolean(e.routingNumber))),tP(y,(e=>Boolean(e.accountNumber))),tP(f,(e=>Boolean(e.accountHolderName))),(0,Ia.useEffect)((()=>{if(s.routingNumber||s.accountNumber||s.accountHolderName)return;if(s.livemode||!p)return;if(!g.current||!y.current||!f.current)throw new Error("Input fields refs are not defined");const e=a.fillDemoData({routingNumber:g.current,accountNumber:y.current,accountHolderName:f.current});return()=>{e()}}),[p,a,s.livemode]);const N=(0,Ia.useCallback)((e=>{const t=e.target.value;a.changeRoutingNumber(t),y.current&&9===t.length&&y.current.focus()}),[a]),b=(0,Ia.useCallback)((e=>{const t=e.target.value;a.changeAccountNumber(t),f.current&&17===t.length&&f.current.focus()}),[a]);return(0,Dr.jsxs)("form",{onSubmit:e=>{h(),e.preventDefault(),a.leave()},className:"flow-screen","data-qa":"active-screen-routing-account",children:[(0,Dr.jsx)("div",{className:"sr-only",role:"status","aria-live":"polite",children:r.translate("common.screenAriaLabel",{screenTitle:`${r.translate("usBankAccountScreen.title")}`})}),(0,Dr.jsx)(Kl,{title:r.translate("usBankAccountScreen.title")}),(0,Dr.jsx)(Al,{className:(0,Rr.A)("px-body d-flex flex-column",{"pt-5 pb-7":!o}),children:(0,Dr.jsxs)("div",{className:"fixed-container grow-1 min-h-0 d-flex flex-column",children:[(0,Dr.jsx)("p",{className:(0,Rr.A)("shrink-0 text-center",o?"text-ellipsis":"text-line-clamp-3"),children:r.translate("usBankAccountScreen.description.desktop")}),(0,Dr.jsx)(yc,{size:o?28:20,sizeMin:6}),(0,Dr.jsx)(Ly,{className:"shrink-0 mx-auto",firstNumber:"119562715",secondNumber:"891562828814208",firstNumberHighlighted:E,secondNumberHighlighted:v}),(0,Dr.jsx)(yc,{size:o?28:20,sizeMin:6}),(0,Dr.jsxs)("div",{className:(0,Rr.A)("group-stacked-vertical shrink-0",{shake:m}),children:[(0,Dr.jsx)(fu.t,{id:`routing-number-${c}`,className:(0,Rr.A)("text-sans-serif",{"pe-10":l}),formLabelClass:(0,Rr.A)({"pe-6":l}),formGroupClass:"group-stacked-item",label:r.translate("usBankAccountScreen.routingNumber.label"),labelFloating:!0,autoFocus:!0,autoFocusMode:ql.Q.ALL,setRef:g,error:l,placeholder:r.translate("usBankAccountScreen.routingNumber.label"),value:null!==(t=s.routingNumber)&&void 0!==t?t:"",maxLength:9,disabled:s.locked,"aria-required":!0,"aria-describedby":`routing-number-${c}-error`,onChange:N,onKeyPress:IC,onFocus:()=>S(!0),onBlur:()=>S(!1),dataQa:"routing-number",inputMode:"numeric",children:l&&(0,Dr.jsx)(Eu.U,{className:"p-abs inset-centered-end z-index-5 me-4",showTooltip:E,children:(0,Dr.jsx)("p",{id:`routing-number-${c}-error`,children:r.translate("usBankAccountScreen.routingNumber.error")})})}),(0,Dr.jsx)(fu.t,{id:`account-number-${c}`,className:(0,Rr.A)("text-sans-serif",{"pe-10":u}),formLabelClass:(0,Rr.A)({"pe-6":u}),formGroupClass:"group-stacked-item",label:r.translate("usBankAccountScreen.accountNumber.label"),labelFloating:!0,setRef:y,error:u,placeholder:r.translate("usBankAccountScreen.accountNumber.label"),value:null!==(n=s.accountNumber)&&void 0!==n?n:"",maxLength:17,minLength:4,disabled:s.locked,"aria-required":!0,"aria-describedby":`account-number-${c}-error`,onKeyPress:IC,onChange:b,onFocus:()=>A(!0),onBlur:()=>A(!1),dataQa:"ach-account-number",inputMode:"numeric",children:u&&(0,Dr.jsx)(Eu.U,{className:"p-abs inset-centered-end z-index-5 me-4",showTooltip:v,children:(0,Dr.jsx)("p",{id:`account-number-${c}-error`,children:r.translate("usBankAccountScreen.accountNumber.error")})})})]}),(0,Dr.jsx)(yc,{size:16,sizeMin:6}),(0,Dr.jsx)(fu.t,{id:`account-holder-name-${c}`,className:(0,Rr.A)({"pe-10":d}),formLabelClass:(0,Rr.A)({"pe-6":d}),formGroupClass:(0,Rr.A)("shrink-0",{shake:m}),label:r.translate("usBankAccountScreen.accountHolderName.label"),labelFloating:!0,setRef:f,error:d,placeholder:r.translate("usBankAccountScreen.accountHolderName.label"),minLength:1,value:null!==(i=s.accountHolderName)&&void 0!==i?i:"",disabled:s.locked,"aria-describedby":`account-holder-name-${c}-error`,onChange:e=>a.changeAccountHolderName(e.target.value),onFocus:()=>P(!0),onBlur:()=>P(!1),dataQa:"us-bank-account-holder-name",children:d&&(0,Dr.jsx)(Eu.U,{className:"p-abs inset-centered-end z-index-5 me-4",showTooltip:C,children:(0,Dr.jsx)("p",{id:`account-holder-name-${c}-error`,children:r.translate("usBankAccountScreen.accountHolderName.error")})})}),(0,Dr.jsx)(yc,{size:20,sizeMin:6}),(0,Dr.jsxs)("div",{role:"radiogroup",className:"d-flex justify-center shrink-0","aria-label":r.translate("usBankAccountScreen.accountType.label"),children:[(0,Dr.jsx)(Rh,{radioName:"accountType",className:"max-w-50 me-3",checked:s.accountType===eP.INDIVIDUAL,radioValue:s.accountType,disabled:s.locked,onChange:()=>a.changeAccountType(eP.INDIVIDUAL),dataQa:"personal-bank-account",trackingElement:"personalBankAccount",children:(0,Dr.jsx)("span",{className:"text-truncate",children:r.translate("usBankAccountScreen.accountType.personal")})}),(0,Dr.jsx)(Rh,{radioName:"accountType",className:"max-w-50 ms-3",checked:s.accountType===eP.COMPANY,radioValue:s.accountType,disabled:s.locked,onChange:()=>a.changeAccountType(eP.COMPANY),dataQa:"business-bank-account",trackingElement:"businessBankAccount",children:(0,Dr.jsx)("span",{className:"text-truncate",children:r.translate("usBankAccountScreen.accountType.business")})})]})]})}),(0,Dr.jsx)(Ll,{children:(0,Dr.jsx)(qu,{type:"submit",className:"btn-primary",processingState:s.processingState,errorTitle:s.errorMessage||r.safeTranslate("common.errorOccurredText"),dataQa:"ach-continue",trackingElement:"nextButton",children:r.translate("usBankAccountScreen.button")})})]})},aP={filter:"drop-shadow(rgba(109, 141, 177, 0.5) 0 1px 5px)"},oP={letterSpacing:"-0.2em"},rP={background:"#E3EDF6",height:"12px"},cP=Object.assign(Object.assign({},rP),{width:"146px"}),lP=Object.assign(Object.assign({},rP),{width:"46px"}),uP=e=>{const t=(0,Qr.t)(),n=(0,cc.Q)(),i=(0,Ur.P)();return(0,Dr.jsxs)("div",{className:"fixed-container",children:[e.showAmountExample&&(0,Dr.jsx)(uc,{as:"p",className:(0,Rr.A)("text-center",i?"text-ellipsis":"text-line-clamp-7"),token:"usBankAccountGuideScreen.description.amounts",params:{amount:t.formatCurrency(100,{currency:"USD"})}}),e.showDescriptorCodeExample&&(0,Dr.jsx)(uc,{as:"p",className:(0,Rr.A)("text-center",i?"text-ellipsis":"text-line-clamp-7"),token:"usBankAccountGuideScreen.description.descriptorCode"}),(0,Dr.jsx)("div",{className:"mt-5",style:aP,children:(0,Dr.jsxs)("div",{className:"us-bank-account-receipt px-6 pt-4 bg-blue-5 border-top-radius-4",children:[(0,Dr.jsx)("p",{className:"text-center text-truncate",children:t.translate("usBankAccountGuideScreen.bankStatement")}),(0,Dr.jsx)("div",{className:"border-top border-gray-20 mt-4"}),e.showAmountExample&&(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsxs)("div",{className:(0,Rr.A)("d-flex mt-3",{"text-start":n}),dir:"ltr",children:[(0,Dr.jsx)("div",{className:"grow-1 overflow-hidden",children:(0,Dr.jsxs)("div",{className:(0,Rr.A)("body-3 text-gray-60",{"text-line-clamp-2":!i}),children:[e.statementDescriptor,":"]})}),(0,Dr.jsx)("div",{className:"body-2 shrink-0 text-sans-serif ms-1",dangerouslySetInnerHTML:{__html:e.amountExample}})]}),(0,Dr.jsx)("div",{className:"border-top border-gray-20 my-3"}),(0,Dr.jsxs)("div",{className:(0,Rr.A)("d-flex",{"text-start":n}),dir:"ltr",children:[(0,Dr.jsx)("div",{className:"grow-1 overflow-hidden",children:(0,Dr.jsxs)("div",{className:(0,Rr.A)("body-3 text-gray-60",{"text-line-clamp-2":!i}),children:[e.statementDescriptor,":"]})}),(0,Dr.jsx)("div",{className:"body-2 shrink-0 text-sans-serif ms-1",dangerouslySetInnerHTML:{__html:e.amountExample}})]}),(0,Dr.jsx)("div",{className:"border-top border-gray-20 my-3"})]}),e.showDescriptorCodeExample&&(0,Dr.jsxs)(Dr.Fragment,{children:[(0,Dr.jsxs)("div",{className:(0,Rr.A)("d-flex mt-3",{"text-start":n}),dir:"ltr",children:[(0,Dr.jsxs)("div",{className:"d-flex flex-wrap grow-1",children:[(0,Dr.jsxs)("div",{className:(0,Rr.A)("body-3 text-gray-60 me-1",i?"overflow-hidden":"text-line-clamp-2"),children:[e.statementDescriptor,":"]}),(0,Dr.jsxs)("div",{className:"d-flex label-4 shrink-0 text-nowrap",children:[e.descriptorCodeExample.prefix,(0,Dr.jsx)("span",{className:"d-inline-block font-size-18",style:oP,"aria-hidden":!0,children:"∙∙∙∙"})]})]}),(0,Dr.jsx)("div",{className:"body-3 text-gray-60 shrink-0 text-sans-serif ms-1",dangerouslySetInnerHTML:{__html:e.descriptorCodeExample.amount}})]}),(0,Dr.jsx)("div",{className:"border-top border-gray-20 mt-3"}),(0,Dr.jsxs)("div",{className:"d-flex justify-between mt-4 mb-3",dir:"ltr",children:[(0,Dr.jsx)("div",{className:"border-radius-8",style:cP}),(0,Dr.jsx)("div",{className:"border-radius-8",style:lP})]})]})]})})]})},dP=(0,Ia.memo)(uP),hP={[ve.DONATE]:()=>{const{state:e}=vc(ve.DONATE);return(0,Dr.jsx)(lf,{state:e.errors,children:(0,Dr.jsx)(Vf,{})})},[ve.UPSELL]:WC,[ve.PAYMENT_OPTIONS]:e=>{const{stripeElementsCardState:t,setStripeElementsCardState:n}=NE();return(0,Dr.jsx)(KS,{state:t,children:(0,Dr.jsx)(fC,Object.assign({},e,{stripeElementsCardState:t,setStripeElementsCardState:n}))})},[ve.US_BANK_ACCOUNT]:e=>{const{state:t}=vc(ve.US_BANK_ACCOUNT);return(0,Dr.jsx)(iP,{state:t.errors,children:(0,Dr.jsx)(sP,Object.assign({},e))})},[ve.US_BANK_ACCOUNT_DONATE_OPTIONS]:e=>{const{state:t,controller:n}=vc(ve.US_BANK_ACCOUNT_DONATE_OPTIONS),i=(0,Qr.t)(),s=(0,Ur.P)();return(0,Dr.jsxs)("div",{className:"flow-screen","data-qa":"active-screen-link-to-bank",children:[(0,Dr.jsx)("div",{className:"sr-only",role:"status","aria-live":"polite",children:i.translate("common.screenAriaLabel",{screenTitle:`${i.translate("usBankAccountDonateOptionsScreen.title")}`})}),(0,Dr.jsx)(Kl,{title:i.translate("usBankAccountDonateOptionsScreen.title")}),(0,Dr.jsx)(Al,{className:(0,Rr.A)("px-body items-center",s?"pb-3":"justify-center py-4"),children:(0,Dr.jsxs)("div",{className:"fixed-container",children:[(0,Dr.jsx)(JC,{className:"d-block mx-auto",ariaHidden:!0}),(0,Dr.jsx)("p",{className:"text-center mt-4",children:i.translate("usBankAccountDonateOptionsScreen.description")})]})}),(0,Dr.jsxs)(Ll,{children:[(0,Dr.jsx)(qu,{className:"btn-primary",processingState:t.processingState,errorTitle:t.loginToBankError,disabled:t.locked,dataQa:"authorize-bank-button",trackingElement:"authorizeBankButton",onClick:()=>n.authorizeToBank(),children:i.translate("usBankAccountDonateOptionsScreen.button.authorize")}),(0,Dr.jsx)("button",{type:"button",className:"btn btn-default mt-3",disabled:t.locked,"data-qa":"routing-account-button","data-tracking-element-name":"routingAccountButton",onClick:()=>n.fillDetailsManually(),children:i.translate("usBankAccountDonateOptionsScreen.button.routing")})]})]})},[ve.US_BANK_ACCOUNT_CONFIRMATION]:()=>{const{state:e,controller:t}=vc(ve.US_BANK_ACCOUNT_CONFIRMATION),n=(0,Ur.P)(),i=(0,Qr.t)();return(0,Dr.jsxs)("div",{className:"flow-screen",children:[(0,Dr.jsx)(Kl,{title:i.translate("usBankAccountConfirmationScreen.title"),titleQa:"us-bank-account-confirmation-title"}),(0,Dr.jsx)(Gl,{children:i.translate("common.screenAriaLabel",{screenTitle:`${i.translate("usBankAccountConfirmationScreen.title")}`})}),(0,Dr.jsx)(Al,{className:(0,Rr.A)("px-body d-flex flex-column",{"py-5":!n}),children:(0,Dr.jsxs)("div",{className:"fixed-container grow-1 d-flex flex-column min-h-0",children:[(0,Dr.jsxs)("div",{className:"shrink-0 bg-white border-radius-8",style:$C,children:[(0,Dr.jsxs)("div",{className:"px-3 py-2",style:XC,children:[(0,Dr.jsx)("p",{className:"caption-1 text-truncate text-gray-60",children:i.translate("usBankAccountConfirmationScreen.agreementDate")}),(0,Dr.jsx)("p",{className:"label-3 text-truncate","data-qa":"agreement-date-label",children:e.usBankAccount.agreementDate})]}),(0,Dr.jsxs)("div",{className:"px-3 py-2",style:XC,children:[(0,Dr.jsx)("p",{className:"caption-1 text-truncate text-gray-60",children:i.translate("usBankAccountConfirmationScreen.accountHolderName")}),(0,Dr.jsx)("p",{className:"label-3 text-truncate","data-qa":"account-holder-name-label",children:e.usBankAccount.accountHolderName})]}),(0,Dr.jsxs)("div",{className:"px-3 py-2",style:XC,children:[(0,Dr.jsx)("p",{className:"caption-1 text-truncate text-gray-60",children:i.translate("usBankAccountConfirmationScreen.financialInstitution")}),(0,Dr.jsx)("p",{className:"label-3 text-truncate","data-qa":"financial-institution-label",children:e.usBankAccount.financialInstitution})]}),(0,Dr.jsxs)("div",{className:"px-3 py-2",style:XC,children:[(0,Dr.jsx)("p",{className:"caption-1 text-truncate text-gray-60",children:i.translate("usBankAccountConfirmationScreen.routingNumber")}),(0,Dr.jsx)("p",{className:"label-3 text-truncate","data-qa":"routing-number-label",children:e.usBankAccount.routingNumber})]}),(0,Dr.jsxs)("div",{className:"px-3 py-2",children:[(0,Dr.jsx)("p",{className:"caption-1 text-truncate text-gray-60",children:i.translate("usBankAccountConfirmationScreen.accountNumber")}),(0,Dr.jsxs)("p",{className:"label-3 d-flex items-start text-truncate",children:[(0,Dr.jsx)("span",{className:"font-size-18 shrink-0 me-1 font-weight-400",style:QC,"aria-hidden":!0,children:"∙∙∙∙"}),(0,Dr.jsx)("span",{className:"shrink-0","data-qa":"account-number-last4-label",children:e.usBankAccount.accountNumberLast4})]})]})]}),(0,Dr.jsx)("div",{className:n?"mt-5":"grow-1 min-h-0 p-rel mt-4",children:(0,Dr.jsx)("div",{className:(0,Rr.A)({"p-abs inset-0 scroll-box":!n}),children:(0,Dr.jsx)("p",{className:(0,Rr.A)("body-4 text-gray-80 text-ellipsis",{"px-3 py-2-5":!n,"pointer-events-none":e.locked}),children:e.isRecurring?i.translate("usBankAccountConfirmationScreen.mandateRecurring",{companyName:e.companyName}):i.translate("usBankAccountConfirmationScreen.mandate",{companyName:e.companyName,payButtonTitle:i.translate("usBankAccountConfirmationScreen.button")})})})})]})}),(0,Dr.jsx)(Ll,{children:(0,Dr.jsx)(qu,{className:"btn-primary",processingState:e.processingState,errorTitle:e.payErrorMessage,onClick:()=>{t.leave()},dataQa:"us-bank-account-pay-button",trackingElement:"nextButton",children:i.translate("usBankAccountConfirmationScreen.button")})})]})},[ve.US_BANK_ACCOUNT_VERIFICATION_GUIDE]:e=>{const{state:t,controller:n}=vc(ve.US_BANK_ACCOUNT_VERIFICATION_GUIDE),i=(0,Qr.t)(),s=(0,Ur.P)();return(0,Dr.jsxs)("div",{className:"flow-screen","data-qa":"active-screen-us-bank-account-guide",children:[(0,Dr.jsx)("div",{className:"sr-only",role:"status","aria-live":"polite",children:i.translate("common.screenAriaLabel",{screenTitle:`${i.translate("usBankAccountGuideScreen.title")}`})}),(0,Dr.jsx)(Kl,{title:i.translate("usBankAccountGuideScreen.title")}),(0,Dr.jsx)(Al,{className:(0,Rr.A)("px-body",{"pt-6":!s}),children:(0,Dr.jsx)(dP,{statementDescriptor:t.statementDescriptor,amountExample:n.amountExample,descriptorCodeExample:n.descriptorCodeExample,showAmountExample:"amounts"===t.verificationType,showDescriptorCodeExample:"descriptor_code"===t.verificationType})}),(0,Dr.jsx)(Ll,{children:(0,Dr.jsx)("button",{type:"button",className:"btn btn-primary",onClick:()=>{n.leave()},"data-qa":"us-bank-account-micro-dep-continue-button",children:i.translate("usBankAccountGuideScreen.button")})})]})},[ve.UK_BACS]:e=>{const{state:t}=vc(ve.UK_BACS);return(0,Dr.jsx)(RC,{state:t.errors,children:(0,Dr.jsx)(MC,Object.assign({},e))})},[ve.UK_BACS_CONFIRMATION]:e=>{const{state:t,controller:n}=vc(ve.UK_BACS_CONFIRMATION),i=(0,Ur.P)(),s=(0,Qr.t)(),a=PC(t.ukBacs.sortCode.match(/(\d{2})/g)||[],"-");return(0,Dr.jsxs)("div",{className:"flow-screen",children:[(0,Dr.jsx)(Kl,{title:s.translate("ukBacsConfirmationScreen.title"),titleQa:"uk-bacs-confirmation-title"}),(0,Dr.jsx)(Gl,{children:s.translate("common.screenAriaLabel",{screenTitle:`${s.translate("ukBacsConfirmationScreen.title")}`})}),(0,Dr.jsx)(Al,{className:(0,Rr.A)("px-body",{"pt-8 pb-3":!i}),children:(0,Dr.jsxs)("div",{className:"fixed-container",children:[(0,Dr.jsxs)("div",{className:"bg-white border-radius-8",style:kC,children:[(0,Dr.jsxs)("div",{className:"px-3 py-2",style:OC,children:[(0,Dr.jsx)("p",{className:"caption-1 text-truncate text-gray-60",children:s.translate("ukBacsConfirmationScreen.email")}),(0,Dr.jsx)("p",{className:"label-3 text-truncate",children:t.email})]}),(0,Dr.jsxs)("div",{className:"px-3 py-2",style:OC,children:[(0,Dr.jsx)("p",{className:"caption-1 text-truncate text-gray-60",children:s.translate("ukBacsConfirmationScreen.name")}),(0,Dr.jsx)("p",{className:"label-3 text-truncate",children:t.ukBacs.accountHolderName})]}),(0,Dr.jsxs)("div",{className:"px-3 py-2",children:[(0,Dr.jsx)("p",{className:"caption-1 text-truncate text-gray-60",children:s.translate("ukBacsConfirmationScreen.accountDetails")}),(0,Dr.jsxs)("div",{className:"d-flex text-sans-serif",children:[(0,Dr.jsx)("p",{className:"label-3 text-truncate me-3",children:a}),(0,Dr.jsx)("p",{className:"label-3 text-truncate",children:t.ukBacs.accountNumber})]})]})]}),(0,Dr.jsx)(uc,{className:(0,Rr.A)("body-4 mt-4",i?"text-ellipsis":"text-line-clamp-7"),as:"p",token:"ukBacsConfirmationScreen.legalInformation",params:{statementDescriptor:t.company.stripe.ukBacsDisplayName,email:t.email}}),(0,Dr.jsx)("hr",{className:"my-3","aria-hidden":!0}),(0,Dr.jsxs)("div",{className:"d-flex items-center",children:[(0,Dr.jsx)(uc,{className:(0,Rr.A)("body-4",i?"text-ellipsis":"text-line-clamp-2 p-1 m-minus-1",{"pointer-events-none":t.locked}),as:"p",token:"ukBacsConfirmationScreen.guarantee",params:{link:"https://stripe.com/bacs_debit/direct-debit-guarantee"}}),(0,Dr.jsx)(_C,{className:"text-gray-60 shrink-0 ms-3",width:67,height:22,"aria-hidden":!0})]})]})}),(0,Dr.jsx)(Ll,{children:(0,Dr.jsx)(qu,{className:"btn-primary",processingState:t.processingState,errorTitle:t.payErrorMessage,onClick:()=>{n.leave()},dataQa:"uk-bacs-pay-button",trackingElement:"nextButton",children:_u(s,t.formattedAmount,t.frequency)})})]})},[ve.AU_BECS]:e=>{const{stripeElementState:t,setStripeElementState:n}=Ry();return(0,Dr.jsx)(Uy,{state:t,children:(0,Dr.jsx)(Gy,Object.assign({stripeElementState:t,setStripeElementState:n},e))})},[ve.DOUBLE]:PE,[ve.GIFT_AID]:e=>{const{state:t,controller:n}=vc(ve.GIFT_AID),i=(0,Qr.t)(),s=(0,Ur.P)(),a=(0,Ia.useCallback)((e=>{n.changeGiftAid(e),n.leave()}),[n]),o=(0,Ia.useCallback)((()=>{a(!1)}),[a]);return(0,Ia.useEffect)((()=>{n.setShown()}),[n]),(0,Dr.jsxs)("div",{className:"flow-screen","data-qa":"active-screen-gift-aid",children:[(0,Dr.jsx)("div",{className:"sr-only",role:"status","aria-live":"polite",children:i.translate("common.screenAriaLabel",{screenTitle:`${i.translate("giftAidScreen.title")}`})}),(0,Dr.jsx)(Kl,{children:(0,Dr.jsx)("h2",{className:(0,Rr.A)("title-2",{"py-2":s}),"aria-label":i.translate("giftAidScreen.title"),children:(0,Dr.jsx)("span",{className:"icon-slot d-block","aria-hidden":!0,children:(0,Dr.jsx)("span",{className:"p-abs inset-centered",children:(0,Dr.jsx)(lS,{className:"d-block"})})})})}),(0,Dr.jsx)(Al,{className:(0,Rr.A)("px-body",s?"pb-2":"pt-6 pb-4"),children:(0,Dr.jsxs)("div",{className:(0,Rr.A)("fixed-container",{"grow-1 d-flex flex-column":!s}),children:[(0,Dr.jsxs)("p",{className:(0,Rr.A)("text-center",s?"text-ellipsis":"text-line-clamp-6"),children:[i.translate("giftAidScreen.governmentText")," ",i.translate("giftAidScreen.ratioInfo")]}),(0,Dr.jsx)(uc,{as:"p",className:(0,Rr.A)("subtitle-4 text-center mt-4-5",s?"text-ellipsis":"text-line-clamp-3"),token:"giftAidScreen.actionQuestion"}),t.legalText&&(0,Dr.jsx)("div",{className:"grow-1 mt-4-5 d-flex flex-column",children:(0,Dr.jsx)(dS,{})})]})}),(0,Dr.jsxs)(Ll,{children:[(0,Dr.jsx)("button",{type:"button",className:"btn btn-primary",disabled:t.locked,onClick:()=>a(!0),"data-qa":"gift-aid-continue","data-tracking-element-name":"claimButton",children:i.translate("giftAidScreen.button.claim")}),(0,Dr.jsx)("div",{className:"d-flex justify-center mt-5",children:(0,Dr.jsx)(qu,{buttonType:"link",onClick:o,processingState:t.processingState,errorTitle:t.payErrorMessage||i.safeTranslate("common.errorOccurredText"),dataQa:"no-gift-aid-and-pay",trackingElement:"dontClaimButton",children:i.translate("giftAidScreen.button.refuse")})})]})]})},[ve.SEPA]:e=>{const{stripeElementState:t,setStripeElementState:n}=Ry();return(0,Dr.jsx)(EC,{state:t,children:(0,Dr.jsx)(CC,Object.assign({stripeElementState:t,setStripeElementState:n},e))})},[ve.IDEAL_CONFIRMATION]:e=>{const{state:t,controller:n}=vc(ve.IDEAL_CONFIRMATION),i=(0,Ur.P)(),s=(0,Qr.t)(),a=(0,Ia.useCallback)((()=>{n.leave()}),[n]),o=(0,Ia.useCallback)((()=>{n.returnToBankWindow()}),[n]),r=(0,Ia.useCallback)((()=>{n.back()}),[n]);return(0,Ia.useEffect)((()=>{t.shouldPaymentRestore&&n.leave()}),[n,t.shouldPaymentRestore]),(0,Dr.jsxs)("div",{className:"flow-screen",children:[(0,Dr.jsx)("div",{className:"sr-only",role:"status","aria-live":"polite",children:s.translate("common.screenAriaLabel",{screenTitle:`${s.translate("idealConfirmationScreen.title")}`})}),(0,Dr.jsx)(Kl,{backButtonClickHandler:r,forceShowBackButton:t.forceShowBackButton,title:s.translate("idealConfirmationScreen.title"),titleQa:"ideal-confirmation-title"}),(0,Dr.jsx)(Al,{className:(0,Rr.A)("px-body",{"pt-5 pb-6":!i}),children:(0,Dr.jsxs)("div",{className:"fixed-container grow-1 min-h-0 d-flex flex-column",children:[t.showReturnBankInfo?(0,Dr.jsx)(xS,{className:(0,Rr.A)("shrink-0",i?"mt-3":"my-auto")}):(0,Dr.jsx)(gS,{email:t.email,name:t.name,className:"shrink-0"}),!t.showReturnBankInfo&&t.isSubscription&&(0,Dr.jsx)(RS,{className:(0,Rr.A)("grow-1",i?"mt-5":"mt-4"),locked:t.locked})]})}),(0,Dr.jsx)(Ll,{backButtonClickHandler:r,forceShowBackButton:t.forceShowBackButton,children:t.showReturnBankInfo?(0,Dr.jsx)(qu,{className:"btn-primary",processingState:Kr.IDLE,trackingElement:"nextButton",dataQa:"ideal-continue-button",onClick:o,children:s.translate("idealConfirmationScreen.button")}):(0,Dr.jsxs)(Dr.Fragment,{children:[n.showNextStepOverview&&(0,Dr.jsx)("p",{className:"body-4 text-center text-ellipsis mb-4",children:s.translate("idealConfirmationScreen.nextStep")}),(0,Dr.jsx)(qu,{className:"btn-primary",processingState:t.processingState,errorTitle:t.errorMessage||s.safeTranslate("common.errorOccurredText"),onClick:a,dataQa:"ideal-pay-button",trackingElement:"nextButton",children:_u(s,t.formattedAmount,t.frequency)})]})})]})},[ve.COMMUNICATION_CONSENT]:()=>{const{controller:e,state:t}=vc(ve.COMMUNICATION_CONSENT),n=(0,Qr.t)(),i=(0,Ur.P)(),s=function(){const{campaign:e}=(0,_r.n)();return e.config.consentText.customized.description}(),a=(0,Ia.useRef)(null),o=qy(a),r=(0,Ia.useCallback)((t=>n=>{e.changeChannel(t,n)}),[e]);return(0,Ia.useEffect)((()=>{e.setCustomizedConsentShown()}),[e]),(0,Dr.jsxs)("form",{className:"flow-screen","aria-label":n.translate("common.screenAriaLabel",{screenTitle:`${n.translate("communicationConsentScreen.title")}`}),"data-qa":"communication-consent-screen",onSubmit:t=>{t.preventDefault(),e.leave()},children:[(0,Dr.jsx)(Kl,{title:n.translate("communicationConsentScreen.title")}),(0,Dr.jsx)(Al,{className:(0,Rr.A)("px-body",{"pt-8 pb-6":!i}),children:(0,Dr.jsxs)("div",{className:"fixed-container grow-1 min-h-0 d-flex flex-column",children:[(0,Dr.jsx)(Vy,{className:"shrink-0 mx-auto",ariaHidden:!0}),(0,Dr.jsx)("p",{className:(0,Rr.A)("shrink-0 text-center mt-5",i?"text-ellipsis":"text-line-clamp-2"),children:n.translate("communicationConsentScreen.description")}),(0,Dr.jsx)("div",{className:"mt-5",children:t.channels.map(((e,t)=>(0,Dr.jsx)(lu,{className:(0,Rr.A)({"mt-2":0!==t}),dataQa:`communication-consent-${e.type}`,dataTestId:`communication-consent-${e.type}`,checked:e.isAccepted,onChange:r(e.type),children:(0,Dr.jsx)("span",{className:"label-3",children:n.translate(`communicationConsentScreen.channels.${e.type}`)})},e.type)))}),!!s&&(0,Dr.jsx)("div",{className:"p-rel grow-1 shrink-0 mt-5",children:(0,Dr.jsx)("div",{ref:a,className:(0,Rr.A)({"p-abs inset-0 d-flex flex-column":!i,"scroll-box":o,"pointer-events-none":t.locked}),children:(0,Dr.jsx)("p",{className:(0,Rr.A)("body-4 shrink-0 text-gray-80 text-ellipsis mt-auto",{"px-3 py-2-5":o}),"data-qa":"communication-consent-description",children:s})})})]})}),(0,Dr.jsxs)(Ll,{children:[(0,Dr.jsx)("button",{type:"submit",className:"btn btn-primary","data-qa":"communication-consent-continue","data-testid":"communication-consent-continue","data-tracking-element-name":"nextButton",children:n.translate("communicationConsentScreen.button.continue")}),(0,Dr.jsx)("div",{className:"d-flex justify-center mt-5",children:(0,Dr.jsx)("button",{type:"button",className:"btn-link link-1 text-truncate","data-qa":"communication-consent-skip","data-testid":"communication-consent-skip","data-tracking-element-name":"skipButton",onClick:()=>{e.resetChannels(),e.leave()},children:n.translate("communicationConsentScreen.button.skip")})})]})]})},[ve.FAST_TRACK_PAYMENT_OPTIONS]:e=>{const{stripeElementsCardState:t,setStripeElementsCardState:n}=NE(),{state:i}=vc(ve.FAST_TRACK_PAYMENT_OPTIONS);return(0,Dr.jsx)(wE,{state:i.validation,children:(0,Dr.jsx)(sS,Object.assign({},e,{stripeElementsCardState:t,setStripeElementsCardState:n}))})},[oc.MANDATORY_QUESTIONS]:Tu,[oc.QUESTIONS]:Hh,[oc.PRIVACY]:hh,[oc.THANK_YOU]:ag,[oc.COMMENT]:Wl,[oc.MAILING_ADDRESS]:e=>{const{state:t}=vc(oc.MAILING_ADDRESS);return(0,Dr.jsx)(ry,{state:t.validation,children:(0,Dr.jsx)(ly,Object.assign({},e))})},[oc.REMIND_ME]:()=>{const{state:e}=vc(oc.REMIND_ME);return(0,Dr.jsx)(by,{state:{validation:{email:e.email,termsAndConditions:e.termsAndConditions},serverErrors:e.serverErrors},children:(0,Dr.jsx)(Ty,{})})},[oc.BLOCKED]:Ul},mP=Object.assign(Object.assign({},zg),hP),pP=e=>{let{onScreenEntered:t}=e;const n=(0,Ur.P)(),i=(0,zr.$)(),s=Sc(),a=(0,Br.C)(),o=Tc(),[r,c]=(0,Ia.useState)("next"),[l,u]=(0,Ia.useState)(s.getCurrentFlow().getCurrentScreen().name),[d,h]=(0,Ia.useState)(!0),[m,p]=(0,Ia.useState)([...s.checkoutService.checkoutUIState.alwaysRenderedScreens]),[g,y]=(0,Ia.useState)(),[f,E]=(0,Ia.useState)(),[S,v]=(0,Ia.useState)(),A=(0,_r.n)(),C=(0,Ia.useMemo)((()=>A.getAskPageConfig(Hn)),[A]),P=Lc("lg"),N=(0,Ia.useMemo)((()=>!P&&C.show?Qc.TOP:C.show?Qc.LEFT:null),[P,C.show]),b=l===oc.REMIND_ME,{isTestGroup:D}=xc(),T=n||i||D,_=(0,Ia.useCallback)(((e,t,n)=>{a&&!i&&o.trackCheckoutScreenView({transitionStartedAt:e,transitionFinishedAt:t,renderedAt:n,askPagePosition:N})}),[i,a,N,o]);(0,Ia.useEffect)((()=>{a&&_()}),[_,a]),(0,Ia.useEffect)((()=>s.onScreenChanged((e=>{const t=s.getCurrentFlow().getCurrentScreen().name;l!==t&&(y(e.createdAt),E(e.transitionStartedAt),v(e.transitionFinishedAt),h(!1),c((null==e?void 0:e.direction)===Xc.BACKWARD?"previous":"next"),u(t),p((e=>{const t=s.checkoutService.checkoutUIState.alwaysRenderedScreens;return e.length!==t.length||t.some((t=>!e.includes(t)))?[...t]:e})))}))),[l,s]);const k=(0,Ia.useCallback)((()=>{if(!g)return;const e=new Date;h(!0),_(f,S,e)}),[_,g,f,S]);return(0,Ia.useEffect)((()=>{null==t||t(d)}),[t,d]),(0,Dr.jsx)(ml,{className:(0,Rr.A)({"dark-mode":b}),children:(0,Dr.jsxs)(Zc.C.Provider,{value:d,children:[Object.entries(mP).map((e=>{let[t,n]=e;return!m.includes(t)&&(0,Dr.jsx)(gl,{show:t===l,Screen:n,screenDirection:r,alwaysMount:!1,animationDisabled:T,onScreenEntered:k},t)})),m.map((e=>(0,Dr.jsx)(gl,{show:e===l,Screen:mP[e],screenDirection:r,alwaysMount:!0,animationDisabled:T,onScreenEntered:k},e)))]})})},gP=(0,Ia.memo)(pP),yP=e=>{const t=(0,Qr.t)(),n=(0,zr.$)(),i=Sc(),s=Gr(),a=(0,Ia.useCallback)((()=>{n||i.startCryptoFlow()}),[i,n]),o="start-crypto-flow",r="start-fiat-flow";return(0,Dr.jsxs)("div",{className:(0,Rr.A)(s("flow-buttons"),e.className),children:[e.enabledCrypto&&(0,Dr.jsx)("button",{type:"button",className:(0,Rr.A)("btn-link",s("flow-button")),disabled:e.disabled,onClick:a,"data-qa":o,"data-tracking-element-name":o,children:t.translate("changeFlowButtons.crypto")}),e.enabledMoney&&(0,Dr.jsx)("button",{type:"button",className:(0,Rr.A)("btn-link",s("flow-button")),disabled:e.disabled,onClick:()=>{n||i.startFiatFlow()},"data-qa":r,"data-tracking-element-name":r,children:t.translate("changeFlowButtons.fiat")})]})},fP=(0,Ia.memo)(yP);var EP,SP,vP;function AP(){return AP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},AP.apply(null,arguments)}var CP=function(e,t){return Ia.createElement("svg",AP({fill:"none",height:60,viewBox:"0 0 140 60",width:140,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t},e),EP||(EP=Ia.createElement("linearGradient",{id:"a",gradientUnits:"userSpaceOnUse",x1:91.5325,x2:7.85105,y1:45.603,y2:15.43},Ia.createElement("stop",{offset:.441305,stopColor:"#ff8aad"}),Ia.createElement("stop",{offset:1,stopColor:"#ff447c"}))),SP||(SP=Ia.createElement("path",{d:"m10.9294 10.8399c-.6322-.2429 10.8815 18.8464 33.2279 28.4697 45.5139 19.6001 87.0467-13.1294 76.0427-14.3233-7.717-.8373-5.318 20.05 18.247 2.2579",stroke:"url(#a)",strokeLinecap:"round",strokeWidth:3})),vP||(vP=Ia.createElement("path",{d:"m8.25728 18.5369c-.76577-.0838-1.21272-.6728-1.20134-1.2942.06069-3.3134-.32837-9.2897-.32837-9.2897-.00501-.44046.07885-.84339.38062-1.10901.30178-.26562.75539-.32197 1.14414-.2324 4.49707 1.0355 8.98567 1.31819 8.98567 1.31819.6877.04473 1.2056.63959 1.16 1.33211-.0467.69218-.6406 1.21851-1.3275 1.17531 0 0-3.5428-.1858-5.6881-.58486l-1.84814 1.69606c.12288 1.7735.1138 2.9127.01315 5.7717-.02496.6934-.60198 1.238-1.29013 1.2168z",fill:"#ff4980"})))},PP=(0,Ia.forwardRef)(CP),NP=(0,Ia.memo)(PP);const bP=()=>{const e=(0,Qr.t)(),t=(0,cc.Q)();return(0,Dr.jsxs)("div",{className:"frequency-hint-side",children:[(0,Dr.jsx)("p",{className:"frequency-hint-side-text text-white text-ellipsis","data-qa":"recurring-frequency-hint-side-label",children:e.translate("frequencyHint.label")}),(0,Dr.jsx)(NP,{className:(0,Rr.A)("frequency-hint-side-arrow",{"icon-flip-horizontal":t})})]})},DP=(0,Ia.memo)(bP),TP=e=>{const t=(0,Ur.P)(),n=Gr(),i=(0,Qr.t)();return(0,Dr.jsx)("button",{type:"button",className:(0,Rr.A)(n("modal-close"),e.className),"aria-label":i.translate("common.closeDialogButtonAriaLabel"),onClick:e.onClick,"data-qa":"global-close","data-tracking-element-name":"closeButton",children:(0,Dr.jsx)("span",{className:(0,Rr.A)("icon-slot d-block",t?"icon-slot-28":"icon-slot-32"),"aria-hidden":!0,children:(0,Dr.jsx)("span",{className:"p-abs inset-centered",children:(0,Dr.jsx)(Lu.A,{className:"icon-stroke icon-stroke-2 d-block"})})})})};var _P=(0,Ia.memo)(TP);const kP={enter:400,exit:200},OP=()=>{!function(){const e=(0,Qr.t)(),t=Sc(),n=wc(),i=(0,zr.$)(),[s,a]=(0,Ia.useState)((()=>t.getCurrentFlow().getCurrentScreen().name));(0,Ia.useEffect)((()=>t.onScreenChanged((()=>{a(t.getCurrentFlow().getCurrentScreen().name)}))),[t,s]);const o=(0,Ia.useCallback)((t=>{const i=e.translate("closeTabDialog.text");if(!n.isUnrestrictedExitScreen(s))return(t||window.event).returnValue=i,i}),[n,e,s]);(0,Ia.useEffect)((()=>{if(i)return;window.addEventListener("beforeunload",o);const e=()=>window.removeEventListener("beforeunload",o);return t.checkoutService.setRemoveCloseGuard(e),e}),[t.checkoutService,o,i])}();const e=function(){const e=(0,_r.n)(),t=wc();return!e.infrastructureParams.isMobile||t.showCloseButton}(),t=function(){const e=Sc(),t=(0,_r.n)(),n=t.infrastructureParams.isMobile,i=t.infrastructureParams.showcase,[s,a]=(0,Ia.useState)((()=>!i)),o=(e,t,n)=>{const i=e.getCurrentFlow().getCurrentScreen().name,s=!e.checkoutService.checkoutUIState.isMobileScreenWithoutFaqLinks(i),o=e.checkoutService.checkoutUIState.showFAQLinks;a(t?o&&s:o)};return(0,Ia.useEffect)((()=>{if(i)return;const t=e.onScreenChanged((()=>{o(e,n)}));return o(e,n),t}),[e,n,i]),s}(),n="AFJCHFEK"===(0,_r.n)().campaign.company,i=(0,kr.M)(),s=(0,Ur.P)(),a=Lc("lg"),o=(0,zr.$)(),r=Gr(),l=(e=>(0,Ia.useCallback)((t=>{try{t(e)}catch(e){if(e instanceof Error&&"SecurityError"===e.name)return;throw e}}),[e]))(i),{show:u,entered:d,handleOpenTransitionEntered:h,handleCloseClick:m,handleCloseTransitionExited:p}=function(){var e=this;const t=(0,Ur.P)(),[n,i]=(0,Ia.useState)({shouldReopen:!1,tributeSelected:!1}),[s,a]=(0,Ia.useState)(!1),o=wa(),[r,l]=(0,Ia.useState)(!1),u=Sc(),d=wc(),h=Tc(),m=(0,Ia.useCallback)((function(){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(0,c.sH)(e,[...i],void 0,(function(){let{isManualCall:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function*(){u.shouldNotifyAbandoned(e)&&(u.checkoutService.updateSession({canUseAmountDefaults:!0}),u.checkoutService.abandonSession());const n=u.getCurrentFlow().getCurrentScreen().name;u.canClose({isMobile:t,isMobileExitScreen:d.isMobileExitScreen(n),isUnrestrictedExitScreen:d.isUnrestrictedExitScreen(n),isFinalAvailableScreen:d.isFinalAvailableScreen(n)})&&(yield u.checkoutService.saveCheckoutClosePublicParams(),a(!1))}()}))}),[u,d,t]);(0,Ia.useEffect)((()=>{const e=()=>a(!0),t=e=>(0,c.sH)(this,void 0,void 0,(function*(){var{isManualCall:t}=e,n=(0,c.Tt)(e,["isManualCall"]);i(n),yield m({isManualCall:t})}));return o.on(Oa.SHOULD_SHOW,e),o.on(Oa.SHOULD_HIDE,t),()=>{o.removeListener(Oa.SHOULD_SHOW,e),o.removeListener(Oa.SHOULD_HIDE,t)}}),[m,o]);const p=(0,Ia.useCallback)((()=>{h.trackCheckoutClose(),o.emit(Oa.WAS_HIDDEN,n)}),[o,n,h]);return{show:s,entered:r,handleOpenTransitionEntered:(0,Ia.useCallback)((()=>{l(!0),h.trackCheckoutView()}),[h]),handleCloseTransitionExited:p,handleCloseClick:m}}(),g=(0,Ia.useRef)(null),y=(0,Ia.useRef)(null),f=(0,Ia.useRef)(null),E=(0,Ia.useRef)(null),{handleBlur:S,handleFocus:v}=function(e){const{rootElRef:t,disabled:n,trapStartRef:i,trapStopRef:s}=e,[a,o]=(0,Ia.useState)(),r=(0,Ia.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!i.current)return;if(!s.current)return;if(!t.current)return;const n=t.current.querySelectorAll(qr);let a=[].slice.call(n);a=a.filter((e=>e!==i.current&&e!==s.current)),e&&(a=a.reverse()),a.length&&a[0].focus()}),[t,i,s]),c=(0,Ia.useCallback)((e=>{n||i.current&&s.current&&(e.target===i.current&&r(a!==s.current),e.target===s.current&&r(a===i.current))}),[r,a,n,i,s]),l=(0,Ia.useCallback)((e=>{n||o(e.target)}),[n]);return{trapStartRef:i,trapStopRef:s,handleFocus:c,handleBlur:l}}({rootElRef:g,trapStartRef:f,trapStopRef:E}),A=(0,_r.n)(),C=Sc(),P=wc(),N=Ic(),b=Ac(),D=N.get(be.RECURRING_FREQUENCY_HINT_CHECKOUT_DESKTOP_EXPERIMENT),T=A.getAskPageConfig(),_=T.show||!!A.fundraisingPage,[k,O]=(0,Ia.useState)(_),I=A.infrastructureParams.livemode,x=T.showLinks,w=s&&k&&x,R=D.isTestGroup2()&&b===ve.DONATE&&a,[M,L]=(0,Ia.useState)(!0),{shouldShowFlowsSection:U,enabledMoney:F,enabledCrypto:j}=(e=>{const t=(0,_r.n)(),n=_c(),{showcase:i}=t,s=i?i.isFirstScreen:e,{crypto:a,money:o}=t.enabledFlows;if(!(0,Ia.useMemo)((()=>[a,o].filter(Boolean).length>1&&s),[a,s,o]))return{shouldShowFlowsSection:!1,enabledMoney:!1,enabledCrypto:!1};const r=n.type;return{shouldShowFlowsSection:!0,enabledMoney:!!o&&r!==Ft.MONEY,enabledCrypto:!!a&&r!==Ft.CRYPTO}})(M),B=t&&!n||U||w||o;(0,Ia.useEffect)((()=>{const e=e=>{e.code===Lr.J.ESC&&m()};return l((t=>t.document.addEventListener("keyup",e))),()=>l((t=>{var n;return null===(n=t.document)||void 0===n?void 0:n.removeEventListener("keyup",e)}))}),[m,l]),(0,Ia.useEffect)((()=>C.onScreenChanged((()=>{const e=C.getCurrentFlow(),t=e.getCurrentScreen().name,n=!P.isMobileScreenWithoutAskPage(t);O(s?n&&_:_),L(e.isCurrentScreenFirst()),l((e=>e.document.body.classList.remove("overflow-hidden")))}))),[P,C,s,_,l]);const[G,q]=(0,Ia.useState)(!1),H=(0,Ia.useCallback)((e=>{q(e)}),[]),V=(0,Ia.useCallback)((()=>{if(!o)return;const e=new Event(wr.CLICK_SHOWCASE);l((t=>t.parent.dispatchEvent(e)))}),[o,l]);return(0,Dr.jsx)(Dr.Fragment,{children:(0,Dr.jsx)(Br.m.Provider,{value:d,children:(0,Dr.jsx)(Fr.Provider,{value:d&&G,children:(0,Dr.jsx)(Mr.A,{in:u,timeout:kP,classNames:s||o?{}:"rtg-modal",nodeRef:g,onEntered:h,onExited:p,unmountOnExit:!0,children:(0,Dr.jsx)("div",{className:(0,Rr.A)(r("modal"),{"has-campaign":k,showcase:o}),ref:g,onFocus:v,onBlur:S,onClickCapture:V,children:(0,Dr.jsxs)(jr.Tn.Provider,{value:g,children:[(0,Dr.jsx)("span",{ref:f,tabIndex:0,"aria-hidden":!0}),e&&(0,Dr.jsx)(_P,{onClick:m,className:(0,Rr.A)({"pointer-events-none":o})}),(0,Dr.jsxs)("div",{className:(0,Rr.A)(r("widget"),{"pb-10":!I&&!o&&s,"pb-14":!I&&!o&&!s,"pointer-events-none":o}),children:[(0,Dr.jsxs)("div",{className:r("widget-main"),children:[k&&(0,Dr.jsx)("div",{className:r("widget-campaign"),"data-testid":"campaign",children:(0,Dr.jsx)(Fc,{})}),(0,Dr.jsxs)("div",{className:(0,Rr.A)(r("widget-form")),ref:y,children:[(0,Dr.jsx)(jr.Qq.Provider,{value:y,children:(0,Dr.jsx)(gP,{onScreenEntered:H})}),R&&(0,Dr.jsx)(DP,{})]})]}),B&&(0,Dr.jsx)("div",{className:r("widget-footer"),"data-qa":"widget-footer-block",children:(0,Dr.jsxs)("div",{className:(0,Rr.A)({"fixed-container":s}),children:[(!n||U)&&(0,Dr.jsxs)("div",{className:r("widget-footer-panel"),children:[!n&&(0,Dr.jsx)($c,{showAskPage:k}),U&&(0,Dr.jsxs)(Dr.Fragment,{children:[k&&!s&&a&&(0,Dr.jsx)("div",{className:"body-4 text-white opacity-80 shrink-0 mx-3","aria-hidden":!0,children:"·"}),(0,Dr.jsx)(fP,{enabledCrypto:j,enabledMoney:F})]})]}),w&&(0,Dr.jsx)(sc,{links:T.links,className:(0,Rr.A)({"mt-3":!n||U})})]})})]}),(0,Dr.jsx)("span",{ref:E,tabIndex:0,"aria-hidden":!0})]})})})})})})};var IP=n(9369);const xP=e=>{var t;const{onMounted:n}=e;return(0,Ia.useEffect)((()=>{n()}),[n]),(0,Dr.jsx)(Ia.StrictMode,{children:(0,Dr.jsx)(Or.Provider,{value:e.sentry,children:(0,Dr.jsx)(xr,{fallback:(0,Dr.jsx)("div",{children:"fallback content"}),children:(0,Dr.jsx)(kr.U.Provider,{value:e.iframeWindow,children:(0,Dr.jsx)(Ec.Provider,{value:e.flowManager,children:(0,Dr.jsx)(_r.G.Provider,{value:e.checkoutConfiguration,children:(0,Dr.jsx)(xa.Provider,{value:e.viewEventEmitter,children:(0,Dr.jsx)(IP.R.Provider,{value:e.intl,children:(0,Dr.jsx)(Dc.Provider,{value:e.tracker,children:(0,Dr.jsx)(Oc.Provider,{value:e.experiments,children:(0,Dr.jsx)(Nc.Provider,{value:e.currencyService,children:(0,Dr.jsx)(fh.Provider,{value:null!==(t=null==e?void 0:e.showcaseContext)&&void 0!==t?t:null,children:(0,Dr.jsx)(OP,{})})})})})})})})})})})})})};class wP{constructor(e,t,n,i,s,a){this.container=e,this.iframe=t,this.eventEmitter=n,this.sentry=i,this.debug=s,this.checkoutCore=a,this.renderKey=(0,ma.i)()}get iframeNode(){return this.iframe.iframeNode}open(e){return(0,c.sH)(this,void 0,void 0,(function*(){var t,n;if(null===(n=null===(t=null==e?void 0:e.abortController)||void 0===t?void 0:t.signal)||void 0===n?void 0:n.aborted)throw new l;this.targetWindow&&(yield this.render(),this.iframe.showDocument(),this.iframe.open(),this.show())}))}close(){this.iframe.close(),this.unmount(),this.iframe.destroy(),this.eventEmitter.removeAllListeners()}onHide(e){return this.eventEmitter.on(Oa.WAS_HIDDEN,e),this}get targetWindow(){return this.iframe.iframeWindow}render(e){return(0,c.sH)(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{try{const n=()=>(this.logCheckoutOpeningTime(),t());this.root.render((0,Dr.jsx)(xP,{onMounted:n,viewEventEmitter:this.eventEmitter,flowManager:this.checkoutCore.flowManager,intl:this.checkoutCore.intl,sentry:this.sentry,tracker:this.checkoutCore.trackerCheckout,experiments:this.checkoutCore.experiments,iframeWindow:this.targetWindow,currencyService:this.checkoutCore.currencyService,checkoutConfiguration:this.checkoutCore.checkoutConfiguration,showcaseContext:e},this.renderKey))}catch(e){n(e)}}))}))}show(){this.eventEmitter.emit(Oa.SHOULD_SHOW)}regenerateKey(){return this.renderKey=(0,ma.i)(),this.renderKey}get root(){return this._root||(this._root=(0,Tr.H)(this.container)),this._root}unmount(){this.root.unmount(),this.debug.log("Checkout UI (React) is unmounted")}logCheckoutOpeningTime(){const e=Date.now()-this.checkoutCore.trackerCheckout.checkoutOpenTimestamp;this.debug.log("checkout opening time:onMounted",`${e} ms`)}}function RP(e,t){void 0!==t&&function(n){var i;function s(){i||(i=!0,n())}["interactive","complete"].indexOf(t.readyState)>=0?n():(i=!1,t.addEventListener("DOMContentLoaded",s,!1),e.addEventListener("load",s,!1))}((function(){var n=!0,i=!1,s=null,a={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function o(e){return!!(e&&e!==t&&"HTML"!==e.nodeName&&"BODY"!==e.nodeName&&"classList"in e&&"contains"in e.classList)}function r(e){e.classList.contains("focus-visible")||(e.classList.add("focus-visible"),e.setAttribute("data-focus-visible-added",""))}function c(e){n=!1}function l(){t.addEventListener("mousemove",u),t.addEventListener("mousedown",u),t.addEventListener("mouseup",u),t.addEventListener("pointermove",u),t.addEventListener("pointerdown",u),t.addEventListener("pointerup",u),t.addEventListener("touchmove",u),t.addEventListener("touchstart",u),t.addEventListener("touchend",u)}function u(e){"html"!==e?.target?.nodeName?.toLowerCase()&&(n=!1,t.removeEventListener("mousemove",u),t.removeEventListener("mousedown",u),t.removeEventListener("mouseup",u),t.removeEventListener("pointermove",u),t.removeEventListener("pointerdown",u),t.removeEventListener("pointerup",u),t.removeEventListener("touchmove",u),t.removeEventListener("touchstart",u),t.removeEventListener("touchend",u))}t.addEventListener("keydown",(function(e){o(t.activeElement)&&r(t.activeElement),n=!0}),!0),t.addEventListener("mousedown",c,!0),t.addEventListener("pointerdown",c,!0),t.addEventListener("touchstart",c,!0),t.addEventListener("focus",(function(e){var t,i,s;o(e.target)&&(n||(i=(t=e.target).type,"INPUT"==(s=t.tagName)&&a[i]&&!t.readOnly||"TEXTAREA"==s&&!t.readOnly||t.isContentEditable))&&r(e.target)}),!0),t.addEventListener("blur",(function(t){var n;o(t.target)&&(t.target.classList.contains("focus-visible")||t.target.hasAttribute("data-focus-visible-added"))&&(i=!0,e.clearTimeout(s),s=e.setTimeout((function(){i=!1,e.clearTimeout(s)}),100),(n=t.target).hasAttribute("data-focus-visible-added")&&(n.classList.remove("focus-visible"),n.removeAttribute("data-focus-visible-added")))}),!0),t.addEventListener("visibilitychange",(function(e){"hidden"==t.visibilityState&&(i&&(n=!0),l())}),!0),l(),t.body.classList.add("js-focus-visible")}))}class MP{constructor(e,t){this.onLoadHandlers=[],this.ready=!1,this.isTemplateRewritten=!1,this.localeCode=e.locale,this.node=e.node,this.overrideTemplate=e.overrideTemplate,this.fonts=e.fonts||"",this.styles=e.styles||"",this.id=e.id||"",this.title=e.title,this.initialize=e.initialize,this.scripts=e.scripts||[],this.metaTags=e.metaTags||[],this.isMobile=e.isMobile||!1,this.env=e.env,this.disableRtl=e.disableRtl||!1,this.isDelayedTemplateRewrite=e.isDelayedTemplateRewrite||!1,this.iframe=document.createElement("iframe"),this.addEventListeners(),e.initialStyles&&this.setStyles(e.initialStyles),this.setIframeAttributes(),this.sentry=t}resize(e){if(e.height){const t=MP.getSizeInCssUnit(e.height),n=e.minHeight?MP.getSizeInCssUnit(e.minHeight):t,i=e.maxHeight?MP.getSizeInCssUnit(e.maxHeight):t;this.iframe.setAttribute("height",t),this.iframe.style.setProperty("height",t,"important"),this.iframe.style.setProperty("min-height",n,"important"),this.iframe.style.setProperty("max-height",i,"important")}if(e.width){const t=MP.getSizeInCssUnit(e.width),n=e.minWidth?MP.getSizeInCssUnit(e.minWidth):t,i=e.maxWidth?MP.getSizeInCssUnit(e.maxWidth):t;this.iframe.setAttribute("width",t),this.iframe.style.setProperty("width",t,"important"),this.iframe.style.setProperty("min-width",n,"important"),this.iframe.style.setProperty("max-width",i,"important")}}showDocument(){MP.isContentDocumentAvailable(this.iframe.contentDocument)&&this.iframe.contentDocument.body.setAttribute("style","")}setStyles(e){e.forEach((e=>{let[t,n]=e;this.iframe.style.setProperty(t,String(n),"important")}))}addClass(e){e.forEach((e=>{this.iframe.className+=` ${e}`}))}removeStyles(e){MP.isContentDocumentAvailable(this.iframe.contentDocument)&&e.forEach((e=>{this.iframe.style.removeProperty(e)}))}appendElement(e){MP.isContentWindowAvailable(this.iframe.contentWindow)&&MP.isContentDocumentAvailable(this.iframe.contentDocument)&&(RP(this.iframe.contentWindow,this.iframe.contentDocument),this.iframe.contentDocument.body.appendChild(e))}addOnLoadHandler(e){if(this.ready)return e();this.onLoadHandlers.push(e)}addDocumentEventListener(e,t){MP.isContentDocumentAvailable(this.iframe.contentDocument)&&this.iframe.contentDocument.addEventListener(e,t)}removeDocumentEventListener(e,t){MP.isContentDocumentAvailable(this.iframe.contentDocument)&&this.iframe.contentDocument.removeEventListener(e,t)}findElement(e){return MP.isContentDocumentAvailable(this.iframe.contentDocument)?this.iframe.contentDocument.querySelector(e):null}matchMedia(e){return MP.isContentWindowAvailable(this.iframe.contentWindow)?this.iframe.contentWindow.matchMedia(e):null}get iframeNode(){return this.iframe}setGlobalData(e){if(MP.isContentWindowAvailable(this.iframe.contentWindow)){for(const[t,n]of Object.entries(e))this.iframe.contentWindow[t]=n;return!0}return!1}get iframeWindow(){return this.iframe.contentWindow}get iframeDocument(){return this.iframe.contentDocument}setIframeAttributes(){this.iframe.setAttribute("title",this.title),this.iframe.setAttribute("src","about:blank"),this.iframe.setAttribute("frameborder","0"),this.iframe.setAttribute("marginheight","0"),this.iframe.setAttribute("marginwidth","0"),this.iframe.setAttribute("width","1"),this.iframe.setAttribute("height","1"),this.id&&this.iframe.setAttribute("id",this.id)}addEventListeners(){this.iframe.addEventListener("load",(()=>{var e,t,n,i,s,a,o,r,c,l;MP.isContentWindowAvailable(this.iframe.contentWindow)||null===(e=this.sentry)||void 0===e||e.captureException(new Error("Iframe contentWindow is not available"),{extra:{iframeId:null===(t=this.iframe)||void 0===t?void 0:t.id,iframeSrc:null===(n=this.iframe)||void 0===n?void 0:n.src,iframeTitle:null===(i=this.iframe)||void 0===i?void 0:i.title,iframeWidth:null===(s=this.iframe)||void 0===s?void 0:s.width,iframeHeight:null===(a=this.iframe)||void 0===a?void 0:a.height,documentReady:document.readyState,isMobile:this.isMobile,documentInnerHTML:null===(l=null===(c=null===(r=null===(o=this.iframe)||void 0===o?void 0:o.contentDocument)||void 0===r?void 0:r.children)||void 0===c?void 0:c[0])||void 0===l?void 0:l.innerHTML}}),this.initialize&&this.iframe.contentWindow&&this.iframe.contentDocument&&this.initialize(this.iframe.contentWindow,this.iframe.contentDocument),this.ready=!0,this.onLoadHandlers.forEach((e=>e()))}))}getIframeTemplate(){const e=e=>Object.keys(e).map((t=>`${t}="${e[t]}"`)).join(" "),t=this.scripts.map((t=>`<script ${e(t)}><\/script>`)).join(""),n=this.metaTags.map((t=>`<meta ${e(t)}>`)).join("");return this.overrideTemplate?this.overrideTemplate({title:this.title,styles:this.styles,fonts:this.fonts,scripts:t,metaTags:n,isMobile:this.isMobile}):`\n      <!DOCTYPE html>\n      <html style="overflow: hidden;" lang="${this.localeCode}" dir="${(0,za.N_)(this.localeCode,this.disableRtl)}">\n          <head>\n              <meta charset="utf-8">\n              <meta http-equiv="X-UA-Compatible" content="IE=edge">\n              ${n}\n              <title>${this.title}</title>\n              <style>${this.styles}</style>\n              <style>${this.fonts}</style>\n              ${t}\n          </head>\n          <body style="opacity: 0;"></body>\n      </html>\n    `}static isContentDocumentAvailable(e){return!!e||(console.warn("ContentDocument is not available"),!1)}static isContentWindowAvailable(e){return!!e||(console.warn("ContentWindow is not available"),!1)}static getSizeInCssUnit(e){const t=String(e);return/^\d+$/.test(t)?`${t}px`:t}}function LP(e,t){if(e.body)return t();setTimeout(LP.bind(null,e,t),10)}function UP(e){return new Promise((t=>{setTimeout(t,e)}))}function FP(e,t){return(0,c.sH)(this,void 0,void 0,(function*(){return!!e.fonts&&new Promise((n=>e.fonts.load(t).then((()=>{n(!0)})).catch((()=>{n(!1)}))))}))}const jP=[/FBAV|FBAN|FBSV|FBID|FBBV\/([0-9.]+)/,/Instagram\s([0-9.]+)/,/Snapchat\/([0-9.]+)/,/MicroMessenger\/([0-9.]+)/,/Twitter for iPhone[/]?([\d.]+)?/,/TikTok[/ ](\d+\.(?:[.\d]+))?/,/bytedance/i,/musical_ly/i,/LinkedInApp/i,/gsa/i,/;\s*wv\)/];function BP(){return`display: block !important;margin: 0 !important;padding: 0 !important;border: 0 !important; width: 100% !important; height: 100% !important; position: fixed !important; opacity: 1 !important; top: 0 !important; left: 0 !important; right: 0 !important; bottom: 0 !important; transform: translateZ(100px) !important;z-index: ${arguments.length>0&&void 0!==arguments[0]?arguments[0]:2147483647} !important;`}class GP extends MP{constructor(e,t,n){super(e,n),this.htmlElementStyleManager=t,this.sentry=n,this.render()}render(){let e=document.documentElement;this.env!==D.hY.PRODUCTION&&this.env!==D.hY.STAGING&&(e=document.body),this.isMobile?(this.containerDiv=document.createElement("div"),this.overlay=document.createElement("div"),this.overlay.setAttribute("id","fun-mobile-overlay-container"),this.containerDiv.setAttribute("id","fun-iframe-container"),this.containerDiv.appendChild(this.iframe),e.appendChild(this.overlay),e.appendChild(this.containerDiv)):this.node?(this.htmlElementStyleManager.setStyle("border: 0 !important; height: 100% !important; width: 100% !important; margin: 0 auto !important; padding: 0 !important; border-radius: 0 !important; display: block !important;",this.iframe),this.node.appendChild(this.iframe)):e.appendChild(this.iframe),this.setParentViewPort(),this.tryRewriteIframeTemplate(),this.isDelayedTemplateRewrite&&this.addOnLoadHandler((()=>this.tryRewriteIframeTemplate()))}onShow(){this.htmlElementStyleManager.setStyle(BP(),this.iframe)}open(){this.htmlElementStyleManager.saveDocumentOriginalStyles(),this.node||(this.isMobile&&this.containerDiv&&this.overlay&&(this.htmlElementStyleManager.setStyle("display: block !important;margin: 0 !important;padding: 0 !important;float: none !important;visibility: visible !important;opacity: 1 !important;position: absolute !important;width: 100% !important;height: 100% !important;top: 0 !important; left: 0 !important; right: 0 !important; bottom: 0 !important; background: #f5f5f5 !important;z-index: 2147483647 !important;transform: translateZ(100px) !important;",this.containerDiv),this.htmlElementStyleManager.setStyle("position: fixed !important;top: 0 !important;left: 0 !important;right: 0 !important;bottom: 0 !important;margin: 0 !important;padding: 0 !important;background: #f5f5f5 !important;z-index: 2147483646 !important;transform: translateZ(99px) !important;",this.overlay)),this.htmlElementStyleManager.setStyle(this.isMobile?"display: block !important;border: none !important;margin: 0 !important;padding: 0 !important;width: 100% !important;height: 100% !important;":BP(2147483646),this.iframe),this.resize({width:"100%",height:"100%"}),this.node||(this.htmlElementStyleManager.appendStyle(this.isMobile?"all: initial !important;position: static !important;margin: 0 !important;padding: 0 !important;min-height: 0 !important;min-width: 0 !important;width: auto !important;height: 100% !important;overscroll-behavior-y: none !important;":"overflow: hidden !important; overscroll-behavior-y: none !important;",document.documentElement),LP(document,(()=>{this.htmlElementStyleManager.appendStyle(this.isMobile?"all: initial !important;overflow: auto !important;position: static !important;display: block !important;min-height: 0 !important;min-width: 0 !important;height: 100% !important;width: auto !important;margin: 0 !important;padding: 0 !important;overscroll-behavior-y: none !important;":"padding-right: 0 !important; overscroll-behavior-y: none !important;",document.body)}))),this.setGlobalStyles())}close(){this.htmlElementStyleManager.setStyle("border: 0 !important; width: 1px !important; height: 1px !important; position: fixed !important; opacity: 0 !important;",this.iframe),this.removeGlobalStyles(),this.htmlElementStyleManager.restoreOriginalStyles(document.documentElement),this.htmlElementStyleManager.restoreOriginalStyles(document.body),this.restoreParentViewPort()}destroy(){this.iframe.remove(),this.containerDiv&&(this.containerDiv.remove(),this.containerDiv=void 0),this.overlay&&(this.overlay.remove(),this.overlay=void 0)}setParentViewPort(){if(this.node)return;this.viewport=GP.getViewport("width=device-width, initial-scale=1, shrink-to-fit=no");const e=this.viewport,t=document.querySelector("meta[name=viewport]");t?(this.parentViewport=t,this.parentViewport.remove()):this.parentViewport=GP.getViewport(""),document.head.appendChild(e)}restoreParentViewPort(){this.node||(this.viewport&&(this.viewport.remove(),this.viewport=void 0),this.parentViewport&&(document.head.appendChild(this.parentViewport),this.parentViewport=void 0))}setGlobalStyles(){if(this.isMobile){this.headStyle=document.createElement("style");const e=this.headStyle;e.appendChild(document.createTextNode("body > *:not(#fun-iframe-container){ position: fixed !important; width: 100% !important; display: block !important }")),document.head.appendChild(e)}}removeGlobalStyles(){this.headStyle&&this.headStyle.remove()}setIframeAttributes(){var e;super.setIframeAttributes(),this.iframe.setAttribute("allowpaymentrequest","true"),this.iframe.setAttribute("allow","payment web-share"),(co(window)||function(e){var t,n,i;return"string"==typeof(null===(t=e.navigator)||void 0===t?void 0:t.userAgent)&&!!(null===(i=null===(n=e.navigator)||void 0===n?void 0:n.userAgent)||void 0===i?void 0:i.match("FxiOS"))}(window)||function(e){var t,n,i;return"string"==typeof(null===(t=e.navigator)||void 0===t?void 0:t.userAgent)&&!!(null===(i=null===(n=e.navigator)||void 0===n?void 0:n.userAgent)||void 0===i?void 0:i.match("EdgiOS"))}(window)||(e=window.navigator.userAgent,jP.some((t=>t.exec(e)))))&&this.iframe.setAttribute("src",location.origin)}static getViewport(e){const t=document.createElement("meta");return t.setAttribute("name","viewport"),t.setAttribute("content",e),t}configure(e){this.localeCode=e.locale;const t=e.localizedTitle;if(!MP.isContentWindowAvailable(this.iframe.contentWindow))return;if(t&&(this.title=t,this.iframe.setAttribute("title",t)),this.iframe.contentWindow.document.documentElement.setAttribute("lang",this.localeCode),this.iframe.contentWindow.document.documentElement.setAttribute("dir",(0,za.N_)(this.localeCode)),void 0===e.styles)return;if(e.showcase){const e=this.iframe.contentWindow.document.getElementById("main-showcase-style");null==e||e.remove()}const n=this.iframe.contentWindow.document.createElement("style");e.showcase&&n.setAttribute("id","main-showcase-style"),this.styles=e.styles||"",n.appendChild(this.iframe.contentWindow.document.createTextNode(this.styles)),this.iframe.contentWindow.document.head.appendChild(n)}waitUntilFontsLoaded(){return(0,c.sH)(this,arguments,void 0,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return function*(){if(!e.iframe.contentWindow)return!1;const n=FP(e.iframe.contentWindow.document,'1em "IBM Plex Sans"'),i=FP(e.iframe.contentWindow.document,'1em "Verveine"'),s=Promise.all([n,i]),a=UP(t);return Promise.race([s,a]).then((e=>!!Array.isArray(e)&&!e.includes(!1)))}()}))}tryRewriteIframeTemplate(){MP.isContentWindowAvailable(this.iframe.contentWindow)&&(this.isTemplateRewritten||(this.isTemplateRewritten=!0,this.iframe.contentWindow.document.open("text/html","replace"),this.iframe.contentWindow.document.write(this.getIframeTemplate()),RP(this.iframe.contentWindow,this.iframe.contentWindow.document),this.iframe.contentWindow.document.close()))}}const qP=`\n@font-face {\n  font-family: 'IBM Plex Sans';\n  font-style: normal;\n  font-weight: 300;\n  font-display: swap;\n  src: url(${n(8552)}) format('woff2');\n  }\n@font-face {\n  font-family: 'IBM Plex Sans';\n  font-style: normal;\n  font-weight: 400;\n  font-display: swap;\n  src: url(${n(1755)}) format('woff2');\n}\n@font-face {\n  font-family: 'IBM Plex Sans';\n  font-style: normal;\n  font-weight: 500;\n  font-display: swap;\n  src: url(${n(9706)}) format('woff2');\n}\n@font-face {\n  font-family: 'IBM Plex Sans';\n  font-style: normal;\n  font-weight: 600;\n  font-display: swap;\n  src: url(${n(3717)}) format('woff2');\n}\n@font-face {\n  font-family: 'IBM Plex Sans';\n  font-style: normal;\n  font-weight: 700;\n  font-display: swap;\n  src: url(${n(8676)}) format('woff2');\n}\n@font-face {\n  font-family: 'IBM Plex Sans Arabic';\n  font-style: normal;\n  font-weight: 300;\n  font-display: swap;\n  src: url(${n(6843)}) format('woff2');\n}\n@font-face {\n  font-family: 'IBM Plex Sans Arabic';\n  font-style: normal;\n  font-weight: 400;\n  font-display: swap;\n  src: url(${n(4312)}) format('woff2');\n}\n@font-face {\n  font-family: 'IBM Plex Sans Arabic';\n  font-style: normal;\n  font-weight: 500;\n  font-display: swap;\n  src: url(${n(7977)}) format('woff2');\n}\n@font-face {\n  font-family: 'IBM Plex Sans Arabic';\n  font-style: normal;\n  font-weight: 600;\n  font-display: swap;\n  src: url(${n(5870)}) format('woff2');\n}\n@font-face {\n  font-family: 'IBM Plex Sans Arabic';\n  font-style: normal;\n  font-weight: 700;\n  font-display: swap;\n  src: url(${n(9807)}) format('woff2');\n}\n@font-face {\n  font-family: 'Sacramento';\n  font-style: normal;\n  font-weight: 400;\n  font-display: swap;\n  src: url(${n(3179)}) format('woff2');\n}\n@font-face {\n  font-family: 'Verveine';\n  font-style: normal;\n  font-weight: 400;\n  font-display: swap;\n  src: url(${n(9562)}) format('woff2');\n}\n`;var HP=n(893);const VP=(e,t)=>(0,Rr.A)({"is-mobile-safari-16":null==e?void 0:e.isMobileSafari16,"desktop-view":!(null==t?void 0:t.isMobile)});function KP(e,t){return(0,c.sH)(this,void 0,void 0,(function*(){return new Promise((n=>{const i=new GP({node:e.node,fonts:qP,isMobile:e.isMobile,title:"",id:"__checkout2",env:e.env,locale:e.localeCode,overrideTemplate(t){return`\n          <!DOCTYPE html>\n          <html class="${VP(e,t)}" lang="${e.localeCode}">\n            <head>\n                <meta charset="utf-8">\n                <meta http-equiv="X-UA-Compatible" content="IE=edge">\n                ${null==t?void 0:t.metaTags}\n                <title>${null==t?void 0:t.title}</title>\n                <style>${null==t?void 0:t.styles}</style>\n                <style>${null==t?void 0:t.fonts}</style>\n                ${null==t?void 0:t.scripts}\n            </head>\n\n            <body style="opacity: 0;">\n              <div id="root" class="donation-form" role="dialog" aria-modal="true"></div>\n            </body>\n          </html>\n      `},isDelayedTemplateRewrite:!0},e.htmlElementStyleManager,t);i.addOnLoadHandler((()=>{n(i)}))}))}))}function YP(e){return(0,c.sH)(this,void 0,void 0,(function*(){return(0,za.iJ)(e)===HP.p.RTL?(yield n.e(645).then(n.t.bind(n,1190,23))).default:(yield n.e(706).then(n.t.bind(n,2835,23))).default}))}class zP{constructor(){this.emitter=new y.A}on(e,t){return this.emitter.on(e,t),()=>this.emitter.off(e,t)}once(e,t){return this.emitter.once(e,t),this}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return this.emitter.emit(e,...n),this}removeAllListeners(){return this.emitter.eventNames().forEach((e=>{this.emitter.removeListener(e)})),this}}class WP{constructor(){this.stack=[]}setInitial(e){this.stack=[...e]}getCurrent(){return this.stack[this.stack.length-1]||null}getPrevious(){return this.stack[this.stack.length-2]||null}getHistoricalScreens(){return[...this.stack]}goTo(e){const t=this.stack.indexOf(e);return-1===t?(this.stack.push(e),this):(this.stack.splice(t+1),this)}has(e){return-1!==this.stack.indexOf(e)}}class $P extends zP{constructor(e,t,n){super(),this.transitionsCompiler=e,this.settings=t,this.state=n,this.isRestoredFromScreenHistory=!1,this.history=new WP,this.locked=!1,this.done=!1,this._canGoBack=!0,this.screens=e.compile(t.screens,this)}get previousScreenName(){return this.history.getPrevious()}get isLocked(){return this.locked}get isExiting(){return this.currentScreen.final||!1}tryExit(){if(this.isExiting)return!1;const e=this.getFinalScreen();if(!e)return!1;const t=this.getScreenByName(e);return!!this.canEnterToScreen(t)&&(this.goTo(t.name),!0)}start(){return(0,c.sH)(this,void 0,void 0,(function*(){var e;try{const t=new Date,n=this.getScreenByName(this.settings.initial()),i=null!==(e=this.firstScreen)&&void 0!==e?e:n;this.firstScreen=this.getFirstScreen(i),n===i||this.isRestoredFromScreenHistory||(yield n.instance.beforeEnter({isSynthetic:!0}),this.history.goTo(n.name),yield n.instance.beforeLeave({isSynthetic:!0})),this.history.goTo(this.firstScreen.name),yield this.currentScreen.instance.beforeEnter(),this.emitScreenChanged({transitionStartedAt:t}),this.checkFlowCompleted()}catch(e){throw this.emit(hs.ERROR,e),e}}))}next(e){return(0,c.sH)(this,void 0,void 0,(function*(){try{const t=new Date;if(!(null==e?void 0:e.omitBeforeLeave)&&!(yield this.currentScreen.instance.beforeLeave({direction:null==e?void 0:e.direction})))return;let n=this.getNextScreen(this.currentScreen),i=null==e?void 0:e.direction;if((null==e?void 0:e.getMandatoryAllowance)&&e.getMandatoryAllowance()){const e=this.getFirstMandatoryScreen();e&&(n=e,i=Xc.BACKWARD)}yield this.goTo(n.name,{direction:i||Xc.FORWARD,transitionStartedAt:t})}catch(e){throw this.emit(hs.ERROR,e),e}}))}prev(){return(0,c.sH)(this,void 0,void 0,(function*(){try{if(this.settings.initial()===this.currentScreen.name)return;const e=new Date,t=this.history.getHistoricalScreens(),n=t.findIndex((e=>{var t;return null===(t=this.screens.get(e))||void 0===t?void 0:t.final}));let i;if(i=-1!==n?t[n-1]:this.history.getPrevious(),!i)throw new Error(`Cannot go to the previous screen. Current screen: ${this.currentScreen.name}`);yield this.goTo(i,{direction:Xc.BACKWARD,transitionStartedAt:e})}catch(e){throw this.emit(hs.ERROR,e),e}}))}getHistoricalScreens(){return this.history.getHistoricalScreens()}predictNextScreen(){return this.getNextScreen(this.currentScreen).name}goTo(e,t){return(0,c.sH)(this,void 0,void 0,(function*(){try{this.throwErrorIfCannotChangeScreen(e,null==t?void 0:t.direction),this.currentScreen.instance.dispose(),this.history.goTo(e),this.currentScreen.instance=this.transitionsCompiler.createScreenInstance(e,this),yield this.currentScreen.instance.beforeEnter(),this.emitScreenChanged({direction:null==t?void 0:t.direction,transitionStartedAt:null==t?void 0:t.transitionStartedAt}),this.checkFlowCompleted()}catch(e){throw this.emit(hs.ERROR,e),e}}))}lock(){return this.locked=!0,this.emit(hs.LOCKED),this}unlock(){return this.locked=!1,this.emit(hs.UNLOCKED),this}setFirstScreen(e){this.firstScreen=this.getScreenByName(e)}getCurrentScreen(){return this.currentScreen.instance}getScreen(e){const t=this.screens.get(e);if(!t)throw new Error(`FormFlow Screen with name ${e} not found.`);return t.instance}checkHasScreen(e){return this.screens.has(e)}isCurrentScreenFirst(){var e;return this.currentScreen.name===(null===(e=this.firstScreen)||void 0===e?void 0:e.name)}isCurrentScreenLast(){return void 0===this.currentScreen.next}dispose(){this.removeAllListeners()}setInitialHistory(e){e.length>0&&(this.history.setInitial(e),this.isRestoredFromScreenHistory=!0)}setCanGoBack(e){this._canGoBack=e}get canGoBack(){return!(!this._canGoBack||this.locked||this.done||!this.history.getPrevious())}get currentScreen(){const e=this.history.getCurrent();if(!e)throw new Error("Cannot identify current screen");const t=this.screens.get(e);if(!t)throw new Error("Cannot get current screen");return t}throwErrorIfCannotChangeScreen(e,t){if(this.locked)throw new Error(`Cannot change screen while flow is locked. Current screen: ${e}. Direction: ${t}. Viewed screens: ${this.history.getHistoricalScreens().join(", ")}`);if(this.done)throw new Error("Cannot change screen because flow is completed")}checkFlowCompleted(){this.isCurrentScreenLast()&&!this.isExiting&&(this.done=!0,this.emit(hs.DONE))}emitScreenChanged(e){this.emit(hs.SCREEN_CHANGED,{screen:this.currentScreen.name,instance:this.currentScreen.instance,direction:null==e?void 0:e.direction,transitionStartedAt:(null==e?void 0:e.transitionStartedAt)||new Date,transitionFinishedAt:new Date,createdAt:new Date,screenHistory:this.history.getHistoricalScreens()})}getScreenByName(e){const t=this.screens.get(e);if(!t)throw new Error(`Can’t get "${e}" screen`);return t}canEnterToScreen(e){return!e.guard||!e.guard(this.state)}getFirstScreen(e){var t;if(!this.canEnterToScreen(e)){const n=null===(t=e.next)||void 0===t?void 0:t.call(e,this.state,this.history);if(!n)throw new Error('Unable to determine first screen, reached a screen without "next" function');const i=this.getScreenByName(n);return this.getFirstScreen(i)}return e}getNextScreen(e){var t;const n=null===(t=e.next)||void 0===t?void 0:t.call(e,this.state,this.history);if(!n)throw new Error("Can’t go to the next screen");const i=this.getScreenByName(n);return this.canEnterToScreen(i)?i:this.getNextScreen(i)}getFirstMandatoryScreen(){return this.history.getHistoricalScreens().map((e=>this.getScreenByName(e))).find((e=>{var t;return null===(t=null==e?void 0:e.mandatory)||void 0===t?void 0:t.call(e,this.state)}))||null}getFinalScreen(){const e=[...this.screens.entries()].find((e=>e[1].final));return e?e[0]:null}}class XP{constructor(e){this.screenFactory=e}createScreenInstance(e,t){return this.screenFactory.create(e,t)}compile(e,t){const n=new Map;return Object.keys(e).forEach((i=>{const s=e[i];n.set(i,{name:i,next:s.next,guard:s.guard,mandatory:s.mandatory,final:s.final,instance:this.screenFactory.create(i,t)})})),n}}function QP(e,t,n){const i=new XP(e);return new $P(i,t,n)}class ZP{constructor(){this._promise=new Promise(((e,t)=>{this._resolver=e,this._rejector=t}))}get promise(){return this._promise}resolve(e){this.resolver(e)}reject(e){this.rejector(e)}get resolver(){if(!this._resolver)throw new Error("_resolver is undefined");return this._resolver}get rejector(){if(!this._rejector)throw new Error("_rejector is undefined");return this._rejector}}class JP{constructor(){this.storage=[]}enqueue(e){this.storage.push(e)}dequeue(){return this.storage.shift()}size(){return this.storage.length}toArray(){return[...this.storage]}front(){return this.storage[0]}clear(){this.storage=[]}isEmpty(){return!this.storage.length}}class eN{constructor(e){this.debounce=e,this.queue=new JP,this.currentRequestPromise=null}request(e){let{promise:t,allowDelay:n,allowMerge:i}=e;const s=new ZP;return this.queue.enqueue({promise:t,deferredPromise:s,allowMerge:i,allowDelay:n}),this.performRequest(),s.promise}getRequestBatch(){var e;const t=this.queue.dequeue();if(!t)return[];if(!(null==t?void 0:t.allowMerge))return[t];const n=[t];for(;null===(e=this.queue.front())||void 0===e?void 0:e.allowMerge;){const e=this.queue.dequeue();e&&n.push(e)}return n}getRequestBatches(){const e=[];for(;!this.queue.isEmpty();)e.push(this.getRequestBatch());return e}executeBatch(e){return(0,c.sH)(this,void 0,void 0,(function*(){const t=e[e.length-1];if(t)try{const n=yield t.promise();e.forEach((e=>e.deferredPromise.resolve(n)))}catch(t){e.forEach((e=>e.deferredPromise.reject(t)))}}))}performDelayedRequest(){return(0,c.sH)(this,void 0,void 0,(function*(){const e=this.queue.front();if(!e)return;e.allowDelay&&(yield fo(this.debounce));const t=this.getRequestBatches();for(const e of t)yield this.executeBatch(e)}))}performRequest(){return(0,c.sH)(this,void 0,void 0,(function*(){for(;null===this.currentRequestPromise&&!this.queue.isEmpty();)try{this.currentRequestPromise=this.performDelayedRequest(),yield this.currentRequestPromise}finally{this.currentRequestPromise=null}}))}}class tN{constructor(e,t,n){this.checkoutConfiguration=e,this.apiHost=t,this.goalsFetchPromise=n}getGoals(){return(0,c.sH)(this,void 0,void 0,(function*(){return Se()?this.fetchGoals():ue.success([])}))}prepareWidgetGoalsResponse(e){return this.processGoalHierarchy(e)}prepareResolvedConfigWidgetGoalsResponse(e){return e.map((e=>this.mapResolvedConfigWidgetGoal(e)))}mapResolvedConfigWidgetGoal(e){return{id:e.key,name:e.name,code:e.code,parentId:null,repeat:e.repeat,default:e.default}}mapWidgetGoal(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;var n;return{id:e.key,name:e.name,code:"",parentId:t,repeat:e.repeat,default:null!==(n=e.default)&&void 0!==n?n:null}}processGoalHierarchy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=[];for(const i of e){const e=this.mapWidgetGoal(i,t);if(n.push(e),"children"in i){const e=this.processGoalHierarchy(i.children,i.key);n.push(...e)}}return n}fetchGoals(){return(0,c.sH)(this,void 0,void 0,(function*(){const e={locale:this.checkoutConfiguration.environmentConfig.locale,widgetKey:this.checkoutConfiguration.campaign.key};try{const t=yield(0,ce.Em)({url:`${this.apiHost}/checkout/getGoals`,method:"POST",headers:{"Content-Type":"text/plain; charset=utf-8"},params:e});if(!t.valid)throw new Error("Invalid response");const n=this.prepareWidgetGoalsResponse(t.data);return ue.success(n)}catch(e){return ue.fail(e)}}))}}class nN{constructor(e,t){this.designationsApi=e,this.checkoutState=t,this.fetchGoalsPromise=null}tryFetchGoals(){return null!==this.fetchGoalsPromise||(this.fetchGoalsPromise=this.fetchAndSetGoals()),this.fetchGoalsPromise}fetchAndSetGoals(){return(0,c.sH)(this,void 0,void 0,(function*(){const e=yield this.designationsApi.getGoals();ue.isSuccess(e)&&this.checkoutState.designations.setAllGoals(e.successResult)}))}}const iN=(e,t,n,i)=>{const s=new tN(e,n,i);return new nN(s,t)};class sN{constructor(e,t){this.checkoutConfiguration=e,this.checkoutState=t}tryApply(){var e;(null===(e=this.checkoutConfiguration.external.flow)||void 0===e?void 0:e.type)===Ft.CRYPTO&&(this.tryApplyCurrency(),this.tryApplyAmount())}tryApplyCurrency(){var e,t;(null===(t=null===(e=this.checkoutConfiguration.external.state)||void 0===e?void 0:e.donation)||void 0===t?void 0:t.currency)&&this.checkoutState.donation.setCurrency(this.checkoutConfiguration.external.state.donation.currency)}tryApplyAmount(){var e,t;void 0!==(null===(t=null===(e=this.checkoutConfiguration.external.state)||void 0===e?void 0:e.donation)||void 0===t?void 0:t.amount)&&this.checkoutState.donation.setAmount(this.checkoutConfiguration.external.state.donation.amount)}}class aN{constructor(e){this.options=e}tryApply(){return(0,c.sH)(this,void 0,void 0,(function*(){var e,t;(yield null===(e=this.options.restoreParamsApplier)||void 0===e?void 0:e.tryApply())||(this.options.entryParamsApplier.tryApply(),yield null===(t=this.options.adaptiveParamsApplier)||void 0===t?void 0:t.tryApply())}))}}class oN{constructor(e,t,n){this.checkoutConfiguration=e,this.checkoutState=t,this.entryDonationExternalParamsApplier=n}tryApply(){this.entryDonationExternalParamsApplier.tryApply(),this.tryApplyDesignationParams(),this.tryApplyTributeParams(),this.tryApplyCommentParams(),this.tryApplySupporterParams()}tryApplyDesignationParams(){var e,t;(null===(t=null===(e=this.checkoutConfiguration.external.state)||void 0===e?void 0:e.designation)||void 0===t?void 0:t.id)&&this.checkoutState.designation.setGoal(this.checkoutConfiguration.external.state.designation.id)}tryApplyTributeParams(){var e,t,n,i,s,a;(null===(t=null===(e=this.checkoutConfiguration.external.state)||void 0===e?void 0:e.tribute)||void 0===t?void 0:t.type)===ts.NONE&&this.checkoutState.tribute.setActive(!1),(null===(i=null===(n=this.checkoutConfiguration.external.state)||void 0===n?void 0:n.tribute)||void 0===i?void 0:i.inHonorOf)&&(this.checkoutState.tribute.setTributeeName(this.checkoutConfiguration.external.state.tribute.inHonorOf),this.checkoutState.tribute.setActive(!0)),(null===(a=null===(s=this.checkoutConfiguration.external.state)||void 0===s?void 0:s.tribute)||void 0===a?void 0:a.isSelected)&&(this.checkoutState.tribute.setOriented(!0),this.checkoutState.tribute.setActive(!0))}tryApplyCommentParams(){var e;(null===(e=this.checkoutConfiguration.external.state)||void 0===e?void 0:e.comment)&&this.checkoutState.comment.saveComment(this.checkoutConfiguration.external.state.comment)}tryApplySupporterParams(){var e,t,n,i,s,a;(null===(t=null===(e=this.checkoutConfiguration.external.state)||void 0===e?void 0:e.supporter)||void 0===t?void 0:t.firstName)&&this.checkoutState.privacy.setDonorFirstName(this.checkoutConfiguration.external.state.supporter.firstName),(null===(i=null===(n=this.checkoutConfiguration.external.state)||void 0===n?void 0:n.supporter)||void 0===i?void 0:i.lastName)&&this.checkoutState.privacy.setDonorLastName(this.checkoutConfiguration.external.state.supporter.lastName),(null===(a=null===(s=this.checkoutConfiguration.external.state)||void 0===s?void 0:s.supporter)||void 0===a?void 0:a.email)&&this.checkoutState.privacy.setDonorEmail(this.checkoutConfiguration.external.state.supporter.email)}}class rN{constructor(){this.updateListeners=new Set}synchronize(){this.checkoutStateSynchronizer.synchronize()}onStateUpdate(e){return this.updateListeners.add(e),()=>this.updateListeners.delete(e)}syncUpdate(){this.updateListeners.forEach((e=>e()))}}class cN extends rN{constructor(e,t,n,i,s,a,o,r,c,l,u,d,h,m,p,g,y){super(),this.donation=e,this.designation=t,this.designations=n,this.tribute=i,this.preDonationUpsell=s,this.postDonationUpsell=a,this.privacy=o,this.paymentOptions=r,this.giftAid=c,this.communicationConsent=l,this.mailingAddress=u,this.comment=d,this.doubleTheDonation=h,this.questions=m,this.remindMeLater=p,this.process=g,this.checkoutStateSynchronizer=y}}const lN={[ts.MEMORY]:"In Memory",[ts.HONOR]:"In Honor",[ts.NONE]:""};ts.MEMORY,ts.HONOR,ts.NONE;class uN{static get emptyAmountOptions(){return{once:[],every4weeks:[],monthly:[],daily:[],weekly:[],biweekly:[],bimonthly:[],quarterly:[],semiannual:[],annual:[]}}static get emptyDefaultAmounts(){return{once:0,monthly:0,daily:0,weekly:0,biweekly:0,bimonthly:0,quarterly:0,semiannual:0,annual:0}}constructor(e,t,n,i,s,a,o,r,c,l,u,d,h,m,p,g,y,f,E){var S;this._checkoutConfiguration=e,this.checkoutState=t,this._checkoutUIState=n,this.sessionService=i,this.sessionAPI=s,this.tracker=a,this.currencyService=o,this.intl=r,this.iframeWindow=c,this.sentry=l,this.paymentScreen=u,this.eventEmitter=d,this.checkoutAPIBridge=h,this.debug=m,this.experiments=p,this.paymentAPI=g,this.logger=y,this._redirectApi=f,this.params=E,this.shouldFindMandatoryScreen=!1,this._closeSessionPromise=null,(null===(S=this.checkoutConfiguration.fundraisingPage)||void 0===S?void 0:S.key)&&(this.checkoutUIState.askPageActiveTab=Yr.FUNDRAISER)}get redirectApi(){return this._redirectApi}get checkoutUIState(){return this._checkoutUIState}get checkoutConfiguration(){return this._checkoutConfiguration}get campaignConfig(){return this.checkoutConfiguration.campaign.config}get defaultAmountOptions(){return this.checkoutConfiguration.defaultAmountOptions}get company(){return this.checkoutConfiguration.company}get livemode(){return this.checkoutConfiguration.infrastructureParams.livemode}get isPaid(){return this.processDataPoint.isCompleted()}get isPaymentStarted(){return!1}get canCloseSession(){return!this.sessionService.closed&&this.isPaid}reloadCheckout(e){return(0,c.sH)(this,void 0,void 0,(function*(){if(this.tracker.trackCheckoutClose(),yield fo(20),e){const t=new URL(window.location.href);Object.entries(e).forEach((e=>{let[n,i]=e;t.searchParams.set(n,i)})),window.location.replace(t)}else window.location.reload()}))}initialize(){return(0,c.sH)(this,void 0,void 0,(function*(){this.sessionService.updateSession(),this.checkoutUIState.preloadComponents()}))}dispose(){return(0,c.sH)(this,void 0,void 0,(function*(){}))}tryToCloneOnceFrequencyToAnnual(){}isMultipleRecurringPlanTestGroup1(){return!1}isMultipleRecurringPlanTestGroup2(){return!1}exposeMultipleRecurringPlanCheckoutExperiment(){}exposeMultipleRecurringPlanCampaignPagesExperiment(){}updateSession(e){return this.sessionService.updateSession(e)}abandonSession(){return this.sessionService.abandonSession()}tryCloseSession(){return(0,c.sH)(this,void 0,void 0,(function*(){if(this._closeSessionPromise)return this._closeSessionPromise;if(this.canCloseSession){this._closeSessionPromise=this.closeSession();try{yield this._closeSessionPromise}finally{this._closeSessionPromise=null}}}))}onStateUpdate(e){return this.checkoutState.onStateUpdate(e)}syncUpdateCheckoutState(){this.checkoutState.syncUpdate()}setRemoveCloseGuard(e){this._removeCloseGuard=e}disarmCloseGuard(){this._removeCloseGuard&&this._removeCloseGuard()}updateSessionWidgetDefaults(){this.sessionService.updateSessionWidgetDefaults()}setScreenHistoryToSession(e){this.sessionService.setScreenHistory(e)}get designationDataPoint(){return this.checkoutState.designation.dataPoint}handlePaymentRedirect(e){return(0,c.sH)(this,void 0,void 0,(function*(){e===this.params.screenSet.thankYou&&this.canRedirect&&(this.debug.log("simulating additional pay delay before redirect"),yield fo(uN.ADDITIONAL_PAY_DELAY),this.debug.log("it my log in checkout service"),this.debug.log("redirecting"),yield this.tryCloseSession(),yield this.redirectApi.tryRedirect(this))}))}getCommonPublicCheckoutDonationParams(e){return(0,c.sH)(this,void 0,void 0,(function*(){const t=this.donorNameDataPoint,n=this.donorEmailDataPoint,i=this.tributeDataPoint,s=this.onBehalfOfDataPoint,a=this.processDataPoint,o=this.donateAnonymousDataPoint,r=this.communicationConsentDataPoint,c=this.checkoutConfiguration.campaign.config,l=i.toObject(),u=t.toObject(),d=n.toObject(),h=this.getDonationParams();return(e=>{let{params:t,tributeDataPointDTO:n,donorNameDataPointDTO:i,donorEmailDataPointDTO:s,anonymousDataPoint:a,onBehalfOfDataPoint:o,designationDataPoint:r,commentDataPoint:c,communicationConsentDataPoint:l,processDataPoint:u,donationParams:d,campaign:h,currencyService:m,isPaid:p}=e;var g,y;const f=n.isActive&&!!n.inHonorOf;return{supporter:{id:(null===(g=u.completedData)||void 0===g?void 0:g.customerId)||null,email:s.email,firstName:i.firstName,lastName:i.lastName,anonymous:h.showAnonymous&&a.anonymousChecked,mailingListSubscribed:l.isAnyConsentAccepted,employer:t.employerName||null,onBehalfOf:o.isOnBehalfOf?o.companyName:null},comment:c.comment||null,donation:u.completedData&&p?{id:u.completedData.donationId,paymentMethod:(E=t.clientPaymentMethod,{[De._.CARD]:"CreditCard",[De._.APPLE_PAY]:"ApplePay",[De._.GOOGLE_PAY]:"GooglePay",[De._.PAYPAL]:"PayPal",[De._.VENMO]:"Venmo",[De._.US_BANK_ACCOUNT]:"ACH",[De._.AU_BECS]:"BECS",[De._.UK_BACS]:"Bacs",[De._.ACSS]:"PAD",[De._.SEPA]:"SEPA",[De._.IDEAL]:"iDEAL",[De._.CRYPTO]:"Crypto"}[E]||""),amount:m.toFloat(d.total,d.currency),feesCovered:m.toFloat(d.publicFee,d.currency),currency:d.currency,recurring:d.frequency!==W.ONCE,frequency:d.frequency}:null,designation:r.goalKey&&p?{id:r.goalKey,name:r.goalName,code:r.goalCode}:null,tribute:f?{type:(S=n.type,S&&lN[S]||"")}:null,recurring:(null===(y=u.completedData)||void 0===y?void 0:y.recurringId)&&p?{id:u.completedData.recurringId}:null};var E,S})({params:e,tributeDataPointDTO:l,donorEmailDataPointDTO:d,donorNameDataPointDTO:u,campaign:c,anonymousDataPoint:o,isPaid:this.isPaid,onBehalfOfDataPoint:s,processDataPoint:a,donationParams:h,currencyService:this.currencyService,designationDataPoint:this.designationDataPoint,commentDataPoint:this.commentDataPoint,communicationConsentDataPoint:r})}))}getCommonPublicCheckoutIntentParams(){return(0,c.sH)(this,void 0,void 0,(function*(){const e=this.tributeDataPoint,t=this.donorNameDataPoint,n=this.donorEmailDataPoint,i=this.remindMeLaterDataPoint,s=e.toObject(),a=t.toObject(),o=n.toObject(),r=this.getDonationParams();return(e=>{let{flowType:t,tributeDataPointDTO:n,donorNameDataPointDTO:i,donorEmailDataPointDTO:s,designationDataPoint:a,commentDataPoint:o,remindMeLaterDataPoint:r,donationParams:c,isPaid:l}=e;const u=n.isActive&&!!n.inHonorOf;return l?null:{flowType:t,checkoutSettings:{modifyAmount:c.canModifyAmount,designation:a.goalKey,modifyDesignation:a.modifyDesignation},comment:o.comment,donation:{amount:c.amount,currency:c.currency,recurring:c.frequency!==W.ONCE,frequency:c.frequency,selectedHintId:c.selectedHintId},supporter:{email:s.email,firstName:i.firstName,lastName:i.lastName},tribute:u?{type:n.type,labelType:n.labelType,inHonorOf:n.inHonorOf}:null,isSavedEmailOnExit:r.used,feeCovered:c.feeCovered}})({flowType:this.type,designationDataPoint:this.designationDataPoint,commentDataPoint:this.commentDataPoint,remindMeLaterDataPoint:i,tributeDataPointDTO:s,donorNameDataPointDTO:a,donorEmailDataPointDTO:o,donationParams:r,isPaid:this.isPaid})}))}capturePayErrorToSentry(e){e&&(e instanceof ce.GI&&0===e.statusCode||this.sentry.captureException(e))}emitDonationComplete(){return(0,c.sH)(this,void 0,void 0,(function*(){const e=yield this.getPublicCheckoutDonationParams();this.checkoutAPIBridge.emitDonationComplete(e),this.logger.donationComplete({key:this.checkoutConfiguration.campaign.key,name:this.checkoutConfiguration.campaign.name},Object.assign(Object.assign({},e),this.checkoutAPIBridge.getOpenParams()))}))}handleDonationCompleted(e){return(0,c.sH)(this,void 0,void 0,(function*(){const t=[this.emitDonationComplete(),this.tracker.trackCheckoutCharge({donationId:e.donationId,clientPaymentMethod:e.clientPaymentMethod,duration:e.duration})];yield Promise.all(t)}))}get commentDataPoint(){return this.checkoutState.comment.dataPoint}get canRedirect(){const e=this.checkoutState instanceof cN?this.checkoutState.postDonationUpsell.dataPoint:null;return e?this.redirectApi.canRedirect()&&!e.isEnabled:this.redirectApi.canRedirect()}get donorEmailDataPoint(){return this.checkoutState.privacy.donorEmailDataPoint}get donorNameDataPoint(){return this.checkoutState.privacy.donorNameDataPoint}get donateAnonymousDataPoint(){return this.checkoutState.privacy.donateAnonymousDataPoint}get onBehalfOfDataPoint(){return this.checkoutState.privacy.onBehalfOfDataPoint}get tributeDataPoint(){return this.checkoutState.tribute.dataPoint}get remindMeLaterDataPoint(){return this.checkoutState.remindMeLater.dataPoint}get communicationConsentDataPoint(){return this.checkoutState.communicationConsent.dataPoint}get processDataPoint(){return this.checkoutState.process.dataPoint}closeSession(){return(0,c.sH)(this,void 0,void 0,(function*(){yield this.sessionService.updateSession(),yield this.sessionService.closeSession()}))}}uN.ADDITIONAL_PAY_DELAY=1*Gn.MS.SECOND;class dN extends uN{constructor(){super(...arguments),this._isPaymentCompleted=!1,this.donationStatusInterval=null}get isPaymentCompleted(){return this._isPaymentCompleted}get type(){return this.checkoutState.process.dataPoint.flowType}getPaymentScreen(e,t){return this.paymentScreen.get(e,t)}dispose(){const e=Object.create(null,{dispose:{get:()=>super.dispose}});return(0,c.sH)(this,void 0,void 0,(function*(){return this.clearDonationStatusInterval(),e.dispose.call(this)}))}hold(){return(0,c.sH)(this,void 0,void 0,(function*(){if(this.checkoutConfiguration.infrastructureParams.showcase)return ue.fail({});try{return yield this.sessionService.updateSession(),yield this.paymentAPI.hold({clientPaymentMethod:D._h.CRYPTO}),ue.success(void 0)}catch(e){return ue.fail({shouldLeave:!1})}}))}pay(e){return(0,c.sH)(this,arguments,void 0,(function(e){var t=this;let{screen:n,predictedNextScreen:i}=e;return function*(){if(t.checkoutConfiguration.infrastructureParams.showcase)return ue.fail({});t.checkoutState.process.setInProgress();const e=Date.now(),s=yield t.sessionService.updateSession();if(ue.isFailure(s))return t.payErrorMessage=t.intl.translate("common.errorOccurredText"),ue.fail({});let a;try{a=yield t.paymentAPI.pay()}catch(e){return t.capturePayErrorToSentry(e),ue.fail({})}return ue.isFailure(a)?ue.fail({}):a.successResult.data.cryptoData?(t.checkoutState.cryptoWallet.setAddress(a.successResult.data.cryptoData.address),t.checkoutState.process.setCompleted({donationId:a.successResult.data.donationId,customerId:a.successResult.data.customerId,tributeId:a.successResult.data.tributeId,tributeDonorPortalLink:a.successResult.data.tributeDonorPortalLink}),t.watchForPaymentStatus({donationId:a.successResult.data.donationId,startPayTimestamp:e,screen:n}),yield t.handlePaymentRedirect(i),ue.success(void 0)):ue.fail({})}()}))}saveCheckoutClosePublicParams(){return(0,c.sH)(this,void 0,void 0,(function*(){const[e,t]=yield Promise.all([this.getPublicCheckoutDonationParams(),this.getCommonPublicCheckoutIntentParams()]);this.checkoutAPIBridge.setDonationParams(e),this.checkoutAPIBridge.setIntentParams(t)}))}getDonationParams(){const e=this.donationDataPoint,t=e.toObject();return{amount:t.amount,total:t.total,currency:t.currency,frequency:t.frequency,canModifyAmount:e.canModifyAmount,publicFee:0}}getPublicCheckoutDonationParams(){return(0,c.sH)(this,void 0,void 0,(function*(){return this.getCommonPublicCheckoutDonationParams({clientPaymentMethod:D._h.CRYPTO,employerName:null})}))}get donationDataPoint(){return this.checkoutState.donation.dataPoint}watchForPaymentStatus(e){this.donationStatusInterval=setInterval((()=>(0,c.sH)(this,void 0,void 0,(function*(){(yield this.paymentAPI.status())&&(this.clearDonationStatusInterval(),this.handleDonationCompleted({donationId:e.donationId,clientPaymentMethod:D._h.CRYPTO,screen:e.screen,duration:e.startPayTimestamp-Date.now()}),this._isPaymentCompleted=!0)}))),5e3)}clearDonationStatusInterval(){this.donationStatusInterval&&clearInterval(this.donationStatusInterval)}}class hN{}class mN extends hN{constructor(e,t,n){super(),this.designationStateService=e,this.mailingAddressStateService=t,this.remindMeLaterStateService=n}synchronize(){this.syncDesignation(),this.syncMailingAddress(),this.syncRemindMeLater()}onDonationChange(){this.syncDesignation(),this.syncMailingAddress()}onPrivacyChange(){this.syncRemindMeLater()}syncDesignation(){this.designationStateService.synchronize()}syncMailingAddress(){this.mailingAddressStateService.synchronize()}syncRemindMeLater(){this.remindMeLaterStateService.synchronize()}}class pN{constructor(e){this.dataPointRegistry=e}}function gN(e){return e===W.ONCE?ui.ONE_TIME:ui.RECURRING}class yN extends pN{constructor(e){super(e),this.dataPointRegistry=e}synchronize(){const e=gN(this.dataPointRegistry.getDataPoint(fl.DONATION).frequency);this.designationDataPoint.hasSelectedGoalWithRepeat(e)||this.designationDataPoint.setComputedGoalKeyByGoalRepeat(e)}get designationDataPoint(){return this.dataPointRegistry.getDataPoint(Hr.DESIGNATION)}}class fN{constructor(e,t,n,i,s){this.checkoutConfiguration=e,this.currencyService=t,this.mailingAddressModule=n,this.paymentMethodAvailabilityManagerRepository=i,this.dataPointRegistry=s}isEnabled(){return this.mailingAddressModuleCheckoutScreenLogic.isEnabled(this.totalInCustomCurrency,this.mailingAddressModuleCheckoutScreenParams)}isRequired(){return this.mailingAddressModuleCheckoutScreenLogic.isRequired(this.totalInCustomCurrency,this.mailingAddressModuleCheckoutScreenParams)}get mailingAddressModuleCheckoutScreenLogic(){return this.mailingAddressModule.getCheckoutScreenLogic()}get campaignConfig(){return this.checkoutConfiguration.campaign.config}get totalInCustomCurrency(){const e=this.dataPointRegistry.getDataPoint(fl.DONATION),t=this.mailingAddressModule.getCurrencyLogic({widget:this.campaignConfig});return this.currencyService.convert(e.total,e.currency,t.currency)}get mailingAddressModuleCheckoutScreenParams(){return{mailingRequired:this.campaignConfig.mailingRequired,mailingRequiredFromAmount:this.campaignConfig.mailingRequiredFromAmount,showMailing:this.campaignConfig.showMailing,showMailingFromAmount:this.campaignConfig.showMailingFromAmount,paymentMethodAvailabilityManagerRepository:this.paymentMethodAvailabilityManagerRepository,paymentMethod:null,paymentMethodCountry:null,isGiftAidAccepted:!1}}}class EN extends pN{constructor(e,t){super(e),this.dataPointRegistry=e,this.mailingAddressAvailabilityService=t}synchronize(){this.mailingAddressDataPoint.computed.setAvailability({isEnabled:this.mailingAddressAvailabilityService.isEnabled(),isRequired:this.mailingAddressAvailabilityService.isRequired()})}get mailingAddressDataPoint(){return this.dataPointRegistry.getDataPoint(Hr.MAILING_ADDRESS)}}class SN{constructor(e,t){this.checkoutConfiguration=e,this.dataPointRegistry=t}isAvailable(){return!(!this.checkoutConfiguration.isAbandonedDonationsEnabled||this.isDonorEmailValid&&this.isTermsAndConditionsValid)}get isDonorEmailValid(){return this.dataPointRegistry.getDataPoint(Hr.DONOR_EMAIL).validate().isValid}get isTermsAndConditionsValid(){return this.dataPointRegistry.getDataPoint(Hr.TERMS_AND_CONDITIONS).validate().isValid}}class vN extends SN{}class AN extends pN{constructor(e,t){super(e),this.dataPointRegistry=e,this.remindMeLaterAvailabilityService=t}synchronize(){const e=this.remindMeLaterAvailabilityService.isAvailable();this.remindMeLaterDataPoint.computed.setAvailability(e)}get remindMeLaterDataPoint(){return this.dataPointRegistry.getDataPoint(Hr.REMIND_ME_LATER)}}class CN extends AN{}class PN extends rN{constructor(e,t,n,i,s,a,o,r,c,l,u,d,h){super(),this.donation=e,this.cryptoWallet=t,this.designation=n,this.designations=i,this.mailingAddress=s,this.comment=a,this.privacy=o,this.communicationConsent=r,this.questions=c,this.tribute=l,this.remindMeLater=u,this.process=d,this.checkoutStateSynchronizer=h}}class NN{constructor(e,t){this.dataPointRegistry=e,this.checkoutStateSynchronizer=t}perform(e){e(),this.triggerSynchronization()}}class bN extends NN{get dataPoint(){return this.dataPointRegistry.getDataPoint(Hr.COMMENT)}setIsRequired(e){this.perform((()=>{this.dataPoint.setIsRequired(e)}))}setIsActive(e){this.perform((()=>{this.dataPoint.setIsActive(e)}))}saveComment(e){this.perform((()=>{this.dataPoint.saveComment(e)}))}savePrevComment(){this.perform((()=>{this.dataPoint.savePrevComment()}))}}class DN extends bN{triggerSynchronization(){}}class TN extends NN{get dataPoint(){return this.dataPointRegistry.getDataPoint(Hr.COMMUNICATION_CONSENT)}setCustomizedChannelState(e,t){this.perform((()=>{t?this.dataPoint.acceptCustomizedConsent(e):this.dataPoint.rejectCustomizedConsent(e)}))}setGeneralConsentState(e){this.perform((()=>{e?this.dataPoint.acceptGeneralConsent():this.dataPoint.rejectGeneralConsent()}))}resetCustomizedConsent(){this.perform((()=>{this.dataPoint.rejectAll()}))}setGeneralConsentShown(){this.perform((()=>{this.dataPoint.setGeneralConsentShown()}))}setCustomizedConsentShown(){this.perform((()=>{this.dataPoint.setCustomizedConsentShown()}))}}class _N extends TN{triggerSynchronization(){}}class kN extends NN{get dataPoint(){return this.dataPointRegistry.getDataPoint(fl.CRYPTO_WALLET)}setAddress(e){this.perform((()=>{this.dataPoint.setAddress(e)}))}triggerSynchronization(){}}class ON extends NN{get dataPoint(){return this.dataPointRegistry.getDataPoint(Hr.DESIGNATION)}setGoal(e){this.perform((()=>{this.dataPoint.setGoalKey(e,gN(this.donationDataPoint.frequency))}))}}class IN extends ON{get donationDataPoint(){return this.dataPointRegistry.getDataPoint(fl.DONATION)}triggerSynchronization(){}}class xN extends NN{get dataPoint(){return this.dataPointRegistry.getDataPoint(Hr.DESIGNATIONS)}addSelectedGoal(e){this.perform((()=>{this.dataPoint.addSelectedGoal(e)}))}removeSelectedGoal(e){this.perform((()=>{this.dataPoint.removeSelectedGoal(e)}))}setAsOnlySelectedGoal(e,t){this.perform((()=>{this.dataPoint.setSingleSelectedGoal(e,t)}))}setAllGoals(e){this.dataPoint.setAllGoals(e)}setSelectedGoals(e){this.perform((()=>{this.dataPoint.setSelectedGoals(e)}))}}class wN extends xN{triggerSynchronization(){}}class RN extends NN{}class MN extends RN{get dataPoint(){return this.dataPointRegistry.getDataPoint(fl.DONATION)}setAmountByDefault(e){this.perform((()=>{this.dataPoint.setAmountByDefault(e)}))}setAmount(e){this.perform((()=>{this.dataPoint.setAmount(e)}))}setCurrency(e){this.perform((()=>{this.dataPoint.setCurrency(e)}))}triggerSynchronization(){this.checkoutStateSynchronizer.onDonationChange()}}class LN extends NN{get dataPoint(){return this.dataPointRegistry.getDataPoint(Hr.MAILING_ADDRESS)}setLine1(e){this.perform((()=>{this.dataPoint.setLine1(e)}))}setLine2(e){this.perform((()=>{this.dataPoint.setLine2(e)}))}setCity(e){this.perform((()=>{this.dataPoint.setCity(e)}))}setRegion(e){this.perform((()=>{this.dataPoint.setRegion(e)}))}setPostal(e){this.perform((()=>{this.dataPoint.setPostal(e)}))}setCountryCode(e){this.perform((()=>{this.dataPoint.setCountryCode(e)}))}setCountryCodeIfEmptyAddress(e){this.perform((()=>{this.dataPoint.setCountryCodeIfEmptyAddress(e)}))}setCityIfEmpty(e){this.perform((()=>{this.dataPoint.setCityIfEmpty(e)}))}setLine1IfEmpty(e){this.perform((()=>{this.dataPoint.setLine1IfEmpty(e)}))}setLine2IfEmpty(e){this.perform((()=>{this.dataPoint.setLine2IfEmpty(e)}))}setRegionIfEmpty(e){this.perform((()=>{this.dataPoint.setRegionIfEmpty(e)}))}setPostalIfEmpty(e){this.perform((()=>{this.dataPoint.setPostalIfEmpty(e)}))}setSkipped(e){this.perform((()=>{this.dataPoint.setSkipped(e)}))}}class UN extends LN{triggerSynchronization(){}}class FN extends NN{get donorNameDataPoint(){return this.dataPointRegistry.getDataPoint(Hr.DONOR_NAME)}get customerTitleDataPoint(){return this.dataPointRegistry.getDataPoint(Hr.CUSTOMER_TITLE)}get donorEmailDataPoint(){return this.dataPointRegistry.getDataPoint(Hr.DONOR_EMAIL)}get phoneNumberDataPoint(){return this.dataPointRegistry.getDataPoint(Hr.PHONE_NUMBER)}get onBehalfOfDataPoint(){return this.dataPointRegistry.getDataPoint(Hr.ON_BEHALF_OF)}get donateAnonymousDataPoint(){return this.dataPointRegistry.getDataPoint(Hr.DONATE_ANONYMOUS)}get termsAndConditionsDataPoint(){return this.dataPointRegistry.getDataPoint(Hr.TERMS_AND_CONDITIONS)}setDonorFirstName(e){this.perform((()=>{this.donorNameDataPoint.setFirstName(e)}))}setDonorFirstNameIfEmpty(e){this.perform((()=>{this.donorNameDataPoint.setFirstNameIfEmpty(e)}))}setDonorLastName(e){this.perform((()=>{this.donorNameDataPoint.setLastName(e)}))}setDonorLastNameIfEmpty(e){this.perform((()=>{this.donorNameDataPoint.setLastNameIfEmpty(e)}))}setDonorFullName(e){this.perform((()=>{this.donorNameDataPoint.setFullName(e)}))}setDonorFullNameIfEmpty(e){this.perform((()=>{this.donorNameDataPoint.setFullNameIfEmpty(e)}))}setDonorTitle(e){this.perform((()=>{this.customerTitleDataPoint.setTitle(e)}))}setDonorEmail(e){this.perform((()=>{this.donorEmailDataPoint.setEmail(e)}))}setDonorEmailIfEmpty(e){this.perform((()=>{this.donorEmailDataPoint.setEmailIfEmpty(e)}))}setOnBehalfOfActive(e){this.perform((()=>{this.onBehalfOfDataPoint.setIsActive(e)}))}setOnBehalfOfCompanyName(e){this.perform((()=>{this.onBehalfOfDataPoint.setCompanyName(e)}))}setPhoneNumber(e){this.perform((()=>{this.phoneNumberDataPoint.setPhone(e)}))}setPhoneNumberIfEmpty(e){this.perform((()=>{this.phoneNumberDataPoint.setPhoneIfEmpty(e)}))}setPhoneCountryCode(e){this.perform((()=>{this.phoneNumberDataPoint.setCountryCode(e)}))}setPhoneCountryCodeIfEmptyPhone(e){this.perform((()=>{this.phoneNumberDataPoint.setCountryCodeIfEmptyPhone(e)}))}setPhoneCleanNumber(e){this.perform((()=>{this.phoneNumberDataPoint.setCleanPhone(e)}))}setDonateAnonymousChecked(e){this.perform((()=>{this.donateAnonymousDataPoint.setAnonymousChecked(e)}))}setTermsAndConditionsAccepted(e){this.perform((()=>{this.termsAndConditionsDataPoint.setIsAccepted(e)}))}}class jN extends FN{triggerSynchronization(){}}class BN extends NN{get dataPoint(){return this.dataPointRegistry.getDataPoint(Hr.PROCESS)}setInProgress(){this.perform((()=>{this.dataPoint.setInProgress()}))}setCompleted(e){this.perform((()=>{this.dataPoint.setCompleted(e)}))}setError(e){this.perform((()=>{this.dataPoint.setError(e)}))}}class GN extends BN{triggerSynchronization(){}}class qN extends NN{get dataPoint(){return this.dataPointRegistry.getDataPoint(Hr.QUESTIONS)}setAnswer(e,t){this.perform((()=>{this.dataPoint.setAnswer(e,t)}))}}class HN extends qN{triggerSynchronization(){}}class VN extends NN{get dataPoint(){return this.dataPointRegistry.getDataPoint(Hr.REMIND_ME_LATER)}setState(e){this.perform((()=>{this.dataPoint.setState(e)}))}}class KN extends VN{triggerSynchronization(){}}class YN extends NN{get dataPoint(){return this.dataPointRegistry.getDataPoint(Hr.TRIBUTE)}setActive(e){this.perform((()=>{this.dataPoint.setActive(e)}))}setOriented(e){this.perform((()=>{this.dataPoint.setOriented(e)}))}setTributeeName(e){this.perform((()=>{this.dataPoint.setTributeeName(e)}))}}class zN extends YN{triggerSynchronization(){}}var WN,$N=n(1688);!function(e){e.DONATION="FiatDonation",e.GIFT_AID="GiftAid",e.PAYMENT_OPTIONS="PaymentOptions",e.PRE_DONATION_UPSELL="PreDonationUpsell",e.UK_BACS="UKBacs",e.US_BANK_ACCOUNT="USBankAccount",e.POST_DONATION_UPSELL="PostDonationUpsell",e.DTD="DTD"}(WN||(WN={}));class XN{constructor(e){this.sessionAPI=e}validate(e){return(0,c.sH)(this,void 0,void 0,(function*(){const t=yield this.sessionAPI.post("mailingAddress",Object.assign({},e),{rejectsOnInvalid:!0});return ue.isSuccess(t)?t.successResult:{valid:!1,validated:!0}}))}}class QN{constructor(e){this.checkoutConfiguration=e}toObject(){return{}}validate(){return{isValid:!0}}}class ZN extends QN{}const JN=1e7;class eb extends ZN{constructor(e,t,n){super(e),this.checkoutConfiguration=e,this.currencyService=t,this.suggestionsService=n,this._currency="BTC",this._defaultCurrency="BTC",this._amount=0,this._defaultAmountInFiat=0,this._canModifyAmount=!0,this._canSelectCurrency=!0,this.currencyList.includes(this.currency)||(this._currency=this.currencyList[0],this._defaultCurrency=this.currencyList[0]),this.setAmountByDefault(this.defaultCurrency)}get currency(){return this._currency}get defaultCurrency(){return this._defaultCurrency}get amount(){return this._amount}get defaultAmountInFiat(){return this._defaultAmountInFiat}get canModifyAmount(){return this._canModifyAmount}get canSelectCurrency(){return this._canSelectCurrency}get frequency(){return W.ONCE}get minAmount(){return 100}get maxAmount(){return 1e8}get defaultAmount(){return 5e5}get total(){return this.amount||0}get amountInUSD(){return this.amount?this.currencyService.convert(this.amount,this.currency,"USD"):null}get totalInUSD(){return this.currencyService.convert(this.total,this.currency,"USD")}get defaultFiatCurrency(){return this.checkoutConfiguration.campaign.config.defaultCurrency}get amountInDefaultFiat(){return this.currencyService.convert(this.amount||0,this.currency,this.defaultFiatCurrency)}get totalInDefaultCurrency(){return this.total}get currencyNetworkData(){return this.currencyService.getCryptoCurrency(this.currency)}get currencyList(){const e=this.checkoutConfiguration.company.cryptoProvider;return e?this.currencyService.getCurrencyCodesBySource(e):["BTC"]}getDefaultAmountsInCurrency(){return this.total}validate(){const e=null!==this.amount,t=!e||this.validateMinAmount(),n=!e||this.validateMaxAmount(),i={isValid:e&&t&&n,errors:{min:!t,max:!n,required:!e}};return{isValid:i.isValid,fields:{amount:i}}}toObject(){return{amount:this.amount||0,total:this.amount||0,currency:this.currency,frequency:this.frequency}}setAmountByDefault(e){this._amount=this.getDefaultAmountInCurrency(e),this._defaultAmountInFiat=this.amountInDefaultFiat}getDefaultAmountInCurrency(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.currency;const t=this.currencyService.convert(this.defaultAmount,"USD",e),n=this.currencyService.toFloat(t,e),i=this.getAmountByDefaultMultiplier(n);return this.beautify(t*i,e)/i}getDefaultTotalInCurrency(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.currency;return this.getDefaultAmountInCurrency(e)}setAmount(e){this._amount=e}setCurrency(e){this._currency=e}validateMinAmount(){return!!this.amountInUSD&&this.amountInUSD>=this.minAmount}validateMaxAmount(){return!this.amountInUSD||this.amountInUSD<=this.maxAmount}getAmountByDefaultMultiplier(e){let t=1;return e<10?t=this.getBaseMultiplier(e):e>JN&&(t=this.getBaseMultiplier(e/JN,0)),t}getBaseMultiplier(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=-Math.floor(Math.log10(e));return Math.pow(10,n+t)}beautify(e,t){return this.suggestionsService.beautify(e,t)}}class tb{constructor(e){this.params=e,this.guessedCurrency=this.guessCurrency(),this.currency=this.guessedCurrency}getCurrency(){return this.currency}getGuessedCurrency(){return this.guessedCurrency}setCurrency(e){this.currency=e}guessAndSetCurrency(e){this.guessedCurrency=this.guessCurrency(e),this.currency=this.guessedCurrency}guessCurrency(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.params.isRecurring;const t=this.params.countryCurrencies,n=this.params.guessedCurrencies,i=this.params.defaultCurrency;return this.params.shouldDisableCurrencyGuess?i:this.params.isCurrencyGuessEnabled&&this.params.isCurrencyChangeEnabled?e&&!this.params.isCurrencyChangeEnabledForRecurring?i:t.length&&n.includes(t[0])?t[0]:i:i}}var nb=n(9268);class ib{constructor(e){var t;this.amount=e.amount,this.amountHint=e.amountHint,this.isEndDateActiveValue=null===(t=e.isEndDateActive)||void 0===t||t}getAmount(){return this.amount}getAmountHint(){return this.amountHint}isEndDateActive(){return this.isEndDateActiveValue}getDto(){return{amount:this.amount,amountHint:this.amountHint,isEndDateActive:this.isEndDateActiveValue}}setAmount(e){this.amount=e}setAmountHint(e){this.amountHint=e}setEndDateActive(e){this.isEndDateActiveValue=e}}class sb{constructor(e){this.donationItemFrequenciesMap=new Map,this.id=function(e){e=e||16;let t="";for(let n=0;n<e;n++)t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".charAt(Math.floor(52*Math.random()));return t}(),Object.entries(e.frequencies).forEach((e=>{let[t,n]=e;this.donationItemFrequenciesMap.set(t,new ib(n))})),this.frequency=e.defaultFrequency}getId(){return this.id}getFrequency(){return this.frequency}getAmount(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.frequency;return this.getDonationItemFrequency(e).getAmount()}getAmountHint(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.frequency;return this.getDonationItemFrequency(e).getAmountHint()}isEndDateActive(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.frequency;return this.getDonationItemFrequency(e).isEndDateActive()}getDto(){const e={};return this.donationItemFrequenciesMap.forEach(((t,n)=>{e[n]=t.getDto()})),{id:this.getId(),amount:this.getAmount(),amountHint:this.getAmountHint(),isEndDateActive:this.isEndDateActive(),frequency:this.getFrequency(),frequencies:e}}setFrequency(e){this.frequency=e}setAmount(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.frequency;this.getDonationItemFrequency(t).setAmount(e)}setAmountHint(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.frequency;this.getDonationItemFrequency(t).setAmountHint(e)}setEndDateActive(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.frequency;this.getDonationItemFrequency(t).setEndDateActive(e)}getDonationItemFrequency(e){const t=this.donationItemFrequenciesMap.get(e);if(!t)throw new Error(`Donation item frequency not found for frequency: ${e}`);return t}}class ab{constructor(e){this.frequency=e.frequency,this.config=e.config,this.strategies=e.strategies,this.defaultAmount=this.getInitialDefaultAmount(e.initialCurrency)}getDefaultAmount(){return this.defaultAmount}setDefaultAmount(e){this.defaultAmount=e}convertAmount(e,t,n){return this.strategies.default.calculate(e,t,n)}handleCurrencyChange(e,t){this.defaultAmount=this.strategies.default.calculate(this.defaultAmount,e,t)}getInitialDefaultAmount(e){return this.getInitialStrategy().calculate(this.config.frequencies[this.frequency].defaultAmount,this.config.defaultCurrency,e)}getInitialStrategy(){return this.config.ai.isEnabled?this.config.ai.shouldDisableAmountAI?this.strategies.default:this.strategies.ai:this.strategies.default}}function ob(e,t){return t*(1+e/100)}function rb(e,t){let n=[e/4,e/3,e/2,e,1.3*e];return 3===t.length&&(n=[e/2,e]),t=t.sort(((e,t)=>e-t)),n.forEach(((e,n)=>{const i=n+1;t[i]<5e4&&(t[i]=t[i]*(1+e/100))})),t=t.sort(((e,t)=>t-e))}function cb(e,t){return t===_i.ASC?e.sort(((e,t)=>e-t)):t===_i.DESC?e.sort(((e,t)=>t-e)):e}class lb{constructor(e){this.config=e.config,this.frequencyMinimalAmount=e.frequencyMinimalAmount,this.currencyService=e.currencyService,this.suggestionsService=e.suggestionsService,this.trend=e.config.ai.trend[e.frequency]}calculate(e,t,n){if(null===e)return e;if(this.shouldUseNullAmount())return null;const i=this.calculateConvertedAmount(e,t,n),s=this.calculateAIAmount(i,n);return this.calculateBeautifiedAmount(s,n)}shouldUseNullAmount(){return!1===this.config.ai.companyExperiments.settings.hasDefault&&!0!==this.config.ai.companyExperiments.shouldDisableHasDefault}calculateConvertedAmount(e,t,n){return this.currencyService.convert(e,t,n,!0,this.config.ai.userCountryCode)}calculateAIAmount(e,t){return this.trend?this.calculateAIAmountByTrend(e,t):this.calculateAIAmountByXFactor(e)}calculateAIAmountByTrend(e,t){const n=this.currencyService.convert(this.trend,this.config.defaultCurrency,t),i=this.calculateMinimalAIAmountByTrend(e);return Math.max(n,i)}calculateMinimalAIAmountByTrend(e){return e-e/lb.AMOUNT_DECREASE_PERCENTAGE_THRESHOLD}calculateAIAmountByXFactor(e){return ob(this.config.ai.xFactor,e)}calculateBeautifiedAmount(e,t){return this.suggestionsService.beautify(e,t,this.frequencyMinimalAmount.getMinimalAmount())}}lb.AMOUNT_DECREASE_PERCENTAGE_THRESHOLD=10;class ub{constructor(e){this.frequencyMinimalAmount=e.frequencyMinimalAmount,this.currencyService=e.currencyService,this.suggestionsService=e.suggestionsService}calculate(e,t,n){if(null===e)return e;if(t===n)return e;const i=this.currencyService.convert(e,t,n);return this.suggestionsService.beautify(i,n,this.frequencyMinimalAmount.getMinimalAmount())}}class db{constructor(e){this.config=e.config,this.frequencyAmountHintsSelector=e.frequencyAmountHintsSelector,this.frequencyMinimalAmount=e.frequencyMinimalAmount,this.currencyService=e.currencyService,this.suggestionsService=e.suggestionsService,this.amountHintsInDefaultCurrency=this.frequencyAmountHintsSelector.getSelectedAmountHints(),this.amountHints=this.calculate(e.initialCurrency)}getAmountHints(){return this.amountHints}getDefaultAmountHint(){var e,t;return null!==(t=null===(e=this.amountHints)||void 0===e?void 0:e.find((e=>e.default)))&&void 0!==t?t:null}setAmountHints(e,t){this.frequencyAmountHintsSelector.setSelectedAmountHints(e),this.amountHintsInDefaultCurrency=this.frequencyAmountHintsSelector.getSelectedAmountHints(),this.amountHints=this.calculate(t)}setDefaultAmountHint(e,t){this.frequencyAmountHintsSelector.setDefaultAmountHint(e),this.amountHintsInDefaultCurrency=this.frequencyAmountHintsSelector.getSelectedAmountHints(),this.amountHints=this.calculate(t)}handleCurrencyChange(e){this.amountHints=this.calculate(e)}calculate(e){if(!this.amountHintsInDefaultCurrency)return null;if(this.config.defaultCurrency===e)return this.amountHintsInDefaultCurrency;const t=this.frequencyMinimalAmount.getMinimalAmount(),n=this.amountHintsInDefaultCurrency.map((e=>e.amount)).map((t=>this.currencyService.convert(t,this.config.defaultCurrency,e))),i=this.suggestionsService.beautify(n,e,t);return this.amountHintsInDefaultCurrency.map(((e,t)=>Object.assign(Object.assign({},e),{amount:i[t]})))}}class hb{calculateSelectedAmountHintsIds(e,t){if(e.length<6)throw new Error("Hints count is less than 6");const n=e.filter((e=>t.includes(e.id))),i=e.filter((e=>!t.includes(e.id)));for(;n.length<3;){const e=Math.floor(Math.random()*i.length);n.push(i[e]),i.splice(e,1)}return n.sort(((e,t)=>e.amount-t.amount)).slice(0,3).map((e=>e.id))}calculateDefaultAmountHintId(e,t){return t[Math.floor(Math.random()*t.length)]}}class mb{calculateSelectedAmountHintsIds(e){const t=e.filter((e=>e.active));if(t.length<3)throw new Error("Active hints count is less than 3");return t.sort(((e,t)=>e.amount-t.amount)).slice(0,3).map((e=>e.id))}calculateDefaultAmountHintId(e,t){var n;const i=e.filter((e=>t.includes(e.id))).find((e=>e.default));return null!==(n=null==i?void 0:i.id)&&void 0!==n?n:t[0]}}class pb{constructor(e){this.frequency=e.frequency,this.config=e.config,this.currencyService=e.currencyService,this.selectionStrategies=e.strategies,this.availableAmountHints=this.calculateAvailableAmountHints(),this.selectionStrategy=this.calculateSelectionStrategy(),this.selectedAmountHintsIds=this.calculateSelectedAmountHintsIds(),this.defaultAmountHintId=this.calculateDefaultAmountHintId()}getSelectedAmountHints(){if(!this.availableAmountHints||!this.selectedAmountHintsIds)return null;const e=[];for(const t of this.selectedAmountHintsIds){const n=this.availableAmountHints.find((e=>e.id===t));n&&e.push(Object.assign(Object.assign({},n),{default:n.id===this.defaultAmountHintId}))}return e}setSelectedAmountHints(e){if(!this.availableAmountHints)return;const t=e.filter((e=>{var t;return null===(t=this.availableAmountHints)||void 0===t?void 0:t.some((t=>t.id===e))}));this.selectedAmountHintsIds=this.calculateSelectedAmountHintsIds(t),this.defaultAmountHintId=this.calculateDefaultAmountHintId()}setDefaultAmountHint(e){this.availableAmountHints&&this.selectedAmountHintsIds&&this.selectedAmountHintsIds.some((t=>t===e))&&(this.defaultAmountHintId=e)}calculateAvailableAmountHints(){const e=this.config.frequencies[this.frequency];if(!e.hintsEnabled)return null;const t=e.suggestedAmountHints;return t&&t.length?t.map(((e,n)=>{const i=function(e){let{index:t,frequency:n,enabledAI:i,lastAmount:s}=e;const a=n===W.ONCE,o=i?a?Cn:An:a?vn:Sn,r=o.length;return r>=t+1?o[t]:s?(c=s+Pn)%Pn==0?c:Math.ceil(c/Pn)*Pn:o[r-1]+(t+1-r)*Pn;var c}({index:n,frequency:this.frequency,enabledAI:this.config.ai.isEnabled,lastAmount:t[t.length-1].amount}),s=e.amount||i,a=this.currencyService.convert(s,this.config.defaultCurrency,"USD");return Object.assign(Object.assign({},e),{amount:s,amountUsd:a})})):null}calculateSelectionStrategy(){return this.config.ai.isEnabled?this.selectionStrategies.ai:this.selectionStrategies.default}calculateSelectedAmountHintsIds(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.availableAmountHints?this.selectionStrategy.calculateSelectedAmountHintsIds(this.availableAmountHints,e):null}calculateDefaultAmountHintId(){return this.availableAmountHints&&this.selectedAmountHintsIds?this.selectionStrategy.calculateDefaultAmountHintId(this.availableAmountHints,this.selectedAmountHintsIds):null}}class gb{constructor(e){this.frequency=e.frequency,this.config=e.config,this.strategies=e.strategies,this.strategy=this.getInitialStrategy(),this.amountSuggestionsInDefaultCurrency=this.getInitialAmountSuggestionsInDefaultCurrency(),this.amountSuggestions=this.calculate(e.initialCurrency)}getAmountSuggestions(){return this.amountSuggestions}getAmountSuggestionsInDefaultCurrency(){return this.amountSuggestionsInDefaultCurrency}setAmountSuggestions(e,t){this.strategy=this.strategies.default,this.amountSuggestionsInDefaultCurrency=e,this.amountSuggestions=t}handleCurrencyChange(e){this.amountSuggestions=this.calculate(e)}getInitialStrategy(){return this.config.ai.isEnabled?this.config.ai.shouldDisableSuggestionsAI?this.strategies.default:this.strategies.ai:this.strategies.default}getInitialAmountSuggestionsInDefaultCurrency(){const e=this.config.frequencies[this.frequency].amountOptions;return yn[this.frequency].map(((t,n)=>e[n]||t))}calculate(e){return this.strategy.calculate(this.amountSuggestionsInDefaultCurrency,e)}}class yb{constructor(e){this.config=e.config,this.currencyService=e.currencyService,this.suggestionsService=e.suggestionsService,this.frequencyMinimalAmount=e.frequencyMinimalAmount}calculate(e,t){let n=[...e];const i=this.frequencyMinimalAmount.getMinimalAmount();return n=this.convertAmountsToCurrency(n,t),n=rb(this.config.ai.xFactor,n),n=this.applyMultiplierAndMinimalAmount(n,i),n=this.suggestionsService.beautify(n,t,i),n=this.applyAscSort(n),n}get shouldApplySuggestionsMultiplier(){return!this.config.ai.companyExperiments.shouldDisableMultiplySuggestions&&Boolean(this.config.ai.companyExperiments.settings.multiplySuggestions)}get shouldApplyAscSort(){return!this.config.ai.companyExperiments.shouldDisableAscSort&&Boolean(this.config.ai.companyExperiments.settings.ascSort)}convertAmountsToCurrency(e,t){return this.config.defaultCurrency===t?e:e.map((e=>this.currencyService.convert(e,this.config.defaultCurrency,t,!0,this.config.ai.userCountryCode)))}applyMultiplierAndMinimalAmount(e,t){return e.map((e=>{let n=e;return this.shouldApplySuggestionsMultiplier&&(n=e*yb.SUGGESTIONS_MULTIPLIER),Math.max(n,t)}))}applyAscSort(e){return cb([...e],this.shouldApplyAscSort?_i.ASC:_i.DESC)}}yb.SUGGESTIONS_MULTIPLIER=1.4;class fb{constructor(e){this.config=e.config,this.frequencyMinimalAmount=e.frequencyMinimalAmount,this.currencyService=e.currencyService,this.suggestionsService=e.suggestionsService}calculate(e,t){if(this.config.defaultCurrency===t)return e;const n=e.map((e=>this.currencyService.convert(e,this.config.defaultCurrency,t,!1)));return this.suggestionsService.beautify(n,t,this.minimalAmount)}get minimalAmount(){return this.frequencyMinimalAmount.getMinimalAmount()}}function Eb(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;const t=new Date(Date.parse(new Date(e).toISOString())+1e3*(new Date).getTimezoneOffset()*60);return new Date(t.getFullYear(),t.getMonth(),t.getDate(),23,59,59,999)}class Sb{constructor(e){const t=Eb(),n=e.config.frequencies[e.frequency].endDate;this.endDate=n?Eb(n):null,this.hasEndDate=e.config.frequencies[e.frequency].hasEndDate,this.shouldShow=this.hasEndDate&&!!this.endDate&&this.endDate>=t}}class vb{constructor(e){this.frequency=e.frequency,this.config=e.config,this.currencyService=e.currencyService,this.minimalAmountInDefaultCurrency=this.getMinimalAmountInDefaultCurrency(),this.minimalAmount=this.calculate(e.initialCurrency)}getMinimalAmount(){return this.minimalAmount}handleCurrencyChange(e){this.minimalAmount=this.calculate(e)}getMinimalAmountInDefaultCurrency(){var e;return Math.max(null!==(e=this.config.frequencies[this.frequency].minAmount)&&void 0!==e?e:0,this.currencyService.getMinAmount(this.config.defaultCurrency))}calculate(e){const t=this.currencyService.convert(this.minimalAmountInDefaultCurrency,this.config.defaultCurrency,e);return this.currencyService.ceil(t,e)}}class Ab{constructor(e){this.frequencyServicesMap=new Map,this.donationItemsMap=new Map,this.config=e.config,this.initializeFrequencyServices(e),this.initializeDonationItems()}get isMultipleDonationItems(){return this.donationItemsMap.size>1}getDonationItems(){return[...this.donationItemsMap.values()].map((e=>e.getDto()))}getDonationItemsAmount(){let e=0,t=!1;for(const n of this.donationItemsMap.values()){const i=n.getAmount();"number"==typeof i&&(t=!0),e+=null!=i?i:0}return t?e:null}setDonationItemFrequency(e,t){this.getDonationItem(e).setFrequency(t)}setDonationItemAmount(e,t,n){const i=this.getDonationItem(e);i.setAmount(t,n),i.setAmountHint(null,n)}setDonationItemAmountHint(e,t,n){var i;const s=this.getDonationItem(e);s.setAmount(null!==(i=null==t?void 0:t.amount)&&void 0!==i?i:null,n),s.setAmountHint(t,n)}setDonationItemHint(e,t,n){this.getDonationItem(e).setAmountHint(t,n)}setDonationItemEndDateActive(e,t,n){this.getDonationItem(e).setEndDateActive(t,n)}addDonationItem(){const e=this.createDonationItem(),t=e.getId();return this.donationItemsMap.set(t,e),t}removeDonationItem(e){this.donationItemsMap.delete(e)}getFrequencyMinimalAmount(e){const{frequencyMinimalAmount:t}=this.getFrequencyServices(e);return t.getMinimalAmount()}getFrequencyDefaultAmount(e){const{frequencyAmount:t}=this.getFrequencyServices(e);return t.getDefaultAmount()}getFrequencyAmountSuggestions(e){const{frequencyAmountSuggestions:t}=this.getFrequencyServices(e);return t.getAmountSuggestions()}getFrequencyAmountSuggestionsInDefaultCurrency(e){const{frequencyAmountSuggestions:t}=this.getFrequencyServices(e);return t.getAmountSuggestionsInDefaultCurrency()}getFrequencyAmountHints(e){const{frequencyAmountHints:t}=this.getFrequencyServices(e);return t.getAmountHints()}getFrequencyEndDate(e){const{frequencyEndDate:t}=this.getFrequencyServices(e);return t}setFrequencyDefaultAmount(e,t){const{frequencyAmount:n}=this.getFrequencyServices(e);n.setDefaultAmount(t)}setFrequencyAmountSuggestions(e,t,n){const{frequencyAmountSuggestions:i}=this.getFrequencyServices(e);i.setAmountSuggestions(t,n)}setFrequencyAmountHints(e,t,n){const{frequencyAmountHints:i}=this.getFrequencyServices(e);i.setAmountHints(t,n)}setFrequencyDefaultAmountHint(e,t,n){const{frequencyAmountHints:i}=this.getFrequencyServices(e);i.setDefaultAmountHint(t,n)}handleCurrencyChange(e,t){this.handleFrequencyServicesCurrencyChange(e,t),this.handleDonationItemsCurrencyChange(e,t)}initializeFrequencyServices(e){Object.values(W).forEach((t=>{const n=(e=>{const t=(e=>new vb({frequency:e.frequency,initialCurrency:e.initialCurrency,config:e.config,currencyService:e.currencyService}))({frequency:e.frequency,initialCurrency:e.initialCurrency,config:e.config,currencyService:e.currencyService}),n=(e=>{const t=new ub({frequencyMinimalAmount:e.frequencyMinimalAmount,currencyService:e.currencyService,suggestionsService:e.suggestionsService}),n=new lb({frequency:e.frequency,config:e.config,frequencyMinimalAmount:e.frequencyMinimalAmount,currencyService:e.currencyService,suggestionsService:e.suggestionsService});return new ab({frequency:e.frequency,initialCurrency:e.initialCurrency,config:e.config,strategies:{default:t,ai:n}})})({frequency:e.frequency,initialCurrency:e.initialCurrency,config:e.config,frequencyMinimalAmount:t,currencyService:e.currencyService,suggestionsService:e.suggestionsService}),i=(e=>{const t=new fb({config:e.config,frequencyMinimalAmount:e.frequencyMinimalAmount,currencyService:e.currencyService,suggestionsService:e.suggestionsService}),n=new yb({config:e.config,frequencyMinimalAmount:e.frequencyMinimalAmount,currencyService:e.currencyService,suggestionsService:e.suggestionsService});return new gb({frequency:e.frequency,initialCurrency:e.initialCurrency,config:e.config,strategies:{default:t,ai:n}})})({frequency:e.frequency,initialCurrency:e.initialCurrency,config:e.config,frequencyMinimalAmount:t,currencyService:e.currencyService,suggestionsService:e.suggestionsService}),s=(e=>{const t=new mb,n=new hb,i=new pb({frequency:e.frequency,config:e.config,currencyService:e.currencyService,strategies:{default:t,ai:n}});return new db({initialCurrency:e.initialCurrency,config:e.config,frequencyAmountHintsSelector:i,frequencyMinimalAmount:e.frequencyMinimalAmount,currencyService:e.currencyService,suggestionsService:e.suggestionsService})})({frequency:e.frequency,initialCurrency:e.initialCurrency,config:e.config,frequencyMinimalAmount:t,currencyService:e.currencyService,suggestionsService:e.suggestionsService}),a=(e=>new Sb({frequency:e.frequency,config:e.config}))({frequency:e.frequency,config:e.config});return{frequencyMinimalAmount:t,frequencyAmount:n,frequencyAmountSuggestions:i,frequencyAmountHints:s,frequencyEndDate:a}})({frequency:t,initialCurrency:e.initialCurrency,config:e.config,currencyService:e.currencyService,suggestionsService:e.suggestionsService});this.frequencyServicesMap.set(t,n)}))}handleFrequencyServicesCurrencyChange(e,t){Object.values(W).forEach((n=>{const{frequencyMinimalAmount:i,frequencyAmount:s,frequencyAmountSuggestions:a,frequencyAmountHints:o}=this.getFrequencyServices(n);i.handleCurrencyChange(t),s.handleCurrencyChange(e,t),a.handleCurrencyChange(t),o.handleCurrencyChange(t)}))}initializeDonationItems(){const e=this.createDonationItem(),t=e.getId();this.donationItemsMap.set(t,e)}createDonationItem(){const e={};return Object.values(W).forEach((t=>{var n;const{frequencyAmount:i,frequencyAmountHints:s}=this.getFrequencyServices(t),a=i.getDefaultAmount(),o=s.getDefaultAmountHint();e[t]={amount:null!==(n=null==o?void 0:o.amount)&&void 0!==n?n:a,amountHint:o,isEndDateActive:!0}})),new sb({defaultFrequency:this.getDefaultFrequency(),frequencies:e})}handleDonationItemsCurrencyChange(e,t){this.donationItemsMap.forEach((n=>{Object.values(W).forEach((i=>{var s,a;const{frequencyAmount:o,frequencyAmountHints:r}=this.getFrequencyServices(i),c=r.getAmountHints(),l=n.getAmount(i),u=n.getAmountHint(i),d=o.convertAmount(l,e,t),h=null!==(s=null==c?void 0:c.find((e=>e.id===(null==u?void 0:u.id))))&&void 0!==s?s:null;n.setAmount(null!==(a=null==h?void 0:h.amount)&&void 0!==a?a:d,i),n.setAmountHint(h,i)}))}))}getFrequencyServices(e){const t=this.frequencyServicesMap.get(e);if(!t)throw new Error(`Frequency services are not found for frequency: ${e}`);return t}getDonationItem(e){const t=this.donationItemsMap.get(e);if(!t)throw new Error(`Donation item is not found for id: ${e}`);return t}getDefaultFrequency(){const e=Object.values(W).find((e=>this.config.frequencies[e].default));if(!e)throw new Error("Default frequency is not found");return e}}class Cb extends ZN{static get defaultValidationResult(){return{isValid:!0,fields:{amount:{isValid:!0,errors:{required:!1,min:!1,max:!1}},donationItems:{isValid:!0,items:[]}}}}constructor(e,t,n,i,s){super(e),this.checkoutConfiguration=e,this.currencyService=t,this.transactionCosts=s,this.feeCoveringSuggestionSnapshot=D.XN.ONLY_NO,this.donationCurrency=function(e){const{checkoutConfiguration:t}=e;return new tb({defaultCurrency:t.campaign.config.defaultCurrency,countryCurrencies:[...t.currencies.countryCurrencies],guessedCurrencies:[...t.guessedCurrencies],isRecurring:t.defaultFrequency!==W.ONCE,isCurrencyChangeEnabled:t.campaign.config.currencyEnabled,isCurrencyChangeEnabledForRecurring:t.campaign.config.currencyEnabledRecurrings,isCurrencyGuessEnabled:t.campaign.config.guessCurrency,shouldDisableCurrencyGuess:t.infrastructureParams.showcase})}({checkoutConfiguration:e}),this.donationItems=function(e){var t;const{initialCurrency:n,checkoutConfiguration:i,currencyService:s,suggestionsService:a,userSession:o}=e,r=i.campaign.config.experimentsSettings[i.infrastructureParams.isMobile?D.Jy.MOBILE:D.Jy.DESKTOP];return new Ab({initialCurrency:n,config:{frequencies:mi(i.campaign.config).frequencies,defaultCurrency:i.campaign.config.defaultCurrency,ai:{isEnabled:i.campaign.config.enableAI&&!i.infrastructureParams.showcase,shouldDisableAmountAI:i.hasExternalAmount,trend:i.campaign.config.trend,xFactor:ri(o,i.infrastructureParams.isMobile),userCountryCode:null!==(t=i.user.address.countryCode)&&void 0!==t?t:nb.t.UNITED_STATES,companyExperiments:{settings:r,shouldDisableMultiplySuggestions:i.isLauncher}}},currencyService:s,suggestionsService:a})}({initialCurrency:this.donationCurrency.getCurrency(),checkoutConfiguration:e,currencyService:t,suggestionsService:n,userSession:i}),this.synchronizeFee()}get amount(){return this.donationItems.getDonationItemsAmount()}get totalInUSD(){return this.currencyService.convert(this.total,this.currency,"USD")}get totalInDefaultCurrency(){return this.currencyService.convert(this.total,this.currency,this.checkoutConfiguration.defaultCurrency)}get fee(){return this.transactionCosts.getFee(this.donationItems,this.currency)}get fees(){return this.transactionCosts.getFees(this.donationItems,this.currency)}get processingFee(){return this.transactionCosts.getProcessingFee(this.donationItems,this.currency)}get processingFees(){return this.transactionCosts.getProcessingFees(this.donationItems,this.currency)}get feeCoveringSuggestion(){return this.feeCoveringSuggestionSnapshot}get frequency(){return this.getInitialDonationItem().frequency}get currency(){return this.donationCurrency.getCurrency()}get allDefaultAmounts(){const e={};return Object.values(W).forEach((t=>{e[t]=this.donationItems.getFrequencyDefaultAmount(t)})),e}get allAmountSuggestions(){const e={};return Object.values(W).forEach((t=>{e[t]=this.donationItems.getFrequencyAmountSuggestions(t)})),e}get allAmountHints(){const e={};return Object.values(W).forEach((t=>{e[t]=this.donationItems.getFrequencyAmountHints(t)})),e}get amountHint(){const e=this.getInitialDonationItem().frequencies[this.frequency].amountHint;return e?Object.assign(Object.assign({},e),{default:!0}):null}get maxAmount(){const e=(0,Ki.Bm)(this.currency),t="9".repeat(e);return parseInt(t,10)}get total(){const e=this.checkoutConfiguration.infrastructureParams.showcase?1e4:0;return this.transactionCosts.getTotal(this.donationItems,this.currency)||this.transactionCosts.getTotalForAmount(e,this.currency)}get guessedCurrency(){return this.donationCurrency.getGuessedCurrency()}get isFeeCovered(){return this.transactionCosts.isCovered}get isCustomFeeCoveredValue(){return this.transactionCosts.isCustomCoveredValue}get amountInUSD(){return this.amount?this.currencyService.convert(this.amount,this.currency,"USD"):null}get includeFees(){return this.transactionCosts.includeFees}get isDonationEndDateActive(){return this.getInitialDonationItem().frequencies[this.frequency].isEndDateActive}get donationItemsDto(){return this.donationItems.getDonationItems()}get maxDonationItems(){return 5}get isMultipleDonations(){return this.donationItems.isMultipleDonationItems}getFrequencyDefaultAmount(e){return this.donationItems.getFrequencyDefaultAmount(e)}getFrequencyDefaultTotal(e){const t=this.getFrequencyDefaultAmount(e);return this.transactionCosts.getTotalForAmount(null!=t?t:0,this.currency)}getFrequencyAmountSuggestions(e){return this.donationItems.getFrequencyAmountSuggestions(e)}getFrequencyAmountSuggestionsInDefaultCurrency(e){return this.donationItems.getFrequencyAmountSuggestionsInDefaultCurrency(e)}getFrequencyMinimalAmount(e){return this.donationItems.getFrequencyMinimalAmount(e)}getFrequencyMinimalTotal(e){const t=this.getFrequencyMinimalAmount(e);return this.transactionCosts.getTotalForAmount(t,this.currency)}getFrequencyAmountHints(e){const t=this.donationItems.getFrequencyAmountHints(e);return t?t.map((e=>{var t;return Object.assign(Object.assign({},e),{default:(null===(t=this.amountHint)||void 0===t?void 0:t.id)===e.id})})):null}getFrequencyDonationEndDate(e){return this.donationItems.getFrequencyEndDate(e)}addDonation(){const e=this.donationItems.addDonationItem();this.donationItems.setDonationItemFrequency(e,this.frequency)}removeDonation(e){this.donationItems.removeDonationItem(e)}setDonationsAmount(e){if(this.donationItems.isMultipleDonationItems)this.setDistributedByWeightsAmounts(e);else{const t=this.getInitialDonationItem();this.setDonationAmountByFrequency(t.id,e)}this.synchronizeFee()}setDonationsAmountHint(e){if(this.setDefaultAmountsApplied(),this.donationItems.isMultipleDonationItems){this.setDistributedByWeightsAmounts(e.amount);for(const t of this.donationItems.getDonationItems())this.donationItems.setDonationItemHint(t.id,e,t.frequency)}else{const t=this.getInitialDonationItem();this.donationItems.setDonationItemAmountHint(t.id,e,this.frequency)}this.synchronizeFee()}setDonationsFrequency(e){for(const t of this.donationItems.getDonationItems())this.donationItems.setDonationItemFrequency(t.id,e);!this.isCurrencyEditableForFrequency(e)&&this.setCurrency(this.checkoutConfiguration.defaultCurrency),this.synchronizeFee()}setCurrency(e){const t=this.currency,n=this.getFrequencyDefaultAmount(this.frequency),i=this.amount,s=this.amountHint;this.donationCurrency.setCurrency(e),this.donationItems.handleCurrencyChange(t,e),n!==i&&!s&&this.setDonationsAmount(i),this.synchronizeFee()}setFeeCovered(e,t){this.transactionCosts.isCovered=e,void 0!==(null==t?void 0:t.isCustomFeeCoveredValue)&&(this.transactionCosts.isCustomCoveredValue=t.isCustomFeeCoveredValue),this.snapshotFeeCoveringSuggestion()}setFrequencyDefaultAmount(e,t){const n=this.getInitialDonationItem();this.donationItems.setFrequencyDefaultAmount(e,t),this.donationItems.setDonationItemAmount(n.id,t,e),this.synchronizeFee()}setFrequencyAmountSuggestions(e,t,n){this.donationItems.setFrequencyAmountSuggestions(e,t,n)}setFrequencyAmountHints(e,t,n){this.donationItems.setFrequencyAmountHints(e,t,n)}setFrequencyAmountHint(e,t){const n=this.getInitialDonationItem();this.donationItems.setDonationItemAmountHint(n.id,t,e),this.synchronizeFee()}setDonationsEndDateActive(e){for(const t of this.donationItems.getDonationItems())this.donationItems.setDonationItemEndDateActive(t.id,e)}setDonationAmount(e,t){this.setDonationAmountByFrequency(e,t),this.synchronizeFee()}validate(){const e=null!==this.amount,t=!e||this.validateMinAmount(),n=!e||this.validateMaxAmount(),i={isValid:t&&n&&e,errors:{min:!t,max:!n,required:!e}},s=this.validateDonationItems();return{isValid:i.isValid,fields:{amount:i,donationItems:s}}}snapshotFeeCoveringSuggestion(){this.isCustomFeeCoveredValue||(this.includeFees!==D.XN.ONLY_NO?this.includeFees!==D.XN.ONLY_YES?this.feeCoveringSuggestionSnapshot=this.isFeeCovered?D.XN.DEFAULT_YES:D.XN.DEFAULT_NO:this.feeCoveringSuggestionSnapshot=D.XN.ONLY_YES:this.feeCoveringSuggestionSnapshot=D.XN.ONLY_NO)}toObject(){return{amount:this.amount||0,currency:this.currency,frequency:this.frequency,total:this.total}}setDefaultAmountsApplied(){for(const e of Object.values(W))this.getFrequencyAmountHints(e)?this.setDefaultAmountHintAppliedForFrequency(e):this.setDefaultAmountAppliedForFrequency(e)}synchronizeFee(){this.transactionCosts.calculateFeeAvailability({donations:this.donationItems,currency:this.currency}),this.isCustomFeeCoveredValue||this.includeFees!==D.XN.SMART_COVERING||this.transactionCosts.calculateSmartFeeCovering({amountInUSD:this.amountInUSD,frequency:this.frequency}),this.snapshotFeeCoveringSuggestion()}isCurrencyEditableForFrequency(e){const t=this.checkoutConfiguration.campaign.config;return e===W.ONCE?t.currencyEnabled:t.currencyEnabled&&t.currencyEnabledRecurrings}getInitialDonationItem(){const[e]=this.donationItems.getDonationItems();return e}validateMinAmount(){const e=this.getFrequencyMinimalAmount(this.frequency);return!!this.amount&&this.amount>=e}validateMaxAmount(){if(null===this.amount)return!0;const{length:e}=this.amount.toString();return e<=(0,Ki.Bm)(this.currency)}validateDonationItems(){const e=this.donationItems.getDonationItems().map((e=>this.validateDonationItem(e)));return{isValid:e.every((e=>e.isValid)),items:e}}validateDonationItem(e){const t=null!==e.amount,n=!t||!e.amount||this.validateDonationItemMinAmount(e.amount),i=!t||!e.amount||this.validateDonationItemMaxAmount(e.amount),s={isValid:n&&i&&t,errors:{min:!n,max:!i,required:!t}};return{isValid:s.isValid,amount:s}}validateDonationItemMinAmount(e){const t=this.getFrequencyMinimalAmount(this.frequency);return e>0&&e>=t}validateDonationItemMaxAmount(e){const{length:t}=e.toString();return t<=(0,Ki.Bm)(this.currency)}setDefaultAmountAppliedForFrequency(e){const t=this.donationItems.getFrequencyDefaultAmount(e);for(const n of this.donationItems.getDonationItems())this.donationItems.setDonationItemAmount(n.id,t,e)}setDefaultAmountHintAppliedForFrequency(e){var t,n;const i=null!==(n=null===(t=this.donationItems.getFrequencyAmountHints(e))||void 0===t?void 0:t.find((e=>e.default)))&&void 0!==n?n:null;for(const t of this.donationItems.getDonationItems())this.donationItems.setDonationItemAmountHint(t.id,i,e)}setDonationAmountByFrequency(e,t){const n=this.getFrequencyDefaultAmount(this.frequency)===t;for(const i of Object.values(W)){const s=this.getFrequencyDefaultAmount(i);this.donationItems.setDonationItemAmount(e,n?s:t,i)}}setDistributedByWeightsAmounts(e){const t=this.donationItems.getDonationItems();if(null===e){for(const e of t)this.setDonationAmountByFrequency(e.id,null);return}const n=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=Math.pow(10,n);e=Math.round(e*i);let s=0;for(let e=0;e<t.length;++e)isNaN(t[e])&&(t[e]=0),s+=t[e];0===s&&(s=t.length,t=t.map((()=>1)));const a=[];let o=0;for(const n of t){const t=n/s,i=Math.floor(t*e);o+=i,a.push(i)}const r=Math.floor(e-o);for(let e=0;e<t.length;++e)e<r&&(a[e]=a[e]+1),a[e]=a[e]/i;return a}(e,t.map((e=>{var t;return null!==(t=e.amount)&&void 0!==t?t:0})),this.getPrecision());for(let e=0;e<t.length;++e)this.setDonationAmountByFrequency(t[e].id,n[e])}getPrecision(){return this.checkoutConfiguration.company.allowCentsForCharges?0:-1*this.currencyService.getDigits(this.currency)}}class Pb{constructor(){this._isPhoneNumberConsentEnabled=!1,this._isMailingAddressConsentEnabled=!1,this._gdprPolicy={customizedConsent:{basedOnGeoCountry:!1,basedOnGeoAndAddressRegion:!1},generalConsent:{basedOnGeoCountry:!1}}}get isPhoneNumberConsentEnabled(){return this._isPhoneNumberConsentEnabled}get isMailingAddressConsentEnabled(){return this._isMailingAddressConsentEnabled}get gdprPolicy(){return this._gdprPolicy}setPhoneNumberConsentEnabled(e){this._isPhoneNumberConsentEnabled=e}setMailingAddressConsentEnabled(e){this._isMailingAddressConsentEnabled=e}setGDPRPolicy(e){this._gdprPolicy=e}}var Nb,bb,Db,Tb,_b;(Nb||(Nb={})).NONE="";class kb{}!function(e){e.MR="Mr",e.MRS="Mrs",e.MISS="Miss",e.MS="Ms",e.MX="Mx",e.SIR="Sir",e.PROF="Prof",e.DR="Dr",e.REV="Rev",e.FR="Fr",e.DCN="Dcn",e.BR="Br",e.SR="Sr"}(bb||(bb={})),function(e){e.M="M",e.MME="Mme",e.MLLE="Mlle",e.AUTRE="Autre",e.MX="Mx"}(Db||(Db={})),function(e){e.HERR="Herr",e.FRAU="Frau",e.DR="Dr",e.PROF="Prof"}(Tb||(Tb={})),function(e){e.HERR="Herr",e.FRAU="Frau"}(_b||(_b={}));class Ob extends kb{constructor(){super(...arguments),this.isEnabled=!0,this.titles=Lb(Object.values(_b))}}class Ib extends kb{constructor(){super(...arguments),this.isEnabled=!1,this.titles=[]}}const xb=Array.from(new Set([Nb.NONE,...Object.values(bb),...Object.values(Db),...Object.values(Tb),...Object.values(_b)]));class wb extends kb{constructor(){super(...arguments),this.isEnabled=!0,this.titles=Lb(Object.values(Db))}}class Rb extends kb{constructor(){super(...arguments),this.isEnabled=!0,this.titles=Lb(Object.values(Tb))}}class Mb extends kb{constructor(){super(...arguments),this.isEnabled=!0,this.titles=Lb(Object.values(bb))}}function Lb(e){return[Nb.NONE,...e]}var Ub={isAvailableCustomerTitle:function(e){return!!e&&xb.includes(e)}},Fb=function(e){return function(e,t){switch(e){case Wg.UNITED_KINGDOM:return new Mb;case Wg.FRANCE:return new wb;case Wg.GERMANY:return new Rb;case Wg.AUSTRIA:return new Ob;case Wg.CANADA:return t===ne.D.FR_CA?new wb:new Ib;default:return new Ib}}(e.companyCountry,e.companyDefaultLocale)};const jb=[Tb.DR,Tb.PROF];class Bb extends kb{constructor(e){super(),this.originalLogic=e,this.filteredTitles=this.originalLogic.titles.filter((e=>!jb.includes(e)))}get isEnabled(){return this.originalLogic.isEnabled}get titles(){return this.filteredTitles}}Bb.COMPANY_KEY="ACUQBXBA";class Gb extends kb{constructor(e,t){super(),this.originalLogic=e,this.filteredTitles=this.originalLogic.titles.filter((e=>!t.includes(e)))}get isEnabled(){return this.originalLogic.isEnabled}get titles(){return this.filteredTitles}}const qb=[Db.MLLE,Db.AUTRE];var Hb,Vb,Kb,Yb,zb,Wb,$b,Xb,Qb,Zb,Jb,eD,tD,nD,iD,sD,aD,oD,rD,cD,lD=function(e){const t=Fb(e);switch(e.companyCountry){case Wg.FRANCE:return new Gb(t,qb);case Wg.CANADA:return e.companyDefaultLocale===ne.D.FR_CA?new Gb(t,qb):t;case Wg.GERMANY:return e.companyKey===Bb.COMPANY_KEY?new Bb(t):t;default:return t}};class uD extends QN{static get defaultValidationResult(){return{isValid:!0,fields:{title:{isValid:!0,errors:{required:!1}}}}}constructor(e){super(e),this.checkoutConfiguration=e,this._title=Nb.NONE;const t=this.checkoutConfiguration.company;this._customerTitlesLogic=lD({companyKey:t.key,companyCountry:t.country,companyDefaultLocale:t.localization.defaultLocale})}get isEnabled(){return this.checkoutConfiguration.campaign.config.customerTitle.show&&this._customerTitlesLogic.isEnabled}get isRequired(){return this.checkoutConfiguration.campaign.config.customerTitle.required&&this.isEnabled}get title(){return this._title}get titleList(){return this._customerTitlesLogic.titles}setTitle(e){this._title=e}toObject(){return{title:this.title}}validate(){const e=!this.isRequired||Ub.isAvailableCustomerTitle(this.title);return{isValid:e,fields:{title:{isValid:e,errors:{required:!e}}}}}}!function(e){e.TRILLIUM="AFHQHUFB",e.ANIMAL_HUMANE_SOCIETY="APZFWQVA",e.SOS_INTERNATIONAL="ASYXEBAM",e.MUSLIMI="APRVBZRU",e.DAILY_GIVING="AYEWEYZD",e.UNFPA="ACSRWCJP",e.UNICEF_NORGE="AMUBFBCE",e.ASCRS_FOUNDATION="ACYFHBCY",e.CLINTON_FOUNDATION="ACUVFNNB",e.BLINKNOW="AEDSCDSM",e.HICT_PARENT="AJDZGJPP",e.HICT="AKVNXBFW",e.GREATER_GOOD_CHARITIES="AHTMBNKF",e.STC="VMZETRCF",e.UNICEF="APQJSHGS",e.PIH="AJDEFYWC",e.AHA_PARENT="ARMPCVPV",e.AHA="ADQRERLU",e.BEST_FRIENDS="AFZUYXBL",e.NEVERTHIRSTWATER="RWHMSQPD",e.CORG="AZCENQQL",e.AUS="AGZKYDGZ",e.NDSTREET="ALTVXKWG",e.ALZ="AJGEZYBE",e.LUST="AEDVPKAW",e.ARTHRITIS="AUSMBFYM",e.FREEDOM_BAKERIES="AFKPNPQY",e.MASJID_AL_FURGAN="ASYLMXZK",e.FCA="AFLRJKTK",e.FOOD_FOR_THE_POOR="AGPURJCY",e.MPAC="ANSRXGKF",e.RFT="ACMRCWPB",e.CHILDMIND="ZSNREIBR",e.FUNDRAISE_UP_NYC="APWCYEMD",e.SALVATION_ARMY_UK="ASNVRJLX",e.MERCY_SHIPS_AU="AWKKWSUU",e.LONELY_ORPHANS="AUKZQSFX",e.ALZHEIMER_ASSOCIATION="AJGEZYBE",e.PANCREATIC_CANCER_UK="ATBTMWDS",e.THE_BAIL_PROJECT="AYHQYPSQ",e.OBAMA_FOUNDATION="AHNVSXNQ",e.SAFE_HORIZON="AWBJEPNJ",e.FEED_THE_CHILDREN="AHQLCMJQ",e.STAGING_FORWARD_BLUE="ANGUPPGC",e.STAGING_HELPING_HAND="HRMEIGNS",e.STAGING_HELPING_HAND_UK="AWKXSTZX",e.HELPING_HAND="MCJZDSLZ",e.INTERNATIONAL_JUSTICE_MISSION_UK="AGMQWWLR",e.GUIDE_DOGS="APLFUNKH",e.ROPSI="AJZSDMZE",e.ROPSI_AU="AESYHEDW",e.ROPSI_UK="ASHPENZB",e.ROPSI_CA="AZRBXHWY",e.FAMILY_ELDERCARE="ARRCDXDL",e.ENTERTAINMENT_INDUSTRY="ASXBZCVR",e.ONE_FOR_ISRAEL="ASBGJCET",e.TREVOR="ABGHKWJN",e.PARKINSON="AWQWPUEN",e.NAVY="ALAWCVJC",e.HONEST_REPORTING="ARBELMET",e.KCET="AEJGNVQN",e.OPSMILE="ATVPVDAJ",e.WIKIMEDIA_FOUNDATION="AVLMPSRU",e.ARBOR="ALPEXDKM",e.CANADIAN_RED_CROSS="ATVNLEWE",e.CANADIAN_CANCER_SOCIETY="APZMZAGU",e.WORLDWISH="AZFMPNQE",e.LUPUS="ARVHGABZ",e.CONCERN_WORLDWIDE="AGSTXLKM",e.DURHAM_RESCUE_MISSION="ALCUDRVC",e.MUSCULAR_DYSTROPHY_ASSOCIATION="AJGERPHC",e.TRILLIUM_HEALTH_FOUNDATION="AFHQHUFB",e.CANADIAN_WILDLIFE_FEDERATION="ASBNVYMX",e.HARVEST_MANITOBA="AVALTECL",e.MUSLIM_LEGAL_FUND="AAMRKAJS",e.WISHORG="AKVYFUBL",e.FORWARD_BLUE="AETRGCDZ",e.BRIGHTFOCUS="ASPUXQFL",e.BRIGHTFOCUS_ALZ="ABLMUZMD"}(Hb||(Hb={})),function(e){e.NOWHERE="nowhere",e.WIDGET="widget",e.URL="url"}(Vb||(Vb={})),function(e){e.THE_ADVENTURE_PROJECT="5a8b26d4f9891300017cc0fc"}(Kb||(Kb={})),function(e){e[e.MONEY_LEGACY_MIN=0]="MONEY_LEGACY_MIN",e[e.MONEY_MIN=200]="MONEY_MIN",e[e.MONEY_MAX=500]="MONEY_MAX",e[e.MONEY_DEFAULT=200]="MONEY_DEFAULT",e[e.CRYPTO_MIN=200]="CRYPTO_MIN",e[e.CRYPTO_MAX=1e3]="CRYPTO_MAX",e[e.CRYPTO_DEFAULT=500]="CRYPTO_DEFAULT"}(Yb||(Yb={})),function(e){e.ALWAYS="always",e.NEVER="never"}(zb||(zb={})),function(e){e.PER_INSTALLMENT="perInstallment",e.NONE="none"}(Wb||(Wb={})),function(e){e.UPPER="upper",e.PROPER="proper"}($b||($b={})),(cD=Xb||(Xb={})).AUTOMATIC="automatic",cD.MICRODEPOSITS="microdeposits",function(e){e.OFF="off",e.OPTIONAL="optional",e.REQUIRED="required"}(Qb||(Qb={})),function(e){e.INVALID_SSO_MODE="Invalid SSO mode.",e.TWO_FACTOR_AUTH_NOT_ALLOWED_WITH_SSS_REQUIRED="Cannot fulfill 2FA with SSO Required.",e.DOESNT_MATCH_RECORDS="The information you entered doesn't match our records.",e.COULDNT_MATCH_USER="We couldn't match this user email with an email from your identity provider.",e.USER_HAS_ANOTHER_ACTIVE_IDP_SESSION="Authentication failed. The email address used in the identity provider is different from the one you used to start the verification on the Dashboard. Make sure you use the same email in both places.",e.ENTITY_ID_ISSUE="The specified Issuer ID does not match the data in the IdP. Please check and ensure you've entered the correct Issuer ID.",e.EXPIRED_REQUEST="The authentication request has expired. The request is no longer valid as the allowed time has passed. Please re-authenticate to proceed.",e.CERTIFICATE_ISSUE="There was an issue validating the certificate. Ensure that your certificate is valid and correctly configured in your IdP.",e.SIGNATURE_ISSUE="The signature method used is not supported by our system. Please check and change the signature method in your IdP."}(Zb||(Zb={})),function(e){e.DOESNT_MATCH_RECORDS="DOESNT_MATCH_RECORDS",e.COULDNT_MATCH_USER="COULDNT_MATCH_USER"}(Jb||(Jb={})),function(e){e.ISSUER_ID="The specified Issuer ID does not match the data in the IdP. Please check and ensure you've entered the correct Issuer ID.",e.IDP_URL="The provided Identity provider URL is invalid or unreachable. Please verify the URL and ensure your IdP is accessible.",e.CERTIFICATE="There was an issue validating the certificate. Ensure that your certificate is valid and correctly configured in your IdP.",e.DEFAULT="An error occurred. Please try again later."}(eD||(eD={})),function(e){e.USER_HAS_ANOTHER_SSO="Your account has at least one user who is already using SSO to log into another account. Delete them from your account to enable SSO.",e.NO_VERIFIED_DOMAINS="SSO can’t be set to Required because no domains have been verified for this account yet.",e.USER_HAS_UNVERIFIED_EMAIL_DOMAIN="Your account has at least one user with an email address that belongs to an unverified domain. You should either enable SSO as Optional, verify the domains used by these users, or delete the users from your account.",e.BAD_SSO_CONFIGURATION="Bad SSO configuration.",e.CURRENT_USER_CANNOT_ENABLE_SSO="SSO cannot be set as required because {admin_email} is already using SSO authentication in another account."}(tD||(tD={})),function(e){e.ONLY_SSO_RESET_NOT_ALLOWED="This profile only uses SSO for login, so password reset is not possible."}(nD||(nD={})),function(e){e.USER_NOT_FOUND="User was not found"}(iD||(iD={})),function(e){e.RATE_LIMIT_IP_EXCEEDED="Too many attempts to log in from your IP address. Please try again later.",e.RATE_LIMIT_EMAIL_EXCEEDED="Too many attempts to log in from your IP address. Please try again later."}(sD||(sD={})),function(e){e.CHANGE_EMAIL_SSO_RESTRICTION_ERROR="changeEmailSsoRestrictionError",e.UPDATE_SSO_MODE_ERROR="UpdateSsoModeError",e.INVITE_USER_SSO_RESTRICTION_ERROR="inviteUserSsoRestrictionError"}(aD||(aD={})),function(e){e.NOT_SUCCESS="SAML response is not successful",e.WRONG_SAML_VERSION="SAML version is not 2.0",e.NO_ISSUE_INSTANT="IssueInstant is not found",e.INVALID_ISSUE_INSTANT="IssueInstant is invalid",e.NO_ISSUER="Issuer is not found or invalid",e.NO_ASSERTION="Assertion is not found",e.NO_SIGNATURE="Signature is not found or invalid",e.NO_EMAIL="Email is not found",e.NO_RESPONSE="Response is not found"}(oD||(oD={})),function(e){e.DEFAULT="Incorrect email or password."}(rD||(rD={}));class dD{constructor(){this._availableGoals=[],this._singleSelectedGoal=null}get availableGoals(){return this._availableGoals}get singleSelectedGoal(){return this._singleSelectedGoal}setAvailableGoals(e){this._availableGoals=e}setSingleSelectedGoal(e){this._singleSelectedGoal=e}}class hD extends QN{constructor(){super(...arguments),this._email=""}static get defaultValidationResult(){return{isValid:!0,fields:{email:{isValid:!0,errors:{email:!1,required:!1}}}}}get email(){return this._email}get emailConsent(){return{isEnabled:this.checkoutConfiguration.featureConfig.emailConsent}}setEmail(e){this._email=e}setEmailIfEmpty(e){this.email.trim()||this.setEmail(e)}validate(){const e=this.toObject(),t=$i(e.email),n={isValid:t,errors:{required:!e.email,email:!t}};return{isValid:n.isValid,fields:{email:n}}}getValidOrEmptyEmail(){return this.validate().isValid?this.email:""}toObject(){return{email:this.email.trim()}}}const mD=[" "," "," "," "," "," "," "," "," "," "," "," "," ","\u2028"," ","　","■","\t","\n","\f","","​","‌","‍","‎","‏","‪","‫","‬","‭","‮"," ","⁠","⁡","⁢","⁣","⁤","⁦","⁧","⁨","⁩","⁪","⁫","⁬","⁭","⁮","⁯","⠀","ㅤ","︀","︁","︂","︃","︄","︅","︆","︇","︈","︉","︊","︋","︌","︍","︎","️","\ufeff","ﾠ","￼","ጿC","ᴕ9","ᴗ3","ᴗ4","ᴗ5","ᴗ6","ᴗ7","ᴗ8","ᴗ9","ᴗA","1","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","0"];function pD(e){const t=new Set([...mD," "]);let n=0,i=e.length;for(;n<i&&t.has(e.charAt(n));)n++;for(;i>n&&t.has(e.charAt(i-1));)i--;return e.slice(n,i)}const gD=(e,t)=>!!e&&e.length>=t,yD=e=>!!e&&/^(?!anonymous$)([^!_@#$%^*+=±~§[\]{};:\\|?№`]+$)/i.test(e);class fD extends QN{static get defaultValidationResult(){return{isValid:!0,fields:{firstName:{isValid:!0,errors:{required:!1,minLength:!1,characters:!1}},lastName:{isValid:!0,errors:{required:!1,minLength:!1,characters:!1}}}}}constructor(e,t){super(e),this.checkoutConfiguration=e,this.validationSettings=t,this._firstName="",this._lastName=""}get firstName(){return this._firstName.substring(0,this.validationSettings.MAX_LENGTH)}get lastName(){return this._lastName.substring(0,this.validationSettings.MAX_LENGTH)}get fullName(){return`${this.firstName} ${this.lastName}`.trim()}setFirstName(e){this._firstName=e}setFirstNameIfEmpty(e){this.firstName.trim()||this.setFirstName(e)}setLastName(e){this._lastName=e}setLastNameIfEmpty(e){this.lastName.trim()||this.setLastName(e)}setFullName(e){const t=e.split(" ").filter(Boolean);this.setFirstName(t[0]),t.length>1&&this.setLastName(t[t.length-1])}setFullNameIfEmpty(e){this.fullName.trim()||this.setFullName(e)}validate(){const e=this.toObject(),t=gD(e.firstName,this.validationSettings.MIN_LENGTH),n=yD(e.firstName),i={isValid:t&&n,errors:{required:!e.firstName,minLength:!t,characters:!n}},s=gD(e.lastName,this.validationSettings.MIN_LENGTH),a=yD(e.lastName),o={isValid:s&&a,errors:{required:!e.lastName,minLength:!s,characters:!a}};return{isValid:i.isValid&&o.isValid,fields:{firstName:i,lastName:o}}}toObject(){return{firstName:pD(this.firstName),lastName:pD(this.lastName)}}}class ED{constructor(){this._isEnabled=!1,this._dtdFrequency=W.MONTHLY,this._dtdCurrency="USD",this._dtdInitialAmount=null}get isEnabled(){return this._isEnabled}get dtdFrequency(){return this._dtdFrequency}get dtdCurrency(){return this._dtdCurrency}get dtdInitialAmount(){return this._dtdInitialAmount}setAvailability(e){this._isEnabled=e}setParams(e){this._dtdFrequency=e.dtdFrequency,this._dtdCurrency=e.dtdCurrency,this._dtdInitialAmount=e.dtdInitialAmount}}class SD{constructor(){this._isEnabled=!1}get isEnabled(){return this._isEnabled}setAvailability(e){this._isEnabled=e}}function vD(e){return e.infrastructureParams.env===D.hY.STAGING&&e.company.key===Hb.STAGING_FORWARD_BLUE||e.company.key===Hb.FORWARD_BLUE}class AD{constructor(){this._isEnabled=!1,this._isRequired=!1}get isEnabled(){return this._isEnabled}get isRequired(){return this._isRequired}setAvailability(e){this._isEnabled=e.isEnabled,this._isRequired=e.isRequired}}class CD extends QN{static get defaultValidationResult(){return{isValid:!0,fields:{line1:{isValid:!0,errors:{required:!1}},line2:{isValid:!0,errors:{required:!1}},city:{isValid:!0,errors:{required:!1}},region:{isValid:!0,errors:{required:!1}},postal:{isValid:!0,errors:{required:!1}},countryCode:{isValid:!0,errors:{required:!1}}}}}static validateLine1(e){const t=!e.isRequired||!!e.line1;return{isValid:t,errors:{required:!t}}}static validateLine2(){return{isValid:!0,errors:{required:!1}}}static validateCity(e){const t=!(e.isRequired||e.line1)||!!e.city;return{isValid:t,errors:{required:!t}}}static validateCountryCode(e){const t=!(e.isRequired||e.line1)||!!e.countryCode;return{isValid:t,errors:{required:!t}}}constructor(e,t,n,i,s){super(e),this.checkoutConfiguration=e,this.addressService=t,this.addressValidationAPI=n,this.countriesService=i,this.mailingAddressCustomization=s,this._line1="",this._line2="",this._city="",this._postal="",this._region="",this._countryCode=this.getDefaultCountryCode(),this._isSkipped=!1,this._computed=null,this.shouldAutofillRegion&&(this._region=this.formatGeoIpRegion(this.checkoutConfiguration.user.address.region,this.countryCode))}get isEnabled(){return this.computed.isEnabled}get isRequired(){return this.computed.isRequired}get line1(){return this._line1}get line2(){return this._line2}get city(){return this._city}get postal(){return this._postal}get region(){return this._region}get countryCode(){return this._countryCode}get isSkipped(){return this._isSkipped}get computed(){return this._computed||(this._computed=new AD),this._computed}setLine1(e){this._line1=e}setLine1IfEmpty(e){this.line1.trim()||this.setLine1(e)}setLine2(e){this._line2=e}setLine2IfEmpty(e){this.line2.trim()||this.setLine2(e)}setCity(e){this._city=e}setCityIfEmpty(e){this.city.trim()||this.setCity(e)}setPostal(e){this._postal=e}setPostalIfEmpty(e){this.postal.trim()||this.setPostal(e)}setRegion(e){this._region=e}setRegionIfEmpty(e){this.region.trim()||this.setRegion(e)}setCountryCode(e){const t=this.mailingAddressCustomization.getPredefinedRegions({country:this.countryCode}),n=this.mailingAddressCustomization.getPredefinedRegions({country:e}),i=this.mailingAddressCustomization.isRegionEnabled({country:e});(t||n||!i)&&(this._region=""),this._countryCode=e}setCountryCodeIfEmptyAddress(e){this.line1.trim()||this.setCountryCode(e)}getDetails(e,t){return this.addressService.getDetails({place:e,restrictCountries:[this.countryCode],sessionToken:t})}getSubplaces(e){return this.addressService.getSubplaces(Object.assign({},e))}getPlaces(e){return this.addressService.getPlaces(Object.assign({},e))}checkShouldValidateOnServer(){return!this.checkoutConfiguration.infrastructureParams.showcase&&(this.isRequired||!!this.line1)}toObject(){const e={isRequired:this.isRequired,line1:this.line1.trim(),city:this.city.trim(),region:this.region.trim(),postal:this.postal.trim(),countryCode:this.countryCode.trim()},t=this.line2.trim();return t&&(e.line2=t),e}validate(){const e=this.toObject(),t=CD.validateLine1(e),n=CD.validateLine2(),i=CD.validateCity(e),s=this.validateRegion(e),a=this.validatePostal(e),o=CD.validateCountryCode(e);return{isValid:t.isValid&&n.isValid&&i.isValid&&s.isValid&&a.isValid&&o.isValid,fields:{line1:t,line2:n,city:i,region:s,postal:a,countryCode:o}}}validateAddress(){return(0,c.sH)(this,void 0,void 0,(function*(){const{validated:e,valid:t}=yield this.addressValidationAPI.validate({line1:this.line1,line2:this.line2,city:this.city,region:this.region,postal:this.postal,countryCode:this.countryCode});return!e||t}))}shouldFindSubplaces(e){return this.addressService.shouldFindSubplaces({place:e,restrictCountries:[this.countryCode]})}setSkipped(e){this._isSkipped=e}get shouldAutofillRegion(){return!!this.checkoutConfiguration.infrastructureParams.livemode&&!!this.mailingAddressCustomization.isRegionEnabled({country:this.countryCode})}formatGeoIpRegion(e,t){const n=this.mailingAddressCustomization.getPredefinedRegions({country:t});if(!n)return e;let i;if(Array.isArray(n))i=n.find((t=>{let{name:n}=t;return n.toLowerCase()===e.toLowerCase()}));else for(const t of Object.values(n))if(i=t.find((t=>{let{name:n}=t;return n.toLowerCase()===e.toLowerCase()})),i)break;return i?i.code:""}getDefaultCountryCode(){return vD(this.checkoutConfiguration)||this.isUSCountyCode(this.checkoutConfiguration.user.address.countryCode)?D.tg.UNITED_STATES:this.checkoutConfiguration.user.address.countryCode?this.checkoutConfiguration.user.address.countryCode:this.countriesService.getMailingAddressCountriesList()[0].countryCode}validateRegion(e){let t=e.isRequired||!!e.line1;this.mailingAddressCustomization.isRegionRequired({country:e.countryCode})||(t=!1);const n=!t||!!e.region;return{isValid:n,errors:{required:!n}}}validatePostal(e){let t,n=e.isRequired||!!e.line1||!!e.postal;if(this.mailingAddressCustomization.isPostalCodeRequired({country:e.countryCode})||(n=!1),n){const n=this.mailingAddressCustomization.getPostalCodeValidation({country:e.countryCode});t=n?n.test(e.postal):!!e.postal}else t=!0;return{isValid:t,errors:{required:!t}}}isUSCountyCode(e){return As["US Territories"].some((t=>{let{code:n}=t;return n===e}))}}class PD extends QN{constructor(){super(...arguments),this._isActive=!1,this._companyName=""}static get defaultValidationResult(){return{isValid:!0,fields:{onBehalfOf:{isValid:!0,errors:{required:!1,minLength:!1}}}}}get isEnabled(){return this.checkoutConfiguration.campaign.config.showBehalfOf}get isActive(){return this._isActive}get companyName(){return this.isActive?this._companyName:""}get isOnBehalfOf(){return!!this.isEnabled&&Boolean(this.companyName)}setIsActive(e){this._isActive=e}setCompanyName(e){this._companyName=e}toObject(){return{companyName:this.companyName}}validate(){const e=!this.isEnabled||!this.isActive||this.validateCompanyName();return{isValid:e,fields:{onBehalfOf:{isValid:e,errors:{required:!(!this.isEnabled||!this.isActive||this.companyName),minLength:!e}}}}}validateCompanyName(){return!(!this.companyName||this.companyName.length<2||this.companyName.match(/^\d+$/)||"mrs."===this.companyName.toLowerCase())}}class ND{constructor(){this._allowedPaymentMethods={[D._h.CARD]:{available:!1,visible:!1},[D._h.APPLE_PAY]:{available:!1,visible:!1},[D._h.GOOGLE_PAY]:{available:!1,visible:!1},[D._h.VENMO]:{available:!1,visible:!1},[D._h.PAYPAL]:{available:!1,visible:!1},[D._h.US_BANK_ACCOUNT]:{available:!1,visible:!1},[D._h.AU_BECS]:{available:!1,visible:!1},[D._h.UK_BACS]:{available:!1,visible:!1},[D._h.SEPA]:{available:!1,visible:!1},[D._h.IDEAL]:{available:!1,visible:!1},[D._h.ACSS]:{available:!1,visible:!1},[D._h.CRYPTO]:{available:!0,visible:!0}}}get allowedPaymentMethods(){return this._allowedPaymentMethods}setAllowedPaymentMethods(e){this._allowedPaymentMethods=e}}class bD extends QN{constructor(){super(...arguments),this._phone=null,this._countryCode=this.getDefaultCountryCode(),this._cleanPhone=null}static get defaultValidationResult(){return{isValid:!0,fields:{phone:{isValid:!0,errors:{required:!1,invalid:!1}}}}}get isEnabled(){return this.checkoutConfiguration.campaign.config.showPhone}get isRequired(){return this.checkoutConfiguration.campaign.config.phoneRequired}get phone(){return this._phone}get countryCode(){return this._countryCode}get isLegalTextEnabled(){return this.checkoutConfiguration.campaign.config.showPhoneLegalText}get phoneLegalText(){return this.checkoutConfiguration.campaign.config.phoneLegalText}setPhone(e){this._phone=e}setPhoneIfEmpty(e){var t;(null===(t=this.phone)||void 0===t?void 0:t.trim())||this.setPhone(e)}setCountryCode(e){this._countryCode=e}setCountryCodeIfEmptyPhone(e){var t;(null===(t=this.phone)||void 0===t?void 0:t.trim())||this.setCountryCode(e)}setCleanPhone(e){this._cleanPhone=e}toObject(){return{phone:this.isEnabled?this._cleanPhone||"":null}}validate(){const e=this.isRequired&&!this.phone,t=(this.isRequired||!!this.phone)&&!function(e){if(!e)return!1;const t=e.replace(/[^\d]/g,"");return t.length>=7&&t.length<=15}(this.phone),n=!e&&!t;return{isValid:n,fields:{phone:{isValid:n,errors:{required:e,invalid:t}}}}}isFullPhoneNumberFilled(){return Boolean(this.phone&&this.countryCode)}getDefaultCountryCode(){return vD(this.checkoutConfiguration)?D.tg.UNITED_STATES:this.checkoutConfiguration.user.address.countryCode}}class DD{constructor(){this._isEnabled=!1,this._upsellStartDate="",this._upsellFrequency=W.MONTHLY,this._upsellCurrency="",this._upsellMinAmount=0,this._upsellAmount=0}get isEnabled(){return this._isEnabled}get upsellStartDate(){return this._upsellStartDate}get upsellFrequency(){return this._upsellFrequency}get upsellCurrency(){return this._upsellCurrency}get upsellMinAmount(){return this._upsellMinAmount}get upsellAmount(){return this._upsellAmount}setAvailability(e){this._isEnabled=e}setParams(e){this._upsellStartDate=e.upsellStartDate,this._upsellFrequency=e.upsellFrequency,this._upsellCurrency=e.upsellCurrency,this._upsellMinAmount=e.upsellMinAmount,this._upsellAmount=e.upsellAmount}}class TD{constructor(){this._isEnabled=!1,this._upsellFrequency=W.MONTHLY,this._upsellCurrency="USD",this._upsellHighAmount=null,this._upsellLowAmount=null,this._upsellInitialAmount=null}get isEnabled(){return this._isEnabled}get upsellFrequency(){return this._upsellFrequency}get upsellCurrency(){return this._upsellCurrency}get upsellHighAmount(){return this._upsellHighAmount}get upsellLowAmount(){return this._upsellLowAmount}get upsellInitialAmount(){return this._upsellInitialAmount}setAvailability(e){this._isEnabled=e}setParams(e){this._upsellFrequency=e.upsellFrequency,this._upsellCurrency=e.upsellCurrency,this._upsellHighAmount=e.upsellHighAmount,this._upsellLowAmount=e.upsellLowAmount,this._upsellInitialAmount=e.upsellInitialAmount}}var _D,kD;!function(e){e.IN_PROGRESS="in_progress",e.COMPLETED="completed",e.ERROR="error"}(_D||(_D={})),function(e){e.PAYMENT="payment",e.MAILING_ADDRESS="mailing_address"}(kD||(kD={}));const OD="QC4PW2SJ",ID="Q25P4T3S",xD="Q2BQW728";class wD extends QN{static isQuestionValid(e){return!e.required||wD.isRequiredQuestionValid(e)}static isRequiredQuestionValid(e){return e.type===$l.CHECKBOX?!0===e.answer:e.type===$l.MULTIOPTION&&Array.isArray(e.answer)?!!e.answer.filter(Boolean).length:Boolean(e.answer)}constructor(e){if(super(e),this.checkoutConfiguration=e,this._questions=new Map,e.campaign.config.showQuestions&&this.campaign.config.questions)for(const e of this.campaign.config.questions){const t=e.options||[];let n=e.key;this.checkoutConfiguration.showcase&&!n&&(n=e.id),this._questions.set(n,{answer:Array.isArray(e.answer)?[...e.answer]:e.answer,code:e.code,createdAt:e.createdAt,key:n,id:e.id,options:[...t],question:e.question,required:e.required,type:e.type})}}get isEnabled(){return!!this.questions.size&&this.campaign.config.showQuestions}get questions(){return this.isForwardBlueQuestionScreenEnabled?new Map([...this._questions.entries()].filter((e=>{let[t]=e;return OD!==t&&ID!==t&&xD!==t}))):this._questions}get forwardBlueQuestions(){return{retiredOrUnemployed:this._questions.get(OD),occupation:this._questions.get(ID),employer:this._questions.get(xD)}}get isForwardBlueQuestionScreenEnabled(){return!!vD(this.checkoutConfiguration)&&this._questions.has(OD)&&this._questions.has(ID)&&this._questions.has(xD)}validateForwardBlueQuestions(){const{retiredOrUnemployed:e,occupation:t,employer:n}=this.forwardBlueQuestions;return e&&t&&n?e.answer?{isValid:!0,fields:{}}:{isValid:Boolean(t.answer)&&Boolean(n.answer),fields:{[ID]:{isValid:Boolean(t.answer)},[xD]:{isValid:Boolean(n.answer)}}}:{isValid:!1,fields:{}}}setAnswer(e,t){this.getQuestion(e).answer=t}toObject(){return{questions:mi([...this._questions.values()])}}validate(){return this.validateQuestionsByKeys([...this.questions.keys()])}validateQuestionsByKeys(e){const t={};return[...this.questions.values()].filter((t=>{let{key:n}=t;return e.includes(n)})).forEach((e=>{t[e.key]={isValid:wD.isQuestionValid(e)}})),{isValid:Object.values(t).every((e=>{let{isValid:t}=e;return t})),fields:t}}getQuestion(e){const t=this._questions.get(e);if(!t)throw new RD(e);return t}getAnswer(e){return this.getQuestion(e).answer}get campaign(){return this.checkoutConfiguration.campaign}}class RD extends Error{constructor(e){super(`Question not found: ${e}`)}}class MD{constructor(){this._isEnabled=!1}get isEnabled(){return this._isEnabled}setAvailability(e){this._isEnabled=e}}class LD extends QN{constructor(){super(...arguments),this._isAccepted=this.checkoutConfiguration.campaign.config.termsChecked}static get defaultValidationResult(){return{isValid:!0,fields:{isAccepted:{isValid:!0,errors:{required:!1}}}}}get isEnabled(){return this.checkoutConfiguration.campaign.config.showTerms}get text(){return this.checkoutConfiguration.campaign.config.termsText}get isAccepted(){return this._isAccepted}setIsAccepted(e){this._isAccepted=e}validate(){const e=!this.isEnabled||this.isAccepted;return{isValid:e,fields:{isAccepted:{isValid:e,errors:{required:!e}}}}}toObject(){return{isAccepted:this.isEnabled?this.isAccepted:void 0}}}var UD;!function(e){e[e.IN_HONOR_OF_MAX_LENGTH=50]="IN_HONOR_OF_MAX_LENGTH",e[e.SENDER_NAME_MAX_LENGTH=200]="SENDER_NAME_MAX_LENGTH"}(UD||(UD={}));class FD{static getInHonorOfMaxLength(){return UD.IN_HONOR_OF_MAX_LENGTH}static getSenderNameMaxLength(){return UD.SENDER_NAME_MAX_LENGTH}}class jD extends Error{constructor(e){super("DataPoint Validation Failed"),this.validationResult=e}}function BD(e){return e.instant&&!e.microdeposits.enabled}function GD(e){return!e.instant&&e.microdeposits.enabled&&e.microdeposits.type===Xb.AUTOMATIC}function qD(e){return!e.instant&&e.microdeposits.enabled&&e.microdeposits.type===Xb.MICRODEPOSITS}function HD(e){return e.instant&&e.microdeposits.enabled&&e.microdeposits.type===Xb.MICRODEPOSITS}function VD(e){return e.instant&&e.microdeposits.enabled&&e.microdeposits.type===Xb.AUTOMATIC}function KD(e){return e>=9500}const YD={[Hr.DONOR_NAME]:fD,[Hr.DONOR_EMAIL]:hD,[Hr.MAILING_ADDRESS]:CD,[Hr.TRIBUTE]:class extends QN{constructor(){super(...arguments),this._isActive=!this.isOptional,this._isOriented=!this.isOptional,this._tributeName=""}get isEnabled(){return this.checkoutConfiguration.campaign.config.tribute.show}get isOptional(){return this.checkoutConfiguration.campaign.config.tribute.optional}get isActive(){return this._isActive}get isFilled(){return this.isActive&&!!this.tributeeName}get labelType(){return this.checkoutConfiguration.campaign.config.tribute.labelType}get isSharingEnabled(){const{showEmail:e,showAddress:t}=this.checkoutConfiguration.campaign.config.tribute;return e||t}get isTributeOriented(){return this._isOriented}get tributeeName(){var e;return null===(e=this._tributeName)||void 0===e?void 0:e.substring(0,FD.getInHonorOfMaxLength())}get type(){return ts.NONE}setActive(e){this._isActive=e}setTributeeName(e){(e.trim()||""===e)&&(this._tributeName=e)}setOriented(e){this._isOriented=e}toObject(){return{inHonorOf:this.tributeeName,type:this.type,labelType:this.labelType,isActive:this.isActive}}},[Hr.PROCESS]:class extends QN{constructor(e,t){super(e),this.checkoutConfiguration=e,this._flowType=t,this._status=_D.IN_PROGRESS,this._completedData=null,this._errorData=null}get flowType(){return this._flowType}get status(){return this._status}get completedData(){return this._completedData}get errorData(){return this._errorData}isInProgress(){return this._status===_D.IN_PROGRESS}isCompleted(){return this._status===_D.COMPLETED}isError(){return this._status===_D.ERROR}hasPaymentError(){var e;return(null===(e=this._errorData)||void 0===e?void 0:e.errorType)===kD.PAYMENT}hasMailingAddressError(){var e;return(null===(e=this._errorData)||void 0===e?void 0:e.errorType)===kD.MAILING_ADDRESS}setInProgress(){this._status=_D.IN_PROGRESS,this._completedData=null,this._errorData=null}setCompleted(e){this._status=_D.COMPLETED,this._completedData=e,this._errorData=null}setError(e){this._status=_D.ERROR,this._completedData=null,this._errorData=e}},[WN.DONATION]:Cb,[WN.GIFT_AID]:class extends QN{constructor(){super(...arguments),this._isShowed=!1,this._isAccepted=!1,this._computed=null}get isEnabled(){return this.computed.isEnabled}get legalText(){return this.checkoutConfiguration.campaign.config.giftAid.legalText}get isShowed(){return this._isShowed}get isAccepted(){return this._isAccepted}get computed(){return this._computed||(this._computed=new SD),this._computed}setShowed(){this._isShowed=!0}accept(){this._isAccepted=!0}reject(){this._isAccepted=!1}},[Hr.QUESTIONS]:wD,[Hr.COMMENT]:class extends QN{constructor(){super(...arguments),this._isRequired=!1,this._isActive=this.checkoutConfiguration.commentSettings.isActive,this._prevComment="",this._comment=""}get isEnabled(){return this.checkoutConfiguration.campaign.config.showComment}get isRequired(){return this._isRequired}get isActive(){return this._isActive}get prevComment(){return this._prevComment}get comment(){return this._comment}setIsRequired(e){this._isRequired=e}setIsActive(e){this._isActive=e}savePrevComment(){this._prevComment=this.comment}saveComment(e){this._comment=e}toObject(){return{isActive:this.isActive,comment:this.comment}}},[Hr.DESIGNATION]:class extends QN{static get defaultValidationResult(){return{isValid:!0,fields:{goal:{isValid:!0,errors:{required:!1}}}}}constructor(e){var t,n;super(e),this.checkoutConfiguration=e,this._goalKey=null,this.savedOneTimeGoalKey=null,this.savedRecurringGoalKey=null,this._goalKey=null!==(n=null===(t=this.checkoutConfiguration.fundraisingPage)||void 0===t?void 0:t.designation)&&void 0!==n?n:null}get isEnabled(){return!!this.goals.length&&this.displayGoal===ki.SELECT}get goalKey(){return this._goalKey}get modifyDesignation(){return this.checkoutConfiguration.canModifyDesignation}get goals(){return this.checkoutConfiguration.campaign.config.goals}get goalName(){var e;return(null===(e=this.selectedGoal)||void 0===e?void 0:e.name)||null}get goalCode(){var e;return(null===(e=this.selectedGoal)||void 0===e?void 0:e.code)||null}get selectedGoal(){return this.isEnabled&&this.goals.find((e=>e.key===this.goalKey))||null}get allowRecurring(){var e;if(!this.isEnabled)return!0;const t=null===(e=this.selectedGoal)||void 0===e?void 0:e.repeat;return!t||t!==ui.ONE_TIME}toObject(){return{goalKey:this.isEnabled?this.goalKey:null,goalName:this.isEnabled?this.goalName:null,allowRecurring:this.allowRecurring}}setGoalKey(e,t){const n=this.goals.find((t=>t.key===e));n&&this.isGoalAllowedToShow(n,t)&&(this._goalKey=e,this.saveGoalKeyByRepeat(t))}hasSelectedGoalWithRepeat(e){var t,n,i;return this.checkoutConfiguration.preselectDesignation?(null===(i=this.selectedGoal)||void 0===i?void 0:i.repeat)===e:(null===(t=this.selectedGoal)||void 0===t?void 0:t.repeat)===e||(null===(n=this.selectedGoal)||void 0===n?void 0:n.repeat)===ui.ALL}setComputedGoalKeyByGoalRepeat(e){var t,n;this.isEnabled&&((null===(t=this.externalGoal)||void 0===t?void 0:t.repeat)!==ui.ALL&&(null===(n=this.externalGoal)||void 0===n?void 0:n.repeat)!==e?this.checkoutConfiguration.preselectDesignation||1===this.getAllowedGoals(e).length?this.preselectDesignation(e):this._goalKey=null:this._goalKey=this.externalGoal.key)}isGoalAllowedToShow(e,t){return!!this.isEnabled&&(e.repeat===t||e.repeat===ui.ALL)}canChangeDesignation(e){return!!this.isEnabled&&!(e<=1||!this.modifyDesignation)}validateDesignation(e){const t=!this.isEnabled||this.isGoalValid(e),n={isValid:t,errors:{required:!t}};return{isValid:n.isValid,fields:{goal:n}}}shouldShowDesignation(e){return!(this.checkoutConfiguration.company.key===Hb.FCA&&!this.isEditable(e))&&this.isEnabled&&!!this.getAllowedGoalsByFrequency(e).length}isEditable(e){return this.canChangeDesignation(this.getAllowedGoalsByFrequency(e).length)}getAllowedGoalsByFrequency(e){return this.getAllowedGoals(e)}get displayGoal(){return this.checkoutConfiguration.campaign.config.displayGoal}get externalGoal(){return this.isEnabled&&this.goals.find((e=>{var t,n,i,s;return e.key===(null===(i=null===(n=null===(t=this.checkoutConfiguration.external)||void 0===t?void 0:t.state)||void 0===n?void 0:n.designation)||void 0===i?void 0:i.id)||e.key===(null===(s=this.checkoutConfiguration.fundraisingPage)||void 0===s?void 0:s.designation)}))||null}preselectDesignation(e){var t,n,i,s,a,o;const r=this.getSavedGoalByRepeat(e),c=this.getSavedGoalByRepeat(e===ui.ONE_TIME?ui.RECURRING:ui.ONE_TIME);this._goalKey=null!==(o=null!==(s=null!==(n=null!==(t=null==r?void 0:r.key)&&void 0!==t?t:(null==c?void 0:c.repeat)===ui.ALL?c.key:null)&&void 0!==n?n:null===(i=this.goals.find((t=>t.default===e)))||void 0===i?void 0:i.key)&&void 0!==s?s:null===(a=this.goals.find((e=>e.default===ui.ALL)))||void 0===a?void 0:a.key)&&void 0!==o?o:null}getSavedGoalByRepeat(e){var t;const n=e===ui.ONE_TIME?this.savedOneTimeGoalKey:this.savedRecurringGoalKey;return null!==(t=this.goals.find((e=>e.key===n)))&&void 0!==t?t:null}saveGoalKeyByRepeat(e){e!==ui.ONE_TIME?this.savedRecurringGoalKey=this.goalKey:this.savedOneTimeGoalKey=this.goalKey}isGoalValid(e){return!(!this.selectedGoal&&this.getAllowedGoals(e).length>0)}getAllowedGoals(e){return this.goals.filter((t=>this.isGoalAllowedToShow(t,e)))}},[Hr.DESIGNATIONS]:class extends QN{constructor(e){super(e),this.checkoutConfiguration=e,this._allGoals=new Map,this._singleSelectedGoal=null,this._selectedGoals=[],this._defaultGoals={[ui.ONE_TIME]:null,[ui.RECURRING]:null},this._savedGoals={[ui.ONE_TIME]:null,[ui.RECURRING]:null},this._computed=new dD,this.initializeDefaultGoals()}get defaultGoals(){return this._defaultGoals}get savedGoals(){return this._savedGoals}get computed(){return this._computed}get allGoals(){return Array.from(this._allGoals.values())}get availableGoals(){return this._computed.availableGoals}get goals(){const e=new Set(Array.from(this.selectedGoals).map((e=>e.id)));return this._computed.availableGoals.filter((t=>!e.has(t.id)))}get selectedGoals(){return null!==this.activeSingleSelectedGoal&&0===this._selectedGoals.length?[this.activeSingleSelectedGoal]:[...this._selectedGoals]}get isEnabled(){return this._allGoals.size>0}validate(){const e=this.validateEmptyGoals();return e.isValid?this.validateSelectedGoals():e}setAllGoals(e){this._allGoals.clear();for(const t of e)this._allGoals.set(t.id,t)}addSelectedGoal(e){const t=this._allGoals.get(e);t&&(null!==this.activeSingleSelectedGoal&&0===this._selectedGoals.length&&this._selectedGoals.push(this.activeSingleSelectedGoal),this._selectedGoals.push(t))}setSelectedGoals(e){this._selectedGoals=e}removeSelectedGoal(e){if(this._selectedGoals=this._selectedGoals.filter((t=>t.id!==e)),1===this._selectedGoals.length){const e=this._selectedGoals[0];this._singleSelectedGoal=this.isGoalAvailable(e)?e:null,this._selectedGoals=[]}}setSingleSelectedGoal(e,t){const n=this._allGoals.get(e);n&&(t!==ui.ALL&&(this._savedGoals[t]=n),this._singleSelectedGoal=n)}get activeSingleSelectedGoal(){return null!==this._singleSelectedGoal&&this.isGoalAvailable(this._singleSelectedGoal)?this._singleSelectedGoal:null!==this._computed.singleSelectedGoal?this._computed.singleSelectedGoal:null}validateEmptyGoals(){const e=this._allGoals.size>0&&0===this.selectedGoals.length;return{isValid:!e,fields:{goals:[{isValid:!e,errors:{required:e,goalRepeat:!1}}]}}}validateSelectedGoals(){const e=[];for(const t of this.selectedGoals){const n=this.isGoalAvailable(t);e.push({isValid:n,errors:{required:!1,goalRepeat:!n}})}return{isValid:!0,fields:{goals:e}}}isGoalAvailable(e){return this._computed.availableGoals.some((t=>t.id===e.id))}initializeDefaultGoals(){const e=this.checkoutConfiguration.campaign.config.defaultGoals;if(e&&0!==e.length)this.setDefaultGoals(e.map((e=>this.mapResolvedConfigDefaultGoal(e))));else{const e=this.checkoutConfiguration.campaign.config.goals.filter((e=>null!==e.default));this.setDefaultGoals(e.map((e=>this.mapResolvedWidgetGoal(e))))}}setDefaultGoals(e){this._defaultGoals={[ui.ONE_TIME]:null,[ui.RECURRING]:null};for(const t of e)t.default&&t.default!==ui.ALL?this._defaultGoals[t.default]=t:t.default===ui.ALL&&(this._defaultGoals[ui.ONE_TIME]=t,this._defaultGoals[ui.RECURRING]=t)}mapResolvedWidgetGoal(e){return{id:e.key,name:e.name,code:e.code,parentId:null,repeat:e.repeat,default:e.default}}mapResolvedConfigDefaultGoal(e){return{id:e.key,name:e.localization,code:e.code,parentId:null,repeat:e.repeat,default:e.default}}},[WN.PAYMENT_OPTIONS]:class extends QN{constructor(){super(...arguments),this._clientPaymentMethod=null,this._selectedPaymentOption=null,this._preSelectedPaymentOption=null,this._paymentMethodCountry=null,this._isFastTrackFlow=!1,this._checkedPaymentMethods={[D._h.APPLE_PAY]:!1,[D._h.GOOGLE_PAY]:!1,[D._h.VENMO]:!1},this._computed=null}get allowedPaymentMethods(){return Object.assign(Object.assign({},this.computed.allowedPaymentMethods),{[D._h.VENMO]:Object.assign(Object.assign({},this.computed.allowedPaymentMethods[D._h.VENMO]),{visible:this.computed.allowedPaymentMethods[D._h.VENMO].visible&&this._checkedPaymentMethods[D._h.VENMO]}),[D._h.APPLE_PAY]:Object.assign(Object.assign({},this.computed.allowedPaymentMethods[D._h.APPLE_PAY]),{visible:this.computed.allowedPaymentMethods[D._h.APPLE_PAY].visible&&this._checkedPaymentMethods[D._h.APPLE_PAY]}),[D._h.GOOGLE_PAY]:Object.assign(Object.assign({},this.computed.allowedPaymentMethods[D._h.GOOGLE_PAY]),{visible:this.computed.allowedPaymentMethods[D._h.GOOGLE_PAY].visible&&this._checkedPaymentMethods[D._h.GOOGLE_PAY]&&!this._checkedPaymentMethods[D._h.APPLE_PAY]})})}get clientPaymentMethod(){return this._clientPaymentMethod}get selectedPaymentOption(){return this._selectedPaymentOption}get preSelectedPaymentOption(){return this._preSelectedPaymentOption}get paymentMethodCountry(){return this._paymentMethodCountry}get computed(){return this._computed||(this._computed=new ND),this._computed}get isFastTrackFlow(){return this._isFastTrackFlow}setPaymentMethodChecked(e){this._checkedPaymentMethods[e]=!0}setPaymentMethod(e){this._clientPaymentMethod=e}setPaymentOption(e){this._selectedPaymentOption=e}setPreSelectedPaymentOption(e){this._preSelectedPaymentOption=e}setPaymentMethodCountry(e){this._paymentMethodCountry=e}setIsFastTrackFlow(e){this._isFastTrackFlow=e}toObject(){return{clientPaymentMethod:this.clientPaymentMethod,selectedPaymentOption:this.selectedPaymentOption,allowedPaymentMethods:this.allowedPaymentMethods,preSelectedPaymentOption:this.preSelectedPaymentOption,paymentMethodCountry:this.paymentMethodCountry}}},[WN.PRE_DONATION_UPSELL]:class extends QN{constructor(e,t){super(e),this.checkoutConfiguration=e,this.currencyService=t,this._suggestedIsEnabled=null,this._upsellSuggestedHighAmount=null,this._upsellSuggestedLowAmount=null,this._isShowed=!1,this._upsellShowedFromCurrency="USD",this._upsellShowedFromAmount=null,this._isAccepted=!1,this._computed=null}get isEnabled(){return null!==this._suggestedIsEnabled?this._suggestedIsEnabled:this.computed.isEnabled}get upsellFrequency(){return this.computed.upsellFrequency}get upsellCurrency(){return this.computed.upsellCurrency}get upsellHighAmount(){return null!==this._upsellSuggestedHighAmount?this._upsellSuggestedHighAmount:this.computed.upsellHighAmount}get upsellHighAmountInUsd(){return this.upsellHighAmount?this.currencyService.convert(this.upsellHighAmount,this.upsellCurrency,"USD"):null}get upsellLowAmount(){return null!==this._upsellSuggestedLowAmount?this._upsellSuggestedLowAmount:this.computed.upsellLowAmount}get upsellLowAmountInUsd(){return this.upsellLowAmount?this.currencyService.convert(this.upsellLowAmount,this.upsellCurrency,"USD"):null}get upsellInitialAmount(){return this.computed.upsellInitialAmount}get upsellInitialAmountInUsd(){return this.upsellInitialAmount?this.currencyService.convert(this.upsellInitialAmount,this.upsellCurrency,"USD"):null}get isShowed(){return this._isShowed}get upsellShowedFromCurrency(){return this._upsellShowedFromCurrency}get upsellShowedFromAmount(){return this._upsellShowedFromAmount}get isAccepted(){return this._isAccepted}get computed(){return this._computed||(this._computed=new TD),this._computed}setSuggestedAvailability(e){this._suggestedIsEnabled=e}setSuggestedAmounts(e,t){this._upsellSuggestedHighAmount=e,this._upsellSuggestedLowAmount=t}resetSuggestedAvailability(){this._suggestedIsEnabled=null}resetSuggestedAmounts(){this._upsellSuggestedHighAmount=null,this._upsellSuggestedLowAmount=null}setShowed(){this._isShowed=!0,this._upsellShowedFromCurrency=this.upsellCurrency,this._upsellShowedFromAmount=this.upsellInitialAmount}accept(){this._isAccepted=!0}reject(){this._isAccepted=!1}},[Hr.PHONE_NUMBER]:bD,[Hr.TERMS_AND_CONDITIONS]:LD,[Hr.REMIND_ME_LATER]:class extends QN{constructor(){super(...arguments),this._used=$n.NOT_GIVEN,this._shown=!1,this._computed=null}get isEnabled(){return this.computed.isEnabled}get used(){return this._used}get shown(){return this._shown}get computed(){return this._computed||(this._computed=new MD),this._computed}setState(e){if(e.used!==$n.NOT_GIVEN&&!e.shown)throw new Error("RemindMeLaterDataPoint: used without shown");this._used=e.used,this._shown=e.shown}toObject(){return{used:this.used,shown:this.shown}}},[Hr.ON_BEHALF_OF]:PD,[Hr.DONATE_ANONYMOUS]:class extends QN{constructor(){super(...arguments),this._anonymousChecked=!1}get isEnabled(){return this.checkoutConfiguration.campaign.config.showAnonymous}get anonymousChecked(){return this._anonymousChecked}setAnonymousChecked(e){this._anonymousChecked=e}toObject(){return{anonymousChecked:this.anonymousChecked}}},[WN.UK_BACS]:class extends QN{constructor(){super(...arguments),this._sortCode="",this._accountNumber="",this._accountHolderName="",this._termsAccepted=!0}get sortCode(){return this._sortCode}get accountNumber(){return this._accountNumber}get accountHolderName(){return this._accountHolderName}get termsAccepted(){return this._termsAccepted}setSortCode(e){this._sortCode=e}setAccountNumber(e){this._accountNumber=e}setAccountHolderName(e){this._accountHolderName=e}setTermsAccepted(e){this._termsAccepted=e}toObject(){const e=this.validate();if(!e.isValid)throw new jD(e);return{termsAccepted:this.termsAccepted,sortCode:this.sortCode,accountNumber:this.accountNumber,accountHolderName:this.accountHolderName}}validate(){const e=this.isSortCodeValid(),t=this.isAccountNumberValid(),n=this.isAccountHolderNameValid();return{isValid:e&&t&&n&&this.termsAccepted,fields:{sortCode:{isValid:e},accountNumber:{isValid:t},accountHolderName:{isValid:n},termsAccepted:{isValid:this.termsAccepted}}}}isSortCodeValid(){return!!(this.sortCode&&this.sortCode.length>=6&&this.sortCode.length<=6)}isAccountNumberValid(){return!!(this.accountNumber&&this.accountNumber.length>=4&&this.accountNumber.length<=17)}isAccountHolderNameValid(){return!!this.accountHolderName}},[WN.POST_DONATION_UPSELL]:class extends QN{constructor(e,t,n){super(e),this.checkoutConfiguration=e,this.postDonationUpsellMlSuggestion=t,this.currencyService=n,this._isAccepted=!1,this._isShowed=!1,this._upsellCustomAmount=void 0,this._computed=null}get isEnabled(){return this.computed.isEnabled}get isAccepted(){return this._isAccepted}get isShowed(){return this._isShowed}get upsellStartDate(){return this.computed.upsellStartDate}get upsellFrequency(){return this.computed.upsellFrequency}get upsellCurrency(){return this.computed.upsellCurrency}get upsellMinAmount(){return this.computed.upsellMinAmount}get upsellMaxAmount(){const e=this.currencyService.getDigits(this.upsellCurrency),t=(0,Ki.Bm)(this.upsellCurrency),n=Number("9".repeat(t));return Math.floor(n/Math.pow(10,e))*Math.pow(10,e)}get upsellAmount(){return void 0!==this._upsellCustomAmount?this._upsellCustomAmount:this.mlSuggestedAmount.isFallback?this.computed.upsellAmount:this.mlSuggestedAmount.amount}get upsellAmountInUSD(){return this.upsellAmount?this.currencyService.convert(this.upsellAmount,this.upsellCurrency,"USD"):this.upsellAmount}get computed(){return this._computed||(this._computed=new DD),this._computed}setUpsellCustomAmount(e){this._upsellCustomAmount=e}accept(){this._isAccepted=!0}setShowed(){this._isShowed=!0}validateMinAmount(){return!!this.upsellAmount&&this.upsellAmount>=this.upsellMinAmount}validateMaxAmount(){return!this.upsellAmount||this.upsellAmount<=this.upsellMaxAmount}toObject(){var e;const t=null!==(e=this.upsellAmount)&&void 0!==e?e:0;return{isAccepted:this.isAccepted,isShowed:this.isShowed,upsellStartDate:this.upsellStartDate,upsellFrequency:this.upsellFrequency,upsellCurrency:this.upsellCurrency,upsellAmount:t,upsellTip:0,upsellTotal:t}}get mlSuggestedAmount(){return this.postDonationUpsellMlSuggestion.getAdjustedAmountSuggestion()}},[WN.US_BANK_ACCOUNT]:class extends QN{constructor(){super(...arguments),this._routingNumber="",this._accountNumber="",this._accountHolderName="",this._verificationType=null,this._financialInstitution="",this._accountType=eP.INDIVIDUAL}get routingNumber(){return this._routingNumber}get accountNumber(){return this._accountNumber}get accountNumberLast4(){return this.accountNumber.length>4?this.accountNumber.slice(-4):this.accountNumber}get accountHolderName(){return this._accountHolderName}get verificationType(){return this._verificationType}get financialInstitution(){return this._financialInstitution}get accountType(){return this._accountType}get usBankAccountVerificationSetup(){const e=this.checkoutConfiguration.company.stripe.usBankAccount.verification;return{isInstantOnly:BD(e),isAbavOnly:GD(e),isMicroDepositOnly:qD(e),isInstantAndMicroDeposit:HD(e),isInstantAndAbav:VD(e)}}setRoutingNumber(e){this._routingNumber=e}setAccountNumber(e){this._accountNumber=e}setAccountHolderName(e){this._accountHolderName=e}setVerificationType(e){this._verificationType=e}setFinancialInstitution(e){this._financialInstitution=e}setAccountType(e){this._accountType=e}toObject(){const e=this.validate();if(!e.isValid)throw new jD(e);return{routingNumber:this.routingNumber,accountNumber:this.accountNumber,accountNumberLast4:this.accountNumberLast4,accountHolderName:this.accountHolderName,accountType:this.accountType,verificationType:this.verificationType,financialInstitution:this.financialInstitution}}validate(){const e=this.isRoutingNumberValid(),t=this.isAccountNumberValid(),n=this.isAccountHolderNameValid();return{isValid:e&&t&&n,fields:{routingNumber:{isValid:e},accountNumber:{isValid:t},accountHolderName:{isValid:n},financialInstitution:{isValid:this.isFinancialInstitutionValid()},verificationType:{isValid:this.isVerificationTypeValid()}}}}isRoutingNumberValid(){return!(!this.routingNumber||9!==this.routingNumber.length)}isAccountNumberValid(){return!!(this.accountNumber&&this.accountNumber.length>=5&&this.accountNumber.length<=17)}isFinancialInstitutionValid(){return!!this.financialInstitution}isVerificationTypeValid(){return null===this.verificationType||"descriptor_code"===this.verificationType||"amounts"===this.verificationType}isAccountHolderNameValid(){return!(this.usBankAccountVerificationSetup.isMicroDepositOnly||this.usBankAccountVerificationSetup.isAbavOnly||this.usBankAccountVerificationSetup.isInstantAndAbav)||!!this.accountHolderName}},[WN.DTD]:class extends QN{constructor(e,t,n,i){super(e),this.checkoutConfiguration=e,this.currencyService=t,this.doubleTheDonationApi=n,this.transactionCosts=i,this._employerId=0,this._employerName="",this._employerRatio=[1,1],this._employerRawMinAmount=0,this._isUpsellShowed=!1,this._isUpsellAccepted=!1,this._isSkipped=!1,this._snapshot=this.createSnapshot(),this._computed=null}get isEnabled(){return this.computed.isEnabled}get isIntegrationEnabled(){return this.checkoutConfiguration.integrations.dtdEnabled}get dtdFrequency(){return this.computed.dtdFrequency}get dtdCurrency(){return this.computed.dtdCurrency}get dtdInitialAmount(){return this.computed.dtdInitialAmount}get dtdInitialTotal(){var e;return this.transactionCosts.getTotalForAmount(null!==(e=this.dtdInitialAmount)&&void 0!==e?e:0,this.dtdCurrency)}get dtdInitialTotalDoubled(){return this.dtdInitialTotal+this.dtdInitialTotal/this.employerRatio[0]*this.employerRatio[1]}get employerId(){return this._employerId}get employerName(){return this._employerName}get employerRatio(){return this._employerRatio}get employerRawMinAmount(){return this._employerRawMinAmount}get employerMinAmount(){return this.currencyService.convert(this.currencyService.fromFloat(this.employerRawMinAmount,"USD"),"USD",this.dtdCurrency)}get employerUpsellAmount(){return this.employerUpsellTotal-this.transactionCosts.getProcessingFeeForAmount(this.employerMinAmount,this.dtdCurrency)}get employerUpsellTotal(){return this.currencyService.ceil(this.transactionCosts.getTotalForAmount(this.employerMinAmount,this.dtdCurrency),this.dtdCurrency)}get employerUpsellTotalDoubled(){return this.employerUpsellTotal+this.employerUpsellTotal/this.employerRatio[0]*this.employerRatio[1]}get isUpsellShowed(){return this._isUpsellShowed}get isUpsellAccepted(){return this._isUpsellAccepted}get isSkipped(){return this._isSkipped}get snapshot(){return this._snapshot}get computed(){return this._computed||(this._computed=new ED),this._computed}searchEmployerByName(e){return this.doubleTheDonationApi.getCompanies(e)}setEmployerName(e){this._employerName=e}setEmployerData(e){this._employerId=e.id,this._employerName=e.company_name,this._employerRawMinAmount=e.minimumMatchedAmount,this._employerRatio=e.ratio,this._snapshot=this.createSnapshot()}resetEmployerData(){this._employerId=0,this._employerName="",this._employerRawMinAmount=0,this._employerRatio=[1,1],this._snapshot=this.createSnapshot()}setUpsellShowed(e){this._isUpsellShowed=e}setUpsellAccepted(){this._isUpsellAccepted=!0}setSkipped(){this._isSkipped=!0}resetState(){this._isUpsellAccepted=!1,this._isSkipped=!1,this._snapshot=this.createSnapshot()}createSnapshot(){return{dtdCurrency:this.dtdCurrency,dtdInitialAmount:this.dtdInitialAmount,dtdInitialTotal:this.dtdInitialTotal,employerRatio:this.employerRatio,employerRawMinAmount:this.employerRawMinAmount,employerMinAmount:this.employerMinAmount,employerUpsellTotal:this.employerUpsellTotal,employerUpsellTotalDoubled:this.employerUpsellTotalDoubled}}},[Hr.COMMUNICATION_CONSENT]:class extends QN{constructor(){super(...arguments),this._isGeneralConsentAccepted=this.consentConfig.general.checkedByDefault,this._customizedConsentAcceptance={[D.ax.EMAIL]:this.consentConfig.customized.checkedByDefault,[D.ax.PHONE_CALLS]:this.consentConfig.customized.checkedByDefault,[D.ax.SMS]:this.consentConfig.customized.checkedByDefault,[D.ax.POSTAL_MAIL]:this.consentConfig.customized.checkedByDefault,[D.ax.SOCIAL_MEDIA]:this.consentConfig.customized.checkedByDefault},this._isGeneralConsentShown=!1,this._isCustomizedConsentShown=!1,this._computed=null}get isGeneralConsentEnabled(){const e=this.type===D.kt.GENERAL;return!(!e||!this.checkoutConfiguration.showcase)||(e&&this.consentConfig.general.showIfRequiredByLaw?this.isGeneralConsentRequiredByLawVisible():e)}get isCustomizedConsentEnabled(){const e=this.type===D.kt.CUSTOMIZED,t=!this.customizedConsent||Object.values(this.customizedConsent).every((e=>!e.isEnabled));return!!e&&!t&&(!this.consentConfig.customized.showIfRequiredByLaw||this.isCustomizedConsentRequiredByLawVisible())}get generalConsent(){return{isAccepted:this._isGeneralConsentAccepted}}get customizedConsent(){return{[D.ax.EMAIL]:{isEnabled:this.consentConfig.customized.channels.email.ask,isAccepted:this._customizedConsentAcceptance[D.ax.EMAIL]},[D.ax.PHONE_CALLS]:{isEnabled:this.consentConfig.customized.channels.phoneCalls.ask&&this.computed.isPhoneNumberConsentEnabled,isAccepted:this._customizedConsentAcceptance[D.ax.PHONE_CALLS]},[D.ax.SMS]:{isEnabled:this.consentConfig.customized.channels.sms.ask&&this.computed.isPhoneNumberConsentEnabled,isAccepted:this._customizedConsentAcceptance[D.ax.SMS]},[D.ax.POSTAL_MAIL]:{isEnabled:this.consentConfig.customized.channels.postalMail.ask&&this.computed.isMailingAddressConsentEnabled,isAccepted:this._customizedConsentAcceptance[D.ax.POSTAL_MAIL]},[D.ax.SOCIAL_MEDIA]:{isEnabled:this.consentConfig.customized.channels.socialMedia.ask,isAccepted:this._customizedConsentAcceptance[D.ax.SOCIAL_MEDIA]}}}get isGeneralConsentShown(){return this._isGeneralConsentShown}get isCustomizedConsentShown(){return this._isCustomizedConsentShown}get isAnyConsentAccepted(){const e=this.isGeneralConsentEnabled&&this.isGeneralConsentShown&&this.generalConsent.isAccepted,t=this.isCustomizedConsentEnabled&&this.isCustomizedConsentShown&&Object.values(this.customizedConsent).some((e=>e.isAccepted));return e||t}get computed(){return this._computed||(this._computed=new Pb),this._computed}isGeneralConsentRequiredByLawVisible(){const{generalConsent:e}=this.computed.gdprPolicy;return e.basedOnGeoCountry}isCustomizedConsentRequiredByLawVisible(){const{customizedConsent:e}=this.computed.gdprPolicy;return e.basedOnGeoCountry||e.basedOnGeoAndAddressRegion}toObject(){return{type:this.type,generalConsent:this.generalConsent,customizedConsent:this.customizedConsent,isGeneralConsentShown:this.isGeneralConsentShown,isCustomizedConsentShown:this.isCustomizedConsentShown}}acceptGeneralConsent(){this._isGeneralConsentAccepted=!0}rejectGeneralConsent(){this._isGeneralConsentAccepted=!1}acceptCustomizedConsent(e){this._customizedConsentAcceptance[e]=!0}rejectCustomizedConsent(e){this._customizedConsentAcceptance[e]=!1}rejectAll(){this.rejectGeneralConsent(),Object.values(D.ax).forEach((e=>this.rejectCustomizedConsent(e)))}setGeneralConsentShown(){this._isGeneralConsentShown=!0}setCustomizedConsentShown(){this._isCustomizedConsentShown=!0}get type(){return this.consentConfig.type}get consentConfig(){return this.checkoutConfiguration.campaign.config.consent}},[Hr.CUSTOMER_TITLE]:uD,[fl.DONATION]:eb,[fl.CRYPTO_WALLET]:class extends QN{constructor(){super(...arguments),this._address=""}get address(){return this._address}setAddress(e){this._address=e}}};class zD{constructor(e){this.sessionAPI=e}getCompanies(e){return(0,c.sH)(this,void 0,void 0,(function*(){return(yield this.getDtdCompanies(e)).map((e=>({id:e.payload.id,company_name:e.payload.company_name,ratio:e.payload.ratio,minimumMatchedAmount:e.payload.minimumMatchedAmount})))}))}getDtdCompanies(e){return(0,c.sH)(this,void 0,void 0,(function*(){try{return(yield this.sessionAPI.get("dtd",{search:e},{delay:200,retries:5,cancelSimilar:!0})).data}catch(e){return[]}}))}}class WD{constructor(e,t){this.whole=e,this.currency=t,this.fractional=this.whole/Math.pow(10,this.currency.digits)}plus(e){if(e.currency.equalTo(this.currency))return new WD(this.whole+e.whole,this.currency);throw new Error(`Currency mismatch: added ${e.currency} is not equal to ${this.currency}`)}isZero(){return 0===this.whole}[Symbol.toPrimitive](e){return"string"===e?this.whole.toString():this.whole}toString(){return this.whole.toString()}valueOf(){return this.whole}}class $D extends WD{}class XD{constructor(e,t,n){this.percentFee=e,this.fixedFee=t,this.converter=n}getFeeValue(e){const t=this.converter.convertFeeCurrency(Number(this.fixedFee),this.fixedFee.currency.code,e.currency.code),n=new $D(t,e.currency);return Math.round(Number(e)*Number(this.percentFee)+Number(n))}}class QD{constructor(e,t){this.digits=t,this.code=e.toUpperCase()}equalTo(e){return String(this)===String(e).toUpperCase()}[Symbol.toPrimitive](){return this.code}toString(){return this.code}}class ZD extends $D{constructor(e){super(Math.min(e.whole*ZD.ACSS_FEE_PERCENT,ZD.ACSS_MAX_FEE_VALUE),new QD("CAD",2))}}ZD.ACSS_MAX_FEE_VALUE=500,ZD.ACSS_FEE_PERCENT=.008;class JD{constructor(e){this.whole=e,this.percent=e/100,this.fractional=e/1e4}plus(e){if(this.percent+e.percent>100)throw new Error("PercentFee value can not be grater than 100");return new JD(this.whole+e.whole)}[Symbol.toPrimitive](e){return"string"===e?this.fractional.toString():this.fractional}toString(){return this.fractional.toString()}valueOf(){return this.fractional}}class eT extends JD{constructor(e){let t=eT.PERCENT;e&&(t=eT.PERCENT*eT.COEFF+e.whole*(1-eT.COEFF)),super(t)}}eT.PERCENT=350,eT.COEFF=.1;class tT extends $D{constructor(e){super(Math.min(e.whole*tT.FEE_PERCENT,tT.MAX_FEE_VALUE),new QD("USD",2))}}tT.MAX_FEE_VALUE=500,tT.FEE_PERCENT=.008;var nT,iT=n(9949);class sT{constructor(e,t,n,i,s,a){this.stripeFee=e,this.applicationFee=t,this.fixedFee=n,this.paymentMethod=i,this.cardBrand=s,this.converter=a}get isNonProfitFee(){return this.stripeFee.whole===iT.UH.NON_PROFIT}getPaymentMethodFee(e){switch(this.paymentMethod){case D._h.US_BANK_ACCOUNT:return new tT(e);case D._h.ACSS:return new ZD(e)}}get isAmex(){return this.cardBrand===iT.fR.AMERICAN_EXPRESS}getFeeValue(e){const t=this.getPaymentMethodFee(e);if(t)return Number(e)*Number(this.applicationFee)+Number(t);if(this.isNonProfitFee&&this.isAmex){const t=this.applicationFee.plus(new eT);return Number(t)*Number(e)}const n=this.converter.convertFeeCurrency(Number(this.fixedFee),this.fixedFee.currency.code,e.currency.code),i=new $D(n,e.currency),s=this.applicationFee.plus(this.stripeFee);return Number(e)*Number(s)+Number(i)}}class aT{constructor(e,t,n,i,s){this.stripeFee=e,this.applicationFee=t,this.fixedFee=n,this.companyParams=i,this.converter=s}get isUsCountry(){return"US"===this.companyParams.country}isCompanyCurrency(e){return e.currency.equalTo(this.companyParams.defaultCurrency)}isFixedFeeInDonationCurrency(e){return e.currency.equalTo(this.fixedFee.currency)}getFeeValue(e){let t=1;this.isCompanyCurrency(e)||(this.stripeFee=this.stripeFee.plus(new JD(100))),this.isFixedFeeInDonationCurrency(e)||(t=aT.FEE_CURRENCY_RATE_MULTIPLIER);const n=this.isUsCountry?new eT(this.stripeFee):this.stripeFee,i=this.applicationFee.plus(n),s=this.converter.convertFeeCurrency(Number(this.fixedFee),this.fixedFee.currency.code,e.currency.code,t),a=new $D(s,e.currency),o=Number(e),r=(o+Number(a))/(1-Number(i))/o-1;return Math.round(o*Math.round(1e4*r)/1e4)}}aT.FEE_CURRENCY_RATE_MULTIPLIER=1.03;class oT{constructor(e,t,n){this.feeCalculator=n,e.validate(t),this.valueObjectsFactory=this.feeCalculator.valueObjectsFactory,this.converter=this.feeCalculator.converter,this.companyParams=t.companyParams,this.customFixedFee=this.valueObjectsFactory.makeFixedFee(t.customFixedFee,t.companyParams.defaultCurrency),this.customFeePercent=this.valueObjectsFactory.makePercentFee(t.customFeePercent),this.applicationFeePercent=this.valueObjectsFactory.makePercentFee(t.applicationFeePercent),this.stripeFeePercent=this.valueObjectsFactory.makePercentFee(t.stripeFee.percent),this.fixedFee=this.valueObjectsFactory.makeFixedFee(t.stripeFee.fixed,t.stripeFee.currency)}getFeeForDashboard(e,t){let n;return n=this.companyParams.useCustomFee?new XD(this.customFeePercent,this.customFixedFee,this.converter):t.fromVirtualTerminal?new sT(this.stripeFeePercent,this.applicationFeePercent,this.fixedFee,t.paymentMethod,t.cardBrand,this.converter):new aT(this.stripeFeePercent,this.applicationFeePercent,this.fixedFee,this.companyParams,this.converter),this.feeCalculator.calculate(e,n)}getFeeForWidget(e){let t;return t=this.companyParams.useCustomFee?new XD(this.customFeePercent,this.customFixedFee,this.converter):new aT(this.stripeFeePercent,this.applicationFeePercent,this.fixedFee,this.companyParams,this.converter),this.feeCalculator.calculate(e,t)}getFeeWithoutFixedForWidget(e){let t;return t=this.companyParams.useCustomFee?new XD(this.customFeePercent,new $D(0,this.fixedFee.currency),this.converter):new aT(this.stripeFeePercent,this.applicationFeePercent,new $D(0,this.fixedFee.currency),this.companyParams,this.converter),this.feeCalculator.calculate(e,t)}getFeeForVirtualTerminal(e,t){let n;return n=this.companyParams.useCustomFee?new XD(this.customFeePercent,this.customFixedFee,this.converter):new sT(this.stripeFeePercent,this.applicationFeePercent,this.fixedFee,t.paymentMethod,t.cardBrand,this.converter),this.feeCalculator.calculate(e,n)}}class rT{constructor(e){this.converter=e}makeFixedFee(e,t){return new $D(e,this.makeCurrency(t))}makeAmount(e,t){return new WD(e,this.makeCurrency(t))}makePercentFee(e){return new JD(e)}makeCurrency(e){return new QD(e,this.converter.getDigits(e))}}class cT{constructor(e){this.converter=e,this.valueObjectsFactory=new rT(e)}calculate(e,t){const n=this.valueObjectsFactory.makeAmount(e.amount,e.currency);return n.isZero()?0:this.roundFee(t.getFeeValue(n))}roundFee(e){return e<500&&(e=10*Math.ceil(e/10)),e>500&&(e=100*Math.ceil(e/100)),e}}class lT{constructor(){this.schema=new ca({applicationFeePercent:{type:Number,required:!0},customFeePercent:{type:Number,required:!0},customFixedFee:{type:Number,required:!0},stripeFee:{percent:{type:Number,required:!0},fixed:{type:Number,required:!0},currency:{type:String,required:!0}},companyParams:{defaultCurrency:{type:String,required:!0},country:{type:String,required:!0},useCustomFee:{type:Boolean,required:!0}}})}validate(e){const t=this.schema.validate(e,{typecast:!1});if(t.length){const n=t.map((t=>{const n=Ls()(e,t.path);return`${t.path}: ${n} ${t.message}`})).join("\n");throw new Error(n)}}}class uT{constructor(e,t){this.checkoutConfiguration=e,this.multiDonationsCalculator=t,this._isEnabled=!0,this._isCovered=this.isFeeCoveredByDefault,this._isCustomCoveredValue=!1}get includeFees(){return this._isEnabled?this.checkoutConfiguration.campaign.config.includeFees:D.XN.ONLY_NO}get isCovered(){return!!this._isEnabled&&this._isCovered}get isCustomCoveredValue(){return this._isCustomCoveredValue}set isCovered(e){this._isCovered=e}set isCustomCoveredValue(e){this._isCustomCoveredValue=e}calculateSmartFeeCovering(e){this._isCovered=this.shouldCoverFee(e.amountInUSD,e.frequency)}calculateFeeAvailability(e){this._isEnabled=this.shouldEnableFee(e.donations,e.currency)}getFee(e,t){return this.multiDonationsCalculator.calculateMultipleFee(e,t).totalFee}getFees(e,t){return this.multiDonationsCalculator.calculateMultipleFee(e,t).donations}getTotal(e,t){var n;const i=null!==(n=e.getDonationItemsAmount())&&void 0!==n?n:0;return this.isCovered?i+this.getFee(e,t):i}getProcessingFee(e,t){return this.isCovered?this.getFee(e,t):0}getProcessingFees(e,t){const n=this.getFees(e,t);if(!this.isCovered)for(const e of Object.keys(n))n[e]=0;return n}getFeeForAmount(e,t){return this.multiDonationsCalculator.calculateFee(e,t)}getTotalForAmount(e,t){return this.isCovered?e+this.getFeeForAmount(e,t):e}getProcessingFeeForAmount(e,t){return this.isCovered?this.getFeeForAmount(e,t):0}get isFeeCoveredByDefault(){return[D.XN.DEFAULT_YES,D.XN.ONLY_YES].includes(this.includeFees)}shouldCoverFee(e,t){var n;if(e=null!=e?e:0,t===W.ONCE&&e>=1e5)return!1;const i=this.checkoutConfiguration.infrastructureParams,s=this.checkoutConfiguration.user,a=null==i?void 0:i.OS,o="Mac OS"===a,r="iOS"===a,c=(null===(n=null==s?void 0:s.address)||void 0===n?void 0:n.countryCode)===D.tg.UNITED_STATES;return!(c&&e>=25e3&&e<1e5&&!r&&!o||!c&&e>=1e4&&e<1e5&&!r&&!o)}shouldEnableFee(e,t){var n;return!((null!==(n=e.getDonationItemsAmount())&&void 0!==n?n:0)+this.getFee(e,t)>99999999)}}class dT{constructor(e){this.feeCalculator=e}calculateFee(e,t){return this.feeCalculator.getFeeForWidget({amount:e,currency:t})}calculateMultipleFee(e,t){const n={};let i=!1,s=0;for(const a of e.getDonationItems()){let e;a.frequency===W.ONCE?i?e=this.calculateSingleDonationFeeWithoutFixed(a,t):(i=!0,e=this.calculateSingleDonationFee(a,t)):e=this.calculateSingleDonationFee(a,t),n[a.id]=e,s+=e}return{donations:n,totalFee:s}}calculateSingleDonationFee(e,t){var n;return this.feeCalculator.getFeeForWidget({amount:null!==(n=e.amount)&&void 0!==n?n:0,currency:t})}calculateSingleDonationFeeWithoutFixed(e,t){var n;return this.feeCalculator.getFeeWithoutFixedForWidget({amount:null!==(n=e.amount)&&void 0!==n?n:0,currency:t})}}class hT{constructor(){this.MIN_LENGTH=2,this.MAX_LENGTH=Kd.NAME_MAX_LENGTH}}class mT extends hT{constructor(){super(...arguments),this.MIN_LENGTH=Kd.NAME_MIN_LENGTH}}mT.LOCALES=[ne.D.ZH_TW,ne.D.ZH_CN,ne.D.JA,ne.D.KO],function(e){e[e.PERSONAL_INFORMATION=1]="PERSONAL_INFORMATION"}(nT||(nT={}));class pT{static resolveSetting(e,t){if(e===nT.PERSONAL_INFORMATION)return function(e){return mT.LOCALES.includes(e.localeCode)?new mT:new hT}(t);throw new Error(`Unknown setting ${e}`)}constructor(e){this.personalInformation=pT.resolveSetting(nT.PERSONAL_INFORMATION,e)}}class gT{static isDonorNameDataPoint(e,t){return t===Hr.DONOR_NAME}static isFiatDonationDataPoint(e,t){return t===WN.DONATION}static isCryptoDonationDataPoint(e,t){return t===fl.DONATION}static isPreDonationUpsellDataPoint(e,t){return t===WN.PRE_DONATION_UPSELL}static isPostDonationUpsellDataPoint(e,t){return t===WN.POST_DONATION_UPSELL}static isDTDDataPoint(e,t){return t===WN.DTD}static isProcessDataPoint(e,t){return t===Hr.PROCESS}static isMailingAddressDataPoint(e,t){return t===Hr.MAILING_ADDRESS}constructor(e,t,n,i,s,a,o,r,c,l){this.checkoutConfiguration=e,this.currencyService=t,this.addressService=n,this.suggestionsService=i,this.intl=s,this.userSession=a,this.sessionAPI=o,this.mailingAddressCustomization=r,this.params=c,this.postDonationUpsellMlSuggestion=l}create(e){const t=this.getDataPoint(e);return gT.isFiatDonationDataPoint(t,e)||gT.isCryptoDonationDataPoint(t,e)?function(e,t,n,i,s,a){switch(a.flowType){case Ft.MONEY:return new Cb(e,t,n,i,s);case Ft.CRYPTO:return new eb(e,t,n);default:throw new le.HP(a.flowType)}}(this.checkoutConfiguration,this.currencyService,this.suggestionsService,this.userSession,this.transactionCosts,{flowType:this.params.flowType}):gT.isPreDonationUpsellDataPoint(t,e)?new t(this.checkoutConfiguration,this.currencyService):gT.isPostDonationUpsellDataPoint(t,e)?new t(this.checkoutConfiguration,this.postDonationUpsellMlSuggestion,this.currencyService):gT.isDTDDataPoint(t,e)?new t(this.checkoutConfiguration,this.currencyService,this.doubleTheDonationAPI,this.transactionCosts):gT.isDonorNameDataPoint(t,e)?new t(this.checkoutConfiguration,this.validationSettings.personalInformation):gT.isMailingAddressDataPoint(t,e)?new t(this.checkoutConfiguration,this.addressService,this.addressValidationAPI,this.countriesService,this.mailingAddressCustomization):gT.isProcessDataPoint(t,e)?new t(this.checkoutConfiguration,this.params.flowType):new t(this.checkoutConfiguration)}get transactionCosts(){return this._transactionCosts||(this._transactionCosts=this.createTransactionCosts()),this._transactionCosts}get countriesService(){return this._countriesService||(this._countriesService=this.createCountriesService()),this._countriesService}get doubleTheDonationAPI(){return this.createDoubleTheDonationAPI()}get validationSettings(){return this.createValidationSettings()}get addressValidationAPI(){return this.createAddressValidationAPI()}getDataPoint(e){return YD[e]}createTransactionCosts(){return function(e){let{checkoutConfiguration:t,currencyService:n}=e;const i=(a=t.company,o=n,new oT(new lT,{customFixedFee:a.coverFees.amount,customFeePercent:a.coverFees.percent,applicationFeePercent:a.applicationFees.money,stripeFee:a.stripeFee,companyParams:{country:a.country||"US",defaultCurrency:a.defaultCurrency,useCustomFee:a.coverFees.custom}},new cT(o))),s=new dT(i);var a,o;return new uT(t,s)}({checkoutConfiguration:this.checkoutConfiguration,currencyService:this.currencyService})}createCountriesService(){return(0,$N.g)({intl:this.intl,excludePalestineFromCountriesList:this.checkoutConfiguration.featureConfig.excludePalestineFromCountriesList})}createDoubleTheDonationAPI(){return new zD(this.sessionAPI)}createAddressValidationAPI(){return new XN(this.sessionAPI)}createValidationSettings(){return new pT({localeCode:this.checkoutConfiguration.environmentConfig.locale})}}class yT{constructor(e){this.dataPointFactory=e,this.dataPoints=new Map}getDataPoint(e){let t=this.dataPoints.get(e);return void 0===t&&(t=this.registerDataPoint(e)),t}registerDataPoint(e){const t=this.dataPointFactory.create(e);return this.dataPoints.set(e,t),t}}class fT{constructor(e,t){this.checkoutState=e,this.params=t}get(){return this.checkoutState.mailingAddress.dataPoint.isEnabled?this.params.screenSet.mailingAddress:this.params.screenSet.privacy}}var ET,ST=n(3497),vT=n.n(ST);function AT(e,t){return e.slice().filter((e=>null!==e)).sort(((e,t)=>e-t)).map((e=>(t-Number(e))/Math.abs(t-Number(e))||0)).reduce(((e,t)=>e+t),e.length)}class CT{constructor(e,t,n,i,a,o){this.tracker=e,this.checkoutConfiguration=t,this.sessionTokenService=n,this.sentry=i,this.debouncedRequestService=a,this.requestService=o,this.created=!1,this.latestUpdatePayload=null,this.latestUpdateResponse=null,this.sessionRestoreData=null,this.params={baseURL:s}}get sessionToken(){return this.sessionTokenService.token}get isCreated(){return this.created}get sessionStageInitial(){return this._sessionStageInitial}get(e,t,n){return(0,c.sH)(this,void 0,void 0,(function*(){const i={retries:5,delay:200};(null==n?void 0:n.retries)&&(null==n?void 0:n.delay)&&(i.retries=n.retries,i.delay=n.delay);const s=yield this.waitForCreated((()=>this.requestService.get({url:`${this.params.baseURL}/${fn}/${this.sessionToken}/${e}`,headers:this.headers,params:t,cancelSimilar:!0,rejectOnInvalid:null==n?void 0:n.rejectsOnInvalid})),i);if(ue.isSuccess(s))return s.successResult;throw new le.gR}))}post(e,t,n){return(0,c.sH)(this,void 0,void 0,(function*(){const i=this.getPostPromise(e,t,n);return this.debouncedRequestService.request({promise:i,allowMerge:!1,allowDelay:!1})}))}update(e){return(0,c.sH)(this,void 0,void 0,(function*(){this.sessionStageInitial||(this.sessionStageInitial=this.getSessionStageInitial(e));const t=mi(Object.assign(Object.assign({},e),{initial:this.sessionStageInitial})),n=this.getUpdaterPromise(t);return this.debouncedRequestService.request({promise:n,allowMerge:!1,allowDelay:!1})}))}close(){return(0,c.sH)(this,void 0,void 0,(function*(){yield this.debouncedRequestService.request({promise:this.getClosePromise(),allowMerge:!1,allowDelay:!1})}))}updateSessionWidgetDefaults(e,t){this.sessionStageInitial&&(this.sessionStageInitial.widgetDefaults=this.getWidgetDefaults(e,t))}abandon(e){return(0,c.sH)(this,void 0,void 0,(function*(){return this.debouncedRequestService.request({promise:this.getAbandonPromise(e),allowMerge:!1,allowDelay:!1})}))}getNextScreen(e,t){return(0,c.sH)(this,void 0,void 0,(function*(){const n=typeof e.clientHour,i=typeof e.clientWeekday,s=t?`/${t}`:"";if("number"!==n||"number"!==i||void 0===e.clientHour||void 0===e.clientWeekday){const t=new Date;this.sentry.captureException(new Error("getNextScreen params clientHour or clientWeekday is not a number"),{extra:{params:e,dateForComparisonHour:t.getHours(),dateForComparisonWeekday:t.getDay(),clientHourType:n,clientWeekdayType:i}})}return this.requestService.post({url:`${this.params.baseURL}/${fn}/${this.sessionToken}${s}/getNextScreen`,headers:this.headers,params:e,cancelSimilar:!0,rejectOnInvalid:!0})}))}getFeeCovering(e){return this.requestService.post({url:`${this.params.baseURL}/${fn}/getFeeCovering?token=${this.sessionToken}`,headers:this.headers,params:e,cancelSimilar:!0,rejectOnInvalid:!0})}getPostPromise(e,t,n){return()=>(0,c.sH)(this,void 0,void 0,(function*(){var i;let s;const a=null!==(i=null==n?void 0:n.sessionToken)&&void 0!==i?i:this.sessionToken;try{s=yield this.requestService.post({url:`${this.params.baseURL}/${fn}/${a}/${e}`,headers:this.headers,params:t,rejectOnInvalid:null==n?void 0:n.rejectsOnInvalid,setCustomFingerprint:!0})}catch(e){throw this.sentry.captureException(e),e}return s}))}getUpdaterPromise(e){return()=>(0,c.sH)(this,void 0,void 0,(function*(){let t;if(vT()(e,this.latestUpdatePayload)&&this.latestUpdateResponse)return ue.success(this.latestUpdateResponse);try{t=yield this.requestService.post({url:`${this.params.baseURL}/${fn}/${this.sessionToken}`,headers:this.headers,params:Object.assign(Object.assign({},e),{created:this.created}),setCustomFingerprint:!0})}catch(e){throw this.sentry.captureException(e),e}return ue.isSuccess(t)?(this.created=!0,this.latestUpdateResponse=t.successResult,this.latestUpdatePayload=e,t):this.handleSessionUpdateFailure(t)}))}getClosePromise(){return()=>this.requestService.post({url:`${this.params.baseURL}/${fn}/${this.sessionToken}/close`,headers:this.headers,params:{},rejectOnInvalid:!0})}getAbandonPromise(e){return()=>(0,c.sH)(this,void 0,void 0,(function*(){let t;try{t=yield this.requestService.post({url:`${this.params.baseURL}/${fn}/${this.sessionToken}/abandon`,headers:this.headers,params:e,rejectOnInvalid:!0})}catch(e){throw this.sentry.captureException(e),e}return ue.isSuccess(t)?t:this.handleSessionAbandonFailure(t)}))}setRestoreSessionData(e){this.sessionRestoreData=e,this.created=!0}get headers(){const e={"Content-Type":"text/plain; charset=utf-8"};return"on"===Te("developmentMode")&&(e["X-FRU-DevelopmentMode"]="on"),e}set sessionStageInitial(e){this._sessionStageInitial=e}handleSessionUpdateFailure(e){var t;const n=!!(null===(t=e.failureResult.errors)||void 0===t?void 0:t.customerEmail);return n?ue.fail({customerEmailError:n}):ue.fail({})}handleSessionAbandonFailure(e){var t;const n=!!(null===(t=e.failureResult.errors)||void 0===t?void 0:t.customerEmail);return n?ue.fail({customerEmailError:n}):ue.fail({})}getSessionStageInitial(e){var t,n,i,s,a,o,r,c;const l=window.location.href,u=ii(l);return{token:this.sessionToken,key:this.checkoutConfiguration.campaign.key,livemode:this.checkoutConfiguration.infrastructureParams.livemode,urlParams:u,widgetUrl:l,launcherParams:null!==(t=this.checkoutConfiguration.rawExternal.queryParams)&&void 0!==t?t:{},timezone:bn(),trackerParams:{clientId:this.tracker.clientId,pageViewId:null!==(n=this.tracker.pageViewId)&&void 0!==n?n:"",checkoutViewId:this.sessionToken,clientLocale:this.tracker.clientLocale,uaWebdriver:Boolean(navigator.webdriver),tags:this.tracker.getTags()},widgetDefaults:this.getWidgetDefaults(e.donation.amount||0,e.checkoutDefaults),customFields:this.checkoutConfiguration.getInitialCustomFields(),elementKey:this.checkoutConfiguration.element.key,elementType:this.checkoutConfiguration.element.type,elementReminderKey:this.checkoutConfiguration.element.reminderKey||"",fundraisingPageKey:(null===(i=this.checkoutConfiguration.fundraisingPage)||void 0===i?void 0:i.key)||"",fundraisingPageCustomFields:(null===(s=this.checkoutConfiguration.fundraisingPage)||void 0===s?void 0:s.customFields)||[],startUrl:"",launcherUrl:"",checkoutV2:!0,checkoutType:this.checkoutConfiguration.checkoutType,checkoutIntentCustomFields:null!==(c=null===(r=null===(o=null===(a=this.checkoutConfiguration.rawExternal.intent)||void 0===a?void 0:a.checkoutSettings)||void 0===o?void 0:o.customFields)||void 0===r?void 0:r.filter((e=>e.name&&e.value)))&&void 0!==c?c:[],fromDonorPortal:Boolean(this.checkoutConfiguration.infrastructureParams.fromDonorPortal)}}getWidgetDefaults(e,t){var n,i,s,a,o,r;const c=null===(n=this.sessionRestoreData)||void 0===n?void 0:n.widgetDefaults,l={amount:t.defaultAmounts,frequency:t.frequency,amountOptions:t.amountOptions,currency:t.currency,relations:{amount:AT([t.defaultAmount],e),amountOptions:AT(t.frequencyAmountOptions,e)}};return c?{amount:null!==(i=c.amount)&&void 0!==i?i:l.amount,frequency:null!==(s=c.frequency)&&void 0!==s?s:l.frequency,amountOptions:null!==(a=c.amountOptions)&&void 0!==a?a:l.amountOptions,currency:null!==(o=c.currency)&&void 0!==o?o:l.currency,relations:null!==(r=c.relations)&&void 0!==r?r:l.relations}:l}waitForCreated(e,t){return(0,c.sH)(this,arguments,void 0,(function(e,t){var n=this;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return function*(){if(n.isCreated)try{return yield e()}catch(s){if(i>=t.retries)throw n.sentry.captureException(s),s;return yield new Promise((e=>setTimeout(e,t.delay))),n.waitForCreated(e,t,++i)}return yield new Promise((e=>setTimeout(e,t.delay))),n.waitForCreated(e,t,++i)}()}))}}CT.SESSION_UPDATE_DEBOUNCE=100;class PT extends CT{}!function(e){e.NONE="none",e.RANDOM="random"}(ET||(ET={}));const NT=e=>{const{type:t,generalConsent:n,isGeneralConsentShown:i}=e;return t===D.kt.GENERAL?{type:D.Au.GENERAL,general:(s=i,a=n.isAccepted,s?a?D.Bg.OPTED_IN:D.Bg.OPTED_OUT:D.Bg.NOT_SUBMITTED),customized:{email:D.Bg.NOT_SUBMITTED,phoneCalls:D.Bg.NOT_SUBMITTED,postalMail:D.Bg.NOT_SUBMITTED,sms:D.Bg.NOT_SUBMITTED,socialMedia:D.Bg.NOT_SUBMITTED}}:{type:D.Au.GENERAL,general:D.Bg.NOT_SUBMITTED,customized:{email:D.Bg.NOT_SUBMITTED,phoneCalls:D.Bg.NOT_SUBMITTED,postalMail:D.Bg.NOT_SUBMITTED,sms:D.Bg.NOT_SUBMITTED,socialMedia:D.Bg.NOT_SUBMITTED}};var s,a};class bT{constructor(e,t,n){this.checkoutState=e,this.checkoutConfiguration=t,this.sessionAPI=n,this._closed=!1,this.sessionClosePromise=null,this._screenHistory=[],this._sessionRestoreData=null}get closed(){return this._closed}get closing(){return!!this.sessionClosePromise}get screenHistory(){return this._screenHistory}get sessionRestoreData(){return this._sessionRestoreData}updateSessionWidgetDefaults(){}closeSession(){return(0,c.sH)(this,void 0,void 0,(function*(){if(!this.closed&&!this.checkoutConfiguration.infrastructureParams.showcase){if(this.sessionClosePromise)return this.sessionClosePromise;this.sessionClosePromise=this.sessionAPI.close();try{yield this.sessionClosePromise,this._closed=!0}finally{this.sessionClosePromise=null}}}))}abandonSession(){return(0,c.sH)(this,void 0,void 0,(function*(){const e=this.remindMeLaterDataPoint.toObject(),t=this.checkoutState.privacy.donorEmailDataPoint.toObject(),n={remindMeLater:{shown:e.shown,used:e.used}};return t.email&&(n.email=t.email),this.sessionAPI.abandon(n)}))}setScreenHistory(e){this._screenHistory=e}setRestoreSessionData(e){this._sessionRestoreData=e,this.sessionAPI.setRestoreSessionData(e)}get remindMeLaterDataPoint(){return this.checkoutState.remindMeLater.dataPoint}}class DT extends bT{updateSession(e){return(0,c.sH)(this,void 0,void 0,(function*(){if(this.checkoutConfiguration.infrastructureParams.showcase)return ue.success({});const t=this.checkoutState.tribute.dataPoint,n=this.checkoutState.comment.dataPoint,i=this.checkoutState.designation.dataPoint,s=this.donationDataPoint.toObject(),a=this.getDonationAmount(this.donationDataPoint,e),o=this.donorNameDataPoint.toObject(),r=this.donorEmailDataPoint.toObject(),c=this.customerTitleDataPoint.toObject(),l=this.phoneNumberDataPoint.toObject(),u=t.toObject(),d=this.questionsDataPoint.toObject(),h=this.termsAndConditionsDataPoint.toObject(),m=this.onBehalfOfDataPoint.toObject(),p=this.donateAnonymousDataPoint.toObject(),g=this.checkoutState.communicationConsent.dataPoint.toObject();return this.sessionAPI.update({donationType:Ft.CRYPTO,comment:n.isActive?n.comment:"",tribute:u.inHonorOf&&u.isActive?{labelType:u.labelType,type:u.type,inHonorOf:u.inHonorOf}:null,questions:d.questions,customer:{firstName:o.firstName,lastName:o.lastName,title:c.title,email:r.email,phone:l.phone,onBehalfOf:m.companyName,anonymousChecked:p.anonymousChecked,termsChecked:h.isAccepted,consent:NT(g)},donation:{frequency:W.ONCE,amount:a.amount,currency:s.currency,total:a.total,publicFee:0,goalKey:i.goalKey,goalName:i.goalName,hintsVariantName:ET.NONE,hintDescription:"",_suggestedAmountHint:null,donationItems:[{amount:a.amount,fee:0,frequency:W.ONCE,goalKey:i.goalKey,hintsVariantName:ET.NONE,hintDescription:"",_suggestedAmountHint:null}]},checkoutDefaults:this.getCheckoutDefaults(this.donationDataPoint),screenHistory:[]})}))}get donationDataPoint(){return this.checkoutState.donation.dataPoint}get donorNameDataPoint(){return this.checkoutState.privacy.donorNameDataPoint}get donorEmailDataPoint(){return this.checkoutState.privacy.donorEmailDataPoint}get phoneNumberDataPoint(){return this.checkoutState.privacy.phoneNumberDataPoint}get customerTitleDataPoint(){return this.checkoutState.privacy.customerTitleDataPoint}get termsAndConditionsDataPoint(){return this.checkoutState.privacy.termsAndConditionsDataPoint}get onBehalfOfDataPoint(){return this.checkoutState.privacy.onBehalfOfDataPoint}get donateAnonymousDataPoint(){return this.checkoutState.privacy.donateAnonymousDataPoint}get questionsDataPoint(){return this.checkoutState.questions.dataPoint}getCheckoutDefaults(e){return{amountOptions:this.checkoutConfiguration.defaultAmountOptions,defaultAmounts:this.checkoutConfiguration.defaultAmounts,frequency:e.frequency,currency:e.currency,frequencyAmountOptions:this.checkoutConfiguration.campaign.config.frequencies[e.frequency].amountOptions,defaultAmount:this.checkoutConfiguration.defaultAmounts[e.frequency]||0}}getDonationAmount(e,t){if((null==t?void 0:t.canUseAmountDefaults)&&!e.amount)return{amount:e.getDefaultAmountInCurrency(),total:e.getDefaultTotalInCurrency()};const n=e.toObject();return{amount:n.amount,total:n.total}}}class TT extends Ca{constructor(e,t){super(),this.payload={checkoutIsRecurring:e.frequency!==W.ONCE?1:0,checkoutCurrency:e.currency,checkoutAmount:e.amount,checkoutPresets:e.amountOptions[e.frequency],elementKey:t.elementKey,elementType:t.elementType,elementReminderKey:t.elementReminderKey}}}class _T extends TT{constructor(e,t,n,i,s,a){super(e,t),this.merge({checkoutScreen:n,chargeKey:i.chargeKey,chargeInUSDAmount:i.chargeInUSDAmount,chargeInDefaultCurrencyAmount:i.chargeInDefaultCurrencyAmount,chargeAmount:i.chargeAmount,chargeCurrency:i.chargeCurrency,chargeFeeCovered:i.chargeFeeCovered?1:0,chargePaymentMethod:i.chargePaymentMethod,chargeIsRecurring:i.chargeIsRecurring?1:0,chargeHasComment:i.chargeHasComment?1:0,chargeHasTribute:i.chargeHasTribute?1:0,chargeGoal:i.chargeGoal,chargeCampaignKey:i.chargeCampaignKey,duration:s,eventComment:a})}get eventType(){return"checkoutCharge"}}class kT extends TT{constructor(e,t,n,i,s){super(e,t),this.merge({checkoutScreen:n,checkoutClickElement:i,clickAHref:null==s?void 0:s.link,clickDOMPath:null==s?void 0:s.path,clickText:null==s?void 0:s.text})}get eventType(){return"checkoutClick"}}class OT extends TT{constructor(e,t,n){super(e,t),this.merge({checkoutScreen:n})}get eventType(){return"checkoutClose"}}class IT extends TT{constructor(e,t,n){super(e,t),this.merge({customEventType:n.customEventType,customEventData:JSON.stringify(n.customEventData)})}get eventType(){return"customEvent"}}class xT extends TT{constructor(e,t,n,i,s,a,o,r,c){super(e,t),this.merge({checkoutScreen:n,checkoutError:i,chargePaymentMethod:s,duration:a,customEventData:JSON.stringify({paymentErrorCode:o,paymentErrorType:r,paymentErrorDeclineCode:c})})}get eventType(){return"checkoutError"}}class wT extends TT{constructor(e,t,n,i,s){super(e,t),this.payload.askPagePosition=s||null,this.merge({checkoutScreen:n,eventComment:i})}get eventType(){return"checkoutScreenView"}}class RT extends TT{constructor(e,t,n,i){super(e,t),this.merge({duration:n,eventComment:i})}get eventType(){return"checkoutView"}}function MT(e,t){if(!e)return;if("test"===t&&e.FUN_SPLIT_TESTING_NAME)return{name:e.FUN_SPLIT_TESTING_NAME,node:e};if("variant"===t&&e.FUN_SPLIT_TESTING_VARIANT_NAME)return{name:e.FUN_SPLIT_TESTING_VARIANT_NAME,node:e};const n=ai(e,`fun-${t}`);if(n)return{name:n,node:e};const i=e.getAttribute("href")||"",s=/#FUN/.test(i),a=/#X/.test(i);if(s||a){const n=function(e){if(!e)return null;if(!ni.test(e))return null;const t=/(#.+?)$/.exec(e);if(!t)return null;const n=t[0],i=ni.exec(n);if(!i)return null;const s=i[1],a=ii(n),o={key:s};return Object.assign(o,a),o}(i);if(n&&n.key&&n[t])return{name:n[t],node:e}}}class LT{constructor(e){this.node=e,this.path="",this.purePath=this.createPath(this.node),this.convertPathToString(this.purePath),this.extractDataFromNode(),this.extractSplitTest()}createPath(e){let t=e;const n=[];for(;!(t instanceof HTMLHtmlElement)&&t.parentNode;)n.push(t),t=t.parentNode;return n}convertPathToString(e){this.path=e.map((e=>{if(e.tagName&&e.nodeName&&"HTML"!==e.tagName){const t=e.classList?[].slice.call(e.classList):[];return e.tagName.toLowerCase()+(t.length?"."+t.join("."):"")}return!1})).filter(Boolean).reverse().join(" ")}extractDataFromNode(){const e=this.findExtractableNode();if(!e)return;const t=e.innerText||e.textContent||e.value;if(this.text=t?t.replace(/\s+/g," ").trim().substr(0,200):void 0,e instanceof HTMLAnchorElement)this.link=e.href;else{let t=e;for(;t;){if(t.href){this.link=t.href;break}t=t.parentNode}}}findExtractableNode(){return this.purePath.find((e=>{if(e.nodeType!==Node.ELEMENT_NODE)return!1;const t=e.tagName.toLowerCase();return-1!==["a","button"].indexOf(t)||"input"===t&&-1!==["submit","button"].indexOf(e.type)}))}extractSplitTest(){const e=function(e){if(!function(e){if(!e)return!1;const t=si(e,(e=>Boolean(e.FUN_SPLIT_TESTING)));return Boolean(t)}(e))return;const t=function(e){const t=si(e,(e=>Boolean(e.FUN_SPLIT_TESTING_NAME||ai(e,"fun-test"))));return MT(e,"test")||MT(t,"test")}(e),n=function(e){const t=si(e,(e=>Boolean(e.FUN_SPLIT_TESTING_VARIANT_NAME||ai(e,"fun-variant"))));return MT(e,"variant")||MT(t,"variant")}(e);return t&&n?{test:t.name,variant:n.name}:void 0}(this.node);e&&(this.test=e.test,this.variant=e.variant)}}class UT extends Ea{constructor(e,t,n,i,s,a,o){super(s,a,o),this.currencyService=e,this.checkoutState=t,this.checkoutUIState=n,this.screenDataFormatter=i,this.checkoutConfiguration=s,this.sessionTokenService=a,this.params=o}createCheckoutViewEvent(){var e,t,n;const i={isAmountFromElement:Boolean((null===(e=this.checkoutConfiguration.external.element)||void 0===e?void 0:e.key)&&(null===(n=null===(t=this.checkoutConfiguration.external.state)||void 0===t?void 0:t.donation)||void 0===n?void 0:n.amount))};return new RT(this.checkoutEventPayParams,this.checkoutEventElementParams,this.getOpeningTime(),i)}createCheckoutScreenViewEvent(e){const t={renderDuration:null};return e.transitionStartedAt&&e.transitionFinishedAt&&(t.transitionDuration=e.transitionFinishedAt.getTime()-e.transitionStartedAt.getTime()),e.renderedAt&&e.transitionFinishedAt&&(t.renderDuration=e.renderedAt.getTime()-e.transitionFinishedAt.getTime()),this.checkoutConfiguration.isRestoredByWidgetSession&&(t.isRestoredByWidgetSession=!0),new wT(this.checkoutEventPayParams,this.checkoutEventElementParams,this.checkoutScreenName,t,e.askPagePosition)}createCheckoutChargeEvent(e){return new _T(this.checkoutEventPayParams,this.checkoutEventElementParams,this.checkoutScreenName,{chargeKey:e.donationId,chargeInUSDAmount:this.donationDataPoint.totalInUSD||0,chargeInDefaultCurrencyAmount:this.donationDataPoint.totalInDefaultCurrency,chargeAmount:this.donationDataPoint.total,chargeCurrency:this.donationDataPoint.currency,chargeFeeCovered:!1,chargePaymentMethod:e.clientPaymentMethod,chargeIsRecurring:this.donationDataPoint.frequency!==W.ONCE,chargeHasComment:this.commentDataPoint.isActive&&!!this.commentDataPoint.comment,chargeHasTribute:this.tributeDataPoint.isFilled,chargeGoal:this.designationDataPoint.goalKey||void 0,chargeCampaignKey:this.checkoutConfiguration.campaign.key},e.duration)}createCheckoutErrorEvent(e){return new xT(this.checkoutEventPayParams,this.checkoutEventElementParams,this.checkoutScreenName,e.errorMessage,D._h.CRYPTO,e.durationTime)}createCheckoutCloseEvent(){return new OT(this.checkoutEventPayParams,this.checkoutEventElementParams,this.checkoutScreenName)}createCheckoutClickEvent(e){return new kT(this.checkoutEventPayParams,this.checkoutEventElementParams,this.checkoutScreenName,e.elementName||"other",new LT(e.target))}createCheckoutCustomEvent(e){return new IT(this.checkoutEventPayParams,this.checkoutEventElementParams,{customEventType:e.type,customEventData:"data"in e?e.data:void 0})}getCommonEventPayload(){var e,t;const n=this.getCurrentScreenData();return Object.assign(Object.assign({},super.getCommonEventPayload()),{donationType:this.processDataPoint.flowType,checkoutFrequency:this.donationDataPoint.frequency,checkoutDefaultAmount:null!==(e=this.donationDataPoint.defaultAmount)&&void 0!==e?e:0,checkoutInUSDAmount:null!==(t=this.donationDataPoint.amountInUSD)&&void 0!==t?t:0,checkoutCurrencyRate:this.currencyService.getRate(this.donationDataPoint.currency),checkoutScreen:null==n?void 0:n.screenName,checkoutScreenData:n&&this.checkoutUIState?JSON.stringify(this.screenDataFormatter.format(n.screenName,n.screenData,this.screenFormatterData,this.checkoutUIState,this.checkoutConfiguration)):void 0})}get screenFormatterData(){return{donation:{amount:this.donationDataPoint.amount,currency:this.donationDataPoint.currency,frequency:this.donationDataPoint.frequency,defaultAmount:this.donationDataPoint.defaultAmount},tribute:{isActive:this.tributeDataPoint.isActive}}}get checkoutEventPayParams(){var e;const t={};for(const e of Object.values(W))t[e]=[];return{frequency:this.donationDataPoint.frequency,currency:this.donationDataPoint.currency,amount:null!==(e=this.donationDataPoint.amount)&&void 0!==e?e:0,amountOptions:t}}get checkoutEventElementParams(){return{elementKey:this.checkoutConfiguration.element.key,elementType:this.checkoutConfiguration.element.type,elementReminderKey:this.checkoutConfiguration.element.reminderKey}}get checkoutScreenName(){var e;return(null===(e=this.getCurrentScreenData())||void 0===e?void 0:e.screenName)||""}get processDataPoint(){return this.checkoutState.process.dataPoint}get donationDataPoint(){return this.checkoutState.donation.dataPoint}get tributeDataPoint(){return this.checkoutState.tribute.dataPoint}get commentDataPoint(){return this.checkoutState.comment.dataPoint}get designationDataPoint(){return this.checkoutState.designation.dataPoint}}class FT{constructor(e){this.sessionAPI=e}pay(e){return(0,c.sH)(this,void 0,void 0,(function*(){return this.sessionAPI.post("pay",{paymentMethod:null==e?void 0:e.paymentMethod})}))}hold(e){return(0,c.sH)(this,void 0,void 0,(function*(){const t=Object.assign({},e);return this.sessionAPI.post("hold",t,{rejectsOnInvalid:!0})}))}status(){return(0,c.sH)(this,void 0,void 0,(function*(){try{return(yield this.sessionAPI.get("status",{},{retries:5,delay:200,rejectsOnInvalid:!0})).completed}catch(e){throw new Error("Payment was not started")}}))}}const jT={amount:0,currency:"USD",isFallback:!0};class BT{constructor(e,t,n){this.sessionApi=e,this.currencyService=t,this.suggestions=n,this._amountSuggestion=jT,this._originalAmountSuggestion=jT}getOriginalAmountSuggestion(){return this._originalAmountSuggestion}getAdjustedAmountSuggestion(){return this._amountSuggestion}fetchAmountSuggestion(e){return(0,c.sH)(this,void 0,void 0,(function*(){try{const t=yield this.sessionApi.post("getPduAmount",e);if(ue.isSuccess(t)){const n=t.successResult;this._originalAmountSuggestion=n,this._amountSuggestion=this.adjustSuggestion(n,e.minRecurringAmount)}else this._originalAmountSuggestion=jT,this._amountSuggestion=jT}catch(e){this._originalAmountSuggestion=jT,this._amountSuggestion=jT}}))}adjustSuggestion(e,t){const{amount:n,currency:i}=e;if(n<t)return Object.assign(Object.assign({},e),{amount:t});const s=this.currencyService.convert(BT.MAX_AMOUNT_IN_USD,"USD",i);return n>s?Object.assign(Object.assign({},e),{amount:this.suggestions.beautify(s,i)}):Object.assign(Object.assign({},e),{amount:n})}}BT.MAX_AMOUNT_IN_USD=1e5;class GT{constructor(e,t,n,i){this.globalWindow=e,this.checkoutConfiguration=t,this.currencyService=n,this.checkoutState=i}getUrl(){var e,t,n,i,s,a;if(this.isShowcase)return null;const o=this.resolveTargetConfig(),r=o.type===D.N4.REDIRECT,c=(null===(e=this.checkoutConfiguration.external.campaign)||void 0===e?void 0:e.successUrl)||(r?o.redirect.url:null),l=null===(t=this.processDataPoint.completedData)||void 0===t?void 0:t.donationIds,u=null===(n=this.processDataPoint.completedData)||void 0===n?void 0:n.donationId;if(!c)return null;const d={amount:this.currencyService.toFloatUnformattedStr(this.donationDataPoint.total,this.donationDataPoint.currency),monthly:(null===(i=this.postDonationUpsellDataPoint)||void 0===i?void 0:i.isAccepted)||this.donationDataPoint.frequency===W.MONTHLY,donationId:null!==(s=(null==l?void 0:l.join(","))||u)&&void 0!==s?s:"",currency:this.donationDataPoint.currency,frequency:this.donationDataPoint.frequency,lang:(0,za.Qk)(this.checkoutConfiguration.environmentConfig.locale)};if(r&&!o.redirect.includeSupporterData||(d.supporterFirstName=this.donorNameDataPoint.firstName,d.supporterLastName=this.donorNameDataPoint.lastName,d.supporterEmail=this.donorEmailDataPoint.email),this.designationDataPoint.goalKey){const e=this.designationDataPoint.goals.find((e=>e.key===this.designationDataPoint.goalKey));d.designationId=null==e?void 0:e.key,d.designationName=null==e?void 0:e.name}0!==this.designationsDataPoint.selectedGoals.length&&(d.designationName=this.designationsDataPoint.selectedGoals.map((e=>e.name)).join(","),d.designationId=this.designationsDataPoint.selectedGoals.map((e=>e.id)).join(",")),(null===(a=this.processDataPoint.completedData)||void 0===a?void 0:a.tributeId)&&(d.tributeId=this.processDataPoint.completedData.tributeId);try{const e=this.createURL(c);for(const t in d)if(Object.prototype.hasOwnProperty.call(d,t)){const n=d[t];e.searchParams.append(t,String(n))}return e.toString()}catch(e){return console.error("Invalid redirect URL"),null}}canRedirect(){return!!this.getUrl()}tryRedirect(e){const t=this.getUrl();return t?new Promise((()=>{this.redirect(t,e)})):Promise.resolve()}redirect(e,t){t.disarmCloseGuard(),this.globalWindow.location.replace(e)}get isShowcase(){return this.checkoutConfiguration.infrastructureParams.showcase}get donationDataPoint(){return this.checkoutState.donation.dataPoint}get postDonationUpsellDataPoint(){return this.checkoutState instanceof cN?this.checkoutState.postDonationUpsell.dataPoint:null}get donorNameDataPoint(){return this.checkoutState.privacy.donorNameDataPoint}get donorEmailDataPoint(){return this.checkoutState.privacy.donorEmailDataPoint}get designationDataPoint(){return this.checkoutState.designation.dataPoint}get designationsDataPoint(){return this.checkoutState.designations.dataPoint}get processDataPoint(){return this.checkoutState.process.dataPoint}createURL(e){return"/"===e[0]&&(e=this.globalWindow.location.origin+e),/^https?:\/\//m.test(e)||(e="https://"+e),new URL(e)}resolveTargetConfig(){return this.checkoutConfiguration.checkoutType===Ce.PAGE&&this.checkoutConfiguration.campaignPage.thankYouScreen?this.checkoutConfiguration.campaignPage.thankYouScreen:this.checkoutConfiguration.campaign.config.thankYouScreen}}class qT extends Error{constructor(e){super(`Component "${e} doesn’t defined, unable to preload`)}}class HT{constructor(e){this.componentsMap=e,this.componentImports=new Set}add(e){return this.assertComponentDefined(e),this.componentImports.add(this.componentsMap[e]),this}load(){for(const e of this.componentImports)e()}assertComponentDefined(e){if(!this.componentsMap[e])throw new qT(e)}}class VT{constructor(e,t){this.loadableComponents=e,this.campaignConfig=t}preload(){return this.configureLoadableComponents(),this.loadableComponents.load()}}var KT;!function(e){e.PHONE_INPUT="PrivacyPhoneInput"}(KT||(KT={}));class YT extends VT{configureLoadableComponents(){this.campaignConfig.showPhone&&this.loadableComponents.add(KT.PHONE_INPUT)}}const zT={[KT.PHONE_INPUT]:()=>Promise.all([n.e(624),n.e(833)]).then(n.bind(n,5833))};function WT(e){const t=new HT(zT);return new YT(t,e)}class $T{constructor(e,t,n){var i;this.componentsPreloader=e,this.checkoutState=t,this.showPaymentLoader=!1,this.askPageActiveTab=Yr.CAUSE,this.pagesOfQuestionsScreen=0,this.showCheckoutStepsSuccess=!1,this.cookiePreferencesModalShown=!1,this.cookiePreferencesModalInitiatorElement=null,this.isDonationFormVisibleTrackEventBlocked=!1,this._showCloseButton=!0,this.firstScreen=n.screens.firstScreen,this.unrestrictedExitScreens=n.screens.unrestrictedExitScreens,this.mobileExitScreens=n.screens.mobileExitScreens,this.alwaysRenderedScreens=n.screens.alwaysRenderedScreens,this.screensWithoutTributeBadge=n.screens.screensWithoutTributeBadge,this.mobileScreensWithoutAskTitle=n.screens.mobileScreensWithoutAskTitle,this.mobileScreensWithAskText=n.screens.mobileScreensWithAskText,this.mobileScreensWithoutFaqLinks=n.screens.mobileScreensWithoutFaqLinks,this.mobileScreensWithoutAskPage=n.screens.mobileScreensWithoutAskPage,this.screensWithoutAskOverlay=n.screens.screensWithoutAskOverlay,this.canNotGoBackScreens=n.screens.canNotGoBackScreens,this.alwaysShowCloseButtonScreens=n.screens.alwaysShowCloseButtonScreens,this.conditionallyShowCloseButtonScreens=n.screens.conditionallyShowCloseButtonScreens,this.finalUnavailableScreens=null===(i=null==n?void 0:n.screens)||void 0===i?void 0:i.finalUnavailableScreens}get showCloseButton(){return this._showCloseButton}get showFAQLinks(){return!0}preloadComponents(){return this.componentsPreloader.preload()}setCloseButtonVisibility(e,t){this._showCloseButton=!t.includes(this.firstScreen)&&this.conditionallyShowCloseButtonScreens.includes(e)||this.alwaysShowCloseButtonScreens.includes(e),this.checkoutState.syncUpdate()}setShowCheckoutStepsSuccess(e){this.showCheckoutStepsSuccess=e,this.checkoutState.syncUpdate()}isUnrestrictedExitScreen(e){return this.unrestrictedExitScreens.includes(e)}isMobileExitScreen(e){return this.mobileExitScreens.includes(e)}isScreenWithoutTributeBadge(e){return this.screensWithoutTributeBadge.includes(e)}isMobileScreenWithoutAskTitle(e){return this.mobileScreensWithoutAskTitle.includes(e)}isMobileScreenWithAskText(e){return this.mobileScreensWithAskText.includes(e)}isMobileScreenWithoutFaqLinks(e){return this.mobileScreensWithoutFaqLinks.includes(e)}isMobileScreenWithoutAskPage(e){return this.mobileScreensWithoutAskPage.includes(e)}isScreenWithoutAskOverlay(e){return this.screensWithoutAskOverlay.includes(e)}isCanNotGoBackScreen(e){return this.canNotGoBackScreens.includes(e)}isFinalAvailableScreen(e){return void 0!==this.finalUnavailableScreens&&!this.finalUnavailableScreens.includes(e)}}class XT extends $T{}const QT=[oc.THANK_YOU],ZT=[],JT=[oc.THANK_YOU,oc.BLOCKED],e_=[oc.THANK_YOU],t_=[oc.THANK_YOU],n_=[],i_=[oc.THANK_YOU],s_=[],a_=[],o_=yl.CRYPTO_CURRENCY,r_=[...e_,yl.CRYPTO_CURRENCY],c_=[...n_,yl.CRYPTO_CURRENCY],l_=[...a_,yl.CRYPTO_CURRENCY],u_=[yl.CRYPTO_CURRENCY,oc.THANK_YOU,oc.BLOCKED],d_=[oc.COMMENT],h_=[...JT,oc.QUESTIONS,yl.CRYPTO_CURRENCY],m_=[...QT,yl.CRYPTO_CURRENCY],p_=[...i_],g_=[...s_],y_=[oc.THANK_YOU],f_=[...ZT],E_=[],S_="facebook",v_="twitter",A_="linkedin",C_="email";function P_(e,t){if(void 0!==t){let n="?";return e.includes("?")&&(n="&"),`${e}${n}ref=${t}`}return e}function N_(e,t,n,i,s){let a="";switch(e){case A_:return a=pn.stringify({mini:"true",url:P_(t,s),summary:n}),`https://www.linkedin.com/shareArticle?${a}`;case v_:return a=pn.stringify({url:P_(t,s),text:n}),`https://twitter.com/intent/tweet?${a}`;case S_:return a=pn.stringify({u:P_(t,s),quote:n}),`https://www.facebook.com/sharer.php?${a}`;case C_:return a=pn.stringify({body:PC([n,t],"\n"),subject:i||""}),`mailto:?${a}`;default:return""}}var b_,D_;!function(e){e.TWITTER="twitter",e.FACEBOOK="facebook",e.LINKEDIN="linkedin",e.EMAIL="email",e.MORE="more"}(b_||(b_={}));class T_{constructor(e){this.sharingApiParams=e}get isSharingEnabled(){const{email:e,twitter:t,linkedin:n,facebook:i,copyLink:s}=this.sharingChannels;return e||t||n||i||s}get sharingChannels(){return this.sharingApiParams.sharingChannels}get shareLink(){const e=this.sharingApiParams.sharingLink;return e?/^https?:\/\//m.test(e)?e:"https://"+e:window.location.href}get sharingText(){return this.sharingApiParams.sharingText||""}share(e,t,n){if(this.sharingApiParams.showcase)return;const i=this.getSharingLink(e,t,n);window.open(i,"_blank","location=yes,height=400,width=550,scrollbars=yes,status=yes")}getSharingLink(e,t,n){const i=function(e,t){const n=new URL(e),i={[Rp.FACEBOOK]:b_.FACEBOOK,[Rp.LINKEDIN]:b_.LINKEDIN,[Rp.TWITTER]:b_.TWITTER,[Rp.EMAIL]:b_.EMAIL,[Rp.MORE]:b_.MORE,[Rp.LINK]:null};return i[t]?(n.searchParams.set("sharingVendor",i[t]),n.toString()):e}(this.shareLink,e),s=this.sharingApiParams.sharingText||"";switch(e){case Rp.TWITTER:return N_(v_,i,s,void 0,n);case Rp.LINKEDIN:return N_(A_,i,s,void 0,n);case Rp.FACEBOOK:return N_(S_,i,s,void 0,n);case Rp.EMAIL:return N_(C_,i,s,t);case Rp.MORE:return i;case Rp.LINK:return this.shareLink;default:throw new Error(`Unknown sharing type ${e}`)}}}function __(e){var t;return e.checkoutType===Ce.PAGE&&(null===(t=e.campaignConfig)||void 0===t?void 0:t.campaignPage)?new T_({sharingChannels:Object.assign(Object.assign({},e.campaignConfig.campaignPage.thankYouScreen.sharing.channels),{copyLink:!1}),sharingLink:e.campaignConfig.campaignPage.thankYouScreen.sharing.link,showcase:e.isShowcase,sharingText:e.campaignConfig.campaignPage.thankYouScreen.sharing.text}):new T_({sharingChannels:Object.assign(Object.assign({},e.campaignConfig.thankYouScreen.sharing.channels),{copyLink:!1}),sharingLink:e.campaignConfig.thankYouScreen.sharing.link,showcase:e.isShowcase,sharingText:e.campaignConfig.thankYouScreen.sharing.text})}!function(e){e.PENDING_STATE_CHANGED="pendingStateChanged",e.SUBMIT="submit",e.SKIP="skip"}(D_||(D_={}));class k_ extends zP{constructor(e,t,n){let{name:i}=t;super(),this.flow=e,this.debug=n,this._pending=!1,this.updateListeners=new Set,this.name=i}get data(){return{}}get pending(){return this._pending}set pending(e){this._pending=e,this.emit(D_.PENDING_STATE_CHANGED,this._pending)}dispose(){this.removeUpdateListeners(),this.removeAllListeners()}onUpdate(e){this.updateListeners.add(e)}removeUpdateListener(e){this.updateListeners.delete(e)}beforeLeave(e){return Promise.resolve(!0)}beforeEnter(){return Promise.resolve()}getScreenData(){return{}}leave(){return this.flow.next()}submit(){this.emit(D_.SUBMIT)}skip(){this.emit(D_.SKIP)}syncUpdate(){this.triggerUpdate()}update(){this.scheduleUpdate()}triggerUpdate(){this.updateListeners.forEach((e=>e()))}scheduleUpdate(){void 0!==this.updateTimeout&&window.clearTimeout(this.updateTimeout),this.updateTimeout=window.setTimeout((()=>{this.triggerUpdate()}),k_.UPDATE_DEBOUNCE_MS)}removeUpdateListeners(){this.updateListeners.clear()}}k_.UPDATE_DEBOUNCE_MS=250;class O_ extends k_{constructor(e){let{flow:t,name:n,checkoutService:i,checkoutState:s,debug:a,intl:o,subscriptionPeriodLabelsService:r,currencyService:c,experiments:l}=e;super(t,{name:n},a),this.checkoutService=i,this.checkoutState=s,this.intl=o,this.subscriptionPeriodLabelsService=r,this.currencyService=c,this.experiments=l,this.viewState=(0,di.Ay)(this.getInitialViewState(),(e=>e)),this.on(D_.PENDING_STATE_CHANGED,(e=>{"boolean"==typeof e&&this.setLocked(e)}))}getScreenData(){return this.viewState}leave(e){return this.name!==this.flow.getCurrentScreen().name?Promise.resolve():this.flow.next({getMandatoryAllowance:()=>this.checkoutService.shouldFindMandatoryScreen,direction:null==e?void 0:e.direction,omitBeforeLeave:null==e?void 0:e.omitBeforeLeave})}produceViewState(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.viewState=(0,di.Ay)(this.viewState,e),t||this.syncUpdate()}setLocked(e){e?(this.flow.lock(),this.produceViewState((e=>{e.locked=!0}))):(this.flow.unlock(),this.produceViewState((e=>{e.locked=!1})))}withPending(e){return(0,c.sH)(this,void 0,void 0,(function*(){this.pending=!0;const t=yield e();return this.pending=!1,t}))}}class I_ extends O_{getInitialViewState(){return{locked:!1}}}class x_ extends O_{beforeEnter(){return(0,c.sH)(this,void 0,void 0,(function*(){this.checkoutState.comment.setIsRequired(!1),this.produceViewState((e=>{e.comment=this.commentDataPoint.comment}))}))}beforeLeave(e){return(0,c.sH)(this,void 0,void 0,(function*(){return this.checkoutService.updateSession({canUseAmountDefaults:!0}),!0}))}setComment(e){this.produceViewState((t=>{t.comment=e}))}submitComment(){this.checkoutState.comment.saveComment(this.viewState.comment),this.leave({direction:Xc.BACKWARD})}getInitialViewState(){return{locked:!1,comment:""}}get commentDataPoint(){return this.checkoutState.comment.dataPoint}}var w_=n(211);const R_=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n="";for(let i=0;i<e;i+=1)n+=t[Math.floor(Math.random()*t.length)];return n};class M_ extends O_{constructor(e,t,n){super(n),this.countriesService=e,this.mailingAddressCustomization=t,this.addressSessionToken=R_()}get isOnBehalfOf(){return this.checkoutState.privacy.onBehalfOfDataPoint.isOnBehalfOf}get isCountryFieldDisabled(){return vD(this.checkoutService.checkoutConfiguration)}getStates(e){return this.mailingAddressCustomization.getPredefinedRegions({country:e})}getAriaErrorMessage(e){return this.intl.translate("mailingAddressScreen.addressForm.error.required",{field:e})}beforeEnter(){return(0,c.sH)(this,void 0,void 0,(function*(){this.checkoutState.mailingAddress.setSkipped(!1);const e=this.countriesService.getMailingAddressCountriesList();this.produceViewState((t=>{var n,i,s;t.isRequired=this.mailingAddressDataPoint.isRequired,t.isPaymentScreen=this.isPaymentScreen,t.isCryptoFlow=this.isCryptoFlow,t.line1=this.mailingAddressDataPoint.line1,t.line2=this.mailingAddressDataPoint.line2,t.postal=this.mailingAddressDataPoint.postal,t.city=this.mailingAddressDataPoint.city,t.region=this.mailingAddressDataPoint.region,t.countryCode=this.mailingAddressDataPoint.countryCode,t.countryName=null!==(i=null===(n=e.find((e=>e.countryCode===this.mailingAddressDataPoint.countryCode)))||void 0===n?void 0:n.countryName)&&void 0!==i?i:"",t.countries=e,t.isRegionEnabled=this.isRegionEnabled(this.mailingAddressDataPoint.countryCode),t.isLayoutPostalCodeFirst=this.isLayoutPostalCodeFirst(this.mailingAddressDataPoint.countryCode),t.isAlternativeLabels=this.isAlternativeLabels(this.mailingAddressDataPoint.countryCode),t.formattedAmount=this.intl.formatCurrency(null!==(s=this.donationDataPoint.total)&&void 0!==s?s:0,{currency:this.donationDataPoint.currency,display:"trimzeroes"}),t.frequency=this.donationDataPoint.frequency})),this.processDataPoint.hasMailingAddressError()&&(this.produceViewState((e=>{e.processingState=Kr.ERROR,e.payErrorMessage=this.checkoutService.payErrorMessage,e.additionalPayErrorMessage=this.checkoutService.additionalPayErrorMessage})),this.checkoutState.process.setInProgress())}))}beforeLeave(e){return(0,c.sH)(this,void 0,void 0,(function*(){if(this.pending)return!1;this.pending=!0;const e=this.mailingAddressDataPoint.validate();if(!e.isValid)return this.produceViewState((t=>{t.validation=e,t.shakeKey+=1})),this.pending=!1,!1;if(this.mailingAddressDataPoint.checkShouldValidateOnServer()){if(this.pending=!0,this.setProcessingState(Kr.PENDING),!(yield this.mailingAddressDataPoint.validateAddress()))return this.produceViewState((e=>{e.shakeKey+=1,e.hasServerValidationError=!0})),this.setProcessingState(Kr.ERROR),this.pending=!1,!1;this.setProcessingState(Kr.SUCCESS),this.pending=!1}return this.checkoutService.updateSession(),this.isPaymentScreen?this.pay():(this.pending=!1,!0)}))}skip(){return(0,c.sH)(this,void 0,void 0,(function*(){return this.pending=!0,this.checkoutState.mailingAddress.setSkipped(!0),this.checkoutService.updateSession(),this.isPaymentScreen?(yield this.pay())?this.leave({omitBeforeLeave:!0}):void 0:(this.pending=!1,this.leave({omitBeforeLeave:!0}))}))}search(e,t){return(0,c.sH)(this,void 0,void 0,(function*(){if(!this.isAutocompleteEnabled())return;if(!this.isGetPlacesDataValid(e))return;this.produceViewState((e=>{e.isLoadingPlaces=!0}));const n=yield this.getPlaces(e,t);this.produceViewState((e=>{e.places=this.sanitizePlaces(n),e.isLoadingPlaces=!1}))}))}getPlaceById(e){const t=this.viewState.places.find((t=>t.innerId===e));if(!t)throw new Error(`No place with selected innerId "${e}"`);return t}shouldFindSubplaces(e){return this.mailingAddressDataPoint.shouldFindSubplaces(e)}retrieveSubplaces(e,t){return(0,c.sH)(this,void 0,void 0,(function*(){const n="line1"===t?this.viewState.line1:this.viewState.postal;return this.search(n,e)}))}retrieveDetails(e){return(0,c.sH)(this,void 0,void 0,(function*(){let t;try{t=yield this.mailingAddressDataPoint.getDetails(e,this.addressSessionToken)}finally{this.addressSessionToken=R_()}this.setLine1(t.line1),this.setCity(t.city),this.isPostalCodeAutocompleteEnabled(this.mailingAddressDataPoint.countryCode)&&this.setPostal(t.postal),"string"==typeof t.line2&&this.setLine2(t.line2),t.region&&this.setRegion(t.region),this.produceViewState((e=>{e.line1=this.mailingAddressDataPoint.line1,e.line2=this.mailingAddressDataPoint.line2,e.city=this.mailingAddressDataPoint.city,e.region=this.mailingAddressDataPoint.region,e.postal=this.mailingAddressDataPoint.postal,e.validation=CD.defaultValidationResult}))}))}changeLine1(e){this.setLine1(e),this.produceViewState((e=>{e.validation.fields.line1.isValid||(e.validation.fields.line1=CD.defaultValidationResult.fields.line1),e.line1=this.mailingAddressDataPoint.line1}))}changeLine2(e){this.setLine2(e),this.produceViewState((e=>{e.validation.fields.line2.isValid||(e.validation.fields.line2=CD.defaultValidationResult.fields.line2),e.line2=this.mailingAddressDataPoint.line2}))}changeCity(e){this.setCity(e),this.produceViewState((e=>{e.validation.fields.city.isValid||(e.validation.fields.city=CD.defaultValidationResult.fields.city),e.city=this.mailingAddressDataPoint.city}))}changeRegion(e){this.setRegion(e),this.produceViewState((e=>{e.validation.fields.region.isValid||(e.validation.fields.region=CD.defaultValidationResult.fields.region),e.region=this.mailingAddressDataPoint.region}))}changePostalCode(e){this.setPostal(e),this.produceViewState((e=>{e.validation.fields.postal.isValid||(e.validation.fields.postal=CD.defaultValidationResult.fields.postal),e.postal=this.mailingAddressDataPoint.postal}))}changeSelectedCountry(e){const t=this.isLayoutPostalCodeFirst(this.mailingAddressDataPoint.countryCode),n=this.isRegionEnabled(this.mailingAddressDataPoint.countryCode),i=this.viewState.countries.find((t=>t.countryCode===e));i&&(this.setCountryCode(e),this.setRegion(this.getPredefinedRegion(e,t,n)),this.produceViewState((t=>{t.countryCode=this.mailingAddressDataPoint.countryCode,t.countryName=i.countryName,t.region=this.mailingAddressDataPoint.region,t.places.splice(0,t.places.length),t.isRegionEnabled=this.isRegionEnabled(this.mailingAddressDataPoint.countryCode),t.isLayoutPostalCodeFirst=this.isLayoutPostalCodeFirst(this.mailingAddressDataPoint.countryCode),t.isAlternativeLabels=this.isAlternativeLabels(e)})))}getPredefinedRegion(e,t,n){var i,s;const a=this.getStates(e);if(a){if(Array.isArray(a))return null===(i=a[0])||void 0===i?void 0:i.code;const e=a[Object.keys(a)[0]],t=null===(s=null==e?void 0:e[0])||void 0===s?void 0:s.code;if(t)return t}const o=this.isLayoutPostalCodeFirst(this.mailingAddressDataPoint.countryCode),r=this.isRegionEnabled(this.mailingAddressDataPoint.countryCode);return t!==o||n!==r?"":this.mailingAddressDataPoint.region}getInitialViewState(){return{locked:!1,isRequired:!1,isPaymentScreen:!0,isCryptoFlow:!1,processingState:Kr.IDLE,hasServerValidationError:!1,line1:"",line2:"",city:"",region:"",postal:"",countryCode:D.tg.UNITED_STATES,countryName:"",isLayoutPostalCodeFirst:!1,isRegionEnabled:!1,isAlternativeLabels:!1,countries:[],places:[],isLoadingPlaces:!1,shakeKey:0,validation:CD.defaultValidationResult,formattedAmount:"",frequency:W.MONTHLY}}get processDataPoint(){return this.checkoutState.process.dataPoint}get mailingAddressDataPoint(){return this.checkoutState.mailingAddress.dataPoint}get isPaymentScreen(){return this.name===this.checkoutService.getPaymentScreen(this.name,this.flow.getHistoricalScreens())}get isCryptoFlow(){return this.checkoutService.type===Ft.CRYPTO}get donationDataPoint(){return this.checkoutState.donation.dataPoint}isLayoutPostalCodeFirst(e){return this.mailingAddressCustomization.isLayoutPostalCodeFirst({country:e})}isRegionEnabled(e){return this.mailingAddressCustomization.isRegionEnabled({country:e})}isPostalCodeAutocompleteEnabled(e){return this.mailingAddressCustomization.isPostalCodeAutocompleteEnabled({country:e})}isAlternativeLabels(e){return this.mailingAddressCustomization.isAlternativeLabels({country:e})}setProcessingState(e){this.produceViewState((t=>{t.processingState=e}))}pay(){return(0,c.sH)(this,void 0,void 0,(function*(){this.pending=!0,this.setProcessingState(Kr.PENDING);const e=yield this.checkoutService.pay({screen:this.name,predictedNextScreen:this.flow.predictNextScreen()});return ue.isSuccess(e)?(this.isCryptoFlow||(this.setProcessingState(Kr.SUCCESS),yield fo(this.checkoutService.checkoutConfiguration.successPaymentDelayBeforeLeave)),this.pending=!1,!0):e.failureResult.shouldLeave?(this.pending=!1,!0):(this.produceViewState((e=>{e.payErrorMessage=this.checkoutService.payErrorMessage,e.additionalPayErrorMessage=this.checkoutService.additionalPayErrorMessage})),this.setProcessingState(Kr.ERROR),this.pending=!1,!1)}))}getPlaces(e,t){return(0,c.sH)(this,void 0,void 0,(function*(){const n={input:this.prepareGetPlacesText(e),restrictCountries:[this.viewState.countryCode],sessionToken:this.addressSessionToken};return t?this.mailingAddressDataPoint.getSubplaces(Object.assign({place:t},n)):this.mailingAddressDataPoint.getPlaces(Object.assign({},n))}))}sanitizePlaces(e){const t=[];for(const n of e)t.push(Object.assign(Object.assign({},n),{innerId:(0,w_.Ak)()}));return t}isAutocompleteEnabled(){return this.mailingAddressCustomization.isAutocompleteEnabled({company:this.checkoutService.checkoutConfiguration.company.key})}isGetPlacesDataValid(e){return Boolean(this.prepareGetPlacesText(e))&&Boolean(this.addressSessionToken)}prepareGetPlacesText(e){return e.trim()}setLine1(e){this.checkoutState.mailingAddress.setLine1(e)}setLine2(e){this.checkoutState.mailingAddress.setLine2(e)}setCity(e){this.checkoutState.mailingAddress.setCity(e)}setCountryCode(e){this.checkoutState.mailingAddress.setCountryCode(e)}setRegion(e){this.checkoutState.mailingAddress.setRegion(e)}setPostal(e){this.checkoutState.mailingAddress.setPostal(e)}}class L_ extends O_{beforeEnter(){return(0,c.sH)(this,void 0,void 0,(function*(){const e={};for(const[t,n]of Object.entries(this.forwardBlueQuestions))e[t]={key:n.key,type:n.type,required:n.required,code:n.code,question:n.question,answer:n.answer,options:[...n.options],id:n.id,createdAt:n.createdAt};this.produceViewState((t=>{t.forwardBlueQuestions=e}))}))}beforeLeave(e){return(0,c.sH)(this,void 0,void 0,(function*(){const e=this.validateForwardBlueQuestions();return e.isValid?(this.checkoutService.updateSession(),!0):(this.produceViewState((t=>{for(const[n,{isValid:i}]of Object.entries(e.fields))t.questionErrors[n]=!i;t.shakeKey+=1})),!1)}))}answerForwardBlueQuestion(e,t,n){this.checkoutState.questions.setAnswer(e,t);const i=this.questionsDataPoint.getAnswer(e),s=this.forwardBlueQuestions[n];this.produceViewState((t=>{t.questionErrors[e]=!1,t.forwardBlueQuestions[n]=s?Object.assign(Object.assign({},s),{answer:i}):void 0}))}validateForwardBlueQuestions(){return this.checkoutState.questions.dataPoint.validateForwardBlueQuestions()}getInitialViewState(){return{locked:!1,forwardBlueQuestions:{},questionErrors:{},shakeKey:0}}get forwardBlueQuestions(){return this.questionsDataPoint.forwardBlueQuestions}get questionsDataPoint(){return this.checkoutState.questions.dataPoint}}const U_=[D._h.APPLE_PAY,D._h.CARD,D._h.PAYPAL,D._h.GOOGLE_PAY,D._h.VENMO,D._h.US_BANK_ACCOUNT,D._h.UK_BACS,D._h.AU_BECS,D._h.ACSS,D._h.SEPA,D._h.IDEAL];function F_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=0,i=0;for(const s of e)if(n++,s.visible&&i++,i===t)return n;return-1}const j_=[{country:D.tg.NETHERLANDS,paymentMethod:D._h.IDEAL,targetShownPositionIndex:1},{country:D.tg.UNITED_KINGDOM,paymentMethod:D._h.UK_BACS,targetShownPositionIndex:1},{country:D.tg.GERMANY,paymentMethod:D._h.SEPA,targetShownPositionIndex:2}];class B_{constructor(e){this.paymentMethodSorterParams=e}sort(e){const t=Object.entries(e).map((e=>{let[t,n]=e;return{paymentMethod:t,available:n.available,visible:n.visible}})),n=this.getDefaultSortedPaymentMethods(),i=t.sort(((e,t)=>(n.includes(e.paymentMethod)?n.indexOf(e.paymentMethod):1/0)-(n.includes(t.paymentMethod)?n.indexOf(t.paymentMethod):1/0)));return this.processSpecialCases(i),i}getDefaultSortedPaymentMethods(){return U_}processSpecialCases(e){var t;for(const{country:n,paymentMethod:i,targetShownPositionIndex:s}of j_){if((null===(t=this.paymentMethodSorterParams)||void 0===t?void 0:t.specificCompanyCountry)!==n)continue;const a=F_(e,s),o=e.findIndex((e=>e.paymentMethod===i)),r=e[o];e.splice(o,1),e.splice(a,0,r)}}}class G_{constructor(e){this.checkoutConfiguration=e,this._paymentMethodSorter=null}get paymentMethodSorter(){return this._paymentMethodSorter||(this._paymentMethodSorter=new B_({specificCompanyCountry:this.checkoutConfiguration.company.country})),this._paymentMethodSorter}getPaymentButtons(e){const t={available:[],visible:[]};return this.paymentMethodSorter.sort(e).forEach((e=>{let{paymentMethod:n,available:i,visible:s}=e;n===D._h.APPLE_PAY&&i&&(t.available.push(Hu.APPLE_PAY),s&&t.visible.push(Hu.APPLE_PAY)),n!==D._h.PAYPAL||this.checkoutConfiguration.campaign.config.phoneRequired||i&&(t.available.push(Hu.PAYPAL),s&&t.visible.push(Hu.PAYPAL)),n===D._h.GOOGLE_PAY&&i&&(t.available.push(Hu.GOOGLE_PAY),s&&t.visible.push(Hu.GOOGLE_PAY))})),t}}class q_ extends O_{constructor(e){super(e),this._fastTrackPaymentOptionsViewService=null,this.paymentService=e.paymentService}beforeEnter(){return(0,c.sH)(this,void 0,void 0,(function*(){var e;this.tryStartFastTrackExperiment(),this.tryToExposeFastTrackExperiment(),this.isFastTrackExperimentActive&&(this.resetFastTrackOptions(),yield null===(e=this.paymentService)||void 0===e?void 0:e.ensurePaymentMethodsInitialized(),this.syncPaymentButtons()),this.produceViewState((e=>{var t;e.isPaymentScreen=this.isPaymentScreen,e.firstName=this.donorNameDataPoint.firstName,e.lastName=this.donorNameDataPoint.lastName,e.email=this.donorEmailDataPoint.email,e.emailConsent.isEnabled=this.donorEmailDataPoint.emailConsent.isEnabled,e.showPhone=this.phoneNumberDataPoint.isEnabled,e.phoneRequired=this.phoneNumberDataPoint.isRequired,e.phone=this.phoneNumberDataPoint.phone,e.phoneLegalText=this.phoneNumberDataPoint.phoneLegalText,e.showPhoneLegalText=this.phoneNumberDataPoint.isLegalTextEnabled,e.userCountryCode=this.phoneNumberDataPoint.countryCode,e.showAnonymous=this.donateAnonymousDataPoint.isEnabled,e.anonymousChecked=this.donateAnonymousDataPoint.anonymousChecked,e.processingState=Kr.IDLE,e.generalConsent={isAccepted:this.communicationConsentDataPoint.generalConsent.isAccepted,isEnabled:this.communicationConsentDataPoint.isGeneralConsentEnabled},e.onBehalfOf.companyName=this.onBehalfOfDataPoint.companyName,e.onBehalfOf.isEnabled=this.onBehalfOfDataPoint.isEnabled,e.onBehalfOf.isActive=this.onBehalfOfDataPoint.isActive,e.termsAndConditions.text=this.termsAndConditionsDataPoint.text,e.termsAndConditions.isEnabled=this.termsAndConditionsDataPoint.isEnabled,e.termsAndConditions.isAccepted=this.termsAndConditionsDataPoint.isAccepted;const{showPhone:n}=e,i=this.getAllOptionsEnabled({showPhone:n,showAnonymous:e.showAnonymous,showMailingListSubscription:e.mailingListSubscription.show,showTermsAndConditions:e.termsAndConditions.isEnabled,customerTitleEnabled:this.customerTitleDataPoint.isEnabled,onBehalfOfEnabled:e.onBehalfOf.isEnabled});e.isApplePayAlertVisible=this.isApplePayAlertVisible,e.allOptionsEnabled=i,e.customerTitle.title=this.customerTitleDataPoint.title,e.customerTitle.list=this.customerTitleDataPoint.titleList,e.customerTitle.isEnabled=this.customerTitleDataPoint.isEnabled,e.customerTitle.isRequired=this.customerTitleDataPoint.isRequired,e.donation.formattedAmount=this.intl.formatCurrency(null!==(t=this.donationDataPoint.total)&&void 0!==t?t:0,{currency:this.donationDataPoint.currency,display:"trimzeroes"}),e.donation.frequency=this.donationDataPoint.frequency,e.autoFocus=this.getAutoFocusConfig(e.customerTitle.isEnabled),e.isPhoneCountryCodeDisabled=this.isCountryCodeDisabled()}))}))}beforeLeave(e){return(0,c.sH)(this,void 0,void 0,(function*(){var e;if(this.pending)return!1;this.pending=!0;let t=!1;if(null===(e=this.paymentOptionsDataPoint)||void 0===e?void 0:e.isFastTrackFlow)return this.setProcessingState(Kr.IDLE),this.pending=!1,!0;if(this.produceViewState((e=>{e.validation.customerTitle=this.customerTitleDataPoint.validate(),e.validation.donorName=this.donorNameDataPoint.validate(),e.validation.donorEmail=this.donorEmailDataPoint.validate(),e.validation.phone=this.phoneNumberDataPoint.validate(),e.validation.isAccepted=this.termsAndConditionsDataPoint.validate(),e.validation.onBehalfOf=this.onBehalfOfDataPoint.validate(),t=this.checkHasError(e),t&&(e.shakeKey+=1)})),t)return this.pending=!1,!1;this.setProcessingState(Kr.PENDING);const n=yield this.checkoutService.updateSession();if(ue.isFailure(n)&&n.failureResult.customerEmailError)return yield this.startServerErrorFlow(),!1;if(!this.isPaymentScreen)return this.setProcessingState(Kr.IDLE),this.pending=!1,!0;const i=yield this.checkoutService.pay({screen:this.name,predictedNextScreen:this.flow.predictNextScreen()});return ue.isSuccess(i)?(this.isCryptoFlow||(this.setProcessingState(Kr.SUCCESS),yield fo(this.checkoutService.checkoutConfiguration.successPaymentDelayBeforeLeave)),this.pending=!1,!0):i.failureResult.shouldLeave?(this.pending=!1,!0):(this.produceViewState((e=>{e.payErrorMessage=this.checkoutService.payErrorMessage||this.intl.translate("common.errorOccurredText"),e.additionalPayErrorMessage=this.checkoutService.additionalPayErrorMessage||""})),this.setProcessingState(Kr.ERROR),this.pending=!1,!1)}))}changeCompanyName(e){this.checkoutState.privacy.setOnBehalfOfCompanyName(e),this.produceViewState((e=>{e.validation.onBehalfOf.isValid||(e.validation.onBehalfOf=PD.defaultValidationResult),e.onBehalfOf.companyName=this.onBehalfOfDataPoint.companyName}))}changeCustomerTitle(e){this.checkoutState.privacy.setDonorTitle(e),this.produceViewState((e=>{e.validation.customerTitle.isValid||(e.validation.customerTitle=uD.defaultValidationResult),e.customerTitle.title=this.customerTitleDataPoint.title}))}changeFirstName(e){this.checkoutState.privacy.setDonorFirstName(e),this.produceViewState((e=>{e.validation.donorName.fields.firstName.isValid||(e.validation.donorName.fields.firstName=fD.defaultValidationResult.fields.firstName),e.firstName=this.donorNameDataPoint.firstName}))}changeLastName(e){this.checkoutState.privacy.setDonorLastName(e),this.produceViewState((e=>{e.validation.donorName.fields.lastName.isValid||(e.validation.donorName.fields.lastName=fD.defaultValidationResult.fields.lastName),e.lastName=this.donorNameDataPoint.lastName}))}changeEmail(e){this.checkoutState.privacy.setDonorEmail(e),this.produceViewState((e=>{e.validation.donorEmail.fields.email.isValid||(e.validation.donorEmail.fields.email=hD.defaultValidationResult.fields.email),e.email=this.donorEmailDataPoint.email}))}changePhone(e){this.checkoutState.privacy.setPhoneNumber(e),this.produceViewState((e=>{e.validation.phone.isValid||(e.validation.phone=bD.defaultValidationResult),e.phone=this.phoneNumberDataPoint.phone}))}changePlainPhone(e){this.checkoutState.privacy.setPhoneCleanNumber(e)}changeCountryCode(e){this.checkoutState.privacy.setPhoneCountryCode(e),this.produceViewState((e=>{e.userCountryCode=this.phoneNumberDataPoint.countryCode}))}toggleOnBehalfOf(){this.checkoutState.privacy.setOnBehalfOfActive(!this.onBehalfOfDataPoint.isActive),this.produceViewState((e=>{e.onBehalfOf.isActive=this.onBehalfOfDataPoint.isActive,e.isPaymentScreen=this.isPaymentScreen}))}toggleTermsAndConditionsAccepted(){this.checkoutState.privacy.setTermsAndConditionsAccepted(!this.termsAndConditionsDataPoint.isAccepted),this.produceViewState((e=>{var t;(null===(t=e.validation.isAccepted)||void 0===t?void 0:t.isValid)||(e.validation.isAccepted=LD.defaultValidationResult),e.termsAndConditions.isAccepted=this.termsAndConditionsDataPoint.isAccepted}))}toggleAnonymousChecked(){this.checkoutState.privacy.setDonateAnonymousChecked(!this.donateAnonymousDataPoint.anonymousChecked),this.produceViewState((e=>{e.anonymousChecked=this.donateAnonymousDataPoint.anonymousChecked}))}toggleGeneralConsentChecked(e){this.checkoutState.communicationConsent.setGeneralConsentState(e),this.produceViewState((e=>{e.generalConsent.isAccepted=this.communicationConsentDataPoint.generalConsent.isAccepted}))}setGeneralConsentShown(){this.checkoutState.communicationConsent.setGeneralConsentShown()}clearEmailServerError(){this.produceViewState((e=>{e.serverErrors.email=!1,e.processingState=Kr.IDLE}))}chooseFastTrackPaymentOptionOrProceedToNextScreen(e){this.isFastTrackExperimentActive&&this.checkoutState instanceof cN&&(this.checkoutState.paymentOptions.setIsFastTrackFlow(!0),this.isFastTrackExperimentTestGroup1&&e&&(this.checkoutState.paymentOptions.setPreSelectedPaymentOption(e),this.leave()),this.isFastTrackExperimentTestGroup2&&this.leave())}syncPaymentButtons(){this.syncButtonsAvailability()}isFastTrackExperimentEnabled(){return!!this.paymentOptionsDataPoint&&(this.fastTrackCampaignPagesExperiment.isEnabled({isCustomerTitleEnabled:this.checkoutState.privacy.customerTitleDataPoint.isEnabled,allowedPaymentMethods:this.paymentOptionsDataPoint.allowedPaymentMethods,isPhoneRequired:this.phoneNumberDataPoint.isRequired})?this.fastTrackCampaignPagesExperiment.isTestGroup:!!this.fastTrackCheckoutExperiment.isEnabled({isCustomerTitleEnabled:this.checkoutState.privacy.customerTitleDataPoint.isEnabled,allowedPaymentMethods:this.paymentOptionsDataPoint.allowedPaymentMethods,isMobile:this.isMobile,isTributeFilled:this.tributeDataPoint.isFilled,isOnBehalfOfEnabled:this.onBehalfOfDataPoint.isEnabled,isPhoneRequired:this.phoneNumberDataPoint.isRequired})&&this.fastTrackCheckoutExperiment.isTestGroup)}getInitialViewState(){return{shakeKey:0,validation:{customerTitle:uD.defaultValidationResult,donorName:fD.defaultValidationResult,donorEmail:hD.defaultValidationResult,onBehalfOf:PD.defaultValidationResult,phone:bD.defaultValidationResult,isAccepted:LD.defaultValidationResult},serverErrors:{},showPhone:!1,phoneRequired:!1,showPhoneLegalText:!1,phoneLegalText:"",showAnonymous:!1,anonymousChecked:!1,mailingListSubscription:{checked:!1,show:!1,text:""},textIsVisible:!1,isApplePayAlertVisible:!1,allOptionsEnabled:!1,firstName:"",lastName:"",email:"",emailConsent:{isEnabled:!1},phone:null,isPaymentScreen:!1,payErrorMessage:"",additionalPayErrorMessage:"",userCountryCode:D.tg.UNITED_STATES,processingState:Kr.IDLE,termsAndConditions:{isAccepted:!1,isEnabled:!1,text:""},onBehalfOf:{isEnabled:!1,isActive:!1,companyName:""},customerTitle:{title:Nb.NONE,list:[],isEnabled:!1,isRequired:!1},locked:!1,donation:{formattedAmount:"",frequency:W.MONTHLY},autoFocus:this.createDefaultAutoFocusConfig(),generalConsent:{isAccepted:!1,isEnabled:!1},availableFastTrackPaymentOptions:[],fastTrackButtonOptions:Object.fromEntries(Object.values([Hu.APPLE_PAY,Hu.GOOGLE_PAY,Hu.PAYPAL]).map((e=>[e,{visible:!1}])))}}get isPaymentScreen(){return this.name===this.checkoutService.getPaymentScreen(this.name,this.flow.getHistoricalScreens())}get isFiatFlow(){return this.checkoutService.type===Ft.MONEY}get isCryptoFlow(){return this.checkoutService.type===Ft.CRYPTO}get donorNameDataPoint(){return this.checkoutState.privacy.donorNameDataPoint}get donorEmailDataPoint(){return this.checkoutState.privacy.donorEmailDataPoint}get termsAndConditionsDataPoint(){return this.checkoutState.privacy.termsAndConditionsDataPoint}get phoneNumberDataPoint(){return this.checkoutState.privacy.phoneNumberDataPoint}get donateAnonymousDataPoint(){return this.checkoutState.privacy.donateAnonymousDataPoint}get onBehalfOfDataPoint(){return this.checkoutState.privacy.onBehalfOfDataPoint}get customerTitleDataPoint(){return this.checkoutState.privacy.customerTitleDataPoint}get donationDataPoint(){return this.checkoutState.donation.dataPoint}get paymentOptionsDataPoint(){return this.checkoutState instanceof cN?this.checkoutState.paymentOptions.paymentOptionsDataPoint:null}get communicationConsentDataPoint(){return this.checkoutState.communicationConsent.dataPoint}get tributeDataPoint(){return this.checkoutState.tribute.dataPoint}get isApplePay(){var e;return(null===(e=this.paymentOptionsDataPoint)||void 0===e?void 0:e.clientPaymentMethod)===D._h.APPLE_PAY}get isMobile(){return this.checkoutService.checkoutConfiguration.infrastructureParams.isMobile}get isApplePayAlertVisible(){return this.isMobile&&this.isFiatFlow&&this.isApplePay}get fastTrackPaymentOptionsViewService(){return this._fastTrackPaymentOptionsViewService||(this._fastTrackPaymentOptionsViewService=new G_(this.checkoutService.checkoutConfiguration)),this._fastTrackPaymentOptionsViewService}get isFastTrackExperimentActive(){return this.fastTrackCampaignPagesExperiment.isTestGroup||this.fastTrackCheckoutExperiment.isTestGroup}get isFastTrackExperimentTestGroup1(){return this.fastTrackCampaignPagesExperiment.isTestGroup1||this.fastTrackCheckoutExperiment.isTestGroup1}get isFastTrackExperimentTestGroup2(){return this.fastTrackCampaignPagesExperiment.isTestGroup2||this.fastTrackCheckoutExperiment.isTestGroup2}get fastTrackCampaignPagesExperiment(){return this.experiments.get(be.FAST_TRACK_CAMPAIGN_PAGES_EXPERIMENT)}get fastTrackCheckoutExperiment(){return this.experiments.get(be.FAST_TRACK_CHECKOUT_EXPERIMENT)}getAllOptionsEnabled(e){let{showPhone:t,showAnonymous:n,showMailingListSubscription:i,showTermsAndConditions:s,customerTitleEnabled:a,onBehalfOfEnabled:o}=e;return!!(a&&t&&o&&n&&i&&s)}checkHasError(e){return Object.keys(e.validation).some((t=>{const n=e.validation[t];return!!n&&!n.isValid}))}startServerErrorFlow(){return(0,c.sH)(this,void 0,void 0,(function*(){this.produceViewState((e=>{e.serverErrors.email=!0,e.shakeKey+=1,e.processingState=Kr.ERROR})),this.pending=!1}))}setProcessingState(e){return this.produceViewState((t=>{t.processingState=e})),this}getAutoFocusConfig(e){const t=this.createDefaultAutoFocusConfig();return e&&(t.firstName=!1,t.customerTitle=!0),t}createDefaultAutoFocusConfig(){return{customerTitle:!1,firstName:!0}}syncButtonsAvailability(){if(!this.paymentOptionsDataPoint)return;const e=this.fastTrackPaymentOptionsViewService.getPaymentButtons(this.paymentOptionsDataPoint.allowedPaymentMethods);this.produceViewState((t=>{const n=e.available;vT()(t.availableFastTrackPaymentOptions,n)||(t.availableFastTrackPaymentOptions=n);for(const[n,i]of Object.entries(t.fastTrackButtonOptions))i.visible=e.visible.some((e=>e===n))}))}resetFastTrackOptions(){this.checkoutState instanceof cN&&(this.checkoutState.paymentOptions.setPreSelectedPaymentOption(null),this.checkoutState.paymentOptions.setIsFastTrackFlow(!1))}tryStartFastTrackExperiment(){this.paymentOptionsDataPoint&&(this.fastTrackCampaignPagesExperiment.tryStart({isCustomerTitleEnabled:this.checkoutState.privacy.customerTitleDataPoint.isEnabled,allowedPaymentMethods:this.paymentOptionsDataPoint.allowedPaymentMethods,isPhoneRequired:this.phoneNumberDataPoint.isRequired}),this.fastTrackCheckoutExperiment.tryStart({isCustomerTitleEnabled:this.checkoutState.privacy.customerTitleDataPoint.isEnabled,allowedPaymentMethods:this.paymentOptionsDataPoint.allowedPaymentMethods,isMobile:this.isMobile,isPhoneRequired:this.phoneNumberDataPoint.isRequired,isTributeFilled:this.tributeDataPoint.isFilled,isOnBehalfOfEnabled:this.onBehalfOfDataPoint.isEnabled}))}tryToExposeFastTrackExperiment(){this.fastTrackCampaignPagesExperiment.tryToExpose(),this.fastTrackCheckoutExperiment.tryToExpose()}isCountryCodeDisabled(){return vD(this.checkoutService.checkoutConfiguration)}}class H_ extends O_{get showBackButton(){const e=1!==this.viewState.page||this.flow.canGoBack,t=this.checkoutService.checkoutConfiguration.infrastructureParams.isMobile;return{header:!t&&e,footer:t&&e}}beforeEnter(){return(0,c.sH)(this,void 0,void 0,(function*(){this.produceViewState((e=>{e.questions=[...this.questionsDataPoint.questions.entries()].map((e=>{let[t,n]=e;return{key:t,type:n.type,required:n.required,code:n.code,question:n.question,answer:n.answer,page:null,options:[...n.options]}})),e.isMeasuring=!0}))}))}beforeLeave(e){return(0,c.sH)(this,void 0,void 0,(function*(){const e=this.viewState.page,t=this.viewState.questions.filter((t=>{let{page:n}=t;return n===e})),n=this.questionsDataPoint.validateQuestionsByKeys(t.map((e=>{let{key:t}=e;return t})));return n.isValid?this.viewState.questions.some((t=>{let{page:n}=t;return null===n||n>e}))?(this.produceViewState((e=>{e.page+=1})),yield this.checkoutService.updateSession(),!1):(this.checkoutService.updateSession(),!0):(this.produceViewState((e=>{for(const[t,{isValid:i}]of Object.entries(n.fields))e.questionErrors[t]=!i;e.shakeKey+=1})),!1)}))}back(){return(0,c.sH)(this,void 0,void 0,(function*(){const e=this.viewState.page;if(1===e&&this.flow.canGoBack)return this.flow.prev();this.produceViewState((t=>{for(const n of t.questions)n.page===e&&(t.questionErrors[n.key]=!1);t.page-=1}))}))}answerQuestion(e,t){this.checkoutState.questions.setAnswer(e,t),this.produceViewState((t=>{const n=t.questions.find((t=>t.key===e));if(!n)throw new Error(`No question with such key: "${e}"`);t.questionErrors[e]=!1;const i=this.questionsDataPoint.getAnswer(e);Array.isArray(i)?Array.isArray(n.answer)?n.answer.splice(0,n.answer.length,...i):n.answer=[...i]:n.answer=i}))}navigateInShowcaseToPage(e){if(!this.viewState.isShowcase)throw new Error("Can be used only in showcase");this.produceViewState((t=>{t.page=e}))}completeMeasurement(e){if(e.size!==this.viewState.questions.length)throw new Error('"questionIndexesToPages" map should have the same length as questions array');this.produceViewState((t=>{for(const[n,i]of e)void 0!==t.questions[n]&&(t.questions[n].page=i,this.viewState.isShowcase&&(t.page=i));const n=this.checkoutService.checkoutConfiguration.showcase,i=n&&n.currentQuestionsPage;i&&(t.page=i),t.isMeasuring=!1}));const t=this.getPagesOfQuestionsScreen(e);return this.checkoutService.checkoutUIState.pagesOfQuestionsScreen=t,t}getInitialViewState(){return{locked:!1,page:1,questions:[],hasBackButton:!0,isMeasuring:!1,questionErrors:{},shakeKey:0,isShowcase:this.checkoutService.checkoutConfiguration.infrastructureParams.showcase}}get questionsDataPoint(){return this.checkoutState.questions.dataPoint}getPagesOfQuestionsScreen(e){const t=[...e.values()];return t[t.length-1]}}class V_ extends O_{beforeEnter(){return(0,c.sH)(this,void 0,void 0,(function*(){this.resetToDefaultState(),this.checkoutService.updateSession({canUseAmountDefaults:!0}),this.checkoutService.abandonSession();const e={used:$n.NO,shown:!0};this.checkoutState.remindMeLater.setState(e)}))}resetToDefaultState(){const e={used:$n.NOT_GIVEN,shown:!0};this.checkoutState.remindMeLater.setState(e)}updateEmail(e){this.checkoutState.privacy.setDonorEmail(e),this.produceViewState((t=>{t.email.isValid||(t.email.isValid=hD.defaultValidationResult.fields.email.isValid),t.email.value=e}))}updateIsTermsAndConditionsAccepted(e){this.checkoutState.privacy.setTermsAndConditionsAccepted(e),this.produceViewState((t=>{t.termsAndConditions.isValid||(t.termsAndConditions.isValid=LD.defaultValidationResult.fields.isAccepted.isValid),t.termsAndConditions.isAccepted=e}))}save(){return(0,c.sH)(this,void 0,void 0,(function*(){if(this.pending)return!1;this.pending=!0,this.setProcessingState(Kr.PENDING);const e=this.donorEmailDataPoint.validate().isValid,t=this.termsAndConditionsDataPoint.validate().isValid,n=this.remindMeLaterDataPoint.validate().isValid,i=e&&t&&n;if(this.produceViewState((n=>{n.email.isValid=e,n.termsAndConditions.isValid=t,i||(n.shakeKey+=1)})),!i)return this.setProcessingState(Kr.IDLE),this.pending=!1,!1;const s={used:$n.YES,shown:!0};this.checkoutState.remindMeLater.setState(s);const a=yield this.checkoutService.updateSession({canUseAmountDefaults:!0});if(ue.isFailure(a)&&a.failureResult.customerEmailError)return this.showEmailServerValidationError(),this.pending=!1,!1;const o=yield this.checkoutService.abandonSession();return ue.isFailure(o)&&o.failureResult.customerEmailError?(this.showEmailServerValidationError(),this.pending=!1,!1):(this.setProcessingState(Kr.SUCCESS),this.pending=!1,!0)}))}saveOnClose(){this.donorEmailDataPoint.validate().isValid||this.updateEmail(""),this.termsAndConditionsDataPoint.validate().isValid||this.updateIsTermsAndConditionsAccepted(!1),this.checkoutService.updateSession({canUseAmountDefaults:!0}),this.checkoutService.abandonSession()}clearEmailServerError(){this.produceViewState((e=>{e.serverErrors.email=!1,e.processingState=Kr.IDLE}))}getInitialViewState(){return{locked:!1,email:{value:this.donorEmailDataPoint.email,isValid:!0},termsAndConditions:{isAccepted:this.termsAndConditionsDataPoint.isAccepted,isValid:!0,text:this.termsAndConditionsDataPoint.text},isTermsAndConditionsEnabled:this.termsAndConditionsDataPoint.isEnabled,processingState:Kr.IDLE,serverErrors:{},shakeKey:0}}get remindMeLaterDataPoint(){return this.checkoutState.remindMeLater.dataPoint}get termsAndConditionsDataPoint(){return this.checkoutState.privacy.termsAndConditionsDataPoint}get donorEmailDataPoint(){return this.checkoutState.privacy.donorEmailDataPoint}setProcessingState(e){this.produceViewState((t=>{t.processingState=e}))}showEmailServerValidationError(){this.produceViewState((e=>{e.processingState=Kr.ERROR,e.serverErrors.email=!0,e.shakeKey+=1}))}}const K_=[/memor/i,/ذكرى/,/纪念/,/紀念/,/mind/i,/nagedacht/i,/muist/i,/mémoir/i,/gedenk/i,/megemlékez/i,/memor/i,/追悼/,/추모/,/minn/i,/pami/i,/memór/i,/памят/i,/memori/i,/minn/i];class Y_{constructor(e){this.checkoutConfiguration=e.checkoutConfiguration,this.isTributeFilled=e.isTributeFilled,this.selectedDesignation=e.selectedDesignation}get trackingData(){return{type:this.getCampaignEmotionalType(),reasons:{tributeIsFilled:this.isTributeFilled,designationIsSad:this.isDesignationSad(this.selectedDesignation),emotionalType:this.checkoutConfiguration.emotionalType}}}getCampaignEmotionalType(){return this.checkoutConfiguration.checkoutType===Ce.MODAL&&!this.checkoutConfiguration.getAskPageConfig().show||!this.checkoutConfiguration.emotionalType?Jn.NEUTRAL:this.isHappyCampaign()?Jn.HAPPY:this.isSadCampaign()?Jn.SAD:Jn.NEUTRAL}isHappyCampaign(){const e=!this.selectedDesignation||!this.isDesignationSad(this.selectedDesignation),t=this.checkoutConfiguration.emotionalType===Zn.POSITIVE;return e&&t&&!this.isTributeFilled}isSadCampaign(){const e=!!this.selectedDesignation&&this.isDesignationSad(this.selectedDesignation),t=this.checkoutConfiguration.emotionalType===Zn.NEGATIVE;return e||t||this.isTributeFilled}isDesignationSad(e){return!!e&&K_.some((t=>t.test(e)))}}class z_ extends Yt{constructor(){super(...arguments),this._allowedFrequencies=[W.ONCE,W.MONTHLY]}get isTestGroup(){return this.isActive&&this.isVariant(vt.TEST)}get allowedFrequencies(){return this._allowedFrequencies}tryStart(e){this.isActive||this.canBeStarted(e)&&super.start()}canBeStarted(e){return!(e.currencies.length>1)&&(!!e.isEnabledCampaignAi&&(!e.isEnabledCampaignHints&&!!e.enabledFrequencies.every((e=>this.allowedFrequencies.includes(e)))))}}class W_ extends Yt{constructor(){super(...arguments),this._allowedFrequencies=[W.ONCE,W.MONTHLY]}get isTestGroup(){return this.isActive&&this.isVariant(At.TEST)}get isControlGroup(){return this.isActive&&this.isVariant(At.CONTROL)}get allowedFrequencies(){return this._allowedFrequencies}isVariantTestGroup(e){return this.isActive&&this.isVariant(e)}tryStart(e){this.isActive||this.canBeStarted(e)&&super.start()}canBeStarted(e){return!(e.currencies.length>1)&&(!!e.isEnabledCampaignAi&&(!e.isEnabledCampaignHints&&!!e.enabledFrequencies.every((e=>this.allowedFrequencies.includes(e)))))}}var $_,X_;!function(e){e[e.STRATEGY_10=10]="STRATEGY_10",e[e.STRATEGY_15=15]="STRATEGY_15",e[e.STRATEGY_20=20]="STRATEGY_20",e[e.STRATEGY_25=25]="STRATEGY_25"}($_||($_={}));class Q_ extends Yt{constructor(e){super(e),this._strategy=this.getRandomStrategy()}get strategy(){return this._strategy}tryStart(){this.isActive||this.start()}isEnabled(){return this.isTestGroup}getCustomAmount(e){let{amount:t,minAmount:n,currency:i,suggestionsService:s}=e;const a=this.calculateCustomAmount(t,n);return s.beautify(a,i)}sendPDUAmountStrategyEvent(){this.tracker.trackCheckoutCustomEvent({type:u.EXPERIMENT_ML_POST_DONATION_UPSELL_COLLECT_DATASET_AMOUNT_STRATEGY,data:{amountStrategy:this.strategy}})}get isTestGroup(){return this.isActive&&this.isVariant(it.TEST)}calculateCustomAmount(e,t){return Math.max(t,e*this.strategy/100)}getRandomStrategy(){const e=[$_.STRATEGY_10,$_.STRATEGY_15,$_.STRATEGY_20,$_.STRATEGY_25];return e[Math.floor(Math.random()*e.length)]}}!function(e){e[e.STRATEGY_10=10]="STRATEGY_10",e[e.STRATEGY_15=15]="STRATEGY_15",e[e.STRATEGY_20=20]="STRATEGY_20",e[e.STRATEGY_25=25]="STRATEGY_25"}(X_||(X_={}));class Z_ extends Yt{constructor(e){super(e),this._strategy=this.getRandomStrategy()}get strategy(){return this._strategy}tryStart(){this.isActive||this.start()}isEnabled(){return this.isTestGroup}getCustomAmount(e){let{amount:t,minAmount:n,currency:i,suggestionsService:s}=e;const a=this.calculateCustomAmount(t,n);return s.beautify(a,i)}sendPDUAmountStrategyEvent(){this.tracker.trackCheckoutCustomEvent({type:u.EXPERIMENT_ML_POST_DONATION_UPSELL_COLLECT_DATASET_AMOUNT_STRATEGY,data:{amountStrategy:this.strategy}})}get isTestGroup(){return this.isActive&&this.isVariant(nt.TEST)}calculateCustomAmount(e,t){return Math.max(t,e*this.strategy/100)}getRandomStrategy(){const e=[X_.STRATEGY_10,X_.STRATEGY_15,X_.STRATEGY_20,X_.STRATEGY_25];return e[Math.floor(Math.random()*e.length)]}}class J_ extends Yt{get isTestGroup(){return this.isActive&&this.isVariant(Be.TEST)}tryStart(e){this.isActive||this.canBeStarted(e)&&super.start()}canBeStarted(e){return!!e.isPostDonationUpsellEnabled&&!!e.isPaid&&!!J_.ALLOWED_CURRENCIES.includes(e.currency)}isEnabled(e){return this.canBeStarted(e)&&this.isTestGroup}trackAmountSuggestion(e){this.tracker.trackCheckoutCustomEvent({type:u.EXPERIMENT_ML_POST_DONATION_UPSELL_AMOUNT_SUGGESTION,data:e})}}J_.ALLOWED_CURRENCIES=["USD"];class ek extends Yt{get isTestGroup(){return this.isActive&&this.isVariant(Be.TEST)}tryStart(e){this.isActive||this.canBeStarted(e)&&super.start()}canBeStarted(e){return!!e.isPostDonationUpsellEnabled&&!!e.isPaid&&!!ek.ALLOWED_CURRENCIES.includes(e.currency)}isEnabled(e){return this.canBeStarted(e)&&this.isTestGroup}trackAmountSuggestion(e){this.tracker.trackCheckoutCustomEvent({type:u.EXPERIMENT_ML_POST_DONATION_UPSELL_AMOUNT_SUGGESTION,data:e})}}ek.ALLOWED_CURRENCIES=["USD"];class tk extends Yt{constructor(){super(...arguments),this.exposed=!1}get isTestGroup(){return this.isActive&&this.isVariant(wt.TEST)}tryStart(e){this.isActive||this.canBeStarted(e)&&super.start()}canBeStarted(e){return e.includeFees===D.XN.SMART_COVERING&&!e.isCustomFeeCoveredValue}isEnabled(e){return this.canBeStarted(e)&&this.isTestGroup}exposure(){this.exposed||(this.exposed=!0,super.exposure())}}class nk extends Yt{constructor(){super(...arguments),this.exposed=!1}get isTestGroup(){return this.isActive&&this.isVariant(xt.TEST)}tryStart(e){this.isActive||this.canBeStarted(e)&&super.start()}canBeStarted(e){return e.includeFees===D.XN.SMART_COVERING&&!e.isCustomFeeCoveredValue}isEnabled(e){return this.canBeStarted(e)&&this.isTestGroup}exposure(){this.exposed||(this.exposed=!0,super.exposure())}}class ik extends Yt{constructor(){super(...arguments),this.isFallback=!1,this.exposed=!1}get isTestGroup(){return this.isActive&&this.isVariant(Ye.TEST)}tryStart(e){this.isActive||this.canBeStarted(e)&&super.start()}canBeStarted(e){return e.includeFees===D.XN.SMART_COVERING&&!e.isCustomFeeCoveredValue}isEnabled(e){return this.canBeStarted(e)&&this.isTestGroup}trackSmartCoveringFeeResponse(e){this.isActive&&this.tracker.trackCheckoutCustomEvent({type:u.EXPERIMENT_ML_SMART_COVERING_FEE_V2_RESPONSE,data:e})}exposure(){this.exposed||(this.exposed=!0,super.exposure())}}class sk extends Yt{constructor(){super(...arguments),this.isFallback=!1,this.exposed=!1}get isTestGroup(){return this.isActive&&(this.isVariant(Ke.TEST_1)||this.isVariant(Ke.TEST_2))}tryStart(e){this.isActive||this.canBeStarted(e)&&super.start()}canBeStarted(e){return e.includeFees===D.XN.SMART_COVERING&&!e.isCustomFeeCoveredValue}isEnabled(e){return this.canBeStarted(e)&&this.isTestGroup}trackSmartCoveringFeeResponse(e){this.isActive&&this.tracker.trackCheckoutCustomEvent({type:u.EXPERIMENT_ML_SMART_COVERING_FEE_V2_RESPONSE,data:e})}exposure(){this.exposed||(this.exposed=!0,super.exposure())}}class ak extends Yt{get isTestGroup(){return this.isActive&&this.isVariant(Xe.TEST)}tryStart(e){this.isActive||this.canBeStarted(e)&&super.start()}canBeStarted(e){return!!e.isPostDonationUpsellEnabled&&!!e.isPaid&&!!ak.ALLOWED_CURRENCIES.includes(e.currency)}isEnabled(e){return this.canBeStarted(e)&&this.isTestGroup}trackAmountSuggestion(e){this.tracker.trackCheckoutCustomEvent({type:u.EXPERIMENT_ML_POST_DONATION_UPSELL_AMOUNT_SUGGESTION,data:e})}}ak.ALLOWED_CURRENCIES=["USD"];class ok extends Yt{get isTestGroup(){return this.isActive&&this.isVariant($e.TEST)}tryStart(e){this.isActive||this.canBeStarted(e)&&super.start()}canBeStarted(e){return!!e.isPostDonationUpsellEnabled&&!!e.isPaid&&!!ok.ALLOWED_CURRENCIES.includes(e.currency)}isEnabled(e){return this.canBeStarted(e)&&this.isTestGroup}trackAmountSuggestion(e){this.tracker.trackCheckoutCustomEvent({type:u.EXPERIMENT_ML_POST_DONATION_UPSELL_AMOUNT_SUGGESTION,data:e})}}ok.ALLOWED_CURRENCIES=["USD"];class rk extends uN{constructor(e,t,n,i,s,a,o,r,c,l,u,d,h,m,p,g,y,f,E,S,v,A,C,P,N,b){super(e,t,a,n,i,o,r,c,l,u,h,m,p,g,y,f,S,v,b),this._checkoutConfiguration=e,this.checkoutState=t,this.sessionService=n,this.sessionAPI=i,this.paymentService=s,this._checkoutUIState=a,this.tracker=o,this.currencyService=r,this.intl=c,this.iframeWindow=l,this.sentry=u,this.paymentFlowManager=d,this.paymentScreen=h,this.eventEmitter=m,this.checkoutAPIBridge=p,this.debug=g,this.experiments=y,this.paymentAPI=f,this.postDonationUpsellAPI=E,this.logger=S,this._redirectApi=v,this.postDonationUpsellMlSuggestion=A,this.smartCoveringFeeDecider=C,this.suggestionsService=P,this.pduAmountsService=N,this.params=b,this.shouldFindMandatoryScreen=!1,this.experiments.register(be.ML_POST_DONATION_UPSELL_CHECKOUT_EXPERIMENT,ek),this.experiments.register(be.ML_POST_DONATION_UPSELL_CAMPAIGN_PAGES_EXPERIMENT,J_),this.experiments.register(be.SMART_POST_DONATION_UPSELL_CHECKOUT_V_2_EXPERIMENT,ok),this.experiments.register(be.SMART_POST_DONATION_UPSELL_CAMPAIGN_PAGES_V_2_EXPERIMENT,ak),this.experiments.register(be.AMOUNT_PRESETS_CHECKOUT_V_4_EXPERIMENT,z_),this.experiments.register(be.AMOUNT_PRESETS_PAGES_V_4_EXPERIMENT,W_),this.experiments.register(be.COLLECT_DATASET_POST_DONATION_UPSELL_AMOUNT_CHECKOUT_V_3_EXPERIMENT,Z_),this.experiments.register(be.COLLECT_DATASET_POST_DONATION_UPSELL_AMOUNT_CAMPAIGN_PAGES_V_3_EXPERIMENT,Q_),this.initializeCheckoutStepsExperiments(),this.initializeSmartCoveringFeeCheckoutV4Experiment()}get type(){return this.checkoutState.process.dataPoint.flowType}get checkoutUIState(){return this._checkoutUIState}get isPaymentStarted(){return this.paymentService.isIDEALPaymentStarted()}getPaymentScreen(e,t){return this.paymentScreen.get(e,t)}dispose(){return this.paymentFlowManager.destroy()}hold(){return(0,c.sH)(this,void 0,void 0,(function*(){if(this.checkoutConfiguration.infrastructureParams.showcase)return ue.fail({});const e=this.paymentOptionsDataPoint.clientPaymentMethod,t=yield this.resolvePaymentFlow(e);let n;try{yield this.sessionService.updateSession(),n=yield t.hold()}catch(e){return ue.fail({shouldLeave:!1})}return ue.isFailure(n)?(this.payErrorMessage=n.failureResult.message,ue.fail({shouldLeave:!1})):ue.success(void 0)}))}pay(e){return(0,c.sH)(this,arguments,void 0,(function(e){var t=this;let{screen:n,predictedNextScreen:i,shouldSaveScreenHistory:s=!1,isFastTrackFlow:a=!1}=e;return function*(){var e;if(t.checkoutConfiguration.infrastructureParams.showcase)return ue.fail({});t.checkoutState.process.setInProgress(),t.payErrorTitle=void 0,t.payErrorMessage=void 0,t.additionalPayErrorMessage=void 0;const o=t.paymentOptionsDataPoint.clientPaymentMethod,r=yield t.resolvePaymentFlow(o),c=Date.now(),l=yield t.sessionService.updateSession({shouldSaveScreenHistory:s});if(ue.isFailure(l))return t.payErrorMessage=t.intl.translate("common.errorOccurredText"),a&&t.trackPaymentMethodPersonalDataValidationErrors(),ue.fail({});if(a){const e=t.checkoutState.privacy.donorNameDataPoint.validate(),n=t.checkoutState.privacy.phoneNumberDataPoint.validate(),i=t.checkoutState.mailingAddress.dataPoint.validate();if(!(e.isValid&&n.isValid&&i.isValid))return t.trackPaymentMethodPersonalDataValidationErrors(),ue.fail({});if(t.checkoutState.mailingAddress.dataPoint.checkShouldValidateOnServer()&&!(yield t.checkoutState.mailingAddress.dataPoint.validateAddress()))return t.trackPaymentMethodPersonalDataValidationErrors(),ue.fail({})}let u;try{u=yield r.pay()}catch(e){return t.shouldFindMandatoryScreen=!0,t.payErrorMessage=t.intl.translate("common.errorOccurredText"),t.capturePayErrorToSentry(e),t.tracker.trackCheckoutError({errorMessage:t.payErrorMessage,durationTime:c-Date.now()}),ue.fail({shouldLeave:t.checkoutState.process.dataPoint.hasPaymentError()&&o===iT._h.CARD})}if(ue.isFailure(u)){t.shouldFindMandatoryScreen=!0,t.payErrorTitle=u.failureResult.title,t.payErrorMessage=u.failureResult.message,t.additionalPayErrorMessage=u.failureResult.additionalMessage;const e=t.payErrorMessage||(o===iT._h.CARD?t.intl.translate("creditCard.error.title"):t.intl.translate("common.errorOccurredText"));return t.tracker.trackCheckoutError({errorMessage:e,errorCode:u.failureResult.code,errorType:u.failureResult.type,errorDeclineCode:u.failureResult.declineCode,durationTime:c-Date.now()}),ue.fail({shouldLeave:u.failureResult.shouldLeave})}return u.successResult.data?(t.checkoutState.process.setCompleted({donationId:u.successResult.data.donationId,customerId:u.successResult.data.customerId,tributeId:u.successResult.data.tributeId,tributeDonorPortalLink:u.successResult.data.tributeDonorPortalLink,recurringId:u.successResult.data.recurringId,donationIds:(null===(e=u.successResult.data.donationItems)||void 0===e?void 0:e.map((e=>e.donationId)))||[]}),t.handleDonationCompleted({donationId:u.successResult.data.donationId,clientPaymentMethod:o||iT._h.CARD,duration:c-Date.now(),screen:n}),yield t.handlePaymentRedirect(i),yield t.fetchPostDonationUpsellScreenDecision(),yield t.performPDUAmountsV3Experiment(),ue.success(void 0)):ue.fail({shouldLeave:!1})}()}))}saveCheckoutClosePublicParams(){return(0,c.sH)(this,void 0,void 0,(function*(){const e=this.designationDataPoint.toObject(),t=this.checkoutState.remindMeLater.dataPoint.toObject(),n=yield this.getPublicCheckoutDonationParams(),i=yield this.getCommonPublicCheckoutIntentParams();i&&(i.checkoutSettings.modifyDesignation=this.designationDataPoint.modifyDesignation,i.checkoutSettings.designation=e.goalKey,i.isSavedEmailOnExit=t.used),this.checkoutAPIBridge.setDonationParams(n),this.checkoutAPIBridge.setIntentParams(i)}))}acceptPostDonationUpsell(){var e;const t=this.postDonationUpsellDataPoint.toObject(),n=this.designationDataPoint.toObject();return this.postDonationUpsellAPI.update({donation:{total:t.upsellTotal,tip:t.upsellTip,amount:t.upsellAmount,currency:t.upsellCurrency},goalKey:null!==(e=n.goalKey)&&void 0!==e?e:"",firstChargeAt:t.upsellStartDate,period:t.upsellFrequency})}ensureFrequencyEnabled(e){if(this.checkoutConfiguration.enabledFrequencies.includes(e))return;if(this.isMultipleRecurringPlanCheckoutExperimentEnabled()&&e===W.ANNUAL)return;let t,n;this.preDonationUpsellDataPoint.isAccepted?(t=W.ONCE,n=this.preDonationUpsellDataPoint.upsellInitialAmount):(t=this.checkoutConfiguration.defaultFrequency,n=this.donationDataPoint.getFrequencyDefaultAmount(t)),this.checkoutState.donation.setDonationsFrequency(t),this.checkoutState.donation.setDonationsAmount(n)}isSmartCoveringFeeExperimentEnabled(){const e={includeFees:this.checkoutConfiguration.campaign.config.includeFees,isCustomFeeCoveredValue:this.donationDataPoint.isCustomFeeCoveredValue};return!!this.smartCoveringFeeCampaignPagesExperimentV2.isEnabled(e)}exposeSmartCoveringFeeExperimentV2(){const e={includeFees:this.checkoutConfiguration.campaign.config.includeFees,isCustomFeeCoveredValue:this.donationDataPoint.isCustomFeeCoveredValue};this.smartCoveringFeeCampaignPagesExperimentV2.canBeStarted(e)&&this.smartCoveringFeeCampaignPagesExperimentV2.exposure()}exposureSmartCoveringFeeV4Experiment(){const e={includeFees:this.checkoutConfiguration.campaign.config.includeFees,isCustomFeeCoveredValue:this.donationDataPoint.isCustomFeeCoveredValue};this.smartCoveringFeeCheckoutV4Experiment.canBeStarted(e)&&this.smartCoveringFeeCheckoutV4Experiment.exposure(),this.smartCoveringFeeCampaignPagesV4Experiment.canBeStarted(e)&&this.smartCoveringFeeCampaignPagesV4Experiment.exposure()}fetchFeeCoveringSuggestion(e){return(0,c.sH)(this,void 0,void 0,(function*(){if(this.checkoutConfiguration.checkoutType===Ce.MODAL)return;if(this.isAmountsOnUpsellV2ExperimentFeeCovered)return;if(!this.isSmartCoveringFeeExperimentEnabled())return;const t=yield this.createGetSmartCoveringFeePayload();if(null===t)return;let n;n=(null==e?void 0:e.debounced)?yield this.smartCoveringFeeDecider.debouncedFetchDecision(t):yield this.smartCoveringFeeDecider.fetchDecision(t);const i=n.response;n.fromCache||this.smartCoveringFeeCampaignPagesExperimentV2.trackSmartCoveringFeeResponse(i),i.isFallback?this.smartCoveringFeeCampaignPagesExperimentV2.isFallback=!0:(this.smartCoveringFeeCampaignPagesExperimentV2.isFallback=!1,this.checkoutState.donation.setFeeCovered(i.feeCoveringSuggestion===D.XN.DEFAULT_YES))}))}initialize(){const e=Object.create(null,{initialize:{get:()=>super.initialize}});return(0,c.sH)(this,void 0,void 0,(function*(){e.initialize.call(this),this.initializeSmartCoveringFeeExperiments(),this.paymentService.ensurePaymentMethodsInitialized()}))}tryStartMlAmountPresetsV4Experiment(e){this.amountPresetsPagesV4Experiment.tryStart(e),this.amountPresetsCheckoutV4Experiment.tryStart(e)}isMlAmountPresetsV4ExperimentEnabled(){return this.amountPresetsPagesV4Experiment.isTestGroup||this.amountPresetsCheckoutV4Experiment.isTestGroup}isMlAmountPresetsV4ControlGroupEnabled(){return this.amountPresetsPagesV4Experiment.isControlGroup}exposeMlAmountPresetsV4Experiment(){this.amountPresetsPagesV4Experiment.exposure(),this.amountPresetsCheckoutV4Experiment.exposure()}getMlAmountPresetsExperimentAllowedFrequencies(){return this.amountPresetsPagesV4Experiment.isTestGroup?this.amountPresetsPagesV4Experiment.allowedFrequencies:null}exposeMultipleRecurringPlanCheckoutExperiment(){this.multipleRecurringPlanCheckoutExperiment.exposure()}exposeMultipleRecurringPlanCampaignPagesExperiment(){this.multipleRecurringPlanCampaignPagesExperiment.exposure()}isMultipleRecurringPlanCheckoutExperimentEnabled(){return this.multipleRecurringPlanCheckoutExperiment.isTestGroup||this.multipleRecurringPlanCampaignPagesExperiment.isTestGroup}isMultipleRecurringPlanTestGroup2(){return this.multipleRecurringPlanCampaignPagesExperiment.isTestGroup2||this.multipleRecurringPlanCheckoutExperiment.isTestGroup2}isMultipleRecurringPlanTestGroup1(){return this.multipleRecurringPlanCampaignPagesExperiment.isTestGroup1||this.multipleRecurringPlanCheckoutExperiment.isTestGroup1}tryToCloneOnceFrequencyToAnnual(){if(!this.isMultipleRecurringPlanCheckoutExperimentEnabled())return;const e=this.donationDataPoint.getFrequencyDefaultAmount(W.ONCE),t=this.donationDataPoint.getFrequencyAmountSuggestions(W.ONCE),n=this.donationDataPoint.getFrequencyAmountSuggestionsInDefaultCurrency(W.ONCE),i=this.donationDataPoint.getFrequencyAmountHints(W.ONCE),s=null==i?void 0:i.find((e=>{var t;return e.id===(null===(t=this.donationDataPoint.amountHint)||void 0===t?void 0:t.id)}));this.checkoutState.donation.setFrequencyDefaultAmount(W.ANNUAL,e),this.checkoutState.donation.setFrequencyAmountSuggestions(W.ANNUAL,n,t),this.checkoutState.donation.setFrequencyAmountHints(W.ANNUAL,(null==i?void 0:i.map((e=>e.id)))||[],this.donationDataPoint.currency),s&&this.checkoutState.donation.setFrequencyAmountHint(W.ANNUAL,s)}getDonationParams(){var e;return{amount:this.donationDataPoint.amount||0,total:this.donationDataPoint.total,currency:this.donationDataPoint.currency,frequency:this.donationDataPoint.frequency,publicFee:this.donationDataPoint.processingFee,canModifyAmount:this.checkoutConfiguration.canModifyAmount,feeCovered:this.donationDataPoint.isFeeCovered,selectedHintId:null===(e=this.donationDataPoint.amountHint)||void 0===e?void 0:e.id}}getPublicCheckoutDonationParams(){return this.getCommonPublicCheckoutDonationParams({clientPaymentMethod:this.paymentOptionsDataPoint.clientPaymentMethod,employerName:this.dtdDataPoint.employerName})}get isMlPostDonationUpsellV3ExperimentEnabled(){return!!this.smartDPUCheckoutV3Experiment.isEnabled(this.smartPDUV3ExperimentParams)||!!this.smartPDUCampaignPagesV3Experiment.isEnabled(this.smartPDUV3ExperimentParams)}get smartPDUV3ExperimentParams(){return{isPostDonationUpsellEnabled:this.postDonationUpsellDataPoint.isEnabled,isPaid:this.isPaid}}get donationDataPoint(){return this.checkoutState.donation.dataPoint}get postDonationUpsellDataPoint(){return this.checkoutState.postDonationUpsell.dataPoint}get preDonationUpsellDataPoint(){return this.checkoutState.preDonationUpsell.dataPoint}get paymentOptionsDataPoint(){return this.checkoutState.paymentOptions.paymentOptionsDataPoint}get dtdDataPoint(){return this.checkoutState.doubleTheDonation.dataPoint}get mlPostDonationUpsellCheckoutExperiment(){return this.experiments.get(be.ML_POST_DONATION_UPSELL_CHECKOUT_EXPERIMENT)}get mlPostDonationUpsellCampaignPagesExperiment(){return this.experiments.get(be.ML_POST_DONATION_UPSELL_CAMPAIGN_PAGES_EXPERIMENT)}get smartPostDonationUpsellCheckoutExperiment(){return this.experiments.get(be.SMART_POST_DONATION_UPSELL_CHECKOUT_V_2_EXPERIMENT)}get smartPostDonationUpsellCampaignPagesExperiment(){return this.experiments.get(be.SMART_POST_DONATION_UPSELL_CAMPAIGN_PAGES_V_2_EXPERIMENT)}get smartDPUCheckoutV3Experiment(){return this.experiments.get(be.SMART_PDU_CHECKOUT_V_3_EXPERIMENT)}get smartPDUCampaignPagesV3Experiment(){return this.experiments.get(be.SMART_PDU_CAMPAIGN_PAGES_V_3_EXPERIMENT)}get amountPresetsPagesV4Experiment(){return this.experiments.get(be.AMOUNT_PRESETS_PAGES_V_4_EXPERIMENT)}get amountPresetsCheckoutV4Experiment(){return this.experiments.get(be.AMOUNT_PRESETS_CHECKOUT_V_4_EXPERIMENT)}get amountsOnUpsellV2CheckoutExperiment(){return this.experiments.get(be.AMOUNTS_ON_UPSELL_V_2_CHECKOUT_EXPERIMENT)}get amountsOnUpsellV2CampaignPagesExperiment(){return this.experiments.get(be.AMOUNTS_ON_UPSELL_V_2_CAMPAIGN_PAGES_EXPERIMENT)}get amountsOnUpsellV2Experiment(){return this.checkoutConfiguration.checkoutType===Ce.MODAL?this.amountsOnUpsellV2CheckoutExperiment:this.amountsOnUpsellV2CampaignPagesExperiment}get mlPostDonationUpsellExperimentParams(){return{isPostDonationUpsellEnabled:this.postDonationUpsellDataPoint.isEnabled,isPaid:this.isPaid,currency:this.donationDataPoint.currency}}get isMlPostDonationUpsellExperimentEnabled(){return!!this.mlPostDonationUpsellCheckoutExperiment.isEnabled(this.mlPostDonationUpsellExperimentParams)||!!this.mlPostDonationUpsellCampaignPagesExperiment.isEnabled(this.mlPostDonationUpsellExperimentParams)}get smartPostDonationUpsellExperimentParams(){return{isPostDonationUpsellEnabled:this.postDonationUpsellDataPoint.isEnabled,isPaid:this.isPaid,currency:this.donationDataPoint.currency}}get isSmartPostDonationUpsellEnabled(){return!!this.smartPostDonationUpsellCheckoutExperiment.isEnabled(this.smartPostDonationUpsellExperimentParams)||!!this.smartPostDonationUpsellCampaignPagesExperiment.isEnabled(this.smartPostDonationUpsellExperimentParams)}get smartCoveringFeeCampaignPagesExperimentV2(){return this.experiments.get(be.SMART_COVERING_FEE_CAMPAIGN_PAGES_V_2_EXPERIMENT)}get smartCoveringFeeCampaignPagesV4Experiment(){return this.experiments.get(be.SMART_COVERING_FEE_CAMPAIGN_PAGES_V_4_EXPERIMENT)}get smartCoveringFeeCheckoutV4Experiment(){return this.experiments.get(be.SMART_COVERING_FEE_CHECKOUT_V_4_EXPERIMENT)}get multipleRecurringPlanCheckoutExperiment(){return this.experiments.get(be.MULTIPLE_RECURRING_PLAN_CHECKOUT_EXPERIMENT)}get multipleRecurringPlanCampaignPagesExperiment(){return this.experiments.get(be.MULTIPLE_RECURRING_PLAN_CAMPAIGN_PAGES_EXPERIMENT)}get isAmountsOnUpsellV2ExperimentFeeCovered(){return!!this.amountsOnUpsellV2Experiment.isTestGroupWithUsingAmounts&&this.donationDataPoint.isCustomFeeCoveredValue}tryStartMlPostDonationUpsellV3Experiment(){this.smartDPUCheckoutV3Experiment.tryStart(this.smartPDUV3ExperimentParams),this.smartPDUCampaignPagesV3Experiment.tryStart(this.smartPDUV3ExperimentParams)}exposureMlPostDonationUpsellV3Experiment(){this.smartDPUCheckoutV3Experiment.exposure(),this.smartPDUCampaignPagesV3Experiment.exposure()}tryStartMlPostDonationUpsellExperiment(){this.mlPostDonationUpsellCheckoutExperiment.tryStart(this.mlPostDonationUpsellExperimentParams),this.mlPostDonationUpsellCampaignPagesExperiment.tryStart(this.mlPostDonationUpsellExperimentParams)}trackPostDonationUpsellAmountSuggestion(e){this.mlPostDonationUpsellCheckoutExperiment.isEnabled(this.mlPostDonationUpsellExperimentParams)&&this.mlPostDonationUpsellCheckoutExperiment.trackAmountSuggestion(e),this.mlPostDonationUpsellCampaignPagesExperiment.isEnabled(this.mlPostDonationUpsellExperimentParams)&&this.mlPostDonationUpsellCampaignPagesExperiment.trackAmountSuggestion(e),this.smartPostDonationUpsellCheckoutExperiment.isEnabled(this.smartPostDonationUpsellExperimentParams)&&this.smartPostDonationUpsellCheckoutExperiment.trackAmountSuggestion(e),this.smartPostDonationUpsellCampaignPagesExperiment.isEnabled(this.smartPostDonationUpsellExperimentParams)&&this.smartPostDonationUpsellCampaignPagesExperiment.trackAmountSuggestion(e)}tryStartSmartPostDonationUpsellExperiment(){this.smartPostDonationUpsellCheckoutExperiment.tryStart(this.smartPostDonationUpsellExperimentParams),this.smartPostDonationUpsellCampaignPagesExperiment.tryStart(this.smartPostDonationUpsellExperimentParams)}performPDUAmountsV3Experiment(){return(0,c.sH)(this,void 0,void 0,(function*(){this.tryStartMlPostDonationUpsellV3Experiment(),this.exposureMlPostDonationUpsellV3Experiment(),this.isMlPostDonationUpsellV3ExperimentEnabled&&(yield this.pduAmountsService.tryFetchSuggestion())&&(this.pduAmountsService.tryApplySuggestion(),this.pduAmountsService.tryTrackSuggestion())}))}fetchPostDonationUpsellScreenDecision(){return(0,c.sH)(this,void 0,void 0,(function*(){var e,t;if(this.tryStartMlPostDonationUpsellExperiment(),this.tryStartSmartPostDonationUpsellExperiment(),!this.isMlPostDonationUpsellExperimentEnabled&&!this.isSmartPostDonationUpsellEnabled)return;const n=new Date;yield this.postDonationUpsellMlSuggestion.fetchAmountSuggestion({eventTime:(new Date).toISOString(),checkoutCurrency:this.donationDataPoint.currency,checkoutAmount:null!==(e=this.donationDataPoint.amount)&&void 0!==e?e:0,checkoutInUsdAmount:null!==(t=this.donationDataPoint.amountInUSD)&&void 0!==t?t:0,clientTimeZone:bn(),clientHour:n.getHours(),clientWeekday:n.getDay(),clientLocale:this.intl.locale,minRecurringAmount:this.postDonationUpsellDataPoint.upsellMinAmount,campaignKey:this.checkoutConfiguration.campaign.key});const i=this.postDonationUpsellMlSuggestion.getOriginalAmountSuggestion();i.isFallback||this.trackPostDonationUpsellAmountSuggestion(i)}))}initializeSmartCoveringFeeExperiments(){this.experiments.register(be.SMART_COVERING_FEE_CAMPAIGN_PAGES_V_2_EXPERIMENT,ik),this.experiments.get(be.SMART_COVERING_FEE_CAMPAIGN_PAGES_V_2_EXPERIMENT).tryStart({includeFees:this.checkoutConfiguration.campaign.config.includeFees,isCustomFeeCoveredValue:this.donationDataPoint.isCustomFeeCoveredValue}),this.experiments.register(be.SMART_COVERING_FEE_CHECKOUT_V_2_EXPERIMENT,sk)}resolvePaymentFlow(e){return(0,c.sH)(this,void 0,void 0,(function*(){return this.paymentService.resolvePaymentFlow(e)}))}createGetSmartCoveringFeePayload(){return(0,c.sH)(this,void 0,void 0,(function*(){var e,t;if(null===this.donationDataPoint.amountInUSD||null===this.donationDataPoint.getFrequencyDefaultAmount(this.donationDataPoint.frequency))return null;const n=this.currencyService.convert(this.checkoutConfiguration.defaultAmounts[this.donationDataPoint.frequency]||0,this.checkoutConfiguration.defaultCurrency,"USD");return{amountInUSD:this.donationDataPoint.amountInUSD,defaultAmountInUSD:n,currency:this.donationDataPoint.currency,companyKey:this.checkoutConfiguration.company.key,campaignKey:this.checkoutConfiguration.campaign.key,clientLocale:this.intl.locale,history:window.history.length,trackerClientId:this.tracker.clientId,elementLocale:this.checkoutConfiguration.element.locale,clientTimeZone:bn(),battery:null!==(t=null===(e=this.tracker.page)||void 0===e?void 0:e.toObject().clientBatteryLevel)&&void 0!==t?t:0}}))}initializeCheckoutStepsExperiments(){const e=this.experiments.get(be.CHECKOUT_STEPS_CHECKOUT_MODAL_EXPERIMENT),t=this.experiments.get(be.CHECKOUT_STEPS_CAMPAIGN_PAGES_EXPERIMENT);e.tryStart({flowType:this.type}),t.tryStart({flowType:this.type})}initializeSmartCoveringFeeCheckoutV4Experiment(){this.experiments.register(be.SMART_COVERING_FEE_CAMPAIGN_PAGES_V_4_EXPERIMENT,tk),this.experiments.register(be.SMART_COVERING_FEE_CHECKOUT_V_4_EXPERIMENT,nk),this.smartCoveringFeeCheckoutV4Experiment.tryStart({includeFees:this.checkoutConfiguration.campaign.config.includeFees,isCustomFeeCoveredValue:this.donationDataPoint.isCustomFeeCoveredValue}),this.smartCoveringFeeCampaignPagesV4Experiment.tryStart({includeFees:this.checkoutConfiguration.campaign.config.includeFees,isCustomFeeCoveredValue:this.donationDataPoint.isCustomFeeCoveredValue})}trackPaymentMethodPersonalDataValidationErrors(){this.tracker.trackCheckoutCustomEvent({type:u.PAYMENT_METHOD_PERSONAL_DATA_VALIDATION_ERROR,data:{paymentMethod:this.checkoutState.paymentOptions.paymentOptionsDataPoint.clientPaymentMethod,firstName:{filled:!!this.checkoutState.privacy.donorNameDataPoint.firstName},lastName:{filled:!!this.checkoutState.privacy.donorNameDataPoint.lastName},email:{filled:!!this.checkoutState.privacy.donorEmailDataPoint.email},phoneNumber:{shown:this.checkoutState.privacy.phoneNumberDataPoint.isEnabled,required:this.checkoutState.privacy.phoneNumberDataPoint.isRequired,filled:!!this.checkoutState.privacy.phoneNumberDataPoint.phone},mailingAddressRequired:this.checkoutState.mailingAddress.dataPoint.isRequired,line1:{filled:!!this.checkoutState.mailingAddress.dataPoint.line1},line2:{filled:!!this.checkoutState.mailingAddress.dataPoint.line2},city:{filled:!!this.checkoutState.mailingAddress.dataPoint.city},postal:{filled:!!this.checkoutState.mailingAddress.dataPoint.postal},region:{value:this.checkoutState.mailingAddress.dataPoint.region,filled:!!this.checkoutState.mailingAddress.dataPoint.region},country:{value:this.checkoutState.mailingAddress.dataPoint.countryCode,filled:!!this.checkoutState.mailingAddress.dataPoint.countryCode}}})}}class ck extends O_{constructor(e,t,n){super(n),this.redirectApi=e,this.sharingApi=t,this._emotionalTypeService=null,this.suggestionsService=n.suggestionsService}get periodLabelPdu(){return this.pduRecurringTypes[this.viewState.postDonationUpsell.period]}get hasTribute(){return this.tributeDataPoint.isActive&&!!this.tributeDataPoint.tributeeName}get hasPostDonationUpsell(){var e,t;return null!==(t=null===(e=this.postDonationUpsellDataPoint)||void 0===e?void 0:e.isAccepted)&&void 0!==t&&t}get thankYouTitle(){return this.intl.translate("common.thankYouTitle",{name:this.checkoutService.checkoutConfiguration.infrastructureParams.showcase?"John":this.checkoutState.privacy.donorNameDataPoint.firstName})}get descriptionPdu(){return this.intl.translate("thankYouScreen.postDonationUpsell.description",{amount:this.intl.formatCurrency(this.viewState.total,{currency:this.viewState.currency,display:"fulltrimzeroes"})})}get descriptionSharing(){switch(this.viewState.flowType){case Ft.MONEY:return this.descriptionSharingFiat;case Ft.CRYPTO:return this.intl.safeTranslate("thankYouScreen.description.once",{amount:this.viewState.formattedTotal});default:{const e=this.viewState.flowType;throw new Error(`Unknown flow type "${e}"`)}}}get descriptionTribute(){if(this.donationDataPoint instanceof Cb){const e=this.donationDataPoint.frequency,t=this.donationDataPoint.getFrequencyDonationEndDate(e);if(e!==W.ONCE&&t.shouldShow&&t.endDate&&this.donationDataPoint.isDonationEndDateActive){const n=this.intl.formatDate(t.endDate,{type:Ga.SHORT_WITH_YEAR}),i=this.isMultipleDonations?"thankYouScreen.multipleDonations.description.tribute.recurring.withEndDate":"thankYouScreen.description.tribute.recurring.withEndDate";return this.intl.safeTranslate(i,{amount:this.viewState.formattedTotal,recurringType:this.getRecurringTypeDescriptionAdjective(e),date:n,dedicatedTo:this.viewState.tribute.inHonorOf})}}if(!this.checkoutService.checkoutConfiguration.infrastructureParams.showcase&&this.donationDataPoint instanceof Cb){const e=this.donationDataPoint.frequency;if(e!==W.ONCE){const t=this.isMultipleDonations?"thankYouScreen.multipleDonations.description.tribute.recurring.default":"thankYouScreen.description.tribute.recurring.default";return this.intl.safeTranslate(t,{amount:this.viewState.formattedTotal,recurringType:this.getRecurringTypeDescriptionAdjective(e),dedicatedTo:this.viewState.tribute.inHonorOf})}}const e=this.isMultipleDonations?"thankYouScreen.multipleDonations.description.tribute.once":"thankYouScreen.description.tribute.once";return this.intl.safeTranslate(e,{amount:this.viewState.formattedTotal,dedicatedTo:this.viewState.tribute.inHonorOf})}get descriptionUpsell(){if(this.hasPostDonationUpsell)return this.intl.safeTranslate("thankYouScreen.description.upsell",{amount:this.viewState.formattedTotal,recurringType:this.viewState.postDonationUpsell.recurringType,date:this.viewState.postDonationUpsell.formattedStartDate,guaranteedAmount:this.viewState.postDonationUpsell.formattedAmount})}get multipleDonationsList(){if(!this.isMultipleDonations)return[];const e=this.designationsDataPoint.selectedGoals;return this.donationItems.map(((t,n)=>{var i,s;const a=(null!==(i=t.amount)&&void 0!==i?i:0)+(null!==(s=this.processingFees[t.id])&&void 0!==s?s:0);return{goalName:e[n].name,totalLabel:this.intl.formatCurrency(a,{currency:this.donationDataPoint.currency,display:"fulltrimzeroes"}),total:a}})).sort(((e,t)=>e.total-t.total))}get postDonationCelebrationAnimationTrackingData(){return this.emotionalTypeService.trackingData}beforeEnter(){return(0,c.sH)(this,void 0,void 0,(function*(){this.tryStartCollectDatasetPostDonationUpsellAmountExperimentV3(),this.tryToApplyCollectDatasetPostDonationUpsellAmountExperimentV3(),(!this.postDonationUpsellDataPoint||!this.postDonationUpsellDataPoint.isEnabled)&&(yield this.redirectIfNeeded());const e=this.donationDataPoint.total||0,t=this.donationDataPoint.currency;this.produceViewState((n=>{var i,s;n.currency=t,n.total=e,n.formattedTotal=this.intl.formatCurrency(n.total,{currency:n.currency,display:"fulltrimzeroes"}),n.emotionalType=this.emotionalTypeService.getCampaignEmotionalType(),n.tributeDonorPortalLink=null!==(s=null===(i=this.processDataPoint.completedData)||void 0===i?void 0:i.tributeDonorPortalLink)&&void 0!==s?s:"",n.tribute.inHonorOf=this.tributeDataPoint.tributeeName,n.tribute.makeAnotherDonation=this.variant===Vr.TRIBUTE,n.tribute.completeDedication=this.variant===Vr.TRIBUTE,n.variant=this.variant;const{email:a,twitter:o,linkedin:r,facebook:c}=this.sharingApi.sharingChannels;n.sharing.showEmail=this.variant===Vr.SHARING&&a,n.sharing.showTwitter=this.variant===Vr.SHARING&&o,n.sharing.showLinkedin=this.variant===Vr.SHARING&&r,n.sharing.showFacebook=this.variant===Vr.SHARING&&c,n.sharing.sharingText=this.sharingApi.sharingText,n.postDonationUpsell.recurringType=this.postDonationUpsellRecurringType,n.postDonationUpsell.formattedAmount=this.postDonationUpsellFormattedAmount,n.postDonationUpsell.formattedStartDate=this.postDonationUpsellFormattedStartDate,this.postDonationUpsellDataPoint&&(n.postDonationUpsell.recurringMinAmount=this.postDonationUpsellDataPoint.upsellMinAmount,n.postDonationUpsell.upsellMaxAmount=this.postDonationUpsellDataPoint.upsellMaxAmount,n.postDonationUpsell.amount=this.postDonationUpsellDataPoint.upsellAmount,n.postDonationUpsell.amountInUSD=this.postDonationUpsellDataPoint.upsellAmountInUSD,n.postDonationUpsell.startDate=this.postDonationUpsellDataPoint.upsellStartDate,n.postDonationUpsell.displayPduScreen=this.postDonationUpsellDataPoint.isEnabled,n.postDonationUpsell.shown=this.postDonationUpsellDataPoint.isEnabled)})),this.exposureSmartPostDonationUpsellExperimentV2(),yield this.setCheckoutStepsSuccessAndWaitForAnimation()}))}pduAccept(){return(0,c.sH)(this,void 0,void 0,(function*(){if(this.checkoutService instanceof rk&&this.checkoutState instanceof cN&&!this.checkoutService.checkoutConfiguration.infrastructureParams.showcase&&!this.pending){if(this.pending=!0,yield this.isPduAmountValid())return(yield this.checkoutService.acceptPostDonationUpsell())?(this.checkoutState.postDonationUpsell.accept(),this.pending=!1,this.closePduScreen()):(this.produceViewState((e=>{e.postDonationUpsell.confirmError=!0})),void(this.pending=!1));this.pending=!1}}))}isPduAmountValid(){return(0,c.sH)(this,void 0,void 0,(function*(){return!!this.viewState.postDonationUpsell.isAmountValid||(this.produceViewState((e=>{e.postDonationUpsell.shakeKey+=1})),!1)}))}changePduAmount(e){if(!(this.checkoutService instanceof rk&&this.checkoutState instanceof cN&&this.postDonationUpsellDataPoint))return;const t=this.postDonationUpsellDataPoint;this.checkoutState.postDonationUpsell.setUpsellCustomAmount(e),this.produceViewState((n=>{n.postDonationUpsell.amount=e,n.postDonationUpsell.amountInUSD=t.upsellAmountInUSD})),this.validatePduAmount()}validatePduAmount(){if(!this.postDonationUpsellDataPoint)return;const e=this.postDonationUpsellDataPoint.validateMinAmount(),t=this.postDonationUpsellDataPoint.validateMaxAmount();this.produceViewState((n=>{n.postDonationUpsell.isAmountValid=e&&t,n.postDonationUpsell.errors.min=!e,n.postDonationUpsell.errors.max=!t}))}makePduAmountInputVisible(){this.produceViewState((e=>{e.postDonationUpsell.showAmountInput=!0}))}getSharingLink(e){return this.sharingApi.getSharingLink(e,this.intl.translate("thankYouScreen.share.emailSubject"))}share(e,t){this.sharingApi.share(e,this.intl.translate("thankYouScreen.share.emailSubject"),t)}pduSetShowedInSession(){return(0,c.sH)(this,void 0,void 0,(function*(){this.checkoutState instanceof cN&&(this.checkoutService.checkoutConfiguration.infrastructureParams.showcase||(this.checkoutState.postDonationUpsell.setShowed(),yield this.checkoutService.updateSession(),yield this.checkoutService.tryCloseSession()))}))}makeAnotherDonation(){}closePduScreen(){return(0,c.sH)(this,void 0,void 0,(function*(){yield this.redirectIfNeeded(),this.produceViewState((e=>{e.postDonationUpsell.displayPduScreen=!1,e.postDonationUpsell.recurringType=this.postDonationUpsellRecurringType,e.postDonationUpsell.formattedAmount=this.postDonationUpsellFormattedAmount,e.postDonationUpsell.formattedStartDate=this.postDonationUpsellFormattedStartDate}))}))}getRecurringTypeDescriptionAdjective(e){var t;return null!==(t={[W.DAILY]:this.intl.safeTranslate("widgetSubscriptionPeriodLabel.daily.adjective"),[W.WEEKLY]:this.intl.safeTranslate("widgetSubscriptionPeriodLabel.weekly.adjective"),[W.BIWEEKLY]:this.intl.safeTranslate("widgetSubscriptionPeriodLabel.biweekly.adjective"),[W.EVERY_4_WEEKS]:this.intl.safeTranslate("widgetSubscriptionPeriodLabel.every4weeks.adjective"),[W.MONTHLY]:this.intl.safeTranslate("widgetSubscriptionPeriodLabel.monthly.adjective"),[W.BIMONTHLY]:this.intl.safeTranslate("widgetSubscriptionPeriodLabel.bimonthly.adjective"),[W.QUARTERLY]:this.intl.safeTranslate("widgetSubscriptionPeriodLabel.quarterly.adjective"),[W.SEMIANNUAL]:this.intl.safeTranslate("widgetSubscriptionPeriodLabel.semiannual.adjective"),[W.ANNUAL]:this.intl.safeTranslate("widgetSubscriptionPeriodLabel.annual.adjective")}[e])&&void 0!==t?t:""}getRecurringTypeDescriptionAdverb(e){var t;return null!==(t={[W.DAILY]:this.intl.safeTranslate("widgetSubscriptionPeriodLabel.daily.adverb"),[W.WEEKLY]:this.intl.safeTranslate("widgetSubscriptionPeriodLabel.weekly.adverb"),[W.BIWEEKLY]:this.intl.safeTranslate("widgetSubscriptionPeriodLabel.biweekly.adverb"),[W.EVERY_4_WEEKS]:this.intl.safeTranslate("widgetSubscriptionPeriodLabel.every4weeks.adverb"),[W.MONTHLY]:this.intl.safeTranslate("widgetSubscriptionPeriodLabel.monthly.adverb"),[W.BIMONTHLY]:this.intl.safeTranslate("widgetSubscriptionPeriodLabel.bimonthly.adverb"),[W.QUARTERLY]:this.intl.safeTranslate("widgetSubscriptionPeriodLabel.quarterly.adverb"),[W.SEMIANNUAL]:this.intl.safeTranslate("widgetSubscriptionPeriodLabel.semiannual.adverb"),[W.ANNUAL]:this.intl.safeTranslate("widgetSubscriptionPeriodLabel.annual.adverb")}[e])&&void 0!==t?t:""}getInitialViewState(){return{locked:!1,variant:Vr.SHARING,currency:"USD",total:0,formattedTotal:"",emotionalType:Jn.NEUTRAL,sharing:{showFacebook:!0,showTwitter:!0,showLinkedin:!0,showEmail:!0,sharingText:""},tribute:{inHonorOf:"",makeAnotherDonation:!0,completeDedication:!0},postDonationUpsell:{formattedAmount:"",formattedStartDate:"",recurringType:"",amount:0,amountInUSD:0,period:W.MONTHLY,showAmountInput:!1,confirmError:!1,recurringMinAmount:0,upsellMaxAmount:0,startDate:(new Date).toString(),isAmountValid:!0,errors:{min:!1,max:!1},shakeKey:0,isShowcase:!1,displayPduScreen:!1,shown:!1},tributeDonorPortalLink:"",flowType:this.checkoutService.type}}get donationDataPoint(){return this.checkoutState.donation.dataPoint}get donorNameDataPoint(){return this.checkoutState.privacy.donorNameDataPoint}get postDonationUpsellDataPoint(){return this.checkoutState instanceof cN?this.checkoutState.postDonationUpsell.dataPoint:null}get descriptionSharingFiat(){const e=this.donationDataPoint.frequency;if(this.donationDataPoint instanceof Cb){const t=this.donationDataPoint.getFrequencyDonationEndDate(e);if(e!==W.ONCE&&t.shouldShow&&t.endDate&&this.donationDataPoint.isDonationEndDateActive){const n=this.isMultipleDonations?"thankYouScreen.multipleDonations.description.recurring.withEndDate":"thankYouScreen.description.recurring.withEndDate",i=this.intl.formatDate(t.endDate,{type:Ga.SHORT_WITH_YEAR});return this.intl.safeTranslate(n,{amount:this.viewState.formattedTotal,recurringType:this.getRecurringTypeDescriptionAdjective(e),date:i})}}if(!this.checkoutService.checkoutConfiguration.infrastructureParams.showcase&&this.donationDataPoint instanceof Cb&&e!==W.ONCE){const t=this.isMultipleDonations?"thankYouScreen.multipleDonations.description.recurring.default":"thankYouScreen.description.recurring.default";return this.intl.safeTranslate(t,{amount:this.viewState.formattedTotal,recurringType:this.getRecurringTypeDescriptionAdjective(e)})}const t=this.isMultipleDonations?"thankYouScreen.multipleDonations.description.once":"thankYouScreen.description.once";return this.intl.safeTranslate(t,{amount:this.viewState.formattedTotal})}get tributeDataPoint(){return this.checkoutState.tribute.dataPoint}get processDataPoint(){return this.checkoutState.process.dataPoint}get designationsDataPoint(){return this.checkoutState.designations.dataPoint}get donationItems(){return this.donationDataPoint instanceof Cb?this.donationDataPoint.donationItemsDto:[]}get isMultipleDonations(){return this.donationDataPoint instanceof Cb&&this.donationDataPoint.isMultipleDonations}get processingFees(){return this.donationDataPoint instanceof Cb?this.donationDataPoint.processingFees:{}}get postDonationUpsellFormattedAmount(){var e;return this.intl.formatCurrency((null===(e=this.postDonationUpsellDataPoint)||void 0===e?void 0:e.upsellAmount)||0,{currency:this.donationDataPoint.currency,display:"fulltrimzeroes"})}get postDonationUpsellFormattedStartDate(){var e;return this.intl.formatDate((null===(e=this.postDonationUpsellDataPoint)||void 0===e?void 0:e.upsellStartDate)||"",{type:Ga.LONG})}get postDonationUpsellRecurringType(){var e;return(null===(e=this.postDonationUpsellDataPoint)||void 0===e?void 0:e.upsellFrequency)?this.getRecurringTypeDescriptionAdverb(this.postDonationUpsellDataPoint.upsellFrequency):""}get isSharingEnabled(){return this.sharingApi.isSharingEnabled}get variant(){return this.hasTribute&&this.tributeDataPoint.isSharingEnabled?Vr.TRIBUTE:this.isSharingEnabled?Vr.SHARING:Vr.DEFAULT}get pduRecurringTypes(){return{[W.DAILY]:this.intl.translate("widgetSubscriptionPeriodLabel.daily.adverb"),[W.WEEKLY]:this.intl.translate("widgetSubscriptionPeriodLabel.weekly.adverb"),[W.BIWEEKLY]:this.intl.translate("widgetSubscriptionPeriodLabel.biweekly.adverb"),[W.EVERY_4_WEEKS]:this.intl.translate("widgetSubscriptionPeriodLabel.every4weeks.adverb"),[W.MONTHLY]:this.intl.translate("widgetSubscriptionPeriodLabel.monthly.adverb"),[W.BIMONTHLY]:this.intl.translate("widgetSubscriptionPeriodLabel.bimonthly.adverb"),[W.QUARTERLY]:this.intl.translate("widgetSubscriptionPeriodLabel.quarterly.adverb"),[W.SEMIANNUAL]:this.intl.translate("widgetSubscriptionPeriodLabel.semiannual.adverb"),[W.ANNUAL]:this.intl.translate("widgetSubscriptionPeriodLabel.annual.adverb")}}get emotionalTypeService(){var e,t;return this._emotionalTypeService||(this._emotionalTypeService=new Y_({checkoutConfiguration:this.checkoutService.checkoutConfiguration,isTributeFilled:this.tributeDataPoint.isFilled,selectedDesignation:null===(t=null===(e=this.checkoutState.designation)||void 0===e?void 0:e.dataPoint)||void 0===t?void 0:t.goalName})),this._emotionalTypeService}get collectDatasetPostDonationUpsellAmountCheckoutExperimentV3(){return this.experiments.get(be.COLLECT_DATASET_POST_DONATION_UPSELL_AMOUNT_CHECKOUT_V_3_EXPERIMENT)}get collectDatasetPostDonationUpsellAmountCampaignPagesExperimentV3(){return this.experiments.get(be.COLLECT_DATASET_POST_DONATION_UPSELL_AMOUNT_CAMPAIGN_PAGES_V_3_EXPERIMENT)}tryStartCollectDatasetPostDonationUpsellAmountExperimentV3(){var e;(null===(e=this.postDonationUpsellDataPoint)||void 0===e?void 0:e.isEnabled)&&(this.collectDatasetPostDonationUpsellAmountCheckoutExperimentV3.tryStart(),this.collectDatasetPostDonationUpsellAmountCampaignPagesExperimentV3.tryStart())}exposureSmartPostDonationUpsellExperimentV2(){var e;if(!(null===(e=this.postDonationUpsellDataPoint)||void 0===e?void 0:e.isEnabled))return;const t=this.experiments.get(be.SMART_POST_DONATION_UPSELL_CAMPAIGN_PAGES_V_2_EXPERIMENT),n=this.experiments.get(be.SMART_POST_DONATION_UPSELL_CHECKOUT_V_2_EXPERIMENT);t.exposure(),n.exposure()}tryToApplyCollectDatasetPostDonationUpsellAmountExperimentV3(){var e,t;if(!(this.checkoutState instanceof cN))return;if(!(null===(e=this.postDonationUpsellDataPoint)||void 0===e?void 0:e.isEnabled))return;let n=null;if(this.collectDatasetPostDonationUpsellAmountCheckoutExperimentV3.active&&(n=this.collectDatasetPostDonationUpsellAmountCheckoutExperimentV3),this.collectDatasetPostDonationUpsellAmountCampaignPagesExperimentV3.active&&(n=this.collectDatasetPostDonationUpsellAmountCampaignPagesExperimentV3),!n||!this.donationDataPoint.amount||!this.suggestionsService)return;n.exposure();const i=n.getCustomAmount({amount:this.donationDataPoint.amount,minAmount:(null===(t=this.postDonationUpsellDataPoint)||void 0===t?void 0:t.upsellMinAmount)||0,currency:this.donationDataPoint.currency,suggestionsService:this.suggestionsService});this.checkoutState.postDonationUpsell.setUpsellCustomAmount(i),n.sendPDUAmountStrategyEvent()}isCheckoutStepsExperimentActive(){const e=this.experiments.get(be.CHECKOUT_STEPS_CHECKOUT_MODAL_EXPERIMENT),t=this.experiments.get(be.CHECKOUT_STEPS_CAMPAIGN_PAGES_EXPERIMENT);return e.isTestGroup()||t.isTestGroup()}setCheckoutStepsSuccessAndWaitForAnimation(){return new Promise((e=>this.checkoutService.checkoutConfiguration.infrastructureParams.showcase?e():this.isCheckoutStepsExperimentActive()?this.checkoutService.checkoutUIState.showCheckoutStepsSuccess?e():(this.checkoutService.checkoutUIState.setShowCheckoutStepsSuccess(!0),UP(300).then((()=>{e()}))):e()))}redirectIfNeeded(){return(0,c.sH)(this,void 0,void 0,(function*(){this.redirectApi.canRedirect()?(yield this.checkoutService.tryCloseSession(),yield this.redirectApi.tryRedirect(this.checkoutService)):this.checkoutService.tryCloseSession()}))}}class lk extends O_{constructor(e){super(e)}addComment(){return(0,c.sH)(this,void 0,void 0,(function*(){return this.checkoutState.comment.setIsRequired(!0),this.leave({omitBeforeLeave:!0})}))}validateDesignation(){const e=this.designationDataPoint.validateDesignation(this.getGoalRepeat(this.viewState.frequency));this.produceViewState((t=>{t.designation.isValid=e.isValid,t.errors.designation.required=e.fields.goal.errors.required}))}beforeEnter(){return(0,c.sH)(this,void 0,void 0,(function*(){this.produceViewState((e=>{e.currencyCode=this.donationDataPoint.currency,e.currencyName=this.currencyService.getName(this.donationDataPoint.currency),e.currencies=this.donationDataPoint.currencyList.map((e=>({code:e,name:this.currencyService.getName(e),type:e}))),e.defaultFiatCurrency=this.donationDataPoint.defaultFiatCurrency,e.frequency=W.ONCE,e.amount=this.donationDataPoint.amount||null,e.amountInUsd=this.donationDataPoint.amountInUSD||0,e.amountInDefaultFiat=this.donationDataPoint.amountInDefaultFiat,e.minAmount=this.donationDataPoint.minAmount,e.tribute.show=this.tributeDataPoint.isEnabled,e.tribute.isActive=this.tributeDataPoint.isActive,e.tribute.labelType=this.tributeDataPoint.labelType,e.tribute.sharingEnabled=this.tributeDataPoint.isSharingEnabled,e.tribute.name=this.tributeDataPoint.tributeeName,e.tribute.isFilled=this.tributeDataPoint.isFilled,e.tribute.isOptional=this.tributeDataPoint.isOptional,e.tribute.isTributeOriented=this.tributeDataPoint.isTributeOriented,e.designation.show=this.designationDataPoint.isEnabled,e.designation.goalKey=this.designationDataPoint.goalKey,e.designation.goal=this.designationDataPoint.selectedGoal,e.designation.goals=this.designationDataPoint.getAllowedGoalsByFrequency(this.getGoalRepeat(e.frequency)),e.designation.shouldShowDesignation=this.designationDataPoint.shouldShowDesignation(this.getGoalRepeat(e.frequency)),e.designation.isEditable=this.designationDataPoint.isEditable(this.getGoalRepeat(e.frequency)),e.comment.isEnabled=this.commentDataPoint.isEnabled,e.comment.content=this.commentDataPoint.comment,e.comment.prevContent=this.commentDataPoint.prevComment,e.livemode=this.checkoutService.livemode,e.isCryptoAccountConnected=!!this.checkoutService.company.cryptoProvider}))}))}changeAmount(e){return(0,c.sH)(this,void 0,void 0,(function*(){this.checkoutState.donation.setAmount(e),this.checkoutService.syncUpdateCheckoutState();const t=this.donationDataPoint.validate();this.produceViewState((n=>{n.amount=e,n.amountInUsd=this.donationDataPoint.amountInUSD||0,n.amountInDefaultFiat=this.donationDataPoint.amountInDefaultFiat,n.isDefaultAmount=!1,n.errors.amount.required=!1,n.errors.amount.min&&(n.errors.amount.min=t.fields.amount.errors.min),n.errors.amount.max&&(n.errors.amount.max=t.fields.amount.errors.max)}))}))}validateAmount(){const e=this.donationDataPoint.validate();this.produceViewState((t=>{t.isAmountValid=e.fields.amount.isValid,t.errors.amount.min=e.fields.amount.errors.min,t.errors.amount.max=e.fields.amount.errors.max,t.errors.amount.required=e.fields.amount.errors.required}))}savePrevComment(){this.checkoutService.checkoutConfiguration.infrastructureParams.showcase||this.checkoutState.comment.savePrevComment()}changeCryptoCurrency(e){return(0,c.sH)(this,void 0,void 0,(function*(){this.checkoutState.donation.setCurrency(e),this.viewState.isDefaultAmount&&(this.checkoutState.donation.setAmountByDefault(e),this.produceViewState((e=>{e.amount=this.donationDataPoint.total}))),this.checkoutService.syncUpdateCheckoutState(),this.produceViewState((t=>{t.currencyCode=e,t.currencyName=this.currencyService.getName(e),t.amountInUsd=this.donationDataPoint.amountInUSD||0,t.amountInDefaultFiat=this.donationDataPoint.amountInDefaultFiat}))}))}toggleTribute(){this.checkoutState.tribute.setActive(!this.tributeDataPoint.isActive),this.checkoutService.syncUpdateCheckoutState(),this.produceViewState((e=>{e.tribute.isActive=this.tributeDataPoint.isActive,e.tribute.isFilled=this.tributeDataPoint.isFilled}))}changeTributeName(e){this.checkoutState.tribute.setTributeeName(e),this.checkoutService.syncUpdateCheckoutState(),this.produceViewState((e=>{e.tribute.name=this.tributeDataPoint.tributeeName,e.tribute.isFilled=this.tributeDataPoint.isFilled}))}changeGoal(e){this.checkoutState.designation.setGoal(e),this.produceViewState((e=>{e.designation.goalKey=this.designationDataPoint.goalKey,e.designation.goal=this.designationDataPoint.selectedGoal})),this.validateDesignation()}beforeLeave(e){return(0,c.sH)(this,void 0,void 0,(function*(){return!this.pending&&(this.pending=!0,this.produceViewState((e=>{e.processingState=Kr.PENDING})),this.validateAmount(),this.validateDesignation(),this.viewState.isAmountValid?this.viewState.designation.isValid?(this.checkoutService.updateSession(),this.hold()):(this.produceViewState((e=>{e.designationShakeKey+=1,e.processingState=Kr.IDLE})),this.pending=!1,!1):(this.produceViewState((e=>{e.processingState=Kr.IDLE})),this.pending=!1,!1))}))}getInitialViewState(){return{processingState:Kr.IDLE,locked:!1,amount:null,amountInUsd:0,amountInDefaultFiat:0,minAmount:lk.MIN_DONATION_AMOUNT_IN_USD,maxAmount:lk.MAX_DONATION_AMOUNT_IN_USD,isAmountValid:!0,currencyCode:"BTC",currencyName:this.currencyService.getName("BTC"),defaultFiatCurrency:"USD",frequency:W.ONCE,errors:{amount:{min:!1,max:!1,required:!1},payment:{status:!1},designation:{required:!1}},tribute:{name:"",isActive:!1,show:!1,labelType:D.dR.IN_HONOR_MEMORY,sharingEnabled:!1,isFilled:!1,inHonorOfMaxLength:FD.getInHonorOfMaxLength(),isOptional:!1,isTributeOriented:!1},designation:{show:!1,goalKey:null,goals:[],isEditable:!0,isValid:!0,shouldShowDesignation:!1,goal:null},currencies:[],enabledFlows:{money:this.checkoutService.checkoutConfiguration.enabledFlows.money},comment:{isEnabled:this.checkoutService.campaignConfig.showComment,content:"",prevContent:""},flowType:this.checkoutService.type,livemode:!0,isCryptoAccountConnected:!0,isDefaultAmount:!0,designationShakeKey:0}}get donationDataPoint(){return this.checkoutState.donation.dataPoint}get commentDataPoint(){return this.checkoutState.comment.dataPoint}get tributeDataPoint(){return this.checkoutState.tribute.dataPoint}get designationDataPoint(){return this.checkoutState.designation.dataPoint}hold(){return(0,c.sH)(this,void 0,void 0,(function*(){const e=yield this.checkoutService.hold();return this.pending=!1,!ue.isFailure(e)||(this.handleHoldError(e),!1)}))}handleHoldError(e){ue.isSuccess(e)||this.produceViewState((e=>{e.errors.payment.status=!0,e.errors.payment.title=this.intl.translate("common.errorOccurredText"),e.errors.payment.message="",e.processingState=Kr.ERROR}))}getGoalRepeat(e){return e===W.ONCE?ui.ONE_TIME:ui.RECURRING}}lk.MIN_DONATION_AMOUNT_IN_USD=100,lk.MAX_DONATION_AMOUNT_IN_USD=1e8;class uk extends O_{constructor(e){super(e)}beforeEnter(){return(0,c.sH)(this,void 0,void 0,(function*(){const e=this.checkoutState.cryptoWallet.dataPoint.address;if(!e)throw new Error("cryptoAddress was not set");this.produceViewState((t=>{var n;t.formattedAmount=this.intl.formatCurrency(null!==(n=this.donationDataPoint.total)&&void 0!==n?n:0,{display:"trimzeroes",currency:this.donationDataPoint.currency,withoutPrefix:!0,withoutSuffix:!0}),t.currencyCode=this.donationDataPoint.currency,t.walletAddress=e,t.networkName=this.donationDataPoint.currencyNetworkData.networkName,t.protocol=this.donationDataPoint.currencyNetworkData.protocol})),this.leaveOnSuccessfulPayment()}))}getInitialViewState(){return{locked:!1,formattedAmount:"0",walletAddress:"",currencyCode:"",networkName:"",protocol:""}}get donationDataPoint(){return this.checkoutState.donation.dataPoint}leaveOnSuccessfulPayment(){const e=setInterval((()=>{this.checkoutService.isPaymentCompleted&&(clearInterval(e),this.leave())}),5e3)}}const dk={[yl.CRYPTO_CURRENCY]:class extends lk{},[yl.CRYPTO_WALLET]:class extends uk{},[oc.COMMENT]:class extends x_{},[oc.PRIVACY]:class extends q_{},[oc.THANK_YOU]:class extends ck{},[oc.REMIND_ME]:class extends V_{},[oc.MAILING_ADDRESS]:class extends M_{},[oc.MANDATORY_QUESTIONS]:class extends L_{},[oc.QUESTIONS]:class extends H_{},[oc.BLOCKED]:class extends I_{}};class hk{static isCryptoCurrencyScreenController(e,t){return t===yl.CRYPTO_CURRENCY}static isCryptoWalletScreenController(e,t){return t===yl.CRYPTO_WALLET}static isThankYouScreenController(e,t){return t===oc.THANK_YOU}static isMailingAddressScreenController(e,t){return t===oc.MAILING_ADDRESS}static isBlockedScreenController(e,t){return t===oc.BLOCKED}constructor(e,t,n,i,s,a,o,r){this.checkoutService=e,this.checkoutState=t,this.intl=n,this.debug=i,this.currencyService=s,this.subscriptionPeriodLabelsService=a,this.mailingAddressCustomization=o,this.experiments=r}create(e,t){const n=dk[e],i={name:e,flow:t,checkoutService:this.checkoutService,checkoutState:this.checkoutState,debug:this.debug,intl:this.intl,subscriptionPeriodLabelsService:this.subscriptionPeriodLabelsService,currencyService:this.currencyService,experiments:this.experiments};return hk.isCryptoCurrencyScreenController(n,e)||hk.isCryptoWalletScreenController(n,e)?new n(Object.assign({},i)):hk.isThankYouScreenController(n,e)?new n(this.redirectApi,this.sharingApi,i):hk.isMailingAddressScreenController(n,e)?new n(this.countriesService,this.mailingAddressCustomization,i):(hk.isBlockedScreenController(n,e),new n(i))}get redirectApi(){return this.checkoutService.redirectApi}get sharingApi(){return this._sharingApi||(this._sharingApi=__({checkoutType:this.checkoutService.checkoutConfiguration.checkoutType,isShowcase:this.checkoutService.checkoutConfiguration.infrastructureParams.showcase,campaignConfig:this.checkoutService.campaignConfig})),this._sharingApi}get countriesService(){return this._countriesService||(this._countriesService=(0,$N.g)({intl:this.intl,excludePalestineFromCountriesList:this.checkoutService.checkoutConfiguration.featureConfig.excludePalestineFromCountriesList})),this._countriesService}}class mk{constructor(e){this.options=e,this._screensHistoryForRestore=[]}getScreensHistoryForRestore(){return this._screensHistoryForRestore}setScreensHistoryForRestore(e){this._screensHistoryForRestore=e}getCustomExternalParamsScreen(){var e;const{checkoutConfiguration:t,isValidScreen:n}=this.options,i=null===(e=t.external.flow)||void 0===e?void 0:e.screen;return void 0!==i&&n(i)?i:void 0}getInitialScreenFromHistory(){const e=this.getScreensHistoryForRestore();if(0===e.length)return null;const t=e[e.length-1];return this.options.isValidScreen(t)?t:null}}class pk extends mk{getInitialScreen(){return(0,c.sH)(this,void 0,void 0,(function*(){if(this.isCompanyBlocked())return oc.BLOCKED;const e=this.getCustomExternalParamsScreen();return void 0!==e?e:yl.CRYPTO_CURRENCY}))}isCompanyBlocked(){return Boolean(this.options.checkoutConfiguration.company.blockedAt)}}const gk=yl.CRYPTO_CURRENCY;function yk(e){return function(t){return e.some((e=>e===t))}}const fk=yk([yl.CRYPTO_CURRENCY,yl.CRYPTO_WALLET,oc.COMMENT,oc.PRIVACY,oc.THANK_YOU,oc.MAILING_ADDRESS,oc.MANDATORY_QUESTIONS,oc.QUESTIONS,oc.BLOCKED]);var Ek;!function(e){e.FUNDRAISER="fundraiser",e.CAMPAIGN="campaign"}(Ek||(Ek={}));const Sk=[ve.DONATE,ve.DOUBLE,ve.GIFT_AID,ve.PAYMENT_OPTIONS,ve.UK_BACS,ve.UPSELL,ve.COMMUNICATION_CONSENT,oc.COMMENT,oc.MAILING_ADDRESS,oc.PRIVACY,oc.THANK_YOU,oc.REMIND_ME,yl.CRYPTO_CURRENCY,ve.FAST_TRACK_PAYMENT_OPTIONS];class vk{format(e,t,n,i,s){return function(e,t,n,i,s){if(a=e,!Sk.some((e=>e===a)))return{};var a;switch(e){case ve.DONATE:return function(e,t,n,i){var s,a,o,r;const c=i.getAskPageConfig(),l=[e.leftButtonFrequency,e.rightButtonFrequency];return e.donation.showAnnualTab&&l.push(W.ANNUAL),{isFiatEnabled:!0,isCryptoEnabled:e.enabledFlows.crypto,frequency:{value:e.donation.frequency,options:l,editable:e.donation.canModifyFrequency,isEndDateActive:e.donation.showDonationEndDate?e.donation.isDonationEndDateActive:null},amountOptions:{selected:e.donation.amountOptions.includes(null!==(s=e.donation.amount)&&void 0!==s?s:0),values:e.donation.amountOptions,shown:e.donation.canModifyAmount&&!e.donation.hintOptions},amount:{filled:!!e.donation.amount,value:null!==(a=e.donation.amount)&&void 0!==a?a:0,editable:e.donation.canModifyAmount,hasExternalAmount:i.hasExternalAmount},currency:{value:e.donation.currency,editable:e.donation.canSelectCurrency},tribute:{filled:e.tribute.isFilled,type:e.tribute.show?e.tribute.labelType:null,shown:e.tribute.show},comment:{shown:e.comment.isEnabled,filled:!!e.comment.content},goal:{value:e.designation.goalKey,editable:e.designation.isEditable,shown:e.designation.show},askPage:{shown:c.show},fundraisingPage:{shown:Boolean((null===(o=i.fundraisingPage)||void 0===o?void 0:o.key)&&n.askPageActiveTab===Yr.FUNDRAISER),isTabsShown:c.showTabs,fundraiserImageType:c.fundraiserImage?Ek.FUNDRAISER:Ek.CAMPAIGN},hint:t.donation.currentHint&&{amount:t.donation.currentHint.amount,description:t.donation.currentHint.description,amountUsd:t.donation.currentHint.amountUsd}||null,hintOptions:(null===(r=t.donation.hintOptions)||void 0===r?void 0:r.map((e=>({amount:e.amount,description:e.description,amountUsd:e.amountUsd,default:e.default}))))||null,hintVariantName:t.donation.hintVariantName||null,aiEnabled:i.campaign.config.enableAI,goalMeter:t.goalMeter,annualCheckbox:e.donation.showAnnualCheckbox?{shown:e.donation.showAnnualCheckbox,checked:e.donation.annualCheckboxChecked}:void 0}}(t,n,i,s);case ve.UPSELL:return function(e){var t,n,i,s;return{amount:{value:e.upsell.fromAmount,valueInUsd:e.upsell.fromAmountInUSD},currency:{value:e.currency},smallAmount:{shown:null!==e.lowAmount,value:null!==(t=e.lowAmount)&&void 0!==t?t:0,valueInUsd:null!==(n=e.lowAmountInUSD)&&void 0!==n?n:0},bigAmount:{value:null!==(i=e.highAmount)&&void 0!==i?i:0,valueInUsd:null!==(s=e.highAmountInUSD)&&void 0!==s?s:0,frequency:e.targetFrequency}}}(t);case ve.PAYMENT_OPTIONS:return function(e,t,n){var i;const s=e.availableOptions.filter((t=>e.buttonOptions[t].visible)),a=n.getAskPageConfig();return{coverFees:{checked:e.isFeeCovered,fees:e.processingFee,total:e.total,currency:e.currency},frequency:e.frequency,paymentMethods:s,paymentOptions:{visible:e.displayedPaymentOptions,hidden:e.hiddenPaymentOptions},askPage:{shown:a.show},fundraisingPage:{shown:Boolean((null===(i=n.fundraisingPage)||void 0===i?void 0:i.key)&&t.askPageActiveTab===Yr.FUNDRAISER),isTabsShown:a.showTabs,fundraiserImageType:a.fundraiserImage?Ek.FUNDRAISER:Ek.CAMPAIGN},card:{number:{filled:e.cardFilledFields[_y.CARD_NUMBER]},expiry:{filled:e.cardFilledFields[_y.CARD_EXPIRY]},cvc:{filled:e.cardFilledFields[_y.CARD_CVC]}}}}(t,i,s);case ve.GIFT_AID:return{shown:!0};case ve.UK_BACS:return function(e){return{accountNumber:{filled:!!e.accountNumber},sortCode:{filled:!!e.sortCode}}}(t);case ve.DOUBLE:return function(e){return{upsell:{currency:e.currency,currentAmount:e.total,matchingFromAmount:e.minimumMatchedAmount,matchingPromisedAmount:e.matchingPromisedAmount,matchingRatio:e.matchingRatio,proposedAmount:e.proposedAmount,proposedAmountBeforeFeeCovered:e.proposedAmountBeforeFeeCovered,show:e.showDTDUpsellExperiment&&e.showDTDUpsell},employer:{filled:!!e.employer.name,filledFromList:e.companies.some((t=>{let{company_name:n}=t;return n===e.employer.name}))}}}(t);case oc.COMMENT:return function(e){return{comment:{filled:!!e.comment}}}(t);case oc.PRIVACY:return function(e,t,n){var i;const s=n.getAskPageConfig(),a=e.availableFastTrackPaymentOptions.filter((t=>e.fastTrackButtonOptions[t].visible)),o={firstName:{filled:!!e.firstName},lastName:{filled:!!e.lastName},email:{filled:!!e.email,validated:!1,valid:null},phoneNumber:{shown:e.showPhone,required:e.phoneRequired,filled:!!e.phone},anonymous:{shown:e.showAnonymous,filled:e.anonymousChecked},onBehalfOf:{shown:e.onBehalfOf.isEnabled,filled:!!e.onBehalfOf.companyName},terms:{shown:e.termsAndConditions.isEnabled,checked:e.termsAndConditions.isAccepted},generalConsent:{shown:e.generalConsent.isEnabled,checked:e.generalConsent.isEnabled&&e.generalConsent.isAccepted},askPage:{shown:s.show},fundraisingPage:{shown:Boolean((null===(i=n.fundraisingPage)||void 0===i?void 0:i.key)&&t.askPageActiveTab===Yr.FUNDRAISER),isTabsShown:s.showTabs,fundraiserImageType:s.fundraiserImage?Ek.FUNDRAISER:Ek.CAMPAIGN}};return a.length>0&&(o.paymentMethods=a),o}(t,i,s);case oc.MAILING_ADDRESS:return function(e){return{mailingAddressRequired:e.isRequired,city:{filled:!!e.city},country:{filled:!!e.countryCode,value:e.countryCode},line1:{filled:!!e.line1},line2:{filled:!!e.line2},postal:{filled:!!e.postal},region:{filled:!!e.region,value:e.region}}}(t);case oc.THANK_YOU:return function(e){return{amount:{value:e.total},currency:{value:e.currency},email:{shown:e.sharing.showEmail},facebook:{shown:e.sharing.showFacebook},linkedin:{shown:e.sharing.showLinkedin},twitter:{shown:e.sharing.showTwitter},makeAnotherDonation:{shown:e.tribute.makeAnotherDonation},completeDedication:{shown:e.tribute.completeDedication},pdu:{shown:e.postDonationUpsell.shown,amount:e.postDonationUpsell.amount,amountInUSD:e.postDonationUpsell.amountInUSD,currency:e.currency,minAmount:e.postDonationUpsell.recurringMinAmount,period:e.postDonationUpsell.period,total:e.total}}}(t);case oc.REMIND_ME:return function(e){return{email:{filled:!!e.email.value},terms:{shown:e.isTermsAndConditionsEnabled,checked:e.termsAndConditions.isAccepted}}}(t);case yl.CRYPTO_CURRENCY:return function(e,t,n){var i;return{isFiatEnabled:e.enabledFlows.money,isCryptoEnabled:!0,tribute:{filled:e.tribute.isFilled,type:e.tribute.show?e.tribute.labelType:null,shown:e.tribute.show},comment:{shown:e.comment.isEnabled,filled:!!e.comment.content},goal:{value:e.designation.goalKey,editable:e.designation.isEditable,shown:e.designation.show},askPage:{shown:n.getAskPageConfig().show},fundraisingPage:{shown:Boolean((null===(i=n.fundraisingPage)||void 0===i?void 0:i.key)&&t.askPageActiveTab===Yr.FUNDRAISER)},cryptocurrency:e.currencyCode}}(t,i,s);case ve.COMMUNICATION_CONSENT:return(e=>{const t=t=>{const n=e.channels.find((e=>e.type===t));return{shown:Boolean(n),checked:!!n&&n.isAccepted}};return{channels:{email:t(D.ax.EMAIL),sms:t(D.ax.SMS),phoneCalls:t(D.ax.PHONE_CALLS),postalMail:t(D.ax.POSTAL_MAIL),socialMedia:t(D.ax.SOCIAL_MEDIA)}}})(t);case ve.FAST_TRACK_PAYMENT_OPTIONS:return function(e,t){const n=t.getAskPageConfig(),i=e.availableOptions.filter((t=>e.buttonOptions[t].visible));return{coverFees:{checked:e.isFeeCovered,fees:e.processingFee,total:e.total,currency:e.currency},paymentMethods:i,frequency:e.frequency,onBehalfOf:{shown:e.onBehalfOf.isEnabled,filled:!!e.onBehalfOf.companyName},askPage:{shown:n.show},anonymous:{shown:e.showAnonymous,filled:e.anonymousChecked},generalConsent:{shown:e.generalConsent.isEnabled,checked:e.generalConsent.isEnabled&&e.generalConsent.isAccepted},terms:{shown:e.termsAndConditions.isEnabled,checked:e.termsAndConditions.isAccepted}}}(t,s);default:throw new le.HP(e,`Unknown screen name "${e}"`)}}(e,t,n,i,s)}}Error,Error;class Ak extends Error{constructor(){super("Intent secret is not provided")}}Error;class Ck extends Error{constructor(){super("Could not retrieve iDEAL payment intent")}}Error;class Pk{static handleError(e){return"validation_error"===e.type?ue.fail({}):ue.fail({message:e.message})}constructor(e,t,n,i,s,a,o){this.stripe=e,this.intl=t,this.sentry=n,this.paymentAPI=i,this.donorName=s,this.donorEmail=a,this.setPaymentMethod=o,this.name=D._h.ACSS,this.intentSecret=null,this.params=null}initiateFlow(e){return(0,c.sH)(this,void 0,void 0,(function*(){return this.params=e,!0}))}hold(){return(0,c.sH)(this,void 0,void 0,(function*(){const e=yield this.paymentAPI.hold({clientPaymentMethod:D._h.ACSS});if(ue.isFailure(e))return e;const{intentSecret:t}=e.successResult;if(!t)throw new Ak;return this.intentSecret=t,ue.success(void 0)}))}startFlow(){return(0,c.sH)(this,void 0,void 0,(function*(){var e,t,n,i,s;if(this.setPaymentMethod(D._h.ACSS),yield this.hold(),!this.intentSecret)return ue.fail({});if((null===(e=(yield this.stripe.retrieveSetupIntent(this.intentSecret)).setupIntent)||void 0===e?void 0:e.status)===iT.Zq.SUCCEEDED)return ue.success(void 0);const{firstName:a,lastName:o}=this.donorName.getDto(),{email:r}=this.donorEmail.getDto();let c;try{null===(n=null===(t=this.params)||void 0===t?void 0:t.onPopupOpen)||void 0===n||n.call(t),c=yield this.stripe.confirmAcssDebitSetup(this.intentSecret,{payment_method:{billing_details:{name:PC([a,o]),email:r}}},{skipMandate:!1})}catch(l){return this.sentry.captureException(l),ue.fail({message:this.commonErrorText})}finally{null===(s=null===(i=this.params)||void 0===i?void 0:i.onPopupClose)||void 0===s||s.call(i)}const l=c.error;return l?Pk.handleError(l):ue.success(void 0)}))}pay(){return(0,c.sH)(this,void 0,void 0,(function*(){const e=yield this.paymentAPI.pay();return ue.isSuccess(e)?e:ue.fail({shouldLeave:!1,message:e.failureResult.message})}))}get commonErrorText(){return this.intl.translate("common.errorOccurredText")}}var Nk;!function(e){e.PAYMENT_METHOD_MICRODEPOSIT_VERIFICATION_DESCRIPTOR_CODE_MISMATCH="payment_method_microdeposit_verification_descriptor_code_mismatch",e.PAYMENT_METHOD_MICRODEPOSIT_VERIFICATION_ATTEMPTS_EXCEEDED="payment_method_microdeposit_verification_attempts_exceeded",e.BANK_ACCOUNT_UNUSABLE="bank_account_unusable",e.ACCOUNT_NUMBER_INVALID="account_number_invalid",e.PAYMENT_INTENT_AUTHENTICATION_FAILURE="payment_intent_authentication_failure"}(Nk||(Nk={}));const bk=["INR","USD","EUR","GBP","SGD","CAD","CHF","SEK","AED","JPY","NOK","MYR","HKD"];class Dk{static handleCardError(e,t,n){return{message:t?e.translate("creditCard.error.title"):n,additionalMessage:t?e.translate("creditCard.error.message"):void 0}}static handle3DsAuthResult(e){return e?e.code===Nk.PAYMENT_INTENT_AUTHENTICATION_FAILURE?ue.fail({message:e.message}):ue.fail({}):ue.success({})}constructor(e,t){this.stripe=e,this.paymentAPI=t}validateStripePaymentMethod(e,t,n){var i;if((null===(i=null==e?void 0:e.card)||void 0===i?void 0:i.country)!==D.tg.INDIA)return ue.success({});const s=this.validateIndianCard(t,n);return ue.isFailure(s)?s:ue.success({})}perform(e){return(0,c.sH)(this,void 0,void 0,(function*(){const t=yield this.paymentAPI.pay({paymentMethod:e});if(ue.isSuccess(t))return t;const n=t.failureResult.errors,i=null==n?void 0:n.customCode,s=null==n?void 0:n.intentSecret;return n?i&&s&&"requires_action"===n.customCode?this.initiate3DS(n.intentSecret,e):ue.fail({}):ue.fail({hasBaseErrorMessage:!!t.failureResult.message})}))}validateIndianCard(e,t){return e.getFrequency()===W.ONCE?ue.success({}):e.getFrequency()===W.DAILY&&this.isIndianCardRestrictedRecurringCurrency(e.getCurrency())?ue.fail({shouldLeave:!1,title:t.translate("creditCard.error.indianCardError.title"),message:t.translate("creditCard.error.indianCardError.notValidFrequencyAndCurrency",{currency:e.getCurrency()})}):e.getFrequency()===W.DAILY?ue.fail({shouldLeave:!1,title:t.translate("creditCard.error.indianCardError.title"),message:t.translate("creditCard.error.indianCardError.notValidFrequency")}):this.isIndianCardRestrictedRecurringCurrency(e.getCurrency())?ue.fail({shouldLeave:!1,title:t.translate("creditCard.error.indianCardError.title"),message:t.translate("creditCard.error.indianCardError.notValidCurrency",{currency:e.getCurrency()})}):ue.success({})}isIndianCardRestrictedRecurringCurrency(e){return!bk.includes(e)}initiate3DS(e,t){return(0,c.sH)(this,void 0,void 0,(function*(){const n=yield this.stripe.handleCardAction(e),i=Dk.handle3DsAuthResult(n.error);if(ue.isFailure(i))return i;const s=yield this.paymentAPI.pay({paymentMethod:t});return ue.isFailure(s)?ue.fail({}):s}))}}const Tk="Payment cancelled";class _k{constructor(e){this.params=e}init(){return this.makePaymentRequest().then((e=>{let{canMakePaymentResult:t}=e;return!!(null==t?void 0:t.applePay)}))}create(e,t){return this.makePaymentRequest(t).then((t=>{let{paymentRequest:n}=t;const i=new Promise(((e,t)=>{n.once("token",(t=>{t.complete("success"),e({token:t.token,payerName:t.payerName,payerEmail:t.payerEmail,payerPhone:t.payerPhone,shippingAddress:t.shippingAddress})})).once("cancel",(()=>{t(Tk)}))})),{total:s,displayItems:a}=this.params.request;return n.update({total:{label:s.label,amount:e.amount},displayItems:a,currency:e.currency}),n.show(),i.finally((()=>{n.off("token").off("cancel")}))})).then((e=>({stripeVerifier:e})))}makePaymentRequest(e){const t=this.params.stripe();if(!t)throw new Error("Stripe is not provided");return t.then((t=>{const n=Object.assign(Object.assign({},this.params.request),{requestPayerEmail:!0,requestPayerName:!0,wallets:["applePay"]});return(null==e?void 0:e.isFastTrackExperimentEnabled())&&(e.isMailingAddressRequired&&(n.requestShipping=!0,n.shippingOptions=[{id:"shipping",label:"",detail:"",amount:0}]),e.isPhoneNumberRequired&&(n.requestPayerPhone=!0)),t.paymentRequest(n)})).then((e=>new Promise(((t,n)=>{e.canMakePayment().then((n=>{t({canMakePaymentResult:n,paymentRequest:e})})).catch((e=>{n(e)}))}))))}}class kk{constructor(e,t,n,i,s,a,o,r,c,l,u,d,h,m,p,g,y,f,E,S,v){this.config=e,this.applePayStripeLoadingPromise=t,this.sentry=n,this.intl=i,this.paymentAPI=s,this.donation=a,this.setPaymentMethod=o,this.setDonorFullNameIfEmpty=r,this.setDonorEmailIfEmpty=c,this.setCountryCodeIfEmptyAddress=l,this.setCityIfEmpty=u,this.setLine1IfEmpty=d,this.setLine2IfEmpty=h,this.setPostalIfEmpty=m,this.setRegionIfEmpty=p,this.isFastTrackExperimentEnabled=g,this.isMailingAddressRequired=y,this.isPhoneNumberRequired=f,this.setDonorPhoneIfEmpty=E,this.setPhoneCleanNumber=S,this.setPhoneCountryCodeIfEmptyPhone=v,this.name=D._h.APPLE_PAY,this.cardToken=null,this.applePayPaymentMethodService=new _k({request:e,stripe:this.applePayStripeLoadingPromise})}checkAvailability(){return(0,c.sH)(this,void 0,void 0,(function*(){try{return yield this.applePayPaymentMethodService.init()}catch(e){return this.sentry.captureException(e),!1}}))}initiateFlow(){return(0,c.sH)(this,void 0,void 0,(function*(){return!0}))}startFlow(){return(0,c.sH)(this,void 0,void 0,(function*(){if(this.setPaymentMethod(D._h.APPLE_PAY),this.cardToken=yield this.createToken(),!this.cardToken)return ue.fail({});const e=yield this.hold();return ue.isFailure(e)?ue.fail({message:this.intl.translate("common.errorOccurredText")}):ue.success(void 0)}))}hold(){return(0,c.sH)(this,void 0,void 0,(function*(){try{const e=yield this.paymentAPI.hold({clientPaymentMethod:D._h.APPLE_PAY});if(ue.isFailure(e))return e}catch(e){return ue.fail({shouldLeave:!1})}return ue.success(void 0)}))}pay(){return(0,c.sH)(this,void 0,void 0,(function*(){if(this.cardToken||(this.cardToken=yield this.createToken()),!this.cardToken)return ue.fail({shouldLeave:!1});const e=yield this.createStripePaymentMethod(this.cardToken);if(ue.isFailure(e))return this.cardToken=null,ue.fail({shouldLeave:!1,message:e.failureResult.message});const t=yield this.initiatePayment(e.successResult);if(this.cardToken=null,ue.isSuccess(t))return t;const{message:n,additionalMessage:i}=Dk.handleCardError(this.intl,t.failureResult.hasBaseErrorMessage,t.failureResult.message);return ue.fail({shouldLeave:!1,message:n,additionalMessage:i})}))}initiatePayment(e){return(0,c.sH)(this,void 0,void 0,(function*(){const t=yield this.applePayStripeLoadingPromise();if(!t)throw new Error("Stripe is not provided");return new Dk(t,this.paymentAPI).perform(e)}))}createStripePaymentMethod(e){return(0,c.sH)(this,void 0,void 0,(function*(){const t=yield this.applePayStripeLoadingPromise();if(!t)throw new Error("Stripe is not provided");let n;try{n=yield t.createPaymentMethod({type:D.qs.CARD,card:{token:e}})}catch(e){return this.sentry.captureException(e),ue.fail({})}return n.error?ue.fail({message:n.error.message}):n.paymentMethod?ue.success(n.paymentMethod):ue.fail({})}))}createToken(){return(0,c.sH)(this,void 0,void 0,(function*(){var e,t;let n;try{n=yield this.applePayPaymentMethodService.create({amount:this.donation.getTotal(),currency:this.donation.getCurrency().toLowerCase()},{isFastTrackExperimentEnabled:this.isFastTrackExperimentEnabled,isMailingAddressRequired:this.isMailingAddressRequired,isPhoneNumberRequired:this.isPhoneNumberRequired}),n.stripeVerifier&&this.setDonorInfo(n.stripeVerifier)}catch(e){return e!==Tk&&this.sentry.captureException(e),null}return(null===(t=null===(e=n.stripeVerifier)||void 0===e?void 0:e.token)||void 0===t?void 0:t.id)||null}))}setDonorInfo(e){this.setPrivacy(e),this.setDonorMailingAddress(e)}setPrivacy(e){var t;const{payerEmail:n,payerName:i,payerPhone:s,shippingAddress:a}=e;n&&this.setDonorEmailIfEmpty(n);const o=i||(null===(t=e.token.card)||void 0===t?void 0:t.name);o&&this.setDonorFullNameIfEmpty(o),(null==a?void 0:a.country)&&this.setPhoneCountryCodeIfEmptyPhone(a.country),s&&(this.setDonorPhoneIfEmpty(s),this.setPhoneCleanNumber(s))}setDonorMailingAddress(e){var t,n;const{shippingAddress:i}=e;if(!i)return;const s=i.country,a=null===(t=i.addressLine)||void 0===t?void 0:t[0],o=null===(n=i.addressLine)||void 0===n?void 0:n[1],r=i.postalCode,c=i.city,l=i.region;s&&this.setCountryCodeIfEmptyAddress(s),a&&this.setLine1IfEmpty(a),o&&this.setLine2IfEmpty(o),r&&this.setPostalIfEmpty(r),c&&this.setCityIfEmpty(c),l&&this.setRegionIfEmpty(l)}}Error,Error;class Ok extends Error{constructor(){super("AU BECS intent secret not found")}}class Ik extends Error{constructor(){super("AU BECS personal information required")}}class xk{constructor(e,t,n,i,s,a,o){this.stripe=e,this.stripeElements=t,this.donorName=n,this.donorEmail=i,this.sentry=s,this.paymentAPI=a,this.params=o,this.name=D._h.AU_BECS,this.intentSecret=null,this.completed=!1,this.elementReady=!1,this.hasElementError=!1,this.initiated=!1,this.onElementChange=e=>{this.completed=e.complete,this.hasElementError=!!e.error}}initiateFlow(e,t){return(0,c.sH)(this,void 0,void 0,(function*(){return this.initiated||(this.auBankAccountElement=this.createElement(),this.auBankAccountElement.once("ready",(()=>{this.elementReady=!0,(null==t?void 0:t.onAuBankAccountElementReady)&&t.onAuBankAccountElementReady()})),this.auBankAccountElement.on("change",this.onElementChange),this.auBankAccountElement.mount(e),this.initiated=!0),!0}))}startFlow(){return(0,c.sH)(this,void 0,void 0,(function*(){return this.elementReady?!this.completed&&!(yield this.validatePayment())||this.hasElementError?ue.fail({}):ue.success(void 0):ue.fail({})}))}hold(){return(0,c.sH)(this,void 0,void 0,(function*(){const e=yield this.paymentAPI.hold({clientPaymentMethod:D._h.AU_BECS});if(ue.isFailure(e))return e;const{intentSecret:t}=e.successResult;if(!t)throw new Ok;return this.intentSecret=t,ue.success(void 0)}))}pay(){return(0,c.sH)(this,void 0,void 0,(function*(){if(!this.intentSecret)throw new Ok;const{firstName:e,lastName:t}=this.donorName.getDto(),{email:n}=this.donorEmail.getDto();if(!n||!e||!t)throw new Ik;const i=yield this.retrieveSetupIntent(this.intentSecret);if(!i)return ue.fail({shouldLeave:!1});if(i.status===iT.Zq.SUCCEEDED)return this.requestPay();const s=yield this.confirmDebitSetup(this.intentSecret);return ue.isFailure(s)?ue.fail({shouldLeave:!1,message:s.failureResult.message}):s.successResult.status===iT.Zq.SUCCEEDED?this.requestPay():ue.fail({shouldLeave:!1})}))}destroy(){return(0,c.sH)(this,void 0,void 0,(function*(){var e;null===(e=this.auBankAccountElement)||void 0===e||e.destroy()}))}requestPay(){return(0,c.sH)(this,void 0,void 0,(function*(){const e=yield this.paymentAPI.pay();return ue.isSuccess(e)?e:ue.fail({shouldLeave:!1,message:e.failureResult.message})}))}confirmDebitSetup(e){return(0,c.sH)(this,void 0,void 0,(function*(){const t=this.getElement(),{firstName:n,lastName:i}=this.donorName.getDto(),{email:s}=this.donorEmail.getDto();let a;try{a=yield this.stripe.confirmAuBecsDebitSetup(e,{payment_method:{au_becs_debit:t,billing_details:{name:PC([n,i]),email:s}}})}catch(e){return this.sentry.captureException(e),ue.fail({shouldLeave:!1})}return a.error?"validation_error"===a.error.type||a.error.code===Nk.ACCOUNT_NUMBER_INVALID?ue.fail({shouldLeave:!1,message:a.error.message}):ue.fail({shouldLeave:!1}):ue.success(a.setupIntent)}))}retrieveSetupIntent(e){return(0,c.sH)(this,void 0,void 0,(function*(){let t;try{t=yield this.stripe.retrieveSetupIntent(e)}catch(e){return this.sentry.captureException(e),null}return t.error?null:t.setupIntent}))}validatePayment(){return(0,c.sH)(this,void 0,void 0,(function*(){const e=this.getElement();let t;try{t=yield this.stripe.createPaymentMethod({type:D.qs.AU_BECS,au_becs_debit:e,billing_details:{name:Mn,email:Ln}})}catch(e){return this.sentry.captureException(e),!1}return!!t.paymentMethod&&!t.error}))}getElement(){if(!this.auBankAccountElement)throw new Error("auBankAccountElement is not initialized");return this.auBankAccountElement}createElement(){return this.stripeElements.create("auBankAccount",{iconStyle:"default",disabled:!1,hideIcon:!1,style:this.params.stripe.elementStyles,classes:this.params.stripe.elementClasses})}}class wk extends Error{constructor(){super("Card element not found")}}class Rk{constructor(e,t,n,i,s,a,o,r,c){this.stripe=e,this.stripeElements=t,this.sentry=n,this.intl=i,this.failureHandler=s,this.paymentAPI=a,this.setPaymentMethodCountry=o,this.donation=r,this.params=c,this.name=D._h.CARD,this.elementsSource=null,this.elementsState=this.getElementsInitialState(),this.handleElementChange=(e,t)=>{this.elementsState[e].completed=t.complete,this.elementsState[e].hasError=!!t.error},this.handleElementReady=(e,t)=>{this.elementsState[e].ready=!0,t&&t(e)},this.cardPaymentInitiator=new Dk(this.stripe,this.paymentAPI)}initiateFlow(e){return(0,c.sH)(this,void 0,void 0,(function*(){var t,n,i;const{source:s,cardCvcContainer:a,cardExpiryContainer:o,cardNumberContainer:r,cardCvcOptions:c,cardNumberOptions:l,stripeElementStyleOverride:u,onCardElementReady:d}=e;if(this.elementsSource===s)return!0;this.elementsSource=s,this.elementsState=this.getElementsInitialState(),null===(t=this.stripeElements.getElement(_y.CARD_NUMBER))||void 0===t||t.destroy(),null===(n=this.stripeElements.getElement(_y.CARD_EXPIRY))||void 0===n||n.destroy(),null===(i=this.stripeElements.getElement(_y.CARD_CVC))||void 0===i||i.destroy();const h=this.stripeElements.create(_y.CARD_NUMBER,{iconStyle:"default",showIcon:void 0===(null==l?void 0:l.showIcon)||l.showIcon,style:void 0!==u?u:this.params.stripe.elementStyles,classes:this.params.stripe.elementClasses,placeholder:void 0!==(null==l?void 0:l.placeholder)?l.placeholder:this.intl.translate("creditCard.numberInput.label"),disableLink:!0}),m=this.stripeElements.create(_y.CARD_EXPIRY,{style:void 0!==u?u:this.params.stripe.elementStyles,classes:this.params.stripe.elementClasses}),p=this.stripeElements.create(_y.CARD_CVC,{style:void 0!==u?u:this.params.stripe.elementStyles,classes:this.params.stripe.elementClasses,placeholder:void 0!==(null==c?void 0:c.placeholder)?c.placeholder:void 0});return h.on("change",this.handleElementChange.bind(this,_y.CARD_NUMBER)),m.on("change",this.handleElementChange.bind(this,_y.CARD_EXPIRY)),p.on("change",this.handleElementChange.bind(this,_y.CARD_CVC)),h.once("ready",this.handleElementReady.bind(this,_y.CARD_NUMBER,d)),m.once("ready",this.handleElementReady.bind(this,_y.CARD_EXPIRY,d)),p.once("ready",this.handleElementReady.bind(this,_y.CARD_CVC,d)),h.mount(r),m.mount(o),p.mount(a),!0}))}startFlow(){return(0,c.sH)(this,void 0,void 0,(function*(){return this.elementsReady?!this.elementsCompleted||this.hasElementsError?(yield this.stripe.createToken(this.getCardNumberElement()),ue.fail({})):ue.success(void 0):ue.fail({})}))}hold(){return(0,c.sH)(this,void 0,void 0,(function*(){return this.paymentAPI.hold({clientPaymentMethod:D._h.CARD})}))}destroy(){return(0,c.sH)(this,void 0,void 0,(function*(){const e=this.stripeElements.getElement(_y.CARD_NUMBER),t=this.stripeElements.getElement(_y.CARD_EXPIRY),n=this.stripeElements.getElement(_y.CARD_CVC);null==e||e.destroy(),null==t||t.destroy(),null==n||n.destroy()}))}pay(){return(0,c.sH)(this,void 0,void 0,(function*(){const e=yield this.createStripePaymentMethod();if(ue.isSuccess(e)){const t=this.cardPaymentInitiator.validateStripePaymentMethod(e.successResult,this.donation,this.intl);if(ue.isFailure(t))return t}if(ue.isFailure(e))return this.failureHandler(),ue.fail({shouldLeave:!0,message:e.failureResult.message,code:e.failureResult.code,type:e.failureResult.type,declineCode:e.failureResult.declineCode});const t=yield this.initiatePayment(e.successResult);return ue.isFailure(t)?(this.failureHandler(),ue.fail({shouldLeave:!0,message:t.failureResult.message})):t}))}get elementsReady(){return Object.values(this.elementsState).every((e=>{let{ready:t}=e;return t}))}get elementsCompleted(){return Object.values(this.elementsState).every((e=>{let{completed:t}=e;return t}))}get hasElementsError(){return Object.values(this.elementsState).some((e=>{let{hasError:t}=e;return t}))}getCardNumberElement(){const e=this.stripeElements.getElement(_y.CARD_NUMBER);if(!e)throw new wk;return e}initiatePayment(e){return this.cardPaymentInitiator.perform(e)}createStripePaymentMethod(){return(0,c.sH)(this,void 0,void 0,(function*(){var e;const t=this.getCardNumberElement();let n;try{n=yield this.stripe.createPaymentMethod({type:D.qs.CARD,card:t})}catch(e){return this.sentry.captureException(e),ue.fail({})}return n.error?ue.fail({message:n.error.message,code:n.error.code,type:n.error.type,declineCode:n.error.decline_code}):n.paymentMethod?((null===(e=n.paymentMethod.card)||void 0===e?void 0:e.country)&&this.setPaymentMethodCountry(n.paymentMethod.card.country),ue.success(n.paymentMethod)):ue.fail({})}))}getElementsInitialState(){return{[_y.CARD_NUMBER]:{ready:!1,completed:!1,hasError:!1},[_y.CARD_EXPIRY]:{ready:!1,completed:!1,hasError:!1},[_y.CARD_CVC]:{ready:!1,completed:!1,hasError:!1}}}}class Mk extends Error{constructor(e){super(e.message||"Google Pay payment flow error"),this.meta=e,this.name="GooglePayPaymentFlowError"}}class Lk{constructor(e,t){this.googlePaySdkEnv=e,this.sentry=t}loadClient(){return(0,c.sH)(this,void 0,void 0,(function*(){var e;yield(0,Rn.k0)("https://pay.google.com/gp/p/js/pay.js",!1,window,{},!1,qn);const t=window.google;return(null===(e=null==t?void 0:t.payments)||void 0===e?void 0:e.api)?new t.payments.api.PaymentsClient({environment:this.googlePaySdkEnv}):null}))}}var Uk;!function(e){e.CANCELED="CANCELED"}(Uk||(Uk={}));class Fk{constructor(e,t,n,i,s,a,o,r,c,l,u,d,h,m,p,g,y,f,E,S,v,A,C,P,N){this.config=e,this.livemode=t,this.env=n,this.stripe=i,this.currencyService=s,this.donation=a,this.sentry=o,this.intl=r,this.paymentAPI=c,this.googlePayAPI=l,this.setPaymentMethod=u,this.setDonorFullNameIfEmpty=d,this.setDonorEmailIfEmpty=h,this.isFastTrackExperimentEnabled=m,this.isMailingAddressRequired=p,this.isPhoneNumberRequired=g,this.setDonorPhoneIfEmpty=y,this.setPhoneCleanNumber=f,this.setPhoneCountryCodeIfEmptyPhone=E,this.setCountryCodeIfEmptyAddress=S,this.setCityIfEmpty=v,this.setLine1IfEmpty=A,this.setLine2IfEmpty=C,this.setPostalIfEmpty=P,this.setRegionIfEmpty=N,this.name=D._h.GOOGLE_PAY,this.cardToken=null,this.googlePayJwt=null,this.client=null,this.googlePaySdkEnv="TEST",this.stripeLivemode="test",this.livemode&&this.env===D.hY.PRODUCTION&&(this.googlePaySdkEnv="PRODUCTION",this.stripeLivemode="live"),this.cardPaymentInitiator=new Dk(this.stripe,this.paymentAPI)}checkAvailability(){return(0,c.sH)(this,void 0,void 0,(function*(){try{if(!this.client)return!1;const e=this.makeReadyToPayRequest();return(yield this.client.isReadyToPay(e)).result}catch(e){return"DEVELOPER_ERROR"===e.statusCode&&this.sentry.captureException(new Error(e.statusMessage),{extra:e}),!1}}))}initiateFlow(){return(0,c.sH)(this,void 0,void 0,(function*(){try{this.googlePayJwt=yield this.getJwt()}catch(e){return!1}return this.client=yield this.loadClient(),!0}))}startFlow(){return(0,c.sH)(this,void 0,void 0,(function*(){if(this.setPaymentMethod(D._h.GOOGLE_PAY),this.cardToken=yield this.createToken(),!this.cardToken)return ue.fail({});const e=yield this.hold();return ue.isFailure(e)?ue.fail({message:this.intl.translate("common.errorOccurredText")}):ue.success(void 0)}))}pay(){return(0,c.sH)(this,void 0,void 0,(function*(){if(this.cardToken||(this.cardToken=yield this.createToken()),!this.cardToken)return ue.fail({shouldLeave:!1});const e=yield this.createStripePaymentMethod(this.cardToken);if(ue.isSuccess(e)){const t=this.cardPaymentInitiator.validateStripePaymentMethod(e.successResult,{getFrequency:()=>this.donation.getFrequency(),getCurrency:()=>this.donation.getCurrency()},this.intl);if(ue.isFailure(t))return t}if(ue.isFailure(e))return this.cardToken=null,ue.fail({shouldLeave:!1,message:e.failureResult.message});const t=yield this.initiatePayment(e.successResult);if(this.cardToken=null,ue.isSuccess(t))return t;const{message:n,additionalMessage:i}=Dk.handleCardError(this.intl,t.failureResult.hasBaseErrorMessage,t.failureResult.message);return ue.fail({shouldLeave:!1,message:n,additionalMessage:i})}))}hold(){return(0,c.sH)(this,void 0,void 0,(function*(){try{const e=yield this.paymentAPI.hold({clientPaymentMethod:D._h.GOOGLE_PAY});if(ue.isFailure(e))return e}catch(e){return ue.fail({shouldLeave:!1})}return ue.success(void 0)}))}get merchantInfo(){if(!this.googlePayJwt)throw new Error("GPay token is required");return{merchantId:this.config.googlePayInfo.merchantId,merchantName:this.config.companyName,merchantOrigin:window.location.hostname,authJwt:this.googlePayJwt}}initiatePayment(e){return(0,c.sH)(this,void 0,void 0,(function*(){return new Dk(this.stripe,this.paymentAPI).perform(e)}))}createStripePaymentMethod(e){return(0,c.sH)(this,void 0,void 0,(function*(){let t;try{t=yield this.stripe.createPaymentMethod({type:D.qs.CARD,card:{token:e}})}catch(e){return this.sentry.captureException(e),ue.fail({})}return t.error?ue.fail({message:t.error.message}):t.paymentMethod?ue.success(t.paymentMethod):ue.fail({})}))}create(e){return(0,c.sH)(this,void 0,void 0,(function*(){var t,n,i,s,a,o,r,c;if(!this.client)throw new Error("GPay client not found");const l=this.makePaymentRequest(e),u=yield this.client.loadPaymentData(l);if(u.errorCode)throw new Error("GPay payment data is not loaded");return{token:JSON.parse(u.paymentMethodData.tokenizationData.token),email:u.email,name:null===(t=u.shippingAddress)||void 0===t?void 0:t.name,phone:null===(n=u.shippingAddress)||void 0===n?void 0:n.phoneNumber,countryCode:null===(i=u.shippingAddress)||void 0===i?void 0:i.countryCode,line1:null===(s=u.shippingAddress)||void 0===s?void 0:s.address1,line2:null===(a=u.shippingAddress)||void 0===a?void 0:a.address2,city:null===(o=u.shippingAddress)||void 0===o?void 0:o.locality,region:null===(r=u.shippingAddress)||void 0===r?void 0:r.administrativeArea,postal:null===(c=u.shippingAddress)||void 0===c?void 0:c.postalCode}}))}makePaymentRequest(e){const{amount:t,currency:n}=e,i={apiVersion:2,apiVersionMinor:0,emailRequired:!0,allowedPaymentMethods:[{type:"CARD",parameters:{allowedAuthMethods:this.config.googlePayInfo.allowedAuthMethods,allowedCardNetworks:this.config.googlePayInfo.allowedCardNetworks},tokenizationSpecification:{type:"PAYMENT_GATEWAY",parameters:{gateway:"stripe",gatewayMerchantId:this.merchantInfo.merchantId,"stripe:version":this.config.googlePayInfo.stripeAPIVersion,"stripe:publishableKey":this.config.stripePublicKey[this.stripeLivemode]+"/"+this.config.stripeAccount}}}],transactionInfo:{countryCode:this.config.countryCode,currencyCode:n.toUpperCase(),totalPriceStatus:"FINAL",totalPrice:this.currencyService.toFloatUnformattedStr(t,n.toUpperCase())},merchantInfo:this.merchantInfo};return this.isFastTrackExperimentEnabled()&&(this.isMailingAddressRequired||this.isPhoneNumberRequired)&&(i.shippingAddressRequired=!0,this.isPhoneNumberRequired&&(i.shippingAddressParameters={phoneNumberRequired:!0,allowedCountryCodes:[]})),i}makeReadyToPayRequest(){return{allowedPaymentMethods:[{type:"CARD",parameters:{allowedAuthMethods:this.config.googlePayInfo.allowedAuthMethods,allowedCardNetworks:this.config.googlePayInfo.allowedCardNetworks}}],apiVersion:2,apiVersionMinor:0}}getJwt(){return this.googlePayAPI.getToken(window.location.hostname)}loadClient(){return new Lk(this.googlePaySdkEnv,this.sentry).loadClient()}createToken(){return(0,c.sH)(this,void 0,void 0,(function*(){var e;let t;try{t=yield this.create({currency:this.donation.getCurrency(),amount:this.donation.getTotal()}),t.token&&this.setDonorInfo(t)}catch(e){const t=e&&"object"==typeof e?e:{},n={toString:t.toString(),stringify:JSON.stringify(t),message:t.message,name:t.name,code:t.code};return t.statusCode!==Uk.CANCELED&&this.sentry.captureException(new Mk(n),{extra:n}),null}return(null===(e=t.token)||void 0===e?void 0:e.id)||null}))}setDonorInfo(e){this.setPrivacy(e),this.setMailingAddress(e)}setPrivacy(e){var t;const{email:n,countryCode:i,phone:s,name:a,token:o}=e,r=a||(null===(t=o.card)||void 0===t?void 0:t.name);n&&this.setDonorEmailIfEmpty(n),r&&this.setDonorFullNameIfEmpty(r),i&&this.setPhoneCountryCodeIfEmptyPhone(i),s&&(this.setDonorPhoneIfEmpty(s),this.setPhoneCleanNumber(s))}setMailingAddress(e){const{line1:t,line2:n,city:i,region:s,postal:a,countryCode:o}=e;o&&this.setCountryCodeIfEmptyAddress(o),t&&this.setLine1IfEmpty(t),n&&this.setLine2IfEmpty(n),a&&this.setPostalIfEmpty(a),i&&this.setCityIfEmpty(i),s&&this.setRegionIfEmpty(s)}}function jk(e,t){return(0,c.sH)(this,arguments,void 0,(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return function*(){try{return yield e()}catch(i){if(n>=t.retries)throw i;return yield new Promise((e=>setTimeout(e,t.delay))),jk(e,t,++n)}}()}))}class Bk{constructor(e,t,n,i,s,a,o,r,c){this.sessionAPI=e,this.stripe=t,this.donorName=n,this.donorEmail=i,this.intl=s,this.sentry=a,this.paymentAPI=o,this.clientId=r,this.checkoutConfiguration=c,this.name=iT._h.IDEAL,this._isPaymentRestored=!1,this.intentSecret=null,this.paymentIntent=null}initiateFlow(){return(0,c.sH)(this,void 0,void 0,(function*(){return!0}))}startFlow(){return(0,c.sH)(this,void 0,void 0,(function*(){return ue.success(void 0)}))}hold(){return(0,c.sH)(this,void 0,void 0,(function*(){let e;try{if(e=yield this.paymentAPI.hold({clientPaymentMethod:iT._h.IDEAL,token:{initOnly:!1}}),ue.isFailure(e))return e}catch(e){return ue.fail({message:this.commonErrorText})}const{intentSecret:t}=e.successResult;if(!t)throw new Ak;return this.intentSecret=t,ue.success(void 0)}))}pay(){return(0,c.sH)(this,void 0,void 0,(function*(){if(this.checkoutConfiguration.isRestoredByWidgetSession&&!this._isPaymentRestored)return this.confirmAfterPayment();if(this.intentSecret){const e=yield this.retrievePaymentIntent(this.intentSecret);if((null==e?void 0:e.status)===iT.Zq.SUCCEEDED)return this.requestPay()}if(!this.intentSecret)throw new Ak;const e=yield this.confirmPaymentIntent(this.intentSecret);return ue.isFailure(e)?e:(this.paymentIntent=e.successResult,this.paymentIntent?this.requestPay():ue.fail({message:this.paymentErrorText}))}))}destroy(){return(0,c.sH)(this,void 0,void 0,(function*(){}))}isPaid(){return(0,c.sH)(this,void 0,void 0,(function*(){if(!this.paymentIntent)return!1;if(this.paymentIntent.status===iT.Zq.SUCCEEDED)return!0;this.assert(this.paymentIntent.client_secret);const e=yield this.retrievePaymentIntent(this.paymentIntent.client_secret);return(null==e?void 0:e.status)===iT.Zq.SUCCEEDED}))}isPaymentStarted(){return null!==this.paymentIntent}isPaymentRestored(){return this._isPaymentRestored}get commonErrorText(){return this.intl.translate("common.errorOccurredText")}get paymentErrorText(){return this.intl.translate("common.paymentNotAuthorizedError")}confirmAfterPayment(){return(0,c.sH)(this,void 0,void 0,(function*(){var e,t;if(this.intentSecret=null!==(t=null===(e=this.checkoutConfiguration.external.restore)||void 0===e?void 0:e.paymentIntentClientSecret)&&void 0!==t?t:null,!this.intentSecret)throw new Ak;return this.handleAction(this.intentSecret)}))}confirmPaymentIntent(e){return(0,c.sH)(this,void 0,void 0,(function*(){var t;const n=this.donorName.getDto(),i=this.donorEmail.getDto(),s={ideal:{},billing_details:{name:PC([n.firstName,n.lastName]),email:i.email}};try{const n=yield this.stripe.confirmIdealPayment(e,{payment_method:s,return_url:this.getReturnUrl()});return n.error?(null===(t=n.error.payment_intent)||void 0===t?void 0:t.status)===iT.Zq.SUCCEEDED?ue.success(n.error.payment_intent):ue.fail({message:n.error.message}):ue.success(n.paymentIntent)}catch(e){return ue.fail({message:e.message})}}))}getReturnUrl(){const e=this.sessionAPI.sessionToken,t=new URL(window.location.href);return t.searchParams.set("restoreToken",e),t.searchParams.set("clientId",this.clientId),t.toString()}handleAction(e){return(0,c.sH)(this,void 0,void 0,(function*(){var t;switch(this.paymentIntent=yield this.retrievePaymentIntent(e),this._isPaymentRestored=!0,null===(t=this.paymentIntent)||void 0===t?void 0:t.status){case iT.Zq.SUCCEEDED:return this.requestPay();case iT.Zq.REQUIRES_PAYMENT_METHOD:case iT.Zq.REQUIRES_ACTION:return ue.fail({message:this.paymentErrorText});default:return this.notifyAboutError(new Error("Unexpected payment intent status"),{paymentIntent:this.paymentIntent}),ue.fail({message:this.paymentErrorText})}}))}retrievePaymentIntent(e){return(0,c.sH)(this,void 0,void 0,(function*(){try{return yield this.retrievePaymentIntentWithRetry(e)}catch(e){return e instanceof Ck&&this.notifyAboutWarning(e,{stripeError:e.resultError}),null}}))}retrievePaymentIntentWithRetry(e){return(0,c.sH)(this,void 0,void 0,(function*(){return jk((()=>(0,c.sH)(this,void 0,void 0,(function*(){let t;try{t=yield this.stripe.retrievePaymentIntent(e)}catch(e){return this.sentry.captureException(e),null}if(t.error)throw new Ck;return t.paymentIntent?t.paymentIntent:null}))),{retries:2,delay:500})}))}requestPay(){return(0,c.sH)(this,void 0,void 0,(function*(){const e=yield this.paymentAPI.pay();return ue.isSuccess(e)?e:ue.fail({shouldLeave:!1,message:e.failureResult.message})}))}assert(e){const t=new Error(this.commonErrorText);if(!e)throw t}notifyAboutError(e,t){this.sentry.captureException(e,{extra:Object.assign(Object.assign({},t),{widgetSession:this.sessionAPI.sessionToken})})}notifyAboutWarning(e,t){this.sentry.captureException(e,{level:"warning",extra:Object.assign(Object.assign({},t),{widgetSession:this.sessionAPI.sessionToken})})}}var Gk=n(2138);class qk{static removeAuthorizePaymentHandler(e){e&&window.removeEventListener("message",e)}constructor(e,t,n,i,s,a,o,r){this.sessionAPI=e,this.stripe=t,this.env=n,this.donorName=i,this.donorEmail=s,this.intl=a,this.sentry=o,this.paymentAPI=r,this.name=iT._h.IDEAL,this.intentSecret=null,this.paymentIntent=null,this.popup=null,this.popupParams={},this.counter=0}initiateFlow(){return(0,c.sH)(this,void 0,void 0,(function*(){return!0}))}startFlow(){return(0,c.sH)(this,void 0,void 0,(function*(){return ue.success(void 0)}))}hold(){return(0,c.sH)(this,void 0,void 0,(function*(){let e;try{if(e=yield this.paymentAPI.hold({clientPaymentMethod:iT._h.IDEAL,token:{initOnly:!1}}),ue.isFailure(e))return e}catch(e){return ue.fail({message:this.commonErrorText})}const{intentSecret:t}=e.successResult;if(!t)throw new Ak;return this.intentSecret=t,ue.success(void 0)}))}pay(){return(0,c.sH)(this,void 0,void 0,(function*(){var e;if(this.intentSecret){const e=yield this.retrievePaymentIntent(this.intentSecret);if((null==e?void 0:e.status)===iT.Zq.SUCCEEDED)return this.closePopup(),this.requestPay()}if(!this.intentSecret)throw this.closePopup(),new Ak;const t=yield this.confirmPaymentIntent(this.intentSecret);if(ue.isFailure(t))return t;if(this.paymentIntent=t.successResult,!this.paymentIntent)return this.closePopup(),ue.fail({message:this.paymentErrorText});if(this.paymentIntent.status===iT.Zq.SUCCEEDED)return this.closePopup(),this.requestPay();const n=this.paymentIntent.next_action;return"redirect_to_url"===(null==n?void 0:n.type)&&(null===(e=n.redirect_to_url)||void 0===e?void 0:e.url)?this.handleAction(this.intentSecret,n.redirect_to_url.url):(this.closePopup(),this.requestPay())}))}openConfirmationWindow(e){var t;if(this.popup)return this.popup;(null===(t=this.paymentIntent)||void 0===t?void 0:t.status)!==iT.Zq.SUCCEEDED?(this.popupParams=e,this.popup=window.open(this.popupPreLoadingPage,"_blank"),this.assertPopup(this.popup)):e.onClose&&e.onClose()}focusConfirmationWindow(){this.popup&&(this.popup.blur(),this.popup.focus())}destroy(){return(0,c.sH)(this,void 0,void 0,(function*(){}))}isPaid(){return(0,c.sH)(this,void 0,void 0,(function*(){if(!this.paymentIntent)return!1;if(this.paymentIntent.status===iT.Zq.SUCCEEDED)return!0;this.assert(this.paymentIntent.client_secret);const e=yield this.retrievePaymentIntent(this.paymentIntent.client_secret);return(null==e?void 0:e.status)===iT.Zq.SUCCEEDED}))}isPaymentStarted(){return null!==this.paymentIntent}get commonErrorText(){return this.intl.translate("common.errorOccurredText")}get paymentErrorText(){return this.intl.translate("common.paymentNotAuthorizedError")}get popupPreLoadingPage(){switch(this.env){case Gk.h.PRODUCTION:return"https://checkout.fundraiseup.com/ideal";case Gk.h.STAGING:return"https://checkout.funstaging.com/ideal";case Gk.h.TESTING:return"http://checkout.fun.internal/ideal";default:return"https://checkout.localtest.me/ideal"}}confirmPaymentIntent(e){return(0,c.sH)(this,void 0,void 0,(function*(){var t;const n=this.donorName.getDto(),i=this.donorEmail.getDto(),s={ideal:{},billing_details:{name:PC([n.firstName,n.lastName]),email:i.email}};try{const n=yield this.stripe.confirmIdealPayment(e,{payment_method:s,return_url:this.popupPreLoadingPage},{handleActions:!1});return n.error?(null===(t=n.error.payment_intent)||void 0===t?void 0:t.status)===iT.Zq.SUCCEEDED?ue.success(n.error.payment_intent):ue.fail({message:n.error.message}):ue.success(n.paymentIntent)}catch(e){return ue.fail({message:e.message})}}))}handleAction(e,t){return(0,c.sH)(this,void 0,void 0,(function*(){var n;switch(yield this.authorizePayment(t),this.paymentIntent=yield this.retrievePaymentIntent(e),null===(n=this.paymentIntent)||void 0===n?void 0:n.status){case iT.Zq.SUCCEEDED:return this.requestPay();case iT.Zq.REQUIRES_PAYMENT_METHOD:{const t=yield this.confirmPaymentIntent(e);return ue.isSuccess(t)&&(this.paymentIntent=t.successResult),ue.fail({message:this.paymentErrorText})}case iT.Zq.REQUIRES_ACTION:return ue.fail({message:this.paymentErrorText});default:return this.notifyAboutError(new Error("Unexpected payment intent status"),{paymentIntent:this.paymentIntent}),this.closePopup(),ue.fail({message:this.paymentErrorText})}}))}retrievePaymentIntent(e){return(0,c.sH)(this,void 0,void 0,(function*(){try{return yield this.retrievePaymentIntentWithRetry(e)}catch(e){return e instanceof Ck&&this.notifyAboutWarning(e,{stripeError:e.resultError}),null}}))}retrievePaymentIntentWithRetry(e){return(0,c.sH)(this,void 0,void 0,(function*(){return jk((()=>(0,c.sH)(this,void 0,void 0,(function*(){let t;try{t=yield this.stripe.retrievePaymentIntent(e)}catch(e){return this.sentry.captureException(e),null}if(t.error)throw new Ck;return t.paymentIntent?t.paymentIntent:null}))),{retries:2,delay:500})}))}authorizePayment(e){return(0,c.sH)(this,void 0,void 0,(function*(){const t=this.popup;let n,i,s;return this.assertPopup(t),this.focusConfirmationWindow(),t.location=e,new Promise((e=>{s=this.authorizePaymentHandlerFn(e),n=setInterval((()=>{if(t.closed)return this.closePopup(),e()}),20),window.addEventListener("message",s),setTimeout((()=>{this.resetCounter(),i=setInterval((()=>this.waitWhileIntentWillUpdated(e,1e3,i)),1e3)}),5e3)})).then((()=>{clearInterval(n),clearInterval(i),qk.removeAuthorizePaymentHandler(s)}))}))}authorizePaymentHandlerFn(e){const t=new URL(this.popupPreLoadingPage).origin;return n=>{if(n.origin===t)return this.closePopup(),e()}}waitWhileIntentWillUpdated(e,t,n){return(0,c.sH)(this,void 0,void 0,(function*(){var i;this.assert(this.intentSecret);const s=Math.round(9e5/t);if(this.counter>=s&&n)return clearInterval(n),this.closePopup(),e();this.counter++;const a=yield this.retrievePaymentIntent(this.intentSecret);return a&&a.status!==(null===(i=this.paymentIntent)||void 0===i?void 0:i.status)?(this.closePopup(),e()):void 0}))}resetCounter(){this.counter=0}requestPay(){return(0,c.sH)(this,void 0,void 0,(function*(){const e=yield this.paymentAPI.pay();return ue.isSuccess(e)?e:ue.fail({shouldLeave:!1,message:e.failureResult.message})}))}closePopup(){this.popup&&(this.popup.close(),this.popupParams.onClose&&this.popupParams.onClose(),this.resetPopup())}resetPopup(){this.popup=null,this.popupParams={}}assertPopup(e){var t;const n=new Error(this.commonErrorText);if(!e)throw this.notifyAboutError(new Error("Can not create iDEAL popup"),{intent:null===(t=this.paymentIntent)||void 0===t?void 0:t.id}),n}assert(e){const t=new Error(this.commonErrorText);if(!e)throw t}notifyAboutError(e,t){this.sentry.captureException(e,{extra:Object.assign(Object.assign({},t),{widgetSession:this.sessionAPI.sessionToken})})}notifyAboutWarning(e,t){this.sentry.captureException(e,{level:"warning",extra:Object.assign(Object.assign({},t),{widgetSession:this.sessionAPI.sessionToken})})}}class Hk extends Error{constructor(){super("Paypal hold payload is invalid")}}const Vk=["Component closed","Detected container element removed from DOM"],Kk=["Window closed before response","Window closed for postrobot_method before ack"];class Yk{constructor(e,t,n,i){this.config=e,this.sentry=t,this.locale=n,this.iframeWindow=i,this.scriptParams=null,this.buttonParams=null,this.actions=null,this.rendered=!1,this.paypalButtons=null,this.scriptLoadingPromise=null}setCurrency(e,t){var n;const{paypalMerchantId:i,paypalClientId:s,subscriptionsEnabled:a}=this.config;if(!i){const e=new Error("Paypal merchant ID is not provided");throw this.sentry.captureException(e),e}const o={"client-id":s,"merchant-id":i,currency:this.getPaypalCurrency(e,t).toUpperCase(),"disable-funding":"venmo",locale:"automatic",intent:"capture",vault:"false"},r=wn(this.locale);return r&&(o.locale=r),a&&(o.intent="tokenize",o.vault="true"),o.currency!==(null===(n=this.scriptParams)||void 0===n?void 0:n.currency)&&(this.scriptLoadingPromise=null,this.destroy()),this.scriptParams=o,this}setButtonParams(e){let{onCreate:t,onApprove:n,onButtonClick:i,buttonColor:s,onCancel:a,onFail:o,onInit:r,validate:l}=e;return this.buttonParams={fundingSource:D._h.PAYPAL,style:{color:s,tagline:!1,shape:"rect",height:48,size:"responsive"},[this.paypalIdentifierMethod]:()=>t(this.clientPaymentMethod),onApprove:e=>(0,c.sH)(this,void 0,void 0,(function*(){const t=e[this.paypalIdentifierKey];if(!t)return this.handleEmptyTokenError(e);yield n(this.clientPaymentMethod,t)})),onInit:(e,t)=>{this.actions=t,null==r||r()},onClick:(e,t)=>(0,c.sH)(this,void 0,void 0,(function*(){var e;if(null==i||i(this.clientPaymentMethod),null!==(e=null==l?void 0:l())&&void 0!==e&&!e)return null==a||a(),t.reject()})),onError:e=>{const t=e.message;if(!t||!(t.includes("popup close")||t.includes("cross-domain")||t.includes("Window is closed")))throw e;o({message:"Window is closed"})},onCancel:()=>{null==a||a()}},this}disable(){return(0,c.sH)(this,void 0,void 0,(function*(){var e;try{yield null===(e=this.actions)||void 0===e?void 0:e.disable()}catch(e){if(Kk.includes(e.message))return;throw e}}))}enable(){return(0,c.sH)(this,void 0,void 0,(function*(){var e;try{yield null===(e=this.actions)||void 0===e?void 0:e.enable()}catch(e){if(Kk.includes(e.message))return;throw e}}))}loadPayPalScriptIfNeeded(){return(0,c.sH)(this,void 0,void 0,(function*(){if(!this.scriptParams)throw new Error("Call `setCurrency` before you mount");return this.scriptLoadingPromise||(this.scriptLoadingPromise=(0,Rn.k0)(`https://www.paypal.com/sdk/js?${oi(this.scriptParams)}`,!1,this.iframeWindow,{},!0,qn)),this.scriptLoadingPromise}))}mount(e){return(0,c.sH)(this,void 0,void 0,(function*(){var t;if(!this.buttonParams)throw new Error("Call `setHandlers` before you mount");if(e&&(null===(t=this.iframeWindow.paypal)||void 0===t?void 0:t.Buttons)){this.paypalButtons=this.iframeWindow.paypal.Buttons(this.buttonParams);try{yield this.paypalButtons.render(e),this.rendered=!0}catch(e){if(Vk.includes(null==e?void 0:e.message))return;throw e}}}))}destroy(){return(0,c.sH)(this,void 0,void 0,(function*(){this.rendered&&this.paypalButtons&&(yield this.paypalButtons.close(),this.rendered=!1,this.actions=null,this.paypalButtons=null)}))}get clientPaymentMethod(){return D._h.PAYPAL}get paypalIdentifierMethod(){return this.config.subscriptionsEnabled?"createBillingAgreement":"createOrder"}get paypalIdentifierKey(){return this.config.subscriptionsEnabled?"billingToken":"orderID"}getPaypalCurrency(e,t){const n=this.config.paypalCurrencies;return n.includes(e)?e:n.includes(t)?t:"USD"}handleEmptyTokenError(e){this.sentry.captureException(new Error(`Got an undefined token by paypalIdentifierKey: ${this.paypalIdentifierKey}`),{extra:{paypalIdentifierKey:this.paypalIdentifierKey,paypalData:e}})}}class zk{constructor(e,t,n,i,s,a,o,r,c,l,u,d,h,m,p,g,y,f,E,S,v,A,C){this.config=e,this.sentry=t,this.locale=n,this.iframeWindow=i,this.paypalAPI=s,this.paymentAPI=a,this.donation=o,this.updateSession=r,this.setPaymentMethod=c,this.setDonorFirstNameIfEmpty=l,this.setDonorLastNameIfEmpty=u,this.setDonorEmailIfEmpty=d,this.setPhoneCountryCodeIfEmptyPhone=h,this.setPhoneNumberIfEmpty=m,this.setCountryCodeIfEmptyAddress=p,this.setCityIfEmpty=g,this.setLine1IfEmpty=y,this.setLine2IfEmpty=f,this.setPostalIfEmpty=E,this.setRegionIfEmpty=S,this.paymentFailureHandler=v,this.isFastTrackExperimentEnabled=A,this.setCleanPhoneNumber=C,this.name=iT._h.PAYPAL,this.paypalButtonBuilder=new Yk(this.config,this.sentry,this.locale,this.iframeWindow)}initiateFlow(e){return(0,c.sH)(this,arguments,void 0,(function(e){var t=this;let{element:n,holdDone:i,onFail:s,buttonColor:a,onButtonClick:o,onCancel:r,onInit:l,validate:u}=e;return function*(){return yield t.loadPayPalScriptIfNeeded(),yield t.paypalButtonBuilder.setButtonParams({buttonColor:a,onCreate:e=>(0,c.sH)(t,void 0,void 0,(function*(){yield this.updateSession();const t=yield this.paypalAPI.createOrder(e,this.isFastTrackExperimentEnabled());if(!ue.isFailure(t))return t.successResult;s(t.failureResult)})),onApprove:(e,n)=>(0,c.sH)(t,void 0,void 0,(function*(){this.setPaymentMethod(e),this.clientPaymentMethod=e,this.token=n;const t=yield this.hold();ue.isFailure(t)?s(t.failureResult):i()})),onButtonClick:o,onCancel:r,onFail:s,onInit:l,validate:u}).mount(n),!0}()}))}loadPayPalScriptIfNeeded(){return(0,c.sH)(this,void 0,void 0,(function*(){return this.paypalButtonBuilder.setCurrency(this.donation.getCurrency(),this.donation.getDefaultCurrency()).loadPayPalScriptIfNeeded()}))}startFlow(){return(0,c.sH)(this,void 0,void 0,(function*(){return ue.success(void 0)}))}hold(){return(0,c.sH)(this,void 0,void 0,(function*(){if(!this.token||!this.clientPaymentMethod)throw new Hk;const e={token:this.token,clientPaymentMethod:this.clientPaymentMethod};try{const t=yield this.paymentAPI.hold(e);return ue.isFailure(t)?t:(this.setDonorInfo(t.successResult),ue.success(void 0))}catch(e){return ue.fail({})}}))}pay(){return(0,c.sH)(this,void 0,void 0,(function*(){var e,t,n;const i=yield this.paymentAPI.pay();return ue.isSuccess(i)?i:(null===(e=i.failureResult.errors)||void 0===e?void 0:e.code)===iT.M6.ORDER_EXPIRED?(this.paymentFailureHandler(),ue.fail({shouldLeave:!0,message:null===(t=i.failureResult.errors)||void 0===t?void 0:t.message})):ue.fail({shouldLeave:!1,message:null===(n=i.failureResult.errors)||void 0===n?void 0:n.message})}))}closePaypal(){this.paypalButtonBuilder.destroy()}togglePaypalActions(e){e?this.paypalButtonBuilder.enable():this.paypalButtonBuilder.disable()}setDonorInfo(e){this.setPrivacy(e),this.setMailingAddress(e)}setPrivacy(e){const{email:t,phone:n,firstName:i,lastName:s,address:a}=e;t&&this.setDonorEmailIfEmpty(t),i&&this.setDonorFirstNameIfEmpty(i),s&&this.setDonorLastNameIfEmpty(s),(null==a?void 0:a.countryCode)&&this.setPhoneCountryCodeIfEmptyPhone(a.countryCode),n&&(this.setPhoneNumberIfEmpty(n),this.setCleanPhoneNumber(n))}setMailingAddress(e){const{line1:t,line2:n,city:i,region:s,postal:a,countryCode:o}=e.address||{};o&&this.setCountryCodeIfEmptyAddress(o),t&&this.setLine1IfEmpty(t),n&&this.setLine2IfEmpty(n),a&&this.setPostalIfEmpty(a.toString()),i&&this.setCityIfEmpty(i),s&&this.setRegionIfEmpty(s)}}class Wk{constructor(e,t,n,i,s,a,o,r,c,l,u,d,h){this.stripe=e,this.stripeElements=t,this.donorName=n,this.donorEmail=i,this.paymentOptions=s,this.mailingAddress=a,this.sentry=o,this.paymentMethodManager=r,this.checkoutConfiguration=c,this.setPaymentMethodCountry=l,this.mailingAddressFailureHandler=u,this.paymentAPI=d,this.params=h,this.name=iT._h.SEPA,this.intentSecret=null,this.completed=!1,this.elementReady=!1,this.ibanElement=null,this.hasElementError=!1,this.initiated=!1,this.onElementChange=e=>{this.setPaymentMethodCountry(e.country),this.completed=e.complete,this.hasElementError=!!e.error}}initiateFlow(e,t){return(0,c.sH)(this,void 0,void 0,(function*(){return this.initiated||(this.ibanElement=this.createElement(t),this.ibanElement.once("ready",(()=>{this.elementReady=!0,(null==t?void 0:t.onIbanElementReady)&&t.onIbanElementReady()})),this.ibanElement.on("change",this.onElementChange),this.ibanElement.mount(e),this.initiated=!0),!0}))}startFlow(){return(0,c.sH)(this,void 0,void 0,(function*(){return this.elementReady?!this.completed&&!(yield this.validatePayment())||this.hasElementError?ue.fail({}):ue.success(void 0):ue.fail({})}))}hold(){return(0,c.sH)(this,void 0,void 0,(function*(){const e=yield this.paymentAPI.hold({clientPaymentMethod:iT._h.SEPA});if(ue.isFailure(e))return ue.fail(e.failureResult);const{intentSecret:t}=e.successResult;if(!t)throw new Ak;return this.intentSecret=t,ue.success(void 0)}))}pay(){return(0,c.sH)(this,void 0,void 0,(function*(){if(!this.intentSecret)throw new Ak;const{isValid:e}=this.mailingAddress.validate();if(this.paymentMethodManager.isRequired("address",{ibanCountry:this.country})&&!e)throw new Error(`Wrong address format for ${this.country} IBAN`);const t=yield this.retrieveSetupIntent(this.intentSecret);if(!t)return ue.fail({shouldLeave:!1});if(t.status===iT.Zq.SUCCEEDED)return this.requestPay();const n=yield this.confirmSepaDebitSetup(this.intentSecret);if(ue.isFailure(n))return n;const i=n.successResult;return i&&i.status===iT.Zq.SUCCEEDED?this.requestPay():ue.fail({shouldLeave:!1})}))}destroy(){return(0,c.sH)(this,void 0,void 0,(function*(){var e;try{null===(e=this.ibanElement)||void 0===e||e.destroy()}catch(e){}}))}get country(){const e=this.paymentOptions.getDto();if(!e.paymentMethodCountry)throw new Error("Country is not set");return e.paymentMethodCountry}retrieveSetupIntent(e){return(0,c.sH)(this,void 0,void 0,(function*(){let t;try{t=yield this.stripe.retrieveSetupIntent(e)}catch(e){return this.sentry.captureException(e),null}return t.setupIntent?t.setupIntent:null}))}confirmSepaDebitSetup(e){return(0,c.sH)(this,void 0,void 0,(function*(){var t;const n=this.getElement();if(!this.country)throw new Error("country was not set");const i=this.donorName.getDto(),s=this.donorEmail.getDto(),a=this.mailingAddress.getDto();let o;try{o=yield this.stripe.confirmSepaDebitSetup(e,{payment_method:{sepa_debit:n,billing_details:{name:PC([i.firstName,i.lastName]),email:s.email,address:{line1:a.line1,city:a.city,country:a.countryCode,postal_code:a.postal}}}})}catch(e){return this.sentry.captureException(e),ue.fail({})}return o.error?"validation_error"===o.error.type?ue.fail({shouldLeave:!1,message:o.error.message}):["invalid_owner_address","country-code-invalid"].includes(null!==(t=o.error.message)&&void 0!==t?t:"")?(this.mailingAddressFailureHandler(),ue.fail({shouldLeave:!0,message:o.error.message})):ue.fail({shouldLeave:!1}):ue.success(o.setupIntent)}))}requestPay(){return(0,c.sH)(this,void 0,void 0,(function*(){const e=yield this.paymentAPI.pay();return ue.isSuccess(e)?e:ue.fail({shouldLeave:!1,message:e.failureResult.message})}))}getElement(){if(!this.ibanElement)throw new Error("ibanElement is not initialized");return this.ibanElement}createElement(e){const{stripeElementStyleOverride:t,showIcon:n}=null!=e?e:{};return this.stripeElements.create("iban",{iconStyle:"default",disabled:!1,hideIcon:void 0!==n&&!n,placeholderCountry:this.checkoutConfiguration.company.country,style:void 0!==t?t:Object.assign(Object.assign({},this.params.stripe.elementStyles),{base:Object.assign(Object.assign({},this.params.stripe.elementStyles.base),{fontSize:"14px"})}),classes:this.params.stripe.elementClasses,supportedCountries:["SEPA"]})}validatePayment(){return(0,c.sH)(this,void 0,void 0,(function*(){const e=this.getElement();let t;try{t=yield this.stripe.createPaymentMethod({type:D.qs.SEPA,sepa_debit:e,billing_details:{name:Mn,email:Ln}})}catch(e){return this.sentry.captureException(e),!1}return!!t.paymentMethod&&!t.error}))}}class $k{constructor(e,t,n,i,s,a,o,r,c){this.stripe=e,this.donorEmail=t,this.mailingAddress=n,this.ukBacs=i,this.sentry=s,this.intl=a,this.mailingAddressFailureHandler=o,this.ukBacsFailureHandler=r,this.paymentAPI=c,this.name=D._h.UK_BACS,this.intentSecret=null}initiateFlow(){return(0,c.sH)(this,void 0,void 0,(function*(){return!0}))}startFlow(){return(0,c.sH)(this,void 0,void 0,(function*(){return ue.success(void 0)}))}hold(){return(0,c.sH)(this,void 0,void 0,(function*(){const e=yield this.paymentAPI.hold({clientPaymentMethod:D._h.UK_BACS});if(ue.isFailure(e))return e;const{intentSecret:t}=e.successResult;if(!t)throw new Ak;return this.intentSecret=t,ue.success(void 0)}))}pay(){return(0,c.sH)(this,void 0,void 0,(function*(){if(!this.intentSecret)throw new Ak;const e=yield this.retrieveSetupIntent(this.intentSecret);if(!e)return ue.fail({shouldLeave:!1});if(e.status===iT.Zq.SUCCEEDED)return this.requestPay();const t=yield this.confirmBacsDebitSetup(this.intentSecret);if(ue.isFailure(t))return t;const n=t.successResult;return n&&n.status===iT.Zq.SUCCEEDED?this.requestPay():ue.fail({shouldLeave:!0})}))}retrieveSetupIntent(e){return(0,c.sH)(this,void 0,void 0,(function*(){let t;try{t=yield this.stripe.retrieveSetupIntent(e)}catch(e){return this.sentry.captureException(e),null}return t.setupIntent?t.setupIntent:null}))}confirmBacsDebitSetup(e){return(0,c.sH)(this,void 0,void 0,(function*(){var t,n,i;let s;const a=this.donorEmail.getDto(),o=this.mailingAddress.getDto(),r=this.ukBacs.getDto();try{s=yield this.stripe.confirmBacsDebitSetup(e,{payment_method:{bacs_debit:{sort_code:r.sortCode,account_number:r.accountNumber},billing_details:{name:r.accountHolderName,email:a.email,address:{line1:o.line1,city:o.city,country:o.countryCode,postal_code:o.postal}}}})}catch(e){return this.sentry.captureException(e),ue.fail({})}return s.error?["invalid_owner_address","country-code-invalid"].includes(null!==(n=s.error.code)&&void 0!==n?n:"")?(this.mailingAddressFailureHandler(),ue.fail({shouldLeave:!0,additionalMessage:s.error.message,message:this.intl.translate("mailingAddressScreen.validationError.title")})):(this.ukBacsFailureHandler(),["invalid_bank_account_account_number","invalid_bank_account"].includes(null!==(i=s.error.code)&&void 0!==i?i:"")?ue.fail({shouldLeave:!0,message:s.error.message}):s.error.message?ue.fail({shouldLeave:!1,message:s.error.message}):ue.fail({shouldLeave:!0})):ue.success(null!==(t=s.setupIntent)&&void 0!==t?t:null)}))}requestPay(){return(0,c.sH)(this,void 0,void 0,(function*(){const e=yield this.paymentAPI.pay();return ue.isSuccess(e)?e:ue.fail({shouldLeave:!1,message:e.failureResult.message})}))}}class Xk{constructor(e,t,n,i,s,a,o,r,c,l,u,d,h,m){this.stripe=e,this.usBankAccount=t,this.sentry=n,this.paymentAPI=i,this.intl=s,this.params=a,this.donation=o,this.donorName=r,this.paymentFailureHandler=c,this.setFinancialInstitution=l,this.setVerificationType=u,this.setAccountNumber=d,this.setRoutingNumber=h,this.setAccountType=m,this.name=iT._h.US_BANK_ACCOUNT,this.intentSecret=null,this.initiateParams=null}initiateFlow(e){return(0,c.sH)(this,void 0,void 0,(function*(){return this.initiateParams=e,!0}))}startFlow(){return(0,c.sH)(this,void 0,void 0,(function*(){const e=this.usBankAccount.getUsBankAccountVerificationSetup();if(e.isMicroDepositOnly||e.isAbavOnly)return ue.success(void 0);const t=yield this.hold();if(ue.isFailure(t))return ue.fail({message:t.failureResult.message||this.commonErrorText});if(!this.intentSecret)return ue.fail({message:this.commonErrorText});const n=yield this.collectBankAccountForSetup(this.intentSecret);if(ue.isFailure(n))return n;const i=n.successResult;if(i.status===iT.Zq.REQUIRES_PAYMENT_METHOD)return ue.fail({});const s=i.payment_method;return this.assertUSBankAccountPaymentMethod(s),this.paymentMethod=s,this.setFinancialInstitution(s.us_bank_account.bank_name),this.setAccountNumber(s.us_bank_account.last4),this.setRoutingNumber(s.us_bank_account.routing_number),this.setAccountType(s.us_bank_account.account_holder_type),ue.success(void 0)}))}hold(){return(0,c.sH)(this,void 0,void 0,(function*(){if(this.shouldCreatePaymentMethod){const e=yield this.createPaymentMethod();if(ue.isFailure(e))return e}const e=yield this.paymentAPI.hold({clientPaymentMethod:iT._h.US_BANK_ACCOUNT,token:{verificationType:this.verificationType}});if(ue.isFailure(e))return ue.fail(e.failureResult);const{intentSecret:t}=e.successResult;if(!t)throw new Ak;return this.intentSecret=t,ue.success(void 0)}))}pay(){return(0,c.sH)(this,void 0,void 0,(function*(){if(!this.intentSecret)throw new Ak;const e=yield this.retrieveSetupIntent(this.intentSecret);if(ue.isFailure(e))return e;if(e.successResult.status===iT.Zq.SUCCEEDED)return this.requestPay();const t=yield this.confirmUsBankAccountSetup(this.intentSecret);if(ue.isFailure(t))return t;const n=t.successResult;return!n||n.status!==iT.Zq.SUCCEEDED&&n.status!==iT.Zq.REQUIRES_ACTION?ue.fail({shouldLeave:!0}):(n.next_action&&(this.assertUSBankAccountNextAction(n.next_action),this.setVerificationType(n.next_action.verify_with_microdeposits.microdeposit_type)),this.requestPay())}))}get verificationType(){var e;if(null===(e=this.initiateParams)||void 0===e?void 0:e.verificationType)return this.initiateParams.verificationType;const t=this.usBankAccount.getUsBankAccountVerificationSetup();return t.isAbavOnly?"instant_or_skip":t.isInstantOnly?"instant":t.isInstantAndMicroDeposit?KD(function(e,t,n){if("USD"!==n)return t;const i=function(e){switch(e){case Hb.ONE_FOR_ISRAEL:return 150;case Hb.FCA:return 200;default:return null}}(e);return null===i?t:t<9500&&t>=i?9500:t}(this.params.companyKey,this.donation.getTotal(),this.donation.getCurrency()))?"automatic":"instant":t.isInstantAndAbav?"instant_or_skip":"microdeposits"}get shouldCreatePaymentMethod(){return"microdeposits"===this.verificationType||"instant_or_skip"===this.verificationType}get commonErrorText(){return this.intl.translate("common.errorOccurredText")}get captureErrorContext(){return{extra:{widgetSession:this.params.getSessionToken()}}}createPaymentMethod(){return(0,c.sH)(this,void 0,void 0,(function*(){const e=this.usBankAccount.getDto();let t;try{t=yield this.stripe.createPaymentMethod({type:iT.qs.US_BANK_ACCOUNT,billing_details:{name:e.accountHolderName},us_bank_account:{account_number:e.accountNumber,routing_number:e.routingNumber,account_holder_type:e.accountType}})}catch(e){return this.sentry.captureException(e,this.captureErrorContext),ue.fail({shouldLeave:!1})}if(t.error)return ue.fail({shouldLeave:!1,message:t.error.message||this.commonErrorText});const n=t.paymentMethod;return this.assertUSBankAccountPaymentMethod(n),this.paymentMethod=n,this.setFinancialInstitution(n.us_bank_account.bank_name),ue.success(n)}))}retrieveSetupIntent(e){return(0,c.sH)(this,void 0,void 0,(function*(){let t;try{t=yield this.stripe.retrieveSetupIntent(e)}catch(e){return this.sentry.captureException(e,this.captureErrorContext),ue.fail({shouldLeave:!1})}return t.setupIntent?ue.success(t.setupIntent):ue.fail({shouldLeave:!1})}))}confirmUsBankAccountSetup(e){return(0,c.sH)(this,void 0,void 0,(function*(){var t;let n;this.assertUSBankAccountPaymentMethod(this.paymentMethod);try{n=yield this.stripe.confirmUsBankAccountSetup(e,{payment_method:this.paymentMethod.id,expand:["payment_method"]})}catch(e){return this.sentry.captureException(e,this.captureErrorContext),ue.fail({shouldLeave:!1})}return n.setupIntent?ue.success(n.setupIntent):(this.paymentFailureHandler(),["invalid_bank_account_account_number","invalid_bank_account"].includes(null!==(t=n.error.code)&&void 0!==t?t:"")||n.error.message?ue.fail({shouldLeave:!0,message:n.error.message}):ue.fail({shouldLeave:!0}))}))}collectBankAccountForSetup(e){return(0,c.sH)(this,void 0,void 0,(function*(){var t,n,i,s;let a;const{firstName:o,lastName:r}=this.donorName.getDto();try{null===(n=null===(t=this.initiateParams)||void 0===t?void 0:t.onPopupOpen)||void 0===n||n.call(t),a=yield this.stripe.collectBankAccountForSetup({clientSecret:e,params:{payment_method_type:iT.qs.US_BANK_ACCOUNT,payment_method_data:{billing_details:{name:PC([o,r])}}},expand:["payment_method"]})}catch(e){return this.sentry.captureException(e,this.captureErrorContext),ue.fail({shouldLeave:!1})}finally{null===(s=null===(i=this.initiateParams)||void 0===i?void 0:i.onPopupClose)||void 0===s||s.call(i)}return a.setupIntent?ue.success(a.setupIntent):a.error?ue.fail({shouldLeave:!1,message:a.error.message||this.commonErrorText}):ue.fail({shouldLeave:!1})}))}requestPay(){return(0,c.sH)(this,void 0,void 0,(function*(){const e=yield this.paymentAPI.pay();return ue.isSuccess(e)?e:ue.fail({shouldLeave:!1,message:e.failureResult.message})}))}assertUSBankAccountPaymentMethod(e){if("us_bank_account"!==e.type)throw this.sentry.captureException(new Error(`Expected us_bank_account payment method, but ${e.type} has been retrieved`),this.captureErrorContext),new Error(this.commonErrorText)}assertUSBankAccountNextAction(e){if("verify_with_microdeposits"!==e.type)throw this.sentry.captureException(new Error(`Expected verify_with_microdeposits next action, but ${e.type} has been retrieved`),this.captureErrorContext),new Error(this.commonErrorText)}}const Qk="venmo",Zk=["Window closed before response","Window closed for postrobot_method before ack"];class Jk{constructor(e,t,n,i){this.config=e,this.sentry=t,this.locale=n,this.iframeWindow=i,this.available=!0,this.scriptParams=null,this.buttonParams=null,this.actions=null,this.rendered=!1,this.scriptLoadingPromise=null}init(){const{paypalMerchantId:e,paypalClientId:t}=this.config;if(!e){const e=new Error("Paypal merchant ID is not provided");throw this.sentry.captureException(e),e}const n={"client-id":t,"merchant-id":e,currency:"USD","enable-funding":Qk,"disable-funding":"card"},i=wn(this.locale);return i&&(n.locale=i),this.scriptParams=n,this}setHandlers(e){let{onCreate:t,onApprove:n,onButtonClick:i,onCancel:s,onInit:a}=e;return this.buttonParams={fundingSource:Qk,style:{tagline:!1,shape:"rect",height:48,size:"responsive"},createOrder:()=>t(D._h.VENMO),onApprove:e=>(0,c.sH)(this,void 0,void 0,(function*(){if(!this.venmoButtons)throw new Error("Venmo Buttons not initialized");const t=e.orderID;if(!t)return this.handleEmptyTokenError(e);yield n(this.clientPaymentMethod,t)})),onInit:(e,t)=>{this.actions=t,null==a||a()},onClick:()=>(0,c.sH)(this,void 0,void 0,(function*(){null==i||i(this.clientPaymentMethod)})),onError:e=>{const t=e.message;if(!t||!t.includes("popup close")&&!t.includes("cross-domain"))throw e},onCancel:()=>{null==s||s()}},this}disable(){return(0,c.sH)(this,void 0,void 0,(function*(){var e;try{yield null===(e=this.actions)||void 0===e?void 0:e.disable()}catch(e){if(Zk.includes(e.message))return;throw e}}))}enable(){return(0,c.sH)(this,void 0,void 0,(function*(){var e;try{yield null===(e=this.actions)||void 0===e?void 0:e.enable()}catch(e){if(Zk.includes(e.message))return;throw e}}))}loadPayPalScriptIfNeeded(){return(0,c.sH)(this,void 0,void 0,(function*(){if(!this.scriptParams)throw new Error("Call `setCurrency` before init");return this.scriptLoadingPromise||(this.scriptLoadingPromise=(0,Rn.k0)(`https://www.paypal.com/sdk/js?${oi(this.scriptParams)}`,!1,this.iframeWindow,{"data-namespace":"venmo"},!1,qn)),this.scriptLoadingPromise}))}mount(e){return(0,c.sH)(this,void 0,void 0,(function*(){var t;if(!this.buttonParams)throw new Error("Call `setHandlers` before you mount");if(yield this.loadPayPalScriptIfNeeded(),e)if(null===(t=this.iframeWindow.venmo)||void 0===t?void 0:t.Buttons)if(this.venmoButtons=this.iframeWindow.venmo.Buttons(this.buttonParams),this.venmoButtons.isEligible())try{yield this.venmoButtons.render(e),this.rendered=!0}catch(e){if(["Component closed","Detected container element removed from DOM"].includes(null==e?void 0:e.message))return;throw e}else this.available=!1;else this.available=!1}))}destroy(){return(0,c.sH)(this,void 0,void 0,(function*(){this.rendered&&this.venmoButtons&&(yield this.venmoButtons.close(),this.rendered=!1)}))}get clientPaymentMethod(){return D._h.VENMO}handleEmptyTokenError(e){this.sentry.captureException(new Error("Got an undefined token"),{extra:{data:e}})}}class eO{constructor(e,t,n,i,s,a,o,r,c,l,u,d,h,m,p,g,y,f,E,S,v){this.livemode=e,this.showcase=t,this.config=n,this.sentry=i,this.locale=s,this.iframeWindow=a,this.updateSession=o,this.setPaymentMethod=r,this.setDonorFirstNameIfEmpty=c,this.setDonorLastNameIfEmpty=l,this.setDonorEmailIfEmpty=u,this.setPhoneCountryCodeIfEmptyPhone=d,this.setPhoneNumberIfEmpty=h,this.setCountryCodeIfEmptyAddress=m,this.setCityIfEmpty=p,this.setLine1IfEmpty=g,this.setLine2IfEmpty=y,this.setPostalIfEmpty=f,this.setRegionIfEmpty=E,this.paypalAPI=S,this.paymentAPI=v,this.name=iT._h.VENMO,this.venmoButtonBuilder=new Jk(this.config,this.sentry,this.locale,this.iframeWindow)}checkAvailability(){return this.venmoButtonBuilder.available}initiateFlow(e){return(0,c.sH)(this,arguments,void 0,(function(e){var t=this;let{element:n,holdDone:i,onFail:s,onButtonClick:a,onCancel:o,onInit:r}=e;return function*(){return yield t.loadPayPalScriptIfNeeded(),yield t.venmoButtonBuilder.setHandlers({onCreate:e=>(0,c.sH)(t,void 0,void 0,(function*(){yield this.updateSession();const t=yield this.paypalAPI.createOrder(e,!1);if(!ue.isFailure(t))return t.successResult;s(t.failureResult)})),onApprove:(e,n)=>(0,c.sH)(t,void 0,void 0,(function*(){this.setPaymentMethod(e),this.clientPaymentMethod=e,this.token=n;const t=yield this.hold();ue.isFailure(t)?s(t.failureResult):i()})),onButtonClick:a,onCancel:()=>{null==o||o()},onInit:r}).mount(n),t.venmoButtonBuilder.available}()}))}loadPayPalScriptIfNeeded(){return this.venmoButtonBuilder.init().loadPayPalScriptIfNeeded()}startFlow(){return(0,c.sH)(this,void 0,void 0,(function*(){return ue.success(void 0)}))}hold(){return(0,c.sH)(this,void 0,void 0,(function*(){if(!this.token||!this.clientPaymentMethod)throw new Hk;const e={token:this.token,clientPaymentMethod:this.clientPaymentMethod},t=yield this.paymentAPI.hold(e);return ue.isFailure(t)?ue.fail(t.failureResult):(this.setDonorInfo(t.successResult),ue.success(void 0))}))}pay(){return(0,c.sH)(this,void 0,void 0,(function*(){const e=yield this.paymentAPI.pay();return ue.isSuccess(e)?e:ue.fail({shouldLeave:!1})}))}closeButton(){this.venmoButtonBuilder.destroy()}toggleVenmoActions(e){e?this.venmoButtonBuilder.enable():this.venmoButtonBuilder.disable()}setDonorInfo(e){var t,n,i,s,a,o,r,c;this.setDonorFirstNameIfEmpty(e.firstName||""),this.setDonorLastNameIfEmpty(e.lastName||""),this.setDonorEmailIfEmpty(e.email||""),(null===(t=e.address)||void 0===t?void 0:t.countryCode)&&this.setPhoneCountryCodeIfEmptyPhone(e.address.countryCode),this.setPhoneNumberIfEmpty(e.phone||""),(null===(n=e.address)||void 0===n?void 0:n.countryCode)&&this.setCountryCodeIfEmptyAddress(e.address.countryCode),this.setCityIfEmpty((null===(i=e.address)||void 0===i?void 0:i.city)||""),this.setLine1IfEmpty((null===(s=e.address)||void 0===s?void 0:s.line1)||""),this.setLine2IfEmpty((null===(a=e.address)||void 0===a?void 0:a.line2)||""),this.setRegionIfEmpty((null===(o=e.address)||void 0===o?void 0:o.region)||""),this.setPostalIfEmpty((null===(c=null===(r=e.address)||void 0===r?void 0:r.postal)||void 0===c?void 0:c.toString())||"")}}class tO{constructor(e){this.sessionAPI=e}getToken(e){return(0,c.sH)(this,void 0,void 0,(function*(){try{return yield this.sessionAPI.get("googlePay/token",{merchantOrigin:e},{retries:5,delay:200,rejectsOnInvalid:!0})}catch(e){throw Error("Error while receiving google pay token")}}))}}class nO{constructor(e){this.sessionAPI=e}createOrder(e,t){return(0,c.sH)(this,void 0,void 0,(function*(){return this.sessionAPI.post("paypal/order",{clientPaymentMethod:e,fastTrack:t})}))}}class iO{constructor(e,t,n,i){this.sentry=e,this.intl=t,this.paymentMethodAvailabilityManagerRepository=n,this.params=i,this.paymentFlows={}}destroy(){return(0,c.sH)(this,void 0,void 0,(function*(){for(const e of Object.values(this.paymentFlows))e.destroy&&(yield e.destroy())}))}resolveCard(e){let{sessionAPI:t,stripe:n,stripeElements:i,failureHandler:s,setPaymentMethodCountry:a,donation:o}=e;return this.getOrCreatePaymentFlow(D._h.CARD,(()=>{if(!n||!i)throw new Error("Credit card dependencies are not provided");return new Rk(n,i,this.sentry,this.intl,s,new FT(t),a,o,{stripe:{elementClasses:this.params.stripe.elementClasses,elementStyles:this.params.stripe.elementStyles}})}))}resolvePaypal(e){let{sessionAPI:t,locale:n,iframeWindow:i,paypalClientId:s,paypalMerchantId:a,paypalCurrencies:o,subscriptionsEnabled:r,donation:c,updateSession:l,setPaymentMethod:u,setDonorFirstNameIfEmpty:d,setDonorLastNameIfEmpty:h,setDonorEmailIfEmpty:m,setPhoneCountryCodeIfEmptyPhone:p,setPhoneNumberIfEmpty:g,setCountryCodeIfEmptyAddress:y,setCityIfEmpty:f,setLine1IfEmpty:E,setLine2IfEmpty:S,setPostalIfEmpty:v,setRegionIfEmpty:A,paymentFailureHandler:C,isFastTrackExperimentEnabled:P,setCleanPhoneNumber:N}=e;return this.getOrCreatePaymentFlow(D._h.PAYPAL,(()=>new zk({paypalClientId:s,paypalMerchantId:a,paypalCurrencies:o,subscriptionsEnabled:r},this.sentry,n,i,new nO(t),new FT(t),c,l,u,d,h,m,p,g,y,f,E,S,v,A,C,P,N)))}resolveGooglePay(e){let{sessionAPI:t,livemode:n,env:i,googlePayInfo:s,stripeAccount:a,companyName:o,stripePublicKey:r,countryCode:c,stripe:l,currencyService:u,donation:d,setPaymentMethod:h,setDonorFullNameIfEmpty:m,setDonorEmailIfEmpty:p,isFastTrackExperimentEnabled:g,isMailingAddressRequired:y,isPhoneNumberRequired:f,setDonorPhoneIfEmpty:E,setPhoneCleanNumber:S,setPhoneCountryCodeIfEmptyPhone:v,setCountryCodeIfEmptyAddress:A,setCityIfEmpty:C,setLine1IfEmpty:P,setLine2IfEmpty:N,setPostalIfEmpty:b,setRegionIfEmpty:T}=e;return this.getOrCreatePaymentFlow(D._h.GOOGLE_PAY,(()=>{if(!l||!a)throw new Error("Stripe and Stripe account are required for GPay");return new Fk({googlePayInfo:s,stripeAccount:a,stripePublicKey:r,companyName:o,countryCode:c},n,i,l,u,d,this.sentry,this.intl,new FT(t),new tO(t),h,m,p,g,y,f,E,S,v,A,C,P,N,b,T)}))}resolveUkBacs(e){let{sessionAPI:t,stripe:n,donorEmail:i,mailingAddress:s,ukBacs:a,mailingAddressFailureHandler:o,ukBacsFailureHandler:r}=e;return this.getOrCreatePaymentFlow(D._h.UK_BACS,(()=>{if(!n)throw new Error("Stripe is not provided");return new $k(n,i,s,a,this.sentry,this.intl,o,r,new FT(t))}))}resolveApplePay(e){let{sessionAPI:t,companyName:n,applePayStripeLoadingPromise:i,donation:s,setPaymentMethod:a,setDonorFullNameIfEmpty:o,setDonorEmailIfEmpty:r,setCountryCodeIfEmptyAddress:c,setCityIfEmpty:l,setLine1IfEmpty:u,setLine2IfEmpty:d,setPostalIfEmpty:h,setRegionIfEmpty:m,isFastTrackExperimentEnabled:p,isMailingAddressRequired:g,isPhoneNumberRequired:y,setDonorPhoneIfEmpty:f,setPhoneCleanNumber:E,setPhoneCountryCodeIfEmptyPhone:S}=e;return this.getOrCreatePaymentFlow(D._h.APPLE_PAY,(()=>{const e={country:D.tg.UNITED_STATES,currency:s.getCurrency().toLowerCase(),total:{label:n,amount:s.getTotal()||0}};return new kk(e,i,this.sentry,this.intl,new FT(t),s,a,o,r,c,l,u,d,h,m,p,g,y,f,E,S)}))}resolveAuBECS(e){let{sessionAPI:t,stripe:n,stripeElements:i,donorName:s,donorEmail:a}=e;return this.getOrCreatePaymentFlow(D._h.AU_BECS,(()=>{if(!n||!i)throw new Error("Elements are not provided");return new xk(n,i,s,a,this.sentry,new FT(t),{stripe:{elementClasses:this.params.stripe.elementClasses,elementStyles:this.params.stripe.elementStyles}})}))}resolveSepa(e){let{sessionAPI:t,stripe:n,stripeElements:i,mailingAddress:s,donorName:a,donorEmail:o,paymentOptions:r,checkoutConfiguration:c,setPaymentMethodCountry:l,mailingAddressFailureHandler:u}=e;return this.getOrCreatePaymentFlow(D._h.SEPA,(()=>{if(!n||!i)throw new Error("Elements are not provided");const e=this.paymentMethodAvailabilityManagerRepository.getManager(D._h.SEPA,g.WIDGET);return new Wk(n,i,a,o,r,s,this.sentry,e,c,l,u,new FT(t),{stripe:{elementClasses:this.params.stripe.elementClasses,elementStyles:this.params.stripe.elementStyles}})}))}resolveIDEAL(e){let{sessionAPI:t,stripe:n,stripeElements:i,donorName:s,donorEmail:a,env:o,clientId:r,checkoutConfiguration:c}=e;return this.getOrCreatePaymentFlow(D._h.IDEAL,(()=>{if(!n||!i)throw new Error("Elements are not provided");return c.paymentOptionsSettings.isNewIdealPaymentFlowEnabled?new Bk(t,n,s,a,this.intl,this.sentry,new FT(t),r,c):new qk(t,n,o,s,a,this.intl,this.sentry,new FT(t))}))}resolveUSBankAccount(e){let{stripe:t,usBankAccount:n,sessionAPI:i,checkoutConfiguration:s,donation:a,donorName:o,paymentFailureHandler:r,setFinancialInstitution:c,setVerificationType:l,setAccountNumber:u,setRoutingNumber:d,setAccountType:h}=e;return this.getOrCreatePaymentFlow(D._h.US_BANK_ACCOUNT,(()=>{if(!t)throw new Error("Stripe is not provided");return new Xk(t,n,this.sentry,new FT(i),this.intl,{companyKey:s.company.key,getSessionToken:()=>i.sessionToken},a,o,r,c,l,u,d,h)}))}resolveACSS(e){let{sessionAPI:t,stripe:n,donorName:i,donorEmail:s,setPaymentMethod:a}=e;return this.getOrCreatePaymentFlow(D._h.ACSS,(()=>{if(!n)throw new Error("Stripe is not provided");return new Pk(n,this.intl,this.sentry,new FT(t),i,s,a)}))}resolveVenmo(e){let{sessionAPI:t,livemode:n,showcase:i,locale:s,iframeWindow:a,paypalClientId:o,paypalMerchantId:r,updateSession:c,setPaymentMethod:l,setDonorFirstNameIfEmpty:u,setDonorLastNameIfEmpty:d,setDonorEmailIfEmpty:h,setPhoneCountryCodeIfEmptyPhone:m,setPhoneNumberIfEmpty:p,setCountryCodeIfEmptyAddress:g,setCityIfEmpty:y,setLine1IfEmpty:f,setLine2IfEmpty:E,setPostalIfEmpty:S,setRegionIfEmpty:v}=e;return this.getOrCreatePaymentFlow(D._h.VENMO,(()=>new eO(n,i,{paypalClientId:o,paypalMerchantId:r},this.sentry,s,a,c,l,u,d,h,m,p,g,y,f,E,S,v,new nO(t),new FT(t))))}getPaymentFlow(e){return this.paymentFlows[e]}getOrCreatePaymentFlow(e,t){return this.paymentFlows[e]||(this.paymentFlows[e]=t()),this.paymentFlows[e]}}const sO=(e,t,n,i,s,a)=>{const{isFallback:o}=i,r=(0,c.Tt)(i,["isFallback"]),l=e.allAmountSuggestions,u=e.allDefaultAmounts,d=e=>l[e]?l[e]:[],h=e=>u[e]?u[e]:0,m=e=>!o&&"presets"in r?r.presets[e].amountOptions:[],p=e=>!o&&"presets"in r?r.presets[e].defaultAmount:0,g={donation:{amounts:{[W.ONCE]:{amountOptions:d(W.ONCE),defaultAmount:h(W.ONCE),minAmount:e.getFrequencyMinimalAmount(W.ONCE),currency:a},[W.MONTHLY]:{amountOptions:d(W.MONTHLY),defaultAmount:h(W.MONTHLY),minAmount:e.getFrequencyMinimalAmount(W.MONTHLY),currency:a}}}},y={donation:{amounts:{[W.ONCE]:{amountOptions:m(W.ONCE),defaultAmount:p(W.ONCE),minAmount:e.getFrequencyMinimalAmount(W.ONCE),currency:a},[W.MONTHLY]:{amountOptions:m(W.MONTHLY),defaultAmount:p(W.MONTHLY),minAmount:e.getFrequencyMinimalAmount(W.MONTHLY),currency:a}}}};return{isSuggestionUsed:s&&!o,isFallback:o,requestDurationMs:t,suggestion:y,defaults:g,fetchCallsCount:n}};class aO{constructor(e,t,n,i,s,a,o){this.checkoutService=e,this.checkoutState=t,this.tracker=n,this.checkoutConfiguration=i,this.currencyService=s,this.suggestionsService=a,this.amountPresetsFetcher=o,this._allowedFrequencies=[W.ONCE,W.MONTHLY],this._amountPresetsTrackData=[]}tryFetchSuggestion(){return(0,c.sH)(this,void 0,void 0,(function*(){if(this.checkoutService.tryStartMlAmountPresetsV4Experiment(this.getCanApplyParams()),this.checkoutService.exposeMlAmountPresetsV4Experiment(),!this.shouldUseAdaptiveLogic())return;const e=this.getCanApplyParams(),t=this.getAmountPresetsVersion();yield Promise.all(e.currencies.map((e=>this.amountPresetsFetcher.fetchSuggestion(e,t)))),e.currencies.forEach((e=>this.saveMlAmountPresetsTrackData(e)))}))}tryApplySuggestion(){if(!this.shouldUseAdaptiveLogic())return;if(!this.canApply())return;const e=[this.donationDataPoint.currency];this.donationDataPoint.isCurrencyEditableForFrequency(W.MONTHLY)||this.donationDataPoint.currency===this.checkoutConfiguration.defaultCurrency||e.unshift(this.checkoutConfiguration.defaultCurrency);for(const t of e){const e=this.amountPresetsFetcher.getSuggestion(t);null!==e&&(e.isFallback||this.checkoutConfiguration.enabledFrequencies.forEach((n=>{const i=this.donationDataPoint.frequency===n;if(!this.donationDataPoint.isCurrencyEditableForFrequency(n)&&this.checkoutConfiguration.defaultCurrency!==t||!this.allowedFrequencies.includes(n))return;const s=i&&this.checkoutConfiguration.hasExternalAmount,a=!this.checkoutConfiguration.defaultAmounts[n];if(!s&&!a){const i=t!==this.donationDataPoint.currency?this.currencyService.convert(e.presets[n].defaultAmount,t,this.donationDataPoint.currency):e.presets[n].defaultAmount;this.changeDefaultAmountForFrequency(i,n)}const o=e.presets[n].amountOptions,r=t!==this.checkoutConfiguration.defaultCurrency?o.map((e=>this.currencyService.convert(e,t,this.checkoutConfiguration.defaultCurrency))):o;this.setSuggestionsAndDisableAi(o,r,n)})))}}tryTrackSuggestion(){this._amountPresetsTrackData.forEach((e=>{this.tracker.trackCheckoutCustomEvent({type:e.type,data:e.data})})),this._amountPresetsTrackData=[]}get donationDataPoint(){return this.checkoutState.donation.dataPoint}get allowedFrequencies(){var e;return null!==(e=this.checkoutService.getMlAmountPresetsExperimentAllowedFrequencies())&&void 0!==e?e:this._allowedFrequencies}shouldUseAdaptiveLogic(){return!(this.checkoutConfiguration.isRestoredByWidgetSession||this.checkoutConfiguration.infrastructureParams.showcase||this.checkoutConfiguration.infrastructureParams.isLighthouse||this.checkoutConfiguration.checkoutType!==Ce.PAGE&&!this.checkoutService.isMlAmountPresetsV4ExperimentEnabled())}getAmountPresetsCurrencies(){let e=[this.donationDataPoint.currency];return this.donationDataPoint.isCurrencyEditableForFrequency(W.MONTHLY)||this.donationDataPoint.currency===this.checkoutConfiguration.defaultCurrency||(this.allowedFrequencies.includes(W.ONCE)?e.push(this.checkoutConfiguration.defaultCurrency):e=[this.checkoutConfiguration.defaultCurrency]),e}changeDefaultAmountForFrequency(e,t){if(null!==e){const n=this.suggestionsService.beautify(e,this.donationDataPoint.currency);this.checkoutState.donation.setFrequencyDefaultAmount(t,n)}}setSuggestionsAndDisableAi(e,t,n){const i=this.suggestionsService.beautify(e,this.donationDataPoint.currency),s=this.suggestionsService.beautify(t,this.checkoutConfiguration.defaultCurrency);this.checkoutState.donation.setFrequencyAmountSuggestions(n,s,i)}getCanApplyParams(){var e,t;const n=this.checkoutConfiguration.enabledFrequencies,i=this.checkoutConfiguration.element,s=n.some((e=>this.checkoutConfiguration.campaign.config.frequencies[e].hintsEnabled)),a=this.getAmountPresetsCurrencies(),o=a[0]||this.donationDataPoint.currency;let r=this.donationDataPoint.getFrequencyMinimalAmount(W.ONCE),c=this.donationDataPoint.getFrequencyMinimalAmount(W.MONTHLY);return o!==this.donationDataPoint.currency&&(r=this.currencyService.convert(r,this.donationDataPoint.currency,o),c=this.currencyService.convert(c,this.donationDataPoint.currency,o)),{fromDonationForm:i.type===Ae.DONATION_FORM,isEnabledCampaignAi:this.checkoutConfiguration.campaign.config.enableAI,isEnabledCampaignHints:s,p2pUsed:!!(null===(e=this.checkoutConfiguration.fundraisingPage)||void 0===e?void 0:e.key),enabledFrequencies:n,minAmounts:{[W.ONCE]:r,[W.MONTHLY]:c},mlSuggestion:null!==(t=this.amountPresetsFetcher.getSuggestion(o))&&void 0!==t?t:null,currencies:a}}saveMlAmountPresetsTrackData(e){if(!this.amountPresetsFetcher.isSuggestionRequested(e))return;const t=this.amountPresetsFetcher.getSuggestion(e);if(!t)return;const n=this.canApply();"v4"===this.getAmountPresetsVersion()?(this.trackResponse(t,n,e,u.EXPERIMENT_ML_AMOUNT_PRESETS_V4_RESPONSE),t.v3&&this.trackResponse(t.v3,!1,e,u.EXPERIMENT_ML_AMOUNT_PRESETS_RESPONSE)):this.trackResponse(t,n,e,u.EXPERIMENT_ML_AMOUNT_PRESETS_RESPONSE)}trackResponse(e,t,n,i){this._amountPresetsTrackData.push({type:i,data:sO(this.donationDataPoint,this.amountPresetsFetcher.getSuggestionRequestDurationMs(n),this.amountPresetsFetcher.getSuggestionFetchCallsCount(n),e,t,n)})}getAmountPresetsVersion(){return this.checkoutService.isMlAmountPresetsV4ExperimentEnabled()?"v4":"v3"}canApply(){const e=this.getCanApplyParams();if(!e.isEnabledCampaignAi)return!1;if(e.isEnabledCampaignHints)return!1;if(e.p2pUsed&&this.checkoutService.isMlAmountPresetsV4ControlGroupEnabled())return!1;if(!e.mlSuggestion)return!1;if(e.mlSuggestion.isFallback)return!1;for(const t of this.allowedFrequencies){const n=e.mlSuggestion.presets[t],i=e.minAmounts[t];if(!n||!i)return!1;if(n.defaultAmount<i)return!1;if(!n.amountOptions.length)return!1;if(n.amountOptions.some((e=>e<i)))return!1}return!0}}var oO;!function(e){e.V1="v1",e.V2="v2",e.V3="v3"}(oO||(oO={}));class rO{constructor(e,t,n,i,s,a){this.checkoutConfiguration=e,this.currencyService=t,this.checkoutState=n,this.tracker=i,this.defaultFrequencyFetcher=s,this.options=a}tryFetchSuggestion(){return(0,c.sH)(this,void 0,void 0,(function*(){var e,t,n,i,s;if(!this.canApply())return ue.success(void 0);if(this.isSuggestionRequestedAtLeastOnce)return ue.success(void 0);const a=yield this.defaultFrequencyFetcher.fetchSuggestion({amount:this.donationDataPoint.amountInUSD||0,currency:this.donationDataPoint.currency||"USD",companyKey:this.params.companyKey,campaignKey:this.params.campaignKey,elementKey:this.params.elementKey,clientLocale:this.params.clientLocale,utmSource:this.params.utmSource,checkoutType:this.params.checkoutType,currencyRate:this.currencyService.getRate(this.donationDataPoint.currency),clientId:this.tracker.clientId,version:oO.V3,clientDevicePixelRatio:this.options.clientDevicePixelRatio,clientBatteryLevel:null!==(e=this.options.clientBatteryLevel)&&void 0!==e?e:0,clientDeviceMemory:null!==(t=this.options.clientDeviceMemory)&&void 0!==t?t:0,clientHardwareConcurrency:null!==(n=this.options.clientHardwareConcurrency)&&void 0!==n?n:0,clientConnectionDownlink:null!==(i=this.options.clientConnectionDownlink)&&void 0!==i?i:0,clientConnectionType:null!==(s=this.options.clientConnectionType)&&void 0!==s?s:"",clientDoNotTrack:Boolean(this.options.clientDoNotTrack)});return ue.isFailure(a)?ue.fail(void 0):ue.success(void 0)}))}tryApplySuggestion(){if(!this.canApply())return;const e=this.defaultFrequencyFetcher.getSuggestion();e.isFallback||(this.checkoutState.donation.setDonationsFrequency(e.defaultFrequency),this.tryReapplyExternalAmount())}tryTrackSuggestion(){if(!this.canApply())return;const e=this.defaultFrequencyFetcher.getSuggestion(),t=this.defaultFrequencyFetcher.getMeta();this.tracker.trackCheckoutCustomEvent({type:u.ML_DEFAULT_FREQUENCY_V3_RESPONSE,data:{isSuggestionUsed:!e.isFallback,isFallback:e.isFallback,requestDurationMs:t.requestDurationMs,suggestion:{defaultFrequency:e.defaultFrequency},defaults:{frequency:this.checkoutConfiguration.defaultFrequency}}})}get params(){var e;return{companyKey:this.checkoutConfiguration.company.key,campaignKey:this.checkoutConfiguration.campaign.key,elementKey:this.checkoutConfiguration.element.key,clientLocale:this.tracker.clientLocale,utmSource:(null===(e=this.checkoutConfiguration.external.utm)||void 0===e?void 0:e.source)||"",isFrequenciesAIEnabled:this.checkoutConfiguration.aiConfig.frequencies.enabled,enabledFrequencies:this.checkoutConfiguration.enabledFrequencies,hasExternalFrequency:this.checkoutConfiguration.hasExternalFrequency,externalFrequency:this.checkoutConfiguration.externalFrequency,userCountry:this.checkoutConfiguration.user.address.countryCode,checkoutType:this.checkoutConfiguration.checkoutType}}get donationDataPoint(){return this.checkoutState.donation.dataPoint}get allowedFrequencies(){return[W.ONCE,W.MONTHLY]}get isSuggestionRequestedAtLeastOnce(){return this.defaultFrequencyFetcher.getMeta().fetchCallsCount>0}shouldUseAdaptiveLogic(){return!this.checkoutConfiguration.infrastructureParams.showcase&&!this.checkoutConfiguration.infrastructureParams.isLighthouse}tryReapplyExternalAmount(){var e,t,n,i,s;const a=null===(t=null===(e=this.checkoutConfiguration.external.state)||void 0===e?void 0:e.donation)||void 0===t?void 0:t.amount,o=null===(i=null===(n=this.checkoutConfiguration.external.state)||void 0===n?void 0:n.donation)||void 0===i?void 0:i.currency;if(void 0===a)return;const r=this.checkoutConfiguration.campaign.config.defaultCurrency,c=this.donationDataPoint.currency;this.checkoutState.donation.setCurrency(r),this.checkoutConfiguration.enabledFrequencies.forEach((e=>{var t;this.checkoutState.donation.setFrequencyDefaultAmount(e,null!==(t=this.checkoutConfiguration.campaign.config.frequencies[e].defaultAmount)&&void 0!==t?t:0)})),this.checkoutState.donation.setDefaultAmountsApplied(),this.checkoutState.donation.setCurrency(null!=o?o:r),this.checkoutState.donation.setFrequencyDefaultAmount(this.donationDataPoint.frequency,a),this.checkoutState.donation.setCurrency(c);const l=null===(s=this.donationDataPoint.getFrequencyAmountHints(this.donationDataPoint.frequency))||void 0===s?void 0:s.find((e=>e.amount===a));l&&this.checkoutState.donation.setDonationsAmountHint(l)}canApply(){return!!this.checkoutConfiguration.donationSettings.isAdaptiveDefaultFrequencySuggestionEnabled&&(!this.checkoutConfiguration.isRestoredByWidgetSession&&(!!this.params.isFrequenciesAIEnabled&&(!!this.shouldUseAdaptiveLogic()&&(!(this.params.hasExternalFrequency&&this.params.externalFrequency&&this.allowedFrequencies.includes(this.params.externalFrequency))&&!(this.allowedFrequencies.length!==this.params.enabledFrequencies.length||!this.params.enabledFrequencies.every((e=>this.allowedFrequencies.includes(e))))))))}}class cO{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>!0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:JSON.stringify,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e=>e;this.defaultValue=e,this.makeRequest=t,this.shouldCacheResponse=n,this.getCacheKey=i,this.getResult=s,this._cachedValues=new Map,this.pendingObject=null}getCachedOrFetchValue(e){return(0,c.sH)(this,void 0,void 0,(function*(){var t;const n=this.getCacheKey(e);if(null===(t=this.pendingObject)||void 0===t?void 0:t.promise){if(this.pendingObject.cacheKey===n){const e=yield this.pendingObject.promise;return this.getResult(e,!1)}this.pendingObject.reject("Aborted"),this.pendingObject=null}const i=this._cachedValues.get(n);return i?Promise.resolve(this.getResult(i,!0)):this.makeRequestAndCacheValue(e)}))}makeRequestAndCacheValue(e){return(0,c.sH)(this,void 0,void 0,(function*(){const t=this.getCacheKey(e);this.pendingObject=this.initPendingObject(e,t);try{const n=yield this.pendingObject.promise;return this.shouldCacheResponse(e,n)&&this._cachedValues.set(t,n),this.getResult(n,!1)}catch(e){return this._cachedValues.delete(t),this.getResult(this.defaultValue,!1)}finally{this.pendingObject=null}}))}initPendingObject(e,t){let n=e=>{};return{promise:new Promise(((t,i)=>{n=i,this.makeRequest(e).then((e=>{ue.isSuccess(e)?t(e.successResult):t(this.defaultValue)})).catch(i)})),cacheKey:t,reject:n}}}const lO={isFallback:!0};class uO{constructor(e){this.sessionApi=e,this._suggestion=this.getResult(lO,!1),this._fetchSuggestion=e=>Promise.race([this.requestCacheService.getCachedOrFetchValue(e),new Promise((e=>setTimeout((()=>{e(this.getResult(lO,!1))}),1500)))]),this.requestCacheService=new cO(lO,e.getFeeCovering.bind(e),this.shouldCacheResponse,this.getCacheKey,this.getResult)}fetchSuggestion(e){return(0,c.sH)(this,void 0,void 0,(function*(){return this._suggestion=yield this._fetchSuggestion(e),this._suggestion}))}getSuggestion(){return this._suggestion}getCacheKey(e){return JSON.stringify(e)}shouldCacheResponse(e,t){return!t.isFallback}getResult(e,t){return{response:e,fromCache:t}}}function dO(){const e=new Date;return{eventTime:e.toISOString().split(".")[0]+"Z",clientWeekday:e.getDay(),clientHour:e.getHours(),clientTimeZone:bn()}}var hO,mO;!function(e){e.YES="yes",e.NO="no",e.UNKNOWN="unknown"}(hO||(hO={})),function(e){e.V3="v3",e.V4="v4"}(mO||(mO={}));class pO{constructor(e,t,n,i,s,a){this.checkoutConfiguration=e,this.checkoutState=t,this.tracker=n,this.feeCoveringSuggestionsFetcher=i,this.currencyService=s,this._options=a}tryFetchSuggestion(){return(0,c.sH)(this,void 0,void 0,(function*(){if(!this.canApply())return!1;const e=yield this.createGetSmartCoveringFeePayload();return null!==e&&(yield this.feeCoveringSuggestionsFetcher.fetchSuggestion(e),!0)}))}tryApplySuggestion(){if(!this.canApply())return;const e=this.feeCoveringSuggestionsFetcher.getSuggestion();e.response.isFallback||this.checkoutState.donation.setFeeCovered(e.response.feeCoveringSuggestion===D.XN.DEFAULT_YES)}tryTrackSuggestion(){if(!this.canApply())return;const e=this.feeCoveringSuggestionsFetcher.getSuggestion();e.fromCache||(this._options.version===mO.V4?(e.response.v3&&this.tracker.trackCheckoutCustomEvent({type:u.EXPERIMENT_ML_SMART_COVERING_FEE_V2_RESPONSE,data:this.prepareTrackDataForV3(e,!1)}),this.tracker.trackCheckoutCustomEvent({type:u.EXPERIMENT_ML_SMART_COVERING_FEE_V4_RESPONSE,data:this.prepareTrackDataForV4(e,!0)})):this.tracker.trackCheckoutCustomEvent({type:u.EXPERIMENT_ML_SMART_COVERING_FEE_V2_RESPONSE,data:this.prepareTrackDataForV3(e,!0)}))}get donationDataPoint(){return this.checkoutState.donation.dataPoint}canApply(){return!!this._options.isAdaptiveLogicEnabled&&this.checkoutConfiguration.campaign.config.includeFees===D.XN.SMART_COVERING&&!this.donationDataPoint.isCustomFeeCoveredValue&&!!this.shouldUseAdaptiveLogic()}createGetSmartCoveringFeePayload(){return(0,c.sH)(this,void 0,void 0,(function*(){var e,t,n,i,s,a;if(null===this.donationDataPoint.amountInUSD||null===this.donationDataPoint.getFrequencyDefaultAmount(this.donationDataPoint.frequency))return null;const o=this.currencyService.convert(this.checkoutConfiguration.defaultAmounts[this.donationDataPoint.frequency]||0,this.checkoutConfiguration.defaultCurrency,"USD"),r=this.currencyService.getRate(this.donationDataPoint.currency),c=this.checkoutState.preDonationUpsell.dataPoint.isShowed,l=this.checkoutState.preDonationUpsell.dataPoint.isAccepted,{eventTime:u}=dO();return{amountInUSD:this.donationDataPoint.amountInUSD,defaultAmountInUSD:o,currency:this.donationDataPoint.currency,companyKey:this.checkoutConfiguration.company.key,campaignKey:this.checkoutConfiguration.campaign.key,clientLocale:this.checkoutConfiguration.environmentConfig.locale,history:window.history.length,trackerClientId:this.tracker.clientId,elementLocale:this.checkoutConfiguration.element.locale,clientTimeZone:bn(),battery:null!==(e=this._options.clientBatteryLevel)&&void 0!==e?e:0,version:null!==(t=this._options.version)&&void 0!==t?t:mO.V3,eventTime:u,checkoutType:this.checkoutConfiguration.checkoutType,clientDeviceMemory:null!==(n=this._options.clientDeviceMemory)&&void 0!==n?n:0,clientDevicePixelRatio:null!==(i=this._options.clientDevicePixelRatio)&&void 0!==i?i:0,clientHardwareConcurrency:null!==(s=this._options.clientHardwareConcurrency)&&void 0!==s?s:0,clientConnectionDownlink:null!==(a=this._options.clientConnectionDownlink)&&void 0!==a?a:0,isInApp:this.checkoutConfiguration.infrastructureParams.isInAppBrowser,currencyRate:r,clientDoNotTrack:Boolean(this._options.clientDoNotTrack),upsellShown:c,upsellUsed:l,elementType:this.checkoutConfiguration.element.type}}))}shouldUseAdaptiveLogic(){return!this.checkoutConfiguration.infrastructureParams.showcase&&!this.checkoutConfiguration.infrastructureParams.isLighthouse}prepareTrackDataForV3(e,t){return e.response.v3?e.response.v3.isFallback?{isFallback:!0,isSuggestionUsed:!1}:{isFallback:e.response.v3.isFallback,feeCoveringSuggestion:e.response.v3.feeCoveringSuggestion,isSuggestionUsed:t}:this.prepareTrackDataForV4(e,t)}prepareTrackDataForV4(e,t){return e.response.isFallback?{isFallback:!0,isSuggestionUsed:!1}:{isFallback:e.response.isFallback,feeCoveringSuggestion:e.response.feeCoveringSuggestion,isSuggestionUsed:t}}}class gO{constructor(e,t,n,i){this.adaptiveDefaultFrequencyService=e,this.adaptiveAmountPresetsService=t,this.adaptivePreDonationUpsellSuggestionsService=n,this.onBeforeFetchSuggestion=i}tryFetchSuggestion(){return(0,c.sH)(this,void 0,void 0,(function*(){var e;null===(e=this.onBeforeFetchSuggestion)||void 0===e||e.call(this),yield Promise.all([this.adaptiveDefaultFrequencyService.tryFetchSuggestion(),this.adaptiveAmountPresetsService.tryFetchSuggestion()])}))}tryApplySuggestion(){this.adaptiveDefaultFrequencyService.tryApplySuggestion(),this.adaptiveAmountPresetsService.tryApplySuggestion()}tryTrackSuggestion(){var e;this.adaptiveDefaultFrequencyService.tryTrackSuggestion(),this.adaptiveAmountPresetsService.tryTrackSuggestion(),null===(e=this.adaptivePreDonationUpsellSuggestionsService)||void 0===e||e.tryTrackSuggestion()}}const yO={amount:0,currency:"",isFallback:!0};class fO{constructor(e){this.sessionApi=e,this.suggestion=yO,this.requestDurationMs=0,this.fetchCallsCount=0}getMeta(){return{requestDurationMs:this.requestDurationMs,fetchCallsCount:this.fetchCallsCount}}getSuggestion(){return this.suggestion}fetchSuggestion(e){return(0,c.sH)(this,void 0,void 0,(function*(){try{const t=performance.now(),n=yield Promise.race([this.timeoutPromise,this.fetchSuggestionFromApi(e)]);return ue.isSuccess(n)?this.suggestion=n.successResult:this.suggestion=yO,this.requestDurationMs=Math.round(performance.now()-t),ue.success(void 0)}catch(e){return this.suggestion=yO,this.requestDurationMs=0,ue.fail(void 0)}finally{this.fetchCallsCount++}}))}get timeoutPromise(){return new Promise((e=>{setTimeout((()=>{e(ue.success(yO))}),3e3)}))}fetchSuggestionFromApi(e){return this.sessionApi.post("getPduAmount",e)}}var EO,SO;!function(e){e.PAGES="pages",e.MODAL="modal"}(EO||(EO={})),function(e){e.V1="v1",e.V3="v3"}(SO||(SO={}));class vO{constructor(e,t,n,i,s,a,o){this.checkoutState=e,this.checkoutConfiguration=t,this.tracker=n,this.pduAmountsFetcher=i,this.currencyService=s,this.suggestions=a,this._options=o}tryFetchSuggestion(){return(0,c.sH)(this,void 0,void 0,(function*(){const e=yield this.getRequestParams(),t=yield this.pduAmountsFetcher.fetchSuggestion(e);return!ue.isFailure(t)}))}tryApplySuggestion(){const e=this.pduAmountsFetcher.getSuggestion();if(!e||e.isFallback)return;const t=this.adjustSuggestion(e,this.postDonationUpsellDataPoint.upsellMinAmount);this.checkoutState.postDonationUpsell.setUpsellCustomAmount(t.amount)}tryTrackSuggestion(){const e=this.pduAmountsFetcher.getSuggestion(),t=this.pduAmountsFetcher.getMeta();this.tracker.trackCheckoutCustomEvent({type:u.EXPERIMENT_ML_POST_DONATION_UPSELL_AMOUNT_SUGGESTION,data:{suggestion:e,requestDurationMs:t.requestDurationMs,suggestionFetchCallsCount:t.fetchCallsCount}})}get postDonationUpsellDataPoint(){return this.checkoutState.postDonationUpsell.dataPoint}get donationDataPoint(){return this.checkoutState.donation.dataPoint}getMaxSumInCorrectCurrency(){return this.currencyService.fromFloat(this.currencyService.convert(1e3,"USD",this.donationDataPoint.currency),this.donationDataPoint.currency)}getRequestParams(){return(0,c.sH)(this,void 0,void 0,(function*(){var e,t;const n=new Date;return{clientId:this.tracker.clientId,utmSource:(null===(e=this.checkoutConfiguration.external.utm)||void 0===e?void 0:e.source)||"",source:this.checkoutConfiguration.checkoutType,version:SO.V3,companyKey:this.checkoutConfiguration.company.key,checkoutWidgetKey:this.checkoutConfiguration.campaign.key,checkoutCurrency:this.donationDataPoint.currency,checkoutInUsdAmount:null!==(t=this.donationDataPoint.amountInUSD)&&void 0!==t?t:0,checkoutCurrencyRate:this.currencyService.getRate(this.donationDataPoint.currency),clientWeekday:n.getDay(),clientHour:n.getHours(),clientTimeZone:bn(),clientLocale:this.checkoutConfiguration.environmentConfig.locale,clientDevicePixelRatio:this._options.clientDevicePixelRatio,clientBatteryLevel:this._options.clientBatteryLevel,clientDeviceMemory:this._options.clientDeviceMemory,clientHardwareConcurrency:this._options.clientHardwareConcurrency,clientConnectionDownlink:this._options.clientConnectionDownlink,clientConnectionType:this._options.clientConnectionType,clientDoNotTrack:Boolean(this._options.clientDoNotTrack)}}))}adjustSuggestion(e,t){const{amount:n,currency:i}=e,s=this.currencyService.convert(n,i,this.donationDataPoint.currency);let a=s;s<=t&&(a=t);const o=this.getMaxSumInCorrectCurrency();return s>o&&(a=o),Object.assign(Object.assign({},e),{amount:this.suggestions.beautify(a,this.donationDataPoint.currency)})}}class AO{constructor(e){this.isAdaptiveSuggestionFetched=!1,this.adaptivePreDonationUpsellSuggestionsFetcher=e.adaptivePreDonationUpsellSuggestionsFetcher,this.checkoutConfiguration=e.checkoutConfiguration,this.checkoutState=e.checkoutState,this.currencyService=e.currencyService,this.suggestionsService=e.suggestionsService,this.tracker=e.tracker,this.shouldRequestUpsellAmounts=e.shouldRequestUpsellAmounts}tryFetchSuggestion(){return(0,c.sH)(this,void 0,void 0,(function*(){var e;return!!this.shouldFetchSuggestion&&null!==this.donationDataPoint.amount&&null!==this.donationDataPoint.amountInUSD&&(yield this.adaptivePreDonationUpsellSuggestionsFetcher.fetchSuggestion(Object.assign(Object.assign({},dO()),{companyName:this.checkoutConfiguration.company.name,clientLocale:this.checkoutConfiguration.environmentConfig.locale,checkoutCampaignKey:this.checkoutConfiguration.campaign.key,checkoutCurrency:this.donationDataPoint.currency,checkoutAmount:this.donationDataPoint.amount,checkoutInUsdAmount:this.donationDataPoint.amountInUSD,checkoutCurrencyRate:this.currencyService.getRate(this.donationDataPoint.currency),checkoutDefaultAmount:null!==(e=this.donationDataPoint.getFrequencyDefaultAmount(this.donationDataPoint.frequency))&&void 0!==e?e:0,shouldRequestUpsellAmounts:this.shouldRequestUpsellAmounts})),this.isAdaptiveSuggestionFetched=!0,!0)}))}tryApplySuggestion(){this.adaptivePreDonationUpsellSuggestionsFetcher.getSuggestion().showUpsell===hO.NO&&this.checkoutState.preDonationUpsell.setSuggestedAvailability(!1);const e=this.getAdjustedAmounts();e&&this.checkoutState.preDonationUpsell.setSuggestedAmounts(...e)}tryTrackSuggestion(){if(!this.isAdaptiveSuggestionFetched)return;const e=this.adaptivePreDonationUpsellSuggestionsFetcher.getSuggestion();this.tracker.trackCheckoutCustomEvent({type:u.EXPERIMENT_ML_PRE_DONATION_UPSELL_RESPONSE,data:{showUpsell:e.showUpsell}}),this.shouldRequestUpsellAmounts&&this.tracker.trackCheckoutCustomEvent({type:u.EXPERIMENT_ML_PRE_DONATION_UPSELL_AMOUNT_SUGGESTION,data:{isFallback:"number"!=typeof e.primaryAmount||"number"!=typeof e.secondaryAmount,primaryAmount:e.primaryAmount,secondaryAmount:e.secondaryAmount}})}resetSuggestionApplication(){this.checkoutState.preDonationUpsell.resetSuggestedAvailability(),this.checkoutState.preDonationUpsell.resetSuggestedAmounts()}get donationDataPoint(){return this.checkoutState.donation.dataPoint}get shouldFetchSuggestion(){return!(!this.checkoutConfiguration.preDonationUpsellSettings.isAdaptiveSuggestionEnabled||!this.preDonationUpsellDataPoint.isEnabled||this.preDonationUpsellDataPoint.upsellFrequency!==W.MONTHLY&&this.preDonationUpsellDataPoint.upsellFrequency!==W.EVERY_4_WEEKS)}get preDonationUpsellDataPoint(){return this.checkoutState.preDonationUpsell.dataPoint}getAdjustedAmounts(){const e=this.adaptivePreDonationUpsellSuggestionsFetcher.getSuggestion(),t=e.primaryAmount,n=e.secondaryAmount;if("number"!=typeof t||"number"!=typeof n)return;const i=this.preDonationUpsellDataPoint.upsellCurrency,s=this.donationDataPoint.getFrequencyMinimalAmount(this.preDonationUpsellDataPoint.upsellFrequency),[a,o]=[t,n].map((e=>this.suggestionsService.beautify(this.currencyService.convert(this.currencyService.fromFloat(e,"USD"),"USD",i),i)));return a<s||o<s?void 0:[a,o]}}class CO{constructor(e){this.isAdaptiveSuggestionFetched=!1,this.adaptivePreDonationUpsellSuggestionsFetcher=e.adaptivePreDonationUpsellSuggestionsFetcher,this.checkoutConfiguration=e.checkoutConfiguration,this.checkoutState=e.checkoutState,this.currencyService=e.currencyService,this.suggestionsService=e.suggestionsService,this.tracker=e.tracker,this.useShowUpsell=e.useShowUpsell,this.useAmounts=e.useAmounts}tryFetchSuggestion(){return(0,c.sH)(this,void 0,void 0,(function*(){var e,t,n,i,s,a,o,r,c;if(!this.shouldFetchSuggestion)return!1;if(null===this.donationDataPoint.amount||null===this.donationDataPoint.amountInUSD)return!1;const l=null===(e=this.tracker.page)||void 0===e?void 0:e.toObject();return yield this.adaptivePreDonationUpsellSuggestionsFetcher.fetchSuggestion(Object.assign(Object.assign({},dO()),{clientLocale:this.checkoutConfiguration.environmentConfig.locale,clientId:this.tracker.clientId,amountUsd:this.donationDataPoint.amountInUSD,currency:this.donationDataPoint.currency,currencyRate:this.currencyService.getRate(this.donationDataPoint.currency),companyKey:this.checkoutConfiguration.company.key,campaignKey:this.checkoutConfiguration.campaign.key,utmSource:null!==(n=null===(t=this.checkoutConfiguration.external.utm)||void 0===t?void 0:t.source)&&void 0!==n?n:"",clientDeviceMemory:null!==(i=null==l?void 0:l.clientDeviceMemory)&&void 0!==i?i:1,clientDevicePixelRatio:null!==(s=null==l?void 0:l.clientDevicePixelRatio)&&void 0!==s?s:1,clientHardwareConcurrency:null!==(a=null==l?void 0:l.clientHardwareConcurrency)&&void 0!==a?a:1,clientBatteryLevel:null!==(o=null==l?void 0:l.clientBatteryLevel)&&void 0!==o?o:1,clientDoNotTrack:null!==(r=null==l?void 0:l.clientDoNotTrack)&&void 0!==r?r:1,clientConnectionDownlink:null!==(c=null==l?void 0:l.clientConnectionDownlink)&&void 0!==c?c:1,isCheckoutPage:this.checkoutConfiguration.checkoutType===Ce.PAGE})),this.isAdaptiveSuggestionFetched=!0,!0}))}tryApplySuggestion(){this.tryApplyShowUpsell(),this.tryApplyAmounts()}tryTrackSuggestion(){if(!this.isAdaptiveSuggestionFetched)return;const e=this.adaptivePreDonationUpsellSuggestionsFetcher.getSuggestion();this.tracker.trackCheckoutCustomEvent({type:u.EXPERIMENT_ML_PRE_DONATION_UPSELL_V2_RESPONSE,data:{showUpsell:e.showUpsell,primaryAmount:e.primaryAmount,secondaryAmount:e.secondaryAmount}})}resetSuggestionApplication(){this.checkoutState.preDonationUpsell.resetSuggestedAvailability(),this.checkoutState.preDonationUpsell.resetSuggestedAmounts()}get donationDataPoint(){return this.checkoutState.donation.dataPoint}get shouldFetchSuggestion(){return!(!this.checkoutConfiguration.preDonationUpsellSettings.isAdaptiveSuggestionEnabled||!this.preDonationUpsellDataPoint.isEnabled||this.preDonationUpsellDataPoint.upsellFrequency!==W.MONTHLY&&this.preDonationUpsellDataPoint.upsellFrequency!==W.EVERY_4_WEEKS)}get preDonationUpsellDataPoint(){return this.checkoutState.preDonationUpsell.dataPoint}tryApplyShowUpsell(){if(!this.useShowUpsell)return;const e=this.adaptivePreDonationUpsellSuggestionsFetcher.getSuggestion();e.showUpsell!==hO.UNKNOWN&&this.checkoutState.preDonationUpsell.setSuggestedAvailability(e.showUpsell===hO.YES)}tryApplyAmounts(){if(!this.useAmounts)return;const e=this.getAdjustedAmounts();e&&this.checkoutState.preDonationUpsell.setSuggestedAmounts(...e)}getAdjustedAmounts(){const e=this.adaptivePreDonationUpsellSuggestionsFetcher.getSuggestion(),t=e.primaryAmount,n=e.secondaryAmount;if(0===t&&0===n)return;if("number"!=typeof t||isNaN(t)||"number"!=typeof n||isNaN(n))return;const i=this.preDonationUpsellDataPoint.upsellCurrency,s=this.donationDataPoint.getFrequencyMinimalAmount(this.preDonationUpsellDataPoint.upsellFrequency),[a,o]=[t,n].map((e=>this.suggestionsService.beautify(this.currencyService.convert(e,"USD",i),i)));return a<s||o<s?void 0:[a,o]}}function PO(e,t){let n=null;return function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return new Promise(((i,a)=>{null!==n&&(clearTimeout(n),n=null),n=setTimeout((()=>{e(...s).then(i).catch(a)}),t)}))}}const NO={showUpsell:hO.UNKNOWN};class bO{constructor(e){this.suggestion=NO,this.requestCacheService=new cO(NO,(t=>e.getNextScreen(t,null)),((e,t)=>this.shouldCacheResponse(e,t)),(e=>this.getCacheKey(e))),this.fetchSuggestionWithDebounce=PO((e=>this.getCachedOrFetchValue(e)),300)}fetchSuggestion(e){return this.fetchSuggestionWithDebounce(e)}getSuggestion(){return this.suggestion}shouldCacheResponse(e,t){return t.showUpsell!==hO.UNKNOWN&&null!==t.primaryAmount&&null!==t.secondaryAmount}getCacheKey(e){return JSON.stringify({eventTime:new Date(e.eventTime).toLocaleTimeString(e.clientLocale,{hour:"2-digit",weekday:"long"}),clientTimeZone:e.clientTimeZone,clientLocale:e.clientLocale,checkoutCurrency:e.checkoutCurrency,checkoutAmount:e.checkoutAmount,checkoutInUsdAmount:e.checkoutInUsdAmount,checkoutDefaultAmount:e.checkoutDefaultAmount})}getCachedOrFetchValue(e){return(0,c.sH)(this,void 0,void 0,(function*(){return this.suggestion=yield this.requestCacheService.getCachedOrFetchValue(e),this.suggestion}))}}var DO;!function(e){e.V2="v2"}(DO||(DO={}));const TO={showUpsell:hO.YES,primaryAmount:null,secondaryAmount:null};class _O{constructor(e){this.suggestion=TO,this.requestCacheService=new cO(TO,(t=>e.getNextScreen(t,DO.V2)),((e,t)=>this.shouldCacheResponse(e,t)),(e=>this.getCacheKey(e))),this.fetchSuggestionWithDebounce=PO((e=>this.getCachedOrFetchValue(e)),500)}fetchSuggestion(e){return this.fetchSuggestionWithDebounce(e)}getSuggestion(){return this.suggestion}shouldCacheResponse(e,t){return t.showUpsell!==hO.UNKNOWN&&null!==t.primaryAmount&&null!==t.secondaryAmount}getCacheKey(e){return JSON.stringify({eventTime:new Date(e.eventTime).toLocaleTimeString(e.clientLocale,{hour:"2-digit",weekday:"long"}),clientLocale:e.clientLocale,amountUsd:e.amountUsd,currency:e.currency,currencyRate:e.currencyRate,companyKey:e.companyKey,campaignKey:e.campaignKey})}getCachedOrFetchValue(e){return(0,c.sH)(this,void 0,void 0,(function*(){return this.suggestion=yield this.requestCacheService.getCachedOrFetchValue(e),this.suggestion}))}}class kO{constructor(e){this.adaptiveSuggestionsService=e}tryApply(){return(0,c.sH)(this,void 0,void 0,(function*(){yield this.adaptiveSuggestionsService.tryFetchSuggestion(),this.adaptiveSuggestionsService.tryApplySuggestion()}))}}class OO{constructor(e,t){this.checkoutConfiguration=e,this.checkoutState=t}tryApply(){var e,t;(null===(e=this.checkoutConfiguration.external.flow)||void 0===e?void 0:e.type)&&(null===(t=this.checkoutConfiguration.external.flow)||void 0===t?void 0:t.type)!==Ft.MONEY||(this.tryApplyEnabledAmountHints(),this.tryApplyFrequency(),this.tryApplyCurrencyAndAmount(),this.tryApplyAmountHint(),this.tryApplyEndDate(),this.tryApplyFeeCovered())}get currentFrequency(){return this.checkoutState.donation.dataPoint.frequency}get currentCurrency(){return this.checkoutState.donation.dataPoint.currency}tryApplyEnabledAmountHints(){var e,t,n,i;const s=null===(t=null===(e=this.checkoutConfiguration.external.state)||void 0===e?void 0:e.donation)||void 0===t?void 0:t.enabledAmountHintsIds,a=null===(i=null===(n=this.checkoutConfiguration.external.state)||void 0===n?void 0:n.donation)||void 0===i?void 0:i.amountHintId;(s||a)&&Object.values(W).forEach((e=>{const t=[];if(a&&t.push(a),(null==s?void 0:s[e])&&t.push(...s[e]),t.length){const n=[...new Set(t)];this.checkoutState.donation.setFrequencyAmountHints(e,n,this.currentCurrency),this.checkoutState.donation.setDefaultAmountsApplied()}}))}tryApplyFrequency(){var e,t;const n=null===(t=null===(e=this.checkoutConfiguration.external.state)||void 0===e?void 0:e.donation)||void 0===t?void 0:t.frequency;n&&this.checkoutState.donation.setDonationsFrequency(n)}tryApplyCurrencyAndAmount(){var e,t,n,i;const s=null===(t=null===(e=this.checkoutConfiguration.external.state)||void 0===e?void 0:e.donation)||void 0===t?void 0:t.currency,a=null===(i=null===(n=this.checkoutConfiguration.external.state)||void 0===n?void 0:n.donation)||void 0===i?void 0:i.amount,o=this.currentCurrency;s&&(this.checkoutState.donation.setCurrency(s),void 0!==a&&this.checkoutState.donation.setFrequencyDefaultAmount(this.currentFrequency,a),this.checkoutState.donation.dataPoint.isCurrencyEditableForFrequency(this.currentFrequency)||this.checkoutState.donation.setCurrency(o)),s||void 0===a||(this.checkoutState.donation.setCurrency(this.checkoutConfiguration.defaultCurrency),this.checkoutState.donation.setFrequencyDefaultAmount(this.currentFrequency,a),this.checkoutState.donation.setCurrency(o))}tryApplyAmountHint(){var e,t,n,i,s,a;const o=null===(t=null===(e=this.checkoutConfiguration.external.state)||void 0===e?void 0:e.donation)||void 0===t?void 0:t.amountHintId,r=null===(i=null===(n=this.checkoutConfiguration.external.state)||void 0===n?void 0:n.donation)||void 0===i?void 0:i.amount;if(o){const e=null===(s=this.checkoutState.donation.dataPoint.getFrequencyAmountHints(this.currentFrequency))||void 0===s?void 0:s.find((e=>e.id===o));e&&this.checkoutState.donation.setDonationsAmountHint(e)}if(void 0!==r){const e=null===(a=this.checkoutState.donation.dataPoint.getFrequencyAmountHints(this.currentFrequency))||void 0===a?void 0:a.find((e=>e.amount===r));e&&this.checkoutState.donation.setDonationsAmountHint(e)}}tryApplyEndDate(){var e,t,n,i;const s=null===(t=null===(e=this.checkoutConfiguration.external.state)||void 0===e?void 0:e.donation)||void 0===t?void 0:t.isEndDateSelected,a=null===(i=null===(n=this.checkoutConfiguration.external.state)||void 0===n?void 0:n.donation)||void 0===i?void 0:i.isEndDateEnabled;this.checkoutState.donation.setDonationsEndDateActive(!s||!!a)}tryApplyFeeCovered(){var e,t;const n=null===(t=null===(e=this.checkoutConfiguration.external.state)||void 0===e?void 0:e.donation)||void 0===t?void 0:t.isFeeCovered;void 0!==n&&this.checkoutState.donation.setFeeCovered(n,{isCustomFeeCoveredValue:!0})}}class IO{constructor(e,t,n,i,s){this.checkoutConfiguration=e,this.checkoutState=t,this.sessionService=n,this.sessionTokenService=i,this.initialScreenDecider=s}apply(e,t){this.checkoutConfiguration.setRestoredByWidgetSession(),this.sessionTokenService.setToken(e),this.initialScreenDecider.setScreensHistoryForRestore(t.screenHistory),this.sessionService.setRestoreSessionData(t),this.applyComment(t),this.applyTribute(t),this.applyDonation(t),this.applyCustomer(t),this.applyMailingAddress(t),this.applyPayment(t),this.applyElement(t)}applyComment(e){e.comment&&(this.checkoutState.comment.saveComment(e.comment),this.checkoutState.comment.setIsActive(!0))}applyTribute(e){var t;(null===(t=e.tribute)||void 0===t?void 0:t.inHonorOf)&&(this.checkoutState.tribute.setTributeeName(e.tribute.inHonorOf),this.checkoutState.tribute.setActive(!0))}prepareGoals(e){var t;const n=[];for(const i of e.donation.donationItems)i.goal&&n.push({id:i.goal.key,name:i.goal.name,code:null!==(t=i.goal.code)&&void 0!==t?t:null,parentId:null,repeat:gN(i.frequency),default:null});return n}applyDonation(e){var t;const n=e.donation.items[0].frequency;if(this.applyPreDonationUpsell(e),this.applyEmployerUpsell(e),this.applyDonationItems(e),this.checkoutState.donation.setCurrency(e.donation.currency),this.applyGoals(e),e.donation.suggestedAmountHint){const i=null===(t=this.checkoutState.donation.dataPoint.getFrequencyAmountHints(n))||void 0===t?void 0:t.find((t=>t.id===e.donation.suggestedAmountHint));i&&this.checkoutState.donation.setDonationsAmountHint(i)}this.checkoutState.donation.setFeeCovered(Boolean(e.donation.publicFee),{isCustomFeeCoveredValue:!0}),e.donation.giftAid&&(e.donation.giftAid.shown&&this.checkoutState.giftAid.setShowed(),e.donation.giftAid.claimed&&this.checkoutState.giftAid.accept())}applyPreDonationUpsell(e){if(e.donation.upsell){this.checkoutState.donation.setDonationsAmount(e.donation.upsell.fromAmount),this.checkoutState.donation.setCurrency(e.donation.upsell.currency),this.checkoutState.donation.setDonationsFrequency(W.ONCE),e.donation.upsell.showed&&this.checkoutState.preDonationUpsell.setShowed(),e.donation.upsell.used&&this.checkoutState.preDonationUpsell.confirm(!0);const t=e.donation.items[0];this.checkoutState.donation.setDonationsAmount(t.amount),this.checkoutState.donation.setDonationsFrequency(t.frequency),this.checkoutState.donation.setCurrency(e.donation.currency)}}applyEmployerUpsell(e){if(e.donation.employerUpsell){this.checkoutState.donation.setDonationsAmount(e.donation.employerUpsell.initialAmount),this.checkoutState.donation.setCurrency(e.donation.employerUpsell.currency),this.checkoutState.doubleTheDonation.setUpsellShowed(e.donation.employerUpsell.showed),e.donation.employerUpsell.used&&this.checkoutState.doubleTheDonation.setUpsellAccepted(),this.applyEmployer(e);const t=e.donation.items[0];this.checkoutState.donation.setDonationsAmount(t.amount),this.checkoutState.donation.setCurrency(e.donation.currency)}}applyDonationItems(e){var t;const n=e.donation.items[0];if(null===(t=e.donation.donationItems)||void 0===t?void 0:t.length){e.donation.donationItems.forEach((e=>{this.checkoutState.donation.addDonation()})),this.checkoutState.donation.removeDonation(this.checkoutState.donation.dataPoint.donationItemsDto[0].id);const t=this.checkoutState.donation.dataPoint.donationItemsDto;for(let n=0;n<t.length;n++){const i=t[n],s=e.donation.donationItems[n].amount;this.checkoutState.donation.setDonationAmount(i.id,s)}}else this.checkoutState.donation.setDonationsAmount(n.amount);this.checkoutState.donation.setDonationsFrequency(n.frequency)}applyGoals(e){var t;(null===(t=e.donation.donationItems)||void 0===t?void 0:t.length)&&this.checkoutState.designations.setSelectedGoals(this.prepareGoals(e));const n=e.donation.items[0];n.goalKey&&this.checkoutState.designation.setGoal(n.goalKey)}applyCustomer(e){var t,n;if(this.checkoutState.privacy.setDonorTitle(e.customer.title),this.checkoutState.privacy.setDonorFirstName(e.customer.firstName),this.checkoutState.privacy.setDonorLastName(e.customer.lastName),e.customer.email&&this.checkoutState.privacy.setDonorEmail(e.customer.email),this.checkoutState.privacy.setPhoneNumber(e.customer.phone),this.checkoutState.privacy.setPhoneCleanNumber(e.customer.phone),e.customer.onBehalfOf&&(this.checkoutState.privacy.setOnBehalfOfCompanyName(e.customer.onBehalfOf),this.checkoutState.privacy.setOnBehalfOfActive(!0)),e.customer.anonymousChecked&&this.checkoutState.privacy.setDonateAnonymousChecked(e.customer.anonymousChecked),e.customer.termsChecked&&this.checkoutState.privacy.setTermsAndConditionsAccepted(e.customer.termsChecked),(null===(t=e.customer.consent)||void 0===t?void 0:t.type)===D.Au.GENERAL){const t=e.customer.consent.general===D.Bg.OPTED_IN;e.customer.consent.general!==D.Bg.NOT_SUBMITTED&&this.checkoutState.communicationConsent.setGeneralConsentShown(),this.checkoutState.communicationConsent.setGeneralConsentState(t)}if((null===(n=e.customer.consent)||void 0===n?void 0:n.type)===D.Au.CUSTOMIZED){const t=Object.keys(e.customer.consent.customized),n=t.some((t=>{var n;return(null===(n=e.customer.consent)||void 0===n?void 0:n.customized[t])!==D.Bg.NOT_SUBMITTED}));n&&this.checkoutState.communicationConsent.setCustomizedConsentShown(),t.forEach((t=>{var n;const i=(null===(n=e.customer.consent)||void 0===n?void 0:n.customized[t])===D.Bg.OPTED_IN;this.checkoutState.communicationConsent.setCustomizedChannelState(t,i)}))}}applyEmployer(e){var t,n;e.employer&&this.checkoutState.doubleTheDonation.setEmployerName(e.employer.name),e.employerDTD&&this.checkoutState.doubleTheDonation.setEmployerData({id:e.employerDTD.id,company_name:e.employerDTD.companyName,minimumMatchedAmount:null!==(t=e.employerDTD.minimumMatchedAmount)&&void 0!==t?t:0,ratio:(n=e.employerDTD.ratio,n?0===n.length?[1,1]:n:[1,1])})}applyMailingAddress(e){e.address&&(this.checkoutState.mailingAddress.setLine1(e.address.line1),e.address.line2&&this.checkoutState.mailingAddress.setLine2(e.address.line2),e.address.city&&this.checkoutState.mailingAddress.setCity(e.address.city),e.address.region&&this.checkoutState.mailingAddress.setRegion(e.address.region),this.checkoutState.mailingAddress.setPostal(e.address.postal),this.checkoutState.mailingAddress.setCountryCode(e.address.countryCode))}applyPayment(e){e.payment.clientPaymentMethod&&(this.checkoutState.paymentOptions.setPaymentMethod(e.payment.clientPaymentMethod),this.checkoutState.paymentOptions.setPaymentOption(e.payment.clientPaymentMethod),this.checkoutState.paymentOptions.setPreSelectedPaymentOption(e.payment.clientPaymentMethod))}applyElement(e){var t,n,i,s;(e.element||e.reminder)&&this.checkoutConfiguration.restoreElement({key:null===(t=null==e?void 0:e.element)||void 0===t?void 0:t.key,type:null===(n=null==e?void 0:e.element)||void 0===n?void 0:n.type,reminderKey:null===(i=null==e?void 0:e.reminder)||void 0===i?void 0:i.key,locale:null===(s=null==e?void 0:e.element)||void 0===s?void 0:s.defaultLocale})}}class xO{constructor(e){this.sessionAPI=e,this.data=null}fetchData(e,t){return(0,c.sH)(this,void 0,void 0,(function*(){const n=yield this.sessionAPI.post("restore",{clientId:t},{sessionToken:e});return ue.isSuccess(n)&&n.successResult&&(this.data=n.successResult),this.data}))}}class wO{constructor(e,t,n){this.checkoutConfiguration=e,this.checkoutRestoreDataFetcher=t,this.checkoutRestoreDataApplier=n}tryApply(){return(0,c.sH)(this,void 0,void 0,(function*(){var e,t;const n=null===(e=this.checkoutConfiguration.external.restore)||void 0===e?void 0:e.token,i=null===(t=this.checkoutConfiguration.external.restore)||void 0===t?void 0:t.clientId;if(!n||!i)return!1;const s=yield this.checkoutRestoreDataFetcher.fetchData(n,i);return!!s&&(this.checkoutRestoreDataApplier.apply(n,s),!0)}))}}class RO extends hN{constructor(e,t,n,i,s,a,o,r,c,l){super(),this.designationStateService=e,this.designationsStateService=t,this.preDonationUpsellStateService=n,this.doubleTheDonationStateService=i,this.giftAidStateService=s,this.mailingAddressStateService=a,this.postDonationUpsellStateService=o,this.paymentOptionsStateService=r,this.communicationConsentStateService=c,this.remindMeLaterStateService=l}synchronize(){this.syncDesignation(),this.syncDesignations(),this.syncPreDonationUpsell(),this.syncDoubleTheDonation(),this.syncGiftAid(),this.syncMailingAddress(),this.syncPostDonationUpsell(),this.syncPaymentOptions(),this.syncCommunicationConsent(),this.syncRemindMeLater()}onDonationChange(){this.syncDesignation(),this.syncDesignations(),this.syncPreDonationUpsell(),this.syncDoubleTheDonation(),this.syncMailingAddress(),this.syncPostDonationUpsell(),this.syncPaymentOptions()}onDesignationChange(){this.syncPreDonationUpsell(),this.syncPostDonationUpsell()}onDesignationsChange(){this.syncPreDonationUpsell(),this.syncPostDonationUpsell()}onTributeChange(){this.syncPreDonationUpsell(),this.syncPostDonationUpsell()}onPrivacyChange(){this.syncDoubleTheDonation(),this.syncGiftAid(),this.syncCommunicationConsent(),this.syncRemindMeLater()}onGiftAidChange(){this.syncMailingAddress()}onPaymentOptionsChange(){this.syncMailingAddress(),this.syncPostDonationUpsell()}onMailingAddressChange(){this.syncCommunicationConsent()}syncDesignation(){this.designationStateService.synchronize(),this.onDesignationChange()}syncDesignations(){this.designationsStateService.synchronize(),this.onDesignationsChange()}syncPreDonationUpsell(){this.preDonationUpsellStateService.synchronize()}syncDoubleTheDonation(){this.doubleTheDonationStateService.synchronize()}syncGiftAid(){this.giftAidStateService.synchronize(),this.onGiftAidChange()}syncMailingAddress(){this.mailingAddressStateService.synchronize(),this.onMailingAddressChange()}syncPostDonationUpsell(){this.postDonationUpsellStateService.synchronize()}syncPaymentOptions(){this.paymentOptionsStateService.synchronize(),this.onPaymentOptionsChange()}syncCommunicationConsent(){this.communicationConsentStateService.synchronize()}syncRemindMeLater(){this.remindMeLaterStateService.synchronize()}}var MO,LO,UO;!function(e){e.ICELAND="IS",e.SOUTH_KOREA="KR",e.TURKEY="TR"}(MO||(MO={})),function(e){e.CANADA_QUEBEC="Quebec",e.US_CALIFORNIA="California",e.US_COLORADO="Colorado",e.US_OREGON="Oregon"}(LO||(LO={})),function(e){e.US_COLORADO="CO",e.US_OREGON="OR"}(UO||(UO={})),D.tg.AUSTRIA,D.tg.BELGIUM,D.tg.BULGARIA,D.tg.HUNGARY,D.tg.GERMANY,D.tg.GREECE,D.tg.DENMARK,D.tg.IRELAND,D.tg.SPAIN,D.tg.ITALY,D.tg.CYPRUS,D.tg.LATVIA,D.tg.LITHUANIA,D.tg.LUXEMBOURG,D.tg.MALTA,D.tg.NETHERLANDS,D.tg.POLAND,D.tg.PORTUGAL,D.tg.ROMANIA,D.tg.SLOVAKIA,D.tg.SLOVENIA,D.tg.FINLAND,D.tg.FRANCE,D.tg.CROATIA,D.tg.CZECH_REPUBLIC,D.tg.SWEDEN,D.tg.ESTONIA,D.tg.UNITED_KINGDOM,MO.ICELAND,D.tg.NORWAY,D.tg.LIECHTENSTEIN,D.tg.SWITZERLAND,D.tg.CANADA,LO.CANADA_QUEBEC,D.tg.UNITED_STATES,LO.US_CALIFORNIA;const FO=[D.tg.AUSTRIA,D.tg.BELGIUM,D.tg.BULGARIA,D.tg.HUNGARY,D.tg.GERMANY,D.tg.GREECE,D.tg.DENMARK,D.tg.IRELAND,D.tg.SPAIN,D.tg.ITALY,D.tg.CYPRUS,D.tg.LATVIA,D.tg.LITHUANIA,D.tg.LUXEMBOURG,D.tg.MALTA,D.tg.NETHERLANDS,D.tg.POLAND,D.tg.PORTUGAL,D.tg.ROMANIA,D.tg.SLOVAKIA,D.tg.SLOVENIA,D.tg.FINLAND,D.tg.FRANCE,D.tg.CROATIA,D.tg.CZECH_REPUBLIC,D.tg.SWEDEN,D.tg.ESTONIA,D.tg.NORWAY,D.tg.LIECHTENSTEIN,D.tg.SWITZERLAND,D.tg.UNITED_KINGDOM,D.tg.BRAZIL,D.tg.AUSTRALIA,D.tg.INDIA,D.tg.CANADA,MO.ICELAND,MO.SOUTH_KOREA],jO=[...FO,nb.t.JAPAN,nb.t.THAILAND,nb.t.INDONESIA,nb.t.HONG_KONG,MO.TURKEY],BO=[{country:nb.t.UNITED_STATES,region:LO.US_COLORADO,regionCode:UO.US_COLORADO},{country:nb.t.UNITED_STATES,region:LO.US_OREGON,regionCode:UO.US_OREGON}];class GO{static isBasedOnGeoCountry(e){return jO.includes(e)}static isBasedOnGeoAndAddressRegion(e){let{geoCountry:t,geoRegion:n,addressCountry:i,addressRegionCode:s}=e;return BO.some((e=>{let{country:a,region:o,regionCode:r}=e;return a===t&&o===n||a===i&&r===s}))}}const qO=FO;class HO{static isBasedOnGeoCountry(e){return qO.includes(e)}}class VO extends pN{constructor(e,t){super(t),this.checkoutConfiguration=e,this.dataPointRegistry=t}synchronize(){this.checkoutConfiguration.infrastructureParams.showcase||(this.synchronizePhoneNumberConsent(),this.synchronizeMailingAddressConsent())}get communicationConsentDataPoint(){return this.dataPointRegistry.getDataPoint(Hr.COMMUNICATION_CONSENT)}synchronizePhoneNumberConsent(){const e=this.dataPointRegistry.getDataPoint(Hr.PHONE_NUMBER).isFullPhoneNumberFilled();this.communicationConsentDataPoint.computed.setPhoneNumberConsentEnabled(e)}synchronizeMailingAddressConsent(){const e=this.dataPointRegistry.getDataPoint(Hr.MAILING_ADDRESS),t=e.checkShouldValidateOnServer()&&!e.isSkipped;this.communicationConsentDataPoint.computed.setMailingAddressConsentEnabled(t),this.communicationConsentDataPoint.computed.setGDPRPolicy(this.getGDPRPolicy(e.countryCode,e.region))}getGDPRPolicy(e,t){return{customizedConsent:{basedOnGeoCountry:GO.isBasedOnGeoCountry(this.checkoutConfiguration.user.address.countryCode),basedOnGeoAndAddressRegion:GO.isBasedOnGeoAndAddressRegion({geoCountry:this.checkoutConfiguration.user.address.countryCode,geoRegion:this.checkoutConfiguration.user.address.region,addressCountry:e,addressRegionCode:t})},generalConsent:{basedOnGeoCountry:HO.isBasedOnGeoCountry(this.checkoutConfiguration.user.address.countryCode)}}}}class KO extends pN{constructor(e){super(e),this.dataPointRegistry=e}synchronize(){const e=gN(this.dataPointRegistry.getDataPoint(WN.DONATION).frequency);this.designationDataPoint.hasSelectedGoalWithRepeat(e)||this.designationDataPoint.setComputedGoalKeyByGoalRepeat(e)}get designationDataPoint(){return this.dataPointRegistry.getDataPoint(Hr.DESIGNATION)}}class YO{constructor(e){this.dataPointRegistry=e}getAvailableGoals(){const e=[];for(const t of this.designationsDataPoint.allGoals)this.isGoalAvailable(t,this.goalRepeat)&&e.push(t);return e}getSingleSelectedGoal(){const e=this.designationsDataPoint.savedGoals[this.goalRepeat];if(e&&this.isGoalAvailable(e,this.goalRepeat))return e;const t=this.findCrossRepeatGoal();if(t)return t;const n=this.designationsDataPoint.defaultGoals[this.goalRepeat];return n&&this.isGoalAvailable(n,this.goalRepeat)?n:null}get goalRepeat(){return gN(this.donationDataPoint.frequency)}get designationsDataPoint(){return this.dataPointRegistry.getDataPoint(Hr.DESIGNATIONS)}isGoalAvailable(e,t){return e.repeat===ui.ALL||e.repeat===t}findCrossRepeatGoal(){const e=this.goalRepeat===ui.ONE_TIME?ui.RECURRING:ui.ONE_TIME,t=this.designationsDataPoint.savedGoals[e];return t&&t.repeat===ui.ALL?t:null}}class zO extends YO{get donationDataPoint(){return this.dataPointRegistry.getDataPoint(WN.DONATION)}}class WO extends pN{constructor(e,t){super(e),this.dataPointRegistry=e,this.designationsParamsService=t}synchronize(){const e=this.designationsParamsService.getAvailableGoals();this.designationsDataPoint.computed.setAvailableGoals(e);const t=this.designationsParamsService.getSingleSelectedGoal();this.designationsDataPoint.computed.setSingleSelectedGoal(t)}get designationsDataPoint(){return this.dataPointRegistry.getDataPoint(Hr.DESIGNATIONS)}}class $O extends WO{constructor(e,t){super(e,t),this.dataPointRegistry=e}}class XO{constructor(e,t){this.checkoutConfiguration=e,this.dataPointRegistry=t}isAvailable(){return this.checkConfiguration()&&this.checkOnBehalfOf()&&this.checkMultipleDonations()}checkConfiguration(){return this.checkoutConfiguration.campaign.config.showDouble}checkOnBehalfOf(){return!this.dataPointRegistry.getDataPoint(Hr.ON_BEHALF_OF).isOnBehalfOf}checkMultipleDonations(){return!this.dataPointRegistry.getDataPoint(WN.DONATION).isMultipleDonations}}class QO{constructor(e){this.dataPointRegistry=e}getDtdFrequency(){return this.dataPointRegistry.getDataPoint(WN.DONATION).frequency}getDtdCurrency(){return this.dataPointRegistry.getDataPoint(WN.DONATION).currency}getDtdInitialAmount(){return this.dataPointRegistry.getDataPoint(WN.DONATION).amount}}class ZO extends pN{constructor(e,t,n){super(e),this.dataPointRegistry=e,this.doubleTheDonationAvailabilityService=t,this.doubleTheDonationParamsService=n}synchronize(){this.dtdDataPoint.computed.setAvailability(this.doubleTheDonationAvailabilityService.isAvailable()),this.dtdDataPoint.computed.setParams({dtdFrequency:this.doubleTheDonationParamsService.getDtdFrequency(),dtdCurrency:this.doubleTheDonationParamsService.getDtdCurrency(),dtdInitialAmount:this.doubleTheDonationParamsService.getDtdInitialAmount()})}get dtdDataPoint(){return this.dataPointRegistry.getDataPoint(WN.DTD)}}class JO{constructor(e,t){this.checkoutConfiguration=e,this.dataPointRegistry=t}isAvailable(){return this.checkConfigurationCampaign()&&this.checkConfigurationFeatureConfig()&&this.checkOnBehalfOf()}checkConfigurationCampaign(){return this.checkoutConfiguration.campaign.config.giftAid.show}checkConfigurationFeatureConfig(){return this.checkoutConfiguration.featureConfig.giftAid}checkOnBehalfOf(){return!this.dataPointRegistry.getDataPoint(Hr.ON_BEHALF_OF).isOnBehalfOf}}class eI extends pN{constructor(e,t){super(e),this.dataPointRegistry=e,this.giftAidAvailabilityService=t}synchronize(){this.giftAidDataPoint.computed.setAvailability(this.giftAidAvailabilityService.isAvailable())}get giftAidDataPoint(){return this.dataPointRegistry.getDataPoint(WN.GIFT_AID)}}class tI{constructor(e,t,n,i,s){this.checkoutConfiguration=e,this.currencyService=t,this.mailingAddressModule=n,this.paymentMethodAvailabilityManagerRepository=i,this.dataPointRegistry=s}isEnabled(){return this.mailingAddressModuleCheckoutScreenLogic.isEnabled(this.mailingAddressModuleCheckoutScreenAmount,this.mailingAddressModuleCheckoutScreenParams)}isRequired(){return this.mailingAddressModuleCheckoutScreenLogic.isRequired(this.mailingAddressModuleCheckoutScreenAmount,this.mailingAddressModuleCheckoutScreenParams)}get mailingAddressModuleCheckoutScreenLogic(){return this.mailingAddressModule.getCheckoutScreenLogic()}get mailingAddressModuleCheckoutScreenAmount(){const e=this.dataPointRegistry.getDataPoint(WN.DONATION),t=this.mailingAddressModule.getCurrencyLogic({widget:this.checkoutConfiguration.campaign.config});return this.currencyService.convert(e.amount||0,e.currency,t.currency)}get mailingAddressModuleCheckoutScreenParams(){const e=this.dataPointRegistry.getDataPoint(WN.PAYMENT_OPTIONS),t=this.dataPointRegistry.getDataPoint(WN.GIFT_AID);return{showMailing:this.checkoutConfiguration.campaign.config.showMailing,showMailingFromAmount:this.checkoutConfiguration.campaign.config.showMailingFromAmount,mailingRequired:this.checkoutConfiguration.campaign.config.mailingRequired,mailingRequiredFromAmount:this.checkoutConfiguration.campaign.config.mailingRequiredFromAmount,paymentMethodAvailabilityManagerRepository:this.paymentMethodAvailabilityManagerRepository,paymentMethod:e.clientPaymentMethod,paymentMethodCountry:e.paymentMethodCountry,isGiftAidAccepted:t.isAccepted}}}class nI extends pN{constructor(e,t){super(e),this.dataPointRegistry=e,this.mailingAddressAvailabilityService=t}synchronize(){this.mailingAddressDataPoint.computed.setAvailability({isEnabled:this.mailingAddressAvailabilityService.isEnabled(),isRequired:this.mailingAddressAvailabilityService.isRequired()})}get mailingAddressDataPoint(){return this.dataPointRegistry.getDataPoint(Hr.MAILING_ADDRESS)}}class iI{constructor(e,t,n){this.checkoutConfiguration=e,this.paymentMethodAvailabilityManagerRepository=t,this.dataPointRegistry=n}getAvailablePaymentOptions(){return{[D._h.PAYPAL]:this.checkPaypal(),[D._h.VENMO]:this.checkVenmo(),[D._h.CARD]:this.checkCard(),[D._h.APPLE_PAY]:this.checkApplePay(),[D._h.GOOGLE_PAY]:this.checkGooglePay(),[D._h.AU_BECS]:this.checkAuBecs(),[D._h.US_BANK_ACCOUNT]:this.checkUSBankAccount(),[D._h.UK_BACS]:this.checkUkBacs(),[D._h.SEPA]:this.checkSepa(),[D._h.ACSS]:this.checkAcss(),[D._h.IDEAL]:this.checkIDEAL(),[D._h.CRYPTO]:{available:!0,visible:!0}}}get donationDataPoint(){return this.dataPointRegistry.getDataPoint(WN.DONATION)}checkPaypal(){const e=this.paymentMethodAvailabilityManagerRepository.getManager(D._h.PAYPAL,g.WIDGET),t=this.isPaymentMethodAvailableByConfiguration(D._h.PAYPAL)&&this.checkoutConfiguration.company.paymentOptions.paypal&&e.allowed("currency",this.donationDataPoint.currency)&&this.checkoutConfiguration.company.paypalCurrencies.includes(this.donationDataPoint.currency);return{available:t,visible:t&&e.allowed("repeat",this.donationDataPoint.frequency)&&(this.donationDataPoint.frequency===W.ONCE||this.checkoutConfiguration.company.paypal.subscriptionsEnabled)}}checkVenmo(){const e=this.paymentMethodAvailabilityManagerRepository.getManager(D._h.VENMO,g.WIDGET),t=this.isPaymentMethodAvailableByConfiguration(D._h.VENMO)&&this.checkoutConfiguration.infrastructureParams.livemode&&!this.checkoutConfiguration.infrastructureParams.showcase&&(this.checkoutConfiguration.user.address.countryCode===D.tg.UNITED_STATES||Se())&&!!this.checkoutConfiguration.company.paypal.merchantId&&this.checkoutConfiguration.company.paymentOptions.venmo;return{available:t,visible:t&&e.allowed("repeat",this.donationDataPoint.frequency)&&e.allowed("currency",this.donationDataPoint.currency)}}checkCard(){const e=this.isPaymentMethodAvailableByConfiguration(D._h.CARD)&&this.checkoutConfiguration.company.paymentOptions.creditCard;return{available:e,visible:e}}checkApplePay(){const e=this.isPaymentMethodAvailableByConfiguration(D._h.APPLE_PAY)&&this.checkoutConfiguration.company.paymentOptions.applePay;return{available:e,visible:e}}checkGooglePay(){const e=this.isPaymentMethodAvailableByConfiguration(D._h.GOOGLE_PAY)&&this.checkoutConfiguration.company.paymentOptions.googlePay&&!this.checkoutConfiguration.infrastructureParams.isInAppBrowser&&window.isSecureContext;return{available:e,visible:e}}checkAuBecs(){const e=this.paymentMethodAvailabilityManagerRepository.getManager(D._h.AU_BECS,g.WIDGET),t=this.isPaymentMethodAvailableByConfiguration(D._h.AU_BECS)&&this.checkoutConfiguration.company.paymentOptions.auBecsDebit&&e.allowed("repeat",this.donationDataPoint.frequency)&&e.allowed("currency",this.donationDataPoint.currency)&&e.allowed("amount",this.donationDataPoint.total);return{available:t,visible:t}}checkUSBankAccount(){const e=function(e,t,n){if("USD"!==n)return t;const i=function(e){switch(e){case Hb.ONE_FOR_ISRAEL:return 150;case Hb.FCA:return 200;default:return null}}(e);return null===i?t:t<9500&&t>=i?9500:t}(this.checkoutConfiguration.company.key,this.donationDataPoint.total,this.donationDataPoint.currency),t=this.paymentMethodAvailabilityManagerRepository.getManager(D._h.US_BANK_ACCOUNT,g.WIDGET),n=t.allowed("amount",e)&&qD(this.checkoutConfiguration.company.stripe.usBankAccount.verification)?KD(e):t.allowed("amount",e),i=this.isPaymentMethodAvailableByConfiguration(D._h.US_BANK_ACCOUNT)&&this.checkoutConfiguration.company.paymentOptions.usBankAccount&&t.allowed("repeat",this.donationDataPoint.frequency)&&t.allowed("currency",this.donationDataPoint.currency)&&n&&"USD"===this.checkoutConfiguration.company.stripeCurrencies.default;return{available:i,visible:i}}checkUkBacs(){const e=this.paymentMethodAvailabilityManagerRepository.getManager(D._h.UK_BACS,g.WIDGET),t=this.isPaymentMethodAvailableByConfiguration(D._h.UK_BACS)&&this.checkoutConfiguration.company.paymentOptions.ukBacs&&e.allowed("repeat",this.donationDataPoint.frequency)&&e.allowed("currency",this.donationDataPoint.currency)&&e.allowed("amount",this.donationDataPoint.total);return{available:t,visible:t}}checkSepa(){const e=this.paymentMethodAvailabilityManagerRepository.getManager(D._h.SEPA,g.WIDGET),t=this.isPaymentMethodAvailableByConfiguration(D._h.SEPA)&&this.checkoutConfiguration.company.paymentOptions.sepa&&e.allowed("repeat",this.donationDataPoint.frequency)&&e.allowed("currency",this.donationDataPoint.currency)&&e.allowed("amount",this.donationDataPoint.total);return{available:t,visible:t}}checkAcss(){const e=this.paymentMethodAvailabilityManagerRepository.getManager(D._h.ACSS,g.WIDGET),t=this.isPaymentMethodAvailableByConfiguration(D._h.ACSS)&&this.checkoutConfiguration.company.paymentOptions.acss&&e.allowed("repeat",this.donationDataPoint.frequency)&&e.allowed("currency",this.donationDataPoint.currency)&&e.allowed("amount",this.donationDataPoint.total);return{available:t,visible:t}}checkIDEAL(){const e=this.paymentMethodAvailabilityManagerRepository.getManager(D._h.IDEAL,g.WIDGET),t=this.checkoutConfiguration.company.country===D.tg.NETHERLANDS||e.allowed("customerCountry",this.checkoutConfiguration.user.address.countryCode),n=this.isPaymentMethodAvailableByConfiguration(D._h.IDEAL)&&this.checkoutConfiguration.company.paymentOptions.ideal&&(this.donationDataPoint.frequency===W.ONCE||this.checkoutConfiguration.company.paymentOptions.sepa)&&(t||Se())&&e.allowed("repeat",this.donationDataPoint.frequency)&&e.allowed("currency",this.donationDataPoint.currency)&&e.allowed("amount",this.donationDataPoint.total);return{available:n,visible:n}}isPaymentMethodAvailableByConfiguration(e){return!this.checkoutConfiguration.paymentOptionsSettings.disabledPaymentMethods.includes(e)}}class sI extends pN{constructor(e,t){super(e),this.dataPointRegistry=e,this.paymentOptionsParamsService=t}synchronize(){const e=this.paymentOptionsParamsService.getAvailablePaymentOptions();this.paymentOptionsDataPoint.computed.setAllowedPaymentMethods(e)}get paymentOptionsDataPoint(){return this.dataPointRegistry.getDataPoint(WN.PAYMENT_OPTIONS)}}const aI=[D.tg.INDIA];class oI{constructor(e,t){this.checkoutConfiguration=e,this.dataPointRegistry=t}isAvailable(){return this.checkConfiguration()&&this.checkDonation()&&this.checkDesignation()&&this.checkTribute()&&this.checkPaymentOptions()}checkConfiguration(){return this.checkoutConfiguration.campaign.config.showPostDonationUpsell}checkDonation(){return this.dataPointRegistry.getDataPoint(WN.DONATION).frequency===W.ONCE}checkDesignation(){return Se()?this.checkDesignations():this.dataPointRegistry.getDataPoint(Hr.DESIGNATION).allowRecurring}checkDesignations(){const e=this.dataPointRegistry.getDataPoint(Hr.DESIGNATIONS);return 1===e.selectedGoals.length&&e.selectedGoals[0].repeat!==ui.ONE_TIME}checkTribute(){return!this.dataPointRegistry.getDataPoint(Hr.TRIBUTE).tributeeName}checkPaymentOptions(){switch(this.dataPointRegistry.getDataPoint(WN.PAYMENT_OPTIONS).clientPaymentMethod){case iT._h.PAYPAL:return this.checkoutConfiguration.company.paypal.subscriptionsEnabled;case iT._h.VENMO:case iT._h.IDEAL:return!1;case iT._h.CARD:return this.checkPaymentMethodCountry();default:return!0}}checkPaymentMethodCountry(){const e=this.dataPointRegistry.getDataPoint(WN.PAYMENT_OPTIONS);return null===e.paymentMethodCountry||!aI.includes(e.paymentMethodCountry)}}class rI{constructor(e,t,n){this.checkoutConfiguration=e,this.suggestionsService=t,this.dataPointRegistry=n,this.timestamp=Date.now()}getUpsellStartDate(){return function(e,t){const n=new Date(e),i=n.getDate();return n.setMonth(n.getMonth()+1),n.getDate()!==i&&n.setDate(0),n.toISOString()}(this.timestamp)}getUpsellFrequency(){return W.MONTHLY}getUpsellCurrency(){return this.dataPointRegistry.getDataPoint(WN.DONATION).currency}getUpsellMinAmount(){return this.dataPointRegistry.getDataPoint(WN.DONATION).getFrequencyMinimalAmount(this.checkoutConfiguration.highestFrequency)}getUpsellAmount(){var e,t;const n=this.dataPointRegistry.getDataPoint(WN.DONATION),i=null!==(e=n.amount)&&void 0!==e?e:0,s=null!==(t=n.amountInUSD)&&void 0!==t?t:0;return Math.max(this.suggestionsService.beautify(i*this.getUpsellSuggestedAmountPercent(s),this.getUpsellCurrency()),this.getUpsellMinAmount())}getUpsellSuggestedAmountPercent(e){switch(!0){case e>1e5:return.1;case e>=5e4:return.15;default:return.2}}}class cI extends pN{constructor(e,t,n){super(e),this.dataPointRegistry=e,this.postDonationUpsellAvailabilityService=t,this.postDonationUpsellParamsService=n}synchronize(){this.postDonationUpsellDataPoint.computed.setAvailability(this.postDonationUpsellAvailabilityService.isAvailable()),this.postDonationUpsellDataPoint.computed.setParams({upsellStartDate:this.postDonationUpsellParamsService.getUpsellStartDate(),upsellFrequency:this.postDonationUpsellParamsService.getUpsellFrequency(),upsellCurrency:this.postDonationUpsellParamsService.getUpsellCurrency(),upsellMinAmount:this.postDonationUpsellParamsService.getUpsellMinAmount(),upsellAmount:this.postDonationUpsellParamsService.getUpsellAmount()})}get postDonationUpsellDataPoint(){return this.dataPointRegistry.getDataPoint(WN.POST_DONATION_UPSELL)}}const lI=[D.tg.UNITED_STATES,D.tg.UNITED_KINGDOM,D.tg.AUSTRIA,D.tg.BELGIUM,D.tg.BULGARIA,D.tg.CROATIA,D.tg.CYPRUS,D.tg.CZECH_REPUBLIC,D.tg.DENMARK,D.tg.ESTONIA,D.tg.FINLAND,D.tg.FRANCE,D.tg.GERMANY,D.tg.GREECE,D.tg.HUNGARY,D.tg.IRELAND,D.tg.ITALY,D.tg.LATVIA,D.tg.LITHUANIA,D.tg.LUXEMBOURG,D.tg.MALTA,D.tg.NETHERLANDS,D.tg.POLAND,D.tg.PORTUGAL,D.tg.ROMANIA,D.tg.SLOVAKIA,D.tg.SLOVENIA,D.tg.SPAIN,D.tg.SWEDEN];class uI{constructor(e,t,n){this.checkoutConfiguration=e,this.currencyService=t,this.dataPointRegistry=n}isAvailable(e){switch(e){case W.ANNUAL:return this.isAnnualUpsellAvailable();case W.EVERY_4_WEEKS:return this.isEvery4WeeksUpsellAvailable();case W.MONTHLY:return this.isMonthlyUpsellAvailable();default:throw new Error(`Unsupported target frequency: ${e}`)}}isAnnualUpsellAvailable(){return this.checkConfigurationCampaignEnabledFrequencies()&&this.checkConfigurationCampaignRecurringFrequency()&&this.checkConfigurationCompanyRecurringPlan(W.ANNUAL)&&this.checkDesignation()&&this.checkTribute()&&this.checkDonationFrequency()}isEvery4WeeksUpsellAvailable(){return this.checkConfigurationCampaignUpsell()&&this.checkConfigurationCampaignEnabledFrequencies()&&this.checkConfigurationCampaignRecurringFrequency()&&this.checkConfigurationCompanyRecurringPlan(W.EVERY_4_WEEKS)&&this.checkConfigurationUserCountryCode(lI)&&this.checkDesignation()&&!this.checkTribute()&&this.checkDonationFrequency()&&this.checkDonationCurrency()&&this.checkDonationAmount(W.EVERY_4_WEEKS)}isMonthlyUpsellAvailable(){return!!this.checkoutConfiguration.infrastructureParams.showcase||this.checkConfigurationCampaignUpsell()&&this.checkConfigurationCampaignEnabledFrequencies()&&this.checkConfigurationCampaignRecurringFrequency()&&this.checkDesignation()&&!this.checkTribute()&&this.checkDonationFrequency()&&this.checkDonationCurrency()&&this.checkDonationAmount(W.MONTHLY)}checkConfigurationCampaignUpsell(){return this.checkoutConfiguration.campaign.config.showUpsell}checkConfigurationCampaignEnabledFrequencies(){return this.checkoutConfiguration.enabledFrequencies.every((e=>this.checkoutConfiguration.preDonationUpsellSettings.enabledForDonationFrequencies.includes(e)))}checkConfigurationCampaignRecurringFrequency(){return this.checkoutConfiguration.enabledFrequencies.some((e=>e!==W.ONCE))}checkConfigurationCompanyRecurringPlan(e){return this.checkoutConfiguration.company.recurringPlans[e]}checkConfigurationUserCountryCode(e){return e.includes(this.checkoutConfiguration.user.address.countryCode)}checkDesignation(){return Se()?this.checkDesignations():this.dataPointRegistry.getDataPoint(Hr.DESIGNATION).allowRecurring}checkDesignations(){const e=this.dataPointRegistry.getDataPoint(Hr.DESIGNATIONS);return 1===e.selectedGoals.length&&e.selectedGoals[0].repeat!==ui.ONE_TIME}checkTribute(){return this.dataPointRegistry.getDataPoint(Hr.TRIBUTE).isFilled}checkDonationFrequency(){return this.dataPointRegistry.getDataPoint(WN.DONATION).frequency===W.ONCE}checkDonationCurrency(){const e=this.dataPointRegistry.getDataPoint(WN.DONATION);return this.checkoutConfiguration.campaign.config.currencyEnabledRecurrings||e.currency===this.checkoutConfiguration.campaign.config.defaultCurrency}checkDonationAmount(e){var t;const n=this.dataPointRegistry.getDataPoint(WN.DONATION),i=null!==(t=n.amount)&&void 0!==t?t:0,s=n.currency;let a,o;switch(e){case W.EVERY_4_WEEKS:a=Math.max(n.getFrequencyMinimalAmount(e),this.currencyService.convert(7e3,"USD",s)),o=this.currencyService.convert(2e4,"USD",s);break;case W.MONTHLY:a=n.getFrequencyMinimalAmount(e),o=this.currencyService.convert(2e4,"USD",s);break;default:throw new Error(`Unsupported target frequency: ${e}`)}return i>=a&&i<=o}}class dI{constructor(e,t,n,i){this.checkoutConfiguration=e,this.currencyService=t,this.suggestionsService=n,this.dataPointRegistry=i}getUpsellCurrency(){return this.dataPointRegistry.getDataPoint(WN.DONATION).currency}getUpsellAmounts(e){switch(e){case W.ANNUAL:return this.getAnnualAmounts();case W.EVERY_4_WEEKS:case W.MONTHLY:return this.getEvery4WeeksAndMonthlyAmounts(e);default:throw new Error(`Unsupported target frequency: ${e}`)}}getAnnualAmounts(){const e=this.dataPointRegistry.getDataPoint(WN.DONATION).amount;return{high:e,low:null,initial:e}}getEvery4WeeksAndMonthlyAmounts(e){const t=this.dataPointRegistry.getDataPoint(WN.DONATION).amount,[n,i]=this.calculateEvery4WeeksAndMonthlyAmountsInUsd(),[s,a]=this.adjustEvery4WeeksAndMonthlyAmounts(e,n,i);return{high:a,low:s,initial:t}}calculateEvery4WeeksAndMonthlyAmountsInUsd(){var e;const t=null!==(e=this.dataPointRegistry.getDataPoint(WN.DONATION).amountInUSD)&&void 0!==e?e:0,n=this.checkoutConfiguration.preDonationUpsellSettings.amountsMap;switch(!0){case t<=1e3:return[null,t];case t<=2500:return n[Li.UP_TO_25];case t<=3500:return n[Li.UP_TO_35];case t<=5500:return n[Li.UP_TO_55];case t<=1e4:return n[Li.UP_TO_100];case t<=15e3:return n[Li.UP_TO_150];case t<=2e4:return n[Li.UP_TO_200];default:return[null,t]}}adjustEvery4WeeksAndMonthlyAmounts(e,t,n){const i=this.dataPointRegistry.getDataPoint(WN.DONATION),s=this.getUpsellCurrency(),a=i.getFrequencyMinimalAmount(e);let o=null,r=null;return null!==n&&(o=this.suggestionsService.beautify(this.currencyService.convert(n,"USD",s),s),o<a&&(o=a)),null!==t&&(r=this.suggestionsService.beautify(this.currencyService.convert(t,"USD",s),s),(r<a||r===o)&&(r=null)),[r,o]}}class hI extends pN{constructor(e,t,n,i){super(t),this.checkoutConfiguration=e,this.dataPointRegistry=t,this.preDonationUpsellAvailabilityService=n,this.preDonationUpsellParamsService=i}synchronize(){const e=this.checkoutConfiguration.preDonationUpsellSettings.enabledTargetFrequencies.find((e=>this.preDonationUpsellAvailabilityService.isAvailable(e)));if(this.preDonationUpsellDataPoint.computed.setAvailability(!!e),e){const t=this.preDonationUpsellParamsService.getUpsellAmounts(e);this.preDonationUpsellDataPoint.computed.setParams({upsellFrequency:e,upsellCurrency:this.preDonationUpsellParamsService.getUpsellCurrency(),upsellHighAmount:t.high,upsellLowAmount:t.low,upsellInitialAmount:t.initial})}}get preDonationUpsellDataPoint(){return this.dataPointRegistry.getDataPoint(WN.PRE_DONATION_UPSELL)}}class mI extends SN{}class pI extends AN{}class gI extends bN{triggerSynchronization(){}}class yI extends TN{triggerSynchronization(){}}class fI extends ON{get donationDataPoint(){return this.dataPointRegistry.getDataPoint(WN.DONATION)}triggerSynchronization(){this.checkoutStateSynchronizer.onDesignationChange()}}class EI extends xN{triggerSynchronization(){this.checkoutStateSynchronizer.onDesignationsChange()}}class SI extends RN{get dataPoint(){return this.dataPointRegistry.getDataPoint(WN.DONATION)}setDonationsFrequency(e){this.perform((()=>{this.dataPoint.setDonationsFrequency(e)}))}setCurrency(e){this.perform((()=>{this.dataPoint.setCurrency(e)}))}setDonationsAmount(e){this.perform((()=>{this.dataPoint.setDonationsAmount(e)}))}setDonationsAmountHint(e){this.perform((()=>{this.dataPoint.setDonationsAmountHint(e)}))}setFeeCovered(e,t){this.perform((()=>{this.dataPoint.setFeeCovered(e,t)}))}setDonationsEndDateActive(e){this.perform((()=>{this.dataPoint.setDonationsEndDateActive(e)}))}setDefaultAmountsApplied(){this.perform((()=>{this.dataPoint.setDefaultAmountsApplied()}))}setFrequencyDefaultAmount(e,t){this.perform((()=>{this.dataPoint.setFrequencyDefaultAmount(e,t)}))}setFrequencyAmountSuggestions(e,t,n){this.perform((()=>{this.dataPoint.setFrequencyAmountSuggestions(e,t,n)}))}setFrequencyAmountHint(e,t){this.perform((()=>{this.dataPoint.setFrequencyAmountHint(e,t)}))}setFrequencyAmountHints(e,t,n){this.perform((()=>{this.dataPoint.setFrequencyAmountHints(e,t,n)}))}setDonationAmount(e,t){this.perform((()=>{this.dataPoint.setDonationAmount(e,t)}))}addDonation(){this.perform((()=>{this.dataPoint.addDonation()}))}removeDonation(e){this.perform((()=>{this.dataPoint.removeDonation(e)}))}triggerSynchronization(){this.checkoutStateSynchronizer.onDonationChange()}}class vI extends NN{get dataPoint(){return this.dataPointRegistry.getDataPoint(WN.DTD)}setEmployerName(e){this.perform((()=>{this.dataPoint.setEmployerName(e)}))}setEmployerData(e){this.perform((()=>{this.dataPoint.setEmployerData(e)}))}resetEmployerData(){this.perform((()=>{this.dataPoint.resetEmployerData()}))}setUpsellShowed(e){this.perform((()=>{this.dataPoint.setUpsellShowed(e)}))}setUpsellAccepted(){this.perform((()=>{this.dataPoint.setUpsellAccepted()}))}setSkipped(){this.perform((()=>{this.dataPoint.setSkipped()}))}resetState(){this.perform((()=>{this.dataPoint.resetState()}))}triggerSynchronization(){}}class AI extends NN{get dataPoint(){return this.dataPointRegistry.getDataPoint(WN.GIFT_AID)}setShowed(){this.perform((()=>{this.dataPoint.setShowed()}))}accept(){this.perform((()=>{this.dataPoint.accept()}))}reject(){this.perform((()=>{this.dataPoint.reject()}))}triggerSynchronization(){this.checkoutStateSynchronizer.onGiftAidChange()}}class CI extends LN{triggerSynchronization(){this.checkoutStateSynchronizer.onMailingAddressChange()}}class PI extends NN{get paymentOptionsDataPoint(){return this.dataPointRegistry.getDataPoint(WN.PAYMENT_OPTIONS)}get ukBacsDataPoint(){return this.dataPointRegistry.getDataPoint(WN.UK_BACS)}get usBankAccountDataPoint(){return this.dataPointRegistry.getDataPoint(WN.US_BANK_ACCOUNT)}setPaymentMethod(e){this.perform((()=>{this.paymentOptionsDataPoint.setPaymentMethod(e)}))}setPaymentOption(e){this.perform((()=>{this.paymentOptionsDataPoint.setPaymentOption(e)}))}setPreSelectedPaymentOption(e){this.perform((()=>{this.paymentOptionsDataPoint.setPreSelectedPaymentOption(e)}))}setPaymentMethodCountry(e){this.perform((()=>{this.paymentOptionsDataPoint.setPaymentMethodCountry(e)}))}setPaymentMethodChecked(e){this.perform((()=>{this.paymentOptionsDataPoint.setPaymentMethodChecked(e)}))}setUkBacsSortCode(e){this.perform((()=>{this.ukBacsDataPoint.setSortCode(e)}))}setUkBacsAccountNumber(e){this.perform((()=>{this.ukBacsDataPoint.setAccountNumber(e)}))}setUkBacsAccountHolderName(e){this.perform((()=>{this.ukBacsDataPoint.setAccountHolderName(e)}))}setUkBacsTermsAccepted(e){this.perform((()=>{this.ukBacsDataPoint.setTermsAccepted(e)}))}setUsBankAccountRoutingNumber(e){this.perform((()=>{this.usBankAccountDataPoint.setRoutingNumber(e)}))}setUsBankAccountNumber(e){this.perform((()=>{this.usBankAccountDataPoint.setAccountNumber(e)}))}setUsBankAccountHolderName(e){this.perform((()=>{this.usBankAccountDataPoint.setAccountHolderName(e)}))}setUsBankAccountVerificationType(e){this.perform((()=>{this.usBankAccountDataPoint.setVerificationType(e)}))}setUsBankAccountFinancialInstitution(e){this.perform((()=>{this.usBankAccountDataPoint.setFinancialInstitution(e)}))}setUsBankAccountType(e){this.perform((()=>{this.usBankAccountDataPoint.setAccountType(e)}))}setIsFastTrackFlow(e){this.perform((()=>{this.paymentOptionsDataPoint.setIsFastTrackFlow(e)}))}triggerSynchronization(){this.checkoutStateSynchronizer.onPaymentOptionsChange()}}class NI extends NN{get dataPoint(){return this.dataPointRegistry.getDataPoint(WN.POST_DONATION_UPSELL)}setUpsellCustomAmount(e){this.perform((()=>{this.dataPoint.setUpsellCustomAmount(e)}))}setShowed(){this.perform((()=>{this.dataPoint.setShowed()}))}accept(){this.perform((()=>{this.dataPoint.accept()}))}triggerSynchronization(){}}class bI extends NN{get dataPoint(){return this.dataPointRegistry.getDataPoint(WN.PRE_DONATION_UPSELL)}setShowed(){this.perform((()=>{this.dataPoint.setShowed()}))}confirm(e){this.perform((()=>{e?this.dataPoint.accept():this.dataPoint.reject()}))}setSuggestedAvailability(e){this.perform((()=>{this.dataPoint.setSuggestedAvailability(e)}))}resetSuggestedAvailability(){this.perform((()=>{this.dataPoint.resetSuggestedAvailability()}))}setSuggestedAmounts(e,t){this.perform((()=>{this.dataPoint.setSuggestedAmounts(e,t)}))}resetSuggestedAmounts(){this.perform((()=>{this.dataPoint.resetSuggestedAmounts()}))}triggerSynchronization(){}}class DI extends FN{triggerSynchronization(){this.checkoutStateSynchronizer.onPrivacyChange()}}class TI extends BN{triggerSynchronization(){}}class _I extends VN{triggerSynchronization(){}}class kI extends YN{triggerSynchronization(){this.checkoutStateSynchronizer.onTributeChange()}}class OI extends qN{triggerSynchronization(){}}class II extends CT{}function xI(e){if(!e.isSkipped&&e.employerName)return{name:e.employerName}}function wI(e){if(!e.isSkipped&&e.employerId)return{id:e.employerId,company_name:e.employerName,minimumMatchedAmount:e.employerRawMinAmount,ratio:e.employerRatio}}function RI(e){var t;return{currency:e.snapshot.dtdCurrency,fromAmount:e.snapshot.dtdInitialTotal,initialAmount:null!==(t=e.snapshot.dtdInitialAmount)&&void 0!==t?t:0,matchingFromAmount:e.snapshot.employerMinAmount,matchingPromisedAmount:e.snapshot.employerUpsellTotalDoubled,matchingRatio:e.snapshot.employerRatio,minimumMatchedAmount:e.snapshot.employerMinAmount,proposedAmount:e.snapshot.employerUpsellTotal,proposedAmountBeforeFeeCovered:e.snapshot.employerRawMinAmount,visible:!!e.employerMinAmount,showed:e.isUpsellShowed,used:e.isUpsellAccepted}}const MI=(e,t,n)=>e&&t?n?D.Bg.OPTED_IN:D.Bg.OPTED_OUT:D.Bg.NOT_SUBMITTED,LI=e=>{const{type:t,customizedConsent:n,generalConsent:i,isCustomizedConsentShown:s,isGeneralConsentShown:a}=e;return t===D.kt.GENERAL?{type:D.Au.GENERAL,general:MI(a,!0,i.isAccepted),customized:{email:D.Bg.NOT_SUBMITTED,phoneCalls:D.Bg.NOT_SUBMITTED,postalMail:D.Bg.NOT_SUBMITTED,sms:D.Bg.NOT_SUBMITTED,socialMedia:D.Bg.NOT_SUBMITTED}}:t===D.kt.CUSTOMIZED?{type:D.Au.CUSTOMIZED,general:D.Bg.NOT_SUBMITTED,customized:{email:MI(s,n.email.isEnabled,n.email.isAccepted),phoneCalls:MI(s,n.phoneCalls.isEnabled,n.phoneCalls.isAccepted),postalMail:MI(s,n.postalMail.isEnabled,n.postalMail.isAccepted),sms:MI(s,n.sms.isEnabled,n.sms.isAccepted),socialMedia:MI(s,n.socialMedia.isEnabled,n.socialMedia.isAccepted)}}:{type:D.Au.GENERAL,general:D.Bg.NOT_SUBMITTED,customized:{email:D.Bg.NOT_SUBMITTED,phoneCalls:D.Bg.NOT_SUBMITTED,postalMail:D.Bg.NOT_SUBMITTED,sms:D.Bg.NOT_SUBMITTED,socialMedia:D.Bg.NOT_SUBMITTED}}};function UI(e){const t=e.frequency;return{defaultAmount:e.getFrequencyDefaultAmount(t)||0,frequencyAmountOptions:e.getFrequencyAmountSuggestions(t),amountOptions:e.allAmountSuggestions,frequency:t,currency:e.currency,defaultAmounts:e.allDefaultAmounts}}class FI extends bT{updateSession(e){return(0,c.sH)(this,void 0,void 0,(function*(){var t,n,i,s;if(this.checkoutConfiguration.infrastructureParams.showcase)return ue.success({});const a=this.donationDataPoint.frequency,o=function(e,t){if((null==t?void 0:t.canUseAmountDefaults)&&!e.amount){const t=e.frequency,n=e.getFrequencyDefaultAmount(t),i=e.getFrequencyDefaultTotal(t),s=e.getFrequencyMinimalAmount(t),a=e.getFrequencyMinimalTotal(t);return n?{amount:n,total:i}:{amount:s,total:a}}return{amount:e.amount||0,total:e.total}}(this.donationDataPoint,e),r=this.commentDataPoint.toObject(),c=this.tributeDataPoint.toObject(),l=this.postDonationUpsellDataPoint.toObject(),u=this.questionsDataPoint.toObject(),d=this.donorNameDataPoint.toObject(),h=this.donorEmailDataPoint.getValidOrEmptyEmail(),m=this.preDonationUpsellDataPoint,p=this.donateAnonymousDataPoint.toObject(),g=this.phoneNumberDataPoint.toObject(),y=this.termsAndConditionsDataPoint.toObject(),f=this.onBehalfOfDataPoint.toObject(),E=this.customerTitleDataPoint.toObject(),S=this.designationDataPoint.toObject(),v=this.communicationConsentDataPoint.toObject();return this.sessionAPI.update({donationType:Ft.MONEY,comment:r.isActive?r.comment:"",tribute:c.inHonorOf&&c.isActive?{labelType:c.labelType,type:c.type,inHonorOf:c.inHonorOf}:null,questions:u.questions,customer:{firstName:d.firstName,lastName:d.lastName,title:E.title,email:h,phone:g.phone,onBehalfOf:f.companyName,anonymousChecked:p.anonymousChecked,termsChecked:y.isAccepted,consent:LI(v)},donation:{amount:o.amount,total:o.total,publicFee:this.donationDataPoint.processingFee,currency:this.donationDataPoint.currency,frequency:this.donationDataPoint.frequency,goalKey:S.goalKey,goalName:S.goalName,giftAid:{shown:this.giftAidDataPoint.isShowed,claimed:this.giftAidDataPoint.isAccepted},upsell:{currency:m.upsellShowedFromCurrency,fromAmount:null!==(t=m.upsellShowedFromAmount)&&void 0!==t?t:0,showed:m.isShowed,used:m.isAccepted},employerUpsell:RI(this.dtdDataPoint),feeCoveringSuggestion:this.donationDataPoint.feeCoveringSuggestion,hintsVariantName:this.donationDataPoint.amountHint?ET.RANDOM:ET.NONE,hintDescription:(null===(n=this.donationDataPoint.amountHint)||void 0===n?void 0:n.description)||"",_suggestedAmountHint:(null===(i=this.donationDataPoint.amountHint)||void 0===i?void 0:i.id)||null,limit:this.getLimitField(a),currencyRatesId:null!==(s=this.checkoutConfiguration.currencySettings.ratesId)&&void 0!==s?s:null,donationItems:this.donationItems},employer:xI(this.dtdDataPoint),employerDTD:wI(this.dtdDataPoint),postDonationUpsell:{period:l.upsellFrequency,firstChargeAt:l.upsellStartDate,fromAmount:o.amount,showed:l.isShowed,currency:l.upsellCurrency,recurringAmount:l.upsellAmount,recurringTip:l.upsellTip,recurringTotal:l.upsellTotal,used:l.isAccepted},checkoutDefaults:UI(this.donationDataPoint),screenHistory:this.getScreenHistory(null==e?void 0:e.shouldSaveScreenHistory)})}))}updateSessionWidgetDefaults(){this.sessionAPI.updateSessionWidgetDefaults(this.donationDataPoint.amount||0,UI(this.donationDataPoint))}get donationItems(){var e,t,n,i,s,a,o;const r=[],c=this.donationDataPoint.processingFees,l=this.designationsDataPoint.selectedGoals,u=this.designationsDataPoint.validate().fields.goals;for(let d=0;d<this.donationDataPoint.donationItemsDto.length;d++){const h=this.donationDataPoint.donationItemsDto[d],m=u[d];m&&m.errors.goalRepeat||r.push({amount:null!==(e=h.amount)&&void 0!==e?e:0,fee:null!==(t=c[h.id])&&void 0!==t?t:0,frequency:h.frequency,goalKey:null===(n=l[d])||void 0===n?void 0:n.id,hintsVariantName:h.amountHint?ET.RANDOM:ET.NONE,hintDescription:null!==(s=null===(i=h.amountHint)||void 0===i?void 0:i.description)&&void 0!==s?s:"",_suggestedAmountHint:null!==(o=null===(a=h.amountHint)||void 0===a?void 0:a.id)&&void 0!==o?o:null,limit:this.getLimitField(h.frequency)})}return r}get donationDataPoint(){return this.checkoutState.donation.dataPoint}get donorEmailDataPoint(){return this.checkoutState.privacy.donorEmailDataPoint}get donorNameDataPoint(){return this.checkoutState.privacy.donorNameDataPoint}get phoneNumberDataPoint(){return this.checkoutState.privacy.phoneNumberDataPoint}get customerTitleDataPoint(){return this.checkoutState.privacy.customerTitleDataPoint}get termsAndConditionsDataPoint(){return this.checkoutState.privacy.termsAndConditionsDataPoint}get onBehalfOfDataPoint(){return this.checkoutState.privacy.onBehalfOfDataPoint}get donateAnonymousDataPoint(){return this.checkoutState.privacy.donateAnonymousDataPoint}get commentDataPoint(){return this.checkoutState.comment.dataPoint}get tributeDataPoint(){return this.checkoutState.tribute.dataPoint}get giftAidDataPoint(){return this.checkoutState.giftAid.dataPoint}get dtdDataPoint(){return this.checkoutState.doubleTheDonation.dataPoint}get postDonationUpsellDataPoint(){return this.checkoutState.postDonationUpsell.dataPoint}get questionsDataPoint(){return this.checkoutState.questions.dataPoint}get designationDataPoint(){return this.checkoutState.designation.dataPoint}get designationsDataPoint(){return this.checkoutState.designations.dataPoint}get communicationConsentDataPoint(){return this.checkoutState.communicationConsent.dataPoint}get preDonationUpsellDataPoint(){return this.checkoutState.preDonationUpsell.dataPoint}getScreenHistory(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.sessionRestoreData?this.sessionRestoreData.screenHistory:e?this.screenHistory:[]}getLimitField(e){const t=this.donationDataPoint.getFrequencyDonationEndDate(e),n=this.donationDataPoint.isDonationEndDateActive&&t.shouldShow&&t.endDate?t.endDate.toISOString():null;return{maxDate:n,configMaxDate:n?this.checkoutConfiguration.campaign.config.frequencies[e].endDate:null}}}class jI extends Ea{constructor(e,t,n,i,s,a,o){super(s,a,o),this.currencyService=e,this.checkoutState=t,this.checkoutUIState=n,this.screenDataFormatter=i,this.checkoutConfiguration=s,this.sessionTokenService=a,this.params=o}createCheckoutViewEvent(){var e,t,n;const i={isAmountFromElement:Boolean((null===(e=this.checkoutConfiguration.external.element)||void 0===e?void 0:e.key)&&(null===(n=null===(t=this.checkoutConfiguration.external.state)||void 0===t?void 0:t.donation)||void 0===n?void 0:n.amount))};return new RT(this.checkoutEventPayParams,this.checkoutEventElementParams,this.getOpeningTime(),i)}createCheckoutScreenViewEvent(e){const t={paymentMethods:Object.keys(this.paymentOptionsDataPoint.allowedPaymentMethods).filter((e=>![D._h.CRYPTO].includes(e)&&this.paymentOptionsDataPoint.allowedPaymentMethods[e].available&&this.paymentOptionsDataPoint.allowedPaymentMethods[e].visible)),renderDuration:null};return e.transitionStartedAt&&e.transitionFinishedAt&&(t.transitionDuration=e.transitionFinishedAt.getTime()-e.transitionStartedAt.getTime()),e.renderedAt&&e.transitionFinishedAt&&(t.renderDuration=e.renderedAt.getTime()-e.transitionFinishedAt.getTime()),this.checkoutConfiguration.isRestoredByWidgetSession&&(t.isRestoredByWidgetSession=!0),new wT(this.checkoutEventPayParams,this.checkoutEventElementParams,this.checkoutScreenName,t,e.askPagePosition)}createCheckoutChargeEvent(e){const t={};return this.donationDataPoint.amountHint&&(t.hintAmount=this.donationDataPoint.amountHint.amount,t.hintDescription=this.donationDataPoint.amountHint.description,t.default=this.donationDataPoint.amountHint.default,t.amountUsd=this.donationDataPoint.amountHint.amountUsd,t.hintVariantName=this.donationDataPoint.amountHint?ET.RANDOM:ET.NONE),new _T(this.checkoutEventPayParams,this.checkoutEventElementParams,this.checkoutScreenName,{chargeKey:e.donationId,chargeInUSDAmount:this.donationDataPoint.totalInUSD||0,chargeInDefaultCurrencyAmount:this.donationDataPoint.totalInDefaultCurrency,chargeAmount:this.donationDataPoint.total,chargeCurrency:this.donationDataPoint.currency,chargeFeeCovered:this.donationDataPoint.isFeeCovered,chargePaymentMethod:e.clientPaymentMethod,chargeIsRecurring:this.donationDataPoint.frequency!==W.ONCE,chargeHasComment:this.commentDataPoint.isActive&&!!this.commentDataPoint.comment,chargeHasTribute:this.tributeDataPoint.isFilled,chargeGoal:this.designationDataPoint.goalKey||void 0,chargeCampaignKey:this.checkoutConfiguration.campaign.key},e.duration,t)}createCheckoutErrorEvent(e){return new xT(this.checkoutEventPayParams,this.checkoutEventElementParams,this.checkoutScreenName,e.errorMessage,this.paymentOptionsDataPoint.clientPaymentMethod||D._h.CARD,e.durationTime,e.errorCode,e.errorType,e.errorDeclineCode)}createCheckoutCloseEvent(){return new OT(this.checkoutEventPayParams,this.checkoutEventElementParams,this.checkoutScreenName)}createCheckoutClickEvent(e){return new kT(this.checkoutEventPayParams,this.checkoutEventElementParams,this.checkoutScreenName,e.elementName||"other",new LT(e.target))}createCheckoutCustomEvent(e){return new IT(this.checkoutEventPayParams,this.checkoutEventElementParams,{customEventType:e.type,customEventData:"data"in e?e.data:void 0})}getCommonEventPayload(){var e,t;const n=this.getCurrentScreenData();return Object.assign(Object.assign({},super.getCommonEventPayload()),{donationType:this.processDataPoint.flowType,checkoutFrequency:this.donationDataPoint.frequency,checkoutDefaultAmount:null!==(e=this.donationDataPoint.getFrequencyDefaultAmount(this.donationDataPoint.frequency))&&void 0!==e?e:0,checkoutInUSDAmount:null!==(t=this.donationDataPoint.amountInUSD)&&void 0!==t?t:0,checkoutCurrencyRate:this.currencyService.getRate(this.donationDataPoint.currency),checkoutScreen:null==n?void 0:n.screenName,checkoutScreenData:n&&this.checkoutUIState?JSON.stringify(this.screenDataFormatter.format(n.screenName,n.screenData,this.screenFormatterData,this.checkoutUIState,this.checkoutConfiguration)):void 0})}get screenFormatterData(){const e=this.checkoutConfiguration.goalMeterData.raisedAmount,t=this.checkoutConfiguration.goalMeterData.totalAmount,n=this.checkoutConfiguration.goalMeterData.currency,i=this.donationDataPoint.frequency;return{donation:{amount:this.donationDataPoint.amount,currency:this.donationDataPoint.currency,frequency:i,defaultAmount:this.donationDataPoint.getFrequencyDefaultAmount(i),amountOptions:this.donationDataPoint.getFrequencyAmountSuggestions(i),currentHint:this.donationDataPoint.amountHint,hintOptions:this.donationDataPoint.getFrequencyAmountHints(i),hintVariantName:this.donationDataPoint.amountHint?ET.RANDOM:null},tribute:{isActive:this.tributeDataPoint.isActive},goalMeter:{shown:this.checkoutConfiguration.goalMeterData.shown,isFundraisingPageGoalMeter:this.checkoutConfiguration.goalMeterData.isFundraisingPageGoalMeter,raisedInUSD:e&&n?this.currencyService.convert(e,n,"USD"):null,goalAmountInUSD:t&&n?this.currencyService.convert(t,n,"USD"):null}}}get checkoutEventPayParams(){const e={};return Object.entries(this.donationDataPoint.allAmountHints).forEach((t=>{let[n,i]=t;var s;e[n]=null!==(s=null==i?void 0:i.map((e=>e.amount)))&&void 0!==s?s:[]})),{frequency:this.donationDataPoint.frequency,currency:this.donationDataPoint.currency,amount:this.donationDataPoint.amount||0,amountOptions:e[this.donationDataPoint.frequency].length?e:this.donationDataPoint.allAmountSuggestions}}get checkoutEventElementParams(){return{elementKey:this.checkoutConfiguration.element.key,elementType:this.checkoutConfiguration.element.type,elementReminderKey:this.checkoutConfiguration.element.reminderKey}}get checkoutScreenName(){var e;return(null===(e=this.getCurrentScreenData())||void 0===e?void 0:e.screenName)||""}get processDataPoint(){return this.checkoutState.process.dataPoint}get donationDataPoint(){return this.checkoutState.donation.dataPoint}get tributeDataPoint(){return this.checkoutState.tribute.dataPoint}get commentDataPoint(){return this.checkoutState.comment.dataPoint}get designationDataPoint(){return this.checkoutState.designation.dataPoint}get paymentOptionsDataPoint(){return this.checkoutState.paymentOptions.paymentOptionsDataPoint}}class BI{constructor(e,t){this.donorRating=e,this.currencyService=t}calculate(e,t){var n,i;const{frequency:s,currency:a}=e;let{amount:o}=e;const r=this.getDonorRatingGroupKey(t);if(!r)return BI.NONE_POSITION;const c=null===(i=null===(n=this.donorRating)||void 0===n?void 0:n[r])||void 0===i?void 0:i[s];return c?("USD"!==a&&(o=this.currencyService.convert(o,a,"USD")),{position:this.findPosition(o,c)}):BI.NONE_POSITION}getDonorRatingGroupKey(e){return e===gt.TEST_1||e===yt.TEST_1?Bt.TEST_1:e===gt.TEST_2||e===yt.TEST_2?Bt.TEST_2:null}findPosition(e,t){if(e>=t[jt.TOP_0_1][1])return jt.TOP_0_1;for(const[n,[i,s]]of Object.entries(t))if(e>=i&&e<s)return n;return jt.NONE}}function GI(e,t){return(e-t)/e*100}BI.NONE_POSITION={position:jt.NONE};class qI{constructor(e){this.donorRating=e.donorRating,this.currencyService=e.currencyService}calculate(e){var t;const{frequency:n,amount:i,currency:s,position:a}=e,o=this.donorRating[n];if(!o)return qI.DEFAULT_RESULT;const r=this.convertToBoundaryTable(o),c=this.convertToDefaultCurrency(i,s),l=this.findNextBoundary(a,r);if(!l)return qI.DEFAULT_RESULT;if(GI(l.lowerBound,c)>this.getThresholdPercentage(c))return qI.DEFAULT_RESULT;const u=this.calculateAdditionalAmount(l.lowerBound,c,s),d=this.convertToDefaultCurrency(u,s),h=this.findResultBoundary(r,c+d);return{amount:u,position:null!==(t=null==h?void 0:h.percentage)&&void 0!==t?t:jt.NONE}}calculateAdditionalAmount(e,t,n){let i=e-t;return n!==qI.DEFAULT_CURRENCY&&(i=this.currencyService.convert(i,qI.DEFAULT_CURRENCY,n)),i=this.currencyService.ceil(i,n),i}getThresholdPercentage(e){for(const t of qI.DONATION_THRESHOLDS)if(e>=t.lowerBound&&e<t.upperBound)return t.percentage;return qI.BELOW_TOP_40_THRESHOLD}sortBoundaries(e,t){const n=parseFloat(e[0].replace("_","."));return parseFloat(t[0].replace("_","."))-n}convertToBoundaryTable(e){return Object.entries(e).sort(this.sortBoundaries).map((e=>{let[t,[n,i]]=e;return{percentage:t,lowerBound:n,upperBound:i}}))}findNextBoundary(e,t){if(e===jt.NONE&&t.length>0)return t[0];const n=t.findIndex((t=>t.percentage===e));return-1!==n&&n<t.length-1?t[n+1]:null}findResultBoundary(e,t){let n=null;for(const i of e)if(t>=i.lowerBound&&t<i.upperBound){n=i;break}return n}convertToDefaultCurrency(e,t){return t===qI.DEFAULT_CURRENCY?e:this.currencyService.convert(e,t,qI.DEFAULT_CURRENCY)}}qI.DEFAULT_RESULT={amount:0,position:jt.NONE},qI.DEFAULT_CURRENCY="USD",qI.BELOW_TOP_40_THRESHOLD=30,qI.DONATION_THRESHOLDS=[{lowerBound:0,upperBound:16e3,percentage:30},{lowerBound:16e3,upperBound:1e5,percentage:25},{lowerBound:1e5,upperBound:1/0,percentage:15}];class HI extends Error{constructor(e){super(`${e} payment flow is not initialized`)}}class VI{constructor(e,t,n,i,s,a,o,r,c,l,u,d){this.checkoutConfiguration=e,this.checkoutState=t,this.paymentFlowManager=n,this.sessionAPI=i,this.sessionService=s,this.currencyService=a,this.intl=o,this.paymentMethods=r,this.iframeWindow=c,this.stripeLoadingPromise=l,this.applePayStripeLoadingPromise=u,this.params=d,this._stripeElementsPromise=null,this.googlePayChecked=!1,this.applePayChecked=!1,this.initializePaymentMethodsPromise=null}initiateCreditCard(e){return(0,c.sH)(this,void 0,void 0,(function*(){const t=yield this.resolvePaymentFlow(D._h.CARD);return yield t.initiateFlow(e),{stripeElements:yield this.stripeElementsPromise}}))}startCreditCardFlow(){return(0,c.sH)(this,void 0,void 0,(function*(){const e=yield this.resolvePaymentFlow(D._h.CARD),t=yield e.startFlow();return ue.isSuccess(t)}))}initiatePaypal(e){return(0,c.sH)(this,void 0,void 0,(function*(){const t=yield this.resolvePaymentFlow(D._h.PAYPAL);return yield this.sessionService.updateSession(),t.initiateFlow(e)}))}preloadVenmoScript(){return(0,c.sH)(this,void 0,void 0,(function*(){if(this.checkoutConfiguration.isLighthouse)return;const e=yield this.resolvePaymentFlow(D._h.VENMO);yield e.loadPayPalScriptIfNeeded()}))}preloadPayPalScript(){return(0,c.sH)(this,void 0,void 0,(function*(){if(this.checkoutConfiguration.isLighthouse)return;const e=yield this.resolvePaymentFlow(D._h.PAYPAL);yield e.loadPayPalScriptIfNeeded()}))}closePaypalButton(){if(this.isShowcase)return;const e=this.paymentFlowManager.getPaymentFlow(D._h.PAYPAL);if(!e)throw new HI(D._h.PAYPAL);e.closePaypal()}togglePaypalActions(e){const t=this.paymentFlowManager.getPaymentFlow(D._h.PAYPAL);t&&t.togglePaypalActions(e)}initiateGooglePay(){return(0,c.sH)(this,void 0,void 0,(function*(){const e=yield this.resolvePaymentFlow(D._h.GOOGLE_PAY);yield e.initiateFlow(),yield this.checkGooglePay()}))}startGooglePay(){return(0,c.sH)(this,void 0,void 0,(function*(){return(yield this.resolvePaymentFlow(D._h.GOOGLE_PAY)).startFlow()}))}initiateApplePay(){return(0,c.sH)(this,void 0,void 0,(function*(){yield this.checkApplePay()}))}startApplePay(){return(0,c.sH)(this,void 0,void 0,(function*(){return(yield this.resolvePaymentFlow(D._h.APPLE_PAY)).startFlow()}))}initiateUSBankAccount(e){return(0,c.sH)(this,void 0,void 0,(function*(){const t=yield this.resolvePaymentFlow(D._h.US_BANK_ACCOUNT);yield t.initiateFlow(e)}))}startUSBankAccount(){return(0,c.sH)(this,void 0,void 0,(function*(){return yield this.sessionService.updateSession(),(yield this.resolvePaymentFlow(D._h.US_BANK_ACCOUNT)).startFlow()}))}initiateACSS(e){return(0,c.sH)(this,void 0,void 0,(function*(){const t=yield this.resolvePaymentFlow(D._h.ACSS);yield t.initiateFlow(e)}))}startACSS(){return(0,c.sH)(this,void 0,void 0,(function*(){return yield this.sessionService.updateSession(),(yield this.resolvePaymentFlow(D._h.ACSS)).startFlow()}))}initiateSepa(e,t){return(0,c.sH)(this,void 0,void 0,(function*(){const n=yield this.resolvePaymentFlow(D._h.SEPA);return yield n.initiateFlow(e,t),{stripeElements:yield this.stripeElementsPromise}}))}startSepaFlow(){return(0,c.sH)(this,void 0,void 0,(function*(){const e=yield this.resolvePaymentFlow(D._h.SEPA),t=yield e.startFlow();return ue.isSuccess(t)}))}initiateVenmo(e){return(0,c.sH)(this,void 0,void 0,(function*(){const t=yield this.resolvePaymentFlow(D._h.VENMO);yield t.initiateFlow(e),yield this.checkVenmo()}))}closeVenmoButton(){const e=this.paymentFlowManager.getPaymentFlow(D._h.VENMO);if(!e)throw new HI(D._h.VENMO);e.closeButton()}toggleVenmoActions(e){const t=this.paymentFlowManager.getPaymentFlow(D._h.VENMO);t&&t.toggleVenmoActions(e)}initiateIDEAL(){return(0,c.sH)(this,void 0,void 0,(function*(){const e=yield this.resolvePaymentFlow(D._h.IDEAL);yield e.initiateFlow()}))}openIDEALConfirmationWindow(e){const t=this.paymentFlowManager.getPaymentFlow(D._h.IDEAL);if(!t)throw new HI(D._h.IDEAL);if(!(t instanceof Bk))return t.openConfirmationWindow(e)}isIDEALPaid(){const e=this.paymentFlowManager.getPaymentFlow(D._h.IDEAL);if(!e)throw new HI(D._h.IDEAL);return e.isPaid()}isIDEALPaymentRestored(){const e=this.paymentFlowManager.getPaymentFlow(D._h.IDEAL);return!!e&&!(e instanceof qk)&&e.isPaymentRestored()}isIDEALPaymentStarted(){const e=this.paymentFlowManager.getPaymentFlow(D._h.IDEAL);return!!e&&e.isPaymentStarted()}focusIDEALConfirmationWindow(){const e=this.paymentFlowManager.getPaymentFlow(D._h.IDEAL);if(!e)throw new HI(D._h.IDEAL);e instanceof Bk||e.focusConfirmationWindow()}initiateAuBECS(e,t){return(0,c.sH)(this,void 0,void 0,(function*(){const n=yield this.resolvePaymentFlow(D._h.AU_BECS);return yield n.initiateFlow(e,t),{stripeElements:yield this.stripeElementsPromise}}))}startAuBECSFlow(){return(0,c.sH)(this,void 0,void 0,(function*(){const e=yield this.resolvePaymentFlow(D._h.AU_BECS),t=yield e.startFlow();return ue.isSuccess(t)}))}ensurePaymentMethodsInitialized(){return(0,c.sH)(this,void 0,void 0,(function*(){if(!this.isShowcase){if(this.initializePaymentMethodsPromise)return this.initializePaymentMethodsPromise;this.initializePaymentMethodsPromise=this.initiatePaymentMethods(),yield this.initializePaymentMethodsPromise,this.initializePaymentMethodsPromise=null}}))}resolvePaymentFlow(e){return(0,c.sH)(this,void 0,void 0,(function*(){var t,n;if(!e)throw new Error("Client payment method is not specified");const i=this.checkoutConfiguration.company,s=this.checkoutConfiguration.user;switch(e){case D._h.CARD:return this.paymentFlowManager.resolveCard({sessionAPI:this.sessionAPI,stripe:yield this.stripeLoadingPromise(),stripeElements:yield this.stripeElementsPromise,failureHandler:()=>this.setProcessError(kD.PAYMENT),setPaymentMethodCountry:e=>this.setPaymentMethodCountry(e),donation:{getFrequency:()=>this.getDonationFrequency(),getCurrency:()=>this.getDonationCurrency()}});case D._h.PAYPAL:return this.paymentFlowManager.resolvePaypal({sessionAPI:this.sessionAPI,locale:null===(t=this.intl)||void 0===t?void 0:t.locale,iframeWindow:this.iframeWindow,paypalClientId:this.paymentMethods.paypalClientId,paypalMerchantId:i.paypal.merchantId,paypalCurrencies:[...i.paypalCurrencies],subscriptionsEnabled:i.paypal.subscriptionsEnabled,donation:{getCurrency:()=>this.getDonationCurrency(),getDefaultCurrency:()=>this.getDonationDefaultCurrency()},updateSession:()=>this.sessionService.updateSession(),setPaymentMethod:e=>this.setPaymentMethod(e),setDonorFirstNameIfEmpty:e=>this.setDonorFirstNameIfEmpty(e),setDonorLastNameIfEmpty:e=>this.setDonorLastNameIfEmpty(e),setDonorEmailIfEmpty:e=>this.setDonorEmailIfEmpty(e),setPhoneCountryCodeIfEmptyPhone:e=>this.setPhoneCountryCodeIfEmptyPhone(e),setPhoneNumberIfEmpty:e=>this.setPhoneNumberIfEmpty(e),setCountryCodeIfEmptyAddress:e=>this.setCountryCodeIfEmptyAddress(e),setCityIfEmpty:e=>this.setCityIfEmpty(e),setLine1IfEmpty:e=>this.setLine1IfEmpty(e),setLine2IfEmpty:e=>this.setLine2IfEmpty(e),setPostalIfEmpty:e=>this.setPostalIfEmpty(e),setRegionIfEmpty:e=>this.setRegionIfEmpty(e),paymentFailureHandler:()=>this.setProcessError(kD.PAYMENT),isFastTrackExperimentEnabled:()=>this.checkoutState.paymentOptions.paymentOptionsDataPoint.isFastTrackFlow&&this.checkoutState.mailingAddress.dataPoint.isRequired,setCleanPhoneNumber:e=>this.setPhoneCleanNumber(e)});case D._h.GOOGLE_PAY:return this.paymentFlowManager.resolveGooglePay({sessionAPI:this.sessionAPI,livemode:this.livemode,stripePublicKey:this.paymentMethods.stripePublicKey,countryCode:s.address.countryCode,googlePayInfo:this.paymentMethods.googlePayInfo,stripeAccount:i.stripeAccount,companyName:i.name,env:this.checkoutConfiguration.infrastructureParams.env,stripe:yield this.stripeLoadingPromise(),currencyService:this.currencyService,donation:{getFrequency:()=>this.getDonationFrequency(),getCurrency:()=>this.getDonationCurrency(),getTotal:()=>this.getDonationTotal()},setPaymentMethod:e=>this.setPaymentMethod(e),setDonorFullNameIfEmpty:e=>this.setDonorFullNameIfEmpty(e),setDonorEmailIfEmpty:e=>this.setDonorEmailIfEmpty(e),isFastTrackExperimentEnabled:()=>this.checkoutState.paymentOptions.paymentOptionsDataPoint.isFastTrackFlow,isMailingAddressRequired:this.checkoutState.mailingAddress.dataPoint.isRequired,isPhoneNumberRequired:this.checkoutState.privacy.phoneNumberDataPoint.isRequired,setDonorPhoneIfEmpty:e=>this.setPhoneNumberIfEmpty(e),setPhoneCleanNumber:e=>this.setPhoneCleanNumber(e),setPhoneCountryCodeIfEmptyPhone:e=>this.setPhoneCountryCodeIfEmptyPhone(e),setCountryCodeIfEmptyAddress:e=>this.setCountryCodeIfEmptyAddress(e),setCityIfEmpty:e=>this.setCityIfEmpty(e),setLine1IfEmpty:e=>this.setLine1IfEmpty(e),setLine2IfEmpty:e=>this.setLine2IfEmpty(e),setPostalIfEmpty:e=>this.setPostalIfEmpty(e),setRegionIfEmpty:e=>this.setRegionIfEmpty(e)});case D._h.APPLE_PAY:return this.paymentFlowManager.resolveApplePay({sessionAPI:this.sessionAPI,companyName:i.name,applePayStripeLoadingPromise:this.applePayStripeLoadingPromise,donation:{getTotal:()=>this.getDonationTotal(),getCurrency:()=>this.getDonationCurrency()},setPaymentMethod:e=>this.setPaymentMethod(e),setDonorFullNameIfEmpty:e=>this.setDonorFullNameIfEmpty(e),setDonorEmailIfEmpty:e=>this.setDonorEmailIfEmpty(e),setCountryCodeIfEmptyAddress:e=>this.setCountryCodeIfEmptyAddress(e),setCityIfEmpty:e=>this.setCityIfEmpty(e),setLine1IfEmpty:e=>this.setLine1IfEmpty(e),setLine2IfEmpty:e=>this.setLine2IfEmpty(e),setPostalIfEmpty:e=>this.setPostalIfEmpty(e),setRegionIfEmpty:e=>this.setRegionIfEmpty(e),isFastTrackExperimentEnabled:()=>this.checkoutState.paymentOptions.paymentOptionsDataPoint.isFastTrackFlow,isMailingAddressRequired:this.checkoutState.mailingAddress.dataPoint.isRequired,isPhoneNumberRequired:this.checkoutState.privacy.phoneNumberDataPoint.isRequired,setDonorPhoneIfEmpty:e=>this.setPhoneNumberIfEmpty(e),setPhoneCleanNumber:e=>this.setPhoneCleanNumber(e),setPhoneCountryCodeIfEmptyPhone:e=>this.setPhoneCountryCodeIfEmptyPhone(e)});case D._h.UK_BACS:return this.paymentFlowManager.resolveUkBacs({sessionAPI:this.sessionAPI,stripe:yield this.stripeLoadingPromise(),donorEmail:{getDto:()=>this.getDonorEmailDto()},mailingAddress:{getDto:()=>this.getMailingAddressDto()},ukBacs:{getDto:()=>this.getUkBacsDto()},mailingAddressFailureHandler:()=>this.setProcessError(kD.MAILING_ADDRESS),ukBacsFailureHandler:()=>this.setProcessError(kD.PAYMENT)});case D._h.ACSS:return this.paymentFlowManager.resolveACSS({sessionAPI:this.sessionAPI,stripe:yield this.stripeLoadingPromise(),donorName:{getDto:()=>this.getDonorNameDto()},donorEmail:{getDto:()=>this.getDonorEmailDto()},setPaymentMethod:e=>this.setPaymentMethod(e)});case D._h.AU_BECS:return this.paymentFlowManager.resolveAuBECS({sessionAPI:this.sessionAPI,stripe:yield this.stripeLoadingPromise(),stripeElements:yield this.stripeElementsPromise,donorName:{getDto:()=>this.getDonorNameDto()},donorEmail:{getDto:()=>this.getDonorEmailDto()}});case D._h.SEPA:return this.paymentFlowManager.resolveSepa({sessionAPI:this.sessionAPI,stripe:yield this.stripeLoadingPromise(),stripeElements:yield this.stripeElementsPromise,donorName:{getDto:()=>this.getDonorNameDto()},donorEmail:{getDto:()=>this.getDonorEmailDto()},paymentOptions:{getDto:()=>this.getPaymentOptionsDto()},mailingAddress:{getDto:()=>this.getMailingAddressDto(),validate:()=>this.getMailingAddressValidationResult()},checkoutConfiguration:this.checkoutConfiguration,setPaymentMethodCountry:e=>this.setPaymentMethodCountry(e),mailingAddressFailureHandler:()=>this.setProcessError(kD.MAILING_ADDRESS)});case D._h.IDEAL:return this.paymentFlowManager.resolveIDEAL({sessionAPI:this.sessionAPI,stripe:yield this.stripeLoadingPromise(),env:this.checkoutConfiguration.infrastructureParams.env,stripeElements:yield this.stripeElementsPromise,donorName:{getDto:()=>this.getDonorNameDto()},donorEmail:{getDto:()=>this.getDonorEmailDto()},clientId:this.params.clientId,checkoutConfiguration:this.checkoutConfiguration});case D._h.VENMO:return this.paymentFlowManager.resolveVenmo({sessionAPI:this.sessionAPI,livemode:this.livemode,showcase:this.isShowcase,locale:null===(n=this.intl)||void 0===n?void 0:n.locale,iframeWindow:this.iframeWindow,paypalClientId:this.paymentMethods.paypalClientId,paypalMerchantId:i.paypal.merchantId,updateSession:()=>this.sessionService.updateSession(),setPaymentMethod:e=>this.setPaymentMethod(e),setDonorFirstNameIfEmpty:e=>this.setDonorFirstNameIfEmpty(e),setDonorLastNameIfEmpty:e=>this.setDonorLastNameIfEmpty(e),setDonorEmailIfEmpty:e=>this.setDonorEmailIfEmpty(e),setPhoneCountryCodeIfEmptyPhone:e=>this.setPhoneCountryCodeIfEmptyPhone(e),setPhoneNumberIfEmpty:e=>this.setPhoneNumberIfEmpty(e),setCountryCodeIfEmptyAddress:e=>this.setCountryCodeIfEmptyAddress(e),setCityIfEmpty:e=>this.setCityIfEmpty(e),setLine1IfEmpty:e=>this.setLine1IfEmpty(e),setLine2IfEmpty:e=>this.setLine2IfEmpty(e),setPostalIfEmpty:e=>this.setPostalIfEmpty(e),setRegionIfEmpty:e=>this.setRegionIfEmpty(e)});case D._h.US_BANK_ACCOUNT:return this.paymentFlowManager.resolveUSBankAccount({stripe:yield this.stripeLoadingPromise(),usBankAccount:{getDto:()=>this.getUsBankAccountDto(),getUsBankAccountVerificationSetup:()=>this.getUsBankAccountVerificationSetup()},sessionAPI:this.sessionAPI,checkoutConfiguration:this.checkoutConfiguration,donation:{getTotal:()=>this.getDonationTotal(),getCurrency:()=>this.getDonationCurrency()},donorName:{getDto:()=>this.getDonorNameDto()},paymentFailureHandler:()=>this.setProcessError(kD.PAYMENT),setFinancialInstitution:e=>this.setUsBankAccountFinancialInstitution(e),setVerificationType:e=>this.setUsBankAccountVerificationType(e),setAccountNumber:e=>this.setUsBankAccountNumber(e),setRoutingNumber:e=>this.setUsBankAccountRoutingNumber(e),setAccountType:e=>this.setUsBankAccountType(e)});default:throw new Error(`Payment flow for ${e} is not implemented`)}}))}get livemode(){return this.checkoutConfiguration.infrastructureParams.livemode}get isShowcase(){return this.checkoutConfiguration.infrastructureParams.showcase}get stripeElementsPromise(){return this._stripeElementsPromise||(this._stripeElementsPromise=this.getStripeElements()),this._stripeElementsPromise}initiatePaymentMethods(){return(0,c.sH)(this,void 0,void 0,(function*(){const e=this.checkoutState.paymentOptions.paymentOptionsDataPoint,t=[];e.allowedPaymentMethods.googlePay.available&&t.push(this.initiateGooglePay()),e.allowedPaymentMethods.applePay.available&&t.push(this.initiateApplePay()),e.allowedPaymentMethods.paypal.available&&t.push(this.preloadPayPalScript()),e.allowedPaymentMethods.venmo.available&&t.push(this.preloadVenmoScript()),yield Promise.all(t)}))}getStripeElements(){return(0,c.sH)(this,void 0,void 0,(function*(){const e=yield this.stripeLoadingPromise();if(!e)throw new Error("Stripe is not provided");return e.elements(this.params.stripe.elementsOptions)}))}checkGooglePay(){return(0,c.sH)(this,void 0,void 0,(function*(){if(this.googlePayChecked)return;const e=yield this.resolvePaymentFlow(D._h.GOOGLE_PAY);(yield e.checkAvailability())&&this.setPaymentMethodChecked(D._h.GOOGLE_PAY),this.googlePayChecked=!0}))}checkApplePay(){return(0,c.sH)(this,void 0,void 0,(function*(){if(this.applePayChecked)return;const e=yield this.resolvePaymentFlow(D._h.APPLE_PAY);(yield e.checkAvailability())&&this.setPaymentMethodChecked(D._h.APPLE_PAY),this.applePayChecked=!0}))}checkVenmo(){return(0,c.sH)(this,void 0,void 0,(function*(){const e=(yield this.resolvePaymentFlow(D._h.VENMO)).checkAvailability();return e&&this.setPaymentMethodChecked(D._h.VENMO),e}))}setPaymentMethod(e){this.checkoutState.paymentOptions.setPaymentMethod(e)}setPaymentMethodCountry(e){this.checkoutState.paymentOptions.setPaymentMethodCountry(e)}setPaymentMethodChecked(e){this.checkoutState.paymentOptions.setPaymentMethodChecked(e)}setUsBankAccountFinancialInstitution(e){this.checkoutState.paymentOptions.setUsBankAccountFinancialInstitution(e)}setUsBankAccountVerificationType(e){this.checkoutState.paymentOptions.setUsBankAccountVerificationType(e)}setUsBankAccountNumber(e){this.checkoutState.paymentOptions.setUsBankAccountNumber(e)}setUsBankAccountRoutingNumber(e){this.checkoutState.paymentOptions.setUsBankAccountRoutingNumber(e)}setUsBankAccountType(e){this.checkoutState.paymentOptions.setUsBankAccountType(e)}setProcessError(e){this.checkoutState.process.setError({errorType:e})}setDonorFirstNameIfEmpty(e){this.checkoutState.privacy.setDonorFirstNameIfEmpty(e)}setDonorLastNameIfEmpty(e){this.checkoutState.privacy.setDonorLastNameIfEmpty(e)}setDonorFullNameIfEmpty(e){this.checkoutState.privacy.setDonorFullNameIfEmpty(e)}setDonorEmailIfEmpty(e){this.checkoutState.privacy.setDonorEmailIfEmpty(e)}setPhoneCountryCodeIfEmptyPhone(e){this.checkoutState.privacy.setPhoneCountryCodeIfEmptyPhone(e)}setPhoneNumberIfEmpty(e){this.checkoutState.privacy.setPhoneNumberIfEmpty(e)}setPhoneCleanNumber(e){this.checkoutState.privacy.setPhoneCleanNumber(e)}setCountryCodeIfEmptyAddress(e){this.checkoutState.mailingAddress.setCountryCodeIfEmptyAddress(e)}setCityIfEmpty(e){this.checkoutState.mailingAddress.setCityIfEmpty(e)}setLine1IfEmpty(e){this.checkoutState.mailingAddress.setLine1IfEmpty(e)}setLine2IfEmpty(e){this.checkoutState.mailingAddress.setLine2IfEmpty(e)}setRegionIfEmpty(e){this.checkoutState.mailingAddress.setRegionIfEmpty(e)}setPostalIfEmpty(e){this.checkoutState.mailingAddress.setPostalIfEmpty(e)}getDonationFrequency(){return this.checkoutState.donation.dataPoint.frequency}getDonationCurrency(){return this.checkoutState.donation.dataPoint.currency}getDonationDefaultCurrency(){return this.checkoutConfiguration.defaultCurrency}getDonationTotal(){return this.checkoutState.donation.dataPoint.total}getDonorEmailDto(){return this.checkoutState.privacy.donorEmailDataPoint.toObject()}getDonorNameDto(){return this.checkoutState.privacy.donorNameDataPoint.toObject()}getPaymentOptionsDto(){return this.checkoutState.paymentOptions.paymentOptionsDataPoint.toObject()}getMailingAddressDto(){return this.checkoutState.mailingAddress.dataPoint.toObject()}getMailingAddressValidationResult(){return this.checkoutState.mailingAddress.dataPoint.validate()}getUkBacsDto(){return this.checkoutState.paymentOptions.ukBacsDataPoint.toObject()}getUsBankAccountDto(){return this.checkoutState.paymentOptions.usBankAccountDataPoint.toObject()}getUsBankAccountVerificationSetup(){return this.checkoutState.paymentOptions.usBankAccountDataPoint.usBankAccountVerificationSetup}}class KI{constructor(e){this.sessionAPI=e}update(e){return(0,c.sH)(this,void 0,void 0,(function*(){const t=yield this.sessionAPI.post("postDonationUpsell",{postDonationUpsell:e},{rejectsOnInvalid:!0});return!!ue.isSuccess(t)}))}}class YI{constructor(e){this.sessionApi=e,this._fetchDecision=e=>Promise.race([this.requestCacheService.getCachedOrFetchValue(e),new Promise((e=>setTimeout((()=>{e(this.getResult(lO,!1))}),1500)))]),this.requestCacheService=new cO(lO,e.getFeeCovering.bind(e),this.shouldCacheResponse,this.getCacheKey,this.getResult),this._debouncedGetDecision=PO(this._fetchDecision,300)}fetchDecision(e){return this._fetchDecision(e)}debouncedFetchDecision(e){return this._debouncedGetDecision(e)}getCacheKey(e){return JSON.stringify(e)}shouldCacheResponse(e,t){return!t.isFallback}getResult(e,t){return{response:e,fromCache:t}}}class zI extends $T{}const WI=ve.DONATE,$I=[...JT,ve.DONATE],XI=[ve.PAYMENT_OPTIONS,ve.AU_BECS,ve.SEPA],QI=[...e_,ve.DONATE,oc.REMIND_ME],ZI=[...n_,ve.DONATE],JI=[...a_,ve.DONATE],ex=[ve.DONATE,oc.THANK_YOU,oc.BLOCKED],tx=[ve.UPSELL,ve.PAYMENT_OPTIONS,oc.COMMENT],nx=[...QT,oc.REMIND_ME,ve.DONATE,ve.IDEAL_CONFIRMATION],ix=[...ZT,ve.DONATE],sx=[oc.THANK_YOU,oc.REMIND_ME],ax=[...t_],ox=[...i_,oc.REMIND_ME],rx=[...s_,oc.REMIND_ME],cx={[W.ANNUAL]:"upsellScreen.button.donateAnnual",[W.MONTHLY]:"upsellScreen.button.donateMonthly",[W.EVERY_4_WEEKS]:"upsellScreen.button.donate4Weeks"},lx={[W.ANNUAL]:"upsellScreen.button.donateAnnual",[W.MONTHLY]:"upsellScreen.button.donateMonthly",[W.EVERY_4_WEEKS]:"upsellScreen.button.donate4Weeks"},ux={[W.ANNUAL]:"upsellScreen.titleAnnual",[W.MONTHLY]:"upsellScreen.title",[W.EVERY_4_WEEKS]:"upsellScreen.titleEvery4Weeks"},dx={[W.ANNUAL]:"upsellScreen.questionAnnual",[W.MONTHLY]:"upsellScreen.question",[W.EVERY_4_WEEKS]:"upsellScreen.questionEvery4Weeks"},hx={[W.ANNUAL]:"upsellScreen.questionAnnual",[W.MONTHLY]:"upsellScreen.questionShort",[W.EVERY_4_WEEKS]:"upsellScreen.questionShortEvery4Weeks"},mx={[W.ANNUAL]:"upsellScreen.descriptionAnnual",[W.MONTHLY]:"upsellScreen.description",[W.EVERY_4_WEEKS]:"upsellScreen.descriptionEvery4Weeks"};class px{constructor(e,t){this.checkoutState=e,this.intl=t}getBeforeEnterViewState(){var e,t;const n=this.getViewTexts();return{currency:this.preDonationUpsellDataPoint.upsellCurrency,targetFrequency:this.preDonationUpsellDataPoint.upsellFrequency,lowAmount:this.preDonationUpsellDataPoint.upsellLowAmount,lowAmountInUSD:this.preDonationUpsellDataPoint.upsellLowAmountInUsd,highAmount:this.preDonationUpsellDataPoint.upsellHighAmount,highAmountInUSD:this.preDonationUpsellDataPoint.upsellHighAmountInUsd,isAnnualTribute:this.preDonationUpsellDataPoint.upsellFrequency===W.ANNUAL,highButtonText:n.highButtonText,lowButtonText:n.lowButtonText,screenTitle:n.screenTitle,questionText:n.questionText,questionShortText:n.questionShortText,descriptionText:n.descriptionText,upsell:{fromAmount:null!==(e=this.preDonationUpsellDataPoint.upsellInitialAmount)&&void 0!==e?e:0,fromAmountInUSD:null!==(t=this.preDonationUpsellDataPoint.upsellInitialAmountInUsd)&&void 0!==t?t:0},processingState:{lowMonthly:Kr.IDLE,highMonthly:Kr.IDLE}}}confirmUpsell(e){e?this.acceptUpsell(e):this.rejectUpsell()}get preDonationUpsellDataPoint(){return this.checkoutState.preDonationUpsell.dataPoint}acceptUpsell(e){this.checkoutState.preDonationUpsell.confirm(!0),this.setDonationParams({frequency:this.preDonationUpsellDataPoint.upsellFrequency,amount:e===FC.HIGH?this.preDonationUpsellDataPoint.upsellHighAmount:this.preDonationUpsellDataPoint.upsellLowAmount})}rejectUpsell(){this.checkoutState.preDonationUpsell.confirm(!1),this.setDonationParams({frequency:W.ONCE,amount:this.preDonationUpsellDataPoint.upsellInitialAmount})}setDonationParams(e){this.checkoutState.donation.dataPoint.frequency===e.frequency&&this.checkoutState.donation.dataPoint.amount===e.amount||(this.checkoutState.donation.setDonationsFrequency(e.frequency),this.checkoutState.donation.setDonationsAmount(e.amount))}getViewTexts(){var e,t,n;const i=this.preDonationUpsellDataPoint.upsellFrequency,s=this.preDonationUpsellDataPoint.upsellCurrency,a=null!==(e=this.preDonationUpsellDataPoint.upsellHighAmount)&&void 0!==e?e:0,o=null!==(t=this.preDonationUpsellDataPoint.upsellLowAmount)&&void 0!==t?t:0,r=null!==(n=this.preDonationUpsellDataPoint.upsellInitialAmount)&&void 0!==n?n:0;return{highButtonText:this.intl.translate(cx[i],{amount:this.intl.formatCurrency(a,{currency:s,display:"floatcents"})}),lowButtonText:this.intl.translate(lx[i],{amount:this.intl.formatCurrency(o,{currency:s,display:"floatcents"})}),screenTitle:this.intl.translate(ux[i]),questionText:this.intl.translate(dx[i],{amount:this.intl.formatCurrency(r,{currency:s,display:"floatcents"})}),questionShortText:this.intl.translate(hx[i],{amount:this.intl.formatCurrency(r,{currency:s,display:"floatcents"})}),descriptionText:this.intl.translate(mx[i])}}}class gx extends O_{constructor(e){super(e),this.paymentService=e.paymentService}beforeEnter(){return(0,c.sH)(this,void 0,void 0,(function*(){this.produceViewState((e=>{var t;e.isPaymentScreen=this.isPaymentScreen,e.formattedAmount=this.intl.formatCurrency(null!==(t=this.donationDataPoint.total)&&void 0!==t?t:0,{currency:this.donationDataPoint.currency,display:"floatcents"}),e.frequency=this.donationDataPoint.frequency}))}))}beforeLeave(e){return(0,c.sH)(this,void 0,void 0,(function*(){if(this.pending)return!1;if(this.pending=!0,this.setProcessingState(Kr.PENDING),this.produceViewState((e=>{e.payErrorMessage=""})),!(yield this.paymentService.startAuBECSFlow()))return this.produceViewState((e=>{e.shakeKey+=1,e.processingState=Kr.IDLE})),this.pending=!1,!1;const e=yield this.checkoutService.hold();return ue.isFailure(e)?(this.pending=!1,yield this.showError(),!1):this.isPaymentScreen?this.pay():(this.pending=!1,!0)}))}initiateAuBECS(e,t){return(0,c.sH)(this,void 0,void 0,(function*(){return this.paymentService.initiateAuBECS(e,t)}))}getInitialViewState(){return{locked:!1,accountNumber:null,bsbNumber:null,shakeKey:0,accountHolderName:"",termsChecked:!0,errors:{},processingState:Kr.IDLE,isPaymentScreen:!1,formattedAmount:"",frequency:W.ONCE}}get donationDataPoint(){return this.checkoutState.donation.dataPoint}get isPaymentScreen(){return this.name===this.checkoutService.getPaymentScreen(this.name,this.flow.getHistoricalScreens())}pay(){return(0,c.sH)(this,void 0,void 0,(function*(){const e=yield this.checkoutService.pay({screen:this.name,predictedNextScreen:this.flow.predictNextScreen()});return ue.isFailure(e)?e.failureResult.shouldLeave?(this.pending=!1,!0):(this.pending=!1,yield this.showError(),!1):(this.setProcessingState(Kr.SUCCESS),yield fo(this.checkoutService.checkoutConfiguration.successPaymentDelayBeforeLeave),this.pending=!1,!0)}))}showError(){return(0,c.sH)(this,void 0,void 0,(function*(){this.produceViewState((e=>{e.processingState=Kr.ERROR,e.payErrorMessage=this.checkoutService.payErrorMessage||this.intl.translate("common.errorOccurredText")}))}))}setProcessingState(e){this.produceViewState((t=>{t.processingState=e}))}}const yx=[D.ax.EMAIL,D.ax.SMS,D.ax.PHONE_CALLS,D.ax.POSTAL_MAIL,D.ax.SOCIAL_MEDIA];class fx extends O_{constructor(e){super(e)}beforeEnter(){return(0,c.sH)(this,void 0,void 0,(function*(){this.produceViewState((e=>{e.channels=this.prepareChannels()}))}))}changeChannel(e,t){this.checkoutState.communicationConsent.setCustomizedChannelState(e,t),this.produceViewState((e=>{e.channels=this.prepareChannels()}))}resetChannels(){this.checkoutState.communicationConsent.resetCustomizedConsent()}setCustomizedConsentShown(){this.checkoutState.communicationConsent.setCustomizedConsentShown()}beforeLeave(){return(0,c.sH)(this,void 0,void 0,(function*(){return this.checkoutService.updateSession(),!0}))}getInitialViewState(){return{locked:!1,channels:[]}}prepareChannels(){return yx.filter((e=>this.checkoutState.communicationConsent.dataPoint.customizedConsent[e].isEnabled)).map((e=>({type:e,isAccepted:this.checkoutState.communicationConsent.dataPoint.customizedConsent[e].isAccepted})))}}class Ex extends Yt{tryStart(e){this.canBeStarted(e)&&(this.isActive||super.start())}isTestGroup(){return this.isActive&&this.isVariant(Dt.TEST)}canBeStarted(e){var t;return!(null===(t=e.checkoutConfiguration.fundraisingPage)||void 0===t?void 0:t.key)&&(!!e.checkoutConfiguration.canModifyAmount&&!e.checkoutConfiguration.enabledFrequencies.some((t=>null!==e.fiatDonationDataPoint.allAmountHints[t])))}}class Sx extends Yt{tryStart(e){this.canBeStarted(e)&&(this.isActive||super.start())}isVariantTestGroup(e){return this.isActive&&this.isVariant(e)}canBeStarted(e){var t;if(null===(t=e.checkoutConfiguration.fundraisingPage)||void 0===t?void 0:t.key)return!1;if(!e.checkoutConfiguration.canModifyAmount)return!1;const n=e.checkoutConfiguration.enabledFrequencies,i=!e.checkoutConfiguration.infrastructureParams.isMobile,s=e.checkoutConfiguration.enabledFrequencies.includes(W.DAILY),a=e.fiatDonationDataPoint.getFrequencyDonationEndDate(W.DAILY),o=a.hasEndDate&&a.shouldShow;return!(i&&s&&o)&&!n.some((t=>null!==e.fiatDonationDataPoint.allAmountHints[t]))}}class vx extends Yt{tryStart(e){this.isActive||this.canBeStarted(e)&&super.start()}isEnabled(e){return this.canBeStarted(e)&&this.isTestGroup}get isTestGroup(){return this.isActive&&this.isVariant(qe.TEST)}canBeStarted(e){return!!e.canShowUpsellScreen&&!!vx.ALLOWED_TARGET_FREQUENCIES.includes(e.targetFrequency)}}vx.ALLOWED_TARGET_FREQUENCIES=[W.MONTHLY,W.EVERY_4_WEEKS];class Ax extends Yt{tryStart(e){this.isActive||this.canBeStarted(e)&&super.start()}isEnabled(e){return this.canBeStarted(e)&&this.isTestGroup}get isTestGroup(){return this.isActive&&this.isVariant(Ge.TEST)}canBeStarted(e){return!!e.canShowUpsellScreen&&!!Ax.ALLOWED_TARGET_FREQUENCIES.includes(e.targetFrequency)}}var Cx;Ax.ALLOWED_TARGET_FREQUENCIES=[W.MONTHLY,W.EVERY_4_WEEKS],function(e){e.VARIANT_1="variant-1",e.VARIANT_2="variant-2",e.VARIANT_3="variant-3",e.VARIANT_4="variant-4",e.VARIANT_5="variant-5",e.VARIANT_6="variant-6",e.VARIANT_7="variant-7",e.VARIANT_8="variant-8",e.VARIANT_9="variant-9"}(Cx||(Cx={}));class Px{constructor(){this.lastGeneratedIcon=null,this.availableIconsNames=Object.values(Cx)}generate(){var e;const t=Math.floor(Math.random()*this.availableIconsNames.length);let n=this.availableIconsNames[t];return n===this.lastGeneratedIcon&&(n=null!==(e=this.availableIconsNames[t+1])&&void 0!==e?e:this.availableIconsNames[0]),this.lastGeneratedIcon=n,n}}const Nx={[Cx.VARIANT_1]:"medal",[Cx.VARIANT_2]:"heart",[Cx.VARIANT_3]:"star",[Cx.VARIANT_4]:"light",[Cx.VARIANT_5]:"trophy",[Cx.VARIANT_6]:"prize",[Cx.VARIANT_7]:"diamond",[Cx.VARIANT_8]:"double-hearts",[Cx.VARIANT_9]:"double-stars"};class bx{static getInstance(){return bx.instance||(bx.instance=new bx),bx.instance}constructor(){this.baseGenerator=new Px}generate(){const e=this.baseGenerator.generate();return Nx[e]}}class Dx extends O_{constructor(e,t,n,i,s,a){super(e),this.upsellAggregate=t,this.adaptiveFeeCoveringService=n,this.donorRatingCalculator=i,this.donorRatingRecommendationCalculator=s,this.designationsFetcher=a,this.baseTryToCalculateDonorRating=()=>{if(null===this.donorRatingExperiment)return;const{isValid:e}=this.donationDataPoint.validate();if(!e)return void this.hideDonorRatingElements();this.donorRatingExperiment.tryToExpose();const{position:t}=this.tryToCalculateDonorRatingTop(),n=this.tryToShowDonorRatingUpsell(t);this.tryToShowDonorRatingBanner(t,n.position!==jt.NONE)},this.debouncedTryToCalculateDonorRating=function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return()=>{clearTimeout(t),t=setTimeout((()=>{e()}),n)}}(this.baseTryToCalculateDonorRating,Zt.DEBOUNCE_TIMEOUT),this.adaptivePreDonationUpsellSuggestionsService=e.adaptivePreDonationUpsellSuggestionsService,this.experiments.register(be.CHECKOUT_WITHOUT_PRE_DONATION_UPSELL_EXPERIMENT,Ax),this.experiments.register(be.CAMPAIGN_PAGES_WITHOUT_PRE_DONATION_UPSELL_EXPERIMENT,vx),this.experiments.register(be.AVERAGE_DONATION_HINT_EXPERIMENT,Sx),this.experiments.register(be.AVERAGE_DONATION_HINT_CAMPAIGN_PAGES_EXPERIMENT,Ex)}get isLocked(){return this.getScreenData().locked}get donateButtonLabel(){return function(e,t){switch(t){case W.DAILY:return e.translate("donateForm.donateButton.daily");case W.WEEKLY:return e.translate("donateForm.donateButton.weekly");case W.BIWEEKLY:return e.translate("donateForm.donateButton.biweekly");case W.EVERY_4_WEEKS:return e.translate("donateForm.donateButton.every4weeks");case W.MONTHLY:return e.translate("donateForm.donateButton.monthly");case W.BIMONTHLY:return e.translate("donateForm.donateButton.bimonthly");case W.QUARTERLY:return e.translate("donateForm.donateButton.quarterly");case W.SEMIANNUAL:return e.translate("donateForm.donateButton.semiannual");case W.ANNUAL:return e.translate("donateForm.donateButton.annual");default:return e.translate("donateForm.donateButton.once")}}(this.intl,this.donationDataPoint.frequency)}get shouldShowAverageDonationHint(){return(this.checkoutService.checkoutConfiguration.infrastructureParams.showcase||this.viewState.donation.frequency===W.ONCE)&&!1}get shouldShowAverageDonationHintTooltip(){const e=this.viewState.tribute.sharingEnabled&&this.viewState.tribute.isActive&&this.viewState.isTributeInputFocused;return this.shouldShowAverageDonationHint&&!this.viewState.errors.amount.min&&!e&&!this.viewState.forceHideAverageDonationHintTooltip}get amountAverageDonationHint(){return this.currencyService.convert(1e4,"USD",this.viewState.donation.currency)}get isRateMatchingCountdownEnabled(){if(!this.viewState.rateMatching.show)return!1;if(!this.viewState.rateMatching.endDate)return!1;if(!this.viewState.rateMatching.endDateEnabled)return!1;const e=Eb(this.viewState.rateMatching.endDate),t=new Date,n=e>t,i=new Date(t);return i.setDate(t.getDate()+14),n&&e<=i}get rateMatchingTotalAmountLimitInDonationCurrency(){return this.viewState.rateMatching.totalAmountLimit?this.currencyService.convert(this.viewState.rateMatching.totalAmountLimit,this.checkoutService.campaignConfig.defaultCurrency,this.viewState.donation.currency):null}get matchingImpact(){var e;if(!this.donationDataPoint.amount)return null;if(this.rateMatchingTotalAmountLimitInDonationCurrency&&this.isDonationOverMaxLimit){const t=null!==(e=this.rateMatching.remains)&&void 0!==e?e:this.rateMatchingTotalAmountLimitInDonationCurrency;return this.donationDataPoint.amount+t}return this.calculateMatchingImpactWithoutLimit()}get isDonationOverMaxLimit(){var e;if(!this.donationDataPoint.amount)return!1;if(!this.rateMatchingTotalAmountLimitInDonationCurrency)return!1;const t=this.calculateMatchingImpactWithoutLimit();if(!t)return!1;const n=null!==(e=this.rateMatching.remains)&&void 0!==e?e:this.rateMatchingTotalAmountLimitInDonationCurrency;return t-this.donationDataPoint.amount>n}get isDonationMatched(){return!!this.donationDataPoint.amount&&(!this.viewState.rateMatching.minAmount||this.donationDataPoint.amount>=this.minRateMatchingAmount)}get minRateMatchingAmount(){const e=this.currencyService.convert(this.viewState.rateMatching.minAmount||0,this.checkoutService.campaignConfig.defaultCurrency,this.viewState.donation.currency);return this.currencyService.ceil(e,this.viewState.donation.currency)}get rateMatchingUpsellAmountToAdd(){return this.viewState.rateMatching.minAmount&&this.donationDataPoint.amount?this.donationDataPoint.amount>this.minRateMatchingAmount?null:this.minRateMatchingAmount-this.donationDataPoint.amount:null}get rateMatchingAmountAfterUpsell(){return this.viewState.rateMatching.minAmount?this.minRateMatchingAmount*this.viewState.rateMatching.rate:null}beforeEnter(e){return(0,c.sH)(this,void 0,void 0,(function*(){this.checkoutService.ensureFrequencyEnabled(this.donationDataPoint.frequency);const e=this.donationDataPoint.frequency,t=this.donationDataPoint.getFrequencyDonationEndDate(e);this.produceViewState((n=>{n.tribute.show=this.tributeDataPoint.isEnabled,n.tribute.isActive=this.tributeDataPoint.isActive,n.tribute.labelType=this.tributeDataPoint.labelType,n.tribute.sharingEnabled=this.tributeDataPoint.isSharingEnabled,n.tribute.isOptional=this.tributeDataPoint.isOptional,n.tribute.name=this.tributeDataPoint.tributeeName,n.tribute.isFilled=this.tributeDataPoint.isFilled,n.tribute.isTributeOriented=this.tributeDataPoint.isTributeOriented,n.comment.isEnabled=this.commentDataPoint.isEnabled,n.comment.content=this.commentDataPoint.comment,n.comment.prevContent=this.commentDataPoint.prevComment,n.donation.amount=this.donationDataPoint.amount,n.donation.minAmount=this.donationDataPoint.getFrequencyMinimalAmount(e),n.donation.maxAmount=this.donationDataPoint.maxAmount,n.donation.amountOptions=[...this.donationDataPoint.getFrequencyAmountSuggestions(e)],n.donation.frequency=e,n.donation.canModifyAmount=this.checkoutService.checkoutConfiguration.canModifyAmount,n.donation.canSelectCurrency=this.donationDataPoint.isCurrencyEditableForFrequency(e),n.donation.currency=this.donationDataPoint.currency,n.donation.hintOptions=this.donationDataPoint.getFrequencyAmountHints(e),n.donation.canModifyFrequency=this.checkoutService.checkoutConfiguration.canModifyFrequency,n.donation.showAmountSuggestions=this.checkoutService.checkoutConfiguration.showAmountSuggestions,n.donation.showDonationEndDate=t.shouldShow,n.donation.donationEndDate=t.endDate,n.donation.isDonationEndDateActive=this.donationDataPoint.isDonationEndDateActive,n.donation.donationItems=this.donationDataPoint.donationItemsDto,n.designations.availableGoals=this.designationsDataPoint.availableGoals,n.designations.goals=this.designationsDataPoint.goals,n.designations.selectedGoals=this.designationsDataPoint.selectedGoals,n.designations.isLoading=!1,n.designation.show=this.designationDataPoint.isEnabled,n.designation.goalKey=this.designationDataPoint.goalKey,n.designation.goals=this.designationDataPoint.getAllowedGoalsByFrequency(this.getGoalRepeat(n.donation.frequency)),n.designation.goal=this.designationDataPoint.selectedGoal,n.designation.shouldShowDesignation=this.designationDataPoint.shouldShowDesignation(this.getGoalRepeat(n.donation.frequency)),n.designation.isEditable=this.designationDataPoint.isEditable(this.getGoalRepeat(n.donation.frequency)),n.allCurrenciesList=this.checkoutService.checkoutConfiguration.enabledCurrencies,n.guessedCurrenciesList=this.checkoutService.checkoutConfiguration.guessedCurrencies,n.donateButtonLabel=this.donateButtonLabel,n.leftButtonLabel=this.leftButtonLabel,n.leftButtonFrequency=this.checkoutService.checkoutConfiguration.lowestFrequency,n.rightButtonLabel=this.rightButtonLabel,n.rightButtonFrequency=this.checkoutService.checkoutConfiguration.highestFrequency,n.rateMatching=this.rateMatching,n.isRateMatchingEnabled=this.isRateMatchingEnabled(n.rateMatching),n.showFrequencyCustomAmountInput=!this.donationDataPoint.amountHint,n.donation.showAnnualCheckbox=this.checkoutService.isMultipleRecurringPlanTestGroup2(),n.donation.showAnnualTab=this.checkoutService.isMultipleRecurringPlanTestGroup1(),n.donation.annualCheckboxChecked=this.donationDataPoint.frequency===W.ANNUAL&&this.checkoutService.isMultipleRecurringPlanTestGroup2()})),this.syncDonationItemsErrors(),this.validateAmount(),this.validateDesignations(!0),this.initializeRecurringFrequencyHintCheckoutDesktopExperiment(),this.initializeAverageDonationHintExperiment(),this.initializeAverageDonationHintCampaignPagesExperiment(),this.calculateAverageDonationAmount(),!this.checkoutService.checkoutConfiguration.canModifyAmount&&this.viewState.showError&&(this.checkoutService.checkoutConfiguration.allowModifyAmount(),this.produceViewState((e=>{e.donation.canModifyAmount=this.checkoutService.checkoutConfiguration.canModifyAmount}))),this.tryFetchDesignationGoals(),this.checkoutService.exposeMultipleRecurringPlanCheckoutExperiment(),this.checkoutService.exposeMultipleRecurringPlanCampaignPagesExperiment()}))}tryToCalculateDonorRating(e){(null==e?void 0:e.debounce)?this.debouncedTryToCalculateDonorRating():this.baseTryToCalculateDonorRating()}applyDonorRatingUpsell(){if(null===this.donationDataPoint.amount)return;if(this.changeAmount(this.donationDataPoint.amount+this.viewState.donorRating.upsell.amount),null===this.donorRatingExperiment)return;this.donorRatingExperiment.isUpsellApplied=!0;const e=this.currencyService.convert(this.viewState.donorRating.upsell.amount,this.donationDataPoint.currency,"USD");let t=0;null!==this.donationDataPoint.amountInUSD&&(t=this.donationDataPoint.amountInUSD-e),this.donorRatingExperiment.trackUpsellClick({position:this.viewState.donorRating.upsell.position,frequency:this.donationDataPoint.frequency,amount:t,upsellAmount:e});const{position:n}=this.tryToCalculateDonorRatingTop();this.tryToShowDonorRatingBanner(n,!1),this.showDonorRatingUpsell(qI.DEFAULT_RESULT)}setIsTributeInputFocused(e){return(0,c.sH)(this,void 0,void 0,(function*(){yield fo(200),this.produceViewState((t=>{t.isTributeInputFocused=e}))}))}toggleAnnualCheckbox(e){this.changeFrequency(e?W.ANNUAL:W.ONCE),this.produceViewState((t=>{t.donation.annualCheckboxChecked=e}))}changeFrequency(e){e!==this.viewState.donation.frequency&&this.hideDonorRatingElements(),this.checkoutState.donation.setDonationsFrequency(e),this.checkoutService.syncUpdateCheckoutState();const t=this.donationDataPoint.getFrequencyDonationEndDate(e);this.produceViewState((n=>{n.donation.frequency=this.donationDataPoint.frequency,n.donation.amount=this.donationDataPoint.amount,n.donation.currency=this.donationDataPoint.currency,n.donation.amountOptions=[...this.donationDataPoint.getFrequencyAmountSuggestions(e)],n.donation.hintOptions=this.donationDataPoint.getFrequencyAmountHints(e),n.donation.canSelectCurrency=this.donationDataPoint.isCurrencyEditableForFrequency(e),n.donation.showDonationEndDate=t.shouldShow,n.donation.donationEndDate=t.endDate,n.donation.isDonationEndDateActive=this.donationDataPoint.isDonationEndDateActive,n.donation.donationItems=this.donationDataPoint.donationItemsDto,n.designations.availableGoals=this.designationsDataPoint.availableGoals,n.designations.goals=this.designationsDataPoint.goals,n.designations.selectedGoals=this.designationsDataPoint.selectedGoals,n.designation.goalKey=this.designationDataPoint.goalKey,n.designation.goal=this.designationDataPoint.selectedGoal,n.designation.goals=this.designationDataPoint.getAllowedGoalsByFrequency(this.getGoalRepeat(e)),n.designation.shouldShowDesignation=this.designationDataPoint.shouldShowDesignation(this.getGoalRepeat(e)),n.designation.isEditable=this.designationDataPoint.isEditable(this.getGoalRepeat(e)),n.donation.minAmount=this.donationDataPoint.getFrequencyMinimalAmount(e),n.donateButtonLabel=this.donateButtonLabel,n.showFrequencyCustomAmountInput=!this.donationDataPoint.amountHint})),this.syncDonationItemsErrors(),this.validateAmount(),this.validateDesignations(!0),this.resetDesignationValidation(),this.resetDonationItemsAmountValidation(),this.fetchUpsellScreenDecision(),this.calculateAverageDonationAmount()}validateAmount(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.donationDataPoint.validate(),n=null===this.donationDataPoint.amount,i=e&&t.fields.amount.errors.required;this.produceViewState((e=>{e.donation.isAmountValid=t.fields.amount.isValid,e.errors.amount.required=i,e.errors.amount.min=!n&&t.fields.amount.errors.min,e.errors.amount.max=!n&&t.fields.amount.errors.max,Se()&&(e.donation.isDonationItemsValid=t.fields.donationItems.isValid,e.errors.donationItems=e.errors.donationItems.map(((e,n)=>{var i,s,a,o,r,c,l,u,d;const h=t.fields.donationItems.items[n];return Object.assign(Object.assign({},e),{amount:{min:null!==(a=null===(s=null===(i=null==h?void 0:h.amount)||void 0===i?void 0:i.errors)||void 0===s?void 0:s.min)&&void 0!==a&&a,max:null!==(c=null===(r=null===(o=null==h?void 0:h.amount)||void 0===o?void 0:o.errors)||void 0===r?void 0:r.max)&&void 0!==c&&c,required:null!==(d=null===(u=null===(l=null==h?void 0:h.amount)||void 0===l?void 0:l.errors)||void 0===u?void 0:u.required)&&void 0!==d&&d}})}))),e.showError=t.fields.amount.errors.min||t.fields.amount.errors.max||i}))}validateDesignation(){const e=this.designationDataPoint.validateDesignation(this.getGoalRepeat(this.viewState.donation.frequency));this.produceViewState((t=>{t.designation.isValid=e.isValid,t.errors.designation.required=e.fields.goal.errors.required}))}validateDesignations(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!Se())return;const t=this.designationsDataPoint.validate();this.produceViewState((n=>{n.designations.isValid=t.isValid;const i={min:!1,max:!1,required:!1};n.errors.donationItems=n.errors.donationItems.map(((n,s)=>{var a,o,r,c;const l=t.fields.goals[s],u=!e&&null!==(o=null===(a=null==l?void 0:l.errors)||void 0===a?void 0:a.required)&&void 0!==o&&o,d=null!==(c=null===(r=null==l?void 0:l.errors)||void 0===r?void 0:r.goalRepeat)&&void 0!==c&&c,h=d?i:Object.assign({},n.amount);return Object.assign(Object.assign({},n),{amount:h,designation:{required:u,goalRepeat:d}})})),this.validateDonationItemAmounts(n.errors.donationItems)&&(n.donation.isDonationItemsValid=!0)}))}resetDesignationValidation(){this.produceViewState((e=>{e.designation.isValid=!0,e.errors.designation.required=!1}))}changeAmount(e){this.resetAmountValidationError(),this.checkoutState.donation.setDonationsAmount(e),this.checkoutService.syncUpdateCheckoutState();const t=this.donationDataPoint.frequency;this.produceViewState((e=>{e.donation.amount=this.donationDataPoint.amount,e.donation.donationItems=this.donationDataPoint.donationItemsDto,e.donation.hintOptions=this.donationDataPoint.getFrequencyAmountHints(t),e.showFrequencyCustomAmountInput=!this.donationDataPoint.amountHint})),this.fetchUpsellScreenDecision()}addUpsellAmount(){this.rateMatchingUpsellAmountToAdd&&this.donationDataPoint.amount&&this.changeAmount(this.donationDataPoint.amount+this.rateMatchingUpsellAmountToAdd)}changeCurrentHint(e){this.resetAmountValidationError(),this.checkoutState.donation.setDonationsAmountHint(e),this.checkoutService.syncUpdateCheckoutState();const t=this.donationDataPoint.frequency;this.produceViewState((e=>{e.donation.amount=this.donationDataPoint.amount,e.donation.hintOptions=this.donationDataPoint.getFrequencyAmountHints(t),e.showFrequencyCustomAmountInput=!this.donationDataPoint.amountHint,e.donation.donationItems=this.donationDataPoint.donationItemsDto})),this.validateAmount(),this.fetchUpsellScreenDecision()}changeGoal(e){this.checkoutState.designation.setGoal(e),this.produceViewState((e=>{e.designation.goalKey=this.designationDataPoint.goalKey,e.designation.goal=this.designationDataPoint.selectedGoal})),this.validateDesignation(),this.fetchUpsellScreenDecision()}setDesignationsSelectedGoal(e){this.checkoutState.designations.setAsOnlySelectedGoal(e,this.getGoalRepeat(this.donationDataPoint.frequency)),this.produceViewState((e=>{e.designations.availableGoals=this.designationsDataPoint.availableGoals,e.designations.goals=this.designationsDataPoint.goals,e.designations.selectedGoals=this.designationsDataPoint.selectedGoals})),this.validateDesignations()}changeCurrency(e){this.checkoutState.donation.setCurrency(e),this.checkoutService.syncUpdateCheckoutState();const t=this.donationDataPoint.frequency;this.produceViewState((e=>{e.donation.currency=this.donationDataPoint.currency,e.donation.amountOptions=[...this.donationDataPoint.getFrequencyAmountSuggestions(t)],e.donation.amount=this.donationDataPoint.amount,e.donation.minAmount=this.donationDataPoint.getFrequencyMinimalAmount(t),e.donation.maxAmount=this.donationDataPoint.maxAmount,e.donation.hintOptions=this.donationDataPoint.getFrequencyAmountHints(t)})),this.fetchUpsellScreenDecision(),this.performFeeCoveringSuggestion(),this.checkoutService.fetchFeeCoveringSuggestion(),this.tryToCalculateDonorRating(),this.calculateAverageDonationAmount()}toggleTribute(){this.checkoutState.tribute.setActive(!this.tributeDataPoint.isActive),this.checkoutService.syncUpdateCheckoutState(),this.produceViewState((e=>{e.tribute.isActive=this.tributeDataPoint.isActive,e.tribute.isFilled=this.tributeDataPoint.isFilled}))}changeTributeName(e){this.checkoutState.tribute.setTributeeName(e),this.checkoutService.syncUpdateCheckoutState(),this.produceViewState((e=>{e.tribute.name=this.tributeDataPoint.tributeeName,e.tribute.isFilled=this.tributeDataPoint.isFilled}))}addComment(){return(0,c.sH)(this,void 0,void 0,(function*(){return this.checkoutState.comment.setIsRequired(!0),this.leave({omitBeforeLeave:!0})}))}savePrevComment(){this.checkoutService.checkoutConfiguration.infrastructureParams.showcase||this.checkoutState.comment.savePrevComment()}beforeLeave(e){return(0,c.sH)(this,void 0,void 0,(function*(){return this.tryStartCheckoutWithoutPreDonationUpsellExperiment(),this.tryExposeUpsellScreenDataCollectExperiment(),this.tryExposeAmountsOnUpsellV2Experiment(),this.produceViewState((e=>{e.forceHideAverageDonationHintTooltip=!0})),this.syncDonationItemsErrors(),this.validateAmount(!0),this.validateDesignation(),this.validateDesignations(),this.viewState.donation.isAmountValid?this.viewState.designation.isValid?!(!this.viewState.designations.isValid||!this.viewState.donation.isDonationItemsValid||(this.checkoutService.updateSessionWidgetDefaults(),this.performFeeCoveringSuggestion(),this.checkoutService.fetchFeeCoveringSuggestion(),this.exposureCheckoutStepsExperiments(),(null==e?void 0:e.isSynthetic)?(this.checkoutService.updateSession(),0):(yield this.performMlRequests(),this.checkoutService.updateSession(),0))):(this.produceViewState((e=>{e.designationShakeKey+=1})),!1):(this.produceViewState((e=>{e.amountShakeKey+=1,e.showError=!0})),!1)}))}isRateMatchingEnabled(e){var t,n;if(!e.show)return!1;const i=new Date;if(null!==e.startDate&&new Date(e.startDate)>i)return!1;if(e.endDateEnabled&&null!==e.endDate&&i>new Date(e.endDate))return!1;const s=null!==(t=e.raised)&&void 0!==t?t:0,a=null!==(n=e.totalAmountLimit)&&void 0!==n?n:0;return!(e.totalAmountLimitEnabled&&s>=a)}toggleDonationEndDateActive(e){this.checkoutState.donation.setDonationsEndDateActive(e),this.produceViewState((t=>{t.donation.isDonationEndDateActive=e}))}isAverageDonationAmountCampaignPagesExperimentEnabled(){return this.experiments.get(be.AVERAGE_DONATION_HINT_CAMPAIGN_PAGES_EXPERIMENT).isTestGroup()}isAverageDonationAmountVariantTestGroup(e){return this.experiments.get(be.AVERAGE_DONATION_HINT_EXPERIMENT).isVariant(e)}setDonationAmount(e,t){this.checkoutState.donation.setDonationAmount(e,t),this.produceViewState((e=>{e.donation.amount=this.donationDataPoint.amount,e.donation.donationItems=this.donationDataPoint.donationItemsDto})),this.syncDonationItemsErrors(),this.resetDonationItemValidationError(e)}addDonation(e){this.checkoutState.donation.addDonation(),this.checkoutState.designations.addSelectedGoal(e),this.produceViewState((e=>{e.donation.amount=this.donationDataPoint.amount,e.donation.donationItems=this.donationDataPoint.donationItemsDto,e.designations.availableGoals=this.designationsDataPoint.availableGoals,e.designations.goals=this.designationsDataPoint.goals,e.designations.selectedGoals=this.designationsDataPoint.selectedGoals}))}removeDonation(e,t){this.checkoutState.donation.removeDonation(e),this.checkoutState.designations.removeSelectedGoal(t),this.produceViewState((e=>{e.donation.amount=this.donationDataPoint.amount,e.donation.donationItems=this.donationDataPoint.donationItemsDto,e.designations.availableGoals=this.designationsDataPoint.availableGoals,e.designations.goals=this.designationsDataPoint.goals,e.designations.selectedGoals=this.designationsDataPoint.selectedGoals}))}getInitialViewState(){return{locked:!1,isShowcase:!1,amountShakeKey:0,designationShakeKey:0,allCurrenciesList:[],guessedCurrenciesList:[],allowCentsForCharges:this.checkoutService.company.allowCentsForCharges,donation:{frequency:W.ONCE,amountOptions:[0,0,0,0,0,0],amount:null,minAmount:0,maxAmount:0,canModifyAmount:!0,showAmountSuggestions:!0,canSelectCurrency:!0,currency:"USD",isAmountValid:!0,canModifyFrequency:!0,hintOptions:null,showDonationEndDate:!1,donationEndDate:null,isDonationEndDateActive:!0,averageDonationAmount:null,donationItems:[],isDonationItemsValid:!0,maxDonationItems:this.donationDataPoint.maxDonationItems},errors:{amount:{min:!1,max:!1,required:!1},designation:{required:!1},donationItems:[]},showError:!1,comment:{isEnabled:!1,content:"",prevContent:""},tribute:{name:"",isActive:!1,show:!1,isOptional:!1,labelType:D.dR.IN_HONOR_MEMORY,sharingEnabled:!1,isFilled:!1,inHonorOfMaxLength:FD.getInHonorOfMaxLength(),isTributeOriented:!1},designation:{show:!1,goalKey:null,goals:[],isEditable:!0,isValid:!0,goal:null,shouldShowDesignation:!1},designations:{availableGoals:[],goals:[],selectedGoals:[],isLoading:!1,isValid:!0},enabledFlows:{crypto:this.checkoutService.checkoutConfiguration.enabledFlows.crypto},companyName:this.checkoutService.company.name,donateButtonLabel:"",leftButtonLabel:"",leftButtonFrequency:W.ONCE,rightButtonLabel:"",rightButtonFrequency:W.MONTHLY,flowType:this.checkoutService.type,isTributeInputFocused:!1,forceHideAverageDonationHintTooltip:!1,isRateMatchingEnabled:!1,rateMatching:{show:!1,rate:2,sponsor:null,minAmount:0,endDate:null,endDateEnabled:!1,sponsorEnabled:!1,startDate:null,totalAmountLimitEnabled:!1,totalAmountLimit:null,raised:null,remains:null},showFrequencyCustomAmountInput:!1,preDonationUpsell:{upsell:{fromAmount:0},currency:"USD",highButtonText:"",lowButtonText:"",highAmount:0,lowAmount:0,screenTitle:"",questionText:"",questionShortText:"",descriptionText:"",targetFrequency:W.MONTHLY,isAnnualTribute:!1},processingState:Kr.IDLE,donorRating:{shouldShowDonorRatingBanner:!1,immediateExit:!1,thresholdName:jt.NONE,upsell:qI.DEFAULT_RESULT}}}get tributeDataPoint(){return this.checkoutState.tribute.dataPoint}get donationDataPoint(){return this.checkoutState.donation.dataPoint}get commentDataPoint(){return this.checkoutState.comment.dataPoint}get preDonationUpsellDataPoint(){return this.checkoutState.preDonationUpsell.dataPoint}get designationDataPoint(){return this.checkoutState.designation.dataPoint}get designationsDataPoint(){return this.checkoutState.designations.dataPoint}get leftButtonLabel(){return Ou(this.intl,this.checkoutService.checkoutConfiguration.lowestFrequency)}get rightButtonLabel(){return Ou(this.intl,this.checkoutService.checkoutConfiguration.highestFrequency)}get rateMatching(){const e=this.checkoutService.checkoutConfiguration.campaignPage.rateMatching;return{show:e.show,rate:e.rate,sponsor:e.sponsor,sponsorLogo:e.sponsorLogo,minAmount:e.minAmount,endDate:e.endDate,endDateEnabled:e.endDateEnabled,sponsorEnabled:e.sponsorEnabled,startDate:e.startDate,totalAmountLimitEnabled:e.totalAmountLimitEnabled,totalAmountLimit:e.totalAmountLimit,raised:e.raised,remains:e.remains}}get checkoutWithoutPreDonationUpsellExperiment(){return this.experiments.get(be.CHECKOUT_WITHOUT_PRE_DONATION_UPSELL_EXPERIMENT)}get campaignPagesWithoutPreDonationUpsellExperiment(){return this.experiments.get(be.CAMPAIGN_PAGES_WITHOUT_PRE_DONATION_UPSELL_EXPERIMENT)}get donorRatingCheckoutExperiment(){return this.experiments.get(be.DONOR_RATING_CHECKOUT_EXPERIMENT)}get donorRatingCampaignPagesExperiment(){return this.experiments.get(be.DONOR_RATING_CAMPAIGN_PAGES_EXPERIMENT)}get donorRatingExperiment(){return this.isDonorRatingCheckoutExperimentEnabled?this.donorRatingCheckoutExperiment:this.isDonorRatingCampaignPagesExperimentEnabled?this.donorRatingCampaignPagesExperiment:null}get isDonorRatingCheckoutExperimentEnabled(){return this.donorRatingCheckoutExperiment.isEnabled({enabledFrequencies:this.checkoutService.checkoutConfiguration.enabledFrequencies,donorRating:this.checkoutService.checkoutConfiguration.company.donorRating})}get isDonorRatingCampaignPagesExperimentEnabled(){return this.donorRatingCampaignPagesExperiment.isEnabled({enabledFrequencies:this.checkoutService.checkoutConfiguration.enabledFrequencies,donorRating:this.checkoutService.checkoutConfiguration.company.donorRating,isMatchingEnabled:this.checkoutService.checkoutConfiguration.campaignPage.rateMatching.show})}get screenDataCollectExperiment(){return this.checkoutService.checkoutConfiguration.checkoutType===Ce.PAGE?this.experiments.get(be.UPSELL_SCREEN_DATA_COLLECT_CAMPAIGN_PAGES_EXPERIMENT):this.experiments.get(be.UPSELL_SCREEN_DATA_COLLECT_CHECKOUT_EXPERIMENT)}get amountsOnUpsellV2Experiment(){return this.checkoutService.checkoutConfiguration.checkoutType===Ce.PAGE?this.experiments.get(be.AMOUNTS_ON_UPSELL_V_2_CAMPAIGN_PAGES_EXPERIMENT):this.experiments.get(be.AMOUNTS_ON_UPSELL_V_2_CHECKOUT_EXPERIMENT)}tryFetchDesignationGoals(){return(0,c.sH)(this,void 0,void 0,(function*(){this.produceViewState((e=>{e.designations.isLoading=!0})),yield this.designationsFetcher.tryFetchGoals(),this.produceViewState((e=>{e.designations.availableGoals=this.designationsDataPoint.availableGoals,e.designations.goals=this.designationsDataPoint.goals,e.designations.isLoading=!1}))}))}setDonorRatingData(e){const{shouldShowDonorRatingBanner:t,immediateExit:n=!1,thresholdName:i,iconName:s}=e;this.produceViewState((e=>{void 0!==t&&(e.donorRating.shouldShowDonorRatingBanner=t),e.donorRating.immediateExit=n,void 0!==i&&(e.donorRating.thresholdName=i),void 0!==s&&(e.donorRating.iconName=s)}))}calculateAverageDonationAmount(){var e;const t=null===(e=[...this.donationDataPoint.getFrequencyAmountSuggestions(this.donationDataPoint.frequency)].sort(((e,t)=>e-t)))||void 0===e?void 0:e[2];this.produceViewState((e=>{e.donation.averageDonationAmount=t||null}))}showCampaignPagesDonorRatingBanner(e,t){this.setDonorRatingData({shouldShowDonorRatingBanner:!0,thresholdName:e,iconName:t})}showCheckoutDonorRatingBanner(e,t){this.donorRatingCheckoutExperiment.hideTimeoutId&&clearTimeout(this.donorRatingCheckoutExperiment.hideTimeoutId),this.viewState.donorRating.shouldShowDonorRatingBanner?(this.setDonorRatingData({shouldShowDonorRatingBanner:!1,immediateExit:!0}),setTimeout((()=>{this.setDonorRatingData({shouldShowDonorRatingBanner:!0,immediateExit:!1,thresholdName:e,iconName:t})}),50)):this.setDonorRatingData({shouldShowDonorRatingBanner:!0,thresholdName:e,iconName:t}),this.donorRatingCheckoutExperiment.hideTimeoutId=window.setTimeout((()=>{this.setDonorRatingData({shouldShowDonorRatingBanner:!1})}),Zt.BANNER_VISIBILITY_TIMEOUT)}hideDonorRatingElements(){this.donorRatingCheckoutExperiment.hideTimeoutId&&clearTimeout(this.donorRatingCheckoutExperiment.hideTimeoutId),this.setDonorRatingData({shouldShowDonorRatingBanner:!1,immediateExit:!0}),this.showDonorRatingUpsell(qI.DEFAULT_RESULT)}tryToShowDonorRatingBanner(e,t){var n,i,s;const a=bx.getInstance().generate();if(null!==this.donorRatingExperiment){if(e===jt.NONE)return this.donorRatingExperiment.trackBannerVisibility({show:!1,position:e,frequency:this.donationDataPoint.frequency,amount:null!==(n=this.donationDataPoint.amountInUSD)&&void 0!==n?n:0}),void this.setDonorRatingData({shouldShowDonorRatingBanner:!1,immediateExit:!0});if(t)return this.donorRatingExperiment.trackBannerVisibility({show:!1,position:e,frequency:this.donationDataPoint.frequency,amount:null!==(i=this.donationDataPoint.amountInUSD)&&void 0!==i?i:0}),void this.setDonorRatingData({shouldShowDonorRatingBanner:!1,immediateExit:!0});this.isDonorRatingCheckoutExperimentEnabled&&this.showCheckoutDonorRatingBanner(e,a),this.isDonorRatingCampaignPagesExperimentEnabled&&this.showCampaignPagesDonorRatingBanner(e,a),this.donorRatingExperiment.trackBannerVisibility({show:!0,position:e,frequency:this.donationDataPoint.frequency,amount:null!==(s=this.donationDataPoint.amountInUSD)&&void 0!==s?s:0})}}showDonorRatingUpsell(e){this.produceViewState((t=>{t.donorRating.upsell=e}))}tryToCalculateDonorRatingTop(){var e;if(null===this.donorRatingExperiment)return BI.NONE_POSITION;const t=this.donorRatingExperiment.testGroupKey;return t?this.donorRatingCalculator.calculate({amount:null!==(e=this.donationDataPoint.amount)&&void 0!==e?e:0,currency:this.donationDataPoint.currency,frequency:this.donationDataPoint.frequency},t):BI.NONE_POSITION}tryToShowDonorRatingUpsell(e){var t,n,i,s;if(null===this.donorRatingExperiment)return qI.DEFAULT_RESULT;if(!this.donorRatingExperiment.isTestGroup2)return this.donorRatingExperiment.trackUpsellVisibility({position:qI.DEFAULT_RESULT.position,frequency:this.donationDataPoint.frequency,amount:null!==(t=this.donationDataPoint.amountInUSD)&&void 0!==t?t:0,upsellAmount:qI.DEFAULT_RESULT.amount}),qI.DEFAULT_RESULT;if(this.donorRatingExperiment.isUpsellApplied)return this.donorRatingExperiment.trackUpsellVisibility({position:qI.DEFAULT_RESULT.position,frequency:this.donationDataPoint.frequency,amount:null!==(n=this.donationDataPoint.amountInUSD)&&void 0!==n?n:0,upsellAmount:qI.DEFAULT_RESULT.amount}),qI.DEFAULT_RESULT;const a=this.donorRatingRecommendationCalculator.calculate({amount:null!==(i=this.donationDataPoint.amount)&&void 0!==i?i:0,currency:this.donationDataPoint.currency,frequency:this.donationDataPoint.frequency,position:e});return this.showDonorRatingUpsell(a),this.donorRatingExperiment.trackUpsellVisibility({position:a.position,frequency:this.donationDataPoint.frequency,amount:null!==(s=this.donationDataPoint.amountInUSD)&&void 0!==s?s:0,upsellAmount:this.currencyService.convert(a.amount,this.donationDataPoint.currency,"USD")}),a}exposureCheckoutStepsExperiments(){const e=this.experiments.get(be.CHECKOUT_STEPS_CAMPAIGN_PAGES_EXPERIMENT),t=this.experiments.get(be.CHECKOUT_STEPS_CHECKOUT_MODAL_EXPERIMENT);e.exposure(),t.exposure()}calculateMatchingImpactWithoutLimit(){return this.donationDataPoint.amount?this.donationDataPoint.amount*this.viewState.rateMatching.rate:null}resetAmountValidationError(){this.produceViewState((e=>{e.errors.amount.min=!1,e.errors.amount.max=!1,e.errors.amount.required=!1,e.errors.donationItems=e.errors.donationItems.map((e=>Object.assign(Object.assign({},e),{amount:{min:!1,max:!1,required:!1}}))),e.showError=!1}))}resetDonationItemValidationError(e){this.produceViewState((t=>{const n=t.donation.donationItems.findIndex((t=>t.id===e));-1!==n&&t.errors.donationItems[n]&&(t.errors.donationItems[n].amount={min:!1,max:!1,required:!1})}))}resetDonationItemsAmountValidation(){this.produceViewState((e=>{e.errors.donationItems=e.errors.donationItems.map((e=>Object.assign(Object.assign({},e),{amount:{min:!1,max:!1,required:!1}})))}))}syncDonationItemsErrors(){this.produceViewState((e=>{const t=e.donation.donationItems;e.errors.donationItems=t.map(((t,n)=>{const i=e.errors.donationItems[n];return{id:t.id,amount:(null==i?void 0:i.amount)||{min:!1,max:!1,required:!1},designation:(null==i?void 0:i.designation)||{required:!1,goalRepeat:!1}}}))}))}tryStartCheckoutWithoutPreDonationUpsellExperiment(){const e={canShowUpsellScreen:this.preDonationUpsellDataPoint.isEnabled,targetFrequency:this.preDonationUpsellDataPoint.upsellFrequency};this.checkoutWithoutPreDonationUpsellExperiment.tryStart(e),this.checkoutWithoutPreDonationUpsellExperiment.isEnabled(e)?this.checkoutState.preDonationUpsell.setSuggestedAvailability(!1):(this.campaignPagesWithoutPreDonationUpsellExperiment.tryStart(e),this.campaignPagesWithoutPreDonationUpsellExperiment.isEnabled(e)&&this.checkoutState.preDonationUpsell.setSuggestedAvailability(!1))}fetchUpsellScreenDecision(){return this.adaptivePreDonationUpsellSuggestionsService.resetSuggestionApplication(),this.tryStartCheckoutWithoutPreDonationUpsellExperiment(),this.adaptivePreDonationUpsellSuggestionsService.tryFetchSuggestion()}setProcessingState(e){this.produceViewState((t=>{t.processingState=e}))}performFeeCoveringSuggestion(){return(0,c.sH)(this,void 0,void 0,(function*(){(yield this.adaptiveFeeCoveringService.tryFetchSuggestion())&&(this.adaptiveFeeCoveringService.tryApplySuggestion(),this.adaptiveFeeCoveringService.tryTrackSuggestion())}))}performMlRequests(){return(0,c.sH)(this,void 0,void 0,(function*(){yield this.withPending((()=>(0,c.sH)(this,void 0,void 0,(function*(){this.setProcessingState(Kr.PENDING),(yield this.fetchUpsellScreenDecision())&&(this.adaptivePreDonationUpsellSuggestionsService.tryApplySuggestion(),this.adaptivePreDonationUpsellSuggestionsService.tryTrackSuggestion()),this.setProcessingState(Kr.IDLE)}))))}))}getGoalRepeat(e){return e===W.ONCE?ui.ONE_TIME:ui.RECURRING}initializeAverageDonationHintExperiment(){const e=this.experiments.get(be.AVERAGE_DONATION_HINT_EXPERIMENT);e.tryStart({checkoutConfiguration:this.checkoutService.checkoutConfiguration,fiatDonationDataPoint:this.donationDataPoint}),e.exposure()}initializeAverageDonationHintCampaignPagesExperiment(){const e=this.experiments.get(be.AVERAGE_DONATION_HINT_CAMPAIGN_PAGES_EXPERIMENT);e.tryStart({checkoutConfiguration:this.checkoutService.checkoutConfiguration,fiatDonationDataPoint:this.donationDataPoint}),e.exposure()}initializeRecurringFrequencyHintCheckoutDesktopExperiment(){var e;const t=this.experiments.get(be.RECURRING_FREQUENCY_HINT_CHECKOUT_DESKTOP_EXPERIMENT),n=this.donationDataPoint.frequency;t.tryStart({enabledFrequencies:this.checkoutService.checkoutConfiguration.enabledFrequencies,isTributeEnabled:this.checkoutState.tribute.dataPoint.isEnabled,isDesignationEnabled:this.checkoutState.designation.dataPoint.isEnabled,locale:this.intl.locale,isMobile:this.checkoutService.checkoutConfiguration.infrastructureParams.isMobile,isImpactDescriptionEnabled:!!(null===(e=this.donationDataPoint.getFrequencyAmountHints(n))||void 0===e?void 0:e.some((e=>e.description))),isFontsLoaded:this.checkoutService.checkoutConfiguration.infrastructureParams.isFontsLoaded})}tryExposeUpsellScreenDataCollectExperiment(){this.screenDataCollectExperiment.tryExpose({isAdaptiveSuggestionEnabled:this.checkoutService.checkoutConfiguration.preDonationUpsellSettings.isAdaptiveSuggestionEnabled,isPreDonationUpsellDataPointEnabled:this.preDonationUpsellDataPoint.isEnabled,upsellFrequency:this.preDonationUpsellDataPoint.upsellFrequency})}tryExposeAmountsOnUpsellV2Experiment(){this.amountsOnUpsellV2Experiment.tryExpose({isAdaptiveSuggestionEnabled:this.checkoutService.checkoutConfiguration.preDonationUpsellSettings.isAdaptiveSuggestionEnabled,isPreDonationUpsellDataPointEnabled:this.preDonationUpsellDataPoint.isEnabled,upsellFrequency:this.preDonationUpsellDataPoint.upsellFrequency})}validateDonationItemAmounts(e){for(const t of e)if(!t.designation.goalRepeat&&(t.amount.required||t.amount.min||t.amount.max))return!1;return!0}}function Tx(e){return e?Kf.UPSELL_PAY_LATER:Kf.CONTINUE}function _x(e,t){switch(e){case W.DAILY:return t.translate("widgetSubscriptionPeriodLabel.daily.noun");case W.WEEKLY:return t.translate("widgetSubscriptionPeriodLabel.weekly.noun");case W.BIWEEKLY:return t.translate("widgetSubscriptionPeriodLabel.biweekly.noun");case W.EVERY_4_WEEKS:return t.translate("widgetSubscriptionPeriodLabel.every4weeks.noun");case W.MONTHLY:return t.translate("widgetSubscriptionPeriodLabel.monthly.noun");case W.BIMONTHLY:return t.translate("widgetSubscriptionPeriodLabel.bimonthly.noun");case W.QUARTERLY:return t.translate("widgetSubscriptionPeriodLabel.quarterly.noun");case W.SEMIANNUAL:return t.translate("widgetSubscriptionPeriodLabel.semiannual.noun");case W.ANNUAL:return t.translate("widgetSubscriptionPeriodLabel.annual.noun");default:throw new le.HP(e)}}class kx extends O_{constructor(e){super(e)}beforeEnter(){return(0,c.sH)(this,void 0,void 0,(function*(){this.resetDtd();const e=this.intl.formatCurrency(this.dtdDataPoint.dtdInitialTotal,{currency:this.dtdDataPoint.dtdCurrency,display:"floatcents"}),t=this.intl.formatCurrency(this.dtdDataPoint.employerUpsellTotal,{currency:this.dtdDataPoint.dtdCurrency,display:"floatcents"});let n="",i="",s="";const a=this.dtdDataPoint.dtdFrequency;a!==W.ONCE?(n=this.intl.translate("doubleDonationScreen.button.donate.recurring",{amount:e,recurringType:_x(a,this.intl)}),i=this.intl.translate("doubleDonationScreen.button.changeAmount.recurring",{amount:t,recurringType:_x(a,this.intl)}),s=this.intl.translate("doubleDonationScreen.button.doNotChangeAmount.recurring",{amount:e,recurringType:_x(a,this.intl)})):(n=this.intl.translate("doubleDonationScreen.button.donate.once",{amount:e}),i=this.intl.translate("doubleDonationScreen.button.changeAmount.once",{amount:t}),s=this.intl.translate("doubleDonationScreen.button.doNotChangeAmount.once",{amount:e})),this.produceViewState((a=>{a.buttonType=Tx(!1),a.total=this.dtdDataPoint.dtdInitialTotal,a.frequency=this.dtdDataPoint.dtdFrequency,a.currency=this.dtdDataPoint.dtdCurrency,a.isFeeCovered=this.dtdDataPoint.dtdInitialTotal!==this.dtdDataPoint.dtdInitialAmount,a.employer.name=this.dtdDataPoint.employerName,a.minimumMatchedAmount=this.dtdDataPoint.employerMinAmount,a.isIntegrationEnabled=this.dtdDataPoint.isIntegrationEnabled,a.showSkipButton=!0,a.matchingPromisedAmount=this.dtdDataPoint.employerUpsellTotalDoubled,a.matchingRatio=this.dtdDataPoint.employerRatio,a.proposedAmount=this.dtdDataPoint.employerUpsellTotal,a.proposedAmountBeforeFeeCovered=this.dtdDataPoint.employerRawMinAmount,a.formattedTotal=e,a.formattedUpsellTotal=t,a.declineButtonLabel=n,a.changeAmountButtonLabel=i,a.noChangeAmountButtonLabel=s,a.isAlreadyPaidAmountNotMatched=this.isAlreadyPaidAmountNotMatched()})),this.dtdDataPoint.employerId&&(this.setEmployerViewState(),this.checkoutState.doubleTheDonation.setUpsellShowed(this.viewState.showDTDUpsell&&this.viewState.showDTDUpsellExperiment))}))}beforeLeave(e){return(0,c.sH)(this,void 0,void 0,(function*(){return this.checkoutService.updateSession(),this.checkoutService.syncUpdateCheckoutState(),!0}))}changeEmployerName(e){e||this.resetEmployerDTD();const t=this.viewState.companies.some((t=>t.company_name.trim().toLocaleLowerCase()===e.trim().toLocaleLowerCase()));this.checkoutState.doubleTheDonation.setEmployerName(e),this.produceViewState((e=>{e.employer.name=this.dtdDataPoint.employerName,e.showEmployerMatchedBlock=t&&this.dtdDataPoint.employerMinAmount<=this.dtdDataPoint.dtdInitialTotal}))}skip(){return(0,c.sH)(this,void 0,void 0,(function*(){return this.checkoutState.doubleTheDonation.setSkipped(),this.leave()}))}getDTDCompanies(e){return(0,c.sH)(this,void 0,void 0,(function*(){const t=yield this.dtdDataPoint.searchEmployerByName(e);vT()(t,this.viewState.companies)||this.produceViewState((e=>{e.companies=t}))}))}setEmployerDTD(e){const t=this.viewState.companies.find((t=>t.id===e));return!t||(this.checkoutState.doubleTheDonation.setEmployerData(t),this.setEmployerViewState(),this.checkoutState.doubleTheDonation.setUpsellShowed(this.viewState.showDTDUpsell&&this.viewState.showDTDUpsellExperiment),!1)}setEmployerViewState(){const e=this.intl.formatCurrency(this.dtdDataPoint.employerUpsellTotal,{currency:this.dtdDataPoint.dtdCurrency,display:"floatcents"});let t="";const n=this.dtdDataPoint.dtdFrequency;t=n!==W.ONCE?this.intl.translate("doubleDonationScreen.button.changeAmount.recurring",{amount:e,recurringType:_x(n,this.intl)}):this.intl.translate("doubleDonationScreen.button.changeAmount.once",{amount:e}),this.produceViewState((n=>{n.employer.name=this.dtdDataPoint.employerName,n.showDTDDescription=!1,n.showDTDUpsell=this.dtdDataPoint.employerMinAmount>this.dtdDataPoint.dtdInitialTotal,n.showDTDUpsellExperiment=!this.isAlreadyPaidAmountNotMatched(),n.showSkipButton=!n.showDTDUpsell,n.showEmployerMatchedBlock=this.dtdDataPoint.employerMinAmount<=this.dtdDataPoint.dtdInitialTotal,n.DTDDoubledAmount=this.dtdDataPoint.dtdInitialTotalDoubled,n.minimumMatchedAmount=this.dtdDataPoint.employerMinAmount,n.upsellTotal=this.dtdDataPoint.employerUpsellTotal,n.formattedUpsellTotal=e,n.changeAmountButtonLabel=t,n.DTDUpsellDoubledAmount=this.dtdDataPoint.employerUpsellTotalDoubled,n.buttonType=Tx(n.showDTDUpsell),n.matchingPromisedAmount=this.dtdDataPoint.employerUpsellTotalDoubled,n.matchingRatio=this.dtdDataPoint.employerRatio,n.proposedAmount=this.dtdDataPoint.employerUpsellTotal,n.proposedAmountBeforeFeeCovered=this.dtdDataPoint.employerRawMinAmount,n.isAlreadyPaidAmountNotMatched=this.isAlreadyPaidAmountNotMatched()}))}acceptUpsell(){return(0,c.sH)(this,void 0,void 0,(function*(){this.checkoutState.doubleTheDonation.setUpsellAccepted(),this.checkoutState.donation.setDonationsAmount(this.dtdDataPoint.employerUpsellAmount),yield this.leave()}))}resetEmployerDTD(){this.checkoutState.doubleTheDonation.resetEmployerData(),this.produceViewState((e=>{e.showDTDDescription=!0,e.showDTDUpsell=!1,e.showSkipButton=!0,e.showEmployerMatchedBlock=!1,e.buttonType=Tx(e.showDTDUpsell),e.isAlreadyPaidAmountNotMatched=this.isAlreadyPaidAmountNotMatched()}))}isAlreadyPaidAmountNotMatched(){return!this.checkoutService.checkoutConfiguration.infrastructureParams.showcase&&this.checkoutService.isPaid&&this.dtdDataPoint.employerMinAmount>this.dtdDataPoint.dtdInitialTotal}getInitialViewState(){return{locked:!1,showDTDDescription:!0,showEmployerMatchedBlock:!1,employer:{name:""},showDTDUpsell:!1,showDTDUpsellExperiment:!1,minimumMatchedAmount:0,DTDUpsellDoubledAmount:0,DTDDoubledAmount:0,currency:"USD",upsellTotal:0,showSkipButton:!0,total:0,processingState:Kr.IDLE,companies:[],buttonType:Kf.CONTINUE,isFeeCovered:!1,matchingPromisedAmount:0,matchingRatio:[1,1],proposedAmount:0,proposedAmountBeforeFeeCovered:0,isIntegrationEnabled:!1,frequency:W.ONCE,formattedTotal:"",formattedUpsellTotal:"",declineButtonLabel:"",changeAmountButtonLabel:"",noChangeAmountButtonLabel:"",isAlreadyPaidAmountNotMatched:!1,payErrorMessage:"",additionalPayErrorMessage:""}}get dtdDataPoint(){return this.checkoutState.doubleTheDonation.dataPoint}setProcessingState(e){this.produceViewState((t=>{t.processingState=e}))}resetDtd(){this.dtdDataPoint.isUpsellAccepted&&this.checkoutState.donation.setDonationsAmount(this.dtdDataPoint.snapshot.dtdInitialAmount),this.checkoutState.doubleTheDonation.resetState()}}class Ox extends O_{constructor(e){super(e),this.paymentService=e.paymentService}beforeEnter(){return(0,c.sH)(this,void 0,void 0,(function*(){this.produceViewState((e=>{var t;e.isPaymentScreen=this.isPaymentScreen,e.formattedAmount=this.intl.formatCurrency(null!==(t=this.donationDataPoint.total)&&void 0!==t?t:0,{currency:this.donationDataPoint.currency,display:"floatcents"}),e.frequency=this.donationDataPoint.frequency}))}))}beforeLeave(e){return(0,c.sH)(this,void 0,void 0,(function*(){if(this.pending)return!1;if(this.pending=!0,this.setProcessingState(Kr.PENDING),!(yield this.paymentService.startSepaFlow()))return this.produceViewState((e=>{e.shakeKey+=1,e.processingState=Kr.IDLE})),this.pending=!1,!1;const e=yield this.checkoutService.hold();return ue.isFailure(e)?(this.pending=!1,yield this.showError(),!1):this.isPaymentScreen?this.pay():(this.pending=!1,!0)}))}initiateSepa(e,t){return(0,c.sH)(this,void 0,void 0,(function*(){return this.paymentService.initiateSepa(e,t)}))}recalculatePaymentScreen(){this.produceViewState((e=>{e.isPaymentScreen=this.isPaymentScreen}))}getInitialViewState(){return{processingState:Kr.IDLE,shakeKey:0,locked:!1,isPaymentScreen:!1,formattedAmount:"",frequency:W.ONCE}}get donationDataPoint(){return this.checkoutState.donation.dataPoint}get isPaymentScreen(){return this.name===this.checkoutService.getPaymentScreen(this.name,this.flow.getHistoricalScreens())}pay(){return(0,c.sH)(this,void 0,void 0,(function*(){const e=yield this.checkoutService.pay({screen:this.name,predictedNextScreen:this.flow.predictNextScreen()});return ue.isFailure(e)?e.failureResult.shouldLeave?(this.pending=!1,!0):(this.pending=!1,yield this.showError(),!1):(this.setProcessingState(Kr.SUCCESS),yield fo(this.checkoutService.checkoutConfiguration.successPaymentDelayBeforeLeave),this.pending=!1,!0)}))}showError(){return(0,c.sH)(this,void 0,void 0,(function*(){this.produceViewState((e=>{e.processingState=Kr.ERROR,e.payErrorMessage=this.checkoutService.payErrorMessage||this.intl.translate("common.errorOccurredText")})),this.produceViewState((e=>{e.payErrorMessage=""}),!0)}))}setProcessingState(e){this.produceViewState((t=>{t.processingState=e}))}}class Ix extends O_{constructor(e){super(e),this._fastTrackPaymentOptionsViewService=null,this.paymentService=e.paymentService}beforeEnter(){return(0,c.sH)(this,void 0,void 0,(function*(){this.handleErrors(),yield this.initializePaymentOptions(),this.resetPaymentOptions(),this.checkoutService.updateSession(),this.produceViewState((e=>{e.isInited=!0,e.currency=this.donationDataPoint.currency,e.currencySymbol=this.currencyService.getSymbol(this.donationDataPoint.currency),e.defaultCurrency=this.checkoutService.checkoutConfiguration.defaultCurrency,e.amount=this.donationDataPoint.amount||(this.isShowcase?1e4:0),e.frequency=this.donationDataPoint.frequency,e.total=!this.donationDataPoint.amount&&this.isShowcase?10600:this.donationDataPoint.total,e.processingFee=!this.donationDataPoint.amount&&this.isShowcase?600:this.donationDataPoint.fee,e.isFeeCovered=this.donationDataPoint.isFeeCovered,e.includeFees=this.donationDataPoint.includeFees,e.showIncludeFee=this.isIncludeFeesSectionVisible(this.donationDataPoint.includeFees),e.prefixCurrencySymbol=this.intl.formatSymbol(this.currencyService.getSymbol(this.donationDataPoint.currency),Q.PREFIX),e.postfixCurrencySymbol=this.intl.formatSymbol(this.currencyService.getSymbol(this.donationDataPoint.currency),Q.POSTFIX),e.isRecurring=this.donationDataPoint.frequency!==W.ONCE,e.recurringLabel=this.recurringLabel,e.isBackFlowDisabled=this.checkoutService.checkoutConfiguration.isRestoredByWidgetSession,e.showAnonymous=this.donateAnonymousDataPoint.isEnabled,e.anonymousChecked=this.donateAnonymousDataPoint.anonymousChecked,e.generalConsent={isAccepted:this.communicationConsentDataPoint.generalConsent.isAccepted,isEnabled:this.communicationConsentDataPoint.isGeneralConsentEnabled},e.onBehalfOf.companyName=this.onBehalfOfDataPoint.companyName,e.onBehalfOf.isEnabled=this.onBehalfOfDataPoint.isEnabled,e.onBehalfOf.isActive=this.onBehalfOfDataPoint.isActive,e.termsAndConditions.text=this.termsAndConditionsDataPoint.text,e.termsAndConditions.isEnabled=this.termsAndConditionsDataPoint.isEnabled,e.termsAndConditions.isAccepted=this.termsAndConditionsDataPoint.isAccepted}))}))}beforeLeave(){return(0,c.sH)(this,void 0,void 0,(function*(){return this.checkoutService.updateSession(),this.pay()}))}choosePaymentOption(e){return(0,c.sH)(this,void 0,void 0,(function*(){if(!this.pending&&(this.resetError(),this.lock(),this.validateAndProduceViewStateErrors()))switch(this.checkoutState.paymentOptions.setPaymentMethod(null),this.checkoutState.paymentOptions.setPaymentOption(e),e){case Hu.GOOGLE_PAY:return this.isShowcase?void this.unlock():(this.checkoutState.paymentOptions.setPaymentMethod(D._h.GOOGLE_PAY),this.resetDonorData(),void(yield this.startGooglePay()));case Hu.APPLE_PAY:return this.isShowcase?void this.unlock():(this.checkoutState.paymentOptions.setPaymentMethod(D._h.APPLE_PAY),this.resetDonorData(),void(yield this.startApplePay()));case Hu.PAYPAL:throw new Error("Paypal method can not be chosen");default:throw new le.HP(e)}}))}goToPrivacyScreen(){this.flow.goTo(oc.PRIVACY)}closePaypalButton(){return this.paymentService.closePaypalButton()}initiatePaypal(e){let{element:t,buttonColor:n,onClick:i,onHide:s}=e;return this.isShowcase?Promise.resolve(!1):this.paymentService.initiatePaypal({element:t,buttonColor:n,holdDone:()=>{null==s||s(),this.leave()},onFail:e=>{null==s||s(),this.resetPaymentOptions(),this.unlock(),"Window is closed"!==e.message&&this.showError({message:e.message||this.intl.translate("common.errorOccurredText"),option:Hu.PAYPAL})},onCancel:()=>{this.resetPaymentOptions(),this.unlock(),null==s||s()},onButtonClick:()=>{this.resetError(),this.lock(),this.checkoutState.paymentOptions.setPaymentOption(null),this.resetDonorData(),null==i||i()},validate:()=>this.validateAndProduceViewStateErrors()})}togglePaypalActions(e){return(0,c.sH)(this,void 0,void 0,(function*(){yield this.paymentService.togglePaypalActions(e)}))}startGooglePay(){return(0,c.sH)(this,void 0,void 0,(function*(){const e=yield this.paymentService.startGooglePay();if(this.unlock(),ue.isSuccess(e))return void(yield this.leave());this.resetPaymentOptions();const t=e.failureResult.message;t&&this.showError({message:t,option:Hu.GOOGLE_PAY})}))}startApplePay(){return(0,c.sH)(this,void 0,void 0,(function*(){const e=yield this.paymentService.startApplePay();if(this.unlock(),ue.isSuccess(e))return void(yield this.leave());this.resetPaymentOptions();const t=e.failureResult.message;t&&this.showError({message:t,option:Hu.APPLE_PAY})}))}toggleFeeCovered(){this.checkoutState.donation.setFeeCovered(!this.donationDataPoint.isFeeCovered,{isCustomFeeCoveredValue:!0}),this.produceViewState((e=>{e.isFeeCovered=this.donationDataPoint.isFeeCovered,e.total=this.donationDataPoint.total})),this.syncButtonsAvailability(),this.checkoutService.syncUpdateCheckoutState()}syncPaymentButtons(){this.syncButtonsAvailability()}getFrequency(){return this.donationDataPoint.frequency}getCurrency(){return this.donationDataPoint.currency}toggleOnBehalfOf(){this.checkoutState.privacy.setOnBehalfOfActive(!this.onBehalfOfDataPoint.isActive),this.produceViewState((e=>{e.onBehalfOf.isActive=this.onBehalfOfDataPoint.isActive}))}toggleTermsAndConditionsAccepted(){this.checkoutState.privacy.setTermsAndConditionsAccepted(!this.termsAndConditionsDataPoint.isAccepted),this.produceViewState((e=>{var t;(null===(t=e.validation.isAccepted)||void 0===t?void 0:t.isValid)||(e.validation.isAccepted=LD.defaultValidationResult),e.termsAndConditions.isAccepted=this.termsAndConditionsDataPoint.isAccepted}))}toggleAnonymousChecked(){this.checkoutState.privacy.setDonateAnonymousChecked(!this.donateAnonymousDataPoint.anonymousChecked),this.produceViewState((e=>{e.anonymousChecked=this.donateAnonymousDataPoint.anonymousChecked}))}toggleGeneralConsentChecked(e){this.checkoutState.communicationConsent.setGeneralConsentState(e),this.produceViewState((e=>{e.generalConsent.isAccepted=this.communicationConsentDataPoint.generalConsent.isAccepted}))}setGeneralConsentShown(){this.checkoutState.communicationConsent.setGeneralConsentShown()}changeCompanyName(e){this.checkoutState.privacy.setOnBehalfOfCompanyName(e),this.produceViewState((e=>{e.validation.onBehalfOf.isValid||(e.validation.onBehalfOf=PD.defaultValidationResult),e.onBehalfOf.companyName=this.onBehalfOfDataPoint.companyName}))}validateAndProduceViewStateErrors(){let e=!1;return this.produceViewState((t=>{t.validation.isAccepted=this.termsAndConditionsDataPoint.validate(),t.validation.onBehalfOf=this.onBehalfOfDataPoint.validate(),e=this.checkHasError(t),e&&(t.shakeKey+=1)})),!e||(this.unlock(),!1)}resetError(){this.produceViewState((e=>{e.paymentError.title=void 0,e.paymentError.message=void 0}))}getInitialViewState(){return{isInited:!1,showIncludeFee:!0,livemode:this.isLivemode,showTestModeTooltipInfo:this.showTestModeTooltipInfo,amount:0,currency:"USD",currencySymbol:"$",prefixCurrencySymbol:"",postfixCurrencySymbol:"",allowCentsForCharges:this.checkoutService.company.allowCentsForCharges,frequency:W.ONCE,includeFees:D.XN.DEFAULT_YES,processingFee:0,total:0,defaultCurrency:"USD",isFeeCovered:!1,availableOptions:[],buttonOptions:Object.fromEntries(Object.values([Hu.APPLE_PAY,Hu.GOOGLE_PAY,Hu.PAYPAL]).map((e=>[e,{visible:!1}]))),paymentError:{},locked:!1,shakeKey:0,isRecurring:!0,recurringLabel:"",isBackFlowDisabled:!1,termsAndConditions:{isAccepted:!1,isEnabled:!1,text:""},onBehalfOf:{isEnabled:!1,isActive:!1,companyName:""},generalConsent:{isAccepted:!1,isEnabled:!1},anonymousChecked:!1,showAnonymous:!1,mailingListSubscription:{show:!1,checked:!1,text:""},validation:{onBehalfOf:PD.defaultValidationResult,isAccepted:LD.defaultValidationResult},serverErrors:{}}}get isShowcase(){return this.checkoutService.checkoutConfiguration.infrastructureParams.showcase}get isLivemode(){return this.checkoutService.checkoutConfiguration.infrastructureParams.livemode}get showTestModeTooltipInfo(){return!this.isShowcase&&!this.isLivemode}get recurringLabel(){return ku(this.intl,this.donationDataPoint.frequency)}get fastTrackPaymentOptionsViewService(){return this._fastTrackPaymentOptionsViewService||(this._fastTrackPaymentOptionsViewService=new G_(this.checkoutService.checkoutConfiguration)),this._fastTrackPaymentOptionsViewService}get paymentOptionsDataPoint(){return this.checkoutState.paymentOptions.paymentOptionsDataPoint}get processDataPoint(){return this.checkoutState.process.dataPoint}get donationDataPoint(){return this.checkoutState.donation.dataPoint}get donateAnonymousDataPoint(){return this.checkoutState.privacy.donateAnonymousDataPoint}get communicationConsentDataPoint(){return this.checkoutState.communicationConsent.dataPoint}get onBehalfOfDataPoint(){return this.checkoutState.privacy.onBehalfOfDataPoint}get termsAndConditionsDataPoint(){return this.checkoutState.privacy.termsAndConditionsDataPoint}checkHasError(e){return Object.keys(e.validation).some((t=>{const n=e.validation[t];return!!n&&!n.isValid}))}syncButtonsAvailability(){const e=this.fastTrackPaymentOptionsViewService.getPaymentButtons(this.paymentOptionsDataPoint.allowedPaymentMethods);this.produceViewState((t=>{const n=e.available;vT()(t.availableOptions,n)||(t.availableOptions=n);const i=this.paymentOptionsDataPoint.preSelectedPaymentOption&&e.available.includes(this.paymentOptionsDataPoint.preSelectedPaymentOption);for(const[n,s]of Object.entries(t.buttonOptions))s.visible=i?n===this.paymentOptionsDataPoint.preSelectedPaymentOption:e.visible.some((e=>e===n))}))}pay(){return(0,c.sH)(this,void 0,void 0,(function*(){this.setPaymentLoader();const e=yield this.checkoutService.pay({screen:this.name,predictedNextScreen:this.flow.predictNextScreen(),isFastTrackFlow:!0});if(ue.isFailure(e)){if(this.removePaymentLoader(),this.unlock(),e.failureResult.shouldLeave)return!0;const t=(()=>{switch(!0){case!!this.paymentOptionsDataPoint.selectedPaymentOption:return this.paymentOptionsDataPoint.selectedPaymentOption;case this.paymentOptionsDataPoint.clientPaymentMethod===D._h.PAYPAL:return Hu.PAYPAL;default:return null}})();return t&&this.showError({title:this.intl.translate("fastTrackPaymentOptionsScreen.error.title"),message:this.intl.translate("fastTrackPaymentOptionsScreen.error.message",{link:"#"}),option:t}),!1}return this.checkoutService.checkoutConfiguration.successPaymentDelayBeforeLeave?yield fo(this.checkoutService.checkoutConfiguration.successPaymentDelayBeforeLeave):this.removePaymentLoader(),this.unlock(),!0}))}setPaymentLoader(){this.checkoutService.checkoutUIState.showPaymentLoader=!0,this.checkoutService.syncUpdateCheckoutState()}removePaymentLoader(){this.checkoutService.checkoutUIState.showPaymentLoader=!1,this.checkoutService.syncUpdateCheckoutState()}lock(){this.togglePaypalActions(!1),this.pending=!0}unlock(){this.togglePaypalActions(!0),this.pending=!1}resetPaymentOptions(){this.checkoutState.paymentOptions.setPaymentMethod(null),this.checkoutState.paymentOptions.setPaymentOption(null)}resetDonorData(){this.checkoutState.privacy.setDonorFirstName(""),this.checkoutState.privacy.setDonorLastName(""),this.checkoutState.privacy.setDonorEmail(""),this.checkoutState.privacy.setPhoneNumber(null),this.checkoutState.privacy.setPhoneCleanNumber(null),this.checkoutState.mailingAddress.setLine1(""),this.checkoutState.mailingAddress.setLine2(""),this.checkoutState.mailingAddress.setCity(""),this.checkoutState.mailingAddress.setRegion(""),this.checkoutState.mailingAddress.setPostal("")}showError(e){let{title:t,message:n,option:i}=e;this.produceViewState((e=>{e.paymentError.title=t,e.paymentError.message=n}))}handleErrors(){this.processDataPoint.hasPaymentError()&&(this.paymentOptionsDataPoint.clientPaymentMethod===D._h.PAYPAL&&this.showError({message:this.intl.translate("common.errorOccurredText"),option:Hu.PAYPAL}),this.checkoutState.process.setInProgress())}isIncludeFeesSectionVisible(e){return[D.XN.DEFAULT_YES,D.XN.DEFAULT_NO,D.XN.SMART_COVERING].includes(e)}initializePaymentOptions(){return(0,c.sH)(this,void 0,void 0,(function*(){yield this.paymentService.ensurePaymentMethodsInitialized(),this.syncPaymentButtons()}))}}class xx extends O_{constructor(e){super(e)}beforeEnter(){return(0,c.sH)(this,void 0,void 0,(function*(){this.checkoutState.giftAid.reject(),this.produceViewState((e=>{var t;e.formattedAmount=this.intl.formatCurrency(null!==(t=this.donationDataPoint.total)&&void 0!==t?t:0,{currency:this.donationDataPoint.currency,display:"floatcents"}),e.frequency=this.donationDataPoint.frequency,e.legalText=this.giftAidDataPoint.legalText}))}))}beforeLeave(e){return(0,c.sH)(this,void 0,void 0,(function*(){if(this.pending)return!1;if(this.pending=!0,this.checkoutService.updateSession(),!this.isPaymentScreen)return this.pending=!1,!0;this.produceViewState((e=>{e.processingState=Kr.PENDING}));const e=yield this.checkoutService.pay({screen:this.name,predictedNextScreen:this.flow.predictNextScreen()});return ue.isSuccess(e)||e.failureResult.shouldLeave?(this.pending=!1,!0):(this.produceViewState((e=>{e.payErrorMessage=this.checkoutService.payErrorMessage,e.processingState=Kr.ERROR})),this.pending=!1,!1)}))}changeGiftAid(e){e?this.checkoutState.giftAid.accept():this.checkoutState.giftAid.reject()}setShown(){this.checkoutState.giftAid.setShowed()}getInitialViewState(){return{locked:!1,showcase:this.checkoutService.checkoutConfiguration.infrastructureParams.showcase,formattedAmount:"",frequency:W.MONTHLY,legalText:"",processingState:Kr.IDLE}}get donationDataPoint(){return this.checkoutState.donation.dataPoint}get isPaymentScreen(){return this.name===this.checkoutService.getPaymentScreen(this.name,this.flow.getHistoricalScreens())}get giftAidDataPoint(){return this.checkoutState.giftAid.dataPoint}}class wx extends O_{constructor(e){super(e),this.paymentService=e.paymentService}get showNextStepOverview(){return!(this.pending&&this.shouldPaymentRestore||this.viewState.processingState===Kr.SUCCESS)}back(){return(0,c.sH)(this,void 0,void 0,(function*(){if(this.flow.canGoBack)return(yield this.withPending((()=>this.paymentService.isIDEALPaid())))?this.leave():this.flow.prev()}))}beforeEnter(){return(0,c.sH)(this,void 0,void 0,(function*(){this.produceViewState((e=>{var t;e.email=this.donorEmailDataPoint.email,e.name=this.donorNameDataPoint.fullName,e.formattedAmount=this.intl.formatCurrency(null!==(t=this.donationDataPoint.total)&&void 0!==t?t:0,{currency:this.donationDataPoint.currency,display:"floatcents"}),e.frequency=this.donationDataPoint.frequency,e.isSubscription=this.donationDataPoint.frequency!==W.ONCE,e.shouldPaymentRestore=this.shouldPaymentRestore}))}))}beforeLeave(e){return(0,c.sH)(this,void 0,void 0,(function*(){return this.checkoutService.checkoutConfiguration.paymentOptionsSettings.isNewIdealPaymentFlowEnabled?this.beforeLeaveNew():this.beforeLeaveOld()}))}beforeLeaveOld(){return(0,c.sH)(this,void 0,void 0,(function*(){if(this.pending)return!1;this.pending=!0,this.setProcessingState(Kr.PENDING),this.produceViewState((e=>{e.showReturnBankInfo=!0})),this.paymentService.openIDEALConfirmationWindow({onClose:()=>{this.produceViewState((e=>{e.showReturnBankInfo=!1}))}});const e=yield this.checkoutService.pay({screen:this.name,predictedNextScreen:this.flow.predictNextScreen()});return ue.isSuccess(e)?(this.setProcessingState(Kr.SUCCESS),yield fo(this.checkoutService.checkoutConfiguration.successPaymentDelayBeforeLeave),this.pending=!1,!0):e.failureResult.shouldLeave?(this.pending=!1,!0):(this.setProcessingState(Kr.ERROR),this.pending=!1,!1)}))}beforeLeaveNew(){return(0,c.sH)(this,void 0,void 0,(function*(){if(this.pending)return!1;this.pending=!0,this.setProcessingState(Kr.PENDING);const e=yield this.checkoutService.pay({screen:this.name,predictedNextScreen:this.flow.predictNextScreen(),shouldSaveScreenHistory:!this.shouldPaymentRestore});return ue.isSuccess(e)?(this.setProcessingState(Kr.SUCCESS),yield fo(this.checkoutService.checkoutConfiguration.successPaymentDelayBeforeLeave),this.pending=!1,!0):e.failureResult.shouldLeave?(this.pending=!1,!0):(this.setProcessingState(Kr.ERROR),this.pending=!1,!1)}))}returnToBankWindow(){this.paymentService.focusIDEALConfirmationWindow()}getInitialViewState(){return{locked:!1,email:"",name:"",processingState:Kr.IDLE,formattedAmount:"",frequency:W.ONCE,isSubscription:!1,errorMessage:"",showReturnBankInfo:!1,forceShowBackButton:!1,shouldPaymentRestore:!1}}get shouldPaymentRestore(){return this.checkoutService.checkoutConfiguration.isRestoredByWidgetSession&&!this.paymentService.isIDEALPaymentRestored()}get donorEmailDataPoint(){return this.checkoutState.privacy.donorEmailDataPoint}get donationDataPoint(){return this.checkoutState.donation.dataPoint}get donorNameDataPoint(){return this.checkoutState.privacy.donorNameDataPoint}setProcessingState(e){return e===Kr.ERROR&&this.produceViewState((e=>{e.errorMessage=this.checkoutService.payErrorMessage})),this.produceViewState((t=>{t.processingState=e,t.forceShowBackButton=e===Kr.ERROR})),this}}class Rx{constructor(e){this.checkoutConfiguration=e,this._paymentMethodSorter=null}get paymentMethodSorter(){return this._paymentMethodSorter||(this._paymentMethodSorter=new B_({specificCompanyCountry:this.checkoutConfiguration.company.country})),this._paymentMethodSorter}getPaymentButtons(e){const t={available:[],visible:[]};return this.paymentMethodSorter.sort(e).forEach((e=>{let{paymentMethod:n,available:i,visible:s}=e;if(n===D._h.APPLE_PAY&&i&&(t.available.push(Hu.APPLE_PAY),s&&t.visible.push(Hu.APPLE_PAY)),n===D._h.CARD&&i&&(t.available.push(Hu.CARD),s&&t.visible.push(Hu.CARD)),n===D._h.PAYPAL&&i&&(t.available.push(Hu.PAYPAL),s&&t.visible.push(Hu.PAYPAL)),n===D._h.GOOGLE_PAY&&i&&(t.available.push(Hu.GOOGLE_PAY),s&&t.visible.push(Hu.GOOGLE_PAY)),n===D._h.VENMO&&i&&(t.available.push(Hu.VENMO),s&&t.visible.push(Hu.VENMO)),n===D._h.US_BANK_ACCOUNT&&i){const e=this.checkoutConfiguration.company.stripe.usBankAccount.verification,n=HD(e)||BD(e),i=VD(e);n?(t.available.push(Hu.US_BANK_ACCOUNT_INSTANT),s&&t.visible.push(Hu.US_BANK_ACCOUNT_INSTANT)):i?(t.available.push(Hu.US_BANK_ACCOUNT),s&&t.visible.push(Hu.US_BANK_ACCOUNT)):(t.available.push(Hu.US_BANK_ACCOUNT_VERIFICATION),s&&t.visible.push(Hu.US_BANK_ACCOUNT_VERIFICATION))}n===D._h.UK_BACS&&i&&(t.available.push(Hu.UK_BACS),s&&t.visible.push(Hu.UK_BACS)),n===D._h.AU_BECS&&i&&(t.available.push(Hu.AU_BECS),s&&t.visible.push(Hu.AU_BECS)),n===D._h.ACSS&&i&&(t.available.push(Hu.ACSS),s&&t.visible.push(Hu.ACSS)),n===D._h.SEPA&&i&&(t.available.push(Hu.SEPA),s&&t.visible.push(Hu.SEPA)),n===D._h.IDEAL&&i&&(t.available.push(Hu.IDEAL),s&&t.visible.push(Hu.IDEAL))})),t}}class Mx extends O_{constructor(e){super(e),this.frequency=W.ONCE,this._paymentOptionsViewService=null,this.paymentService=e.paymentService,this._paymentOptionListService=e.paymentOptionListService}beforeEnter(){return(0,c.sH)(this,void 0,void 0,(function*(){this.handleErrors(),this.syncPaymentButtons(),this.initializePaymentOptions(),this.checkoutService.exposeSmartCoveringFeeExperimentV2(),this.checkoutService.exposureSmartCoveringFeeV4Experiment(),this.checkoutService.updateSession(),this.resetPaymentOptions(),this.produceViewState((e=>{e.isInited=!0,e.currency=this.donationDataPoint.currency,e.currencySymbol=this.currencyService.getSymbol(this.donationDataPoint.currency),e.defaultCurrency=this.checkoutService.checkoutConfiguration.defaultCurrency,e.amount=this.donationDataPoint.amount||(this.isShowcase?1e4:0),e.frequency=this.donationDataPoint.frequency,e.total=!this.donationDataPoint.amount&&this.isShowcase?10600:this.donationDataPoint.total,e.processingFee=!this.donationDataPoint.amount&&this.isShowcase?600:this.donationDataPoint.fee,e.isFeeCovered=this.donationDataPoint.isFeeCovered,e.includeFees=this.donationDataPoint.includeFees,e.showIncludeFee=this.isIncludeFeesSectionVisible(this.donationDataPoint.includeFees),e.prefixCurrencySymbol=this.intl.formatSymbol(this.currencyService.getSymbol(this.donationDataPoint.currency),Q.PREFIX),e.postfixCurrencySymbol=this.intl.formatSymbol(this.currencyService.getSymbol(this.donationDataPoint.currency),Q.POSTFIX),e.isRecurring=this.donationDataPoint.frequency!==W.ONCE,e.recurringLabel=this.recurringLabel,e.isPaymentScreen=this.isPaymentScreen,e.isBackFlowDisabled=this.checkoutService.checkoutConfiguration.isRestoredByWidgetSession,this.syncDisplayedPaymentOptions(e)}))}))}beforeLeave(){return(0,c.sH)(this,void 0,void 0,(function*(){return this.checkoutService.updateSession(),this.isPaymentScreen?this.pay():(this.unlock(),!0)}))}choosePaymentOption(e,t){return(0,c.sH)(this,void 0,void 0,(function*(){if(!this.pending)switch(this.lock(),this.checkoutState.paymentOptions.setPaymentMethod(null),this.checkoutState.paymentOptions.setPaymentOption(e),e){case Hu.CARD:if(this.checkoutState.paymentOptions.setPaymentMethod(D._h.CARD),this.produceViewState((e=>{e.processingCardState=Kr.PENDING})),yield this.startCreditCard(),this.viewState.processingCardState===Kr.ERROR)return;return void this.produceViewState((e=>{e.processingCardState=Kr.IDLE}));case Hu.GOOGLE_PAY:return this.isShowcase?void this.unlock():(this.checkoutState.paymentOptions.setPaymentMethod(D._h.GOOGLE_PAY),void(yield this.startGooglePay()));case Hu.APPLE_PAY:return this.isShowcase?void this.unlock():(this.checkoutState.paymentOptions.setPaymentMethod(D._h.APPLE_PAY),void(yield this.startApplePay()));case Hu.UK_BACS:return this.checkoutState.paymentOptions.setPaymentMethod(D._h.UK_BACS),this.leave();case Hu.AU_BECS:return this.checkoutState.paymentOptions.setPaymentMethod(D._h.AU_BECS),this.leave();case Hu.ACSS:return this.isShowcase?void this.unlock():(this.checkoutState.paymentOptions.setPaymentMethod(D._h.ACSS),this.produceViewState((e=>{e.processingACSSState=Kr.PENDING})),yield this.paymentService.initiateACSS({onPopupOpen:null==t?void 0:t.onModalShow,onPopupClose:null==t?void 0:t.onModalHide}),yield this.startACSS(),void this.produceViewState((e=>{e.processingACSSState=Kr.IDLE})));case Hu.US_BANK_ACCOUNT:return this.checkoutState.paymentOptions.setPaymentMethod(D._h.US_BANK_ACCOUNT),this.checkoutState.paymentOptions.setPaymentOption(Hu.US_BANK_ACCOUNT),this.produceViewState((e=>{e.processingUSBankAccountState=Kr.PENDING})),yield this.paymentService.initiateUSBankAccount({}),this.produceViewState((e=>{e.processingUSBankAccountState=Kr.IDLE})),this.leave();case Hu.US_BANK_ACCOUNT_VERIFICATION:return this.checkoutState.paymentOptions.setPaymentMethod(D._h.US_BANK_ACCOUNT),this.checkoutState.paymentOptions.setPaymentOption(Hu.US_BANK_ACCOUNT_VERIFICATION),this.produceViewState((e=>{e.processingUSBankAccountState=Kr.PENDING})),yield this.paymentService.initiateUSBankAccount({}),this.produceViewState((e=>{e.processingUSBankAccountState=Kr.IDLE})),this.leave();case Hu.US_BANK_ACCOUNT_INSTANT:return this.checkoutState.paymentOptions.setPaymentMethod(D._h.US_BANK_ACCOUNT),this.checkoutState.paymentOptions.setPaymentOption(Hu.US_BANK_ACCOUNT_INSTANT),this.produceViewState((e=>{e.processingUSBankAccountState=Kr.PENDING})),yield this.paymentService.initiateUSBankAccount({onPopupOpen:null==t?void 0:t.onModalShow,onPopupClose:null==t?void 0:t.onModalHide}),this.startUSBankAccount(Hu.US_BANK_ACCOUNT_INSTANT);case Hu.PAYPAL:throw new Error("Paypal method can not be chosen");case Hu.VENMO:throw new Error("Venmo method can not be chosen");case Hu.SEPA:return this.checkoutState.paymentOptions.setPaymentMethod(D._h.SEPA),this.leave();case Hu.IDEAL:return this.checkoutState.paymentOptions.setPaymentMethod(D._h.IDEAL),this.produceViewState((e=>{e.processingIdealState=Kr.PENDING})),this.startIDEAL();default:throw new le.HP(e)}}))}changeCardFilledFields(e,t){this.produceViewState((n=>{n.cardFilledFields[e]=t}),!0)}initiateCreditCard(e){return this.paymentService.initiateCreditCard(e)}startIDEAL(){return(0,c.sH)(this,void 0,void 0,(function*(){yield this.paymentService.initiateIDEAL();const e=yield this.checkoutService.hold();if(ue.isFailure(e))return this.unlock(),this.showError({option:Hu.IDEAL,message:this.checkoutService.payErrorMessage||this.intl.translate("common.errorOccurredText")}),void this.produceViewState((e=>{e.processingIdealState=Kr.IDLE}));yield this.leave()}))}startCreditCard(){return(0,c.sH)(this,void 0,void 0,(function*(){if(!(yield this.paymentService.startCreditCardFlow()))return this.resetPaymentOptions(),this.unlock(),void this.produceViewState((e=>{e.shakeKey+=1}));const e=yield this.checkoutService.hold();if(ue.isFailure(e))return this.resetPaymentOptions(),this.unlock(),void this.showError({title:this.intl.safeTranslate("creditCard.error.title"),message:this.checkoutService.payErrorMessage||this.intl.safeTranslate("common.errorOccurredText"),option:Hu.CARD});yield this.leave()}))}initiateVenmo(e){return(0,c.sH)(this,arguments,void 0,(function(e){var t=this;let{element:n,onClick:i,onHide:s}=e;return function*(){yield t.paymentService.initiateVenmo({element:n,holdDone:()=>{null==s||s(),t.leave()},onFail:e=>{null==s||s(),t.resetPaymentOptions(),t.unlock(),t.showError({message:e.message||t.intl.translate("common.errorOccurredText"),option:Hu.VENMO})},onCancel:()=>{t.resetPaymentOptions(),t.unlock(),null==s||s()},onButtonClick:()=>{t.lock(),t.checkoutState.paymentOptions.setPaymentOption(null),null==i||i()}}),t.syncButtonsAvailability(),t.syncMultiplePaymentOptions(),t.syncPreSelectedPaymentOption()}()}))}closePaypalButton(){return this.paymentService.closePaypalButton()}closeVenmoButton(){return this.paymentService.closeVenmoButton()}initiatePaypal(e){let{element:t,buttonColor:n,onClick:i,onHide:s}=e;return this.isShowcase?Promise.resolve(!1):this.paymentService.initiatePaypal({element:t,buttonColor:n,holdDone:()=>{null==s||s(),this.leave()},onFail:e=>{null==s||s(),this.resetPaymentOptions(),this.unlock(),this.showError({message:e.message||this.intl.translate("common.errorOccurredText"),option:Hu.PAYPAL})},onCancel:()=>{this.resetPaymentOptions(),this.unlock(),null==s||s()},onButtonClick:()=>{this.lock(),this.checkoutState.paymentOptions.setPaymentOption(null),null==i||i()}})}togglePaypalActions(e){return(0,c.sH)(this,void 0,void 0,(function*(){yield this.paymentService.togglePaypalActions(e)}))}startGooglePay(){return(0,c.sH)(this,void 0,void 0,(function*(){const e=yield this.paymentService.startGooglePay();if(ue.isFailure(e)){this.resetPaymentOptions(),this.unlock();const t=e.failureResult.message;t&&this.showError({message:t,option:Hu.GOOGLE_PAY})}else yield this.leave()}))}startApplePay(){return(0,c.sH)(this,void 0,void 0,(function*(){const e=yield this.paymentService.startApplePay();if(ue.isFailure(e)){this.resetPaymentOptions(),this.unlock();const t=e.failureResult.message;t&&this.showError({message:t,option:Hu.APPLE_PAY})}else yield this.leave()}))}startACSS(){return(0,c.sH)(this,void 0,void 0,(function*(){const e=yield this.paymentService.startACSS();if(ue.isFailure(e)){this.resetPaymentOptions(),this.unlock();const t=e.failureResult.message;t&&this.showError({message:t,option:Hu.ACSS})}else yield this.leave()}))}startUSBankAccount(e){return(0,c.sH)(this,void 0,void 0,(function*(){const t=yield this.paymentService.startUSBankAccount();if(ue.isFailure(t)){this.resetPaymentOptions(),this.unlock();const n=t.failureResult.message;n?this.showError({message:n,option:e}):this.produceViewState((e=>{e.processingUSBankAccountState=Kr.IDLE}))}else yield this.leave()}))}toggleFeeCovered(){this.checkoutState.donation.setFeeCovered(!this.donationDataPoint.isFeeCovered,{isCustomFeeCoveredValue:!0}),this.produceViewState((e=>{e.isFeeCovered=this.donationDataPoint.isFeeCovered,e.total=this.donationDataPoint.total})),this.syncButtonsAvailability(),this.syncMultiplePaymentOptions(),this.syncPreSelectedPaymentOption(),this.checkoutService.syncUpdateCheckoutState()}setPreSelectedPaymentOption(e){this.checkoutState.paymentOptions.setPreSelectedPaymentOption(e),this.produceViewState((t=>{t.preSelectedPaymentOption=e,this.syncDisplayedPaymentOptions(t)}))}selectPaymentOption(e){this.setPreSelectedPaymentOption(e)}setShowAllPaymentOptions(e){this.produceViewState((t=>{t.showAllPaymentOptions=e,this.syncDisplayedPaymentOptions(t)}))}toggleShowAllPaymentOptions(){this.setShowAllPaymentOptions(!this.viewState.showAllPaymentOptions)}syncPaymentButtons(){this.syncButtonsAvailability(),this.syncMultiplePaymentOptions(),this.syncPreSelectedPaymentOption()}getFrequency(){return this.donationDataPoint.frequency}getCurrency(){return this.donationDataPoint.currency}getInitialViewState(){return{isInited:!1,showIncludeFee:!0,livemode:this.isLivemode,showTestModeTooltipInfo:this.showTestModeTooltipInfo,isStripeAccountConnected:this.isStripeAccountConnected,stripeElementsAvailable:this.isStripeElementsAvailable,amount:0,currency:"USD",currencySymbol:"$",prefixCurrencySymbol:"",postfixCurrencySymbol:"",allowCentsForCharges:this.checkoutService.company.allowCentsForCharges,frequency:W.ONCE,includeFees:D.XN.DEFAULT_YES,processingFee:0,total:0,defaultCurrency:"USD",isFeeCovered:!1,availableOptions:[],visiblePaymentOptions:[],hiddenPaymentOptions:[],buttonOptions:Object.fromEntries(Object.values(Hu).map((e=>[e,{visible:!1}]))),isMultiplePaymentOptions:!1,locked:!1,processingACSSState:Kr.IDLE,processingUSBankAccountState:Kr.IDLE,processingCardState:Kr.IDLE,processingIdealState:Kr.IDLE,shakeKey:0,cardFilledFields:{[_y.CARD_NUMBER]:!1,[_y.CARD_EXPIRY]:!1,[_y.CARD_CVC]:!1},isRecurring:!0,recurringLabel:"",isPaymentScreen:!1,preSelectedPaymentOption:null,isBackFlowDisabled:!1,showAllPaymentOptions:!1,displayedPaymentOptions:[],shouldShowMoreButton:!1}}get donationDataPoint(){return this.checkoutState.donation.dataPoint}get processDataPoint(){return this.checkoutState.process.dataPoint}get paymentOptionsDataPoint(){return this.checkoutState.paymentOptions.paymentOptionsDataPoint}get recurringLabel(){return ku(this.intl,this.donationDataPoint.frequency)}get isShowcase(){return this.checkoutService.checkoutConfiguration.infrastructureParams.showcase}get isLivemode(){return this.checkoutService.checkoutConfiguration.infrastructureParams.livemode}get showTestModeTooltipInfo(){return!this.isShowcase&&!this.isLivemode}get isStripeAccountConnected(){return!!this.checkoutService.checkoutConfiguration.company.stripeAccount}get isStripeElementsAvailable(){return this.checkoutService.checkoutConfiguration.infrastructureParams.env!==D.hY.PRODUCTION||this.checkoutService.checkoutConfiguration.infrastructureParams.isSSLEnabled}get isPaymentScreen(){return this.name===this.checkoutService.getPaymentScreen(this.name,this.flow.getHistoricalScreens())}get availableVisiblePaymentOptions(){return this.viewState.availableOptions.filter((e=>this.viewState.buttonOptions[e].visible))}get paymentOptionsViewService(){return this._paymentOptionsViewService||(this._paymentOptionsViewService=new Rx(this.checkoutService.checkoutConfiguration)),this._paymentOptionsViewService}pay(){return(0,c.sH)(this,void 0,void 0,(function*(){this.setPaymentLoader();const e=yield this.checkoutService.pay({screen:this.name,predictedNextScreen:this.flow.predictNextScreen()});if(ue.isFailure(e)){if(this.removePaymentLoader(),this.unlock(),e.failureResult.shouldLeave)return!0;const t=(()=>{switch(!0){case!!this.paymentOptionsDataPoint.selectedPaymentOption:return this.paymentOptionsDataPoint.selectedPaymentOption;case this.paymentOptionsDataPoint.clientPaymentMethod===D._h.PAYPAL:return Hu.PAYPAL;case this.paymentOptionsDataPoint.clientPaymentMethod===D._h.VENMO:return Hu.VENMO;default:return null}})();return t&&this.showError({title:this.checkoutService.payErrorTitle,message:this.checkoutService.payErrorMessage||this.intl.translate("common.errorOccurredText"),option:t}),!1}return this.produceViewState((e=>{e.processingCardState=Kr.SUCCESS})),this.checkoutService.checkoutConfiguration.successPaymentDelayBeforeLeave?yield fo(this.checkoutService.checkoutConfiguration.successPaymentDelayBeforeLeave):this.removePaymentLoader(),this.unlock(),!0}))}resetPaymentOptions(){this.checkoutState.paymentOptions.setPaymentMethod(null),this.checkoutState.paymentOptions.setPaymentOption(null)}syncButtonsAvailability(){const e=this.paymentOptionsViewService.getPaymentButtons(this.paymentOptionsDataPoint.allowedPaymentMethods);this.produceViewState((t=>{const n=e.available;vT()(t.availableOptions,n)||(t.availableOptions=n);for(const[n,i]of Object.entries(t.buttonOptions))i.visible=e.visible.some((e=>e===n));this.syncDisplayedPaymentOptions(t)}))}syncMultiplePaymentOptions(){this.produceViewState((e=>{const t=Object.values(e.buttonOptions).filter((e=>e.visible));e.isMultiplePaymentOptions=t.length>1}))}syncPreSelectedPaymentOption(){var e;const t=this.availableVisiblePaymentOptions;null!==this.paymentOptionsDataPoint.preSelectedPaymentOption&&t.includes(this.paymentOptionsDataPoint.preSelectedPaymentOption)?this.setPreSelectedPaymentOption(this.paymentOptionsDataPoint.preSelectedPaymentOption):this.setPreSelectedPaymentOption(null!==(e=t[0])&&void 0!==e?e:null)}syncDisplayedPaymentOptions(e){const t=e.availableOptions.filter((t=>e.buttonOptions[t].visible)),n=this._paymentOptionListService.getDisplayedOptions({visibleOptions:t,selectedOption:e.preSelectedPaymentOption,showAll:e.showAllPaymentOptions});e.displayedPaymentOptions=n,e.shouldShowMoreButton=n.length<t.length,e.hiddenPaymentOptions=t.filter((e=>!n.includes(e)))}showError(e){let{title:t,message:n,option:i}=e;this.produceViewState((e=>{i!==Hu.US_BANK_ACCOUNT_INSTANT&&i!==Hu.US_BANK_ACCOUNT_VERIFICATION&&i!==Hu.US_BANK_ACCOUNT||(e.processingUSBankAccountState=Kr.ERROR),i===Hu.CARD&&(e.processingCardState=Kr.ERROR),i===Hu.IDEAL&&(e.processingIdealState=Kr.ERROR),e.buttonOptions[i].errorTitle=t,e.buttonOptions[i].error=n})),window.setTimeout((()=>{this.produceViewState((e=>{i!==Hu.US_BANK_ACCOUNT_INSTANT&&i!==Hu.US_BANK_ACCOUNT_VERIFICATION&&i!==Hu.US_BANK_ACCOUNT||(e.processingUSBankAccountState=Kr.IDLE),i===Hu.CARD&&(e.processingCardState=Kr.IDLE),i===Hu.IDEAL&&(e.processingIdealState=Kr.IDLE),e.buttonOptions[i].errorTitle=void 0,e.buttonOptions[i].error=void 0}))}),yi)}isIncludeFeesSectionVisible(e){return[D.XN.DEFAULT_YES,D.XN.DEFAULT_NO,D.XN.SMART_COVERING].includes(e)}lock(){this.togglePaypalActions(!1),this.pending=!0}unlock(){this.togglePaypalActions(!0),this.pending=!1}setPaymentLoader(){this.paymentOptionsDataPoint.selectedPaymentOption!==Hu.CARD&&(this.checkoutService.checkoutUIState.showPaymentLoader=!0),this.checkoutService.syncUpdateCheckoutState()}removePaymentLoader(){this.checkoutService.checkoutUIState.showPaymentLoader=!1,this.checkoutService.syncUpdateCheckoutState()}handleErrors(){this.processDataPoint.hasPaymentError()&&(this.paymentOptionsDataPoint.clientPaymentMethod===D._h.US_BANK_ACCOUNT&&this.paymentOptionsDataPoint.selectedPaymentOption&&this.showError({message:this.checkoutService.payErrorMessage||this.intl.translate("common.errorOccurredText"),option:this.paymentOptionsDataPoint.selectedPaymentOption}),this.paymentOptionsDataPoint.clientPaymentMethod===D._h.PAYPAL&&this.showError({message:this.intl.translate("common.errorOccurredText"),option:Hu.PAYPAL}),this.paymentOptionsDataPoint.clientPaymentMethod===D._h.CARD&&this.showError({title:this.intl.safeTranslate("creditCard.error.title"),message:this.checkoutService.payErrorMessage||this.intl.translate("creditCard.error.message"),option:Hu.CARD}),this.checkoutState.process.setInProgress())}initializePaymentOptions(){return(0,c.sH)(this,void 0,void 0,(function*(){yield this.paymentService.ensurePaymentMethodsInitialized(),this.syncPaymentButtons()}))}}class Lx extends O_{constructor(e){super(e)}beforeEnter(){return(0,c.sH)(this,void 0,void 0,(function*(){const e=this.processDataPoint.hasPaymentError();this.produceViewState((t=>{t.accountHolderName=this.ukBacsDataPoint.accountHolderName,t.accountNumber=this.ukBacsDataPoint.accountNumber,t.sortCode=this.ukBacsDataPoint.sortCode,t.termsChecked=this.ukBacsDataPoint.termsAccepted,e&&(t.shakeKey+=1)})),e&&(this.setProcessingState(Kr.ERROR),this.checkoutState.process.setInProgress())}))}beforeLeave(e){return(0,c.sH)(this,void 0,void 0,(function*(){this.pending=!0;const e=this.ukBacsDataPoint.validate();return e.isValid?(this.setProcessingState(Kr.PENDING),this.produceViewState((e=>{e.payErrorMessage=""})),this.isPaymentScreen?this.pay():this.hold()):(this.produceViewState((t=>{t.errors.sortCode=!e.fields.sortCode.isValid,t.errors.accountNumber=!e.fields.accountNumber.isValid,t.errors.accountHolderName=!e.fields.accountHolderName.isValid,t.errors.termsChecked=!e.fields.termsAccepted.isValid,t.shakeKey+=1})),this.pending=!1,!1)}))}changeSortCode(e){e.length>6||(this.checkoutState.paymentOptions.setUkBacsSortCode(e),this.produceViewState((e=>{e.errors.sortCode=!1,e.sortCode=this.ukBacsDataPoint.sortCode})))}changeAccountNumber(e){e.length>17||(this.checkoutState.paymentOptions.setUkBacsAccountNumber(e),this.produceViewState((e=>{e.errors.accountNumber=!1,e.accountNumber=this.ukBacsDataPoint.accountNumber})))}changeAccountHolderName(e){this.checkoutState.paymentOptions.setUkBacsAccountHolderName(e),this.produceViewState((e=>{e.errors.accountHolderName=!1,e.accountHolderName=this.ukBacsDataPoint.accountHolderName}))}toggleTermsChecked(){this.checkoutState.paymentOptions.setUkBacsTermsAccepted(!this.ukBacsDataPoint.termsAccepted),this.produceViewState((e=>{e.errors.termsChecked=!1,e.termsChecked=this.ukBacsDataPoint.termsAccepted}))}fillDemoData(e){const t=Lx.demoData.sortCode.split(""),n=Lx.demoData.accountNumber.split(""),i=Lx.demoData.accountHolderName.split(""),s=window.setInterval((()=>{var a,o,r;if(t.length)null===(a=e.sortCode.current)||void 0===a||a.focus(),this.changeSortCode(this.viewState.sortCode+t.shift());else if(n.length)null===(o=e.accountNumber.current)||void 0===o||o.focus(),this.changeAccountNumber(this.viewState.accountNumber+n.shift());else{if(!i.length)return clearInterval(s);null===(r=e.accountHolderName.current)||void 0===r||r.focus(),this.changeAccountHolderName(this.viewState.accountHolderName+i.shift())}}),50);return()=>clearInterval(s)}getInitialViewState(){return{locked:!1,accountNumber:"",sortCode:"",shakeKey:0,accountHolderName:"",termsChecked:!0,errors:{},processingState:Kr.IDLE,livemode:this.checkoutService.checkoutConfiguration.infrastructureParams.livemode,companyName:this.checkoutService.checkoutConfiguration.company.name}}get ukBacsDataPoint(){return this.checkoutState.paymentOptions.ukBacsDataPoint}get processDataPoint(){return this.checkoutState.process.dataPoint}get isPaymentScreen(){return this.name===this.checkoutService.getPaymentScreen(this.name,this.flow.getHistoricalScreens())}setProcessingState(e){this.produceViewState((t=>{t.payErrorMessage=this.checkoutService.payErrorMessage,t.processingState=e}))}pay(){return(0,c.sH)(this,void 0,void 0,(function*(){this.pending=!0;const e=yield this.checkoutService.hold();if(ue.isFailure(e))return this.handlePayFailure(e);const t=yield this.checkoutService.pay({screen:this.name,predictedNextScreen:this.flow.predictNextScreen()});return ue.isFailure(t)?this.handlePayFailure(t):(this.setProcessingState(Kr.SUCCESS),yield fo(this.checkoutService.checkoutConfiguration.successPaymentDelayBeforeLeave),this.pending=!1,!0)}))}handlePayFailure(e){return(0,c.sH)(this,void 0,void 0,(function*(){return e.failureResult.shouldLeave?(this.pending=!1,!0):(yield this.showError(),this.pending=!1,!1)}))}hold(){return(0,c.sH)(this,void 0,void 0,(function*(){const e=yield this.withPending((()=>this.checkoutService.hold()));return!ue.isFailure(e)||(yield this.showError(),!1)}))}showError(){return(0,c.sH)(this,void 0,void 0,(function*(){this.produceViewState((e=>{e.processingState=Kr.ERROR,e.payErrorMessage=this.checkoutService.payErrorMessage||this.intl.translate("common.errorOccurredText")}))}))}}Lx.demoData={sortCode:"108800",accountNumber:"00012345",accountHolderName:"Michael Smith"};class Ux extends O_{constructor(e){super(e)}beforeEnter(){return(0,c.sH)(this,void 0,void 0,(function*(){this.produceViewState((e=>{var t,n,i;e.ukBacs.accountHolderName=this.ukBacsDataPoint.accountHolderName,e.ukBacs.accountNumber=null!==(t=this.ukBacsDataPoint.accountNumber)&&void 0!==t?t:"",e.ukBacs.sortCode=null!==(n=this.ukBacsDataPoint.sortCode)&&void 0!==n?n:"",e.email=this.donorEmailDataPoint.email,e.company.stripe.ukBacsDisplayName=this.checkoutService.checkoutConfiguration.company.stripe.ukBacsDisplayName,e.formattedAmount=this.intl.formatCurrency(null!==(i=this.donationDataPoint.total)&&void 0!==i?i:0,{currency:this.donationDataPoint.currency,display:"floatcents"}),e.frequency=this.donationDataPoint.frequency}))}))}beforeLeave(e){return(0,c.sH)(this,void 0,void 0,(function*(){if(this.pending)return!1;this.pending=!0,this.setProcessingState(Kr.PENDING);const e=yield this.checkoutService.pay({screen:this.name,predictedNextScreen:this.flow.predictNextScreen()});return ue.isSuccess(e)?(this.pending=!1,this.setProcessingState(Kr.SUCCESS),yield fo(this.checkoutService.checkoutConfiguration.successPaymentDelayBeforeLeave),!0):e.failureResult.shouldLeave?(this.pending=!1,!0):(this.pending=!1,yield this.showError(),!1)}))}getInitialViewState(){return{locked:!1,ukBacs:{sortCode:"",accountHolderName:"",accountNumber:""},email:"",company:{stripe:{ukBacsDisplayName:"Stripe"}},processingState:Kr.IDLE,formattedAmount:"",frequency:W.MONTHLY}}get ukBacsDataPoint(){return this.checkoutState.paymentOptions.ukBacsDataPoint}get donorEmailDataPoint(){return this.checkoutState.privacy.donorEmailDataPoint}get donationDataPoint(){return this.checkoutState.donation.dataPoint}showError(){return(0,c.sH)(this,void 0,void 0,(function*(){this.produceViewState((e=>{e.processingState=Kr.ERROR,e.payErrorMessage=this.checkoutService.payErrorMessage||this.intl.translate("common.errorOccurredText")})),this.produceViewState((e=>{e.payErrorMessage=""}),!0)}))}setProcessingState(e){this.produceViewState((t=>{t.processingState=e}))}}var Fx=n(833);class jx extends O_{constructor(e,t,n){super(n),this.upsellAggregate=e,this.adaptiveFeeCoveringService=t}get isLocked(){return!!this.getScreenData().locked||this.viewState.processingState.lowMonthly===Kr.PENDING||this.viewState.processingState.highMonthly===Kr.PENDING}beforeEnter(){return(0,c.sH)(this,void 0,void 0,(function*(){const e=this.upsellAggregate.getBeforeEnterViewState();this.produceViewState((t=>{t.currency=e.currency,t.targetFrequency=e.targetFrequency,t.upsell.fromAmount=e.upsell.fromAmount,t.upsell.fromAmountInUSD=e.upsell.fromAmountInUSD,t.lowAmount=e.lowAmount,t.lowAmountInUSD=e.lowAmountInUSD,t.highAmount=e.highAmount,t.highAmountInUSD=e.highAmountInUSD,t.isAnnualTribute=e.isAnnualTribute,t.highButtonText=e.highButtonText,t.lowButtonText=e.lowButtonText,t.screenTitle=e.screenTitle,t.questionText=e.questionText,t.descriptionText=e.descriptionText,t.questionShortText=e.questionShortText}))}))}setShowed(){this.checkoutState.preDonationUpsell.setShowed()}confirm(e){return this.upsellAggregate.confirmUpsell(e),this.checkoutService.campaignConfig.includeFees===Fx.X.SMART_COVERING&&this.checkoutState.preDonationUpsell.dataPoint.isAccepted&&this.amountsOnUpsellV2Experiment.isTestGroupWithUsingAmounts&&this.checkoutState.donation.setFeeCovered(!0,{isCustomFeeCoveredValue:!0}),this.checkoutService.updateSession(),this.checkoutService.syncUpdateCheckoutState(),this.performFeeCoveringSuggestion(),this.checkoutService.fetchFeeCoveringSuggestion(),this.leave({omitBeforeLeave:!0})}getInitialViewState(){return{locked:!1,upsell:{fromAmount:0,fromAmountInUSD:0},currency:"USD",highButtonText:"",lowButtonText:"",highAmount:0,highAmountInUSD:0,lowAmount:0,lowAmountInUSD:0,screenTitle:"",questionText:"",questionShortText:"",descriptionText:"",targetFrequency:W.MONTHLY,isAnnualTribute:!1,processingState:{lowMonthly:Kr.IDLE,highMonthly:Kr.IDLE}}}get amountsOnUpsellV2Experiment(){return this.checkoutService.checkoutConfiguration.checkoutType===Ce.MODAL?this.experiments.get(be.AMOUNTS_ON_UPSELL_V_2_CHECKOUT_EXPERIMENT):this.experiments.get(be.AMOUNTS_ON_UPSELL_V_2_CAMPAIGN_PAGES_EXPERIMENT)}performFeeCoveringSuggestion(){return(0,c.sH)(this,void 0,void 0,(function*(){(yield this.adaptiveFeeCoveringService.tryFetchSuggestion())&&(this.adaptiveFeeCoveringService.tryApplySuggestion(),this.adaptiveFeeCoveringService.tryTrackSuggestion())}))}}class Bx extends O_{constructor(e){super(e)}beforeEnter(){return(0,c.sH)(this,void 0,void 0,(function*(){this.produceViewState((e=>{e.routingNumber=this.usBankAccountDataPoint.routingNumber,e.accountNumber=this.usBankAccountDataPoint.accountNumber,e.accountHolderName=this.usBankAccountDataPoint.accountHolderName})),this.processDataPoint.hasPaymentError()&&(this.showError(),this.checkoutState.process.setInProgress())}))}beforeLeave(e){return(0,c.sH)(this,void 0,void 0,(function*(){if(this.pending)return!1;this.pending=!0,this.setProcessingState(Kr.PENDING);const e=this.usBankAccountDataPoint.validate();if(!e.isValid)return this.produceViewState((t=>{t.errors.routingNumber=!e.fields.routingNumber.isValid,t.errors.accountNumber=!e.fields.accountNumber.isValid,t.errors.accountHolderName=!e.fields.accountHolderName.isValid,t.shakeKey+=1,t.processingState=Kr.IDLE})),this.pending=!1,!1;const t=yield this.checkoutService.hold();return ue.isSuccess(t)?(this.pending=!1,!0):(this.showError(),this.pending=!1,!1)}))}changeAccountNumber(e){e.length>17||(this.checkoutState.paymentOptions.setUsBankAccountNumber(e),this.produceViewState((e=>{e.errors.accountNumber=!1,e.accountNumber=this.usBankAccountDataPoint.accountNumber})))}changeRoutingNumber(e){e.length>9||(this.checkoutState.paymentOptions.setUsBankAccountRoutingNumber(e),this.produceViewState((e=>{e.errors.routingNumber=!1,e.routingNumber=this.usBankAccountDataPoint.routingNumber})))}changeAccountHolderName(e){this.checkoutState.paymentOptions.setUsBankAccountHolderName(e),this.produceViewState((e=>{e.errors.accountHolderName=!1,e.accountHolderName=this.usBankAccountDataPoint.accountHolderName}))}changeAccountType(e){this.checkoutState.paymentOptions.setUsBankAccountType(e),this.produceViewState((e=>{e.accountType=this.usBankAccountDataPoint.accountType}))}fillDemoData(e){const t=Bx.demoData.routingNumber.split(""),n=Bx.demoData.accountNumber.split(""),i=Bx.demoData.accountHolderName.split(""),s=window.setInterval((()=>{var a,o,r;if(t.length)null===(a=e.routingNumber)||void 0===a||a.focus(),this.changeRoutingNumber(this.viewState.routingNumber+t.shift());else if(n.length)null===(o=e.accountNumber)||void 0===o||o.focus(),this.changeAccountNumber(this.viewState.accountNumber+n.shift());else{if(!i.length)return clearInterval(s);null===(r=e.accountHolderName)||void 0===r||r.focus(),this.changeAccountHolderName(this.viewState.accountHolderName+i.shift())}}),Bx.demoDataInterval);return()=>clearInterval(s)}getInitialViewState(){return{locked:!1,routingNumber:"",accountNumber:"",accountHolderName:"",accountType:eP.INDIVIDUAL,shakeKey:0,processingState:Kr.IDLE,errors:{},livemode:this.checkoutService.checkoutConfiguration.infrastructureParams.livemode}}get usBankAccountDataPoint(){return this.checkoutState.paymentOptions.usBankAccountDataPoint}get processDataPoint(){return this.checkoutState.process.dataPoint}setProcessingState(e){this.produceViewState((t=>{t.processingState=e}))}showError(){this.produceViewState((e=>{e.shakeKey+=1,e.processingState=Kr.ERROR,e.errorMessage=this.checkoutService.payErrorMessage||this.intl.translate("common.errorOccurredText")}))}}Bx.demoData={routingNumber:"110000000",accountNumber:"000123456789",accountHolderName:"Michael Smith"},Bx.demoDataInterval=50;class Gx extends O_{constructor(e){super(e)}beforeEnter(){return(0,c.sH)(this,void 0,void 0,(function*(){this.produceViewState((e=>{e.usBankAccount.accountHolderName=this.usBankAccountDataPoint.accountHolderName||this.donorNameDataPoint.fullName,e.usBankAccount.accountNumberLast4=this.usBankAccountDataPoint.accountNumberLast4,e.usBankAccount.routingNumber=this.usBankAccountDataPoint.routingNumber,e.usBankAccount.financialInstitution=this.usBankAccountDataPoint.financialInstitution,e.isRecurring=this.donationDataPoint.frequency!==W.ONCE}))}))}beforeLeave(e){return(0,c.sH)(this,void 0,void 0,(function*(){if(this.pending)return!1;this.pending=!0,this.setProcessingState(Kr.PENDING),this.produceViewState((e=>{e.payErrorMessage=""}));const e=yield this.checkoutService.pay({screen:this.name,predictedNextScreen:this.flow.predictNextScreen()});return ue.isSuccess(e)?(this.pending=!1,this.setProcessingState(Kr.SUCCESS),yield fo(this.checkoutService.checkoutConfiguration.successPaymentDelayBeforeLeave),!0):(this.pending=!1,!!e.failureResult.shouldLeave||(yield this.showError(),!1))}))}getInitialViewState(){return{locked:!1,usBankAccount:{accountHolderName:"",accountNumberLast4:"",routingNumber:"",financialInstitution:"",agreementDate:this.intl.formatDate(new Date,{type:Ga.LONG_WITH_YEAR})},companyName:this.checkoutService.company.name,processingState:Kr.IDLE,isRecurring:!1}}get usBankAccountDataPoint(){return this.checkoutState.paymentOptions.usBankAccountDataPoint}get donationDataPoint(){return this.checkoutState.donation.dataPoint}get donorNameDataPoint(){return this.checkoutState.privacy.donorNameDataPoint}showError(){return(0,c.sH)(this,void 0,void 0,(function*(){this.produceViewState((e=>{e.processingState=Kr.ERROR,e.payErrorMessage=this.checkoutService.payErrorMessage||this.intl.translate("common.errorOccurredText")}))}))}setProcessingState(e){this.produceViewState((t=>{t.processingState=e}))}}class qx extends O_{constructor(e,t){super(t),this.paymentService=e}beforeEnter(){return(0,c.sH)(this,void 0,void 0,(function*(){this.processDataPoint.hasPaymentError()&&(this.showError(),this.checkoutState.process.setInProgress())}))}authorizeToBank(e){return(0,c.sH)(this,void 0,void 0,(function*(){if(this.pending)return;this.pending=!0,this.setProcessingState(Kr.PENDING),this.checkoutState.paymentOptions.setPaymentMethod(D._h.US_BANK_ACCOUNT),this.checkoutState.paymentOptions.setPaymentOption(Hu.US_BANK_ACCOUNT_INSTANT),yield this.paymentService.initiateUSBankAccount({onPopupOpen:null==e?void 0:e.onModalShow,onPopupClose:null==e?void 0:e.onModalHide,verificationType:"instant"});const t=yield this.paymentService.startUSBankAccount();if(ue.isSuccess(t))return this.setProcessingState(Kr.IDLE),this.pending=!1,this.leave();const n=t.failureResult.message;n?this.showError(n):this.setProcessingState(Kr.IDLE),this.pending=!1}))}fillDetailsManually(){return(0,c.sH)(this,void 0,void 0,(function*(){if(!this.pending)return this.pending=!0,this.setProcessingState(Kr.PENDING),this.checkoutState.paymentOptions.setPaymentMethod(D._h.US_BANK_ACCOUNT),this.checkoutState.paymentOptions.setPaymentOption(Hu.US_BANK_ACCOUNT_VERIFICATION),yield this.paymentService.initiateUSBankAccount({}),this.pending=!1,this.setProcessingState(Kr.IDLE),this.leave({omitBeforeLeave:!0})}))}getInitialViewState(){return{test:1,processingState:Kr.IDLE,loginToBankError:"",locked:!1}}get processDataPoint(){return this.checkoutState.process.dataPoint}setProcessingState(e){this.produceViewState((t=>{t.processingState=e}))}showError(e){this.produceViewState((t=>{t.processingState=Kr.ERROR,t.loginToBankError=e||this.checkoutService.payErrorMessage||this.intl.translate("common.errorOccurredText")}))}}class Hx extends O_{constructor(e){super(e)}get amountExample(){return`+${this.intl.formatCurrency(0,{currency:"USD"}).replace("00","xx")}`}get descriptorCodeExample(){return{prefix:"SM",amount:`+${this.intl.formatCurrency(1,{currency:"USD"})}`}}beforeEnter(){return(0,c.sH)(this,void 0,void 0,(function*(){this.produceViewState((e=>{e.statementDescriptor=this.statementDescriptor,e.verificationType=this.verificationType}))}))}getInitialViewState(){return{locked:!1,statementDescriptor:"",verificationType:"amounts"}}get usBankAccountDataPoint(){return this.checkoutState.paymentOptions.usBankAccountDataPoint}get verificationType(){const e=this.usBankAccountDataPoint.verificationType;if(!e)throw new Error("Verification type is not defined");return e}get statementDescriptor(){switch(this.usBankAccountDataPoint.verificationType){case"descriptor_code":return this.checkoutService.company.name;case"amounts":return"ACCTVERIFY";default:return""}}}const Vx={[ve.US_BANK_ACCOUNT]:class extends Bx{},[ve.US_BANK_ACCOUNT_DONATE_OPTIONS]:class extends qx{},[ve.US_BANK_ACCOUNT_CONFIRMATION]:class extends Gx{},[ve.US_BANK_ACCOUNT_VERIFICATION_GUIDE]:class extends Hx{},[ve.AU_BECS]:class extends gx{},[ve.DONATE]:class extends Dx{},[ve.DOUBLE]:class extends kx{},[ve.GIFT_AID]:class extends xx{},[ve.PAYMENT_OPTIONS]:class extends Mx{},[ve.SEPA]:class extends Ox{},[ve.IDEAL_CONFIRMATION]:class extends wx{},[ve.UK_BACS]:class extends Lx{},[ve.UK_BACS_CONFIRMATION]:class extends Ux{},[ve.UPSELL]:class extends jx{},[ve.COMMUNICATION_CONSENT]:class extends fx{},[ve.FAST_TRACK_PAYMENT_OPTIONS]:class extends Ix{},[oc.MANDATORY_QUESTIONS]:class extends L_{},[oc.QUESTIONS]:class extends H_{},[oc.COMMENT]:class extends x_{},[oc.MAILING_ADDRESS]:class extends M_{},[oc.PRIVACY]:class extends q_{},[oc.THANK_YOU]:class extends ck{},[oc.REMIND_ME]:V_,[oc.BLOCKED]:class extends I_{}};class Kx{getDisplayedOptions(e){let{visibleOptions:t,selectedOption:n,showAll:i}=e;const s=this.getMaxVisibleOptionsLength(t);return i||4===s?t:this.getFirstOptions(t,s,n)}getMaxVisibleOptionsLength(e){return e.length<=4?4:3}getFirstOptions(e,t,n){const i=e.slice(0,t),s=e.findIndex((e=>e===n));return!n||s<t?i:[...i.slice(0,-1),n]}}class Yx{static isDonateScreenController(e,t){return t===ve.DONATE}static isPaymentOptionScreenController(e,t){return t===ve.PAYMENT_OPTIONS}static isDoubleDonationScreenController(e,t){return t===ve.DOUBLE}static isGiftAidScreenController(e,t){return t===ve.GIFT_AID}static isUSBankAccountScreenController(e,t){return t===ve.US_BANK_ACCOUNT}static isUSBankAccountDonateOptionsScreenController(e,t){return t===ve.US_BANK_ACCOUNT_DONATE_OPTIONS}static isUSBankAccountConfirmationScreenController(e,t){return t===ve.US_BANK_ACCOUNT_CONFIRMATION}static isUSBankAccountVerificationGuideScreenController(e,t){return t===ve.US_BANK_ACCOUNT_VERIFICATION_GUIDE}static isIDEALConfirmationScreenController(e,t){return t===ve.IDEAL_CONFIRMATION}static isSepaConversionScreenController(e,t){return t===ve.SEPA}static isUKBacsScreenController(e,t){return t===ve.UK_BACS}static isUKBacsConfirmationScreenController(e,t){return t===ve.UK_BACS_CONFIRMATION}static isUpsellScreenController(e,t){return t===ve.UPSELL}static isAUBecsScreenController(e,t){return t===ve.AU_BECS}static isThankYouScreenController(e,t){return t===oc.THANK_YOU}static isMailingAddressScreenController(e,t){return t===oc.MAILING_ADDRESS}static isBlockedScreenController(e,t){return t===oc.BLOCKED}static isCommunicationConsentScreenController(e,t){return t===ve.COMMUNICATION_CONSENT}static isPrivacyScreenController(e,t){return t===oc.PRIVACY}static isFastTrackPaymentOptionsScreenController(e,t){return t===ve.FAST_TRACK_PAYMENT_OPTIONS}constructor(e,t,n,i,s,a,o,r,c,l,u,d,h,m,p){this.checkoutService=e,this.checkoutState=t,this.paymentService=n,this.intl=i,this.debug=s,this.subscriptionPeriodLabelsService=a,this.mailingAddressCustomization=o,this.currencyService=r,this.suggestionsService=c,this.experiments=l,this.adaptivePreDonationUpsellSuggestionsService=u,this.feeCoveringSuggestions=d,this.donorRatingCalculator=h,this.donorRatingRecommendationCalculator=m,this.designationsFetcher=p}create(e,t){const n=Vx[e],i={name:e,flow:t,checkoutService:this.checkoutService,checkoutState:this.checkoutState,debug:this.debug,intl:this.intl,subscriptionPeriodLabelsService:this.subscriptionPeriodLabelsService,currencyService:this.currencyService,experiments:this.experiments};return Yx.isDonateScreenController(n,e)?new n(Object.assign(Object.assign({},i),{adaptivePreDonationUpsellSuggestionsService:this.adaptivePreDonationUpsellSuggestionsService}),this.upsellAggregate,this.feeCoveringSuggestions,this.donorRatingCalculator,this.donorRatingRecommendationCalculator,this.designationsFetcher):Yx.isPaymentOptionScreenController(n,e)?new n(Object.assign(Object.assign({},i),{paymentService:this.paymentService,paymentOptionListService:new Kx})):Yx.isAUBecsScreenController(n,e)||Yx.isSepaConversionScreenController(n,e)?new n(Object.assign(Object.assign({},i),{paymentService:this.paymentService})):Yx.isDoubleDonationScreenController(n,e)||Yx.isGiftAidScreenController(n,e)?new n(Object.assign({},i)):Yx.isUSBankAccountScreenController(n,e)?new n(i):Yx.isUSBankAccountDonateOptionsScreenController(n,e)?new n(this.paymentService,i):Yx.isUSBankAccountConfirmationScreenController(n,e)||Yx.isUSBankAccountVerificationGuideScreenController(n,e)?new n(i):Yx.isIDEALConfirmationScreenController(n,e)?new n(Object.assign(Object.assign({},i),{paymentService:this.paymentService})):Yx.isUKBacsScreenController(n,e)||Yx.isUKBacsConfirmationScreenController(n,e)?new n(Object.assign({},i)):Yx.isUpsellScreenController(n,e)?new n(this.upsellAggregate,this.feeCoveringSuggestions,i):Yx.isThankYouScreenController(n,e)?new n(this.redirectApi,this.sharingApi,Object.assign(Object.assign({},i),{suggestionsService:this.suggestionsService})):Yx.isMailingAddressScreenController(n,e)?new n(this.countriesService,this.mailingAddressCustomization,i):Yx.isBlockedScreenController(n,e)||Yx.isCommunicationConsentScreenController(n,e)?new n(i):Yx.isPrivacyScreenController(n,e)||Yx.isFastTrackPaymentOptionsScreenController(n,e)?new n(Object.assign(Object.assign({},i),{paymentService:this.paymentService})):new n(i)}get redirectApi(){return this.checkoutService.redirectApi}get sharingApi(){return this._sharingApi||(this._sharingApi=__({checkoutType:this.checkoutService.checkoutConfiguration.checkoutType,isShowcase:this.checkoutService.checkoutConfiguration.infrastructureParams.showcase,campaignConfig:this.checkoutService.campaignConfig})),this._sharingApi}get countriesService(){return this._countriesService||(this._countriesService=(0,$N.g)({intl:this.intl,excludePalestineFromCountriesList:this.checkoutService.checkoutConfiguration.featureConfig.excludePalestineFromCountriesList})),this._countriesService}get upsellAggregate(){return this._upsellAggregate||(this._upsellAggregate=new px(this.checkoutState,this.intl)),this._upsellAggregate}}function zx(e){return Object.values(e).filter((e=>e.enabled)).length>1}class Wx{constructor(e){this.deviceExperimentsSettings=e}getSuggestions(e){if(this.shouldSortSuggestions)return this.sortSuggestionsBasedOnCompanyExclusions(e)}getAmount(){if(this.shouldHideDefaultAmount)return this.showAmountBasedOnCompanyExclusions()}get shouldSortSuggestions(){return"ascSort"in this.deviceExperimentsSettings}get shouldHideDefaultAmount(){return"hasDefault"in this.deviceExperimentsSettings}sortSuggestionsBasedOnCompanyExclusions(e){return cb([...e],this.deviceExperimentsSettings.ascSort?_i.ASC:_i.DESC)}showAmountBasedOnCompanyExclusions(){if(!this.deviceExperimentsSettings.hasDefault)return null}}class $x{static convertMinAmount(e,t,n,i){let s=Math.max(t,e.convert(70,"USD",n));s=e.convert(s,n,i);const a=e.getDigits(i);return Math.ceil(s/Math.pow(10,a))*Math.pow(10,a)}constructor(e,t,n){var i,s;this.currencyService=t,this.suggestionsService=n,this.forceNullAmountWidgets=["FUNFXDEZPWX"],this.defaultData=Object.assign(Object.assign({},e),{disableCompanyExclusionLogic:{amounts:Boolean(null===(i=e.disableCompanyExclusionLogic)||void 0===i?void 0:i.amounts),suggestions:Boolean(null===(s=e.disableCompanyExclusionLogic)||void 0===s?void 0:s.suggestions)}}),this.currentData={frequency:this.defaultData.frequency,amount:this.defaultData.defaultAmount,minAmount:this.defaultData.minAmount||0,suggestions:this.defaultData.amountOptions,hintsAmounts:this.defaultData.hintsAmounts,isDonationEndDateActive:!this.defaultData.isExternalDonationEndDateShown||!!this.defaultData.isExternalDonationEndDateActive},this.setupCurrentData()}get amount(){return this.currentData.amount}get minAmount(){return this.currentData.minAmount}get isValidAmount(){return null!==this.currentData.amount&&this.currentData.amount>=this.currentData.minAmount}get suggestions(){return this.currentData.suggestions}get hintsAmounts(){return this.currentData.hintsAmounts||null}get currency(){return this.defaultData.currentCurrency}get currencyDigits(){return this.currencyService.getDigits(this.defaultData.currentCurrency)}get isDonationEndDateActive(){return this.currentData.isDonationEndDateActive}setDonationEndDateActive(e){this.currentData.isDonationEndDateActive=e}setAmount(e){this.currentData.amount=e,this.defaultData.disableAmountAI=!0}setCurrency(e,t){this.defaultData.previousCurrency=this.defaultData.currentCurrency,this.defaultData.currentCurrency=e,this.defaultData.disableAmountAI=!0,this.resetMinAmount(),t||(this.resetAmount(),this.applyNAIAmount(),this.applyRoundAmount()),this.resetSuggestions(),this.applyNAISuggestions(),this.applyRoundSuggestions(),this.resetHints(),this.applyRoundHints(),this.applyCompanyExclusions(),this.applyWidgetExclusions()}setSuggestionsAndDisableAi(e,t){this.defaultData.amountOptions=t,this.currentData.suggestions=e,this.defaultData.disableSuggestionsAI=!0}get needNAIAmount(){return Boolean(this.defaultData.aiEnabled&&!this.defaultData.showcase&&this.defaultData.trend&&!this.defaultData.disableAmountAI)}get needNAISuggestions(){return Boolean(this.defaultData.aiEnabled&&!this.defaultData.disableSuggestionsAI&&!this.defaultData.showcase&&this.defaultData.trend)}get suggestionsMultiplier(){return!this.defaultData.isLauncher&&this.defaultData.aiEnabled&&!this.defaultData.disableSuggestionsAI&&this.deviceExperimentsSettings.multiplySuggestions?1.4:1}get deviceExperimentsSettings(){return this.defaultData.experimentsSettings[this.defaultData.isMobile?D.Jy.MOBILE:D.Jy.DESKTOP]}setupCurrentData(){this.resetMinAmount(),this.resetAmount(),this.applyNAIAmount(),this.applyRoundAmount(),this.resetSuggestions(),this.applyNAISuggestions(),this.applyRoundSuggestions(),this.resetHints(),this.applyRoundHints(),this.applyCompanyExclusions(),this.applyWidgetExclusions()}resetMinAmount(){this.currentData.minAmount=$x.convertMinAmount(this.currencyService,this.defaultData.minAmount||0,this.defaultData.defaultCurrency,this.defaultData.currentCurrency)}resetAmount(){null!==this.currentData.amount&&(this.currentData.amount=this.currencyService.convert(this.currentData.amount,this.defaultData.previousCurrency,this.defaultData.currentCurrency,this.defaultData.aiEnabled&&!this.defaultData.disableAmountAI,this.defaultData.countryCode))}applyNAIAmount(){const e=this.defaultData.trend[this.currentData.frequency];if(null!==this.currentData.amount&&this.needNAIAmount){let t=this.currencyService.convert(e,this.defaultData.defaultCurrency,this.defaultData.currentCurrency,!1,this.defaultData.countryCode);GI(this.currentData.amount,e)>10&&(t=this.currentData.amount-this.currentData.amount/10),this.currentData.amount=e?t:ob(this.defaultData.xFactor,this.currentData.amount)}}applyRoundAmount(){null!==this.currentData.amount&&(this.needNAIAmount||this.defaultData.previousCurrency!==this.defaultData.currentCurrency)&&(this.currentData.amount=this.suggestionsService.beautify(this.currentData.amount,this.defaultData.currentCurrency,this.currentData.minAmount))}resetSuggestions(){this.currentData.suggestions=this.defaultData.amountOptions.map((e=>this.currencyService.convert(e,this.defaultData.defaultCurrency,this.defaultData.currentCurrency,this.defaultData.aiEnabled&&!this.defaultData.disableSuggestionsAI,this.defaultData.countryCode)))}applyNAISuggestions(){this.needNAISuggestions&&(this.currentData.suggestions=rb(this.defaultData.xFactor,this.currentData.suggestions))}applyRoundSuggestions(){if(this.needNAISuggestions||this.defaultData.currentCurrency!==this.defaultData.defaultCurrency){const e=this.currentData.suggestions.map((e=>{const t=e*this.suggestionsMultiplier;return this.defaultData.aiEnabled?Math.max(t,this.currentData.minAmount):t}));this.currentData.suggestions=this.suggestionsService.beautify(e,this.defaultData.currentCurrency,this.currentData.minAmount)}}resetHints(){this.defaultData.hintsAmounts&&(this.currentData.hintsAmounts=this.defaultData.hintsAmounts.map((e=>this.currencyService.convert(e,this.defaultData.defaultCurrency,this.defaultData.currentCurrency,!1,this.defaultData.countryCode))))}applyRoundHints(){this.currentData.hintsAmounts&&this.defaultData.currentCurrency!==this.defaultData.defaultCurrency&&(this.currentData.hintsAmounts=this.suggestionsService.beautify(this.currentData.hintsAmounts,this.defaultData.currentCurrency,this.currentData.minAmount))}applyCompanyExclusions(){const e=this.defaultData.disableCompanyExclusionLogic.amounts||this.defaultData.disableCompanyExclusionLogic.suggestions;if(!this.defaultData.aiEnabled&&!e)return;const t=new Wx(this.deviceExperimentsSettings),n=t.getSuggestions(this.currentData.suggestions);if(!n||this.defaultData.disableCompanyExclusionLogic.suggestions||this.defaultData.disableSuggestionsAI||(this.currentData.suggestions=n),this.defaultData.disableAmountAI)return;const i=t.getAmount();null!==i||this.defaultData.disableCompanyExclusionLogic.amounts||(this.currentData.amount=i)}applyWidgetExclusions(){this.defaultData.widgetKey&&this.forceNullAmountWidgets.includes(this.defaultData.widgetKey)&&(this.currentData.amount=null)}}class Xx{static get frequencyOrder(){return En}static convertMinAmount(e,t,n,i){let s=Math.max(t,Xx.getMinInWidgetCurrency(e,n));s=e.convert(s,n,i);const a=e.getDigits(i);return Math.ceil(s/Math.pow(10,a))*Math.pow(10,a)}static getMinInWidgetCurrency(e,t){return e.convert(70,"USD",t)}constructor(e,t,n,i){if(this.exchequerCurrencyService=t,this.currencyService=n,this.suggestionsService=i,this.currentFrequency=W.ONCE,this.strategyMap=new Map,this._enabledFrequencies=[],this.frequencies=Object.keys(e.frequencies),this._enabledFrequencies=Object.entries(e.frequencies).filter((e=>{let[,t]=e;return t.enabled})).map((e=>{let[t]=e;return t})),this.initStrategies(e),e.forceDefaultAmount){const t=this.getCurrentCurrency();this.setCurrency(e.defaultCurrency),this.setAmounts(e.forceDefaultAmount),this.setCurrency(t)}}get enabledFrequencies(){return this._enabledFrequencies}get isDonationEndDateActive(){return this.getStrategy(this.currentFrequency).isDonationEndDateActive}getCurrentFrequency(){return this.currentFrequency}getCurrentAmount(){return this.getStrategy(this.currentFrequency).amount}getCurrentCurrency(){return this.getStrategy(this.currentFrequency).currency}getAllAmounts(){const e={};for(const t of this.frequencies)e[t]=this.getStrategy(t).amount;return e}getAllMinAmounts(){const e={};for(const t of this.frequencies)e[t]=this.getStrategy(t).minAmount;return e}getAllSuggestions(){const e={};for(const t of this.frequencies)e[t]=this.getStrategy(t).suggestions;return e}setDonationEndDateActive(e){this.getStrategy(this.currentFrequency).setDonationEndDateActive(e)}setSuggestionsAndDisableAi(e,t,n){this.getStrategy(n).setSuggestionsAndDisableAi(e,t)}getAllHintsAmounts(){const e={};for(const t of this.frequencies)e[t]=this.getStrategy(t).hintsAmounts;return e}getGuessedCurrency(){return this.exchequerCurrencyService.guessedCurrency}getGuessedCurrenciesList(){return this.exchequerCurrencyService.guessedCurrenciesList}setFrequency(e){return this.currentFrequency=e,this}setAmount(e){return this.getStrategy(this.currentFrequency).setAmount(e),this}setAmountForFrequency(e,t){return this.getStrategy(t).setAmount(e),this}setAmounts(e){return this.strategyMap.forEach((t=>{t.setAmount(e)})),this}setCurrency(e,t){return this.strategyMap.forEach((n=>{n.setCurrency(e,t)})),this}getHighestFrequency(){if(1===this.enabledFrequencies.length)return this.enabledFrequencies[0];let e=this.enabledFrequencies[0];for(const t of this.enabledFrequencies)Xx.frequencyOrder[t]>Xx.frequencyOrder[e]&&(e=t);return e}getLowestFrequency(){if(1===this.enabledFrequencies.length)return this.enabledFrequencies[0];let e=this.enabledFrequencies[0];for(const t of this.enabledFrequencies)Xx.frequencyOrder[t]<Xx.frequencyOrder[e]&&(e=t);return e}getCurrentState(){const e=this.getStrategy(this.currentFrequency);return{frequency:this.currentFrequency,amount:e.amount,minAmount:e.minAmount,isValidAmount:e.isValidAmount,suggestions:e.suggestions,hintsAmounts:e.hintsAmounts,currency:e.currency,currencyDigits:e.currencyDigits,guessedCurrenciesList:this.exchequerCurrencyService.guessedCurrenciesList,guessedCurrency:this.exchequerCurrencyService.guessedCurrency}}getStrategy(e){const t=this.strategyMap.get(e);if(!t)throw new Error(`Strategy for frequency ${e} is not defined`);return t}initStrategies(e){for(const t of this.frequencies){e.frequencies[t].default&&(this.currentFrequency=t);const n=yn[t].map(((n,i)=>e.frequencies[t].amountOptions[i]||n)),i=e.hintsAmounts&&e.hintsAmounts[t]||null,s=this.shouldDisableAi(t,e);this.strategyMap.set(t,new $x({widgetKey:e.widgetKey,countryCode:e.countryCode,defaultCurrency:e.defaultCurrency,isMobile:e.isMobile,isLauncher:e.isLauncher,showcase:e.showcase,aiEnabled:e.aiEnabled&&!s,disableAmountAI:e.disableAmountAI,disableSuggestionsAI:e.disableSuggestionsAI,trend:e.trend,xFactor:e.xFactor,disableCompanyExclusionLogic:e.disableCompanyExclusionLogic,experimentsSettings:e.experimentsSettings,frequency:t,minAmount:e.frequencies[t].minAmount,defaultAmount:e.frequencies[t].defaultAmount,amountOptions:n,currentCurrency:this.exchequerCurrencyService.defaultCurrentCurrency,previousCurrency:this.exchequerCurrencyService.defaultPreviousCurrency,isExternalDonationEndDateShown:e.isExternalDonationEndDateShown,isExternalDonationEndDateActive:e.isExternalDonationEndDateActive,hintsAmounts:i},this.currencyService,this.suggestionsService))}}shouldDisableAi(e,t){return"FUNGQSSKQKB"===t.widgetKey&&t.isMobile&&e===W.ONCE}}class Qx extends mk{constructor(e){super({checkoutConfiguration:e.checkoutConfiguration,isValidScreen:e.isValidScreen}),this.options=e}getInitialScreen(){return(0,c.sH)(this,void 0,void 0,(function*(){if(this.isCompanyBlocked())return oc.BLOCKED;const e=this.getInitialScreenFromHistory()||this.getCustomExternalParamsScreen();return void 0!==e?e:this.canSkipDefaultScreen()?(yield this.shouldShowPreDonationUpsell())?ve.UPSELL:oc.PRIVACY:ve.DONATE}))}get isAmountsValid(){return function(e,t,n){var i,s,a,o,r,c,l;let u=null===(s=null===(i=e.state)||void 0===i?void 0:i.donation)||void 0===s?void 0:s.frequency;const d=!zx(t.frequencies);!u&&d&&(u=null!==(a=ci.getDefaultFrequencyWithOverride(t.frequencies,null))&&void 0!==a?a:void 0);const h=null===(r=null===(o=e.state)||void 0===o?void 0:o.donation)||void 0===r?void 0:r.amount,m=(null===(l=null===(c=e.state)||void 0===c?void 0:c.donation)||void 0===l?void 0:l.currency)||t.defaultCurrency;if(!u||!h||!m)return!1;const p=t.frequencies[u].minAmount,g=Xx.convertMinAmount(n,p||0,t.defaultCurrency,m),y=h.toString().length>(0,Ki.Bm)(m);return!(h<g||y)}(this.options.checkoutConfiguration.external,this.options.checkoutConfiguration.campaign.config,this.options.currencyService)}get preDonationUpsellDataPoint(){return this.options.checkoutState.preDonationUpsell.dataPoint}get screenDataCollectExperiment(){return this.options.experiments.get(be.UPSELL_SCREEN_DATA_COLLECT_CHECKOUT_EXPERIMENT)}get amountsOnUpsellV2Experiment(){return this.options.experiments.get(be.AMOUNTS_ON_UPSELL_V_2_CHECKOUT_EXPERIMENT)}isCompanyBlocked(){return Boolean(this.options.checkoutConfiguration.company.blockedAt)}canSkipDefaultScreen(){return function(e){var t,n,i,s,a,o,r,c,l,u,d,h;const m=e.campaign.config,p=e.external,g=m.tribute.show,y=null===(n=null===(t=p.state)||void 0===t?void 0:t.tribute)||void 0===n?void 0:n.inHonorOf,f=null===(s=null===(i=p.state)||void 0===i?void 0:i.tribute)||void 0===s?void 0:s.type,E=m.showComment,S=e.canModifyAmount,v=e.canModifyDesignation,A=m.frequencies,C=m.displayGoal!==ki.WITHOUT&&m.goals.length>1;if(Se()){if(null===(a=e.multipleDesignations)||void 0===a?void 0:a.enabled)return!1;const{displayGoal:t,defaultGoals:n,frequencies:i}=e.campaign.config;if(t===ki.SELECT){const e=function(e,t){if(t)return t;for(const[t,n]of Object.entries(e))if(n.default)return t;return W.ONCE}(i,null===(r=null===(o=p.state)||void 0===o?void 0:o.donation)||void 0===r?void 0:r.frequency)===W.ONCE,t=n.some((t=>function(e,t){if(e.default===ui.ALL)return!0;if(t){if(e.default===ui.ONE_TIME)return!0}else if(e.default===ui.RECURRING)return!0;return!1}(t,e)));if(!t)return!1}}const P=!!(null===(l=null===(c=p.state)||void 0===c?void 0:c.donation)||void 0===l?void 0:l.isEndDateSelected),N=[Ae.DONATION_FORM,Ae.SIMPLE_FORM,Ae.BUTTON_GROUP,Ae.IMPACT_SLIDER],b=e.element.type;if(!b)return!1;const D=b===Ae.DONATION_FORM,T=S&&!N.includes(b),_=v&&!D,k=zx(A),O=!D&&k,I=!!y&&f!==ts.NONE,x=!y&&f===ts.NONE,w=D?I||x:!g,R=(null===(d=null===(u=p.state)||void 0===u?void 0:u.donation)||void 0===d?void 0:d.frequency)&&(null===(h=A[p.state.donation.frequency])||void 0===h?void 0:h.hasEndDate)&&!P;return w&&!E&&!(_&&C)&&!T&&!O&&!R}(this.options.checkoutConfiguration)&&this.isAmountsValid}shouldShowPreDonationUpsell(){return(0,c.sH)(this,void 0,void 0,(function*(){return this.tryExposeUpsellScreenDataCollectExperiment(),this.tryExposeAmountsOnUpsellV2Experiment(),this.options.adaptivePreDonationUpsellSuggestionsService.resetSuggestionApplication(),(yield this.options.adaptivePreDonationUpsellSuggestionsService.tryFetchSuggestion())&&this.options.adaptivePreDonationUpsellSuggestionsService.tryApplySuggestion(),this.preDonationUpsellDataPoint.isEnabled}))}tryExposeUpsellScreenDataCollectExperiment(){this.screenDataCollectExperiment.tryExpose({isAdaptiveSuggestionEnabled:this.options.checkoutConfiguration.preDonationUpsellSettings.isAdaptiveSuggestionEnabled,isPreDonationUpsellDataPointEnabled:this.preDonationUpsellDataPoint.isEnabled,upsellFrequency:this.preDonationUpsellDataPoint.upsellFrequency})}tryExposeAmountsOnUpsellV2Experiment(){this.amountsOnUpsellV2Experiment.tryExpose({isAdaptiveSuggestionEnabled:this.options.checkoutConfiguration.preDonationUpsellSettings.isAdaptiveSuggestionEnabled,isPreDonationUpsellDataPointEnabled:this.preDonationUpsellDataPoint.isEnabled,upsellFrequency:this.preDonationUpsellDataPoint.upsellFrequency})}}class Zx{constructor(e,t){this.checkoutState=e,this.params=t}get(e,t){switch(this.checkoutState.paymentOptions.paymentOptionsDataPoint.clientPaymentMethod){case iT._h.UK_BACS:return this.params.screenSet.ukBacsConfirmation;case iT._h.US_BANK_ACCOUNT:return this.params.screenSet.usBankAccountConfirmation;case iT._h.IDEAL:return this.params.screenSet.idealConfirmation;case iT._h.CARD:return this.params.screenSet.paymentOptions;case iT._h.AU_BECS:return this.params.screenSet.auBecs;case iT._h.SEPA:return this.getScreenForSepaPaymentMethod(e,t);case iT._h.ACSS:case iT._h.APPLE_PAY:case iT._h.GOOGLE_PAY:case iT._h.VENMO:case iT._h.PAYPAL:default:return this.params.screenSet.paymentOptions}}getScreenForSepaPaymentMethod(e,t){const n=e===this.params.screenSet.sepa,i=e===this.params.screenSet.mailingAddress,s=t.includes(this.params.screenSet.mailingAddress),a=this.checkoutState.mailingAddress.dataPoint.isRequired;return n&&a&&!s||i&&a?this.params.screenSet.mailingAddress:this.params.screenSet.sepa}}const Jx=(e,t,n)=>{if(e.paymentOptions.paymentOptionsDataPoint.clientPaymentMethod!==t)throw new Error(`Can not move to ${n} screen if "clientPaymentMethod" is not "${t}"`);return!1},ew=e=>e.every(Boolean),tw=e=>e.some(Boolean),nw=(e,t)=>{var n;return ew([!t.has(ve.DOUBLE),e.doubleTheDonation.dataPoint.isEnabled,tw([e.process.dataPoint.isCompleted(),ew([e.doubleTheDonation.dataPoint.isIntegrationEnabled,(null!==(n=e.donation.dataPoint.amountInUSD)&&void 0!==n?n:0)<2500])])])},iw=(e,t)=>ew([!t.has(ve.GIFT_AID),e.giftAid.dataPoint.isEnabled]),sw=(e,t)=>ew([!t.has(oc.MAILING_ADDRESS),e.mailingAddress.dataPoint.isEnabled,tw([ew([e.process.dataPoint.isCompleted(),!e.mailingAddress.dataPoint.isRequired]),ew([!e.process.dataPoint.isCompleted(),e.mailingAddress.dataPoint.isRequired])])]),aw=e=>ew([!e.process.dataPoint.isCompleted()]),ow=e=>ew([!e.process.dataPoint.isCompleted(),e.paymentOptions.paymentOptionsDataPoint.clientPaymentMethod===D._h.UK_BACS]),rw=e=>ew([!e.process.dataPoint.isCompleted(),e.paymentOptions.paymentOptionsDataPoint.clientPaymentMethod===D._h.US_BANK_ACCOUNT,e.paymentOptions.paymentOptionsDataPoint.selectedPaymentOption===Hu.US_BANK_ACCOUNT_VERIFICATION]),cw=e=>ew([!e.process.dataPoint.isCompleted(),e.paymentOptions.paymentOptionsDataPoint.clientPaymentMethod===D._h.US_BANK_ACCOUNT]),lw=e=>ew([e.questions.dataPoint.isEnabled]),uw=(e,t)=>ew([e.questions.dataPoint.isForwardBlueQuestionScreenEnabled,!t.has(oc.MANDATORY_QUESTIONS)]),dw=(e,t)=>ew([!t.has(ve.COMMUNICATION_CONSENT),e.communicationConsent.dataPoint.isCustomizedConsentEnabled,tw([!e.mailingAddress.dataPoint.isEnabled,t.has(oc.MAILING_ADDRESS)])]),hw=e=>ew([!e.process.dataPoint.isCompleted(),e.paymentOptions.paymentOptionsDataPoint.isFastTrackFlow]),mw=ve.DONATE;function pw(){return{initial:()=>mw,screens:{[ve.DONATE]:{next:(e,t)=>{switch(!0){case(e=>ew([e.comment.dataPoint.isEnabled,e.comment.dataPoint.isRequired]))(e):return oc.COMMENT;case(e=>ew([e.preDonationUpsell.dataPoint.isEnabled]))(e):return ve.UPSELL;default:return oc.PRIVACY}}},[oc.COMMENT]:{next:()=>ve.DONATE},[ve.UPSELL]:{next:()=>oc.PRIVACY},[oc.PRIVACY]:{next:(e,t)=>{switch(!0){case nw(e,t):return ve.DOUBLE;case iw(e,t):return ve.GIFT_AID;case hw(e):return ve.FAST_TRACK_PAYMENT_OPTIONS;case sw(e,t):return oc.MAILING_ADDRESS;case uw(e,t):return oc.MANDATORY_QUESTIONS;default:return ve.PAYMENT_OPTIONS}}},[ve.DOUBLE]:{next:(e,t)=>{switch(!0){case iw(e,t):return ve.GIFT_AID;case hw(e):return ve.FAST_TRACK_PAYMENT_OPTIONS;case sw(e,t):return oc.MAILING_ADDRESS;case uw(e,t):return oc.MANDATORY_QUESTIONS;case aw(e):return ve.PAYMENT_OPTIONS;default:return gw(e,t)}}},[ve.GIFT_AID]:{next:(e,t)=>{switch(!0){case hw(e):return ve.FAST_TRACK_PAYMENT_OPTIONS;case sw(e,t):return oc.MAILING_ADDRESS;case uw(e,t):return oc.MANDATORY_QUESTIONS;default:return ve.PAYMENT_OPTIONS}}},[oc.MAILING_ADDRESS]:{mandatory:e=>(e=>ew([e.process.dataPoint.hasMailingAddressError()]))(e),next:(e,t)=>{switch(!0){case ow(e):return ve.UK_BACS_CONFIRMATION;case cw(e):return ve.US_BANK_ACCOUNT_CONFIRMATION;case(e=>ew([!e.process.dataPoint.isCompleted(),e.paymentOptions.paymentOptionsDataPoint.clientPaymentMethod===D._h.IDEAL]))(e):return ve.IDEAL_CONFIRMATION;case uw(e,t):return oc.MANDATORY_QUESTIONS;case aw(e):return ve.PAYMENT_OPTIONS;default:return gw(e,t)}}},[ve.PAYMENT_OPTIONS]:{mandatory:e=>(e=>tw([ew([e.process.dataPoint.hasPaymentError(),e.paymentOptions.paymentOptionsDataPoint.clientPaymentMethod===D._h.PAYPAL]),ew([e.process.dataPoint.hasPaymentError(),e.paymentOptions.paymentOptionsDataPoint.clientPaymentMethod===D._h.CARD]),ew([e.process.dataPoint.hasPaymentError(),e.paymentOptions.paymentOptionsDataPoint.clientPaymentMethod===D._h.US_BANK_ACCOUNT,e.paymentOptions.paymentOptionsDataPoint.selectedPaymentOption===Hu.US_BANK_ACCOUNT_INSTANT,!e.paymentOptions.usBankAccountDataPoint.usBankAccountVerificationSetup.isInstantAndAbav])]))(e),next:(e,t)=>{switch((e=>{const t=e.paymentOptions.paymentOptionsDataPoint.clientPaymentMethod,n=e.paymentOptions.paymentOptionsDataPoint.selectedPaymentOption;if(!t&&!n)throw new Error('"clientPaymentMethod" and "selectedPaymentOption" can not be null at the same time')})(e),!0){case(e=>ew([!e.process.dataPoint.isCompleted(),e.paymentOptions.paymentOptionsDataPoint.clientPaymentMethod===D._h.AU_BECS]))(e):return ve.AU_BECS;case(e=>ew([!e.process.dataPoint.isCompleted(),e.paymentOptions.paymentOptionsDataPoint.clientPaymentMethod===D._h.UK_BACS]))(e):return ve.UK_BACS;case(e=>ew([!e.process.dataPoint.isCompleted(),e.paymentOptions.paymentOptionsDataPoint.clientPaymentMethod===D._h.SEPA]))(e):return ve.SEPA;case(e=>ew([!e.process.dataPoint.isCompleted(),e.paymentOptions.paymentOptionsDataPoint.clientPaymentMethod===D._h.IDEAL]))(e):return ve.IDEAL_CONFIRMATION;case(e=>ew([!e.process.dataPoint.isCompleted(),e.paymentOptions.paymentOptionsDataPoint.clientPaymentMethod===D._h.US_BANK_ACCOUNT,tw([e.paymentOptions.paymentOptionsDataPoint.selectedPaymentOption===Hu.US_BANK_ACCOUNT,ew([e.paymentOptions.paymentOptionsDataPoint.selectedPaymentOption===Hu.US_BANK_ACCOUNT_INSTANT,e.process.dataPoint.hasPaymentError()])])]))(e):return ve.US_BANK_ACCOUNT_DONATE_OPTIONS;case rw(e):return ve.US_BANK_ACCOUNT;case cw(e):return ve.US_BANK_ACCOUNT_CONFIRMATION;default:return gw(e,t)}}},[ve.FAST_TRACK_PAYMENT_OPTIONS]:{next:(e,t)=>function(e,t){switch(!0){case dw(e,t):return ve.COMMUNICATION_CONSENT;case nw(e,t):return ve.DOUBLE;case lw(e,t):return oc.QUESTIONS;default:return oc.THANK_YOU}}(e,t)},[ve.AU_BECS]:{guard:e=>Jx(e,D._h.AU_BECS,ve.AU_BECS),next:(e,t)=>gw(e,t)},[ve.SEPA]:{guard:e=>Jx(e,D._h.SEPA,ve.SEPA),next:(e,t)=>!0===(!e.process.dataPoint.isCompleted()&&sw(e,t))?oc.MAILING_ADDRESS:gw(e,t)},[ve.UK_BACS]:{mandatory:e=>(e=>ew([e.process.dataPoint.hasPaymentError(),e.paymentOptions.paymentOptionsDataPoint.clientPaymentMethod===D._h.UK_BACS]))(e),guard:e=>Jx(e,D._h.UK_BACS,ve.UK_BACS),next:(e,t)=>{switch(!0){case sw(e,t):return oc.MAILING_ADDRESS;case ow(e):return ve.UK_BACS_CONFIRMATION;default:return gw(e,t)}}},[ve.UK_BACS_CONFIRMATION]:{guard:e=>Jx(e,D._h.UK_BACS,ve.UK_BACS_CONFIRMATION),next:(e,t)=>gw(e,t)},[ve.IDEAL_CONFIRMATION]:{guard:e=>Jx(e,D._h.IDEAL,ve.IDEAL_CONFIRMATION),next:(e,t)=>gw(e,t)},[ve.US_BANK_ACCOUNT_DONATE_OPTIONS]:{mandatory:e=>(e=>ew([e.process.dataPoint.hasPaymentError(),e.paymentOptions.paymentOptionsDataPoint.clientPaymentMethod===D._h.US_BANK_ACCOUNT,e.paymentOptions.paymentOptionsDataPoint.selectedPaymentOption===Hu.US_BANK_ACCOUNT_INSTANT,e.paymentOptions.usBankAccountDataPoint.usBankAccountVerificationSetup.isInstantAndAbav]))(e),guard:e=>Jx(e,D._h.US_BANK_ACCOUNT,ve.US_BANK_ACCOUNT_DONATE_OPTIONS),next:(e,t)=>!0===rw(e)?ve.US_BANK_ACCOUNT:ve.US_BANK_ACCOUNT_CONFIRMATION},[ve.US_BANK_ACCOUNT]:{mandatory:e=>(e=>ew([e.process.dataPoint.hasPaymentError(),e.paymentOptions.paymentOptionsDataPoint.clientPaymentMethod===D._h.US_BANK_ACCOUNT,e.paymentOptions.paymentOptionsDataPoint.selectedPaymentOption===Hu.US_BANK_ACCOUNT_VERIFICATION]))(e),guard:e=>Jx(e,D._h.US_BANK_ACCOUNT,ve.US_BANK_ACCOUNT),next:()=>ve.US_BANK_ACCOUNT_CONFIRMATION},[ve.US_BANK_ACCOUNT_CONFIRMATION]:{guard:e=>Jx(e,D._h.US_BANK_ACCOUNT,ve.US_BANK_ACCOUNT_CONFIRMATION),next:(e,t)=>!0===(e=>ew([e.process.dataPoint.isCompleted(),e.paymentOptions.paymentOptionsDataPoint.clientPaymentMethod===D._h.US_BANK_ACCOUNT,e.paymentOptions.usBankAccountDataPoint.usBankAccountVerificationSetup.isMicroDepositOnly]))(e)?ve.US_BANK_ACCOUNT_VERIFICATION_GUIDE:gw(e,t)},[ve.US_BANK_ACCOUNT_VERIFICATION_GUIDE]:{guard:e=>Jx(e,D._h.US_BANK_ACCOUNT,ve.US_BANK_ACCOUNT_VERIFICATION_GUIDE),next:(e,t)=>gw(e,t)},[ve.COMMUNICATION_CONSENT]:{next:(e,t)=>gw(e,t)},[oc.MANDATORY_QUESTIONS]:{next:()=>ve.PAYMENT_OPTIONS},[oc.QUESTIONS]:{next:()=>oc.THANK_YOU},[oc.THANK_YOU]:{},[oc.BLOCKED]:{},[oc.REMIND_ME]:{guard:e=>!e.remindMeLater.dataPoint.isEnabled,final:!0}}}}function gw(e,t){switch(!0){case dw(e,t):return ve.COMMUNICATION_CONSENT;case nw(e,t):return ve.DOUBLE;case sw(e,t):return oc.MAILING_ADDRESS;case lw(e,t):return oc.QUESTIONS;default:return oc.THANK_YOU}}const yw=yk([ve.US_BANK_ACCOUNT,ve.US_BANK_ACCOUNT_DONATE_OPTIONS,ve.US_BANK_ACCOUNT_CONFIRMATION,ve.US_BANK_ACCOUNT_VERIFICATION_GUIDE,ve.AU_BECS,ve.DONATE,ve.DOUBLE,ve.GIFT_AID,ve.PAYMENT_OPTIONS,ve.SEPA,ve.IDEAL_CONFIRMATION,ve.UK_BACS,ve.UK_BACS_CONFIRMATION,ve.UPSELL,ve.COMMUNICATION_CONSENT,ve.FAST_TRACK_PAYMENT_OPTIONS,oc.MANDATORY_QUESTIONS,oc.QUESTIONS,oc.COMMENT,oc.MAILING_ADDRESS,oc.PRIVACY,oc.THANK_YOU,oc.REMIND_ME,oc.BLOCKED]),fw={[Ft.MONEY]:function(e){let{checkoutConfiguration:t,intl:n,tracker:i,sessionTokenService:a,debug:o,currencyService:r,suggestionsService:c,targetWindow:l,globalWindow:u,sentry:d,paymentMethods:h,stripeLoadingPromise:m,applePayStripeLoadingPromise:p,subscriptionPeriodLabelsService:g,userSession:y,addressService:f,eventEmitter:E,checkoutAPIBridge:S,experiments:v,logger:A,stripe:C,requestService:P,mailingAddressModule:N,paymentMethodAvailabilityManagerRepository:b,mailingAddressCustomization:D,adaptiveDefaultFrequencyFetcher:T,adaptiveAmountPresetsFetcher:_,params:k}=e;var O,I,x,w;const R=new eN(CT.SESSION_UPDATE_DEBOUNCE),M=new II(i,t,a,d,R,P),L=new BT(M,r,c),U=new YI(M),F=function(e,t,n,i,s,a,o,r,c,l,u){const d=new gT(e,t,i,n,l,s,a,r,{flowType:Ft.MONEY},u),h=new yT(d),m=function(e,t,n,i,s,a){const o=function(e){return new KO(e)}(a),r=function(e){const t=new zO(e);return new $O(e,t)}(a),c=function(e,t,n,i){const s=new uI(e,t,i),a=new dI(e,t,n,i);return new hI(e,i,s,a)}(e,t,n,a),l=function(e,t){const n=new XO(e,t),i=new QO(t);return new ZO(t,n,i)}(e,a),u=function(e,t){const n=new JO(e,t);return new eI(t,n)}(e,a),d=function(e,t,n,i,s){const a=new tI(e,t,n,i,s);return new nI(s,a)}(e,t,i,s,a),h=function(e,t,n){const i=new oI(e,n),s=new rI(e,t,n);return new cI(n,i,s)}(e,n,a),m=function(e,t,n){const i=new iI(e,t,n);return new sI(n,i)}(e,s,a),p=function(e,t){return new VO(e,t)}(e,a),g=function(e,t){const n=new mI(e,t);return new pI(t,n)}(e,a);return new RO(o,r,c,l,u,d,h,m,p,g)}(e,t,n,o,c,h),p=[h,m],g=new SI(...p),y=new fI(...p),f=new EI(...p),E=new kI(...p),S=new bI(...p),v=new DI(...p),A=new AI(...p),C=new PI(...p),P=new yI(...p),N=new CI(...p),b=new gI(...p),D=new NI(...p),T=new vI(...p),_=new OI(...p),k=new _I(...p),O=new TI(...p);return new cN(g,y,f,E,S,D,v,C,A,P,N,b,T,_,k,O,m)}(t,r,c,f,y,M,N,D,b,n,L),j=new FI(F,t,M),B=new Zx(F,{screenSet:{usBankAccountConfirmation:ve.US_BANK_ACCOUNT_CONFIRMATION,ukBacsConfirmation:ve.UK_BACS_CONFIRMATION,idealConfirmation:ve.IDEAL_CONFIRMATION,mailingAddress:oc.MAILING_ADDRESS,auBecs:ve.AU_BECS,sepa:ve.SEPA,paymentOptions:ve.PAYMENT_OPTIONS}}),G=WT(t.campaign.config),q=new FT(M),H=new KI(M),V=function(e,t){return new zI(e,t,{screens:{firstScreen:WI,unrestrictedExitScreens:nx,finalUnavailableScreens:sx,mobileExitScreens:ix,alwaysRenderedScreens:XI,screensWithoutTributeBadge:QI,mobileScreensWithoutAskTitle:ax,mobileScreensWithAskText:ZI,mobileScreensWithoutFaqLinks:ox,mobileScreensWithoutAskPage:rx,screensWithoutAskOverlay:JI,canNotGoBackScreens:$I,conditionallyShowCloseButtonScreens:tx,alwaysShowCloseButtonScreens:ex}})}(G,F),K=v.get(be.UPSELL_AMOUNTS_SUGGESTION_MODAL_EXPERIMENT),Y=v.get(be.UPSELL_SCREEN_DATA_COLLECT_CHECKOUT_EXPERIMENT),z=v.get(be.AMOUNTS_ON_UPSELL_V_2_CHECKOUT_EXPERIMENT),W=function(e){let{sessionAPI:t,checkoutConfiguration:n,checkoutState:i,currencyService:s,suggestionsService:a,tracker:o,v1:r,v2:c}=e;var l,u,d;const h={checkoutConfiguration:n,checkoutState:i,currencyService:s,suggestionsService:a,tracker:o,v1:r,v2:c};if(null==c?void 0:c.enabled){const e=new _O(t);return new CO(Object.assign(Object.assign({},h),{adaptivePreDonationUpsellSuggestionsFetcher:e,useShowUpsell:null===(l=null==c?void 0:c.useShowUpsell)||void 0===l||l,useAmounts:null===(u=null==c?void 0:c.useAmounts)||void 0===u||u}))}const m=new bO(t);return new AO(Object.assign(Object.assign({},h),{adaptivePreDonationUpsellSuggestionsFetcher:m,shouldRequestUpsellAmounts:null!==(d=null==r?void 0:r.shouldRequestUpsellAmounts)&&void 0!==d&&d}))}({sessionAPI:M,checkoutConfiguration:t,checkoutState:F,currencyService:r,suggestionsService:c,tracker:i,v1:{shouldRequestUpsellAmounts:K.isTestGroup},v2:{enabled:Y.isTestGroup||z.isTestGroup,useShowUpsell:Y.isTestGroup||z.isFirstTestGroup||z.isThirdTestGroup,useAmounts:Y.isTestGroup||z.isFirstTestGroup||z.isSecondTestGroup}}),$=new Qx({checkoutState:F,checkoutConfiguration:t,currencyService:r,isValidScreen:yw,adaptivePreDonationUpsellSuggestionsService:W,experiments:v}),X=new iO(d,n,b,{stripe:{elementStyles:C.elementStyles,elementClasses:C.elementClasses}}),Q=new VI(t,F,X,M,j,r,n,h,l,m,p,{stripe:{elementsOptions:C.elementsOptions},clientId:i.clientId}),Z=new GT(u,t,r,F),J=new fO(M),ee=null===(O=i.page)||void 0===O?void 0:O.toObject(),te=new vO(F,t,i,J,r,c,{clientDevicePixelRatio:null==ee?void 0:ee.clientDevicePixelRatio,clientDeviceMemory:null==ee?void 0:ee.clientDeviceMemory,clientHardwareConcurrency:null==ee?void 0:ee.clientHardwareConcurrency,clientBatteryLevel:null==ee?void 0:ee.clientBatteryLevel,clientConnectionDownlink:null==ee?void 0:ee.clientConnectionDownlink,clientConnectionType:null==ee?void 0:ee.clientConnectionType,clientDoNotTrack:null==ee?void 0:ee.clientDoNotTrack}),ne=new rk(t,F,j,M,Q,V,i,r,n,l,d,X,B,E,S,o,v,q,H,A,Z,L,U,c,te,{screenSet:{thankYou:oc.THANK_YOU}}),ie=new uO(M),se=v.get(be.SMART_COVERING_FEE_CHECKOUT_V_4_EXPERIMENT),ae=new pO(t,F,i,ie,r,{clientBatteryLevel:null==ee?void 0:ee.clientBatteryLevel,clientDevicePixelRatio:null==ee?void 0:ee.clientDevicePixelRatio,clientDeviceMemory:null==ee?void 0:ee.clientDeviceMemory,clientHardwareConcurrency:null==ee?void 0:ee.clientHardwareConcurrency,clientConnectionDownlink:null==ee?void 0:ee.clientConnectionDownlink,clientConnectionType:null==ee?void 0:ee.clientConnectionType,clientDoNotTrack:null==ee?void 0:ee.clientDoNotTrack,version:se.isTestGroup?mO.V4:mO.V3,isAdaptiveLogicEnabled:!0});if(!T)throw new Error("adaptiveDefaultFrequencyFetcher is required");const oe=new BI(t.company.donorRating,r),re=new qI({donorRating:null!==(x=null===(I=t.company.donorRating)||void 0===I?void 0:I[Bt.TEST_2])&&void 0!==x?x:{},currencyService:r}),ce=iN(t,F,s,null===(w=null==k?void 0:k.pendingRequests)||void 0===w?void 0:w.goals),le=QP(new Yx(ne,F,Q,n,o,g,D,r,c,v,W,ae,oe,re,ce),pw(),F),ue=new rO(t,r,F,i,T,{clientDevicePixelRatio:null==ee?void 0:ee.clientDevicePixelRatio,clientDeviceMemory:null==ee?void 0:ee.clientDeviceMemory,clientHardwareConcurrency:null==ee?void 0:ee.clientHardwareConcurrency,clientBatteryLevel:null==ee?void 0:ee.clientBatteryLevel,clientConnectionDownlink:null==ee?void 0:ee.clientConnectionDownlink,clientConnectionType:null==ee?void 0:ee.clientConnectionType});if(!_)throw new Error("adaptiveAmountPresetsFetcher is required");const de=new aO(ne,F,i,t,r,c,_),he=new gO(ue,de,W),me=new vk,pe=new jI(r,F,V,me,t,a,{checkoutOpenTimestamp:i.checkoutOpenTimestamp,checkoutLocale:i.clientLocale,funEmbedRelease:k.funEmbedRelease}),ge=((e,t,n,i,s,a,o)=>{const r=new OO(e,t),c=new oN(e,t,r),l=new xO(n),u=new IO(e,t,i,s,a),d=new wO(e,l,u),h=new kO(o);return new aN({entryParamsApplier:c,restoreParamsApplier:d,adaptiveParamsApplier:h})})(t,F,M,j,a,$,he);return{checkoutService:ne,checkoutState:F,formFlow:le,initialScreenDecider:$,trackerCheckoutEventService:pe,adaptiveSuggestionsService:he,designationsFetcher:ce,externalParamsApplier:ge}},[Ft.CRYPTO]:function(e){let{checkoutConfiguration:t,intl:n,tracker:i,sessionTokenService:a,debug:o,currencyService:r,suggestionsService:c,targetWindow:l,globalWindow:u,sentry:d,subscriptionPeriodLabelsService:h,userSession:m,addressService:p,eventEmitter:g,checkoutAPIBridge:y,experiments:f,logger:E,requestService:S,mailingAddressModule:v,paymentMethodAvailabilityManagerRepository:A,mailingAddressCustomization:C,params:P}=e;var N;const b=new eN(CT.SESSION_UPDATE_DEBOUNCE),D=new PT(i,t,a,d,b,S),T=function(e,t,n,i,s,a,o,r,c,l,u){const d=new gT(e,t,i,n,l,s,a,r,{flowType:Ft.CRYPTO},u),h=new yT(d),m=function(e,t,n,i,s){const a=function(e){return new yN(e)}(s),o=function(e,t,n,i,s){const a=new fN(e,t,n,i,s);return new EN(s,a)}(e,t,n,i,s),r=function(e,t){const n=new vN(e,t);return new CN(t,n)}(e,s);return new mN(a,o,r)}(e,t,o,c,h),p=[h,m],g=new MN(...p),y=new kN(...p),f=new IN(...p),E=new wN(...p),S=new UN(...p),v=new DN(...p),A=new jN(...p),C=new _N(...p),P=new HN(...p),N=new zN(...p),b=new KN(...p),D=new GN(...p);return new PN(g,y,f,E,S,v,A,C,P,N,b,D,m)}(t,r,c,p,m,D,v,C,A,n,new BT(D,r,c)),_=new DT(T,t,D),k=new fT(T,{screenSet:{mailingAddress:oc.MAILING_ADDRESS,privacy:oc.PRIVACY}}),O=WT(t.campaign.config),I=new FT(D),x=function(e,t){return new XT(e,t,{screens:{firstScreen:o_,unrestrictedExitScreens:m_,mobileExitScreens:f_,alwaysRenderedScreens:E_,screensWithoutTributeBadge:r_,mobileScreensWithoutAskTitle:y_,mobileScreensWithAskText:c_,mobileScreensWithoutFaqLinks:p_,mobileScreensWithoutAskPage:g_,screensWithoutAskOverlay:l_,canNotGoBackScreens:h_,alwaysShowCloseButtonScreens:u_,conditionallyShowCloseButtonScreens:d_}})}(O,T),w=new GT(u,t,r,T),R=new dN(t,T,x,_,D,i,r,n,l,d,k,g,y,o,f,I,E,w,{screenSet:{thankYou:oc.THANK_YOU}}),M=QP(new hk(R,T,n,o,r,h,C,f),{initial:()=>gk,screens:{[yl.CRYPTO_CURRENCY]:{next:e=>e.comment.dataPoint.isRequired?oc.COMMENT:oc.PRIVACY},[oc.COMMENT]:{next:()=>yl.CRYPTO_CURRENCY},[oc.PRIVACY]:{next:e=>e.mailingAddress.dataPoint.isEnabled?oc.MAILING_ADDRESS:e.questions.dataPoint.isForwardBlueQuestionScreenEnabled?oc.MANDATORY_QUESTIONS:yl.CRYPTO_WALLET},[oc.MAILING_ADDRESS]:{next:e=>e.questions.dataPoint.isForwardBlueQuestionScreenEnabled?oc.MANDATORY_QUESTIONS:yl.CRYPTO_WALLET},[yl.CRYPTO_WALLET]:{next:e=>e.questions.dataPoint.isEnabled?oc.QUESTIONS:oc.THANK_YOU},[oc.MANDATORY_QUESTIONS]:{next:()=>yl.CRYPTO_WALLET},[oc.QUESTIONS]:{next:()=>oc.THANK_YOU},[oc.THANK_YOU]:{},[oc.BLOCKED]:{}}},T),L=iN(t,T,s,null===(N=null==P?void 0:P.pendingRequests)||void 0===N?void 0:N.goals),U=new pk({checkoutConfiguration:t,isValidScreen:fk}),F=new vk,j=new UT(r,T,x,F,t,a,{checkoutOpenTimestamp:i.checkoutOpenTimestamp,checkoutLocale:i.clientLocale,funEmbedRelease:P.funEmbedRelease}),B=((e,t)=>{const n=new sN(e,t),i=new oN(e,t,n);return new aN({entryParamsApplier:i,restoreParamsApplier:null,adaptiveParamsApplier:null})})(t,T);return{checkoutService:R,checkoutState:T,formFlow:M,initialScreenDecider:U,trackerCheckoutEventService:j,adaptiveSuggestionsService:null,designationsFetcher:L,externalParamsApplier:B}}};function Ew(e,t,i,s,a,o,r){return(0,c.sH)(this,void 0,void 0,(function*(){var l,h,m;const p=t.createInstance("Checkout");p.log("checkoutCreateParams",o);const g=yield KP(o,r),v=E("#root",g),C=S(g),P=null===(l=o.infrastructureQueryParams)||void 0===l?void 0:l._fundraiseup_country;if(!o.livemode&&P){const e=yield function(e){return(0,c.sH)(this,void 0,void 0,(function*(){return function(e,t){const n=e[t];return{location:{countryCode:t,city:"TEST_PANEL",country:"TEST_PANEL"},langCurrencies:n||["USD"],countryCurrencies:n||["USD"]}}((yield Promise.resolve().then(n.t.bind(n,4601,19))).default,e)}))}(P);o.resolvedConfig.config.currencies.countryCurrencies=e.countryCurrencies,o.resolvedConfig.config.currencies.langCurrencies=e.langCurrencies,o.resolvedConfig.user.address.countryCode=P}(null===(h=o.infrastructureQueryParams)||void 0===h?void 0:h.checkoutIntent)&&(o.externalParams.intent=function(e){var t,n,i,s,a,o,r,c,l,u,d,h,m,p;if(e)try{const g=JSON.parse(function(e){try{return Buffer.from(e,"base64").toString()}catch(t){return atob(e)}}(e));return{flowType:g.flowType,donation:g.donation?{amount:null===(t=g.donation)||void 0===t?void 0:t.amount,currency:null===(n=g.donation)||void 0===n?void 0:n.currency,recurring:null===(i=g.donation)||void 0===i?void 0:i.recurring,frequency:null===(s=g.donation)||void 0===s?void 0:s.frequency,selectedHintId:null===(a=g.donation)||void 0===a?void 0:a.selectedHintId}:void 0,supporter:g.supporter?{firstName:null===(o=g.supporter)||void 0===o?void 0:o.firstName,lastName:null===(r=g.supporter)||void 0===r?void 0:r.lastName,email:null===(c=g.supporter)||void 0===c?void 0:c.email}:void 0,campaign:g.campaign?{id:g.campaign.id}:void 0,element:g.element?{key:null===(l=g.element)||void 0===l?void 0:l.key,type:null===(u=g.element)||void 0===u?void 0:u.type}:void 0,comment:g.comment,tribute:g.tribute,checkoutSettings:g.checkoutSettings?{designation:null===(d=g.checkoutSettings)||void 0===d?void 0:d.designation,customFields:null===(h=g.checkoutSettings)||void 0===h?void 0:h.customFields,modifyAmount:null===(m=g.checkoutSettings)||void 0===m?void 0:m.modifyAmount,modifyDesignation:null===(p=g.checkoutSettings)||void 0===p?void 0:p.modifyDesignation}:void 0,fundraisingPage:g.fundraisingPage?{key:g.fundraisingPage.key,customerKey:g.fundraisingPage.customerKey}:void 0,feeCovered:g.feeCovered}}catch(e){return}}(o.infrastructureQueryParams.checkoutIntent));const N=new y.A,b=yield g.waitUntilFontsLoaded(),D=new br(e,p,i,N,C.target,C.global,o,fw,r,a,b),T=new wP(v,g,N,D.sentryInstance,p,D);s.on(d.CHECKOUT_OPEN,(()=>{g.onShow()}));const _=new f(C.global),k=new A(T,D,_);return yield D.run(),k.initialize(),g.configure({locale:D.intl.locale,styles:yield YP(D.intl.language),localizedTitle:D.intl.translate("iframe.title")}),yield T.onHide((e=>{k.destroy(e),p.log("Closed")})).open(),_.hideAll(),p.log("Opened"),D.logger.checkoutOpen({key:D.checkoutConfiguration.campaign.key,name:D.checkoutConfiguration.campaign.name},D.checkoutAPIBridge.getOpenParams()),o.steplessCheckoutExperimentVariant&&D.trackerCheckout.trackCheckoutCustomEvent({type:u.EXPERIMENT_TEST_GROUP_EXPOSED,data:{experimentId:Ie[be.STEPLESS_MOBILE_CHECKOUT_EXPERIMENT],variantName:o.steplessCheckoutExperimentVariant,exclusion:null!==(m=o.steplessCheckoutExperimentExcluded)&&void 0!==m&&m}}),k}))}var Sw=n(7954);class vw{constructor(e){this.errorsStack=[],this.sentry=null,e.forceOff||(e.sentry?this.sentry=e.sentry:Promise.all([n.e(472),n.e(326)]).then(n.bind(n,261)).then((t=>{this.sentry=t.initSentry(e,this.errorsStack),this.errorsStack=[]})))}captureError(e,t){if(!this.sentry)return this.errorsStack.push(e),void console.error(e);if(e instanceof Error)return this.sentry.captureException(e,t),void console.error(e);if(this.isErrorLike(e)){const n=new Error(e.message||"Unknown error like");return n.name=e.name,n.stack=e.stack,this.sentry.captureException(n,t),void console.error(e)}const n=new Error("Non error exception");if(t&&"object"==typeof t&&"setExtra"in t)return t.setExtra("nonError",e),this.sentry.captureException(n,t),void console.error(e);if(t&&"function"==typeof t)return this.sentry.captureException(n,(n=>{const i=t(n);return i.setExtra("nonError",e),i})),void console.error(e);const i=t||{};t=Object.assign(Object.assign({},i),{extra:Object.assign(Object.assign({},(null==i?void 0:i.extra)||{}),{nonError:e})}),this.sentry.captureException(n,t),console.error(e)}getSentryInstance(){return{captureException:(e,t)=>this.captureError(e,t),getCurrentScope:()=>this.sentry?this.sentry.getCurrentScope():null}}isErrorLike(e){return e instanceof Error||"object"==typeof e&&null!==e&&"name"in e&&"message"in e}}class Aw extends A{constructor(e,t,n,i,s,a,o,r,c,l){super(e,t),this.checkoutUI=e,this.embedTracker=n,this.debug=i,this.keysKeeper=s,this.targetWindow=a,this.globalWindow=o,this.params=r,this.sentry=c,this.funSessionStorage=l}get questionsScreenPageCount(){return this.checkoutCore.flowManager.questionsScreenPageCount}update(e){return(0,c.sH)(this,void 0,void 0,(function*(){this.checkoutCore.dispose(),this.removeStripeIframes(this.globalWindow.document),this.removeStripeIframes(this.targetWindow.document);const t=new br(this.embedTracker,this.debug,this.keysKeeper,new y.A,this.targetWindow,this.globalWindow,Object.assign(Object.assign({},this.params),{resolvedConfig:this.convertShowcaseConfigToCheckoutConfig(e),isMobile:e.isMobile,localeCode:e.localeCode||""}),fw,this.sentry,this.funSessionStorage),n=this.isFlowTypeChanged(t);this.checkoutCore=t,yield t.run({initialScreen:e.initialScreen,localeCode:e.localeCode||t.checkoutConfiguration.campaign.config.localization.defaultLocale}),yield this.checkoutUI.replaceCore(this.checkoutCore,{forceRender:n,showcaseContext:e.showcaseContext}),this.updateIframeHtmlClass(e.isMobile)}))}removeStripeIframes(e){e.querySelectorAll('iframe[name*="privateStripe"]').forEach((e=>{e.remove()}))}convertShowcaseConfigToCheckoutConfig(e){return function(e,t){const n={applicationFees:{money:200,crypto:200},coverFees:{custom:!1,amount:30,percent:100},stripeFee:{percent:100,fixed:30,currency:"USD"}},i=Object.assign({},e,{campaign:Object.assign(Object.assign({},e.widget),{recentDonations:null,totalRecentDonations:null,classification:{emotionalType:Zn.NEUTRAL},config:Object.assign(Object.assign({},e.widget.config),{experimentsSettings:{desktop:{},mobile:{}},trend:{once:0,daily:0,weekly:0,biweekly:0,every4weeks:0,monthly:0,bimonthly:0,quarterly:0,semiannual:0,annual:0}})}),config:Object.assign({},e.serverConfig),goals:[],aiSuggestions:[],fundraisingPage:null,user:{address:Object.assign(Object.assign({},e.user.address),{region:""})},company:Object.assign(Object.assign(Object.assign(Object.assign({},void 0),e.company),n),{parentCompanyConfig:Object.assign({},n),donorRating:{control:{},test1:{},test2:{}}})});return i}(e)}isFlowTypeChanged(e){return this.checkoutCore.checkoutConfiguration.defaultFlowType!==e.checkoutConfiguration.defaultFlowType}updateIframeHtmlClass(e){const t=this.targetWindow.document.querySelector("html");e?null==t||t.classList.remove("desktop-view"):null==t||t.classList.add("desktop-view")}}class Cw extends wP{replaceCore(e,t){return(0,c.sH)(this,void 0,void 0,(function*(){this.checkoutCore=e,(null==t?void 0:t.forceRender)?yield this.forceRender():(yield this.configure(),yield this.render(null==t?void 0:t.showcaseContext),yield this.checkoutCore.flowManager.restart())}))}configure(){return(0,c.sH)(this,void 0,void 0,(function*(){this.iframe.configure({locale:this.checkoutCore.intl.locale,styles:yield YP(this.checkoutCore.intl.language),showcase:!0})}))}forceRender(){return(0,c.sH)(this,void 0,void 0,(function*(){this.regenerateKey(),yield this.render(),this.show()}))}}const Pw=(e,t,n,i,s,a,o)=>(0,c.sH)(void 0,void 0,void 0,(function*(){const r=function(e){return function(e){const t=[/^https?:\/\/translate\.googleusercontent\.com/i,/^file:\/\/\//,/^https?:\/\/craigchurchministries\.org/i,/^https?:\/\/heartwoodhaven\.org/i,/^https?:\/\/wordpress-506039-2071925\.cloudwaysapps\.com/i];window.FUN_EXPERIMENTAL_SENTRY||t.push(/^https?:\/\/.*\.?mozilla\.org/i);const n="SQUARESPACE_ROLLUPS"in window||"Squarespace"in window,i=t.some((e=>e.test(window.location.href))),s=window.Sentry,a=window.FUN_DASHBOARD;return new vw({env:e.env,uri:e.uri,mainDomain:e.mainDomain,version:e.version,forceOff:!a&&(i||n||!!s),sentry:a&&s?s:void 0,isBrowserSupported:e.isBrowserSupported,isBrowserSupportedVersion:e.isBrowserSupportedVersion,scope:e.scope})}({uri:e.integrations.sentryUri,version:e.embedVersion,mainDomain:e.mainDomain,env:e.env,isBrowserSupported:e.browserData.isCommonBrowser,isBrowserSupportedVersion:e.browserData.isSupported,scope:Sw.b1.CHECKOUT}).getSentryInstance()}(a);try{if(a.showcase){const i=yield function(e,t,n,i,s,a,o){return(0,c.sH)(this,void 0,void 0,(function*(){const r=t.createInstance("ShowcaseCheckout");r.log("checkoutCreateParams",i);const c=yield KP(i,s),l=E("#root",c),u=S(c),d=new y.A,h=new br(e,r,n,d,u.target,u.global,i,fw,s,a),m=new Cw(l,c,d,h.sentryInstance,r,h),p=new Aw(m,h,e,r,n,u.target,u.global,i,s,a);yield h.run({initialScreen:i.initialScreen,localeCode:h.checkoutConfiguration.campaign.config.localization.defaultLocale});const g={locale:h.intl.locale};return c.configure(g),yield m.open({abortController:o}),r.log("Opened"),p}))}(e,t,n,a,r,s,o);return i}return yield Ew(e,t,n,i,s,a,r)}catch(e){throw e instanceof l||r.captureException(e),e}}));(window.FUN_SERVICE_CONTAINER||(window.FUN_SERVICE_CONTAINER=new class{constructor(){this.providers=new Map,this.cache=new Map}get(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=this.providers.get(e);if(!n)throw new Error(`${String(e)} is not provided`);if(t&&this.cache.has(e))return this.cache.get(e);const i=n();return t?(this.cache.has(e)||this.cache.set(e,i),i):i}provide(e,t){return this.providers.has(e)?(console.warn(`${o.SERVICE_HAS_ALREADY_BEEN_PROVIDED} ${String(e)}`),this):(this.providers.set(e,t),this)}}),window.FUN_SERVICE_CONTAINER).provide(r.CHECKOUT,(()=>Pw))},9369:function(e,t,n){"use strict";n.d(t,{R:function(){return i}});const i=(0,n(2155).createContext)(null)},9453:function(e,t,n){"use strict";n.d(t,{t:function(){return a}});var i=n(2155),s=n(9369);function a(){const e=(0,i.useContext)(s.R);if(!e)throw new Error("IntlService is not provided");return e}},8453:function(e,t,n){"use strict";n.d(t,{O:function(){return s}});var i=n(4295);const s=[i.D.EN_US,i.D.EN_GB,i.D.EN_CA,i.D.FR_CA,i.D.FR_FR,i.D.ES,i.D.NL,i.D.NO,i.D.DE,i.D.FI_FI,i.D.SV,i.D.IT,i.D.PT_PT,i.D.PT_BR,i.D.AR_001,i.D.ZH_CN,i.D.ZH_TW,i.D.JA,i.D.KO,i.D.HU,i.D.DA,i.D.ES_US,i.D.PL_PL,i.D.RU_RU]},2532:function(e,t,n){"use strict";n.d(t,{ZD:function(){return h},Qk:function(){return r},iJ:function(){return d},N_:function(){return u},q1:function(){return l}}),n(8453);var i=n(4295);i.D.AR_001;const s=[n(8899).L.AR],a=[i.D.AR_001];var o=n(893);function r(e){return e.split("-")[0]}const c={"&amp;":"&"};function l(e){let t=e;for(const a in c)Object.prototype.hasOwnProperty.call(c,a)&&e.includes(a)&&(n=t,i=a,s=c[a],t=n.replace(new RegExp(i,"g"),s));var n,i,s;return t}function u(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!function(e){return a.includes(e)}(e)?o.p.LTR:o.p.RTL}function d(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!function(e){return s.includes(e)}(e)?o.p.LTR:o.p.RTL}function h(e){const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return e.replace(/[&<>"']/g,(e=>t[e]))}},8899:function(e,t,n){"use strict";var i;n.d(t,{L:function(){return i}}),function(e){e.EN="en",e.ES="es",e.FR="fr",e.NL="nl",e.NO="no",e.DE="de",e.FI="fi",e.AR="ar",e.SV="sv",e.IT="it",e.PT="pt",e.ZH="zh",e.JA="ja",e.KO="ko",e.HU="hu",e.DA="da",e.RU="ru",e.PL="pl"}(i||(i={}))},893:function(e,t,n){"use strict";var i;n.d(t,{p:function(){return i}}),function(e){e.LTR="ltr",e.RTL="rtl"}(i||(i={}))},4295:function(e,t,n){"use strict";var i;n.d(t,{D:function(){return i}}),function(e){e.EN_US="en-US",e.EN_GB="en-GB",e.EN_CA="en-CA",e.FR_CA="fr-CA",e.FR_FR="fr-FR",e.ES="es",e.NL="nl",e.NO="no",e.DE="de",e.FI_FI="fi-FI",e.AR_001="ar-001",e.SV="sv",e.IT="it",e.PT_PT="pt-PT",e.PT_BR="pt-BR",e.ZH_CN="zh-CN",e.ZH_TW="zh-TW",e.JA="ja",e.KO="ko",e.HU="hu",e.DA="da",e.RU_RU="ru-RU",e.ES_US="es-US",e.PL_PL="pl-PL"}(i||(i={}))},6706:function(e,t,n){"use strict";n.d(t,{S:function(){return C}});var i=n(8932),s=n(5723),a=n(1474),o=n(7645),r=n(1942),c=n(5284),l=n(5357),u=n.n(l),d=n(2155);const h=e=>({top:"bottom",right:"left",bottom:"top",left:"right"}[e]);var m,p,g,y;!function(e){e.CLICK="click",e.HOVER="hover",e.FOCUS="focus",e.MANUAL="manual"}(m||(m={})),function(e){e.WIDTH_175="175px",e.WIDTH_200="200px",e.WIDTH_220="220px",e.WIDTH_260="260px",e.WIDTH_280="280px",e.WIDTH_300="300px",e.WIDTH_360="360px",e.WIDTH_400="400px",e.NONE="none"}(p||(p={})),function(e){e.DEFAULT="default",e.DARK="dark",e.DANGER="danger"}(g||(g={})),function(e){e.DEFAULT="default",e.SM="sm"}(y||(y={}));const f={DEFAULT_PLACEMENT:"right",DEFAULT_OFFSET:10,DEFAULT_FLIP:{padding:5,fallbackAxisSideDirection:"start"},DEFAULT_SHIFT:{padding:5},DEFAULT_TRIGGER:m.HOVER,DEFAULT_SHOW_ARROW:!0,DEFAULT_HIDE_ON_SCROLL_EDGE_OFFSET:5,DEFAULT_VARIANT:g.DEFAULT,DEFAULT_SIZE:y.DEFAULT,MAX_WIDTH:p.WIDTH_200,DEFAULT_HAS_ANIMATION:!0,ANIMATION_DURATION_OPEN:150,ANIMATION_DURATION_CLOSE:100,ANIMATION_TRANSITION_OFFSET:"5px",ARROW_SIZE_DEFAULT:"12px",ARROW_SIZE_SM:"7px",ARROW_PADDING:16},E=(e,t)=>{let{arrowData:n,direction:i,size:a,dataTestId:o}=e;const r=a===y.SM?f.ARROW_SIZE_SM:f.ARROW_SIZE_DEFAULT;var c;const l=(c=r,Math.sqrt(2)*parseFloat(c)/2),u="bottom"===i||"left"===i?-1*l:l,d={width:r,height:r,transformOrigin:i,[h(i)]:`-${l}px`};return(null==n?void 0:n.x)&&(d.left=n.x+u/2),(null==n?void 0:n.y)&&(d.top=n.y+u/2),(0,s.jsx)("div",{ref:t,"data-testid":o,className:"ui-tooltip-arrow",style:d})},S=(0,d.forwardRef)(E),v=(e,t)=>{var{className:n,direction:a,variant:o,size:r,showArrow:l,children:u,floatingStyle:d,transitionStyle:h,arrowRef:m,context:p,dataTestId:g}=e,y=(0,i.Tt)(e,["className","direction","variant","size","showArrow","children","floatingStyle","transitionStyle","arrowRef","context","dataTestId"]);return(0,s.jsx)("div",Object.assign({ref:t,className:(0,c.A)(`ui-tooltip ui-tooltip-variant-${o} ui-tooltip-size-${r} ui-tooltip-${a}`,n),style:d,"data-testid":g},y,{children:(0,s.jsx)("div",{className:"ui-tooltip-body",style:h,children:u})}))},A=(0,d.forwardRef)(v),C=(0,d.forwardRef)(((e,t)=>{var n,l,{children:h,content:p,trigger:g=f.DEFAULT_TRIGGER,placement:y=f.DEFAULT_PLACEMENT,fallbackPlacements:E,offset:v=f.DEFAULT_OFFSET,shift:C=f.DEFAULT_SHIFT,flip:P=f.DEFAULT_FLIP,maxWidth:N=f.MAX_WIDTH,maxHeight:b,arrow:D=f.DEFAULT_SHOW_ARROW,arrowPadding:T=f.ARROW_PADDING,hasAnimation:_=f.DEFAULT_HAS_ANIMATION,hideOnScrollEdgeOffset:k=f.DEFAULT_HIDE_ON_SCROLL_EDGE_OFFSET,zIndex:O,hasPortal:I=!0,isInteractive:x=!1,shouldTrapFocusInside:w=!1,manualOpen:R,variant:M=f.DEFAULT_VARIANT,size:L=f.DEFAULT_SIZE,rootContainer:U,dataQa:F}=e,j=(0,i.Tt)(e,["children","content","trigger","placement","fallbackPlacements","offset","shift","flip","maxWidth","maxHeight","arrow","arrowPadding","hasAnimation","hideOnScrollEdgeOffset","zIndex","hasPortal","isInteractive","shouldTrapFocusInside","manualOpen","variant","size","rootContainer","dataQa"]);const B=(0,d.useRef)(null),[G,q]=(0,d.useState)(!1),H=G&&!!p||R,{context:V,refs:K,floatingStyles:Y,middlewareData:z,placement:W}=(0,a.we)({open:H,onOpenChange:q,placement:y,whileElementsMounted:o.ll,middleware:[(0,r.cY)(v),(0,r.BN)(C),(0,r.UU)(Object.assign(Object.assign({},P),{fallbackPlacements:E})),(0,r.UE)({element:B,padding:T}),(0,r.mG)(),(0,r.Ej)({apply(e){let{elements:t}=e;"none"===N?t.floating.style.maxWidth="calc(100vw - 40px)":N&&(t.floating.style.maxWidth=`min(${N}, calc(100vw - 40px))`)}}),(0,r.jD)({padding:k})]}),{delay:$}=(0,a.ck)(V),X=(0,a.It)(V,{role:"tooltip"}),Q=W.split("-")[0],Z=(0,a.s9)(V),J=(0,a.Mk)(V,{enabled:g===m.HOVER,handleClose:x?(0,a.iB)():void 0,delay:$}),ee=(0,a.kp)(V,{enabled:g===m.CLICK}),te=(0,a.iQ)(V,{enabled:u()([m.FOCUS,m.HOVER],g)}),{getReferenceProps:ne,getFloatingProps:ie}=(0,a.bv)([J,te,ee,Z,X]),{isMounted:se,styles:ae}=(0,a.DL)(V,{duration:_?{open:Number(f.ANIMATION_DURATION_OPEN),close:Number(f.ANIMATION_DURATION_CLOSE)}:{open:0,close:0},initial:e=>{let{side:t}=e;return{opacity:0,translate:{top:`0 ${f.ANIMATION_TRANSITION_OFFSET} 0`,bottom:`0 -${f.ANIMATION_TRANSITION_OFFSET} 0`,left:`${f.ANIMATION_TRANSITION_OFFSET} 0 0`,right:`-${f.ANIMATION_TRANSITION_OFFSET} 0 0`}[t]}},open:{opacity:1,translate:"0 0 0"}}),oe=(0,d.cloneElement)(h,Object.assign({ref:K.setReference,className:(0,c.A)(null===(n=h.props)||void 0===n?void 0:n.className)},ne({onClick:e=>{var t,n;null===(n=(t=h.props).onClick)||void 0===n||n.call(t,e)}}))),re=Object.assign(Object.assign(Object.assign({},Y),{visibility:(null===(l=z.hide)||void 0===l?void 0:l.referenceHidden)?"hidden":"visible"}),O&&{zIndex:O}),ce={maxHeight:b?`min(${b}, calc(100vh - 40px))`:"calc(100vh - 40px)"};(0,d.useImperativeHandle)(t,(()=>K.reference.current),[K.reference]);const le=(0,s.jsx)(a.s3,{context:V,initialFocus:-1,modal:!1,children:(0,s.jsxs)(A,Object.assign({dataTestId:"ui-tooltip-popup",ref:K.setFloating,direction:Q,variant:M,size:L,floatingStyle:re,transitionStyle:ae},ie(),j,{children:[D&&(0,s.jsx)(S,{ref:B,arrowData:z.arrow,direction:Q,size:L,dataTestId:"ui-tooltip-arrow"}),(0,s.jsx)("div",{className:"ui-tooltip-content","data-qa":F,style:ce,children:p})]}))});return(0,s.jsxs)(d.Fragment,{children:[oe,se&&(I?(0,s.jsx)(a.XF,{root:U,preserveTabOrder:!1,children:le}):le)]})}));C.displayName="UITooltip"},1688:function(e,t,n){"use strict";n.d(t,{g:function(){return o}});var i=n(8899);class s{constructor(e,t){this.intlService=e,this.params=t,this.countries=this.getInitialCountriesList()}getMailingAddressCountriesList(){return this.countries.map((e=>{let{countryName:t,countryCode:n}=e;return{countryName:t,countryCode:n}}))}getTelInputCountries(){return this.countries.filter((e=>"dialCode"in e)).map((e=>({name:e.countryName,iso2:e.countryCode,dialCode:e.dialCode,priority:e.priority||0,areaCodes:e.areaCodes||null})))}get language(){return this.intlService.language}getInitialCountriesList(){var e;let t=[{countryName:this.intlService.translate("countries.afghanistan")||"Afghanistan",countryCode:"AF",dialCode:"93"},{countryName:this.intlService.translate("countries.albania")||"Albania",countryCode:"AL",dialCode:"355"},{countryName:this.intlService.translate("countries.algeria")||"Algeria",countryCode:"DZ",dialCode:"213"},{countryName:this.intlService.translate("countries.andorra")||"Andorra",countryCode:"AD",dialCode:"376"},{countryName:this.intlService.translate("countries.angola")||"Angola",countryCode:"AO",dialCode:"244"},{countryName:this.intlService.translate("countries.anguilla")||"Anguilla",countryCode:"AI",dialCode:"1264"},{countryName:this.intlService.translate("countries.antiguaAndBarbuda")||"Antigua and Barbuda",countryCode:"AG",dialCode:"1268"},{countryName:this.intlService.translate("countries.argentina")||"Argentina",countryCode:"AR",dialCode:"54"},{countryName:this.intlService.translate("countries.armenia")||"Armenia",countryCode:"AM",dialCode:"374"},{countryName:this.intlService.translate("countries.aruba")||"Aruba",countryCode:"AW",dialCode:"297"},{countryName:this.intlService.translate("countries.australia")||"Australia",countryCode:"AU",dialCode:"61",priority:0},{countryName:this.intlService.translate("countries.austria")||"Austria",countryCode:"AT",dialCode:"43"},{countryName:this.intlService.translate("countries.alandIslands")||"Åland Islands",countryCode:"AX",dialCode:"358",priority:1},{countryName:this.intlService.translate("countries.azerbaijan")||"Azerbaijan",countryCode:"AZ",dialCode:"994"},{countryName:this.intlService.translate("countries.bahamas")||"Bahamas",countryCode:"BS",dialCode:"1242"},{countryName:this.intlService.translate("countries.bahrain")||"Bahrain",countryCode:"BH",dialCode:"973"},{countryName:this.intlService.translate("countries.bangladesh")||"Bangladesh",countryCode:"BD",dialCode:"880"},{countryName:this.intlService.translate("countries.barbados")||"Barbados",countryCode:"BB",dialCode:"1246"},{countryName:this.intlService.translate("countries.belarus")||"Belarus",countryCode:"BY",dialCode:"375"},{countryName:this.intlService.translate("countries.belgium")||"Belgium",countryCode:"BE",dialCode:"32"},{countryName:this.intlService.translate("countries.belize")||"Belize",countryCode:"BZ",dialCode:"501"},{countryName:this.intlService.translate("countries.benin")||"Benin",countryCode:"BJ",dialCode:"229"},{countryName:this.intlService.translate("countries.bermuda")||"Bermuda",countryCode:"BM",dialCode:"1441"},{countryName:this.intlService.translate("countries.bhutan")||"Bhutan",countryCode:"BT",dialCode:"975"},{countryName:this.intlService.translate("countries.bolivia")||"Bolivia",countryCode:"BO",dialCode:"591"},{countryName:this.intlService.translate("countries.bosniaAndHerzegovina")||"Bosnia and Herzegovina",countryCode:"BA",dialCode:"387"},{countryName:this.intlService.translate("countries.botswana")||"Botswana",countryCode:"BW",dialCode:"267"},{countryName:this.intlService.translate("countries.brazil")||"Brazil",countryCode:"BR",dialCode:"55"},{countryName:this.intlService.translate("countries.britishIndianOceanTerritory")||"British Indian Ocean Territory",countryCode:"IO",dialCode:"246"},{countryName:this.intlService.translate("countries.britishVirginIslands")||"British Virgin Islands",countryCode:"VG",dialCode:"1284"},{countryName:this.intlService.translate("countries.brunei")||"Brunei",countryCode:"BN",dialCode:"673"},{countryName:this.intlService.translate("countries.bulgaria")||"Bulgaria",countryCode:"BG",dialCode:"359"},{countryName:this.intlService.translate("countries.burkinaFaso")||"Burkina Faso",countryCode:"BF",dialCode:"226"},{countryName:this.intlService.translate("countries.burundi")||"Burundi",countryCode:"BI",dialCode:"257"},{countryName:this.intlService.translate("countries.cambodia")||"Cambodia",countryCode:"KH",dialCode:"855"},{countryName:this.intlService.translate("countries.cameroon")||"Cameroon",countryCode:"CM",dialCode:"237"},{countryName:this.intlService.translate("countries.canada")||"Canada",countryCode:"CA",dialCode:"1",priority:1,areaCodes:["204","226","236","249","250","289","306","343","365","387","403","416","418","431","437","438","450","506","514","519","548","579","581","587","604","613","639","647","672","705","709","742","778","780","782","807","819","825","867","873","902","905"]},{countryName:this.intlService.translate("countries.capeVerde")||"Cape Verde",countryCode:"CV",dialCode:"238"},{countryName:this.intlService.translate("countries.caribbeanNetherlands")||"Caribbean Netherlands",countryCode:"BQ",dialCode:"599",priority:1},{countryName:this.intlService.translate("countries.caymanIslands")||"Cayman Islands",countryCode:"KY",dialCode:"1345"},{countryName:this.intlService.translate("countries.centralAfricanRepublic")||"Central African Republic",countryCode:"CF",dialCode:"236"},{countryName:this.intlService.translate("countries.chad")||"Chad",countryCode:"TD",dialCode:"235"},{countryName:this.intlService.translate("countries.chile")||"Chile",countryCode:"CL",dialCode:"56"},{countryName:this.intlService.translate("countries.china")||"China",countryCode:"CN",dialCode:"86"},{countryName:this.intlService.translate("countries.christmasIsland")||"Christmas Island",countryCode:"CX",dialCode:"61",priority:2},{countryName:this.intlService.translate("countries.cocos")||"Cocos Islands",countryCode:"CC",dialCode:"61",priority:1},{countryName:this.intlService.translate("countries.colombia")||"Colombia",countryCode:"CO",dialCode:"57"},{countryName:this.intlService.translate("countries.comoros")||"Comoros",countryCode:"KM",dialCode:"269"},{countryName:this.intlService.translate("countries.congoDRC")||"Congo (DRC)",countryCode:"CD",dialCode:"243"},{countryName:this.intlService.translate("countries.congoRepublic")||"Congo (Republic)",countryCode:"CG",dialCode:"242"},{countryName:this.intlService.translate("countries.cookIslands")||"Cook Islands",countryCode:"CK",dialCode:"682"},{countryName:this.intlService.translate("countries.costaRica")||"Costa Rica",countryCode:"CR",dialCode:"506"},{countryName:this.intlService.translate("countries.coteDIvoire")||"Côte d’Ivoire",countryCode:"CI",dialCode:"225"},{countryName:this.intlService.translate("countries.croatia")||"Croatia",countryCode:"HR",dialCode:"385"},{countryName:this.intlService.translate("countries.cuba")||"Cuba",countryCode:"CU",dialCode:"53"},{countryName:this.intlService.translate("countries.curasao")||"Curaçao",countryCode:"CW",dialCode:"599",priority:0},{countryName:this.intlService.translate("countries.cyprus")||"Cyprus",countryCode:"CY",dialCode:"357"},{countryName:this.intlService.translate("countries.czechRepublic")||"Czech Republic",countryCode:"CZ",dialCode:"420"},{countryName:this.intlService.translate("countries.denmark")||"Denmark",countryCode:"DK",dialCode:"45"},{countryName:this.intlService.translate("countries.djibouti")||"Djibouti",countryCode:"DJ",dialCode:"253"},{countryName:this.intlService.translate("countries.dominica")||"Dominica",countryCode:"DM",dialCode:"1767"},{countryName:this.intlService.translate("countries.dominicanRepublic")||"Dominican Republic",countryCode:"DO",dialCode:"1",priority:2,areaCodes:["809","829","849"]},{countryName:this.intlService.translate("countries.ecuador")||"Ecuador",countryCode:"EC",dialCode:"593"},{countryName:this.intlService.translate("countries.egypt")||"Egypt",countryCode:"EG",dialCode:"20"},{countryName:this.intlService.translate("countries.elSalvador")||"El Salvador",countryCode:"SV",dialCode:"503"},{countryName:this.intlService.translate("countries.equatorialGuinea")||"Equatorial Guinea",countryCode:"GQ",dialCode:"240"},{countryName:this.intlService.translate("countries.eritrea")||"Eritrea",countryCode:"ER",dialCode:"291"},{countryName:this.intlService.translate("countries.estonia")||"Estonia",countryCode:"EE",dialCode:"372"},{countryName:this.intlService.translate("countries.ethiopia")||"Ethiopia",countryCode:"ET",dialCode:"251"},{countryName:this.intlService.translate("countries.falklandIslands")||"Falkland Islands",countryCode:"FK",dialCode:"500"},{countryName:this.intlService.translate("countries.faroeIslands")||"Faroe Islands",countryCode:"FO",dialCode:"298"},{countryName:this.intlService.translate("countries.fiji")||"Fiji",countryCode:"FJ",dialCode:"679"},{countryName:this.intlService.translate("countries.finland")||"Finland",countryCode:"FI",dialCode:"358",priority:0},{countryName:this.intlService.translate("countries.france")||"France",countryCode:"FR",dialCode:"33"},{countryName:this.intlService.translate("countries.frenchGuiana")||"French Guiana",countryCode:"GF",dialCode:"594"},{countryName:this.intlService.translate("countries.frenchPolynesia")||"French Polynesia",countryCode:"PF",dialCode:"689"},{countryCode:"TF",countryName:this.intlService.translate("countries.frenchSouthernTerritories")||"French Southern Territories"},{countryName:this.intlService.translate("countries.gabon")||"Gabon",countryCode:"GA",dialCode:"241"},{countryName:this.intlService.translate("countries.gambia")||"Gambia",countryCode:"GM",dialCode:"220"},{countryName:this.intlService.translate("countries.georgia")||"Georgia",countryCode:"GE",dialCode:"995"},{countryName:this.intlService.translate("countries.germany")||"Germany",countryCode:"DE",dialCode:"49"},{countryName:this.intlService.translate("countries.ghana")||"Ghana",countryCode:"GH",dialCode:"233"},{countryName:this.intlService.translate("countries.gibraltar")||"Gibraltar",countryCode:"GI",dialCode:"350"},{countryName:this.intlService.translate("countries.greece")||"Greece",countryCode:"GR",dialCode:"30"},{countryName:this.intlService.translate("countries.greenland")||"Greenland",countryCode:"GL",dialCode:"299"},{countryName:this.intlService.translate("countries.grenada")||"Grenada",countryCode:"GD",dialCode:"1473"},{countryName:this.intlService.translate("countries.guadeloupe")||"Guadeloupe",countryCode:"GP",dialCode:"590",priority:0},{countryName:this.intlService.translate("countries.guatemala")||"Guatemala",countryCode:"GT",dialCode:"502"},{countryName:this.intlService.translate("countries.guernsey")||"Guernsey",countryCode:"GG",dialCode:"44",priority:1},{countryName:this.intlService.translate("countries.guinea")||"Guinea",countryCode:"GN",dialCode:"224"},{countryName:this.intlService.translate("countries.guineaBissau")||"Guinea-Bissau",countryCode:"GW",dialCode:"245"},{countryName:this.intlService.translate("countries.guyana")||"Guyana",countryCode:"GY",dialCode:"592"},{countryName:this.intlService.translate("countries.haiti")||"Haiti",countryCode:"HT",dialCode:"509"},{countryName:this.intlService.translate("countries.honduras")||"Honduras",countryCode:"HN",dialCode:"504"},{countryName:this.intlService.translate("countries.hongKong")||"Hong Kong",countryCode:"HK",dialCode:"852"},{countryName:this.intlService.translate("countries.hungary")||"Hungary",countryCode:"HU",dialCode:"36"},{countryName:this.intlService.translate("countries.iceland")||"Iceland",countryCode:"IS",dialCode:"354"},{countryName:this.intlService.translate("countries.india")||"India",countryCode:"IN",dialCode:"91"},{countryName:this.intlService.translate("countries.indonesia")||"Indonesia",countryCode:"ID",dialCode:"62"},{countryName:this.intlService.translate("countries.iran")||"Iran",countryCode:"IR",dialCode:"98"},{countryName:this.intlService.translate("countries.iraq")||"Iraq",countryCode:"IQ",dialCode:"964"},{countryName:this.intlService.translate("countries.ireland")||"Ireland",countryCode:"IE",dialCode:"353"},{countryName:this.intlService.translate("countries.isleOfMan")||"Isle of Man",countryCode:"IM",dialCode:"44",priority:2},{countryName:this.intlService.translate("countries.israel")||"Israel",countryCode:"IL",dialCode:"972"},{countryName:this.intlService.translate("countries.italy")||"Italy",countryCode:"IT",dialCode:"39",priority:0},{countryName:this.intlService.translate("countries.jamaica")||"Jamaica",countryCode:"JM",dialCode:"1876"},{countryName:this.intlService.translate("countries.japan")||"Japan",countryCode:"JP",dialCode:"81"},{countryName:this.intlService.translate("countries.jersey")||"Jersey",countryCode:"JE",dialCode:"44",priority:3},{countryName:this.intlService.translate("countries.jordan")||"Jordan",countryCode:"JO",dialCode:"962"},{countryName:this.intlService.translate("countries.kazakhstan")||"Kazakhstan",countryCode:"KZ",dialCode:"7",priority:1},{countryName:this.intlService.translate("countries.kenya")||"Kenya",countryCode:"KE",dialCode:"254"},{countryName:this.intlService.translate("countries.kiribati")||"Kiribati",countryCode:"KI",dialCode:"686"},{countryName:this.intlService.translate("countries.kosovo")||"Kosovo",countryCode:"XK",dialCode:"383"},{countryName:this.intlService.translate("countries.kuwait")||"Kuwait",countryCode:"KW",dialCode:"965"},{countryName:this.intlService.translate("countries.kyrgyzstan")||"Kyrgyzstan",countryCode:"KG",dialCode:"996"},{countryName:this.intlService.translate("countries.laos")||"Laos",countryCode:"LA",dialCode:"856"},{countryName:this.intlService.translate("countries.latvia")||"Latvia",countryCode:"LV",dialCode:"371"},{countryName:this.intlService.translate("countries.lebanon")||"Lebanon",countryCode:"LB",dialCode:"961"},{countryName:this.intlService.translate("countries.lesotho")||"Lesotho",countryCode:"LS",dialCode:"266"},{countryName:this.intlService.translate("countries.liberia")||"Liberia",countryCode:"LR",dialCode:"231"},{countryName:this.intlService.translate("countries.libya")||"Libya",countryCode:"LY",dialCode:"218"},{countryName:this.intlService.translate("countries.liechtenstein")||"Liechtenstein",countryCode:"LI",dialCode:"423"},{countryName:this.intlService.translate("countries.lithuania")||"Lithuania",countryCode:"LT",dialCode:"370"},{countryName:this.intlService.translate("countries.luxembourg")||"Luxembourg",countryCode:"LU",dialCode:"352"},{countryName:this.intlService.translate("countries.macau")||"Macau",countryCode:"MO",dialCode:"853"},{countryName:this.intlService.translate("countries.macedonia")||"Macedonia (FYROM)",countryCode:"MK",dialCode:"389"},{countryName:this.intlService.translate("countries.madagascar")||"Madagascar",countryCode:"MG",dialCode:"261"},{countryName:this.intlService.translate("countries.malawi")||"Malawi",countryCode:"MW",dialCode:"265"},{countryName:this.intlService.translate("countries.malaysia")||"Malaysia",countryCode:"MY",dialCode:"60"},{countryName:this.intlService.translate("countries.maldives")||"Maldives",countryCode:"MV",dialCode:"960"},{countryName:this.intlService.translate("countries.mali")||"Mali",countryCode:"ML",dialCode:"223"},{countryName:this.intlService.translate("countries.malta")||"Malta",countryCode:"MT",dialCode:"356"},{countryName:this.intlService.translate("countries.marshallIslands")||"Marshall Islands",countryCode:"MH",dialCode:"692"},{countryName:this.intlService.translate("countries.martinique")||"Martinique",countryCode:"MQ",dialCode:"596"},{countryName:this.intlService.translate("countries.mauritania")||"Mauritania",countryCode:"MR",dialCode:"222"},{countryName:this.intlService.translate("countries.mauritius")||"Mauritius",countryCode:"MU",dialCode:"230"},{countryName:this.intlService.translate("countries.mayotte")||"Mayotte",countryCode:"YT",dialCode:"262",priority:1},{countryName:this.intlService.translate("countries.mexico")||"Mexico",countryCode:"MX",dialCode:"52"},{countryName:this.intlService.translate("countries.micronesia")||"Micronesia",countryCode:"FM",dialCode:"691"},{countryName:this.intlService.translate("countries.moldova")||"Moldova",countryCode:"MD",dialCode:"373"},{countryName:this.intlService.translate("countries.monaco")||"Monaco",countryCode:"MC",dialCode:"377"},{countryName:this.intlService.translate("countries.mongolia")||"Mongolia",countryCode:"MN",dialCode:"976"},{countryName:this.intlService.translate("countries.montenegro")||"Montenegro",countryCode:"ME",dialCode:"382"},{countryName:this.intlService.translate("countries.montserrat")||"Montserrat",countryCode:"MS",dialCode:"1664"},{countryName:this.intlService.translate("countries.morocco")||"Morocco",countryCode:"MA",dialCode:"212",priority:0},{countryName:this.intlService.translate("countries.mozambique")||"Mozambique",countryCode:"MZ",dialCode:"258"},{countryName:this.intlService.translate("countries.myanmar")||"Myanmar (Burma)",countryCode:"MM",dialCode:"95"},{countryName:this.intlService.translate("countries.namibia")||"Namibia",countryCode:"NA",dialCode:"264"},{countryName:this.intlService.translate("countries.nauru")||"Nauru",countryCode:"NR",dialCode:"674"},{countryName:this.intlService.translate("countries.nepal")||"Nepal",countryCode:"NP",dialCode:"977"},{countryName:this.intlService.translate("countries.netherlands")||"Netherlands",countryCode:"NL",dialCode:"31"},{countryName:this.intlService.translate("countries.newCaledonia")||"New Caledonia",countryCode:"NC",dialCode:"687"},{countryName:this.intlService.translate("countries.newZealand")||"New Zealand",countryCode:"NZ",dialCode:"64"},{countryName:this.intlService.translate("countries.nicaragua")||"Nicaragua",countryCode:"NI",dialCode:"505"},{countryName:this.intlService.translate("countries.niger")||"Niger",countryCode:"NE",dialCode:"227"},{countryName:this.intlService.translate("countries.nigeria")||"Nigeria",countryCode:"NG",dialCode:"234"},{countryName:this.intlService.translate("countries.niue")||"Niue",countryCode:"NU",dialCode:"683"},{countryName:this.intlService.translate("countries.norfolkIsland")||"Norfolk Island",countryCode:"NF",dialCode:"672"},{countryName:this.intlService.translate("countries.northKorea")||"North Korea",countryCode:"KP",dialCode:"850"},{countryName:this.intlService.translate("countries.norway")||"Norway",countryCode:"NO",dialCode:"47",priority:0},{countryName:this.intlService.translate("countries.oman")||"Oman",countryCode:"OM",dialCode:"968"},{countryName:this.intlService.translate("countries.pakistan")||"Pakistan",countryCode:"PK",dialCode:"92"},{countryName:this.intlService.translate("countries.palau")||"Palau",countryCode:"PW",dialCode:"680"},{countryName:this.intlService.translate("countries.palestine")||"Palestine",countryCode:"PS",dialCode:"970"},{countryName:this.intlService.translate("countries.panama")||"Panama",countryCode:"PA",dialCode:"507"},{countryName:this.intlService.translate("countries.papuaNewGuinea")||"Papua New Guinea",countryCode:"PG",dialCode:"675"},{countryName:this.intlService.translate("countries.paraguay")||"Paraguay",countryCode:"PY",dialCode:"595"},{countryName:this.intlService.translate("countries.peru")||"Peru",countryCode:"PE",dialCode:"51"},{countryName:this.intlService.translate("countries.philippines")||"Philippines",countryCode:"PH",dialCode:"63"},{countryCode:"PN",countryName:this.intlService.translate("countries.pitcairn")||"Pitcairn"},{countryName:this.intlService.translate("countries.poland")||"Poland",countryCode:"PL",dialCode:"48"},{countryName:this.intlService.translate("countries.portugal")||"Portugal",countryCode:"PT",dialCode:"351"},{countryName:this.intlService.translate("countries.qatar")||"Qatar",countryCode:"QA",dialCode:"974"},{countryName:this.intlService.translate("countries.reunion")||"Réunion",countryCode:"RE",dialCode:"262",priority:0},{countryName:this.intlService.translate("countries.romania")||"Romania",countryCode:"RO",dialCode:"40"},{countryName:this.intlService.translate("countries.russia")||"Russia",countryCode:"RU",dialCode:"7",priority:0},{countryName:this.intlService.translate("countries.rwanda")||"Rwanda",countryCode:"RW",dialCode:"250"},{countryName:this.intlService.translate("countries.saintBarthelemy")||"Saint Barthélemy",countryCode:"BL",dialCode:"590",priority:1},{countryName:this.intlService.translate("countries.saintHelena")||"Saint Helena",countryCode:"SH",dialCode:"290"},{countryName:this.intlService.translate("countries.saintKittsAndNevis")||"Saint Kitts and Nevis",countryCode:"KN",dialCode:"1869"},{countryName:this.intlService.translate("countries.saintLucia")||"Saint Lucia",countryCode:"LC",dialCode:"1758"},{countryName:this.intlService.translate("countries.saintMartin")||"Saint Martin (Saint-Martin",countryCode:"MF",dialCode:"590",priority:2},{countryName:this.intlService.translate("countries.saintPierreAndMiquelon")||"Saint Pierre and Miquelon",countryCode:"PM",dialCode:"508"},{countryName:this.intlService.translate("countries.saintVincentAndTheGrenadines")||"Saint Vincent and the Grenadines",countryCode:"VC",dialCode:"1784"},{countryName:this.intlService.translate("countries.samoa")||"Samoa",countryCode:"WS",dialCode:"685"},{countryName:this.intlService.translate("countries.sanMarino")||"San Marino",countryCode:"SM",dialCode:"378"},{countryName:this.intlService.translate("countries.saoTomeAndPrincipe")||"São Tomé and Príncipe",countryCode:"ST",dialCode:"239"},{countryName:this.intlService.translate("countries.saudiArabia")||"Saudi Arabia",countryCode:"SA",dialCode:"966"},{countryName:this.intlService.translate("countries.senegal")||"Senegal",countryCode:"SN",dialCode:"221"},{countryName:this.intlService.translate("countries.serbia")||"Serbia",countryCode:"RS",dialCode:"381"},{countryName:this.intlService.translate("countries.seychelles")||"Seychelles",countryCode:"SC",dialCode:"248"},{countryName:this.intlService.translate("countries.sierraLeone")||"Sierra Leone",countryCode:"SL",dialCode:"232"},{countryName:this.intlService.translate("countries.singapore")||"Singapore",countryCode:"SG",dialCode:"65"},{countryName:this.intlService.translate("countries.sintMaarten")||"Sint Maarten",countryCode:"SX",dialCode:"1721"},{countryName:this.intlService.translate("countries.slovakia")||"Slovakia",countryCode:"SK",dialCode:"421"},{countryName:this.intlService.translate("countries.slovenia")||"Slovenia",countryCode:"SI",dialCode:"386"},{countryName:this.intlService.translate("countries.solomonIslands")||"Solomon Islands",countryCode:"SB",dialCode:"677"},{countryName:this.intlService.translate("countries.somalia")||"Somalia",countryCode:"SO",dialCode:"252"},{countryName:this.intlService.translate("countries.southAfrica")||"South Africa",countryCode:"ZA",dialCode:"27"},{countryCode:"GS",countryName:this.intlService.translate("countries.southGeorgiaAndTheSouthSandwichIslands")||"South Georgia and the South Sandwich Islands"},{countryName:this.intlService.translate("countries.southKorea")||"South Korea",countryCode:"KR",dialCode:"82"},{countryName:this.intlService.translate("countries.southSudan")||"South Sudan",countryCode:"SS",dialCode:"211"},{countryName:this.intlService.translate("countries.spain")||"Spain",countryCode:"ES",dialCode:"34"},{countryName:this.intlService.translate("countries.sriLanka")||"Sri Lanka",countryCode:"LK",dialCode:"94"},{countryName:this.intlService.translate("countries.sudan")||"Sudan",countryCode:"SD",dialCode:"249"},{countryName:this.intlService.translate("countries.suriname")||"Suriname",countryCode:"SR",dialCode:"597"},{countryName:this.intlService.translate("countries.svalbardAndJanMayen")||"Svalbard and Jan Mayen",countryCode:"SJ",dialCode:"47",priority:1},{countryName:this.intlService.translate("countries.swaziland")||"Swaziland",countryCode:"SZ",dialCode:"268"},{countryName:this.intlService.translate("countries.sweden")||"Sweden",countryCode:"SE",dialCode:"46"},{countryName:this.intlService.translate("countries.switzerland")||"Switzerland",countryCode:"CH",dialCode:"41"},{countryName:this.intlService.translate("countries.syria")||"Syria",countryCode:"SY",dialCode:"963"},{countryName:this.intlService.translate("countries.taiwan")||"Taiwan",countryCode:"TW",dialCode:"886"},{countryName:this.intlService.translate("countries.tajikistan")||"Tajikistan",countryCode:"TJ",dialCode:"992"},{countryName:this.intlService.translate("countries.tanzania")||"Tanzania",countryCode:"TZ",dialCode:"255"},{countryName:this.intlService.translate("countries.thailand")||"Thailand",countryCode:"TH",dialCode:"66"},{countryName:this.intlService.translate("countries.timorLeste")||"Timor-Leste",countryCode:"TL",dialCode:"670"},{countryName:this.intlService.translate("countries.togo")||"Togo",countryCode:"TG",dialCode:"228"},{countryName:this.intlService.translate("countries.tokelau")||"Tokelau",countryCode:"TK",dialCode:"690"},{countryName:this.intlService.translate("countries.tonga")||"Tonga",countryCode:"TO",dialCode:"676"},{countryName:this.intlService.translate("countries.trinidadAndTobago")||"Trinidad and Tobago",countryCode:"TT",dialCode:"1868"},{countryName:this.intlService.translate("countries.tunisia")||"Tunisia",countryCode:"TN",dialCode:"216"},{countryName:this.intlService.translate("countries.turkey")||"Turkey",countryCode:"TR",dialCode:"90"},{countryName:this.intlService.translate("countries.turkmenistan")||"Turkmenistan",countryCode:"TM",dialCode:"993"},{countryName:this.intlService.translate("countries.turksAndCaicosIslands")||"Turks and Caicos Islands",countryCode:"TC",dialCode:"1649"},{countryName:this.intlService.translate("countries.tuvalu")||"Tuvalu",countryCode:"TV",dialCode:"688"},{countryName:this.intlService.translate("countries.uganda")||"Uganda",countryCode:"UG",dialCode:"256"},{countryName:this.intlService.translate("countries.ukraine")||"Ukraine",countryCode:"UA",dialCode:"380"},{countryName:this.intlService.translate("countries.unitedArabEmirates")||"United Arab Emirates",countryCode:"AE",dialCode:"971"},{countryName:this.intlService.translate("countries.unitedKingdom")||"United Kingdom",countryCode:"GB",dialCode:"44",priority:0},{countryCode:"UM",countryName:this.intlService.translate("countries.unitedStatesMinorOutlyingIslands")||"United States Minor Outlying Islands"},{countryName:this.intlService.translate("countries.unitedStates")||"United States",countryCode:"US",dialCode:"1",priority:0},{countryName:this.intlService.translate("countries.uruguay")||"Uruguay",countryCode:"UY",dialCode:"598"},{countryName:this.intlService.translate("countries.uzbekistan")||"Uzbekistan",countryCode:"UZ",dialCode:"998"},{countryName:this.intlService.translate("countries.vanuatu")||"Vanuatu",countryCode:"VU",dialCode:"678"},{countryName:this.intlService.translate("countries.vaticanCity")||"Vatican City",countryCode:"VA",dialCode:"39",priority:1},{countryName:this.intlService.translate("countries.venezuela")||"Venezuela",countryCode:"VE",dialCode:"58"},{countryName:this.intlService.translate("countries.vietnam")||"Vietnam",countryCode:"VN",dialCode:"84"},{countryName:this.intlService.translate("countries.wallisAndFutuna")||"Wallis and Futuna",countryCode:"WF",dialCode:"681"},{countryName:this.intlService.translate("countries.westernSahara")||"Western Sahara",countryCode:"EH",dialCode:"212",priority:1},{countryName:this.intlService.translate("countries.yemen")||"Yemen",countryCode:"YE",dialCode:"967"},{countryName:this.intlService.translate("countries.zambia")||"Zambia",countryCode:"ZM",dialCode:"260"},{countryName:this.intlService.translate("countries.zimbabwe")||"Zimbabwe",countryCode:"ZW",dialCode:"263"}];return this.language&&this.language!==i.L.EN&&(t=this.sortCountryListAlphabetically(t)),n=t,(null===(e=this.params)||void 0===e?void 0:e.excludePalestineFromCountriesList)?n.filter((e=>{let{countryCode:t}=e;return"PS"!==t})):n;var n}sortCountryListAlphabetically(e){return e.sort(((e,t)=>{const n=e.countryName.toLowerCase(),i=t.countryName.toLowerCase();return n<i?-1:n>i?1:0}))}}const a={language:null,translate:()=>null};function o(e){const t=(null==e?void 0:e.intl)||a;return new s(t,{excludePalestineFromCountriesList:null==e?void 0:e.excludePalestineFromCountriesList})}},2707:function(e,t,n){"use strict";n.d(t,{Ay:function(){return c},Bm:function(){return l}});var i=n(5755),s=n(472),a=n(2177);n(4601);const o=a,r=s;function c(e){const t=i.$.formatFiatCurrencies(o,e),n=i.$.formatCryptoCurrencies(r);return Object.assign(Object.assign({},t),n)}Object.values(o).map((e=>e.code)),Object.values(s).map((e=>e.code));const l=e=>"IDR"===e?12:8},5755:function(e,t,n){"use strict";n.d(t,{$:function(){return o}});var i=n(8932),s=n(5182),a=n(2177);class o{loadFiat(e){const t=a;return o.formatFiatCurrencies(t,e)}loadCrypto(){return(0,i.sH)(this,void 0,void 0,(function*(){const e=yield this.getCryptoCurrencies();return o.formatCryptoCurrencies(e)}))}static formatFiatCurrencies(e,t){t||(t={translate:()=>null});const n={};for(const i in e){const a=e[i];n[i]={name:t.translate(`currencies.${i}`)||a.name,code:i,symbol:a.symbol,digits:a.digits,type:s.Z.FIAT,sources:[s.Z.FIAT]}}return n}static formatCryptoCurrencies(e){const t={};for(const n in e){const i=e[n];t[n]={name:i.name,code:n,symbol:i.symbol,digits:i.digits,protocol:i.protocol,networkName:i.networkName,network:i.network,provider:i.provider,type:s.Z.CRYPTO,sources:i.provider}}return t}}},7334:function(e,t,n){"use strict";n.d(t,{Uk:function(){return a},lt:function(){return i},yb:function(){return s}});const i=2,s='RangeError: currencyDisplay must be either "code", "symbol", or "name"',a="symbol"},1167:function(e,t,n){"use strict";n.d(t,{p:function(){return s}});var i=n(2699);function s(e,t){return t&&i.F.includes(e)?"":e}},2699:function(e,t,n){"use strict";n.d(t,{F:function(){return i},f:function(){return s}});const i=["GBP"];function s(e){return i.includes(e)}},5182:function(e,t,n){"use strict";var i;n.d(t,{Z:function(){return i}}),function(e){e.FIAT="fiat",e.CRYPTO="crypto"}(i||(i={}))},6308:function(e,t,n){"use strict";function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:19;const t=window.crypto||window.msCrypto;let n="";if(t&&"function"==typeof t.getRandomValues){const i=new Uint8Array(e);t.getRandomValues(i),n=[].slice.call(i).map((e=>e%10)).join("")}else for(let t=0;t<e;t++)n+=Math.floor(10*Math.random()).toString();return"0"!==n[0]?n:i(e)}n.d(t,{i:function(){return i}})},7176:function(e,t,n){"use strict";n.d(t,{Cf:function(){return i},HP:function(){return s},gR:function(){return a}});class i extends Error{constructor(e){super(e),this.name=this.constructor.name}}class s extends i{constructor(e,t){super(t?`Unreachable statement: ${e} [${t}]`:`Unreachable statement: ${e}`)}}class a extends i{constructor(){super("Unexpected error")}}},222:function(e,t,n){"use strict";n.d(t,{k0:function(){return u}});var i=n(7176);const s=new WeakMap;let a=null;const o=new Promise((e=>{a=e}));class r extends i.Cf{constructor(e){super(e?`'Script failed to load': ${e}`:"Script failed to load"),this.name="LoadScriptError"}}class c extends i.Cf{constructor(e){super(e?`Load script timeout: ${e}`:"Load script timeout"),this.name="LoadScriptTimeoutError"}}function l(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;t=t||window;let o={};s.has(t)?o=s.get(t):s.set(t,o);const l=o[e];if(!i&&l)return l;const d=new Promise((function(i,s){setTimeout((()=>{const a=function(e,t){const n=document.createElement("script");return n.type="text/javascript",n.async=!0,n.src=e,Object.keys(t).forEach((e=>{n.setAttribute(e,t[e])})),n}(e,n);a.onerror=function(e){if("string"==typeof e)return void s(new r);const t=null==e?void 0:e.target;t instanceof HTMLScriptElement?s(new r(t.src)):s(new r)},a.onload=function(){i(!0)},t.document.documentElement.appendChild(a),u._immedeatly&&i(!0)}),0)})),h=[d];if(null!==a){const t=new Promise(((t,n)=>{setTimeout((()=>n(new c(e))),a)}));h.push(t)}const m=Promise.race(h);return o[e]=m,m}function u(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0;if(i&&(!(r=i)||r.constructor!=={}.constructor))throw new Error("Expected attributes to be an object.");var r;return t?o.then((()=>l(e,n,i,s,a))):l(e,n,i,s,a)}u._windows=s,u._immedeatly=!1},204:function(e,t,n){"use strict";n.d(t,{Em:function(){return o},GI:function(){return c},Ki:function(){return l}});var i=n(8932),s=n(7954);const a=new Map;function o(e){return(0,i.sH)(this,void 0,void 0,(function*(){const t=new r(e),n=a.get(e.url);e.cancelSimilar&&n&&n(),a.set(e.url,t.abort.bind(t));try{const n=yield t.send();return a.delete(e.url),n}catch(t){throw"AbortError"!==(null==t?void 0:t.originalErrorName)&&a.delete(e.url),t}}))}class r{constructor(e){this.options=e,this.abortController=function(){try{return void 0!==window.AbortController}catch(e){return!1}}()?new AbortController:null}abort(){var e;null===(e=this.abortController)||void 0===e||e.abort()}send(){return(0,i.sH)(this,void 0,void 0,(function*(){var e,t;const n=this.getUrl(),i=this.getHeaders(),s=this.getBody(),a=this.getCredentials();let o;try{o=yield fetch(n,{method:this.options.method,signal:null===(e=this.abortController)||void 0===e?void 0:e.signal,headers:i,credentials:a,body:s})}catch(e){const t=e instanceof Error?e.message:"Network Error";throw new c(0,t,this.options.method,this.options.url,null==e?void 0:e.name,this.options.setCustomFingerprint)}const r=o.status;let l;const u=o.headers.get("content-type");if(l=(null==u?void 0:u.includes("application/json"))?yield o.json():yield o.text(),r>=500&&this.options.rejectOnInvalid)throw new c(r,o.statusText,this.options.method,this.options.url,"",this.options.setCustomFingerprint);const d=r>=200&&r<400||(null===(t=this.options.validStatuses)||void 0===t?void 0:t.includes(r));return{data:l,valid:Boolean(d)}}))}getHeaders(){const e=new Headers,t=this.options.headers;return t&&Object.keys(t).forEach((n=>{const i=t[n];void 0!==i&&e.append(n,i)})),e}getBody(){return void 0!==this.options.params&&"GET"!==this.options.method?JSON.stringify(this.options.params):null}getUrl(){let e=this.options.url;if("GET"===this.options.method&&this.options.params){const t=new URLSearchParams;for(const e of Object.keys(this.options.params))void 0!==this.options.params[e]&&t.set(e,String(this.options.params[e]));e+=`?${t.toString()}`}return e}getCredentials(){return"withCredentials"in this.options?this.options.withCredentials?"include":"omit":"include"}}class c extends Error{constructor(e,t,n,i,a,o){super(`[Checkout Shared]: Server ${n} response status ${e}, ${t} for url ${i}`),this.originalErrorName=a,o&&(this[s.Zk]=[i,t]),this.statusCode=e}}class l extends Error{constructor(){super('Request returned failure result with "rejectOnInvalid" flag set')}}},7954:function(e,t,n){"use strict";n.d(t,{Zk:function(){return i},b1:function(){return s}});const i=Symbol("CUSTOM_FINGERPRINT");var s;Symbol("EXTRA"),Symbol("TAGS"),function(e){e.COMMON="common",e.ADMIN="admin",e.DASHBOARD="dashboard",e.DONOR_PORTAL="donorPortal",e.CAMPAIGN_PAGE="campaign-page",e.INTEGRATION="integration",e.BILLING="billing",e.CHECKOUT="checkout",e.CHECKOUT_STEPLESS="checkout-stepless",e.EMAILS="emails"}(s||(s={}))},4390:function(e,t,n){"use strict";var i,s;n.d(t,{bG:function(){return s},lS:function(){return i}}),function(e){e.IOS="iOS",e.ANDROID="Android"}(i||(i={})),function(e){e.MOBILE_SAFARI="Mobile Safari",e.SAFARI="Safari"}(s||(s={}))},2741:function(e,t,n){"use strict";n.d(t,{MS:function(){return a}});const i=36e5,s=24*i,a={SECOND:1e3,MINUTE:6e4,HOUR:i,DAY:s,YEAR:365*s}},3105:function(e,t,n){"use strict";var i;n.d(t,{_:function(){return i}}),function(e){e.CARD="creditCard",e.APPLE_PAY="applePay",e.GOOGLE_PAY="googlePay",e.CLICK_TO_PAY="clickToPay",e.ACH="ach",e.PLAID="plaid",e.PAYPAL="paypal",e.VENMO="venmo",e.AU_BECS="auBecsDebit",e.UK_BACS="ukBacs",e.ACSS="acss",e.SEPA="sepa",e.IDEAL="ideal",e.CRYPTO="crypto",e.STOCK="stock",e.US_BANK_ACCOUNT="usBankAccount"}(i||(i={}))},9949:function(e,t,n){"use strict";var i;n.d(t,{_h:function(){return R._},fR:function(){return f},qs:function(){return l},M6:function(){return k},UH:function(){return E},Zq:function(){return P}}),function(e){e.ACH_VERIFICATION_REQUIRED="ach_verification_required",e.INCOMPLETE="incomplete",e.RETRYING="retrying",e.WAITING_FOR_TRANSFER="waiting_for_transfer",e.PAYPAL_ACTION_REQUIRED="paypal_action_required",e.SCHEDULED="scheduled",e.DISPUTE_LOST="dispute_lost",e.ACCOUNT_CLOSED="account_closed",e.ACCOUNT_FROZEN="account_frozen",e.AUTHENTICATION_REQUIRED="authentication_required",e.BANK_ACCOUNT_RESTRICTED="bank_account_restricted",e.CARD_DECLINED="card_declined",e.CREDIT_CARD_ACTION_REQUIRED="credit_card_action_required",e.DEBIT_NOT_AUTHORIZED="debit_not_authorized",e.EXPIRED_CARD="expired_card",e.INCORRECT_CVC="incorrect_cvc",e.INCORRECT_NUMBER="incorrect_number",e.INCORRECT_ZIP="incorrect_zip",e.INSUFFICIENT_FUNDS="insufficient_funds",e.INVALID_ACCOUNT_NUMBER="invalid_account_number",e.NO_ACCOUNT="no_account",e.PARAMETER_INVALID_INTEGER="parameter_invalid_integer",e.PROCESSING_ERROR="processing_error",e.RESOURCE_MISSING="resource_missing",e.ACH_VERIFICATION_FAILED="ach_verification_failed",e.ACH_VERIFICATION_EXPIRED="ach_verification_expired",e.FUN_VERIFICATION_CANCEL="fun_verification_cancel",e.SUBSCRIPTION_CANCELLED_BY_COMPANY="subscription_cancelled_by_company",e.SUBSCRIPTION_CANCELLED_BY_CUSTOMER="subscription_cancelled_by_customer",e.SUBSCRIPTION_SKIPPED_BY_COMPANY="subscription_skipped_by_company",e.SUBSCRIPTION_SKIPPED_BY_CUSTOMER="subscription_skipped_by_customer",e.PAYMENT_METHOD_INVALIDATED="payment_method_invalidated",e.FAILED_BY_TERMINATION_FLOW="failed_by_termination_flow",e.NOT_ELIGIBLE="not_eligible",e.UNKNOWN_REASON="unknown_reason",e.CANCELLED_BY_CUSTOMER="cancelled_by_customer",e.CANCELLED_BY_COMPANY="cancelled_by_company"}(i||(i={}));var s,a,o,r,c,l,u,d,h,m,p,g,y,f,E,S,v,A,C,P,N,b,D,T,_,k,O,I,x,w,R=n(3105);!function(e){e.BITCOIN="bitcoin",e.ETHEREUM="ethereum",e.BITCOINCASH="bitcoincash",e.LITECOIN="litecoin",e.ZCASH="zcash",e.FILECOIN="filecoin",e.DOGECOIN="dogecoin",e.TEZOS="tezos",e.SOLANA="solana",e.POLKADOT="polkadot"}(s||(s={})),function(e){e.PENDING="pending",e.FAILED="failed",e.SUCCESS="success",e.REFUNDED="refunded"}(a||(a={})),function(e){e.FAIL="fail",e.FAIL_NOT_ELIGIBLE="fail_not_eligible",e.WAIT_FOR_TRANSFER="wait_for_transfer",e.SUCCEED="succeed"}(o||(o={})),function(e){e.PENDING="pending",e.SUCCESS="success",e.FAILED="failed"}(r||(r={})),function(e){e.ACH="ach",e.GOOGLE_PAY="android_pay",e.APPLE_PAY="apple_pay",e.CLICK_TO_PAY="masterpass",e.PLAID="plaid"}(c||(c={})),function(e){e.CARD="card",e.BANK_ACCOUNT="bank_account",e.PAYPAL="paypal",e.VENMO="venmo",e.SOURCE="source",e.AU_BECS="au_becs_debit",e.UK_BACS="bacs_debit",e.ACSS="acss_debit",e.SEPA="sepa_debit",e.IDEAL="ideal",e.CRYPTO="crypto",e.STOCK="stock",e.US_BANK_ACCOUNT="us_bank_account"}(l||(l={})),function(e){e.CHARGEABLE="chargeable",e.NEW="new",e.VERIFICATION_FAILED="verification_failed",e.VERIFIED="verified",e.VALIDATED="validated",e.ERRORED="errored"}(u||(u={})),function(e){e.STRIPE="stripe",e.PAYPAL="paypal",e.GEMINI="gemini",e.MANUAL_BROKERAGE="manualBrokerage",e.COINBASE_COMMERCE="coinbaseCommerce"}(d||(d={})),function(e){e.STRIPE_TOKEN="stripeToken",e.STRIPE_PAYMENT_METHOD="stripePaymentMethod"}(h||(h={})),function(e){e.ACTIVE="active",e.CANCELLED="cancelled",e.FAILED="failed"}(m||(m={})),function(e){e.RETRYING="retrying",e.ACH_VERIFICATION_REQUIRED="ach_verification_required",e.SCHEDULED="scheduled",e.PAUSED="paused",e.CANCELLED_BY_COMPANY="cancelled_by_company",e.CANCELLED_BY_CUSTOMER="cancelled_by_customer",e.CANCELLED_BY_TERMINATION_FLOW="cancelled_by_termination_flow",e.CANCELLED_BY_DISPUTE_LOST="cancelled_by_dispute_lost",e.CANCELLED_BY_LIMIT="cancelled_by_limit",e.ACH_VERIFICATION_FAILED="ach_verification_failed",e.ACH_VERIFICATION_EXPIRED="ach_verification_expired",e.PAYMENT_METHOD_INVALIDATED="payment_method_invalidated",e.FAILED_BY_INSUFFICIENT="failed_by_insufficient_data"}(p||(p={})),function(e){e.CARD="card",e.BANK_ACCOUNT="bank_account",e.US_BANK_ACCOUNT="us_bank_account",e.AU_BECS="au_becs_debit",e.UK_BACS="bacs_debit",e.ACSS="acss_debit",e.SEPA="sepa_debit",e.IDEAL="ideal"}(g||(g={})),function(e){e.VISA="Visa",e.VISA_ELECTRON="Visa Electron",e.MASTER_CARD="MasterCard",e.AMERICAN_EXPRESS="American Express",e.DINERS_CLUB="Diners Club",e.DISCOVER="Discover",e.JCB="JCB",e.UNION_PAY="UnionPay"}(y||(y={})),function(e){e.VISA="visa",e.AMERICAN_EXPRESS="amex",e.MASTERCARD="mastercard",e.DISCOVER="discover"}(f||(f={})),function(e){e[e.STANDARD=290]="STANDARD",e[e.NON_PROFIT=220]="NON_PROFIT"}(E||(E={})),function(e){e[e.AUTO=-1]="AUTO",e[e.NEVER=0]="NEVER",e[e.ONE=1]="ONE",e[e.TWO=2]="TWO",e[e.THREE=3]="THREE",e[e.FOUR=4]="FOUR",e[e.FIVE=5]="FIVE",e[e.SIX=6]="SIX"}(S||(S={})),function(e){e.NEW="new",e.VALIDATED="validated",e.VERIFIED="verified",e.FAILED="verification_failed",e.ERRORED="errored"}(v||(v={})),function(e){e.INDIVIDUAL="individual",e.COMPANY="company"}(A||(A={})),function(e){e.ACTIVE="active",e.INACTIVE="inactive",e.DISABLED="disabled"}(C||(C={})),function(e){e.REQUIRES_ACTION="requires_action",e.REQUIRES_CONFIRMATION="requires_confirmation",e.REQUIRES_PAYMENT_METHOD="requires_payment_method",e.REQUIRES_CAPTURE="requires_capture",e.PROCESSING="processing",e.SUCCEEDED="succeeded",e.CANCELLED="canceled"}(P||(P={})),function(e){e.ACTIVE="active",e.INACTIVE="inactive"}(N||(N={})),function(e){e.ACH_VERIFICATION_REQUIRED="ach_verification_required",e.ACH_VERIFICATION_FAILED="ach_verification_failed",e.ACH_VERIFICATION_CANCELLED="ach_verification_cancelled",e.ACH_VERIFICATION_EXPIRED="ach_verification_expired",e.UNKNOWN_ERROR="unknown_error",e.DEACTIVATED_ON_PROVIDER_SIDE="deactivated_on_provider_side",e.ACCOUNT_CLOSED="account_closed",e.ACCOUNT_FROZEN="account_frozen",e.AUTHENTICATION_REQUIRED="authentication_required",e.BANK_ACCOUNT_RESTRICTED="bank_account_restricted",e.CARD_DECLINED="card_declined",e.DEBIT_NOT_AUTHORIZED="debit_not_authorized",e.EXPIRED_CARD="expired_card",e.FUN_WRONG_PAYMENT_METHOD="fun_wrong_payment_method",e.INCORRECT_CVC="incorrect_cvc",e.INCORRECT_NUMBER="incorrect_number",e.INCORRECT_ZIP="incorrect_zip",e.INSUFFICIENT_FUNDS="insufficient_funds",e.INVALID_ACCOUNT_NUMBER="invalid_account_number",e.NO_ACCOUNT="no_account",e.PROCESSING_ERROR="processing_error",e.RESOURCE_MISSING="resource_missing",e.MANDATE_INACTIVE="mandate_inactive",e.STRIPE_CUSTOMER_REQUIRED="stripe_customer_required",e.STRIPE_CUSTOMER_NONE="stripe_customer_none"}(b||(b={})),function(e){e.PAYMENT_METHOD_INVALIDATED="fun_payment_method_invalidated",e.CHARGE_VERIFICATION_CANCELLED="fun_verification_cancel",e.PAYMENT_METHOD_VERIFICATION_EXPIRED="fun_verification_expired",e.PAYMENT_METHOD_VERIFICATION_FAILED="fun_verification_failed",e.CHARGE_VERIFICATION_CANCELLED_BY_COMPANY="fun_verification_cancel_by_company",e.CHARGE_VERIFICATION_CANCELLED_BY_SUPPORTER="fun_verification_cancel_by_supporter",e.PAYMENT_WAS_CANCELLED="fun_payment_was_cancelled",e.ACCOUNT_WAS_TERMINATED="fun_account_was_terminated"}(D||(D={})),function(e){e.DUPLICATE_DONATION="duplicate_donation",e.FRAUD="fraud",e.REQUESTED_BY_SUPPORTER="requested_by_supporter",e.EXPIRED_UNCAPTURED_CHARGE="expired_uncaptured_charge",e.OTHER="other"}(T||(T={})),function(e){e.UPDATE_SUBSCRIPTION_CUSTOMER_ADDRESS="update_subscription_customer_address",e.UPDATE_SUBSCRIPTION_QUESTIONS="update_subscription_questions",e.UPDATE_SUBSCRIPTION_AMOUNT="update_subscription_amount",e.UPDATE_SUBSCRIPTION_CUSTOM_FIELDS="update_subscription_custom_fields",e.UPDATE_SUBSCRIPTION_UTM="update_subscription_utm",e.UPDATE_SUBSCRIPTION_GOAL="update_subscription_goal",e.UPDATE_SUBSCRIPTION_LIMITS="update_subscription_limits",e.UPDATE_SUBSCRIPTION_WIDGET="update_subscription_widget",e.UPDATE_SUBSCRIPTION_PAYMENT_METHOD="update_subscription_payment_method",e.UPDATE_CHARGE_CUSTOMER_ADDRESS="update_charge_customer_address",e.UPDATE_CHARGE_RECEIPT="update_charge_receipt",e.UPDATE_CHARGE_CUSTOM_FIELDS="update_charge_custom_fields",e.UPDATE_CHARGE_GOAL="update_charge_goal",e.UPDATE_CHARGE_WIDGET="update_charge_widget",e.REFUND_APPLICATION_FEE="refund_application_fee",e.UPDATE_CUSTOMER_NAME="update_customer_name"}(_||(_={})),function(e){e.PAYPAL_ERROR="PAYPAL_ERROR",e.PAYPAL_REQUEST_ERROR="PAYPAL_REQUEST_ERROR",e.REFUND_FAILED_INSUFFICIENT_FUNDS="REFUND_FAILED_INSUFFICIENT_FUNDS",e.TRANSACTION_REFUSED="TRANSACTION_REFUSED",e.TRANSACTION_ALREADY_REFUNDED="TRANSACTION_ALREADY_REFUNDED",e.USER_ACCOUNT_RESTRICTED="USER_ACCOUNT_RESTRICTED",e.INTERNAL="INTERNAL",e.UNAVAILABLE="UNAVAILABLE",e.EXECUTE_AGREEMENT_BUYER_NOT_ACCEPTED="EXECUTE_AGREEMENT_BUYER_NOT_ACCEPTED",e.ORDER_EXPIRED="ORDER_EXPIRED",e.VALIDATION_ERROR="VALIDATION_ERROR"}(k||(k={})),function(e){e.PAYPAL_PAYER_BLACKLISTED="PAYPAL_PAYER_BLACKLISTED"}(O||(O={})),function(e){let t;!function(e){let t,n,i,s,a,o,r,c,l;!function(e){e.CREATED="charge.created",e.PENDING="charge.pending",e.REFUNDED="charge.refunded",e.FAILED="charge.failed",e.UPDATED="charge.updated",e.SUCCESS="charge.success",e.SUCCESS_EARLY_FRAUD_WARNING="charge.success_early_fraud_warning",e.PENDING_ACH_VERIFICATION_REQUIRED="charge.pending_ach_verification_required",e.PENDING_INCOMPLETE="charge.pending_incomplete",e.PENDING_SCHEDULED="charge.pending_scheduled",e.PENDING_WAITING_FOR_TRANSFER="charge.pending_waiting_for_transfer",e.PENDING_PAYPAL_ACTION_REQUIRED="charge.pending_paypal_action_required",e.PENDING_RETRYING="charge.pending_retrying",e.PERSONAL_DATA_DELETED="charge.personal_data_deleted",e.SUCCESS_DISPUTE_CREATED="charge.success_dispute_created",e.SUCCESS_DISPUTE_LOST="charge.success_dispute_lost",e.SUCCESS_DISPUTE_WON="charge.success_dispute_won",e.SUCCESS_DISPUTE_IN_REVIEW="charge.success_dispute_in_review"}(t=e.EChargeEvent||(e.EChargeEvent={})),function(e){e.ACTIVATED="subscription.activated",e.SCHEDULED="subscription.scheduled",e.FAILED="subscription.failed",e.COMPLETED="subscription.completed",e.CANCELLED="subscription.cancelled",e.TERMS_UPDATED="subscription.subscription_terms.updated",e.DETAILS_UPDATED="subscription.details.updated",e.PAUSED="subscription.paused",e.RETRYING="subscription.retrying",e.PERSONAL_DATA_DELETED="subscription.personal_data_deleted"}(n=e.ESubscriptionEvent||(e.ESubscriptionEvent={})),function(e){e.PENDING="charge_attempt.pending",e.SUCCESS="charge_attempt.success",e.FAILED="charge_attempt.failed"}(i=e.EChargeAttemptEvent||(e.EChargeAttemptEvent={})),function(e){e.ACTIVATE="payment_method.active",e.DEACTIVATE="payment_method.inactive",e.CREATED="payment_method.created",e.UPDATED="payment_method.updated",e.PERSONAL_DATA_DELETED="payment_method.personal_data_deleted"}(s=e.EPaymentMethodEvent||(e.EPaymentMethodEvent={})),function(e){e.CREATED="tribute.created",e.UPDATED="tribute.updated",e.SHARED="tribute.shared"}(a=e.ETributeEvent||(e.ETributeEvent={})),function(e){e.CREATED="abandoned_donation.created",e.OPEN="abandoned_donation.open",e.CANCELLED="abandoned_donation.cancelled",e.COMPLETED="abandoned_donation.completed",e.PERSONAL_DATA_DELETED="abandoned_donation.personal_data_deleted"}(o=e.EAbandonedDonationEvent||(e.EAbandonedDonationEvent={})),function(e){e.PERSONAL_DATA_DELETED="customer.personal_data_deleted",e.CREATED="customer.created",e.UPDATED="customer.updated"}(r=e.ECustomerEvent||(e.ECustomerEvent={})),function(e){e.PENDING="payment_attempt.pending",e.FAILED="payment_attempt.failed",e.SUCCEEDED="payment_attempt.succeeded"}(c=e.EPaymentAttemptEvent||(e.EPaymentAttemptEvent={})),function(e){e.CREATED="payment_intent.created",e.FAILED="payment_intent.failed",e.SUCCEEDED="payment_intent.succeeded",e.CANCELED="payment_intent.canceled",e.UPDATED="payment_intent.updated",e.REFUNDED="payment_intent.refunded"}(l=e.EPaymentIntentEvent||(e.EPaymentIntentEvent={}))}(t=e.DomainEvent||(e.DomainEvent={}))}(I||(I={})),function(e){e.REQUIRES_PAYMENT="requires_payment",e.REQUIRES_CAPTURE="requires_capture",e.REQUIRES_PAYMENT_METHOD_VERIFICATION="requires_payment_method_verification",e.FAILED="failed",e.SUCCEEDED="succeeded",e.CANCELED="canceled",e.PROCESSING="processing"}(x||(x={})),function(e){e.SUCCEEDED="succeeded",e.PENDING="pending",e.FAILED="failed"}(w||(w={}))},110:function(e,t,n){"use strict";var i,s;n.d(t,{N:function(){return s},f:function(){return i}}),function(e){e.ASK_VIDEO_SHOWN="askVideoShown",e.ASK_VIDEO_PLAY="askVideoPlay",e.ASK_VIDEO_PAUSE="askVideoPause",e.ASK_VIDEO_FINISHED="askVideoFinished",e.ASK_VIDEO_MUTE_CHANGED="askVideoMuteChanged",e.ASK_VIDEO_CAPTIONS_CHANGED="askVideoCaptionsChanged",e.ASK_VIDEO_FULLSCREEN_CHANGED="askVideoOnFullScreen",e.ASK_VIDEO_INIT_PLAYER_ERROR="askVideoInitPlayerError",e.ASK_VIDEO_ERROR="askVideoError",e.ASK_VIDEO_SHOW_IMAGE_AS_FALLBACK="askVideoShowImageAsFallback"}(i||(i={})),function(e){e.MUTE="mute",e.UNMUTE="unmute"}(s||(s={}))},2138:function(e,t,n){"use strict";var i;n.d(t,{h:function(){return i}}),function(e){e.DEVELOPMENT="development",e.PRODUCTION="production",e.STAGING="staging",e.TESTING="testing"}(i||(i={}))},6741:function(e,t,n){"use strict";n.d(t,{_h:function(){return a._h},qs:function(){return a.qs},hY:function(){return r.h},Jy:function(){return E},tg:function(){return T.t},Bg:function(){return y},Au:function(){return p},dR:function(){return i},kt:function(){return h},ax:function(){return f},N4:function(){return d},XN:function(){return s.X},VN:function(){return u}});var i,s=n(833),a=n(9949);!function(e){e.IN_HONOR_MEMORY="inHonorMemory",e.DEDICATION="dedication"}(i||(i={}));var o,r=n(2138);!function(e){e.DONOR_PORTAL="donorPortal",e.DASHBOARD="dashboard",e.DASHBOARD_USER="dashboardUser"}(o||(o={}));var c,l,u,d,h,m,p,g,y,f,E,S,v,A,C,P,N,b,D,T=n(9268);!function(e){e.PAN_ONLY="PAN_ONLY",e.CRYPTOGRAM_3DS="CRYPTOGRAM_3DS"}(c||(c={})),function(e){e.AMEX="AMEX",e.DISCOVER="DISCOVER",e.JCB="JCB",e.MASTERCARD="MASTERCARD",e.VISA="VISA"}(l||(l={})),function(e){e.DEFAULT_MONTHLY="defaultMonthly",e.ONLY_MONTHLY="onlyMonthly",e.DEFAULT_ONETIME="defaultOnetime",e.ONLY_ONETIME="onlyOnetime"}(u||(u={})),function(e){e.FUNDRAISING_PAGE="fundraisingPage",e.REDIRECT="redirect",e.THANK_YOU_SCREEN="thankYouScreen"}(d||(d={})),function(e){e.NONE="none",e.GENERAL="general",e.CUSTOMIZED="customized"}(h||(h={})),function(e){e.ADAPTIVE_COST_COVERAGE="adaptiveCostCoverage",e.PRE_DONATION_UPSELL="preDonationUpsell",e.POST_DONATION_UPSELL="postDonationUpsell"}(m||(m={})),function(e){e.GENERAL="general",e.CUSTOMIZED="customized"}(p||(p={})),function(e){e.EMAIL="email",e.POSTAL_MAIL="postalMail",e.SMS="sms",e.PHONE_CALLS="phoneCalls",e.SOCIAL_MEDIA="socialMedia"}(g||(g={})),function(e){e.NOT_SUBMITTED="notSubmitted",e.OPTED_IN="optedIn",e.OPTED_OUT="optedOut"}(y||(y={})),function(e){e.EMAIL="email",e.SMS="sms",e.PHONE_CALLS="phoneCalls",e.POSTAL_MAIL="postalMail",e.SOCIAL_MEDIA="socialMedia"}(f||(f={})),function(e){e.DESKTOP="desktop",e.MOBILE="mobile"}(E||(E={})),function(e){e.DISABLED="disabled",e.DRY_RUN="dry-run",e.ENABLED="enabled"}(S||(S={})),function(e){e.LIVE="live",e.TEST="test"}(v||(v={})),function(e){e.TEXT="text",e.EMAIL="email"}(A||(A={})),function(e){e.WEBSITE="website",e.CAMPAIGN_PAGE="campaignPage",e.VIRTUAL_TERMINAL="virtualTerminal",e.DONOR_PORTAL="donorPortal",e.DASHBOARD="dashboard",e.RECURRING_MIGRATION="recurringMigration",e.API="api"}(C||(C={})),function(e){e.DAY_7="7d",e.MONTH="1m",e.MONTH_3="3m",e.YEAR_TO_DAY="ytd",e.YEAR="1y",e.YEAR_5="5y"}(P||(P={})),function(e){e.FULL="full",e.CHUNK="chunk"}(N||(N={})),function(e){e.CHARGES="charges",e.COMPANIES="companies",e.CUSTOMERS="customers",e.ELEMENTS="elements",e.SUBSCRIPTIONS="subscriptions",e.WIDGETS="widgets",e.FUNDRAISING_PAGES="fundraisingpages",e.USERS="users"}(b||(b={})),function(e){e.FULL="full",e.FROM="from"}(D||(D={})),P.DAY_7,P.MONTH,P.MONTH_3,P.YEAR_TO_DAY,P.YEAR,P.YEAR_5},9268:function(e,t,n){"use strict";var i;n.d(t,{t:function(){return i}}),function(e){e.AUSTRALIA="AU",e.AUSTRIA="AT",e.BELGIUM="BE",e.BRAZIL="BR",e.BULGARIA="BG",e.CANADA="CA",e.CROATIA="HR",e.CYPRUS="CY",e.CZECH_REPUBLIC="CZ",e.DENMARK="DK",e.ESTONIA="EE",e.FINLAND="FI",e.FRANCE="FR",e.GERMANY="DE",e.GREECE="GR",e.HONG_KONG="HK",e.HUNGARY="HU",e.INDIA="IN",e.INDONESIA="ID",e.IRELAND="IE",e.ITALY="IT",e.JAPAN="JP",e.LATVIA="LV",e.LITHUANIA="LT",e.LUXEMBOURG="LU",e.MALAYSIA="MY",e.MALTA="MT",e.MEXICO="MX",e.NETHERLANDS="NL",e.NEW_ZEALAND="NZ",e.NORWAY="NO",e.POLAND="PL",e.PORTUGAL="PT",e.ROMANIA="RO",e.SINGAPORE="SG",e.SLOVAKIA="SK",e.SLOVENIA="SI",e.SPAIN="ES",e.SWEDEN="SE",e.SWITZERLAND="CH",e.THAILAND="TH",e.UNITED_ARAB_EMIRATES="AE",e.UNITED_KINGDOM="GB",e.UNITED_STATES="US",e.GIBRALTAR="GI",e.LIECHTENSTEIN="LI",e.PHILIPPINES="PH",e.ISRAEL="IL"}(i||(i={}))},833:function(e,t,n){"use strict";var i;n.d(t,{X:function(){return i}}),function(e){e.DEFAULT_YES="defaultYes",e.DEFAULT_NO="defaultNo",e.ONLY_YES="onlyYes",e.ONLY_NO="onlyNo",e.SMART_COVERING="smartCovering"}(i||(i={}))},534:function(e,t,n){var i={"./card-amex.png":3421,"./card-diners.png":5088,"./card-discover.png":1229,"./card-jcb.png":543,"./card-mastercard.png":9848,"./card-unionpay.png":8057,"./card-unknown-error.png":2217,"./card-unknown.png":8044,"./card-visa.png":9503};function s(e){var t=a(e);return n(t)}function a(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}s.keys=function(){return Object.keys(i)},s.resolve=a,e.exports=s,s.id=534},3367:function(e,t,n){var i={"./ar_001.json":[3372,830],"./da.json":[1104,639],"./de.json":[444,436],"./en_CA.json":[9821,245],"./en_GB.json":[4828,234],"./en_US.json":[2853,627],"./es.json":[847,616],"./es_US.json":[7868,425],"./fi_FI.json":[1078,662],"./fr_CA.json":[5292,471],"./fr_FR.json":[3764,381],"./hu.json":[5472,572],"./it.json":[8054,775],"./ja.json":[6598,966],"./ko.json":[9277,561],"./nl.json":[2785,752],"./no.json":[7396,763],"./pl_PL.json":[3848,954],"./pt_BR.json":[9672,989],"./pt_PT.json":[8216,180],"./ru_RU.json":[6214,740],"./sv.json":[2642,901],"./zh_CN.json":[507,710],"./zh_TW.json":[2851,519]};function s(e){if(!n.o(i,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=i[e],s=t[0];return n.e(t[1]).then((function(){return n.t(s,19)}))}s.keys=function(){return Object.keys(i)},s.id=3367,e.exports=s},3862:function(e,t,n){var i={"./balloon.png":5047,"./blue-hearts.png":2956,"./confetti-ball.png":7596,"./cool-face.png":8389,"./diamond.png":3126,"./double-hearts.png":2861,"./double-stars.png":9779,"./empty-heart.png":5510,"./fire-flame.png":6366,"./folded-hands.png":5791,"./grinning-face.png":1492,"./happy-hand.png":9988,"./heart.png":2538,"./light.png":638,"./love-letter.png":3855,"./medal.png":1407,"./party-popper.png":5831,"./partying-face.png":9156,"./prize.png":5966,"./receipt.png":2898,"./sad-face.png":422,"./share-hearts.png":4325,"./smiling-face.png":4833,"./star.png":9616,"./thumbs-up.png":1109,"./trophy.png":2238};function s(e){var t=a(e);return n(t)}function a(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}s.keys=function(){return Object.keys(i)},s.resolve=a,e.exports=s,s.id=3862},3421:function(e,t,n){"use strict";e.exports=n.p+"checkout-shared/src/images/card-amex.f704acb7cb0f1c209efa.png"},5088:function(e,t,n){"use strict";e.exports=n.p+"checkout-shared/src/images/card-diners.b69117170ac25814aa42.png"},1229:function(e,t,n){"use strict";e.exports=n.p+"checkout-shared/src/images/card-discover.dbc0569d3c7cfb9e0c1e.png"},543:function(e,t,n){"use strict";e.exports=n.p+"checkout-shared/src/images/card-jcb.12e905d1462fd708b795.png"},9848:function(e,t,n){"use strict";e.exports=n.p+"checkout-shared/src/images/card-mastercard.51e8e6a0a1b07ef9c09b.png"},8057:function(e,t,n){"use strict";e.exports=n.p+"checkout-shared/src/images/card-unionpay.98ea5861340fc8694663.png"},2217:function(e,t,n){"use strict";e.exports=n.p+"checkout-shared/src/images/card-unknown-error.7afd2ac2559f2f9f3960.png"},8044:function(e,t,n){"use strict";e.exports=n.p+"checkout-shared/src/images/card-unknown.265c1bce7f59ecbff072.png"},9503:function(e,t,n){"use strict";e.exports=n.p+"checkout-shared/src/images/card-visa.d358d698a9d21919e7c1.png"},6843:function(e,t,n){"use strict";e.exports=n.p+"common-fonts/ibm-plex-sans-arabic/ibmplexsans-arabic-v12-300.woff2"},4312:function(e,t,n){"use strict";e.exports=n.p+"common-fonts/ibm-plex-sans-arabic/ibmplexsans-arabic-v12-400.woff2"},7977:function(e,t,n){"use strict";e.exports=n.p+"common-fonts/ibm-plex-sans-arabic/ibmplexsans-arabic-v12-500.woff2"},5870:function(e,t,n){"use strict";e.exports=n.p+"common-fonts/ibm-plex-sans-arabic/ibmplexsans-arabic-v12-600.woff2"},9807:function(e,t,n){"use strict";e.exports=n.p+"common-fonts/ibm-plex-sans-arabic/ibmplexsans-arabic-v12-700.woff2"},8552:function(e,t,n){"use strict";e.exports=n.p+"common-fonts/ibm-plex-sans/ibmplexsans-v19-300.woff2"},1755:function(e,t,n){"use strict";e.exports=n.p+"common-fonts/ibm-plex-sans/ibmplexsans-v19-400.woff2"},9706:function(e,t,n){"use strict";e.exports=n.p+"common-fonts/ibm-plex-sans/ibmplexsans-v19-500.woff2"},3717:function(e,t,n){"use strict";e.exports=n.p+"common-fonts/ibm-plex-sans/ibmplexsans-v19-600.woff2"},8676:function(e,t,n){"use strict";e.exports=n.p+"common-fonts/ibm-plex-sans/ibmplexsans-v19-700.woff2"},3179:function(e,t,n){"use strict";e.exports=n.p+"common-fonts/sacramento/sacramento-v15-400.woff2"},9562:function(e,t,n){"use strict";e.exports=n.p+"common-fonts/verveine/verveine-400.woff2"},5047:function(e,t,n){"use strict";e.exports=n.p+"common-images/emoji/balloon.5f9b9cca630c5150040a.png"},2956:function(e,t,n){"use strict";e.exports=n.p+"common-images/emoji/blue-hearts.ebc0ea589f44c19be553.png"},7596:function(e,t,n){"use strict";e.exports=n.p+"common-images/emoji/confetti-ball.861f2eb6355af9baf893.png"},8389:function(e,t,n){"use strict";e.exports=n.p+"common-images/emoji/cool-face.9992eb100a8a94771808.png"},3126:function(e,t,n){"use strict";e.exports=n.p+"common-images/emoji/diamond.5956454cf2ede9bb8647.png"},2861:function(e,t,n){"use strict";e.exports=n.p+"common-images/emoji/double-hearts.d89e156bab70f32a84bf.png"},9779:function(e,t,n){"use strict";e.exports=n.p+"common-images/emoji/double-stars.7dfa4d5a32839b745e22.png"},5510:function(e,t,n){"use strict";e.exports=n.p+"common-images/emoji/empty-heart.c8d03f5e14f4342227f5.png"},6366:function(e,t,n){"use strict";e.exports=n.p+"common-images/emoji/fire-flame.e3274cb3b47debd3f321.png"},5791:function(e,t,n){"use strict";e.exports=n.p+"common-images/emoji/folded-hands.8e615a17d91ac1c004af.png"},1492:function(e,t,n){"use strict";e.exports=n.p+"common-images/emoji/grinning-face.027aaa91e1ec6d83cf31.png"},9988:function(e,t,n){"use strict";e.exports=n.p+"common-images/emoji/happy-hand.e642785d5d0a54feabdf.png"},2538:function(e,t,n){"use strict";e.exports=n.p+"common-images/emoji/heart.18131222f15899fa6028.png"},638:function(e,t,n){"use strict";e.exports=n.p+"common-images/emoji/light.96c8140cbb3a41e5fc44.png"},3855:function(e,t,n){"use strict";e.exports=n.p+"common-images/emoji/love-letter.31af910edd102c42964b.png"},1407:function(e,t,n){"use strict";e.exports=n.p+"common-images/emoji/medal.bb60875e556258cb3340.png"},5831:function(e,t,n){"use strict";e.exports=n.p+"common-images/emoji/party-popper.e6d965942dc37fe6b453.png"},9156:function(e,t,n){"use strict";e.exports=n.p+"common-images/emoji/partying-face.fb3ca0f3598d3945dd0e.png"},5966:function(e,t,n){"use strict";e.exports=n.p+"common-images/emoji/prize.c0ac9d546cc94ce74311.png"},2898:function(e,t,n){"use strict";e.exports=n.p+"common-images/emoji/receipt.6202ffcde9900be6e4d8.png"},422:function(e,t,n){"use strict";e.exports=n.p+"common-images/emoji/sad-face.303cb65915ff4d464b3d.png"},4325:function(e,t,n){"use strict";e.exports=n.p+"common-images/emoji/share-hearts.9256001c1dac9528a087.png"},4833:function(e,t,n){"use strict";e.exports=n.p+"common-images/emoji/smiling-face.31e47110dbe5c6ac1659.png"},9616:function(e,t,n){"use strict";e.exports=n.p+"common-images/emoji/star.8dea617b986675b16f09.png"},1109:function(e,t,n){"use strict";e.exports=n.p+"common-images/emoji/thumbs-up.72bd819a8a2f838ac3d1.png"},2238:function(e,t,n){"use strict";e.exports=n.p+"common-images/emoji/trophy.fff762137f7cbde62ae1.png"},9658:function(e){"use strict";e.exports=JSON.parse('{"u":"URL","ck":"companyKey","cm":"checkoutCompanyKey","cd":"clientId","ct":"clientTime","cz":"clientTimeZone","lo":"clientLocale","ek":"elementKey","el":"elementLocale","er":"elementReminderKey","ey":"elementType","ep":"elementParams","et":"eventType","te":"customEventType","ev":"customEventData","ed":"elementData","eg":"eventTags","pv":"pageViewId","pl":"pageViewLifetime","r":"referer","rh":"resolutionHeight","rw":"resolutionWidth","t":"title","hl":"uaHistoryLength","wk":"widgetKey","wh":"windowHeight","wx":"windowScrollX","wy":"windowScrollY","ww":"windowWidth","cv":"checkoutViewId","ce":"checkoutError","co":"checkoutOpenTime","cl":"checkoutLifetime","cs":"checkoutScreen","sd":"checkoutScreenData","cc":"checkoutClickElement","cf":"checkoutFrequency","fp":"clickDOMPath","fh":"clickAHref","ft":"clickText","dk":"chargeCampaignKey","dd":"chargeKey","du":"chargeInUSDAmount","di":"chargeInDefaultCurrencyAmount","da":"chargeAmount","dc":"chargeCurrency","df":"chargeFeeCovered","dm":"chargePaymentMethod","dr":"chargeIsRecurring","dn":"chargeHasComment","dh":"chargeHasTribute","dg":"chargeGoal","st":"splitTestName","sv":"splitTestVariant","pm":"paymentMethod","ws":"widgetSession","lm":"livemode","fv":"funSnippetVersion","fe":"funEmbedRelease","vf":"isFundraiseupVisitor","lc":"checkoutLocale","cr":"checkoutIsRecurring","cy":"checkoutCurrency","ca":"checkoutAmount","cu":"checkoutInUSDAmount","yr":"checkoutCurrencyRate","fa":"checkoutDefaultAmount","cp":"checkoutPresets","ps":"pageScripts","ol":"clientOnLine","dt":"clientDoNotTrack","pr":"clientDevicePixelRatio","rm":"clientDeviceMemory","hc":"clientHardwareConcurrency","nt":"clientConnectionType","nd":"clientConnectionDownlink","nr":"clientConnectionRTT","ne":"clientConnectionEffectiveType","bc":"clientBatteryCharging","bt":"clientBatteryChargingTime","bd":"clientBatteryDischargingTime","bl":"clientBatteryLevel","de":"dataLayerEventName","dp":"dataLayerParams","fn":"pixelEventName","fs":"pixelEventData","gk":"fundraisingGroupKey","pk":"fundraisingPageKey","pc":"fundraisingPageCustomerKey","ec":"eventComment","ba":"uaIsInApp","uw":"uaWebdriver","rd":"duration","se":"source","sk":"supporterKey","ak":"agentKey","pu":"pointingDeviceIsUsed","fo":"donationType","cn":"clientCookieConsent","tt":"checkoutType"}')},472:function(e){"use strict";e.exports=JSON.parse('{"BTC":{"name":"Bitcoin","code":"BTC","symbol":"₿","digits":8,"network":"bitcoin","provider":["gemini","coinbaseCommerce"],"protocol":"","networkName":"Bitcoin","coin":true},"ETH":{"name":"Ethereum","code":"ETH","symbol":"Ξ","digits":8,"network":"ethereum","provider":["gemini","coinbaseCommerce"],"protocol":"ERC-20","networkName":"Ethereum","coin":true},"USDT":{"name":"Tether USD","code":"USDT","symbol":"","digits":8,"network":"ethereum","provider":["coinbaseCommerce"],"protocol":"ERC-20","networkName":"Ethereum","coin":false},"USDC":{"name":"USD Coin","code":"USDC","symbol":"","digits":8,"network":"ethereum","provider":["gemini","coinbaseCommerce"],"protocol":"ERC-20","networkName":"Ethereum","coin":false},"SOL":{"name":"Solana","code":"SOL","symbol":"","digits":8,"network":"solana","provider":["gemini"],"protocol":"","networkName":"Solana","coin":true},"DOT":{"name":"Polkadot","code":"DOT","symbol":"","digits":8,"network":"polkadot","provider":["gemini"],"protocol":"","networkName":"Polkadot","coin":true},"DOGE":{"name":"Dogecoin","code":"DOGE","symbol":"Ð","digits":8,"network":"dogecoin","provider":["gemini","coinbaseCommerce"],"protocol":"","networkName":"Dogecoin","coin":true},"SHIB":{"name":"Shiba Inu","code":"SHIB","symbol":"","digits":8,"network":"ethereum","provider":["gemini","coinbaseCommerce"],"protocol":"ERC-20","networkName":"Ethereum","coin":false},"LTC":{"name":"Litecoin","code":"LTC","symbol":"Ł","digits":8,"network":"litecoin","provider":["gemini","coinbaseCommerce"],"protocol":"","networkName":"Litecoin","coin":true},"BCH":{"name":"Bitcoin Cash","code":"BCH","symbol":"","digits":8,"network":"bitcoincash","provider":["gemini","coinbaseCommerce"],"protocol":"","networkName":"Bitcoin Cash","coin":true},"XTZ":{"name":"Tezos","code":"XTZ","symbol":"ꜩ","digits":8,"network":"tezos","provider":["gemini"],"protocol":"","networkName":"Tezos","coin":true},"FIL":{"name":"Filecoin","code":"FIL","symbol":"","digits":8,"network":"filecoin","provider":["gemini"],"protocol":"","networkName":"Filecoin","coin":true},"FTM":{"name":"Fantom","code":"FTM","symbol":"","digits":8,"network":"ethereum","provider":["gemini"],"protocol":"ERC-20","networkName":"Ethereum","coin":false},"GALA":{"name":"Gala","code":"GALA","symbol":"","digits":8,"network":"ethereum","provider":["gemini"],"protocol":"ERC-20","networkName":"Ethereum","coin":false},"PAXG":{"name":"PAX Gold","code":"PAXG","symbol":"","digits":8,"network":"ethereum","provider":["gemini"],"protocol":"ERC-20","networkName":"Ethereum","coin":false},"ZEC":{"name":"Zcash","code":"ZEC","symbol":"","digits":8,"network":"zcash","provider":["gemini"],"protocol":"","networkName":"Zcash","coin":true}}')},2177:function(e){"use strict";e.exports=JSON.parse('{"SHP":{"name":"St. Helena Pound","code":"SHP","symbol":"£","digits":2},"EUR":{"name":"Euro","code":"EUR","symbol":"€","digits":2},"AED":{"name":"United Arab Emirates Dirham","code":"AED","symbol":"","digits":2},"AFN":{"name":"Afghan Afghani","code":"AFN","symbol":"؋","digits":2},"XCD":{"name":"East Caribbean Dollar","code":"XCD","symbol":"$","digits":2},"ALL":{"name":"Albanian Lek","code":"ALL","symbol":"","digits":2},"AMD":{"name":"Armenian Dram","code":"AMD","symbol":"֏","digits":2},"AOA":{"name":"Angolan Kwanza","code":"AOA","symbol":"Kz","digits":2},"ARS":{"name":"Argentine Peso","code":"ARS","symbol":"$","digits":2},"USD":{"name":"US Dollar","code":"USD","symbol":"$","digits":2},"AUD":{"name":"Australian Dollar","code":"AUD","symbol":"$","digits":2},"ANG":{"name":"Netherlands Antillean Guilder","code":"ANG","symbol":"","digits":2},"AWG":{"name":"Aruban Florin","code":"AWG","symbol":"","digits":2},"AZN":{"name":"Azerbaijani Manat","code":"AZN","symbol":"₼","digits":2},"BAM":{"name":"Bosnia-Herzegovina Convertible Mark","code":"BAM","symbol":"KM","digits":2},"BBD":{"name":"Barbadian Dollar","code":"BBD","symbol":"$","digits":2},"INR":{"name":"Indian Rupee","code":"INR","symbol":"₹","digits":2},"PKR":{"name":"Pakistani Rupee","code":"PKR","symbol":"Rs","digits":2},"BDT":{"name":"Bangladeshi Taka","code":"BDT","symbol":"৳","digits":2},"XOF":{"name":"West African CFA Franc","code":"XOF","symbol":"","digits":0},"BGN":{"name":"Bulgarian Lev","code":"BGN","symbol":"","digits":2},"BHD":{"name":"Bahraini Dinar","code":"BHD","symbol":"","digits":2},"BIF":{"name":"Burundian Franc","code":"BIF","symbol":"","digits":0},"BMD":{"name":"Bermudan Dollar","code":"BMD","symbol":"$","digits":2},"MYR":{"name":"Malaysian Ringgit","code":"MYR","symbol":"RM","digits":2},"BND":{"name":"Brunei Dollar","code":"BND","symbol":"$","digits":2},"BOB":{"name":"Bolivian Boliviano","code":"BOB","symbol":"Bs","digits":2},"BRL":{"name":"Brazilian Real","code":"BRL","symbol":"R$","digits":2},"BSD":{"name":"Bahamian Dollar","code":"BSD","symbol":"$","digits":2},"BTN":{"name":"Bhutanese Ngultrum","code":"BTN","symbol":"","digits":2},"NOK":{"name":"Norwegian Krone","code":"NOK","symbol":"kr","digits":2},"ZAR":{"name":"South African Rand","code":"ZAR","symbol":"R","digits":2},"BWP":{"name":"Botswanan Pula","code":"BWP","symbol":"P","digits":2},"BYN":{"name":"Belarusian Ruble","code":"BYN","symbol":"","digits":2},"BZD":{"name":"Belize Dollar","code":"BZD","symbol":"$","digits":2},"CAD":{"name":"Canadian Dollar","code":"CAD","symbol":"$","digits":2},"CDF":{"name":"Congolese Franc","code":"CDF","symbol":"","digits":2},"XAF":{"name":"Central African CFA Franc","code":"XAF","symbol":"","digits":0},"CHF":{"name":"Swiss Franc","code":"CHF","symbol":"","digits":2},"NZD":{"name":"New Zealand Dollar","code":"NZD","symbol":"$","digits":2},"CLP":{"name":"Chilean Peso","code":"CLP","symbol":"$","digits":0},"CNY":{"name":"Chinese Yuan","code":"CNY","symbol":"¥","digits":2},"COP":{"name":"Colombian Peso","code":"COP","symbol":"$","digits":2},"CRC":{"name":"Costa Rican Colón","code":"CRC","symbol":"₡","digits":2},"CVE":{"name":"Cape Verdean Escudo","code":"CVE","symbol":"","digits":2},"CZK":{"name":"Czech Koruna","code":"CZK","symbol":"Kč","digits":2},"DJF":{"name":"Djiboutian Franc","code":"DJF","symbol":"","digits":0},"DKK":{"name":"Danish Krone","code":"DKK","symbol":"kr","digits":2},"DOP":{"name":"Dominican Peso","code":"DOP","symbol":"$","digits":2},"DZD":{"name":"Algerian Dinar","code":"DZD","symbol":"","digits":2},"EGP":{"name":"Egyptian Pound","code":"EGP","symbol":"E£","digits":2},"MAD":{"name":"Moroccan Dirham","code":"MAD","symbol":"","digits":2},"ETB":{"name":"Ethiopian Birr","code":"ETB","symbol":"","digits":2},"FJD":{"name":"Fijian Dollar","code":"FJD","symbol":"$","digits":2},"FKP":{"name":"Falkland Islands Pound","code":"FKP","symbol":"£","digits":2},"JPY":{"name":"Japanese Yen","code":"JPY","symbol":"¥","digits":0},"GBP":{"name":"British Pound","code":"GBP","symbol":"£","digits":2},"GEL":{"name":"Georgian Lari","code":"GEL","symbol":"₾","digits":2},"GHS":{"name":"Ghanaian Cedi","code":"GHS","symbol":"GH₵","digits":2},"GIP":{"name":"Gibraltar Pound","code":"GIP","symbol":"£","digits":2},"GMD":{"name":"Gambian Dalasi","code":"GMD","symbol":"","digits":2},"GNF":{"name":"Guinean Franc","code":"GNF","symbol":"FG","digits":0},"GTQ":{"name":"Guatemalan Quetzal","code":"GTQ","symbol":"Q","digits":2},"GYD":{"name":"Guyanaese Dollar","code":"GYD","symbol":"$","digits":2},"HKD":{"name":"Hong Kong Dollar","code":"HKD","symbol":"$","digits":2},"HNL":{"name":"Honduran Lempira","code":"HNL","symbol":"L","digits":2},"HRK":{"name":"Croatian Kuna","code":"HRK","symbol":"kn","digits":2},"HTG":{"name":"Haitian Gourde","code":"HTG","symbol":"","digits":2},"HUF":{"name":"Hungarian Forint","code":"HUF","symbol":"Ft","digits":2},"IDR":{"name":"Indonesian Rupiah","code":"IDR","symbol":"Rp","digits":2},"ILS":{"name":"Israeli New Shekel","code":"ILS","symbol":"₪","digits":2},"ISK":{"name":"Icelandic Króna","code":"ISK","symbol":"kr","digits":2},"JMD":{"name":"Jamaican Dollar","code":"JMD","symbol":"$","digits":2},"JOD":{"name":"Jordanian Dinar","code":"JOD","symbol":"","digits":2},"KES":{"name":"Kenyan Shilling","code":"KES","symbol":"","digits":2},"KGS":{"name":"Kyrgystani Som","code":"KGS","symbol":"","digits":2},"KHR":{"name":"Cambodian Riel","code":"KHR","symbol":"៛","digits":2},"KMF":{"name":"Comorian Franc","code":"KMF","symbol":"CF","digits":0},"KRW":{"name":"South Korean Won","code":"KRW","symbol":"₩","digits":0},"KWD":{"name":"Kuwaiti Dinar","code":"KWD","symbol":"","digits":2},"KYD":{"name":"Cayman Islands Dollar","code":"KYD","symbol":"$","digits":2},"KZT":{"name":"Kazakhstani Tenge","code":"KZT","symbol":"₸","digits":2},"LAK":{"name":"Laotian Kip","code":"LAK","symbol":"₭","digits":2},"LBP":{"name":"Lebanese Pound","code":"LBP","symbol":"L£","digits":2},"LKR":{"name":"Sri Lankan Rupee","code":"LKR","symbol":"Rs","digits":2},"LRD":{"name":"Liberian Dollar","code":"LRD","symbol":"$","digits":2},"LSL":{"name":"Lesotho Loti","code":"LSL","symbol":"","digits":2},"MDL":{"name":"Moldovan Leu","code":"MDL","symbol":"","digits":2},"MGA":{"name":"Malagasy Ariary","code":"MGA","symbol":"Ar","digits":0},"MKD":{"name":"Macedonian Denar","code":"MKD","symbol":"","digits":2},"MMK":{"name":"Myanmar Kyat","code":"MMK","symbol":"K","digits":2},"MNT":{"name":"Mongolian Tugrik","code":"MNT","symbol":"₮","digits":2},"MOP":{"name":"Macanese Pataca","code":"MOP","symbol":"","digits":2},"MRO":{"name":"Mauritanian Ouguiya (1973–2017)","code":"MRO","symbol":"","digits":2},"MUR":{"name":"Mauritian Rupee","code":"MUR","symbol":"Rs","digits":2},"MVR":{"name":"Maldivian Rufiyaa","code":"MVR","symbol":"","digits":2},"MWK":{"name":"Malawian Kwacha","code":"MWK","symbol":"","digits":2},"MXN":{"name":"Mexican Peso","code":"MXN","symbol":"$","digits":2},"MZN":{"name":"Mozambican Metical","code":"MZN","symbol":"","digits":2},"NAD":{"name":"Namibian Dollar","code":"NAD","symbol":"$","digits":2},"XPF":{"name":"CFP Franc","code":"XPF","symbol":"","digits":0},"NGN":{"name":"Nigerian Naira","code":"NGN","symbol":"₦","digits":2},"NIO":{"name":"Nicaraguan Córdoba","code":"NIO","symbol":"C$","digits":2},"SEK":{"name":"Swedish Krona","code":"SEK","symbol":"kr","digits":2},"NPR":{"name":"Nepalese Rupee","code":"NPR","symbol":"Rs","digits":2},"OMR":{"name":"Omani Rial","code":"OMR","symbol":"","digits":2},"PAB":{"name":"Panamanian Balboa","code":"PAB","symbol":"","digits":2},"PEN":{"name":"Peruvian Sol","code":"PEN","symbol":"","digits":2},"PGK":{"name":"Papua New Guinean Kina","code":"PGK","symbol":"","digits":2},"PHP":{"name":"Philippine Peso","code":"PHP","symbol":"₱","digits":2},"PLN":{"name":"Polish Zloty","code":"PLN","symbol":"zł","digits":2},"PYG":{"name":"Paraguayan Guarani","code":"PYG","symbol":"₲","digits":0},"QAR":{"name":"Qatari Riyal","code":"QAR","symbol":"","digits":2},"RON":{"name":"Romanian Leu","code":"RON","symbol":"lei","digits":2},"RSD":{"name":"Serbian Dinar","code":"RSD","symbol":"","digits":2},"RUB":{"name":"Russian Ruble","code":"RUB","symbol":"₽","digits":2},"RWF":{"name":"Rwandan Franc","code":"RWF","symbol":"RF","digits":0},"SAR":{"name":"Saudi Riyal","code":"SAR","symbol":"","digits":2},"SBD":{"name":"Solomon Islands Dollar","code":"SBD","symbol":"$","digits":2},"SCR":{"name":"Seychellois Rupee","code":"SCR","symbol":"","digits":2},"SGD":{"name":"Singapore Dollar","code":"SGD","symbol":"$","digits":2},"SLL":{"name":"Sierra Leonean Leone (1964—2022)","code":"SLL","symbol":"","digits":2},"SLE":{"name":"Sierra Leonean Leone","code":"SLE","symbol":"","digits":2},"SOS":{"name":"Somali Shilling","code":"SOS","symbol":"","digits":2},"SRD":{"name":"Surinamese Dollar","code":"SRD","symbol":"$","digits":2},"STD":{"name":"São Tomé & Príncipe Dobra (1977–2017)","code":"STD","symbol":"","digits":2},"SVC":{"name":"Salvadoran Colón","code":"SVC","symbol":"","digits":2},"SZL":{"name":"Swazi Lilangeni","code":"SZL","symbol":"","digits":2},"THB":{"name":"Thai Baht","code":"THB","symbol":"฿","digits":2},"TJS":{"name":"Tajikistani Somoni","code":"TJS","symbol":"","digits":2},"TND":{"name":"Tunisian Dinar","code":"TND","symbol":"","digits":2},"TOP":{"name":"Tongan Paʻanga","code":"TOP","symbol":"T$","digits":2},"TRY":{"name":"Turkish Lira","code":"TRY","symbol":"₺","digits":2},"TTD":{"name":"Trinidad & Tobago Dollar","code":"TTD","symbol":"$","digits":2},"TWD":{"name":"New Taiwan Dollar","code":"TWD","symbol":"$","digits":2},"TZS":{"name":"Tanzanian Shilling","code":"TZS","symbol":"","digits":2},"UAH":{"name":"Ukrainian Hryvnia","code":"UAH","symbol":"₴","digits":2},"UYU":{"name":"Uruguayan Peso","code":"UYU","symbol":"$","digits":2},"UZS":{"name":"Uzbekistani Som","code":"UZS","symbol":"","digits":2},"VND":{"name":"Vietnamese Dong","code":"VND","symbol":"₫","digits":0},"VUV":{"name":"Vanuatu Vatu","code":"VUV","symbol":"","digits":0},"WST":{"name":"Samoan Tala","code":"WST","symbol":"","digits":2},"YER":{"name":"Yemeni Rial","code":"YER","symbol":"","digits":2},"ZMW":{"name":"Zambian Kwacha","code":"ZMW","symbol":"ZK","digits":2}}')},4601:function(e){"use strict";e.exports=JSON.parse('{"AC":["SHP"],"AD":["EUR"],"AE":["AED"],"AF":["AFN"],"AG":["XCD"],"AI":["XCD"],"AL":["ALL"],"AM":["AMD"],"AO":["AOA"],"AR":["ARS"],"AS":["USD"],"AT":["EUR"],"AU":["AUD"],"AW":["AWG","ANG"],"AX":["EUR"],"AZ":["AZN"],"BA":["BAM"],"BB":["BBD","XCD"],"BD":["BDT","PKR","INR"],"BE":["EUR"],"BF":["XOF"],"BG":["BGN","EUR"],"BH":["BHD"],"BI":["BIF"],"BJ":["XOF"],"BL":["EUR"],"BM":["BMD"],"BN":["BND","MYR"],"BO":["BOB"],"BQ":["USD","ANG"],"BR":["BRL"],"BS":["BSD"],"BT":["BTN","INR"],"BV":["NOK"],"BW":["BWP","ZAR"],"BY":["BYN","EUR"],"BZ":["BZD"],"CA":["CAD","USD"],"CC":["AUD"],"CD":["CDF"],"CF":["XAF"],"CG":["XAF"],"CH":["CHF"],"CI":["XOF"],"CK":["NZD"],"CL":["CLP"],"CM":["XAF"],"CN":["CNY"],"CO":["COP"],"CR":["CRC"],"CS":["EUR"],"CU":["USD"],"CV":["CVE"],"CW":["ANG"],"CX":["AUD"],"CY":["EUR"],"CZ":["CZK","EUR"],"DE":["EUR"],"DG":["USD"],"DJ":["DJF"],"DK":["DKK","EUR"],"DM":["XCD"],"DO":["DOP","USD"],"DZ":["DZD"],"EA":["EUR"],"EC":["USD"],"EE":["EUR"],"EG":["EGP"],"EH":["MAD"],"ER":["ETB"],"ES":["EUR"],"ET":["ETB"],"EU":["EUR"],"FI":["EUR"],"FJ":["FJD"],"FK":["FKP"],"FM":["USD","JPY"],"FO":["DKK"],"FR":["EUR"],"GA":["XAF"],"GB":["GBP","EUR"],"GD":["XCD"],"GE":["GEL"],"GF":["EUR"],"GG":["GBP"],"GH":["GHS"],"GI":["GIP"],"GL":["DKK"],"GM":["GMD"],"GN":["GNF"],"GP":["EUR"],"GQ":["XAF"],"GR":["EUR"],"GS":["GBP"],"GT":["GTQ"],"GU":["USD"],"GW":["XOF"],"GY":["GYD"],"HK":["HKD"],"HM":["AUD"],"HN":["HNL"],"HR":["EUR"],"HT":["USD","HTG"],"HU":["HUF","EUR"],"IC":["EUR"],"ID":["IDR"],"IE":["EUR","GBP"],"IL":["ILS"],"IM":["GBP"],"IN":["INR"],"IO":["USD"],"IQ":["INR","EGP"],"IS":["ISK","DKK"],"IT":["EUR"],"JE":["GBP"],"JM":["JMD"],"JO":["JOD"],"JP":["JPY"],"KE":["KES"],"KG":["KGS"],"KH":["KHR"],"KI":["AUD"],"KM":["KMF"],"KN":["XCD"],"KR":["KRW"],"KW":["KWD"],"KY":["KYD","JMD"],"KZ":["KZT"],"LA":["LAK"],"LB":["LBP"],"LC":["XCD"],"LI":["CHF"],"LK":["LKR"],"LR":["LRD"],"LS":["LSL","ZAR"],"LT":["EUR"],"LU":["EUR"],"LV":["EUR"],"MA":["MAD"],"MC":["EUR"],"MD":["MDL"],"ME":["EUR"],"MF":["EUR"],"MG":["MGA"],"MH":["USD"],"MK":["MKD"],"ML":["XOF","XOF"],"MM":["MMK"],"MN":["MNT"],"MO":["MOP"],"MP":["USD"],"MQ":["EUR"],"MR":["XOF"],"MS":["XCD"],"MT":["EUR"],"MU":["MUR"],"MV":["MVR"],"MW":["MWK"],"MX":["MXN","USD"],"MY":["MYR"],"MZ":["MZN"],"NA":["NAD","ZAR"],"NC":["XPF"],"NE":["XOF"],"NF":["AUD"],"NG":["NGN"],"NI":["NIO"],"NL":["EUR"],"NO":["NOK","SEK","EUR"],"NP":["NPR","INR"],"NR":["AUD"],"NU":["NZD"],"NZ":["NZD"],"OM":["OMR"],"PA":["USD","PAB"],"PE":["PEN"],"PF":["XPF"],"PG":["PGK","AUD"],"PH":["PHP"],"PK":["PKR","INR"],"PL":["PLN","EUR"],"PM":["EUR"],"PN":["NZD"],"PR":["USD"],"PS":["JOD","ILS","JOD"],"PT":["EUR"],"PW":["USD"],"PY":["PYG"],"QA":["QAR"],"RE":["EUR"],"RO":["RON","EUR"],"RS":["RSD"],"RU":["RUB","EUR"],"RW":["RWF"],"SA":["SAR"],"SB":["SBD","AUD"],"SC":["SCR"],"SD":["GBP","EGP"],"SE":["SEK","EUR"],"SG":["SGD","MYR"],"SH":["SHP"],"SI":["EUR"],"SJ":["NOK"],"SK":["EUR"],"SL":["SLE","GBP","SLL"],"SM":["EUR"],"SN":["XOF"],"SO":["SOS"],"SR":["SRD"],"ST":["USD"],"SV":["USD"],"SX":["ANG"],"SZ":["SZL"],"TA":["GBP"],"TC":["USD"],"TD":["XAF"],"TF":["EUR"],"TG":["XOF"],"TH":["THB"],"TJ":["TJS"],"TK":["NZD"],"TL":["USD","IDR"],"TN":["TND"],"TO":["TOP"],"TP":["IDR"],"TR":["TRY"],"TT":["TTD"],"TV":["AUD"],"TW":["TWD"],"TZ":["TZS"],"UA":["UAH","EUR"],"UM":["USD"],"US":["USD"],"UY":["UYU"],"UZ":["UZS"],"VA":["EUR"],"VC":["XCD"],"VG":["GBP","USD"],"VI":["USD"],"VN":["VND"],"VU":["VUV"],"WF":["XPF"],"WS":["WST"],"XK":["EUR"],"YE":["YER"],"YT":["EUR","KMF"],"ZA":["ZAR"],"ZM":["ZMW"],"ZW":["USD"]}')},4025:function(e){"use strict";e.exports=JSON.parse('{"name":"ACH","provider":"stripe","donorPortalSubscriptionEditor":{"amount":{"availableAll":true},"currency":["USD"],"companyCountry":["US"],"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"dashboardSubscriptionEditor":{"amount":{"availableAll":true},"currency":["USD"],"companyCountry":["US"],"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"widget":{"amount":{"minAmount":{"size":9500,"currency":"USD"}},"currency":["USD"],"companyCountry":["US"],"customerCountry":{"availableAll":true},"email":{"required":true},"address":{"required":false},"repeat":["once","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"virtualTerminal":{"amount":{"availableAll":true},"currency":["USD"],"companyCountry":["US"],"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]}}')},8913:function(e){"use strict";e.exports=JSON.parse('{"name":"ACSS","provider":"stripe","donorPortalSubscriptionEditor":{"amount":{"availableAll":true},"currency":["CAD"],"companyCountry":["CA","US"],"customerCountry":{"availableAll":true},"email":{"required":true},"address":{"required":false},"repeat":["once","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"dashboardSubscriptionEditor":{"amount":{"availableAll":true},"currency":["CAD"],"companyCountry":["CA","US"],"customerCountry":{"availableAll":true},"email":{"required":true},"address":{"required":false},"repeat":["once","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"widget":{"amount":{"minAmount":{"size":200,"currency":"CAD"}},"currency":["CAD"],"companyCountry":["CA","US"],"customerCountry":{"availableAll":true},"email":{"required":true},"address":{"required":false},"repeat":["once","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"virtualTerminal":{"amount":{"availableAll":true},"currency":["CAD"],"companyCountry":["CA","US"],"customerCountry":{"availableAll":true},"email":{"required":true},"address":{"required":false},"repeat":["once","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]}}')},8825:function(e){"use strict";e.exports=JSON.parse('{"name":"Apple Pay","provider":"stripe","donorPortalSubscriptionEditor":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"dashboardSubscriptionEditor":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"widget":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"virtualTerminal":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]}}')},4776:function(e){"use strict";e.exports=JSON.parse('{"name":"BECS Direct Debit","provider":"stripe","donorPortalSubscriptionEditor":{"amount":{"minAmount":{"size":200,"currency":"AUD"}},"currency":["AUD"],"companyCountry":["AU"],"customerCountry":{"availableAll":true},"email":{"required":true},"address":{"required":false},"repeat":["once","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"dashboardSubscriptionEditor":{"amount":{"availableAll":true},"currency":["AUD"],"companyCountry":["AU"],"customerCountry":{"availableAll":true},"email":{"required":true},"address":{"required":false},"repeat":["once","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"widget":{"amount":{"minAmount":{"size":200,"currency":"AUD"}},"currency":["AUD"],"companyCountry":["AU"],"customerCountry":{"availableAll":true},"email":{"required":true},"address":{"required":false},"repeat":["once","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"virtualTerminal":{"amount":{"availableAll":true},"currency":["AUD"],"companyCountry":["AU"],"customerCountry":{"availableAll":true},"email":{"required":true},"address":{"required":false},"repeat":["once","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]}}')},4246:function(e){"use strict";e.exports=JSON.parse('{"name":"Click to Pay","provider":"stripe","donorPortalSubscriptionEditor":{"amount":{"availableAll":true},"currency":["USD"],"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"dashboardSubscriptionEditor":{"amount":{"availableAll":true},"currency":["USD"],"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"widget":{"amount":{"availableAll":true},"currency":["USD"],"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"virtualTerminal":{"amount":{"availableAll":true},"currency":["USD"],"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]}}')},9392:function(e){"use strict";e.exports=JSON.parse('{"name":"Credit Card","provider":"stripe","donorPortalSubscriptionEditor":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"dashboardSubscriptionEditor":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"widget":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"virtualTerminal":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]}}')},5718:function(e){"use strict";e.exports=JSON.parse('{"name":"Crypto","provider":"gemini","donorPortalSubscriptionEditor":{},"dashboardSubscriptionEditor":{},"widget":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once"]},"virtualTerminal":{}}')},7958:function(e){"use strict";e.exports=JSON.parse('{"name":"Google Pay","provider":"stripe","donorPortalSubscriptionEditor":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"dashboardSubscriptionEditor":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"widget":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"virtualTerminal":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]}}')},2876:function(e){"use strict";e.exports=JSON.parse('{"name":"iDEAL","provider":"stripe","donorPortalSubscriptionEditor":{"amount":{"minAmount":{"size":200,"currency":"EUR"}},"currency":["EUR"],"companyCountry":["AT","BE","CY","EE","FI","FR","DE","GR","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SG","SK","SI","ES","SE","NO","US","CH","AU","BG","CA","HR","CZ","DK","GI","HK","HU","JP","LI","MX","NZ","GB"],"customerCountry":["NL","BE","LU","DE"],"email":{"required":true},"address":{"required":false},"repeat":["once","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"dashboardSubscriptionEditor":{},"widget":{"amount":{"minAmount":{"size":200,"currency":"EUR"}},"currency":["EUR"],"companyCountry":["AT","BE","CY","EE","FI","FR","DE","GR","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SG","SK","SI","ES","SE","NO","US","CH","AU","BG","CA","HR","CZ","DK","GI","HK","HU","JP","LI","MX","NZ","GB"],"customerCountry":["NL","BE","LU","DE"],"email":{"required":true},"address":{"required":false},"repeat":["once","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"virtualTerminal":{}}')},8524:function(e){"use strict";e.exports=JSON.parse('{"name":"PayPal","provider":"paypal","donorPortalSubscriptionEditor":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"dashboardSubscriptionEditor":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"widget":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"virtualTerminal":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","daily","weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]}}')},6631:function(e){"use strict";e.exports=JSON.parse('{"name":"Plaid","provider":"stripe","donorPortalSubscriptionEditor":{"amount":{"availableAll":true},"currency":["USD"],"companyCountry":["US"],"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"dashboardSubscriptionEditor":{"amount":{"availableAll":true},"currency":["USD"],"companyCountry":["US"],"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"widget":{"amount":{"availableAll":true},"currency":["USD"],"companyCountry":["US"],"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"virtualTerminal":{"amount":{"availableAll":true},"currency":["USD"],"companyCountry":["US"],"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]}}')},7012:function(e){"use strict";e.exports=JSON.parse('{"name":"SEPA Direct Debit","provider":"stripe","donorPortalSubscriptionEditor":{"amount":{"minAmount":{"size":200,"currency":"EUR"}},"currency":["EUR"],"repeat":["once","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"],"companyCountry":["AT","BE","CY","EE","FI","FR","DE","GR","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SG","SK","SI","ES","SE","NO","US","CH","AU","BG","CA","HR","CZ","DK","GI","HK","HU","JP","LI","MX","NZ","GB"],"customerCountry":{"availableAll":true},"email":{"required":true},"address":{"required":true}},"dashboardSubscriptionEditor":{"amount":{"availableAll":true},"currency":["EUR"],"repeat":["once","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"],"companyCountry":["AT","BE","CY","EE","FI","FR","DE","GR","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SG","SK","SI","ES","SE","NO","US","CH","AU","BG","CA","HR","CZ","DK","GI","HK","HU","JP","LI","MX","NZ","GB"],"customerCountry":{"availableAll":true},"email":{"required":true},"address":{"required":true}},"widget":{"amount":{"minAmount":{"size":200,"currency":"EUR"}},"currency":["EUR"],"companyCountry":["AT","BE","CY","EE","FI","FR","DE","GR","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SG","SK","SI","ES","SE","NO","US","CH","AU","BG","CA","HR","CZ","DK","GI","HK","HU","JP","LI","MX","NZ","GB"],"customerCountry":{"availableAll":true},"email":{"required":true},"address":{"requiredIfIbanCountry":["AD","PF","TF","GI","GB","GG","VA","IM","JE","MC","NC","BL","PM","SM","CH","WF"]},"repeat":["once","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"virtualTerminal":{"amount":{"availableAll":true},"currency":["EUR"],"companyCountry":["AT","BE","CY","EE","FI","FR","DE","GR","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SG","SK","SI","ES","SE","NO","US","CH","AU","BG","CA","HR","CZ","DK","GI","HK","HU","JP","LI","MX","NZ","GB"],"address":{"requiredIfIbanCountry":["AD","PF","TF","GI","GB","GG","VA","IM","JE","MC","NC","BL","PM","SM","CH","WF"]},"email":{"required":true},"repeat":["once","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]}}')},5199:function(e){"use strict";e.exports=JSON.parse('{"name":"Stock","provider":"manualBrokerage","donorPortalSubscriptionEditor":{},"dashboardSubscriptionEditor":{},"widget":{"amount":{"availableAll":true},"currency":{"availableAll":true},"companyCountry":{"availableAll":true},"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once"]},"virtualTerminal":{}}')},7804:function(e){"use strict";e.exports=JSON.parse('{"name":"Bacs Direct Debit","provider":"stripe","donorPortalSubscriptionEditor":{"amount":{"minAmount":{"size":200,"currency":"GBP"}},"currency":["GBP"],"companyCountry":["GB"],"customerCountry":{"availableAll":true},"email":{"required":true},"address":{"required":true},"repeat":["weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"dashboardSubscriptionEditor":{"amount":{"availableAll":true},"currency":["GBP"],"companyCountry":["GB"],"customerCountry":{"availableAll":true},"email":{"required":true},"address":{"required":true},"repeat":["weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"widget":{"amount":{"minAmount":{"size":200,"currency":"GBP"}},"currency":["GBP"],"companyCountry":["GB"],"customerCountry":{"availableAll":true},"email":{"required":true},"address":{"required":true},"repeat":["weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"virtualTerminal":{"amount":{"availableAll":true},"currency":["GBP"],"companyCountry":["GB"],"customerCountry":{"availableAll":true},"email":{"required":true},"address":{"required":true},"repeat":["weekly","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]}}')},2384:function(e){"use strict";e.exports=JSON.parse('{"name":"ACH","provider":"stripe","donorPortalSubscriptionEditor":{"amount":{"availableAll":true},"currency":["USD"],"companyCountry":["US"],"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"dashboardSubscriptionEditor":{"amount":{"availableAll":true},"currency":["USD"],"companyCountry":["US"],"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"widget":{"amount":{"availableAll":true},"currency":["USD"],"companyCountry":["US"],"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]},"virtualTerminal":{"amount":{"availableAll":true},"currency":["USD"],"companyCountry":["US"],"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once","biweekly","every4weeks","monthly","bimonthly","quarterly","semiannual","annual"]}}')},9576:function(e){"use strict";e.exports=JSON.parse('{"name":"Venmo","provider":"paypal","donorPortalSubscriptionEditor":{},"dashboardSubscriptionEditor":{},"widget":{"amount":{"availableAll":true},"currency":["USD"],"companyCountry":["US"],"customerCountry":{"availableAll":true},"email":{"required":false},"address":{"required":false},"repeat":["once"]},"virtualTerminal":{}}')}},o={};function r(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={id:e,loaded:!1,exports:{}};return a[e].call(n.exports,n,n.exports,r),n.loaded=!0,n.exports}r.m=a,e=[],r.O=function(t,n,i,s){if(!n){var a=1/0;for(u=0;u<e.length;u++){n=e[u][0],i=e[u][1],s=e[u][2];for(var o=!0,c=0;c<n.length;c++)(!1&s||a>=s)&&Object.keys(r.O).every((function(e){return r.O[e](n[c])}))?n.splice(c--,1):(o=!1,s<a&&(a=s));if(o){e.splice(u--,1);var l=i();void 0!==l&&(t=l)}}return t}s=s||0;for(var u=e.length;u>0&&e[u-1][2]>s;u--)e[u]=e[u-1];e[u]=[n,i,s]},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},n=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},r.t=function(e,i){if(1&i&&(e=this(e)),8&i)return e;if("object"==typeof e&&e){if(4&i&&e.__esModule)return e;if(16&i&&"function"==typeof e.then)return e}var s=Object.create(null);r.r(s);var a={};t=t||[null,n({}),n([]),n(n)];for(var o=2&i&&e;"object"==typeof o&&!~t.indexOf(o);o=n(o))Object.getOwnPropertyNames(o).forEach((function(t){a[t]=function(){return e[t]}}));return a.default=function(){return e},r.d(s,a),s},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.f={},r.e=function(e){return Promise.all(Object.keys(r.f).reduce((function(t,n){return r.f[n](e,t),t}),[]))},r.u=function(e){return({173:"legacy-currency-filter",180:"checkout-locale19",234:"checkout-locale4",245:"checkout-locale3",326:"sentry",381:"checkout-locale10",425:"checkout-locale7",436:"checkout-locale2",471:"checkout-locale9",472:"checkout-sentry-vendor",519:"checkout-locale23",561:"checkout-locale14",572:"checkout-locale11",616:"checkout-locale6",627:"checkout-locale5",639:"checkout-locale1",645:"checkout-rtl-styles",662:"checkout-locale8",706:"checkout-styles",710:"checkout-locale22",740:"checkout-locale20",752:"checkout-locale15",763:"checkout-locale16",775:"checkout-locale12",830:"checkout-locale0",901:"checkout-locale21",954:"checkout-locale17",966:"checkout-locale13",989:"checkout-locale18"}[e]||e)+"."+{173:"7fa5f95635419e9f61cf",180:"aab7430cd1c7465c95a2",234:"7ca9ec7cafdc9a1be9f3",245:"ec68cabc2020c9bf6a34",326:"46b6f0102ca61d57107d",381:"41858fbf40ce6129d058",425:"0fbdef83c99803bb4f29",429:"33b1062a6d5e3cc61d18",436:"bffd510e767e461d506e",471:"0866a8af750723c3c894",472:"3e622619be4cd541fdff",519:"b446ae765205ffc87b3b",561:"759c98c701ade120574b",572:"84020ba77e0361f6882a",616:"9baacc53e7ae5836cace",624:"1c828d6c0a0dc15ba452",627:"fe84c9fa7920fb5a41c0",639:"df9b7040c742fb2399c6",645:"c4a1b627a2f22f44331a",662:"65dc74eea2d1380ce0fd",672:"df1e1929791250da8875",706:"6a81a3fea01f72465e1d",710:"d7ce4af4df80c7b5a4c5",740:"d3c767dd39b930c1f90e",752:"4b526a7da6e87645aaad",763:"4a57eadacbeb02773177",772:"76ced162886cbccddff9",775:"955910eb5a938c418bf2",806:"5004929529a1a3b0fb24",830:"ad0a39fdc87d89340159",833:"1ead1f2378d7a12d5129",901:"b2968a885fda79ad7211",954:"36d2f4478ee3b0392c9f",966:"9c9c9f4246e914ec03b3",989:"bb17d0ce3e9f843517b5"}[e]+".js"},r.miniCssF=function(e){},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i={},s="@fundraiseup/checkout:",r.l=function(e,t,n,a){if(i[e])i[e].push(t);else{var o,c;if(void 0!==n)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var d=l[u];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==s+n){o=d;break}}o||(c=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,r.nc&&o.setAttribute("nonce",r.nc),o.setAttribute("data-webpack",s+n),o.src=e),i[e]=[t];var h=function(t,n){o.onerror=o.onload=null,clearTimeout(m);var s=i[e];if(delete i[e],o.parentNode&&o.parentNode.removeChild(o),s&&s.forEach((function(e){return e(n)})),t)return t(n)},m=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),c&&document.head.appendChild(o)}},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},r.p="https://static.fundraiseup.com/",function(){r.b=document.baseURI||self.location.href;var e={251:0};r.f.j=function(t,n){var i=r.o(e,t)?e[t]:void 0;if(0!==i)if(i)n.push(i[2]);else{var s=new Promise((function(n,s){i=e[t]=[n,s]}));n.push(i[2]=s);var a=r.p+r.u(t),o=new Error;r.l(a,(function(n){if(r.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+a+")",o.name="ChunkLoadError",o.type=s,o.request=a,i[1](o)}}),"chunk-"+t,t)}},r.O.j=function(t){return 0===e[t]};var t=function(t,n){var i,s,a=n[0],o=n[1],c=n[2],l=0;if(a.some((function(t){return 0!==e[t]}))){for(i in o)r.o(o,i)&&(r.m[i]=o[i]);if(c)var u=c(r)}for(t&&t(n);l<a.length;l++)s=a[l],r.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return r.O(u)},n=self.webpackChunk_fundraiseup_checkout=self.webpackChunk_fundraiseup_checkout||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var c=r.O(void 0,[521],(function(){return r(6821)}));c=r.O(c)}();