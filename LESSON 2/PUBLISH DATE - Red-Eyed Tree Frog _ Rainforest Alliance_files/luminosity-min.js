/*! For license information please see luminosity-min.js.LICENSE.txt */
!function(e){function n(e){if("img"===e.tagName.toLowerCase())return e.src&&e.complete&&0!==e.naturalHeight?t(e,e.src):Promise.resolve(null);const n=getComputedStyle(e),o=n.backgroundImage,i=n.backgroundColor;return o&&"none"!==o?t(e,o):i&&"rgba(0, 0, 0, 0)"!==i&&"transparent"!==i?Promise.resolve(function(e){const n=e.match(/\d+/g).map(Number);return{r:n[0],g:n[1],b:n[2]}}(i)):Promise.resolve(null)}function t(e,n){return new Promise((t=>{const o=new Image,i=document.createElement("canvas"),r=i.getContext("2d");let l=n.replace(/url\((['"])?(.*?)\1\)/gi,"$2");l=l.replace(/['"]/g,"").trim(),l=l.split("?")[0],o.crossOrigin="",o.src=l,o.onload=()=>{const n=e.clientWidth,l=Math.min(75,o.height);i.width=n,i.height=l,r.drawImage(o,0,0,n,l,0,0,n,l);try{const e=r.getImageData(0,0,n,l).data;let o=0,i=0,s=0;for(let n=0;n<e.length;n+=20)o+=e[n],i+=e[n+1],s+=e[n+2];const a=e.length/20;t({r:o/a,g:i/a,b:s/a})}catch(e){console.error("[luminosity]: Canvas is tainted due to cross-origin image",e),t(null)}},o.onerror=e=>{console.error("[luminosity]: Failed to load image:",e),t(null)}}))}function o(e){if(null===e)return 0;const{r:n,g:t,b:o}=e;return.2126*n+.7152*t+.0722*o}window.assignLuminosityTo=function(e,t,i,r,l=128){n(e).then((e=>{null!==e&&(o(e)>l?t.classList.add(r):t.classList.add(i))}))},window.assignLuminosityToSiteHeaderBasedOnBackground=function(t=128){const i=function(){if(e("body").hasClass("taxonomy_archive_root")){console.log("[luminosity]: .taxonomy_archive_root found");let n=e(".site-container .site-inner .ra-hero--image");return n.length?n[0]:null}if(e("body").hasClass("is_tax")){console.log("[luminosity]: .is_tax found");let n=e(".site-container .site-inner .ra-hero--image");return n.length?n[0]:null}if(e("body").hasClass("post-type-archive")){console.log("[luminosity]: .post-type-archive");let n=e(".site-container .site-inner .ra-hero--image");return n.length?n[0]:null}if(e("body").hasClass("leadership")){console.log("[luminosity]: .leadership");let n=e(".site-container .site-inner .ra-hero--image");return n.length?n[0]:null}if(e(".site-inner").children(".wrap").first().children(".ra-hero--image").first().length){console.log("[luminosity]: .outside of entry-content");let n=e(".site-container .site-inner > .wrap > .ra-hero--image");return n.length?n[0]:null}var n=e(".entry-content").children(".wp-block-cover").first();if(n.length){var t=n.find(".wp-block-cover__image-background");return t.length?t[0]:null}return null}();if(null===i)return void console.log("[luminosity]: no image found; no change made.");const r="luminosity-dark";n(i).then((e=>{if(null===e)return void console.log("[luminosity]: no image found; no change made.");const n=o(e),i=document.getElementById("js-site-header");n<t?(console.log("[luminosity]: Image is dark ("+n+"); '"+r+"' class assigned to #site-header"),i.classList.add(r),i.classList.remove("luminosity-light")):console.log("[luminosity]: Image is light ("+n+"); no change made.")}))}}(jQuery);
//# sourceMappingURL=luminosity-min.js.map