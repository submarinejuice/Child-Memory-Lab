var CS_CONF={"useLambdaBuild":false,"collectionEnabled":true,"useSentry":false,"isSMB":false,"projectId":28848,"status":1,"hostnames":["trupanion.com","qualtrics.com","testsf.trupanion.com"],"crossDomainTracking":1,"crossDomainSingleIframeTracking":1,"consentRequired":0,"allowSubdomains":1,"visitorCookieTimeout":34164000000,"sampleRate":100,"replayRecordingRate":50,"validationRate":10,"lastTrackingDraw":1676407724,"trackerDomain":"c.az.contentsquare.net","recordingDomain":"r.contentsquare.net","useMalkaPipeline":1,"ed":"l.contentsquare.net/log/web","eMerchandisingEnabled":0,"mouseMoveHeatmapEnabled":1,"autoInsightsEnabled":0,"jsErrorsEnabled":1,"customErrorsEnabled":1,"jsCustomErrorsEnabled":0,"apiErrorsEnabled":1,"customHashIdEnabled":0,"recordingEncryptionEnabled":0,"recordingEncryptionPublicKey":null,"recordingEncryptionPublicKeyId":0,"secureCookiesEnabled":0,"triggerSessionReplayEnabled":0,"triggerSessionReplayRegex":null,"dynamicIdRegex":null,"whitelistedAttributes":[],"replayRecordingUnmaskedUrlRegex":null,"replayRecordingUnmaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegex":null,"anonymisationMethod":null,"tagDeploymentMode":"CONTENTSQUARE","experimental":null,"iframesTracking":0,"textVisibilityEnabled":1,"cookielessTrackingEnabled":0,"malkaUrlEnabled":0,"malkaEtrEnabled":1,"pathComputationRules":{"reliableSelectors":[],"uniqueAttributes":[],"uniqueCssSelectors":[]},"asyncSerializerEnabled":1,"pendingInactivityTimeout":5000,"accessibilityEnabled":0,"uxaDomain":"app.contentsquare.com","webviewsTrackingEnabled":0,"useStaticResourceManager":1,"performanceTimingOptions":{"withResource":false,"withNavigation":false},"replayConsentRequiredForSession":0,"eventsApiEnabled":0,"clickedElementTextEnabled":0,"collectHierarchy":0,"collectSubmit":0,"collectTargetText":0,"apiErrors":{"collectStandardHeaders":0,"collectionRules":[]},"customErrors":{"consoleMessageLogLevels":[]},"displayAdOptions":null,"taskSchedulerOptions":{"enabled":1},"malkaQuotaServiceDomain":"q-us1.az.contentsquare.net","malkaRecordingDomain":"k-us1.az.contentsquare.net","staticResourceManagerDomain":"srm.af.contentsquare.net","voc":{"siteId":null,"enabled":0}};

var CS_INTEGRATIONS_CONF = {"qualtrics":{},"datadog":{"settings":[],"vendorSettings":{"domain":"app.datadoghq.com"}},"yieldify":{},"optimizely":{},"marketo":{}};
/* integration-qualtrics 3.2.0 */
!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e){e.exports=JSON.parse('{"displayName":"Qualtrics","dvarPrefix":"FB_QT_","apvPrefix":"cs_qualtrics","replayKey":"qt"}')},function(e){e.exports=JSON.parse('{"name":"@contentsquare/integration-qualtrics-contentsquare","version":"3.2.0","scripts":{"build:snippet":"webpack"}}')},function(e,t,n){"use strict";function i(e,t){try{e()}catch(e){window._uxa=window._uxa||[],window._uxa.push(["logSnippetError",t,e.message]),(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&console.log(`%cCSQ INTEGRATION ERROR: [${t}] : ${e.message}`,"color:rgb(228, 25, 45); font-weight: bold")}}function o(e,t){let n=!1;window._uxa=window._uxa||[],window._uxa.push(["afterPageView",function(i){t?n||(e(i),n=!0):e(i)}])}function a(e,t){function n(e){return"object"==typeof e&&null!==e}if(n(window.CS_INTEGRATIONS_CONF)&&n(window.CS_INTEGRATIONS_CONF[e]))return window.CS_INTEGRATIONS_CONF[e][t]}function c(e){const t=e+"=",n=document.cookie.split(";");for(let e=0;e<n.length;e++){let i=n[e];for(;" "==i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return""}function s(){let e=0,t=document.location.host;const n=t.split("."),i="_cs_tld"+(new Date).getTime();for(;e<n.length-1&&-1==document.cookie.indexOf(i+"="+i);)t=n.slice(-1-++e).join("."),document.cookie=i+"="+i+";domain="+t+";SameSite=None;Secure";return document.cookie=i+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain="+t+";",t}function r(e){return e.toString().replace(/[^\w. ]/gi,(function(e){return"&#"+e.charCodeAt(0)+";"}))}function u(e){return Array.isArray(e)}function d(e,t){t||(t="="),e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&=]"+e+t+"([^&#]*)").exec(location.search);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))}n.r(t);function l(e,t){!!(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&console.log(`%cCSQ INTEGRATION: [${e}] : ${t}`,"color: #2a9d8f; font-weight: bold")}var f=n(0);const p=function(e){let t,n,o,a;if(i((function(){const i=e.name;t=e.version;const c=i.replace("@contentsquare/integration-","");n=c+"-"+t;let s="-contentsquare";a=new RegExp(s+"$").test(c),o=c.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),a||(s="-cap",a=new RegExp(s+"$").test(c),o=c.replace(/-cap([^-cap]*)$/,"$1"))}),"Shared-Function-readPackageJSON"),a)return{snippetBuildName:n,parameterName:o,snippetVersion:t}}(n(1)),g=p.parameterName,_=p.snippetBuildName,S=p.snippetVersion;i((function(){const e=f.displayName,t=f.dvarPrefix,n=f.apvPrefix,p=f.replayKey;var m,w;m=e,w=S,CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push(m+" - v"+w);let y=!1;window.self!=window.top&&(y=CS_CONF.iframesTracking);const b=a(g,"settings"),h=u(b)?b:[],C=h.includes("sendArtificialPageviews"),D=h.includes("setReplayLinkToCurrentPV");let I=!1;function v(e,n,i,o){(function(e,t){window._uxa=window._uxa||[],window._uxa.push(["trackDynamicVariable",{key:e,value:t}])})(e=t+function(e){if(e){return((new DOMParser).parseFromString(e,"text/html").body.textContent||"").trim()}return""}(e),n),I&&"etr"===i&&function(e){window._uxa=window._uxa||[],window._uxa.push(["trackEventTriggerRecording","@ETS@"+e])}(e),o&&C&&function(e){window._uxa=window._uxa||[],window._uxa.push(["trackPageview",e])}(window.location.pathname+"?"+o),l(_,`Dynamic variable with ${e} and value ${n} sent`)}function T(){const e={contentsquare_integration:c("_cs_s"),vendor:"qualtrics"};window.opener?window.opener.postMessage(e,"*"):window.self!=window.top&&window.top.postMessage(e,"*")}if(window.Qualtrics&&Qualtrics.SurveyEngine&&"function"==typeof Qualtrics.SurveyEngine.addOnPageSubmit){if(!y){let e;if(window._cs_integration_qualtrics_postmessage_csid||window.ClickTaleSettings&&ClickTaleSettings.PTC&&ClickTaleSettings.PTC.IntegrationHandler&&ClickTaleSettings.PTC.IntegrationHandler.UserValues)window._cs_integration_qualtrics_postmessage_csid?e=_cs_integration_qualtrics_postmessage_csid:ClickTaleSettings.PTC.IntegrationHandler.UserValues&&(e=ClickTaleSettings.PTC.IntegrationHandler.UserValues);else{const t=document.location.search;t.indexOf("CSID=")>-1?e=d("CSID"):CS_CONF.ptcDomain&&t.indexOf("CT_UID=")>-1?e=d("CT_UID"):window._cs_integration_qualtrics_csid&&(e=decodeURIComponent(_cs_integration_qualtrics_csid))}if(e&&"null"!=e){const t=e.split("~"),n=t[0],i=t[1],o=t[2],a=t[3],c=s();n&&i&&o&&(a?document.cookie="_cs_optout="+a+";domain="+c+";path=/;SameSite=None;Secure":(document.cookie="_cs_optout=;domain="+c+";path=/;expires=Thu, 01-Jan-1970 00:00:01 GMT;SameSite=None;Secure",document.cookie="_cs_optout=;path=/;expires=Thu, 01-Jan-1970 00:00:01 GMT;SameSite=None;Secure",document.cookie="_cs_optout=;domain=."+document.location.host+";path=/;expires=Thu, 01-Jan-1970 00:00:01 GMT;SameSite=None;Secure"),document.cookie="_cs_id="+n+";domain="+c+";path=/;SameSite=None;Secure",document.cookie="_cs_s="+i+";domain="+c+";path=/;SameSite=None;Secure",document.cookie="_cs_c="+o+";domain="+c+";path=/;SameSite=None;Secure")}}let e;function x(){if(!y){let e=c("_cs_s");if(e&&e.indexOf(".T.")>-1){const t=setInterval((function(){i((function(){e=c("_cs_s"),e&&-1===e.indexOf(".T.")&&(clearInterval(t),T())}),_)}),500)}else T()}}window.Page?e=!1:window.q&&(e=!0),setTimeout((function(){(function(e,t,n,i){return new Promise((function(o,a){function c(){window._uxa.push(["replay:link:generate",{withTimestamp:n},s])}function s(i){if(i&&i.replayLink&&i.isRecording){let a="https://"+i.replayLink+"&vd="+e;if(!t&&!n){const e=new URLSearchParams(a);e.set("pvid",1);const t=e.toString();a=decodeURIComponent(t)}o(a)}}e||(e="missingFromDynamicSnippet"),n||(n=!1),i?c():(window._uxa=window._uxa||[],window._uxa.push(["onRecordingStateChange",function(e){e&&e.isRecording&&c()}]))}))})(p,D,!1,y).then((function(t){i((function(){if(I=!0,t&&Qualtrics.SurveyEngine){const n=Qualtrics.SurveyEngine;let i;CS_CONF.ptcDomain&&(i="ClicktaleSpecificRecording",!0===e&&"function"==typeof n.setJSEmbeddedData?n.setJSEmbeddedData(i,t):!1===e&&"function"==typeof n.setEmbeddedData&&n.setEmbeddedData(i,t)),i="ContentsquareReplayLink",!0===e&&"function"==typeof n.setJSEmbeddedData?n.setJSEmbeddedData(i,t):!1===e&&"function"==typeof n.setEmbeddedData&&n.setEmbeddedData(i,t)}}),_)}))}),500);if(o(x,!1),window.addEventListener("Contentsquare_QT_Integration_Dispatcher",(function(e){i((function(){if(e&&"object"==typeof e.detail&&"string"==typeof e.detail.key&&"string"==typeof e.detail.value){let t=e.detail.key;const n=e.detail.value;"FB_QT_"===t.slice(0,6)&&(t=t.slice(6)),v(t,n)}}),_)})),!1===e&&"function"==typeof Page.getSessionId&&Page.runtime&&Page.runtime.ED&&Page.runtime.ED.SurveyID&&Page._questionRenderers&&Qualtrics.SurveyEngine.QuestionInfo){const e=Page.runtime.ED.SurveyID,t=Page.getSessionId().replace("FS_","R_");v("Feedback Displayed","Survey ID : "+e);let o=!1,a=!1,c=!1;const s=[];function k(){const e=Qualtrics.SurveyEngine.QuestionInfo,t=Object.keys(e);if(u(t))for(let e=0;e<t.length;e++){const n=Qualtrics.SurveyEngine.QuestionInfo[t[e]].Selector;if(n&&"TB"!=n){a=!0;break}}}function O(){i((function(){k(),o||(o=!0,v("Feedback Accepted","Survey ID : "+e,0,n+"=feedback_accepted_"+e)),setTimeout((function(){i((function(){a&&!c&&!1===Page.runtime.FailedValidation&&(c=!0,v("Feedback Submitted","Survey ID : "+e,"etr",n+"=feedback_submitted_"+e),v("Feedback Response ID",t))}),_)}),2e3);const r=Page._questionRenderers,d=Object.keys(r);if(u(d))for(let t=0;t<d.length;t++){const n=r[d[t]].runtime;if(n&&n.Selector&&n.QuestionText&&n.Displayed){const i=n.QuestionText;if("NPS"===n.Selector&&n.Selected){const o=parseInt(n.Selected);s.includes(d[t]+"~~~"+o)||(s.push(d[t]+"~~~"+o),v("NPS Rating - "+d[t]+" - "+e+" - "+i,o),v("NPS Rating - "+d[t]+" - "+e,o))}if("STAR"===n.Selector){const i=n.Choices,o=Object.keys(i);if(u(o))for(let n=0;n<o.length;n++){const a=i[o[n]].Display;if(i[o[n]].Value){const c=parseInt(i[o[n]].Value);s.includes(d[t]+" ("+(n+1)+")~~~"+c)||(s.push(d[t]+" ("+(n+1)+")~~~"+c),v("Star Rating - "+d[t]+" ("+(n+1)+") - "+e+" - "+a,c),v("Star Rating - "+d[t]+" ("+(n+1)+") - "+e,c))}}}if("SAVR"===n.Selector||"SAHR"===n.Selector){const i=n.Selected;if(i&&n.Choices){const o=n.Choices[i].ID;o&&(s.includes(d[t]+"~~~AID"+o)||(s.push(d[t]+"~~~AID"+o),v(d[t]+" - "+e,"AID"+o)))}}if("MAVR"===n.Selector&&n.Choices){const i=n.Choices,o=Object.keys(i);if(u(o))for(let n=0;n<o.length;n++)if(i[o[n]].Selected){const a=i[o[n]].ID;a&&(s.includes(d[t]+"~~~AID"+a)||(s.push(d[t]+"~~~AID"+a),v(d[t]+" - "+e,"AID"+a)))}}if("Likert"===n.Selector&&n.Choices){const i=n.Choices,o=Object.keys(i);if(u(o))for(let n=0;n<o.length;n++){const a=i[o[n]].Selected;if(a&&!s.includes(d[t]+"~~~"+a)){const c=i[o[n]].ID;c&&(s.push(d[t]+"~~~"+a),v(d[t]+" - "+e+" - AID"+c,a))}}}}}setTimeout((function(){document.getElementById("NextButton")||v("Feedback Completed","Survey ID : "+e,0,n+"=feedback_completed_"+e)}),2e3),Qualtrics.SurveyEngine.addOnPageSubmit(O)}),_)}k(),Qualtrics.SurveyEngine.addOnPageSubmit(O)}else if(!0===e&&window.q.init&&window.q.init.appData&&window.q.init.appData.setup&&window.q.init.appData.setup.survey&&window.q.init.appData.setup.survey.id&&window.q.init.appData.session&&window.q.init.appData.session.id){const e=window.q.init.appData.setup.survey.id,t=window.q.init.appData.session.id.replace("FS_","R_");v("Feedback Displayed","Survey ID : "+e);let o=!1;function O(){i((function(){o||(o=!0,v("Feedback Submitted","Survey ID : "+e,"etr",n+"=feedback_submitted_"+e),v("Feedback Response ID",t)),setTimeout((function(){i((function(){document.getElementById("next-button")||v("Feedback Completed","Survey ID : "+e,0,n+"=feedback_completed_"+e)}),_)}),2e3),Qualtrics.SurveyEngine.addOnPageSubmit(O)}),_)}Qualtrics.SurveyEngine.addOnPageSubmit(O)}}else if(!y){function N(){const t=c("_cs_id"),n=c("_cs_c"),i=c("_cs_optout");return t+"~"+e+"~"+n+"~"+i}let e;function x(){function t(){const e=N();localStorage.setItem("CSID",e),CS_CONF.ptcDomain&&(localStorage.setItem("CT_UID",e),sessionStorage.setItem("CT_UID",e)),sessionStorage.setItem("CSID",e)}if(e=c("_cs_s"),e&&e.indexOf(".T.")>-1){const n=setInterval((function(){i((function(){e=c("_cs_s"),e&&-1===e.indexOf(".T.")&&(clearInterval(n),t())}),_)}),500)}else t()}window.addEventListener("message",(function(e){const t=e.data;t&&(t.contentsquare_integration&&"qualtrics"===t.vendor&&i((function(){const e=t.contentsquare_integration,n=e.split("."),i=Number(n[n.length-1]),o=new Date(i).toUTCString();if(window.CS_CONF&&CS_CONF.allowSubdomains){const t=s();document.cookie="_cs_s="+r(e)+";expires="+o+";domain="+t+";path=/"}else document.cookie="_cs_s="+r(e)+";expires="+o+";path=/";x()}),_),t.message&&"Contentsquare_QT_Integration_Ready"===t.message&&i((function(){const t={message:"Contentsquare_QT_Integration_Launch",user_values:N()};e.source.postMessage(t,"*")}),_))}));o(x,!1)}}),_)}]);
/* integration-datadog 3.2.1 */
!function(e){var n={};function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(o,i,function(n){return e[n]}.bind(null,i));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=2)}([function(e){e.exports=JSON.parse('{"displayName":"Datadog","dvarPrefix":"APM_DD_","replayKey":"dd"}')},function(e){e.exports=JSON.parse('{"name":"@contentsquare/integration-datadog-contentsquare","version":"3.2.1","scripts":{"build:snippet":"webpack"}}')},function(e,n,t){"use strict";function o(e,n){try{e()}catch(e){window._uxa=window._uxa||[],window._uxa.push(["logSnippetError",n,e.message]),(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&console.log(`%cCSQ INTEGRATION ERROR: [${n}] : ${e.message}`,"color:rgb(228, 25, 45); font-weight: bold")}}function i(e,n){function t(e){return"object"==typeof e&&null!==e}if(t(window.CS_INTEGRATIONS_CONF)&&t(window.CS_INTEGRATIONS_CONF[e]))return window.CS_INTEGRATIONS_CONF[e][n]}t.r(n);function r(e,n,t){if((t=t||window)&&n&&e){let o=!1,i=t[e];i?n():Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return i},set:function(e){i=e,o||(o=!0,n())}})}}function a(e,n){!!(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&console.log(`%cCSQ INTEGRATION: [${e}] : ${n}`,"color: #2a9d8f; font-weight: bold")}var u=t(0);const c=function(e){let n,t,i,r;if(o((function(){const o=e.name;n=e.version;const a=o.replace("@contentsquare/integration-","");t=a+"-"+n;let u="-contentsquare";r=new RegExp(u+"$").test(a),i=a.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),r||(u="-cap",r=new RegExp(u+"$").test(a),i=a.replace(/-cap([^-cap]*)$/,"$1"))}),"Shared-Function-readPackageJSON"),r)return{snippetBuildName:t,parameterName:i,snippetVersion:n}}(t(1)),s=c.parameterName,f=c.snippetBuildName,l=c.snippetVersion;o((function(){const e=u.displayName,n=u.dvarPrefix,t=u.replayKey;var c,d;c=e,d=l,CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push(c+" - v"+d);const p=i(s,"settings");var w;const g=(w=p,Array.isArray(w)?p:[]).includes("setReplayLinkToCurrentPV");function _(e,t){(function(e,n){window._uxa=window._uxa||[],window._uxa.push(["trackDynamicVariable",{key:e,value:n}])})(e=n+e,t),a(f,`Dynamic variable with ${e} and value ${t} sent`)}function y(){setTimeout((function(){o((function(){if("function"==typeof DD_RUM.getInternalContext&&"object"==typeof DD_RUM.getInternalContext()){const n=DD_RUM.getInternalContext().session_id;if(n){const t=i(s,"vendorSettings");let o=("object"==typeof(e=t)&&null!==e?t:{}).domain;if(o){o=o.trim(),o=o.replace("http://",""),o=o.replace("https://",""),o=o.replace("/","");let e=new Date;e.setHours(e.getHours()-2),e=Date.parse(e);let t=new Date;t.setHours(t.getHours()+1),t=Date.parse(t);_("Session Link","https://"+o+"/rum/explorer?query=@session.id:"+n+"&tab=session&from_ts="+e+"&to_ts="+t+"&live=true")}_("SessionID",n)}(function(e,n,t,o){return new Promise((function(i,r){function a(){window._uxa.push(["replay:link:generate",{withTimestamp:t},u])}function u(o){if(o&&o.replayLink&&o.isRecording){let r="https://"+o.replayLink+"&vd="+e;if(!n&&!t){const e=new URLSearchParams(r);e.set("pvid",1);const n=e.toString();r=decodeURIComponent(n)}i(r)}}e||(e="missingFromDynamicSnippet"),t||(t=!1),o?a():(window._uxa=window._uxa||[],window._uxa.push(["onRecordingStateChange",function(e){e&&e.isRecording&&a()}]))}))})(t,g).then((function(e){o((function(){if(e){const n={ContentsquareReplay:e};"function"==typeof DD_RUM.addUserAction?DD_RUM.addUserAction("Contentsquare",n):"function"==typeof DD_RUM.addAction&&DD_RUM.addAction("Contentsquare",n)}}),f)}))}var e}),f)}),500)}!function(e,n){let t=!1;window._uxa=window._uxa||[],window._uxa.push(["afterPageView",function(o){n?t||(e(o),t=!0):e(o)}])}((function(e){o((function(){e&&1===e.pageNumber&&function(e,n,t){t=t||window;const o=e.split(".");if(1==o.length)r(e,n,t);else{let e=t,i=0;const a=function(){e=i>0?e[o[i-1]]:window,i++,i>=o.length?r(o[i-1],n,e):r(o[i-1],a,e)};a()}}("DD_RUM",y)}),f)}),!0)}),f)}]);
/* integration-yieldify 2.6.0 */
!function(e){var n={};function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(r,i,function(n){return e[n]}.bind(null,i));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=2)}([function(e){e.exports=JSON.parse('{"displayName":"Yieldify","dvarPrefix":"AB_YF_"}')},function(e){e.exports=JSON.parse('{"name":"@contentsquare/integration-yieldify-contentsquare","version":"2.6.0","scripts":{"build:snippet":"webpack"}}')},function(e,n,t){"use strict";function r(e,n){try{e()}catch(e){window._uxa=window._uxa||[],window._uxa.push(["logSnippetError",n,e.message]),(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&console.log(`%cCSQ INTEGRATION ERROR: [${n}] : ${e.message}`,"color:rgb(228, 25, 45); font-weight: bold")}}t.r(n);function i(e,n,t){if((t=t||window)&&n&&e){let r=!1,i=t[e];i?n():Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return i},set:function(e){i=e,r||(r=!0,n())}})}}function o(e,n){!!(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&console.log(`%cCSQ INTEGRATION: [${e}] : ${n}`,"color: #2a9d8f; font-weight: bold")}var a=t(0);const c=function(e){let n,t,i,o;if(r((function(){const r=e.name;n=e.version;const a=r.replace("@contentsquare/integration-","");t=a+"-"+n;let c="-contentsquare";o=new RegExp(c+"$").test(a),i=a.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),o||(c="-cap",o=new RegExp(c+"$").test(a),i=a.replace(/-cap([^-cap]*)$/,"$1"))}),"Shared-Function-readPackageJSON"),o)return{snippetBuildName:t,parameterName:i,snippetVersion:n}}(t(1)),u=(c.parameterName,c.snippetBuildName),l=c.snippetVersion;r((function(){const e=a.displayName,n=a.dvarPrefix;var t,c;function s(e,t){(function(e,n){window._uxa=window._uxa||[],window._uxa.push(["trackDynamicVariable",{key:e,value:n}])})(e=n+e,t),o(u,`Dynamic variable with ${e} and value ${t} sent`)}function f(e){s(e.campaignName,e.campaignEvent+" ("+e.campaignSplitType+")")}t=e,c=l,CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push(t+" - v"+c),function(e,n,t){t=t||window;const r=e.split(".");if(1==r.length)i(e,n,t);else{let e=t,o=0;const a=function(){e=o>0?e[r[o-1]]:window,o++,o>=r.length?i(r[o-1],n,e):i(r[o-1],a,e)};a()}}("_yiel_cs",(function(){if(e=_yiel_cs,Array.isArray(e))for(let e=0;e<_yiel_cs.length;e++)f(_yiel_cs[e]);var e;_yiel_cs.push=function(e){r((function(){f(e)}),u)}}))}),u)}]);
/* integration-optimizely 2.9.2 */
(()=>{"use strict";function e(e,n){try{e()}catch(e){window._uxa=window._uxa||[],window._uxa.push(["logSnippetError",n,e]),(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&(console.log(`%cCSQ INTEGRATION ERROR: [${n}] : ${e.message}`,"color:rgb(228, 25, 45); font-weight: bold"),console.log(e))}}function n(e){window._uxa=window._uxa||[],window._uxa.push(["event",e])}function t(e,n,t){if((t=t||window)&&n&&e){let i=!1,o=t[e];o?n():Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return o},set:function(e){o=e,i||(i=!0,n())}})}}function i(e){return e&&"string"==typeof e?e.replace(/[\W_]+/g,"-"):""}const o=JSON.parse('{"QC":"Optimizely","Mz":"AB_OP_","be":"OP_"}'),a=function(n){let t,i,o,a;if(e(function(){const e=n.name;t=n.version;const c=e.replace("@contentsquare/integration-","");i=c+"-"+t;let r="-contentsquare";a=new RegExp(r+"$").test(c),o=c.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),a||(r="-cap",a=new RegExp(r+"$").test(c),o=c.replace(/-cap([^-cap]*)$/,"$1"))},"Shared-Function-readPackageJSON"),a)return{snippetBuildName:i,parameterName:o,snippetVersion:t}}(JSON.parse('{"name":"@contentsquare/integration-optimizely-contentsquare","version":"2.9.2","scripts":{"build:snippet":"npx webpack"}}')),c=(a.parameterName,a.snippetBuildName),r=a.snippetVersion;e(function(){const a=o.QC,s=o.Mz,l=o.be;var u,p;function d(e,t){!function(e,n){window._uxa=window._uxa||[],window._uxa.push(["trackDynamicVariable",{key:e,value:n}])}(e=s+e,t);const o=t.endsWith(" [Holdback]");var a,r;n(`${o?"HB_":""}${i(e.replace(s,""))}/${o?t.replace(" [Holdback]",""):i(t)}`),n(`${l}${i(e.replace(s,""))}-${i(t)}`),function(e,n,t){(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&(t?"warn"===t&&console.log(`%cCSQ INTEGRATION: [${e}] : ${n}`,"color:rgb(255, 86, 2); font-weight: bold"):console.log(`%cCSQ INTEGRATION: [${e}] : ${n}`,"color: #2a9d8f; font-weight: bold"))}(c,(a=e,r=t,document.getElementById("csKey")&&document.getElementById("csValue")&&(document.getElementById("csKey").textContent=a,document.getElementById("csValue").textContent=r),`Dynamic variable with ${a} and value ${r} sent`))}u=a,p=r,CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push(u+" - v"+p);let m=!1;const g=[];!function(e,n,i){i=i||window;const o=e.split(".");if(1==o.length)t(e,n,i);else{let e=i,a=0;const c=function(){e=a>0?e[o[a-1]]:window,a++,a>=o.length?t(o[a-1],n,e):t(o[a-1],c,e)};c()}}("optimizely",function(){setTimeout(function(){e(function(){function n(){e(function(){const e=optimizely.get&&optimizely.get("state");if(e&&e.getCampaignStates&&"function"==typeof e.getCampaignStates&&"object"==typeof e.getCampaignStates()){const t=e.getCampaignStates({isActive:!0}),i=Object.keys(t);if(n=i,Array.isArray(n))for(let e=0;e<i.length;e++)if(-1===g.indexOf(i[e])){g.push(i[e]);const n=t[i[e]];if(n.experiment){let e,t;e=n.experiment.name?n.campaignName:n.experiment.id,t=n.experiment.campaignName&&n.experiment.name?n.experiment.name+" - "+n.variation.name:n.variation.name?n.variation.name:n.variation.id,n.isInCampaignHoldback&&(t+=" [Holdback]"),e&&t&&d(e,t)}}}var n},c)}n(),m||(m=!0,window.optimizely=window.optimizely||[],"function"==typeof optimizely.push&&optimizely.push({type:"addListener",filter:{type:"lifecycle",name:"campaignDecided"},handler:n}))},c)},500)})},c)})();
/* integration-marketo 2.7.1 */
!function(e){var n={};function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(o,r,function(n){return e[n]}.bind(null,r));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=2)}([function(e){e.exports=JSON.parse('{"displayName":"Marketo Forms","dvarPrefix":"FB_MK_","apvPrefix":"cs_marketo"}')},function(e){e.exports=JSON.parse('{"name":"@contentsquare/integration-marketo-contentsquare","version":"2.7.1","scripts":{"build:snippet":"webpack"}}')},function(e,n,t){"use strict";function o(e,n){try{e()}catch(e){window._uxa=window._uxa||[],window._uxa.push(["logSnippetError",n,e.message]),(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&console.log(`%cCSQ INTEGRATION ERROR: [${n}] : ${e.message}`,"color:rgb(228, 25, 45); font-weight: bold")}}function r(e,n){function t(e){return"object"==typeof e&&null!==e}if(t(window.CS_INTEGRATIONS_CONF)&&t(window.CS_INTEGRATIONS_CONF[e]))return window.CS_INTEGRATIONS_CONF[e][n]}function i(e){return Array.isArray(e)}t.r(n);let u,a=1e3,c=10;function s(e,n,t,o,i,f){var d;n&&t&&(u||(u=r(e,"timingSettings"),"object"==typeof(d=u)&&null!==d&&Object.keys(d).length&&(a=u.doOnlyWhenInterval,c=u.doOnlyWhenTimes)),void 0===(i=i)&&(i=a),void 0===(f=f)&&(f=c),--f<0?"function"==typeof o&&o():t()?n():setTimeout((function(){s(e,n,t,o,i,f)}),i))}function f(e,n){!!(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&console.log(`%cCSQ INTEGRATION: [${e}] : ${n}`,"color: #2a9d8f; font-weight: bold")}var d=t(0);const l=function(e){let n,t,r,i;if(o((function(){const o=e.name;n=e.version;const u=o.replace("@contentsquare/integration-","");t=u+"-"+n;let a="-contentsquare";i=new RegExp(a+"$").test(u),r=u.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),i||(a="-cap",i=new RegExp(a+"$").test(u),r=u.replace(/-cap([^-cap]*)$/,"$1"))}),"Shared-Function-readPackageJSON"),i)return{snippetBuildName:t,parameterName:r,snippetVersion:n}}(t(1)),p=l.parameterName,m=l.snippetBuildName,w=l.snippetVersion;o((function(){const e=d.displayName,n=d.dvarPrefix,t=d.apvPrefix;var u,a;u=e,a=w,CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push(u+" - v"+a);const c=r(p,"settings"),l=(i(c)?c:[]).includes("sendArtificialPageviews");function g(e,t,o){(function(e,n){window._uxa=window._uxa||[],window._uxa.push(["trackDynamicVariable",{key:e,value:n}])})(e=n+e,t),o&&l&&function(e){window._uxa=window._uxa||[],window._uxa.push(["trackPageview",e])}(window.location.pathname+"?"+o),f(m,`Dynamic variable with ${e} and value ${t} sent`)}const _=[];s(p,(function(){setTimeout((function(){o((function(){window.MktoForms2&&"function"==typeof MktoForms2.whenRendered&&MktoForms2.whenRendered((function(e){o((function(){if(e.getId){const n=e.getId();_.includes("form_rendered_"+n)||(_.push("form_rendered_"+n),g("Form Rendered","Form ID : "+n.toString(),t+"=form_rendered_"+n),function(){if(window.MktoForms2&&"function"==typeof MktoForms2.allForms){const e=MktoForms2.allForms();if(i(e))for(let n=0;n<e.length;n++)e[n].onSubmit&&e[n].onSubmit((function(e){o((function(){if(e.getId){const n=e.getId();_.includes("form_submitted_"+n)||(_.push("form_submitted_"+n),g("Form Submitted","Form ID : "+n.toString(),t+"=form_submitted_"+n))}}),m)}))}}())}}),m)}))}),m)}),500)}),(function(){return"object"==typeof window.MktoForms2&&"function"==typeof MktoForms2.allForms&&"function"==typeof MktoForms2.whenRendered}))}),m)}]);;
(()=>{var de={};de.d=(s,n)=>{for(var t in n)de.o(n,t)&&!de.o(s,t)&&Object.defineProperty(s,t,{enumerable:!0,get:n[t]})};de.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();de.o=(s,n)=>Object.prototype.hasOwnProperty.call(s,n);de.r=s=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})};var fr={};de.r(fr);de.d(fr,{getRequestParameters:()=>Bm});function Je(s,n){let t;return window.Zone&&typeof window.Zone.__symbol__=="function"&&(t=s[window.Zone.__symbol__(n)]),t||(t=s[n]),t}var di=typeof window=="undefined";function Lh(){return typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof de.g!="undefined"?de.g:typeof process!="undefined"?process:Function("return this")()}var At=Lh();var Ca="cs-native-frame",xe={navigatorProperties:[{propertyName:"sendBeacon",binding:navigator}],nodeProperties:["childNodes","parentNode","nextSibling","firstChild"],elementProperties:["shadowRoot"],elementPropertiesValues:["matches","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector"],eventProperties:["target"],imageProperties:["src"],constructors:{Date:"csDate",JSON:"csJSON",Array:"csArray",String:"csString",URL:"csURL",MutationObserver:"csMutationObserver",screen:"csScreen",RegExp:"csRegExp"}};window.csSetTimeout=Je(window,"setTimeout");window.csQueueMicrotask=Je(window,"queueMicrotask");window.csClearTimeout=Je(window,"clearTimeout");window.csSetInterval=Je(window,"setInterval");window.csClearInterval=Je(window,"clearInterval");window.csFileReader=Je(window,"FileReader");(()=>{var s;let n=0;function t(i){return"cs$Symbol_"+i}function e(i){return t(i)+ ++n}e.for=t,window.csSymbol=(s=window.Symbol)!==null&&s!==void 0?s:e})();function xh(){let s=document.createElement("iframe");s.id=Ca,s.setAttribute("hidden",""),s.setAttribute("title","Intentionally blank"),s.setAttribute("sandbox","allow-same-origin");let n=document.createElement("cs-native-frame-holder");if(n.setAttribute("hidden",""),document.body.appendChild(n),!!Element.prototype.attachShadow){let e=n.attachShadow({mode:"closed"});return e.innerHTML=s.outerHTML,e.firstElementChild.contentWindow}return n.innerHTML=s.outerHTML,n.firstElementChild.contentWindow}function Uh(s,n){let t,e=s;for(;e&&!(t=Object.getOwnPropertyDescriptor(e,n));)e=Object.getPrototypeOf(e);return t}function Vh(s,n,t){let e=Uh(s,n);if(!e)return function(){return this[n]};switch(t){case"get":return e.get;case"set":return e.set;case"value":return e.value}}function Ia(s){var n,t;Object.keys(xe.constructors).forEach(e=>{window[xe.constructors[e]]=s[e]instanceof Function&&s[e].prototype==null?s[e].bind(window):s[e]}),Bh(s),("Prototype"in window||Hh())&&(window.csMutationObserver=(t=(n=Je(window,"MutationObserver"))!==null&&n!==void 0?n:window.WebKitMutationObserver)!==null&&t!==void 0?t:window.MutationObserver),Ss("csNode",xe.nodeProperties,s.Node.prototype,"get"),Ss("csElement",xe.elementProperties,s.Element.prototype,"get"),Ss("csElement",xe.elementPropertiesValues,s.Element.prototype,"value",!1),Ss("csHTMLImageElement",xe.imageProperties,s.HTMLImageElement.prototype,"set"),Ss("csEvent",xe.eventProperties,s.Event.prototype,"get"),Ss("csNavigator",xe.navigatorProperties,s.navigator,"value")}function Ss(s,n,t,e,i=!0){n.forEach(r=>{let a=typeof r!="string"&&"binding"in r,c=a?r.propertyName:r;(i||c in t)&&(window[`${s+c}`]=Vh(t,c,e),a&&(window[`${s+c}`]=window[`${s+c}`].bind(r.binding)))})}function Pa(s,n){window.CSProtectnativeFunctionsLogs=window.CSProtectnativeFunctionsLogs||{},window.CSProtectnativeFunctionsLogs[s]=n}function jh(){try{let s=xh();return s?(window.CSPureWindow=s,Ia(window.CSPureWindow),!0):!1}catch(s){return Pa("Warning",`failed to copy references from pure iframe: ${s.message}`),!1}}if(!jh())try{Ia(At)}catch(s){Pa("Critical",`failed to copy references from window: ${s.message}`)}function Hh(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function Bh(s){window.csquerySelector={1:s.Element.prototype.querySelector,9:s.Document.prototype.querySelector,11:s.DocumentFragment.prototype.querySelector},window.csquerySelectorAll={1:s.Element.prototype.querySelectorAll,9:s.Document.prototype.querySelectorAll,11:s.DocumentFragment.prototype.querySelectorAll}}var ot=(()=>{let s;return function(n){n.ELLIPSIS="\u2026";function t(a){return csString.prototype.replace.call(a,/[.*+?^${}()|[\]\\]/g,"\\$&")}function e(a){return csString.prototype.replace.call(a,/([#;&,.+*~':"!^$[\]()<=>|/%?@`{}\\ ])/g,"\\$1")}n.escapeInvalidCharacters=e;function i(a,c,l){if("replaceAll"in csString.prototype)return csString.prototype.replaceAll.call(a,c,l);let h=new csRegExp(t(c),"g");return csString.prototype.replace.call(a,h,l)}n.stringReplaceAll=i;function r(a,c,l=""){return a.length<=c?a:csString.prototype.slice.call(a,0,c-l.length)+l}n.truncate=r}(s||(s={})),s})();function Kn(s){return ot.escapeInvalidCharacters(csString.prototype.toLowerCase.call(s.localName))}function Fh(s){let n=s.getAttribute("id");return n&&ot.escapeInvalidCharacters(n)}function ue(s){return Q(s)&&(typeof s=="number"||s instanceof Number)&&!isNaN(s)}function Cs(s){return s===parseInt(s,10)}function $(s){return Q(s)&&(typeof s=="string"||s instanceof csString)}function lo(s){return typeof s=="boolean"}function Ye(s){return typeof s=="object"}function Q(s){return typeof s!="undefined"}function Nt(s){return Q(s)&&s!==null}function $h(s,n,t){return Cs(s)&&s>=n&&s<=t}function zh(s){for(let n in s)return!1;return!0}function Xe(s){return typeof s=="function"}function pi(s){return s instanceof Element}function Ke(s){return s instanceof Error}function Oa(s){let n=s.length;for(let t=0;t<n;t++)switch(csString.prototype.charCodeAt.call(s,t)){case 9:case 10:case 11:case 12:case 13:case 32:case 160:continue;default:return!1}return!0}function lt(s){return s.nodeType===1}function Xi(s){return s.nodeType===3}function Gh(s){return s.nodeType===8}function Na(s){return lt(s)&&s.localName==="link"}function qh(s){return lt(s)&&s.localName==="source"}function Ma(s){return lt(s)&&s.localName==="a"}function gr(s){return Na(s)&&csString.prototype.indexOf.call(s.rel,"stylesheet")!==-1}function Wh(s){return lt(s)&&s.localName==="img"}function fi(s){return lt(s)&&s.localName==="style"}function on(s){return lt(s)&&s.localName==="input"}function an(s){return lt(s)&&s.localName==="textarea"}function gi(s){return lt(s)&&s.localName==="script"}function Yh(s){return lt(s)&&s.localName==="button"}function ks(s){return lt(s)&&"ownerSVGElement"in s}function mr(s){return lt(s)&&s.localName==="select"}function Xh(s){return lt(s)&&s.localName==="details"}function Kh(s){return lt(s)&&s.localName==="summary"}function Jh(s){return ks(s)&&s.localName==="image"}function Qh(s){return ks(s)&&s.localName==="use"}function Zh(s){return ks(s)&&s.localName==="feImage"}function tu(s){switch(s.nodeType){case 9:case 11:return!0;default:return!1}}function eu(s){switch(s.nodeType){case 9:case 11:case 1:return!0;default:return!1}}function Ki(s){return s.nodeType===9}function oi(s){return tu(s)&&"host"in s&&"mode"in s}function ka(s){return lt(s)&&!!csElementshadowRoot.apply(s)&&oi(csElementshadowRoot.apply(s))}var su=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"];function iu(s){return lt(s)&&Nt(s.tagName)&&csString.prototype.indexOf.call(s.tagName,"-")>0&&csString.prototype.indexOf.call(s.tagName,":")===-1&&csString.prototype.indexOf.call(s.tagName,'"')===-1&&csString.prototype.indexOf.call(s.tagName,",")===-1&&csArray.prototype.indexOf.call(su,csString.prototype.toLocaleLowerCase.call(s.tagName))<0}var mi="detached";function Da(s){let n=s,t=[n];for(;csNodeparentNode.apply(n)!==null;)n=csNodeparentNode.apply(n),csArray.prototype.push.call(t,n);return Ji(n)&&csArray.prototype.push.call(t,mi),{ancestors:t,selectionRoot:n}}function nu(s){let n=s,t=[n],e=null;for(;csNodeparentNode.apply(n)!==null;)e===null&&Ma(n)&&(e=n),csArray.prototype.push.call(t,csNodeparentNode.apply(n)),n=csNodeparentNode.apply(n);return Ji(n)&&csArray.prototype.push.call(t,mi),{firstAnchorParent:e,ancestors:t,selectionRoot:n}}function Ji(s){return we.isValidElement(s)}var cs=(()=>{var s,n;return(n=(s=At.Element)===null||s===void 0?void 0:s.prototype)!==null&&n!==void 0?n:{}})(),Qt=cs.matches||cs.matchesSelector||cs.mozMatchesSelector||cs.msMatchesSelector||cs.oMatchesSelector||cs.webkitMatchesSelector,ho=cs.closest,La=9;function ru(s,n){return n?csArray.prototype.some.call(n,t=>Qt.call(s,t)):!1}function ou(s,n,t){if(s===mi||s.nodeType===La)return 0;let e=t.dynamicElementNameRegex,i=!!(e!=null&&e.test(n.localName)),r=Kn(n),a=0,c=n.previousElementSibling;for(;c;)(Kn(c)===r||i&&(e!=null&&e.test(c.localName)))&&!ru(c,t.reliableSelectors)&&(a+=1),c=c.previousElementSibling;return a}function au(s,n,t){if(s===mi||s.nodeType===La)return 0;let e=0,i=n.previousElementSibling;for(;i;)Qt.call(i,t)&&(e+=1),i=i.previousElementSibling;return e}var cu=[/\d{4}/,/^ember\d+$/],lu="@",yr="data-cs-override-id",hu="data-cs-dynamic-id";function xa(s,n,t,e){let i=e.dynamicIdRegex||null,r=e.dynamicElementNameRegex,a=Kn(s);if(r&&r.test(s.localName)&&(a=csString.prototype.replace.call(a,r,`$1${lu}`)),pu(s,t)){let y=Er(s);return{hasUniqueIdentifier:!0,elementSelector:`${a}[${yr}="${y}"]`}}let c=vu(s,t,e);if(c.success)return{hasUniqueIdentifier:!0,elementSelector:`${a}#UA[${c.attributeName}="${c.attributeValue}"]`};let l=uu(s,t,e);if(l)return{hasUniqueIdentifier:!0,elementSelector:`${a}#UCS[${l}]`};let h=Fh(s);if(gu(s,h,t,i))return{hasUniqueIdentifier:!0,elementSelector:`${a}#${h}`};let f=du(s,e);if(f){let y=au(n,s,f);return{hasUniqueIdentifier:!1,elementSelector:`${a}[${f}](${y})`}}let d=ou(n,s,e);return{hasUniqueIdentifier:!1,elementSelector:`${a}:eq(${d})`}}function uu(s,n,t){if(t.uniqueCssSelectors){for(let e of t.uniqueCssSelectors)if(Qt.call(s,e)&&Su(e,n))return e}}function du(s,n){if(n.reliableSelectors){for(let t of n.reliableSelectors)if(Qt.call(s,t))return t}}function pu(s,n){let t=Er(s);return t&&csString.prototype.match.call(t,/^[\w-]+$/)&&Sr(yr,t,n)}function fu(s){return Er(s)!==null}function Er(s){return s.getAttribute(yr)}function gu(s,n,t,e){return n&&!fu(s)&&!mu(s,n,e)&&Eu(n,t)}function mu(s,n,t){return s.hasAttribute(hu)||yu(n,t)}function yu(s,n){let t=!1;return s&&n&&(t=n.test(s)),s&&(csArray.prototype.some.call(cu,e=>e.test(s))||t)}function Eu(s,n){return s&&Sr("id",s,n)}function Sr(s,n,t){try{return window.csquerySelectorAll[t.nodeType].call(t,`[${s}="${n}"]`).length===1}catch(e){if(e.name!=="SyntaxError")throw e}return!1}function Su(s,n){try{return window.csquerySelectorAll[n.nodeType].call(n,s).length===1}catch(t){if(t.name!=="SyntaxError")throw t}return!1}function vu(s,n,t){if(!t.uniqueAttributes)return{success:!1};for(let e of t.uniqueAttributes){let i=s.getAttribute(e);if(i!==null&&Sr(e,i,n))return{attributeName:e,attributeValue:i,success:!0}}return{success:!1}}var Jn=11;function Qi(s,n,t){let e=csArray.prototype.shift.call(s);if(s.length===0)return uo(e,t);let i=e,r=s[0],{elementSelector:a,hasUniqueIdentifier:c}=xa(i,r,n,t);if(!t.fullPath&&c){let h=s[s.length-1];return`${uo(h,t)}${a}`}let l=Qi(s,n,t);return`${l?`${l}>`:""}${a}`}function uo(s,n){if(s===mi)return"|detached|";if(s.host){let{ancestors:t,selectionRoot:e}=Da(s.host);return`${Qi(t,e,n)}|shadow-root|`}return s.nodeType===Jn?"|fragment|":""}var Ua=(()=>{class s{constructor(t){this.options=t,this.done=!1,this.path=null}getPath(){if(this.path===null)throw new Error("getPath was called before serializeElement");return this.path}isDone(){return this.done}}return s})(),_u=(()=>{class s extends Ua{constructor(){super(...arguments),this.ao=!1,this.co=!1,this.tc=!1}Bm(t,e){return this.ao&&!(e===null&&Ji(t))&&t.nodeType!==Jn&&!t.host}Fm(t){return!t.localName}serializeElement(t,e,i){var r;if((r=this.path)!==null&&r!==void 0||(this.path=""),this.Bm(t,e))return;let a=!1;e===null&&Ji(t)&&(a=!0,this.done=!0);let c=this.co&&!this.options.fullPath?"":">",l=!!t.host;if(l&&this.path&&(this.path="|shadow-root|"+c+this.path,this.tc=!0,this.ao=!1,this.co=!1),!l&&e===null&&t.nodeType===Jn){this.path="|fragment|"+c+this.path,this.done=!0;return}if(this.Fm(t))return;let h=e!=null?e:"detached",{elementSelector:f,hasUniqueIdentifier:d}=xa(t,h,i,this.options);d&&(this.co=!0,this.ao=!this.options.fullPath);let y=`${a?`|detached|${c}`:""}${this.ao&&!d?"":f}`,v=!d&&this.co&&!this.options.fullPath?"":this.path&&!this.tc?">":"";this.tc=!1,this.path=`${y}${v}${this.path}`}}return s})();function Ft(s,n=Dt.SHOW_ALL){let t=n|Dt.SHOW_ELEMENT,e=[document.createTreeWalker(s,t,null,!1)],i=po(s);i&&csArray.prototype.push.call(e,document.createTreeWalker(i,t,null,!1));let r=null;return{root:s,nextNode(){if(i){let a=i;return i=null,a}for(;e.length>0;){if(r){let h=r;return r=null,h}let c=e[e.length-1].nextNode();if(!c){csArray.prototype.pop.call(e);continue}let l=po(c);if(n&Dt.SHOW_DOCUMENT_FRAGMENT&&l&&(r=l),l&&csArray.prototype.push.call(e,document.createTreeWalker(l,t,null,!1)),(Rn[c.nodeType]&n)!==0)return c}return null},visitAll(a){Rn[s.nodeType]&n&&a(s);let c=this.nextNode();for(;c;){if((Rn[c.nodeType]&n)===0){c=this.nextNode();continue}a(c),c=this.nextNode()}},collectAll(a){let c=[];return this.visitAll(l=>csArray.prototype.push.call(c,a?a(l):l)),c}}}function po(s){return s&&ka(s)?s.shadowRoot:null}var Tn=(()=>{var s;return(s=At.Node)!==null&&s!==void 0?s:{}})(),Dt=(()=>{var s;return(s=At.NodeFilter)!==null&&s!==void 0?s:{}})(),Rn={2:Dt.SHOW_ATTRIBUTE,4:Dt.SHOW_CDATA_SECTION,8:Dt.SHOW_COMMENT,11:Dt.SHOW_DOCUMENT_FRAGMENT,9:Dt.SHOW_DOCUMENT,10:Dt.SHOW_DOCUMENT_TYPE,1:Dt.SHOW_ELEMENT,[Tn.ENTITY_NODE]:Dt.SHOW_ENTITY,[Tn.ENTITY_REFERENCE_NODE]:Dt.SHOW_ENTITY_REFERENCE,[Tn.NOTATION_NODE]:Dt.SHOW_NOTATION,7:Dt.SHOW_PROCESSING_INSTRUCTION,3:Dt.SHOW_TEXT},ht={debug(...s){},warn(...s){},implementation(...s){},error(...s){},critical(...s){},isPerfLoggingActive(){return!1}};function wu(s){ht=s}var I=s=>(n,t,e)=>{let i=(t==null?void 0:t.toString())||"",r=s||`${n.constructor&&n.constructor.name}.${i}`;if(e){let a=e.value;e.value=function(...c){return Ae(r,a.bind(this))(...c)}}};function Ae(s,n){return function(...t){try{let e=n.apply(this,t);return Q(window.Promise)&&e instanceof window.Promise?e.then(i=>i,i=>ht.error(Ke(i)?i:new Error(i),s)):e}catch(e){try{ht.error(Ke(e)?e:new Error(e),s)}catch{}}}}var Ds=(()=>{class s{constructor(){this.lo=0}get length(){return this.lo}get isEmpty(){return!this.Is}pushAll(t){for(let e=0;e<t.length;e++)this.push(t[e])}push(t){this.lo++,this.jn?this.jn=this.jn[1]=[t,void 0]:this.jn=this.Is=[t,void 0]}pop(){if(!this.Is)return null;this.lo--;let t=this.Is[0];return this.Is=this.Is[1],this.Is||(this.jn=void 0),t}forEach(t){let e=this.Is;for(;e!=null&&e.length;)t(e[0]),e=e[1]}clear(){this.lo=0,this.Is=this.jn=void 0}}return s})(),Va=50,ja=.1;function bu(){var s;if(!(!((s=window.performance)===null||s===void 0)&&s.mark))return!1;let n="isPerformanceMeasureSupported",t=`${n}_a`;return performance.mark(t),performance.measure(n,t)!==void 0}var Zi=!1,Fi=new Ds;function Au(s=50,n=.1){Zi=ht.isPerfLoggingActive()&&bu(),Zi&&(Va=s,ja=n)}var Qn=[],Cn=[];function Ha(s){csArray.prototype.push.call(Qn,s),performance.mark(`${s}-start`)}function Ba(s){let n=performance.measure(s,`${s}-start`);if(!n)return;let t=n.duration;t>=ja&&csArray.prototype.push.call(Cn,{mName:s,mDuration:+t.toFixed(2)}),csArray.prototype.pop.call(Qn),Qn.length===0&&(t>Va&&Fi.push(Cn),Cn=[])}function ds(s,n){return function(...t){if(!Zi)return s.apply(this,t);Ha(n);let e=s.apply(this,t);return Ba(n),e}}var Rt=function(s){return function(n,t,e){let i=e.value;e.value=function(){if(!Zi)return e.value=i,i.apply(this,arguments);Ha(s);let r=i.apply(this,arguments);return Ba(s),r}}};var hs=(()=>{let s;return function(n){function t(){return!!Element.prototype.attachShadow}n.isSupported=t;function e(r){return r&&ka(r)?r.shadowRoot:null}n.getShadowRoot=e;function i(r){return Ft(r,NodeFilter.SHOW_DOCUMENT_FRAGMENT).collectAll(a=>a.host)}n.getAllShadowHosts=ds(i,"getAllShadowHosts")}(s||(s={})),s})(),yt=(()=>{let s;return function(n){function t(){let d=[i()];return document.documentElement&&csArray.prototype.push.call(d,document.documentElement.scrollHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight),document.body&&csArray.prototype.push.call(d,document.body.scrollHeight,document.body.offsetHeight),Math.max(...d)}n.documentHeight=t;function e(){return document.documentElement.scrollWidth}n.documentWidth=e;function i(){return window.innerHeight}n.windowHeight=i;function r(){return window.innerWidth}n.windowWidth=r;function a(){let d=window.csScreen.width;return Cs(d)&&d>0?d:window.screen.width}n.screenWidth=a;function c(){let d=window.csScreen.height;return Cs(d)&&d>0?d:window.screen.height}n.screenHeight=c;function l(){return window.pageXOffset}n.windowOffsetX=l;function h(){return window.pageYOffset}n.windowOffsetY=h;function f(){return{dw:`${e()}`,dh:`${t()}`,ww:`${r()}`,wh:`${i()}`,sw:`${a()}`,sh:`${c()}`}}n.getRequestParameters=f}(s||(s={})),s})();function Is(s){var n;let t=(n=s.length)!==null&&n!==void 0?n:0,e=new csArray(t);for(let i=0;i<t;i+=1)e[i]=s[i];return e}function _e(s,n){let t=s.length,e=new csArray(t);for(let i=0;i<t;i+=1)e[i]=n(s[i]);return e}function Tu(s,n,t){let e=[],i=0;for(let r=0;r<s.length;r+=1){let a=n(s[r]);for(let c=0;c<a.length;c++)t(a[c],i++)}return e}function Fa(s,n){let t=[];return Tu(s,n,e=>csArray.prototype.push.call(t,e)),t}function q(s,n){if(Ru(s)){let t=s.length;for(let e=0;e<t;e++)n(s[e],e)}else{let t=0,e=s.next();for(;!e.done;)n(e.value,t++),e=s.next()}}function Ru(s){return s.length>=0}function ve(s,n){let t=s.length;for(let e=0;e<t;e++)if(n(s[e],e))return s[e]}function ai(s,n){let t=s.length;for(let e=0;e<t;e++)if(n(s[e],e))return!0;return!1}function Cu(s,n){let t=s.length;for(let e=0;e<t;e++)if(!n(s[e],e))return!1;return!0}function ci(s,n){let t=s.length,e=[];for(let i=0;i<t;i+=1){let r=s[i];n(r)&&csArray.prototype.push.call(e,r)}return e}function Iu(s,n,t){let e=s.length+n.length+((t==null?void 0:t.length)||0),i=new csArray(e),r=0;for(let a=0;a<s.length;a++)i[r++]=s[a];for(let a=0;a<n.length;a++)i[r++]=n[a];if(!t)return i;for(let a=0;a<t.length;a++)i[r++]=t[a];return i}function fo(s,n){for(let t=0;t<s.length;t++)csArray.prototype.push.call(n,s[t])}function ps(s){let n=s instanceof Map,t=[];return s.forEach((e,i)=>csArray.prototype.push.call(t,n?[i,e]:e)),t}var In=(()=>{var s;return(s=At.Node)!==null&&s!==void 0?s:Object})(),it=(()=>{let s;return function(n){let t="isConnected"in In.prototype?S=>S.isConnected:S=>!S.ownerDocument||!(S.ownerDocument.compareDocumentPosition(S)&S.DOCUMENT_POSITION_DISCONNECTED);function e(S,M){for(let U=S;U;U=csNodenextSibling.apply(U))M(S)}n.forEachChild=e;function i(S){return t(S)}n.isConnected=i;function r(S,M){let U=[];for(let B of l(S,M))csArray.prototype.push.call(U,B);return U}n.getAncestors=r;let a=(S,M)=>{var U;return(U=csNodeparentNode.apply(S))!==null&&U!==void 0?U:M&&oi(S)?S.host:null};function c(S,M,U=!1){let B=S;for(;B;){if(M(B))return B;let et=a(B,U);if(et&&et!==B)B=et;else break}return null}n.findAncestor=c;function*l(S,M=!1){let U=S;for(;U;){yield U;let B=a(U,M);if(B&&B!==U)U=B;else break}}n.walkUp=l;function h(S,M){if(S===M||M.contains(S))return!0;let U=n.getParentElement(S);return U&&U!==S?h(U,M):!1}n.isDescendantOf=h;function f(S){var M;return S.parentElement?S.parentElement:n.getRootNode(S)?(M=n.getRootNode(S))===null||M===void 0?void 0:M.host:null}n.getParentElement=f;function d(S,M=document){let U=Is(window.csquerySelectorAll[M.nodeType].call(M,S)),B=hs.getAllShadowHosts(M);for(let et of B){let ut=hs.getShadowRoot(et);if(!ut)continue;let Ct=Is(window.csquerySelectorAll[ut.nodeType].call(ut,S));csArray.prototype.push.call(U,...Ct)}return U}n.findAllElements=d,n.getRootNode=(()=>{if("getRootNode"in In.prototype)return(U,B)=>U.getRootNode(B);function S(U){let B=M(U);return oi(B)?S(B.host):B}function M(U){return csNodeparentNode.apply(U)!=null?M(csNodeparentNode.apply(U)):U}return(U,B)=>typeof B=="object"&&!!B.composed?S(U):M(U)})();function y(S){return S==="transparent"||/^(rgba|hsla)\(\d+, \d+%?, \d+%?, 0\)$/.test(S)}function E(S){let M=S.getBoundingClientRect();return M.right+yt.windowOffsetX()<0||M.bottom+yt.windowOffsetY()<0}function v(S){var M,U;if(((M=S.checkVisibility)===null||M===void 0?void 0:M.call(S,{checkOpacity:!0,checkVisibilityCSS:!0}))===!1)return!0;if(!S.offsetParent){if(!S.getBoundingClientRect)return ht.warn(`SUP-11432: Element doesn't have getBoundingClientRect. Node: ${S instanceof In} Ctor: ${(U=S==null?void 0:S.constructor)===null||U===void 0?void 0:U.name}`),!1;let ut=S.getBoundingClientRect();if(ut.width==0&&ut.height==0)return!0}let B=window.getComputedStyle(S);return B?B.display==="none"||B.visibility==="hidden"||B.visibility==="collapse"||B.opacity==="0"||B.filter==="opacity(0)"||B.width==="0px"&&B.height==="0px"||y(B.color):!0}n.isHiddenByCSS=v;function C(S){if(v(S))return!0;let U=f(S);return U!=null&&C(U)}n.areAncestorsHiddenByCSS=C;function P(S){let M=null,U=S;do if(v(U))M=U;else break;while(U=f(U));return M}n.getTopAncestorHiddenByCSS=P;function A(S){let M=w(S);return M!==null&&!S.contains(M)&&!M.contains(S)}function w(S){let M=S.getBoundingClientRect(),U=M.left+.5*M.width,B=M.top+.5*M.height;return b(document,U,B)}n.getTopElement=w;function x(S){if(!S.getBoundingClientRect)return null;let M=S.getBoundingClientRect(),U=M.x+M.width/2,B=M.y+M.height/2;return n.getTopElementFromPoint(document,U,B)}n.getElementOnTop=x;function b(S,M,U){let B=S.elementFromPoint(M,U);if(!B)return null;let et=hs.getShadowRoot(B);return et&&et!=n.getRootNode(document.body)&&et!==S?b(et,M,U):B}n.getTopElementFromPoint=b;function L(S){return!E(S)&&!v(S)&&!A(S)}n.isVisibleInDocument=L;function H(S){return v(S)?!1:W(S)}n.isVisibleInViewportInForeground=H;function W(S){let M=w(S);return M===null?!1:S===M?!0:ft(S)?S.textContent!==""&&M.contains(S):S.contains(M)}n.isInViewPort=W;function nt(S,M,U){let B=S.getAttributeNS(M,U);return B===""?S.hasAttributeNS(M,U)?B:null:B}n.getAttributeNS=nt;function pt(S){return!!(S.hasAttribute("tabIndex")||S.getAttribute("contentEditable")==="true"||Ma(S)&&S.hasAttribute("href")||(mr(S)||an(S)||on(S)||Yh(S))&&!S.hasAttribute("disabled")||Xh(S)||Kh(S))}n.isElementFocusable=pt;function ft(S){return S.localName==="span"||S.localName==="a"||S.localName==="b"||S.localName==="i"||S.localName==="button"||S.localName==="input"||S.localName==="label"||S.localName==="cite"||S.localName==="small"||S.localName==="strong"||S.localName==="code"||S.localName==="abbr"||S.localName==="em"||S.localName==="dfn"||S.localName==="time"||S.localName==="output"||S.localName==="object"||S.localName==="sub"}n.isInlineElement=ft}(s||(s={})),s})(),Pu=(()=>{class s{constructor(t){this.$m=t}run(t){let e=[...this.$m],i=it.getAncestors(t,!1),r=i[i.length-1];for(;e.length>0&&i.length>0;){let a=csArray.prototype.shift.call(i),c=i[0]||null;if(this.zm(e,a,c,r),this.Gm(e),e.length===0)break;i.length===0&&a.host&&(i=it.getAncestors(a.host,!1),r=i[i.length-1])}}zm(t,e,i,r){for(let a of t)a.serializeElement(e,i,r)}Gm(t){for(let e=0;e<t.length;e++)t[e].isDone()&&(csArray.prototype.splice.call(t,e,1),e--)}}return s})(),Ou=(()=>{class s extends Ua{serializeElement(t){var e;if((e=this.path)!==null&&e!==void 0||(this.path=""),(t==="detached"||t.localName==="body")&&(this.done=!0,this.path.length>0))return;let i=this.qm(t);if(i+=i.length>0?"|":"",this.path.length+i.length>this.options.hierarchyMaxLength){this.done=!0;return}this.path=i+this.path}qm(t){if(!t.localName)return"";let e=`@${t.localName};`;return e+=this.Wm(t.id),t.classList&&(e+=this.Ym(csArray.from(t.classList))),t.attributes&&(e+=this.Xm(t)),e}Wm(t){return t?`#${t};`:""}Ym(t){return t.length>0?`.${csArray.prototype.join.call(csArray.prototype.sort.call(t),";.")};`:""}Km(t,e){var i,r;return((r=(i=this.options).isAttributeSensitive)===null||r===void 0?void 0:r.call(i,t,e))||csArray.prototype.indexOf.call(this.options.attributeIgnoreTokens,e)!==-1||ks(t)&&csString.prototype.indexOf.call(e,"data-")===-1&&e!=="aria-label"||on(t)&&e==="value"}Jm(t,e){return this.options.useAnonymization&&!this.options.allWhitelistedAttributes.has(t)||e.length>this.options.attrMaxLength}Qm(t){let e={};for(let i of csArray.from(t.attributes))this.Km(t,i.name)||(e[i.name]=i.value);return e}Xm(t){var e,i;if(!((i=(e=this.options).isNodeSensitive)===null||i===void 0)&&i.call(e,t))return"";let r=Object.entries(this.Qm(t));return csArray.prototype.join.call(csArray.prototype.sort.call(csArray.prototype.map.call(csArray.prototype.filter.call(r,([a])=>a.length<this.options.attrMaxLength),([a,c])=>this.Jm(a,c)?`[${a}]`:`[${a}=${c}]`)),";")+(r.length>0?";":"")}}return s})(),we=(()=>{let s;return function(n){n.INVALID_ELEMENT="INVALID_ELEMENT";function t(c){return!!c&&"localName"in c&&"getAttribute"in c&&"hasAttribute"in c&&"parentNode"in c}n.isValidElement=t;function e(c,l,h={fullPath:!1,dynamicIdRegex:null}){let f=a(c);if(f===document)return{path:"",hierarchy:""};if(!t(f))return{path:n.INVALID_ELEMENT,hierarchy:n.INVALID_ELEMENT};let d=new _u(h),y=new Ou(l);return new Pu([d,y]).run(f),{path:d.getPath(),hierarchy:y.getPath()}}n.getElementPathAndHierarchy=e;function i(c,l={fullPath:!1,dynamicIdRegex:null}){let h=a(c);if(h===document)return"";if(!t(h))return n.INVALID_ELEMENT;let{ancestors:f,selectionRoot:d}=Da(h);return Qi(f,d,l)}n.getElementPath=i;function r(c,l={fullPath:!1,dynamicIdRegex:null}){let h=a(c);if(h===document)return{path:"",firstAnchorParent:null};if(!t(h))return{path:n.INVALID_ELEMENT,firstAnchorParent:null};let{firstAnchorParent:f,ancestors:d,selectionRoot:y}=nu(h);return{path:Qi(d,y,l),firstAnchorParent:f}}n.getElementPathAndFirstAnchorParent=r;function a(c){return c&&"jquery"in c&&c.length===1?c[0]:c}}(s||(s={})),s})();window.CSPathComputation=window.CSPathComputation||we;var Nu=Number.MAX_SAFE_INTEGER||9007199254740991;function tn(){}function Te(s,n){return csString.prototype.lastIndexOf.call(s,n,0)===0}function $a(s,n){return csString.prototype.indexOf.call(s,n,s.length-n.length)!==-1}var vr=34164e6,Ps={percentage(){return Math.floor(Math.random()*1e4)/100},boolean(s){return this.percentage()<s},integer(s=Nu){return Math.floor(Math.random()*s)}},Pn=csSymbol("cachedJson");function Mu(s){if(s[Pn])return s[Pn];if(csArray.isArray(s)){if(s.length===0)return"[]";let n="["+Os(s[0]);for(let t=1;t<s.length;t++)n+=","+Os(s[t]);return n+="]"}return s[Pn]=csJSON.stringify(s)}var Os=typeof window.Symbol!="undefined"?Mu:csJSON.stringify;var at=(()=>{let s;return function(n){n.debug="debug",n.warn="warn",n.implementation="implementation",n.error="error",n.critical="critical"}(s||(s={})),s})(),za=["t.contentsquare.net","clicktale"],ku=s=>{var n;if(typeof s.filename=="string"&&csArray.prototype.some.call(za,t=>csString.prototype.indexOf.call(s.filename,t)>-1)&&!(csString.prototype.indexOf.call(s.filename,"blob")>-1&&(s.message==null?void 0:csString.prototype.indexOf.call(s.message,"importScripts"))>-1)){let t=new Error(s.message);t.stack=(n=s.error)===null||n===void 0?void 0:n.stack,V.critical(t)}};window.addEventListener("error",ku);var V=(()=>{class s{constructor(){}static whiteListFilename(t){csArray.prototype.push.call(za,t)}static setStrategy(t){s.Vi=t}static computeIsActive(t){s.Le=Ps.boolean(t),s.Le?s.sc=Ps.boolean(10):s.sc=!1}static isLoggingActive(){return s.Le}static getStrategy(){return s.Vi}static debug(t,e=""){s.Le&&this.Vi.send(t,e,at.debug)}static warn(t,e=!0,i=""){var r;s.Le&&e&&this.Vi.send(t,i,at.warn),(r=window.UXAnalytics.Console)===null||r===void 0||r.warn(t)}static implementation(t,e=""){s.Le&&this.Vi.send(t,e,at.implementation)}static error(t,e=""){var i;s.Le&&this.Vi.send(t,e,at.error),(i=window.UXAnalytics.Console)===null||i===void 0||i.error(t)}static critical(t,e=""){this.Vi.send(t,e,at.critical)}static tryToExecute(t,e){return function(...i){try{let r=e.apply(this,i);return Q(window.Promise)&&r instanceof window.Promise?r.then(a=>a,a=>s.error(Ke(a)?a:new Error(a),t)):r}catch(r){try{s.error(Ke(r)?r:new Error(r),t)}catch{}}}}static isPerfLoggingActive(){return s.sc}}return s.Le=!1,s.sc=!1,s})();var Du=/^\d+\.\d+(?:\.\d+)?$/,Lu=s=>{if(!Du.test(s))return;let[n,t,e]=csArray.prototype.map.call(csString.prototype.split.call(s,"."),Number);return{major:n,minor:t,patch:!e||Number.isNaN(e)?0:e}},xu=(s,n)=>s.major!==n.major?s.major-n.major:s.minor!==n.minor?s.minor-n.minor:s.patch-n.patch,Uu=(s,n)=>xu(s,n)>=0,Vu=1,ju="f553e78fb58e051e51fe8074c4c6e73e",Zn=(()=>{let s;return function(n){n[n.Disabled=0]="Disabled",n[n.ButtonAndLinkOnly=1]="ButtonAndLinkOnly",n[n.Enabled=2]="Enabled"}(s||(s={})),s})(),Hu=(()=>{class s{constructor(t){var e,i,r,a,c,l,h,f,d,y,E,v;this.isSMB=(e=t.isSMB)!==null&&e!==void 0?e:!1,this.trackerDomain=t.trackerDomain,this.dynamicConfDomain=t.dynamicConfDomain,this.settingsFileUri=t.settingsFileUri,this.tagDomain=t.tagDomain,this.loggerDomain=t.ed,this.minLogLevel=t.logLevel,this.projectId=t.projectId,this.smbConfig=t.smbConfig,this.status=t.status,this.hostnames=t.hostnames,this.iframesTracking=!!t.iframesTracking,this.crossDomainTracking=!!t.crossDomainTracking,this.crossDomainSingleIframeTracking=!!t.crossDomainSingleIframeTracking,this.consentRequired=!!t.consentRequired,this.allowSubdomains=!!t.allowSubdomains,this.visitorCookieTimeout=t.visitorCookieTimeout||vr,this.sampleRate=t.sampleRate,this.replayRecordingRate=t.replayRecordingRate,this.validationRate=t.validationRate,this.lastTrackingDraw=t.lastTrackingDraw||1,this.useHttps=!0,this.eMerchandisingEnabled=t.eMerchandisingEnabled,this.mouseMoveHeatmapEnabled=t.mouseMoveHeatmapEnabled,this.jsErrorsEnabled=t.jsErrorsEnabled,this.collectionEnabled=!!(!((a=(i=t.collectionEnabled)!==null&&i!==void 0?i:(r=t.smbConfig)===null||r===void 0?void 0:r.record)!==null&&a!==void 0)||a),this.useSentry=!!((c=t.useSentry)!==null&&c!==void 0?c:!((l=t.smbConfig)===null||l===void 0)&&l.useSentry),this.apiErrors={enabled:(h=t.apiErrorsEnabled)!==null&&h!==void 0?h:0,...t.apiErrors},this.customErrors={enabled:(f=t.customErrorsEnabled)!==null&&f!==void 0?f:0,...t.customErrors},this.jsCustomErrorsEnabled=t.jsCustomErrorsEnabled,this.triggerSessionReplayEnabled=t.triggerSessionReplayEnabled,this.triggerSessionReplayRegex=this.ic(t.triggerSessionReplayRegex),this.dynamicIdRegex=t.dynamicIdRegex?new csRegExp(t.dynamicIdRegex):null,this.whitelistedAttributes=t.whitelistedAttributes||[],this.replayRecordingUnmaskedUrlRegex=this.ic(t.replayRecordingUnmaskedUrlRegex),this.replayRecordingMaskedUrlRegex=this.ic(t.replayRecordingMaskedUrlRegex),this.replayRecordingMaskedUrlRegexRules=t.replayRecordingMaskedUrlRegexRules||null,this.replayRecordingUnmaskedUrlRegexRules=t.replayRecordingUnmaskedUrlRegexRules||null,this.anonymisationMethod=t.anonymisationMethod||null,this.tagDeploymentMode=t.tagDeploymentMode,this.dualCollectionTagDomain=t.dualCollectionTagDomain||null,this.ptcDomain=t.ptcDomain||null,this.ptcGuid=t.ptcGuid||null,this.secureCookiesEnabled=!!t.secureCookiesEnabled,this.ptcSha512=t.ptcSha512||null,this.ptcSnapshotPath=t.ptcSnapshotPath||null,this.emitDebugEvents=!1,this.malkaQuotaServiceDomain=t.malkaQuotaServiceDomain||null,this.staticResourceManagerDomain=t.staticResourceManagerDomain||null,this.malkaRecordingDomain=t.malkaRecordingDomain||null,this.textVisibilityEnabled=t.textVisibilityEnabled,this.experimental=t.experimental||{},this.malkaEtrEnabled=!!t.malkaEtrEnabled,this.malkaUrlEnabled=!!t.malkaUrlEnabled,this.cookielessTrackingEnabled=t.cookielessTrackingEnabled,this.customHashIdEnabled=!!t.customHashIdEnabled,this.encryptionEnabled=!!t.recordingEncryptionEnabled,this.encryptionPublicKey=t.recordingEncryptionPublicKey||null,this.pathComputationRules=t.pathComputationRules||{},t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex===""&&(this.pathComputationRules.dynamicElementNameRegex=null),t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex&&(this.pathComputationRules.dynamicElementNameRegex=new csRegExp(t.pathComputationRules.dynamicElementNameRegex)),this.asyncSerializerEnabled=!!t.asyncSerializerEnabled,this.encryptionPublicKeyId=t.recordingEncryptionPublicKeyId,this.pendingInactivityTimeout=t.pendingInactivityTimeout||5e3,this.accessibilityEnabled=!!t.accessibilityEnabled,this.useStaticResourceManager=!!t.useStaticResourceManager,t.taskSchedulerOptions&&(this.taskSchedulerOptions={...t.taskSchedulerOptions,enabled:!!t.taskSchedulerOptions.enabled}),this.uxaDomain=t.uxaDomain,this.environment=((d=t.uxaDomain)===null||d===void 0?void 0:d.indexOf("staging"))>-1?"staging":"production",this.performanceTimingOptions=t.performanceTimingOptions,this.replayConsentRequiredForSession=!!t.replayConsentRequiredForSession,this.isWebView=!1,t.displayAdOptions&&t.displayAdOptions.length&&(this.displayAdOptions=t.displayAdOptions),t.voc&&(this.voc={...t.voc,enabled:!!t.voc.enabled}),t.heapEnvironment&&(this.heapEnvironment=t.heapEnvironment),t.implementations&&t.implementations.length&&(this.implementations=t.implementations),this.eventsApiEnabled=!!t.eventsApiEnabled,this.anonymizeDigits=(y=t.anonymizeDigits)!==null&&y!==void 0?y:null,this.isHeapPresent=window.heap!==void 0,this.recordTargetingRules=(E=t.recordTargetingRules)!==null&&E!==void 0?E:[],this.paProxyDomainUri=t.paProxyDomainUri||null,this.emitRecordInfoEvents=t.emitRecordInfoEvents!=!1,this.collectHierarchy=!!t.collectHierarchy,this.collectSubmit=!!t.collectSubmit,this.collectTargetText=(v=t.collectTargetText)!==null&&v!==void 0?v:Zn.Disabled}getTrackerUri(){return`${this.ls()}://${this.trackerDomain}`}getSentryFileUri(){return`${this.ls()}://${this.tagDomain}/uxa/smb/errors.js`}getSentryDSNUri(){return`https://${ju}@${this.loggerDomain}/4508608369131520`}getRecordingUri(){return`${this.ls()}://${this.malkaRecordingDomain}`}getLegacyQuotaUri(){return`${this.ls()}://${this.malkaQuotaServiceDomain}`}getLoggerUri(){return`${this.ls()}://${this.loggerDomain}`}getMetricsUri(){return`${this.ls()}://${this.loggerDomain}/metrics`}getStaticResourceManagerUri(){return`${this.ls()}://${this.staticResourceManagerDomain}`}getSettingsFileUri(){return this.settingsFileUri?this.settingsFileUri:`${this.ls()}://${this.dynamicConfDomain}/${this.projectId}.json`}isQuotaEnabled(){return this.isSMB&&!!this.dynamicConfDomain}getPaProxyDomainUri(){return`${this.ls()}://${this.paProxyDomainUri}`}ls(){return this.useHttps?"https":"http"}isProjectActive(){return this.status===Vu}processOptionOverrides(t){t&&t.forEach&&t.forEach(([e,...i])=>{if(e==="setOption"){let[r,a]=i;this.Zm(r,a)}})}Zm(t,e){t==="trackerDomain"&&(this.trackerDomain=e),t==="loggerDomain"&&(this.loggerDomain=e),t==="malkaRecordingDomain"&&(this.malkaRecordingDomain=e),t==="malkaQuotaServiceDomain"&&(this.malkaQuotaServiceDomain=e),t==="staticResourceManagerDomain"&&(this.staticResourceManagerDomain=e),t==="minLogLevel"&&(this.minLogLevel=e),t==="useHttps"&&(this.useHttps=!!e),t==="isWebView"&&(this.isWebView=e),t==="paProxyDomainUri"&&(this.paProxyDomainUri=e)}ic(t){return t?this.ty(t):null}getRequestParameters(){return{pid:`${this.projectId}`}}updateDynamicFields(t,e){t==="emitDebugEvents"&&(this.emitDebugEvents=e),t==="minLogLevel"&&(this.minLogLevel=e)}ty(t){try{let e=/^\/(.*)\/([gim]*)$/.exec(t);if(e){let[,i,r]=e;return new csRegExp(`^${i}$`,r)}return new csRegExp(`^${t}$`)}catch{return null}}isHeaderCollectionActive(){var t,e;return this.apiErrors.collectStandardHeaders||!!(!((t=this.apiErrors.validCustomHeaders)===null||t===void 0)&&t.length)||!!(!((e=this.apiErrors.plainCustomHeaders)===null||e===void 0)&&e.length)}isCsSideloadingHeap(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="cs_sideloads_heap"&&!this.isHeapPresent}isHeapSideloadsCs(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="heap_sideloads_cs"}isHeapSideloadsCsV5(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="heap_sideloads_cs"&&this.Fu()}isHeapSideloadsStartDataCollection(){if(this.isHeapSideloadsCs()){if(this.Fu())return!0;let t=Lu(this.getHeapVersion()||"");if(t&&t.major===4&&Uu(t,{major:4,minor:23,patch:5}))return!0}return!1}Fu(){var t;return typeof((t=window.heap)===null||t===void 0?void 0:t.getUserId)=="function"}getHeapVersion(){var t,e,i,r,a,c;return typeof((t=window.heap)===null||t===void 0?void 0:t.getConfig)=="function"&&((r=(i=(e=window.heap)===null||e===void 0?void 0:e.getConfig())===null||i===void 0?void 0:i.sdk)===null||r===void 0?void 0:r.version)||((c=(a=window.heap)===null||a===void 0?void 0:a.version)===null||c===void 0?void 0:c.heapJsVersion)||void 0}isCsCrosswritingHeap(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="cs_crosswrites_heap"}isCollectTargetTextEnabled(){return this.isSMB||this.collectTargetText!==Zn.Disabled}isNetworkDetailsEnabled(){return this.performanceTimingOptions?this.performanceTimingOptions.withResource||this.performanceTimingOptions.withNavigation:!1}hasTargetingRules(){var t;return!!(!((t=this.recordTargetingRules)===null||t===void 0)&&t.length)}}return s})(),Bu=(()=>{class s{constructor(t,e){this.ho=t,this.$u=e}init(){this.zu=this.ho!==this.ho.top,this.Gu=this.$u.isWebView&&this.ho===this.ho.top,this.$u.iframesTracking&&this.zu||this.Gu?this.qu=!1:this.qu=!0}isInIframeContext(){return this.zu}isTopWindowTracker(){return this.qu}isInWebViewContext(){return this.Gu}}return s})(),li=(()=>{let s;return function(n){function t(e){return csArray.prototype.join.call(csArray.prototype.map.call(Object.keys(e),i=>`${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`),"&")}n.toQuery=t}(s||(s={})),s})(),Ga=(()=>{class s{constructor(t,e){this.domainUri=t,this.path=e,this.beforeRequestCallbacks=[],this.afterRequestCallbacks=[]}setRequestParametersProviders(...t){this.requestParametersProviders=t}before(t){csArray.prototype.push.call(this.beforeRequestCallbacks,t)}after(t){csArray.prototype.push.call(this.afterRequestCallbacks,t)}retrieveParameters(){return this.requestParametersProviders?csArray.prototype.reduce.call(csArray.prototype.map.call(this.requestParametersProviders,t=>t.getRequestParameters()),(t,e)=>({...t,...e})):{}}}return s})(),Ns=(()=>{class s extends Ga{constructor(t,e){super(t,e)}send(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,i=>i());let t=this.retrieveParameters();this.nc(t);let e=li.toQuery(t);this.ey(e),csArray.prototype.forEach.call(this.afterRequestCallbacks,i=>i())}ey(t){let e=new window.Image(1,1);e.onload=tn,e.onerror=tn,csHTMLImageElementsrc.call(e,`${this.domainUri}${this.path?`/${this.path}`:""}?${t}`)}nc(t){t.r=csString.prototype.slice.call(`${Math.random()}`,2,8)}}return s})(),Fu=(()=>{class s{constructor(t,e){this.Ps=t,this.sy=e}init(){this.hs=new Ns(this.Ps.getLoggerUri()),this.hs.setRequestParametersProviders(this,this.sy)}send(t){this.uo=t,this.hs.send()}getRequestParameters(){return{a:this.uo.app,l:this.uo.level,m:this.uo.message,s:this.uo.stacktrace}}}return s})();function tt(s,n,t,e){var i=arguments.length,r=i<3?n:e===null?e=Object.getOwnPropertyDescriptor(n,t):e,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,n,t,e);else for(var c=s.length-1;c>=0;c--)(a=s[c])&&(r=(i<3?a(r):i>3?a(n,t,r):a(n,t))||r);return i>3&&r&&Object.defineProperty(n,t,r),r}var tr=(()=>{class s{static setGlobalService(t){s.globalService=t}constructor(t){this.name=t}_get(){return this._values}_reset(){this._values={}}aggregate(){if(!s.globalService)return;let t=this._get(),e=Object.keys(t);e.length&&(s.globalService.push(csArray.prototype.map.call(e,i=>({name:this.name,parameter:i,value:t[i]}))),this._reset())}}return s.globalService=null,tt([I("Metric.aggregate")],s.prototype,"aggregate",null),s})(),Vt=(()=>{class s extends tr{constructor(t,e=100){super(t),this.iy=e,this.Ie=null,this._values={}}count(t,e=1){this._values[t]=(this._values[t]||0)+e,this._debounce()}_debounce(){tr.globalService&&(this.Ie&&window.csClearTimeout(this.Ie),this.Ie=window.csSetTimeout(()=>{this.aggregate(),this.Ie=null},this.iy))}}return s})();var ct={counters:{commandsFromIntegrations:new Vt("commands-from-integrations"),commandsFromCSTC:new Vt("commands-from-cstc"),commandsFromIframe:new Vt("commands-from-iframe"),commandApplied:new Vt("command-applied"),commandError:new Vt("command-error"),commandMisuse:new Vt("command-misuse"),CSTCSnippetUsed:new Vt("cstc-snippet-used"),redactedPII:new Vt("redacted-pii"),pageAnonymisation:new Vt("page-anonymisation"),patchedNativeFunctions:new Vt("patched-native-functions"),pureWindowState:new Vt("pure-window-state"),sensitiveElements:new Vt("sensitive-elements"),cspErrors:new Vt("csp-errors"),networkRequests:new Vt("network-requests")},setService(s){tr.setGlobalService(s)}},$u=/[a-zA-Z0-9._%+-]+(?:@|%40|%2540)[a-zA-Z0-9.%-_]+((?:\.|%2[eE])[a-zA-Z0-9-]+)+/g,zu=/[a-zA-Z0-9+_-](?:@|%40|%2540)/,Gu="CS_ANONYMIZED_EMAIL",On="([-A-Za-z0-9+/=_]|=[^=]|={3,})+",qu=new csRegExp(`(ey${On}\\.ey${On}\\.${On})`,"g"),Wu="CS_ANONYMIZED_JWT",Yu=/[0-9]{4}/,Xu=/(^|[^a-zA-Z0-9*.,-])([45*][0-9*]{3}([ -]?)[0-9*]{4}\3[0-9*]{4}\3[0-9*]{4})($|[^a-zA-Z0-9*.,-])/g,Ku="CS_ANONYMIZED_PII",Ju="\u2022",Qu=/\d/g,Zu=/([+(]{0,2}\d[-_ ()/]{0,4}){9,}/,td=/(?:\d{1,3}\.){3}\d{1,3}/,ed=/(?:[A-F0-9]{1,4}:){7}[A-F0-9]{1,4}/,Ue=(()=>{let s;return function(n){function t(f){return csString.prototype.replace.call(f,$u,Gu)}n.replaceEmail=t;function e(f){return csString.prototype.replace.call(f,qu,Wu)}n.replaceJWT=e;function i(f,d){return csString.prototype.replace.call(f,Xu,d)}n.replaceCreditCardNumber=i;function r(f){return csString.prototype.replace.call(f,Qu,Ju)}n.replaceDigits=r;function a(f){return td.test(f)||ed.test(f)}n.mayHaveIPAddress=a;function c(f){return Zu.test(f)}n.mayHaveNumberSequence=c;function l(f){return Yu.test(f)}n.mayHaveCreditCardNumber=l;function h(f){return zu.test(f)}n.mayHaveEmail=h}(s||(s={})),s})(),yi=(()=>{class s{hasPII(t,e){let i=this.checkAndAnonymizePII(t,e);return t!==i}checkAndAnonymizePII(t,e=null){let i=this.ny(this.rc(t));return e===!0?i=this.ry(i):e===!1&&(i=this.oy(i)),i}anonymizePII(t){return this.rc(t)}anonymizeJwt(t){return Ue.replaceJWT(t)}anonymizeFields(t,e){return csArray.prototype.forEach.call(e,i=>{t[i]=this.rc(t[i])}),t}rc(t){if(Ue.mayHaveEmail(t)){let e=Ue.replaceEmail(t);return e!==t&&ct.counters.redactedPII.count("email"),e}return t}ry(t){return Ue.replaceDigits(t)}oy(t){return Ue.mayHaveNumberSequence(t)?Ue.replaceDigits(t):t}ny(t){return Ue.mayHaveCreditCardNumber(t)?Ue.replaceCreditCardNumber(t,(e,i,r,a,c)=>{if(csString.prototype.indexOf.call(r,"*")===-1){let h=a.length?csArray.prototype.join.call(csString.prototype.split.call(r,a),""):r;if(!this.ay(h))return e;ct.counters.redactedPII.count("cc")}else ct.counters.redactedPII.count("cc-partial");return`${i}${Ku}${c}`}):t}ay(t){let e=parseInt(t[t.length-1]),i=0;for(let r=t.length-2;r>=0;r--){let a=parseInt(t[r]);r%2===0&&(a*=2),i+=Math.floor(a/10)+a%10}return 10-i%10===e}}return s})(),qa="15.109.0";function _r(){return{v:qa}}function wr(s){let n=new ArrayBuffer(s.length),t=new Uint8Array(n);for(let e=0,i=s.length;e<i;e+=1)t[e]=csString.prototype.charCodeAt.call(s,e);return n}function go(s){let n=new Uint8Array(s),t="";for(let e=0;e<n.byteLength;e+=1)t+=csString.fromCodePoint(n[e]);return t}function Wa(s){let n=self.atob(s);return wr(n)}function er(s){let n=csArray.from(new Uint8Array(s));return csArray.prototype.join.call(csArray.prototype.map.call(n,t=>csString.prototype.padStart.call(t.toString(16),2,"0")),"")}function mo(s){let n=csString.prototype.indexOf.call(s,";base64,")!==-1,t=csString.prototype.indexOf.call(s,","),e=n?[csString.prototype.substring.call(s,0,t-7),csString.prototype.substring.call(s,t+1)]:[csString.prototype.substring.call(s,0,t),csString.prototype.substring.call(s,t+1)];if(!n&&/^%3Csvg/i.test(e[1]))try{e[1]=decodeURIComponent(e[1])}catch(a){ht.warn(`${a}, calling decodeURIComponent on: ${e[1]}`)}let r=n?Wa(e[1]):wr(e[1]);return new Blob([r],{type:csString.prototype.replace.call(e[0],"data:","")})}var Ya=typeof performance!="undefined"&&!!performance.now,yo=Ya?()=>performance.now():csDate.now,sd=(()=>{var s,n;return Ya?(n=(s=performance.timing)===null||s===void 0?void 0:s.navigationStart)!==null&&n!==void 0?n:Math.floor(performance.timeOrigin):0})(),O={now(){return Math.round(yo()+sd)},elapsed(){return yo()}};function Eo(){return Math.floor(O.now()/1e3)}function Xa(){return typeof window.Promise=="function"}function id(){var s;return typeof crypto!="undefined"&&Xe((s=crypto.subtle)===null||s===void 0?void 0:s.digest)}function So(){var s,n;return typeof((s=window.navigation)===null||s===void 0?void 0:s.addEventListener)=="function"&&typeof((n=window.navigation)===null||n===void 0?void 0:n.removeEventListener)=="function"}function fe(s,n){return csString.prototype.lastIndexOf.call(s,n,0)===0}function Ei(s,n){return csString.prototype.indexOf.call(s,n,s.length-n.length)!==-1}var Ka=(()=>{class s{constructor(t,e){this.h=t,this.I=e}getRequestParameters(){return{d:`${O.now()}`,p:this.I.anonymizePII(window.location.href),...this.h.getRequestParameters(),..._r()}}}return s})(),nd="uxa",vo=5,rd="No stacktrace",Ja="snippet-",Qa="implementation-snippet-",_o=(()=>{let s;return function(n){n.IMPLEMENTATION="implementation",n.DYNAMIC="dynamic"}(s||(s={})),s})(),Nn={[at.debug]:0,[at.warn]:1,[at.implementation]:1,[at.error]:2,[at.critical]:3},od=(()=>{class s{constructor(t,e,i){this.us=e,this.I=new yi,this.Wu=Nn[at.warn],this.Wu=Nn[t.minLogLevel||at.warn],this.hs=i||new Fu(t,new Ka(t,this.I)),this.Yu={[at.debug]:[],[at.warn]:[],[at.implementation]:[],[at.error]:[],[at.critical]:[]},this.po={implementation:{},dynamic:{}},this.hs.init()}send(t,e="",i=at.warn){if(!this.cy(i,e))return;csArray.prototype.push.call(this.Yu[i],e||"");let r={message:this.ly(t,e),stacktrace:this.hy(t),app:nd,level:i};this.hs.send(r)}ly(t,e){let i=Ke(t)?this.I.anonymizePII(t.message||t.toString()):t;return e&&(i+=` ErrorCode: ${e}`),i}hy(t){return Ke(t)?`${t.stack||rd} ${this.fo()}`:this.fo()}fo(){let t=this.us.getVisitorService(),e=t==null?void 0:t.getVisitor();if(!e)return"No context";let i=this.us.getSessionService(),r=i&&i.getSession(),a={userId:e.id,sessionNumber:e.visitsCount,pageNumber:r&&r.pageNumber};return csJSON.stringify(a)}cy(t,e){if(Nn[t]<this.Wu)return!1;if((e==null?void 0:csString.prototype.indexOf.call(e,Qa,0))===0)return this.Xu(e,_o.IMPLEMENTATION);if((e==null?void 0:csString.prototype.indexOf.call(e,Ja,0))===0)return this.Xu(e,_o.DYNAMIC);let i=this.Yu[t];return!(i.length>=vo||e&&csArray.prototype.some.call(i,r=>r===e))}Xu(t,e){return t in this.po[e]?this.po[e][t]>=vo?!1:(this.po[e][t]+=1,!0):(this.po[e][t]=1,!0)}}return s})(),wt=!di&&document.createElement("a"),ad=/(:443|:80)$/;function pe(s){return wt?(wt.href=s,wt.href):""}function cd(s,n){return new csURL(s,n).href}function Za(s){let n=Ar(s);return n===null?"":decodeURIComponent(n.hostname)}function br(s,n){return csArray.prototype.some.call(n,t=>Ei(s,`.${t}`)||s===t||t==="")}function ld(s){return s[0]==="/"?s:`/${s}`}function wo(s){return csString.prototype.replace.call(s,ad,"")}function Ar(s){return!wt||!fe(s,"http://")&&!fe(s,"https://")?null:(wt.href=s,{hash:wt.hash,host:wo(wt.host),hostname:wt.hostname,href:wt.href,origin:wt.origin?wt.origin:wo(`${wt.protocol}//${wt.host}`),pathname:ld(wt.pathname),port:wt.port,protocol:wt.protocol,search:wt.search})}var bo="CS_IFRAME_MESSAGE",hd=(()=>{let s;return function(n){n.AfterPageView="afterPageView",n.GetSessionKey="getSessionKey"}(s||(s={})),s})(),oe=(()=>{let s;return function(n){n.Parent="parent",n.Child="child"}(s||(s={})),s})(),J=(()=>{let s;return function(n){n.Discovery="discovery",n.Stop="stop",n.RecordingContext="recordingContext",n.SensitiveStatus="sensitiveStatus",n.RecordingEvent="recordingEvent",n.EndOfBufferedMessages="endOfBufferedMessages",n.ChildLogMessage="childLogMessage",n.AnalysisEvent="analysisEvent",n.JavascriptError="javascriptError",n.ApiError="apiError",n.Assets="assets",n.DetailedApiError="detailedApiError",n.EmerchandisingMessage="emerchandisingMessage",n.Commands="commands",n.IntegrationCallback="integrationCallback",n.StaticResource="staticResource",n.TrackingContextResultMessage="trackingContextResultMessage",n.TrackingContextRequestMessage="trackingContextRequestMessage",n.CustomError="customError"}(s||(s={})),s})(),mt=(()=>{let s;return function(n){function t(l,h,f,d){let y={type:l,from:h,pid:f,signature:bo};return d!==void 0&&d>=0&&(y.id=d),y}n.buildBaseMessage=t;function e(l,h,f,d){let y=Za(l.origin);return!!l.data&&!!l.data.type&&l.data.signature===bo&&l.data.from===h&&l.data.pid===f&&br(y,d)}n.isMessageValid=e;function i(l,h,f,d){d?l.postMessage(f,h,d):l.postMessage(f,h)}n.sendPostMessage=i;function r(){return new MessageChannel}n.getNewChannelMessage=r;function a(l,h){l.postMessage(h)}n.sendChannelMessage=a;function c(l){l.close()}n.closeChannelPort=c}(s||(s={})),s})(),ud=(()=>{class s{constructor(t){this.h=t}send(t,e="",i=at.warn){let r={message:t,errorCode:e,level:i},a=mt.buildBaseMessage(J.ChildLogMessage,oe.Child,this.h.projectId);a.content=r,mt.sendPostMessage(window.parent,"*",a)}}return s})(),dd=(()=>{class s{setContext(t,e){this.R=t,this.w=e}getVisitorService(){return this.R}getSessionService(){return this.w}}return s})();function pd(s){if(document!=null&&document.prerendering){document.addEventListener("prerenderingchange",s,{once:!0});return}s()}function j(s,n,t,e){var i=arguments.length,r=i<3?n:e===null?e=Object.getOwnPropertyDescriptor(n,t):e,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,n,t,e);else for(var c=s.length-1;c>=0;c--)(a=s[c])&&(r=(i<3?a(r):i>3?a(n,t,r):a(n,t))||r);return i>3&&r&&Object.defineProperty(n,t,r),r}function fd(){let s=new MutationObserver(n=>{n.forEach(t=>{q(t.removedNodes,e=>{e instanceof HTMLElement&&e.tagName==="CS-NATIVE-FRAME-HOLDER"&&(ct.counters.pureWindowState.count("iframe-deletion"),ht.warn("<cs-native-frame-holder> deleted"),s.disconnect())})})});s.observe(document.body,{childList:!0})}function Ao(s){return typeof s!="function"?!1:s.toString().indexOf("[native code]")!==-1}function gd(){(!Ao(MutationObserver)||!Ao(MutationObserver.prototype.observe))&&ct.counters.patchedNativeFunctions.count("MutationObserver")}function md(){try{window.CSPureWindow&&fd(),gd()}catch{}}var dt=(()=>{let s;return function(n){n.CURRENT_DOMAIN="CURRENT_DOMAIN";function t(l){let f=new csRegExp(`(^|;)[ ]*${l}=([^;]*)`).exec(document.cookie);return f?decodeURIComponent(f[2]):null}n.get=t;function e(l,h,f,d,y,E){let v=encodeURIComponent(`${h}`),C=f===n.CURRENT_DOMAIN?void 0:f,P=i(d),A=P?`;expires=${P.toUTCString()}`:"",w=";path=/",x=Nt(C)?`;domain=${C}`:"",b=`${l}=${v}${A}${w}${x}`;return Q(y)&&y!==Jt.NotSet&&(b=`${b};SameSite=${y}`),Q(E)&&E===ce.Yes&&(b=`${b};Secure`),document.cookie=b,!0}n.set=e;function i(l){return ue(l)?new csDate(O.now()+l):l}n.toExpireDate=i;function r(l,h){t(l)&&e(l,"",h,new csDate(0)),t(l)&&e(l,"",h,new csDate(0),Jt.None,ce.Yes)}n.remove=r;function a(){return document.cookie.length>0}n.isCookiePresent=a;function c(l,h){let f="_cs_root-domain",d=t(f);if(d!==null&&d!=="1")return d;let y=csString.prototype.split.call(window.location.hostname,"."),E=csArray.prototype.pop.call(y);for(;y.length&&(d===null||d==="1");)E=csArray.prototype.join.call([csArray.prototype.pop.call(y),E],"."),e(f,E,E,void 0,l,h),d=t(f);return r(f,E),E}n.getRootDomain=c}(s||(s={})),s})(),yd=(()=>{let s;return function(n){function t(){return window.navigator.vendor&&csString.prototype.indexOf.call(window.navigator.vendor,"Apple")>-1&&window.navigator.appVersion&&csString.prototype.indexOf.call(window.navigator.appVersion,"Version/12.")>-1}n.browserIsSafariV12=t}(s||(s={})),s})(),Jt=(()=>{let s;return function(n){n.None="None",n.Lax="Lax",n.NotSet="X"}(s||(s={})),s})(),ce=(()=>{let s;return function(n){n[n.Yes=1]="Yes",n[n.No=0]="No"}(s||(s={})),s})(),cn=(()=>{class s{constructor(t,e,i){this.h=t,this.A=e,this.oi=i,this.oc=!1,this.Ku=Jt.NotSet,this.ac=ce.No}getSameSiteFlag(){return this.Ku}getSecureFlag(){return this.ac}getDomain(){return this.cc}getRootDomain(){return this.Ju}init(){if(this.h.cookielessTrackingEnabled)return;let t=this.uy(),e=this.dy();this.oc=this.py(t,e),this.oc?(this.Ku=t,this.ac=e):this.h.secureCookiesEnabled&&this.A.getUrlProtocol()==="https:"&&(this.ac=ce.Yes),this.Ju=this.fy(),this.cc=this.gy(this.Ju)}py(t,e){return yd.browserIsSafariV12()?!1:(dt.set(s.COOKIE_TEST_FOR_SAME_SITE,"Test same site",s.CURRENT_DOMAIN,void 0,t,e),dt.get(s.COOKIE_TEST_FOR_SAME_SITE)?(dt.remove(s.COOKIE_TEST_FOR_SAME_SITE,s.CURRENT_DOMAIN),!0):!1)}uy(){return this.A.getUrlProtocol()==="http:"?Jt.Lax:this.oi.isSameSiteNoneSecureNeeded()||this.h.crossDomainTracking?Jt.None:Jt.Lax}dy(){return this.A.getUrlProtocol()==="http:"?ce.No:this.h.secureCookiesEnabled||this.h.crossDomainTracking||this.oi.isSameSiteNoneSecureNeeded()?ce.Yes:ce.No}isSameSiteSupported(){return this.oc}set(t,e,i){let r=dt.toExpireDate(i);dt.set(t,e,this.cc,r,this.getSameSiteFlag(),this.getSecureFlag())}get(t){let i=new csRegExp(`(^|;)[ ]*${t}=([^;]*)`).exec(document.cookie);return i?decodeURIComponent(i[2]):null}delete(t,e){let i=e||this.cc;dt.remove(t,i)}fy(){let t=this.oi.isSameSiteNoneSecureNeeded()&&this.isSameSiteSupported(),e=t?Jt.None:void 0,i=t?ce.Yes:void 0;return dt.getRootDomain(e,i)}gy(t){return this.h.allowSubdomains?t:dt.CURRENT_DOMAIN}}return s.CURRENT_DOMAIN="CURRENT_DOMAIN",s.COOKIE_TEST_FOR_SAME_SITE="_cs_same_site",s})(),vs="_cs_t",To="1",Ed=(()=>{class s{constructor(t,e){this.mt=t,this.h=e,this.go=!1,this.mo=!1}init(){if(!this.h.cookielessTrackingEnabled&&this.mt.isTopWindowTracker()&&"cookie"in document){if(!this.mt.isInIframeContext()&&dt.isCookiePresent()){this.go=!0,this.mo=!1;return}if(dt.set(vs,To,dt.CURRENT_DOMAIN),dt.get(vs)!==null){this.go=!0,this.mo=!1,dt.remove(vs,dt.CURRENT_DOMAIN);return}dt.set(vs,To,dt.CURRENT_DOMAIN,void 0,Jt.None,ce.Yes),dt.get(vs)!==null&&(this.go=!0,this.mo=!0,dt.remove(vs,dt.CURRENT_DOMAIN))}}areCookiesEnabled(){return this.go}isSameSiteNoneSecureNeeded(){return this.mo}}return s})();function Sd(){let s="CSSessionStorageTest";try{return sessionStorage.setItem(s,s),sessionStorage.getItem(s)!==s?!1:(sessionStorage.removeItem(s),!0)}catch{return!1}}var vd=(()=>{class s{constructor(t,e){this.h=t,this.oi=e}canTrack(){return this.h.isProjectActive()&&this.my()&&this.Qu()&&this.yy()}canTrackInChild(){return this.h.isProjectActive()&&this.Ey()&&(this.Qu()||this.Sy())}yy(){return this.h.cookielessTrackingEnabled?Sd():this.oi.areCookiesEnabled()}Qu(){return br(window.location.hostname,this.h.hostnames)}my(){return!this.Zu()&&this.vy()}Ey(){return!this.Zu()&&this._y()}Sy(){return window.location.protocol==="about:"&&window.location.hostname===""}Zu(){return"visibilityState"in document&&document.visibilityState==="prerender"}vy(){return this.td()&&this.wy()}_y(){return this.td()}wy(){try{return!!window.localStorage}catch{return!1}}td(){return"pageXOffset"in window&&"pageYOffset"in window&&"onpagehide"in window&&"JSON"in window&&"parse"in window.csJSON&&"stringify"in window.csJSON&&"addEventListener"in window&&"removeEventListener"in window&&"Node"in window&&"filter"in csArray.prototype&&"forEach"in csArray.prototype&&"querySelectorAll"in document&&"now"in csDate&&"keys"in Object&&"performance"in window&&"Map"in window&&"Set"in window}}return s})(),_d=(()=>{class s{constructor(t,e){this.lc=!1,this.sd=new Map,this.nd=new Map,this.rd=new Map,this.od="CS_WORKER_SIGNATURE";let i=`
    const algorithm = ${t.algorithm};
    const compressor = (${t.getCompressorSourceCode()})();
    (()=>{"use strict";var e;!function(e){e.UNCOMPRESSED="0",e.GZIP="2"}(e||(e={}));let t={debug(...e){},warn(...e){},implementation(...e){},error(...e){},critical(...e){},isPerfLoggingActive:()=>!1};class s{constructor(e){var t;this.queryParams={},this.headers={},this.handleRecoveredRequests=e=>{for(const t of e){const{metadata:e,events:s}=t;this.send(s,e)}},this.endpoint=e.endpoint,this.compressionOpts=e.compressionOpts,this.recoveryStorage=e.recoveryStorage,this.mandatoryParameters=null!==(t=e.mandatoryParameters)&&void 0!==t?t:[],this.worker=!!e.worker,this.recoveryStorage&&this.recoveryStorage.recover(this.handleRecoveredRequests)}setQueryParams(e){Object.keys(e).forEach(t=>{this.queryParams[t]=e[t]})}removeQueryParams(e){e?e.forEach(e=>{delete this.queryParams[e]}):this.queryParams={}}send(s,r){const a=r||{...this.queryParams},o=!("ct"in a),i="string"!=typeof s&&!this.isArrayBuffer(s);"ct"in a||(this.compressionOpts&&o?a.ct=this.compressionOpts.compressionType:a.ct=e.UNCOMPRESSED);const n=i?JSON.stringify(s):s,h=Object.keys(a).map(e=>\`\${encodeURIComponent(e)}=\${encodeURIComponent(a[e])}\`).join("&"),c=\`\${this.endpoint}?\${h}\`;!function(e,t){const s=e.length;for(let r=0;r<s;r++)if(t(e[r],r))return!0;return!1}(this.mandatoryParameters,e=>null==a[e])?this.compressionOpts&&o&&"string"==typeof n?this.compressionOpts.compressor(n,this.compressionOpts.compressionOutputType,e=>this.doSend(c,a,e)):this.doSend(c,a,n):t.warn(\`[\${this.worker?"WORKER":"MAIN"}] All mandatory parameters are not present on \${c}\`)}onLoad(e){this.onLoadCallback=e}onError(e){this.onErrorCallback=e}onTimeout(e,t){this.onTimeoutCallback=e,this.timeout=t}abort(){this.abortCurrentXhrCall&&this.abortCurrentXhrCall()}setRequestHeader(e,t){this.headers[e]=t}getQueryParams(){return this.queryParams}isArrayBuffer(e){return e&&void 0!==e.byteLength}doSend(e,t,s){const r=new XMLHttpRequest,a=Object.keys(t).map(e=>\`\${encodeURIComponent(e)}=\${encodeURIComponent(t[e])}\`).join("&");r.open("POST",e),r.onload=()=>{if(this.recoveryStorage&&this.recoveryStorage.recover(this.handleRecoveredRequests),this.onLoadCallback){const e={params:t,responseText:r.responseText,status:r.status};this.onLoadCallback(e)}},r.onerror=()=>{this.recoveryStorage&&this.recoveryStorage.save({key:a,metadata:t,events:s}),this.onErrorCallback&&this.onErrorCallback({params:t})},this.timeout&&this.onTimeoutCallback&&(r.timeout=this.timeout,r.ontimeout=()=>{this.onTimeoutCallback()}),this.abortCurrentXhrCall=()=>r.abort(),Object.keys(this.headers).forEach(e=>{r.setRequestHeader(e,this.headers[e])}),r.send(s)}}class r{constructor(e){this.maxStoredBytes=e,this.storageBytesUsed=0}addString(e){this.storageBytesUsed+=2*e.length}addArrayBuffer(e){this.storageBytesUsed+=e.byteLength}isThresholdReached(){return this.storageBytesUsed>this.maxStoredBytes}reset(){this.storageBytesUsed=0}}class a{constructor(e){this.ramStorage={},this.byteSizeCounter=new r(e)}save({key:e,metadata:t,events:s}){this.byteSizeCounter.isThresholdReached()||(this.byteSizeCounter.addString(e),"string"==typeof s?this.byteSizeCounter.addString(s):this.byteSizeCounter.addArrayBuffer(s),this.byteSizeCounter.isThresholdReached()||(this.ramStorage[e]={metadata:t,events:s}))}recover(e){const t=[];this.getStorageKeys().forEach(e=>{const s=this.ramStorage[e];void 0!==s&&(delete s.metadata.datatype,t.push(s),this.removeItem(e))}),0!==t.length&&(e(t),this.byteSizeCounter.reset())}getStorageKeys(){return Object.keys(this.ramStorage)}removeItem(e){delete this.ramStorage[e]}}var o;!function(e){e[e.NOT_STARTED=0]="NOT_STARTED",e[e.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",e[e.OPEN_FAILED=2]="OPEN_FAILED",e[e.READY=3]="READY"}(o||(o={}));class i{constructor(e,t,s){this.storageName=e,this.onOpenError=s,this.cacheState=o.NOT_STARTED,this.toBeSavedBuffer=[],this.recoveryInProgress=0,this.origin=self.origin,this.context="object"==typeof window?"":"worker-",this.byteSizeCounter=new r(t),this.init()}async init(){await this.openCache(),this.cacheState===o.READY?this.flushToBeSavedBuffer():this.onOpenError(this.toBeSavedBuffer)}flushToBeSavedBuffer(){this.toBeSavedBuffer.forEach(e=>{this.save(e)}),this.toBeSavedBuffer=[]}async save(e){try{if(this.cacheState===o.OPEN_IN_PROGRESS)return void this.toBeSavedBuffer.push(e);if(this.cacheState!==o.READY)return;if(this.byteSizeCounter.isThresholdReached())return;const{key:t,metadata:s,events:r}=e;if(this.byteSizeCounter.addString(t),"string"==typeof r?this.byteSizeCounter.addString(r):this.byteSizeCounter.addArrayBuffer(r),this.byteSizeCounter.isThresholdReached())return;await this.cache.put(\`\${this.origin}/\${t}\`,new Response(r,{headers:s}))}catch{}}async recover(e){(this.cache||(await this.openCache(),this.cacheState===o.READY))&&this.doRecover(e)}async openCache(){try{this.cacheState=o.OPEN_IN_PROGRESS,this.cache=await self.caches.open(\`\${this.context}\${this.storageName}\`),this.cacheState=o.READY}catch{this.cacheState=o.OPEN_FAILED}}async doRecover(e){try{if(this.recoveryInProgress++,this.recoveryInProgress>1)return;const t=await this.cache.keys();if(0===t.length)return;const s=(await this.cache.matchAll()).map(e=>{const t={};e.headers.forEach((e,s)=>{t[s]=e}),delete t["content-type"];const s=t.datatype;return delete t.datatype,"json"===s||"base64"===s?e.text().then(e=>({metadata:t,events:e})):e.arrayBuffer().then(e=>({metadata:t,events:e}))}),r=await Promise.all(s);await Promise.all(t.map(e=>this.cache.delete(e))),e(r),this.byteSizeCounter.reset()}catch{}finally{this.recoveryInProgress--}}}class n{constructor(e){try{this.initializeStorageStrategy(e)}catch(e){this.setRamStorageStrategy()}}initializeStorageStrategy(e){self.caches?this.setCachesStrategy(e):this.setRamStorageStrategy()}save(e){this.storageStrategy.save(e)}recover(e){this.storageStrategy.recover(e)}setCachesStrategy(e){this.storageStrategy=new i(e,n.MAX_SIZE,e=>{this.setRamStorageStrategy(e)})}setRamStorageStrategy(e){this.storageStrategy=new a(n.MAX_SIZE),e&&e.forEach(e=>{this.storageStrategy.save(e)})}}n.MAX_SIZE=16777216,function(){const e="CS_WORKER_SIGNATURE",t=new Map,r=new n("csPersisted");function a(a){var o;if((o=a)&&o.WORKER_SIGNATURE===e)switch(a.type){case"CreatePostRequest":{const{endpoint:o,compressionOutputType:i,useRetry:n,mandatoryParameters:h}=a,c={endpoint:o,mandatoryParameters:h,worker:!0};i&&(c.compressionOpts={compressor,compressionOutputType:i,compressionType:algorithm}),n&&(c.recoveryStorage=r);const d=new s(c);t.set(o,d),d.onLoad(t=>{const s={type:"onLoad",endpoint:o,response:t,WORKER_SIGNATURE:e};self.postMessage(s)}),d.onError(t=>{const s={type:"onError",endpoint:o,response:t,WORKER_SIGNATURE:e};self.postMessage(s)})}break;case"SetQueryParams":{const{endpoint:e,queryParams:s}=a,r=t.get(e);r&&r.setQueryParams(s)}break;case"RemoveQueryParams":{const{endpoint:e,queryParams:s}=a,r=t.get(e);r&&r.removeQueryParams(s)}break;case"Send":{const{endpoint:e,payload:s,queryParams:r}=a,o=t.get(e);o&&o.send(s,r)}break;case"Abort":{const{endpoint:e}=a,s=t.get(e);s&&s.abort()}break;case"SetHeader":{const{endpoint:e,headerName:s,headerValue:r}=a,o=t.get(e);o&&o.setRequestHeader(s,r)}break;case"SetTimeout":{const{endpoint:s,timeout:r}=a,o=t.get(s);o&&o.onTimeout(()=>{const t={type:"onTimeout",endpoint:s,WORKER_SIGNATURE:e};self.postMessage(t)},r)}break;default:throw new Error(JSON.stringify(a))}}self.addEventListener("message",function(e){e.data.getReader?async function(e,t){const s=e.getReader();for(;;){const{done:e,value:r}=await s.read();if(e)break;t(r)}}(e.data,a):a(e.data)})}()})();`;try{this.ds=this.by(e||i),this.lc=!0,s.isTransferableStreamSupported()&&(this.ad=new ReadableStream({start:r=>{this.hc=r},cancel:()=>{this.hc=null}}),this.ds.postMessage(this.ad,[this.ad]))}catch(r){r.name==="SecurityError"&&ct.counters.cspErrors.count("network-worker"),this.lc=!1}}postMessage(t){t.WORKER_SIGNATURE=this.od,this.hc?this.hc.enqueue(t):this.ds.postMessage(t)}by(t){let e=window.csURL||window.webkitURL,i=window.Blob,r=window.Worker,a=new i([t],{type:"application/javascript"}),c=e.createObjectURL(a);V.whiteListFilename(c);let l=new r(c);return l.onmessage=h=>{let{type:f,endpoint:d,WORKER_SIGNATURE:y}=h.data;if(y===this.od){if(f==="onLoad"){let{response:E}=h.data,v=this.sd.get(d);v&&v(E)}else if(f==="onError"){let{response:E}=h.data,v=this.nd.get(d);v&&v(E)}else if(f==="onTimeout"){let E=this.rd.get(d);E&&E()}}},l}registerOnLoadCallback(t,e){this.sd.set(t,e)}registerOnErrorCallback(t,e){this.nd.set(t,e)}registerOnTimeoutCallback(t,e){this.rd.set(t,e)}isSupported(){return this.lc}static isTransferableStreamSupported(){try{let t=new ReadableStream;return structuredClone(t,{transfer:[t]}),!0}catch{return!1}}}return s})(),wd=(()=>{class s{constructor(t){var e;this.qt={},this.Wt=t.endpoint,this.Ee=t.networkWorker,this.Ay=t.compressionOutputType,this.Ty=t.useRetry,this.Ee.postMessage({type:"CreatePostRequest",endpoint:this.Wt,compressionOutputType:this.Ay,useRetry:this.Ty,mandatoryParameters:(e=t.mandatoryParameters)!==null&&e!==void 0?e:[]})}setQueryParams(t){this.Ee.postMessage({type:"SetQueryParams",endpoint:this.Wt,queryParams:t}),csArray.prototype.forEach.call(Object.keys(t),e=>{this.qt[e]=t[e]})}getQueryParams(){return this.qt}removeQueryParams(t){this.Ee.postMessage({type:"RemoveQueryParams",endpoint:this.Wt,queryParams:t}),t&&csArray.prototype.forEach.call(t,e=>{delete this.qt[e]})}send(t,e){this.Ee.postMessage({type:"Send",endpoint:this.Wt,payload:t,queryParams:e})}abort(){this.Ee.postMessage({type:"Abort",endpoint:this.Wt})}onLoad(t){this.Ee.registerOnLoadCallback(this.Wt,t)}onError(t){this.Ee.registerOnErrorCallback(this.Wt,t)}setRequestHeader(t,e){this.Ee.postMessage({type:"SetHeader",endpoint:this.Wt,headerName:t,headerValue:e})}onTimeout(t,e){this.Ee.registerOnTimeoutCallback(this.Wt,t),this.Ee.postMessage({type:"SetTimeout",endpoint:this.Wt,timeout:e})}}return s})(),ln=(()=>{let s;return function(n){n.UNCOMPRESSED="0",n.GZIP="2"}(s||(s={})),s})(),tc=(()=>{class s{constructor(t){this.onError=t}}return s})(),bd=(()=>{class s{constructor(t){var e;this.qt={},this.pc={},this.cd=i=>{for(let r of i){let{metadata:a,events:c}=r;this.send(c,a)}},this.Wt=t.endpoint,this.Hn=t.compressionOpts,this.Yt=t.recoveryStorage,this.mandatoryParameters=(e=t.mandatoryParameters)!==null&&e!==void 0?e:[],this.worker=!!t.worker,this.Yt&&this.Yt.recover(this.cd)}setQueryParams(t){Object.keys(t).forEach(e=>{this.qt[e]=t[e]})}removeQueryParams(t){t?t.forEach(e=>{delete this.qt[e]}):this.qt={}}send(t,e){let i=e||{...this.qt},r=!("ct"in i),a=typeof t!="string"&&!this.Ry(t);"ct"in i||(!this.Hn||!r?i.ct=ln.UNCOMPRESSED:i.ct=this.Hn.compressionType);let c=a?JSON.stringify(t):t,l=Object.keys(i).map(f=>`${encodeURIComponent(f)}=${encodeURIComponent(i[f])}`).join("&"),h=`${this.Wt}?${l}`;if(ai(this.mandatoryParameters,f=>i[f]==null)){ht.warn(`[${this.worker?"WORKER":"MAIN"}] All mandatory parameters are not present on ${h}`);return}this.Hn&&r&&typeof c=="string"?this.Hn.compressor(c,this.Hn.compressionOutputType,f=>this.ld(h,i,f)):this.ld(h,i,c)}onLoad(t){this.ji=t}onError(t){this.Bn=t}onTimeout(t,e){this.ai=t,this.Fn=e}abort(){this.ud&&this.ud()}setRequestHeader(t,e){this.pc[t]=e}getQueryParams(){return this.qt}Ry(t){return t&&t.byteLength!==void 0}ld(t,e,i){let r=new XMLHttpRequest,a=Object.keys(e).map(c=>`${encodeURIComponent(c)}=${encodeURIComponent(e[c])}`).join("&");r.open("POST",t),r.onload=()=>{if(this.Yt&&this.Yt.recover(this.cd),this.ji){let c={params:e,responseText:r.responseText,status:r.status};this.ji(c)}},r.onerror=()=>{this.Yt&&this.Yt.save({key:a,metadata:e,events:i}),this.Bn&&this.Bn({params:e})},this.Fn&&this.ai&&(r.timeout=this.Fn,r.ontimeout=()=>{this.ai()}),this.ud=()=>r.abort(),Object.keys(this.pc).forEach(c=>{r.setRequestHeader(c,this.pc[c])}),r.send(i)}}return s})(),ec=(()=>{class s{constructor(t){this.fc=t,this.Ee=new _d(this.fc)}create(t,e,i,r,a=[]){if(this.Ee.isSupported()&&e)return new wd({networkWorker:this.Ee,endpoint:t,compressionOutputType:i,useRetry:!!r,mandatoryParameters:a});{let c=i?{compressor:this.fc.compress,compressionOutputType:i,compressionType:this.fc.algorithm}:void 0;return new bd({endpoint:t,compressionOpts:c,recoveryStorage:r})}}}return s})(),Ad=(()=>{class s{constructor(t,e,i,r,a){this.R=t,this.w=e,this.qe=i,this._t=r,this.h=a}get(){return{exclusion:this.qe.getAppliedTrackingDraw(),visitor:this.R.getVisitor(),session:this.w.getSession(),cvars:this._t.getCustomVariablesSession()}}apply(t){t&&(t.exclusion?this.exclude():this.include(t))}exclude(){this.qe.exclude(this.h),this.R.removeVisitor(),this.w.removeSession(),this._t.removeCustomVariablesSession()}include(t){this.qe.removeExclusion(),this.R.setVisitor(t.visitor),t.session?this.w.setSession(t.session):this.w.removeSession(),t.cvars?this._t.setCustomVariableSession(t.cvars):this._t.removeCustomVariablesSession()}}return s})(),en=".",Tr="__DOT__",Td=/^(([a-z0-9\-])+(\.[0-9]+){6})(\.[0-1])?(\.\b(x|[0-9a-fA-F]{12})\b)?$/,sc="x";function ic(s){let[n,t,e,i,r,a,c,l,h]=Pd(s);return{id:n,creationTimestamp:Number(t),visitsCount:Number(e),hitTimestamp:Number(i),lastVisitTimestamp:Number(r),appliedTrackingDraw:Number(a),expires:Number(c),allowSubdomains:l===void 0?void 0:!!Number(l),identityPrint:h===void 0||h===sc?null:h}}function Rd(s){var n;return csArray.prototype.join.call(csArray.prototype.map.call(csArray.prototype.map.call([s.id,s.creationTimestamp,s.visitsCount,s.hitTimestamp,s.lastVisitTimestamp,s.appliedTrackingDraw,s.expires,s.allowSubdomains?1:0,(n=s.identityPrint)!==null&&n!==void 0?n:sc],csString),Cd),en)}function nc(s){return Td.test(s)}function Cd(s){return csString.prototype.replace.call(s,/\./g,Tr)}function Id(s){return csString.prototype.replace.call(s,new csRegExp(Tr,"g"),en)}function Pd(s){return csString.prototype.indexOf.call(s,Tr)!==-1?csArray.prototype.map.call(csString.prototype.split.call(s,en),Id):csString.prototype.split.call(s,en)}var Od=(()=>{let s;return function(n){n.ETR_OFF="0",n.ETR_ON="1"}(s||(s={})),s})();var Nd=(()=>{let s;return function(n){n.ETR_DISABLED="0",n.ETR_PENDING="1",n.ETR_SAVED_PAGE="2",n.ETR_SAVED_SESSION="3",n.ETR_NOT_SAVED_SESSION="9"}(s||(s={})),s})(),rc=/^(\d+\.[01356789TBWX](\.[01UNWG])?(\.[39])?)(\.\d+)?$/,oc=".";function Md(s){return csArray.prototype.join.call([s.pageNumber,s.collectState,s.etrState,s.etrStatus],oc)}function ac(s){let n=sr(s);return n!==null?cc(n):null}function cc(s){var n,t;let[e,i,r,a]=csString.prototype.split.call(s,oc);return{collectState:i,etrState:(n=r)!==null&&n!==void 0?n:Od.ETR_OFF,etrStatus:(t=a)!==null&&t!==void 0?t:Nd.ETR_NOT_SAVED_SESSION,pageNumber:parseInt(e,10)}}function Rr(s){return rc.test(s)}function sr(s){if(!s)return null;let n=(()=>{var t;return(t=csString.prototype.match.call(s,rc))===null||t===void 0?void 0:t[1]})();return n!=null?n:null}var lc=(()=>{let s;return function(n){function t(e){return{exclusion:Number(e._cs_ex)||0,visitor:e._cs_id?ic(e._cs_id):null,session:e._cs_s?ac(e._cs_s):null,cvars:e._cs_cvars?window.csJSON.parse(e._cs_cvars):null}}n.fromRaw=t}(s||(s={})),s})(),me="_cs_ex",Ro=2592e6,kd=/^[0-9]+$/,hc=(()=>{class s{constructor(t,e,i){this.h=t,this.M=e,this.Xt=i}onCookieToSet(t){this.ci=t}onCookieToRemove(t){this.li=t}get(){return this.h.cookielessTrackingEnabled?Number(this.Xt.getItem(me)):Number(this.M.get(me))}set(t){var e;this.h.cookielessTrackingEnabled?this.Xt.setItem(me,t):(this.M.set(me,t,Ro),(e=this.ci)===null||e===void 0||e.call(this,me,t,Ro))}remove(){var t;this.h.cookielessTrackingEnabled?this.Xt.removeItem(me):(this.M.delete(me),(t=this.li)===null||t===void 0||t.call(this,me))}static isValidExclusionString(t){return kd.test(t)}}return s})(),Ve="_cs_cvars",uc=(()=>{class s{constructor(t,e,i){this.h=t,this.M=e,this.Xt=i}onCookieToSet(t){this.ci=t}onCookieToRemove(t){this.li=t}get(){return this.h.cookielessTrackingEnabled?this.Xt.getItem(Ve):this.M.get(Ve)}set(t){var e;this.h.cookielessTrackingEnabled?this.Xt.setItem(Ve,t):(this.M.set(Ve,t),(e=this.ci)===null||e===void 0||e.call(this,Ve,t))}remove(){var t;this.h.cookielessTrackingEnabled?this.Xt.removeItem(Ve):(this.M.delete(Ve),(t=this.li)===null||t===void 0||t.call(this,Ve))}static isValidCustomVarString(t){return typeof t=="string"}}return s})(),ir=(()=>{let s;return function(n){function t(i){let r=["_cs_ex","_cs_id","_cs_s","_cs_cvars"];return csArray.prototype.every.call(Object.keys(i),a=>csArray.prototype.indexOf.call(r,a)>=0)}n.isRawDomainState=t;function e(i){return t(i)?(!i._cs_id||nc(i._cs_id))&&(!i._cs_s||Rr(i._cs_s))&&(!i._cs_ex||hc.isValidExclusionString(i._cs_ex))&&(!i._cs_cvars||uc.isValidCustomVarString(i._cs_cvars)):!1}n.isValid=e}(s||(s={})),s})(),Dd="1.0.0",Ld=(()=>{class s{constructor(t,e){this.Se=t,this.Rt=e}retrieve(t,e){this.S=e,this.retrievedStates=[],this.gc=csArray.prototype.map.call(csArray.prototype.filter.call(t,i=>this.Cy(i)),s.getXdframeOrigin),this.Se.onMessage(i=>{this.mc(i)}),this.Se.onTimeout(()=>{this.yc()}),this.Se.start(),csArray.prototype.forEach.call(csArray.prototype.map.call(this.gc,s.getXdframeUrl),i=>this.Se.open(i))}mc(t){if(this.Ec(t)){let e=t.data;if(ir.isValid(e))csArray.prototype.push.call(this.retrievedStates,e);else throw this.Se.stop(),`Invalid domain state: ${csJSON.stringify(t.data)} from ${t.origin}`}this.Iy()&&(this.Se.stop(),this.S(csArray.prototype.map.call(this.retrievedStates,lc.fromRaw)))}yc(){V.warn("xdframe: all messages not received")}Ec(t){return csArray.prototype.indexOf.call(this.gc,t.origin)>-1}Iy(){return this.retrievedStates.length===this.gc.length}Cy(t){return!$a(this.Rt.hostname,t)}static getXdframeOrigin(t){return`https://csxd.${t}`}static getXdframeUrl(t){return`${t}/xdframe-${Dd}.html`}}return s})(),xd=(()=>{class s{constructor(){this.Py=3e3,this.dd=t=>{this.handleMessage(t)}}onMessage(t){this.pd=t}onTimeout(t){this.ai=t}start(){window.addEventListener("message",this.dd),this.Ie=window.csSetTimeout(()=>{this.ai()},this.Py)}open(t){var e;let i=document.createElement("iframe");return i.src=t,i.setAttribute("hidden",""),i.setAttribute("title","Intentionally blank"),(e=document.body)===null||e===void 0||e.appendChild(i),i}stop(){window.removeEventListener("message",this.dd),window.csClearTimeout(this.Ie),this.pd=tn,this.ai=tn}handleMessage(t){this.pd(t)}}return j([I("XdframeMessage")],s.prototype,"handleMessage",null),s})(),Ud="spki",Co="RSA-OAEP",Vd="SHA-256",Io="AES-CTR",jd="SHA-1",Po=190,Qs=(()=>{let s;return function(n){var t;let e=!1,i=null,r,a=typeof TextEncoder!="undefined"?new TextEncoder:null,c;n.crypto=(t=At.crypto)===null||t===void 0?void 0:t.subtle,n.MAX_DIGEST_INPUT_SIZE=100;function l(){return!e}n.isKeyImported=l;function h(){return i}n.getCryptoKey=h;function f(){var b,L;return((L=(b=At.self.crypto)===null||b===void 0?void 0:b.subtle)===null||L===void 0?void 0:L.encrypt)!=null&&At.self.CryptoKey!=null}n.isSupported=f;async function d(b){r=n.crypto.importKey(Ud,Wa(b),{name:Co,hash:Vd},!1,["encrypt"]).catch(()=>(e=!0,null)),i=await r,r=void 0,i||ht.warn(`Fail to import public key '${b}'`)}n.importKey=d;async function y(b){if(!f()||e)return null;await r;let L=wr(b);L.byteLength>Po&&(L=L.slice(0,Po));try{let H=await n.crypto.encrypt({name:Co},i,L);return go(H)}catch{return null}}n.asymmetricEncrypt=y;async function E(b,L){if(!f()||e)return null;let H={counter:L.initializationVector,name:Io,length:64},W=a.encode(b);try{let nt=await n.crypto.encrypt(H,L.cryptoKey,W);return go(nt)}catch{return null}}n.symmetricEncrypt=E;async function v(b){let L=await C(b);if(!L)throw new Error("Export secret failed");let H=await y(L);if(!H)throw new Error("Encrypt secret failed");return H}n.encryptSecret=v;async function C(b){var L;if(!f())return null;try{return(L=(await n.crypto.exportKey("jwk",b)).k)!==null&&L!==void 0?L:null}catch{return null}}async function P(){if(!f()||e)return null;try{return{cryptoKey:await n.crypto.generateKey({name:Io,length:128},!0,["encrypt","decrypt"]),initializationVector:At.crypto.getRandomValues(new Uint8Array(16))}}catch{return null}}n.generateSymmetricKey=P;function A(b){c=b}n.setDigestSalt=A;async function w(b){b=csString.prototype.toLocaleLowerCase.call(csString.prototype.trim.call(b)),c&&(b=`${b}:${c}`);let L=a.encode(b);try{let H=await n.crypto.digest(jd,L);return er(H)}catch{return null}}n.digest=w;function x(){return At.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["encrypt","decrypt"])}n.generateKeyPair=x}(s||(s={})),s})();function Hd(){let s=new Error,n=s.stack?csArray.prototype.filter.call(csString.prototype.split.call(s.stack,`
`),e=>e!=="Error"&&csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(e),"promise ")===-1&&csString.prototype.indexOf.call(e,"[native code]")===-1&&csString.prototype.indexOf.call(e,"(<anonymous>)")===-1):[];if(n.length===0)return"";let t=Fd(n);return t===""||(n=$d(n,t),n.length===0)?"":dc(n[0])}function Bd(s){return csString.prototype.indexOf.call(s,"@")!==-1}function Fd(s){return s.length>0?dc(s[0]):""}function $d(s,n){return csArray.prototype.filter.call(s,t=>csString.prototype.indexOf.call(t,n)===-1)}function dc(s){let n="",t;Bd(s)?t=new csRegExp("@(.+):(\\d+):(\\d+)$"):t=new csRegExp("\\((.+):(\\d+):(\\d+)\\)");let e=t.exec(s);return e&&(n=e[1]),n}var zd=s=>s;function Gd(s,n,t,e){let i=csSymbol.for("propertyProxy");Object.defineProperty(s,n,{get(){var r;if(this[i])return this[i];let a=(r=t.get)===null||r===void 0?void 0:r.apply(this);return typeof a!="object"?a:(typeof Proxy=="function"?this[i]=new Proxy(a,{get(c,l){let h=Reflect.get(c,l);return typeof h=="function"?h.bind(c):h},set:(c,l,h)=>{let f=c[l],d=Reflect.set(c,l,h);return e.forEach(y=>y(this,h,f,"subproperty")),d}}):this[i]=a,this[i])},set(){var r;let a=arguments,c=this[n],l=(r=t.set)===null||r===void 0?void 0:r.apply(this,a);delete this[i];try{e.forEach(h=>h(this,a[0],c,"property"))}catch(h){ht.error(h)}return l}})}function qd(s,n,t){let e=Wd(s,n);if(!e)return null;let i=(r,a,c,l)=>t(r,a,c,l);return{activate:()=>{e.add(i)},deactivate:()=>{e.delete(i)}}}function Wd(s,n){let t=csSymbol.for(n);if(s[t])return s[t];let e=new Set,i=Object.getOwnPropertyDescriptor(s,n);return i?i.configurable?(s[t]=e,Gd(s,n,i,e),e):(ht.warn(`Cannot intercept non configurable property '${csString(n)}' of object '${s}'`),null):(ht.warn(`Cannot intercept property '${csString(n)}' because it does not exist directly on the target object '${s}'`),null)}function Yd(s,n){let t=csSymbol.for(n);if(s[t])return s[t];let e=Object.getOwnPropertyDescriptor(s,n);if(!(e!=null&&e.writable)&&!(e!=null&&e.set))return ht.warn(`Cannot intercept read only function '${csString(n)}' of object '${s}'`),null;let i=new Set;s[t]=i;let r=s[n];if(typeof r=="function"){let a=function(){let c=arguments,l=[];try{l=csArray.prototype.map.call(ps(i),f=>f(c))}catch(f){ht.error(f)}let h=r.apply(this,c);try{for(let f=0;f<l.length;f++)l[f]({result:h,context:this,args:c})}catch(f){ht.error(f)}return h};Kd(a,r),s[n]=a}return i}function Kt({target:s,methodName:n,hook:t,hookPrepareArgs:e=zd,options:i}){let r=Yd(s,n);if(!r)return null;let a=c=>{let l=e(c),h=i!=null&&i.withCallerName?{callerName:Hd()}:{};return f=>t({...f,...h,args:l})};return{activate:()=>{r.add(a)},deactivate:()=>{r.delete(a)}}}function Xd(s,n){let t=csSymbol.for(n);if(s[t])return s[t];let e=new Set,i=Object.getOwnPropertyDescriptor(s,n);return i?i.configurable?(s[t]=e,Object.defineProperty(s,n,{set(){var r;let a=arguments,c=this[n],l=(r=i.set)===null||r===void 0?void 0:r.apply(this,a);try{e.forEach(h=>h(this,a[0],c,"property"))}catch(h){ht.error(h)}return l}}),e):(ht.warn(`Cannot intercept read only property '${csString(n)}' of object '${s}'`),null):e}function sn(s,n,t){let e=Xd(s,n);if(!e)return null;let i=(r,a,c)=>t(r,a,c,"property");return{activate:()=>{e.add(i)},deactivate:()=>{e.delete(i)}}}function Kd(s,n){s.prototype=n.prototype,Object.defineProperty(s,"toString",{value:()=>n.toString()})}var Ls=(()=>{var s;class n{static Oy(e){this.Os.forEach(i=>{e(i,"initial")})}static $n(e){if(this.P||(this.P=new csMutationObserver(i=>{for(let r of i)r.target.isConnected&&q(r.addedNodes,this.Ny),q(r.removedNodes,this.My)})),csArray.prototype.push.call(this.ve,e),!this.B){this.B=!0,this.P.observe(document,this.zn);for(let i of hs.getAllShadowHosts(document)){let r=csElementshadowRoot.apply(i);this.Os.add(r),this.P.observe(r,this.zn)}this.Sc||(this.Sc=Kt({target:Element.prototype,methodName:"attachShadow",hook:i=>i.result.isConnected&&this.gd(i.result)})),this.Sc.activate()}this.Oy(e)}static Gn(e){var i,r;this.ve=csArray.prototype.filter.call(this.ve,a=>a!==e),this.ve.length===0&&(this.ve=[],this.B=!1,(i=this.P)===null||i===void 0||i.disconnect(),(r=this.Sc)===null||r===void 0||r.deactivate(),this.Os.clear())}constructor(e){this.S=e,this.S=Ae("DocumentShadowRootObserver:callback",(i,r)=>e(i,r))}get shadowRoots(){return ps(s.Os)}takeRecords(){var e,i;return(i=(e=s.P)===null||e===void 0?void 0:e.takeRecords())!==null&&i!==void 0?i:[]}observe(){hs.isSupported()&&s.$n(this.S)}disconnect(){hs.isSupported()&&s.Gn(this.S)}}return s=n,n.ve=[],n.Os=new Set,n.B=!1,n.zn={childList:!0,subtree:!0},n.gd=t=>{s.Os.has(t)||(s.P.observe(t,s.zn),s.Os.add(t),q(s.ve,e=>e(t,"added")))},n.Ny=t=>{Ft(t,NodeFilter.SHOW_DOCUMENT_FRAGMENT).visitAll(s.gd)},n.My=t=>{t.isConnected||Ft(t,NodeFilter.SHOW_DOCUMENT_FRAGMENT).visitAll(e=>{s.Os.has(e)&&(s.Os.delete(e),q(s.ve,i=>i(e,"removed")))})},tt([I()],n.prototype,"observe",null),tt([I()],n.prototype,"disconnect",null),n})(),pc=!0;function Pt(s,n=pc){s.boundElement.addEventListener(s.type,s.listener,n)}function Ot(s,n=pc){s.boundElement.removeEventListener(s.type,s.listener,n)}function jt(s,n=0){let t=Math.pow(10,n);return Math.round(s*t)/t}var Oo=!1;function bt(){return(s,n,t)=>{if(t){let e=t.value;t.value=function(i,r){(i==null?void 0:i.isTrusted)===!1&&Oo||e.call(this,i,r)}}else{let e=s[n];if(typeof e!="function")return;s[n]=function(i,...r){(i==null?void 0:i.isTrusted)===!1&&Oo||e.call(this,i,r)}}}}function hn(s,n){typeof n=="number"&&(n={wait:n});let t=n.wait,e=n.mode||"leading",i,r=[],a=null,c=0,l,h=()=>{c=O.now(),a=null,l=s.apply(i,r),r=[],i=null},f=function(...d){if(i=this!==null&&this!==void 0?this:window,r=[...d],e==="trailing")return a||(a=window.csSetTimeout(h,t)),l;let y=O.now(),E=t-(y-c);return E<=0||E>t?(c=y,l=s.apply(i,r),a?(window.csClearTimeout(a),a=null):r=[]):a||(a=window.csSetTimeout(h,E)),l};return f.cancel=()=>{a&&(window.csClearTimeout(a),c=0,a=null,r=[])},f.flushPending=()=>{a&&(window.csClearTimeout(a),h())},f}var xs=s=>(n,t,e)=>{e.value=hn(e.value,s)};function Jd(s){return s.nodeType===1}function St(s){let n=csEventtarget.apply(s);return n&&Jd(n)&&csElementshadowRoot.apply(n)&&s.composedPath?s.__csOriginalTarget||s.composedPath()[0]:n}function Qd(s){return s.composedPath&&Object.defineProperty(s,"__csOriginalTarget",{value:s.composedPath()[0],writable:!1,enumerable:!1}),s}function Zd(){return(s,n,t)=>{let e=t.value;return e&&(t.value=function(i){if(St(i)===csEventtarget.apply(i))return e.call(this,i)}),t}}function tp(s){if(!$(s))return null;let t=/iP(ad|hone|od).+Version\/(\d+)\..*Safari/i.exec(s);return t?Number(t[2]):null}var ep=!!window.chrome,No="data-cs-scroll-container";function sp(s){try{if(Nt(csEventtarget.apply(s)))return!0}catch{}return!1}var As=(()=>{let s;return function(n){function t(i){return!!(Nt(i)&&sp(i)&&pi(csEventtarget.apply(i))&&csEventtarget.apply(i).getAttribute(No)!==null)}n.isEventOnScrollContainer=t;function e(){return window.csquerySelector[document.nodeType].call(document,`[${No}]`)}n.getScrollContainer=e}(s||(s={})),s})();function ip(){let s=csSymbol.for("propStore");return{getStore(n){return n[s]},get(n,t){let e=n[s];return e==null?void 0:e[t]},set(n,t,e){let i=n[s];i||(i={},n[s]=i),i[t]=e}}}var $i=ip(),Y=(()=>{let s;return function(n){function t(l,h,f){var d;l instanceof Node?$i.set(l,h,f):((d=l.props)!==null&&d!==void 0||(l.props={}),l.props[h]=f)}n.setProperty=t;function e(l,h){var f;return l instanceof Node?$i.get(l,h):(f=l.props)===null||f===void 0?void 0:f[h]}n.getProperty=e;function i(l){return l instanceof Node?$i.getStore(l):l.props}n.getProperties=i;function r(l,h){let f=null;return a(l,(d,y,E)=>h(d)&&(f=d)&&!!E()),f}n.findDescendant=r;function a(l,h){c(l,void 0,h)}n.traverse=a;function c(l,h,f){let d=!1;if(f(l,h,()=>d=!0),d)return;let E=l.shadowRoot;E&&c(E,l,f);let v=l.children;if(v!=null&&v.length){for(let C of v)if(C&&(c(C,l,f),d))break}}}(s||(s={})),s})(),fc=1,Zs=csSymbol("nodeIdentifier");function np(s=!1){s&&(fc=1),Zs=csSymbol("nodeIdentifier")}function rp(s){return Y.getProperty(s,Zs)}function st(s){let n=Y.getProperty(s,Zs);return n!=null?n:(Y.setProperty(s,Zs,fc++),Y.getProperty(s,Zs))}var Mn;function ti(s){if(Mn||(Mn=document.createElement("div")),!(!!s&&$(s)))return ht.warn(`isValidSelector: invalid selector provided '${s}'`),!1;try{return Qt.call(Mn,s),!0}catch{return ht.warn(`isValidSelector: invalid selector provided '${s}'`),!1}}function nr(s,n){if(ho)return ho.call(s,n);let t=s;do{if(Qt.call(t,n))return t;t=t==null?void 0:t.parentElement}while(t!==null&&t.nodeType===1);return null}var k=(()=>{let s;return function(n){let t;(function(A){A[A.NotMasked=0]="NotMasked",A[A.Parent=1]="Parent",A[A.Child=2]="Child"})(t=n.MaskedElementState||(n.MaskedElementState={})),n.maskedProp="masked",n.maskedAttributeProp="maskedAttribute";function e(A){return Ye(A)&&"Attributes"in A&&"PIISelectors"in A?A.Attributes instanceof Array&&A.PIISelectors instanceof Array:!1}n.isSelectorUserInput=e;function i(A){if(!Ye(A)||A===null)throw new Error("Command misuse: setPIISelectors");return"Attributes"in A||(A.Attributes=[]),"PIISelectors"in A||(A.PIISelectors=[]),A}n.sanitizeSelectorUserInput=i;function r(A){var w;return(w=Y.getProperty(A,n.maskedProp))!==null&&w!==void 0?w:{state:t.NotMasked}}n.getMaskedElementDetails=r;function a(A){var w;return(w=Y.getProperty(A,n.maskedAttributeProp))!==null&&w!==void 0?w:{attributes:[]}}n.getMaskedAttributeDetails=a;function c(A){let w=Y.getProperty(A,n.maskedProp);return(w==null?void 0:w.state)===t.Parent}n.isMaskedElement=c;function l(A){let w=Y.getProperty(A,n.maskedProp);return(w==null?void 0:w.state)===t.Child}n.isMaskedElementChild=l;function h(A,w){let x=Y.getProperty(A,n.maskedAttributeProp);return((x==null?void 0:x.attributes)==null?void 0:csArray.prototype.indexOf.call(x==null?void 0:x.attributes,w))>-1}n.isMaskedAttribute=h;function f(A,w){Y.setProperty(A,n.maskedProp,w)}n.setMaskedElementProperty=f;function d(A){Y.setProperty(A,n.maskedProp,void 0)}n.unsetMaskedElementProperty=d;function y(A,w){Y.setProperty(A,n.maskedAttributeProp,w)}n.setMaskedAttributeProperty=y;function E(A,w){let x=csArray.prototype.filter.call(A.PIISelectors,H=>ti(H));w.elementSelector.length>0&&csArray.prototype.push.call(x,...csString.prototype.split.call(w.elementSelector,","));let b=P([...x]),L={elementSelector:csArray.prototype.join.call(b,","),attrSelector:w.attrSelector,attrSelectors:w.attrSelectors};return csArray.prototype.forEach.call(A.Attributes,H=>{H!=null&&H.attrName&&(H!=null&&H.selector)&&ti(H.selector)&&!v(L.attrSelectors,H)&&csArray.prototype.push.call(L.attrSelectors,H)}),L.attrSelector=C(L.attrSelectors),L}n.getComputedSelectorSettings=E;function v(A,w){return csArray.prototype.some.call(A,x=>x.selector===w.selector&&x.attrName===w.attrName)}function C(A){let w="";return csArray.prototype.forEach.call(A,x=>{let b=csString.prototype.split.call(x.selector,",");csArray.prototype.forEach.call(b,L=>{ti(L)&&(w&&(w+=","),w+=L)})}),w}function P(A){if(A.length<=1)return A;let w=[];for(let x of A){let b=csString.prototype.split.call(x,",");for(let L of b)csArray.prototype.indexOf.call(w,L)===-1&&csArray.prototype.push.call(w,L)}return w}}(s||(s={})),s})(),D=(()=>{let s;return function(n){n[n.MUTATION_INSERT=1]="MUTATION_INSERT",n[n.MUTATION_REMOVE=2]="MUTATION_REMOVE",n[n.MUTATION_ATTRIBUTE=3]="MUTATION_ATTRIBUTE",n[n.MUTATION_CHARACTER_DATA=4]="MUTATION_CHARACTER_DATA",n[n.INITIAL_DOM=5]="INITIAL_DOM",n[n.SCROLL=6]="SCROLL",n[n.CLICK=8]="CLICK",n[n.RESIZE=9]="RESIZE",n[n.INPUT_CHECKABLE=10]="INPUT_CHECKABLE",n[n.INPUT_SELECT=11]="INPUT_SELECT",n[n.INPUT_TEXT=12]="INPUT_TEXT",n[n.HASH_CHANGE=13]="HASH_CHANGE",n[n.UNANONYMIZED_CONSENT_GRANTED=14]="UNANONYMIZED_CONSENT_GRANTED",n[n.UNANONYMIZED_CONSENT_WITHDRAWN=15]="UNANONYMIZED_CONSENT_WITHDRAWN",n[n.MOUSE_OVER=16]="MOUSE_OVER",n[n.VISIBILITY_CHANGE=17]="VISIBILITY_CHANGE",n[n.STYLESHEET_RULE_INSERT=18]="STYLESHEET_RULE_INSERT",n[n.STATIC_RESOURCE_URL=19]="STATIC_RESOURCE_URL",n[n.PERFORMANCE_TIMINGS=20]="PERFORMANCE_TIMINGS",n[n.ATTACH_SHADOW=22]="ATTACH_SHADOW",n[n.STYLESHEET_CSS_TEXT_UPDATE=23]="STYLESHEET_CSS_TEXT_UPDATE",n[n.JAVASCRIPT_ERROR=26]="JAVASCRIPT_ERROR",n[n.PAGE_EVENT=27]="PAGE_EVENT",n[n.API_ERROR=28]="API_ERROR",n[n.TEXT_VISIBILITY=29]="TEXT_VISIBILITY",n[n.MUTATION_ENCRYPTED_CHARACTER_DATA=30]="MUTATION_ENCRYPTED_CHARACTER_DATA",n[n.INPUT_ENCRYPTED_TEXT=31]="INPUT_ENCRYPTED_TEXT",n[n.KEY_DOWN=32]="KEY_DOWN",n[n.KEY_UP=33]="KEY_UP",n[n.CLIPBOARD_COMMAND=34]="CLIPBOARD_COMMAND",n[n.STYLESHEET_RULE_DELETE=37]="STYLESHEET_RULE_DELETE",n[n.USER_IDENTIFIER=38]="USER_IDENTIFIER",n[n.TOUCH_START=41]="TOUCH_START",n[n.TOUCH_MOVE=42]="TOUCH_MOVE",n[n.TOUCH_END=43]="TOUCH_END",n[n.GESTURE_RECOGNITION=44]="GESTURE_RECOGNITION",n[n.POINTER_DOWN=47]="POINTER_DOWN",n[n.POINTER_MOVE=48]="POINTER_MOVE",n[n.POINTER_UP=49]="POINTER_UP",n[n.CUSTOM_ERROR=50]="CUSTOM_ERROR",n[n.CUSTOM_ELEMENT_REGISTRATION=54]="CUSTOM_ELEMENT_REGISTRATION",n[n.REGISTER_ADOPTED_STYLE_SHEET=60]="REGISTER_ADOPTED_STYLE_SHEET",n[n.SET_ADOPTED_STYLE_SHEETS=61]="SET_ADOPTED_STYLE_SHEETS",n[n.ADOPTED_STYLESHEET_RULE_INSERT=62]="ADOPTED_STYLESHEET_RULE_INSERT",n[n.ADOPTED_STYLESHEET_RULE_DELETE=63]="ADOPTED_STYLESHEET_RULE_DELETE",n[n.SCREEN_RESIZE=65]="SCREEN_RESIZE",n[n.RESOURCE_HASHES=66]="RESOURCE_HASHES",n[n.PERFORMANCE_NAVIGATION_TIMING=67]="PERFORMANCE_NAVIGATION_TIMING",n[n.PERFORMANCE_RESOURCE_TIMING=68]="PERFORMANCE_RESOURCE_TIMING",n[n.RECORDING_INFO_EVENT=72]="RECORDING_INFO_EVENT",n[n.TEXT_REF=73]="TEXT_REF",n[n.TOUCH_CANCEL=74]="TOUCH_CANCEL",n[n.MUTATION_MOVE=75]="MUTATION_MOVE",n[n.STYLESHEET_RULE_UPDATE=76]="STYLESHEET_RULE_UPDATE",n[n.ADOPTED_STYLESHEET_RULE_UPDATE=77]="ADOPTED_STYLESHEET_RULE_UPDATE",n[n.VIDEO_PLAY=78]="VIDEO_PLAY",n[n.VIDEO_PAUSE=79]="VIDEO_PAUSE",n[n.VIDEO_SEEK=80]="VIDEO_SEEK",n[n.ADOPTED_STYLESHEET_DISABLED=98]="ADOPTED_STYLESHEET_DISABLED",n[n.STYLESHEET_DISABLED=99]="STYLESHEET_DISABLED",n[n.DEBUG=999]="DEBUG"}(s||(s={})),s})();var Ws=(()=>{let s;return function(n){n[n.SWIPE=0]="SWIPE",n[n.PINCH_IN=1]="PINCH_IN",n[n.PINCH_OUT=2]="PINCH_OUT",n[n.LONG_PRESS=3]="LONG_PRESS",n[n.TAP=4]="TAP",n[n.DOUBLE_TAP=5]="DOUBLE_TAP"}(s||(s={})),s})(),Ts=(()=>{let s;return function(n){n[n.COPY=0]="COPY",n[n.CUT=1]="CUT",n[n.PASTE=2]="PASTE"}(s||(s={})),s})(),G=(()=>{let s;return function(n){n[n.SPACE=0]="SPACE",n[n.ENTER=1]="ENTER",n[n.BACKSPACE=2]="BACKSPACE",n[n.DELETE=3]="DELETE",n[n.ARROWUP=4]="ARROWUP",n[n.ARROWDOWN=5]="ARROWDOWN",n[n.ARROWLEFT=6]="ARROWLEFT",n[n.ARROWRIGHT=7]="ARROWRIGHT",n[n.CAPSLOCK=8]="CAPSLOCK",n[n.SHIFT=9]="SHIFT",n[n.TAB=10]="TAB",n[n.ALPHANUMERICAL=11]="ALPHANUMERICAL",n[n.ESCAPE=12]="ESCAPE",n[n.END=13]="END",n[n.ALT=14]="ALT",n[n.CTRL=15]="CTRL",n[n.META=16]="META"}(s||(s={})),s})(),op=33,ap=(()=>{class s{constructor(){this.eventType="user",this.vc=[],this.ky=[{type:"pointerup",listener:e=>this.pointerUpListener(e),boundElement:document},{type:"pointermove",listener:e=>this.pointerMoveListener(e),boundElement:document},{type:"pointerdown",listener:e=>this.pointerDownListener(e),boundElement:document}],this.Dy=[{type:"touchstart",listener:e=>this.touchStartListener(e),boundElement:document},{type:"touchmove",listener:e=>this.touchMoveListener(e),boundElement:document},{type:"touchend",listener:e=>this.touchEndCancelListener(e),boundElement:document},{type:"touchcancel",listener:e=>this.touchEndCancelListener(e),boundElement:document}],this.yo=[{type:"click",listener:e=>this.clickListener(e),boundElement:document},{type:"keyup",listener:e=>this.keyUpListener(e),boundElement:document},{type:"keydown",listener:e=>this.keyDownListener(e),boundElement:document},{type:"copy",listener:e=>this.copyListener(e),boundElement:document},{type:"cut",listener:e=>this.cutListener(e),boundElement:document},{type:"paste",listener:e=>this.pasteListener(e),boundElement:document},{type:"scroll",listener:e=>this.scrollListener(csEventtarget.apply(e)),boundElement:document},{type:"mouseover",listener:e=>this.mouseOverListener(e),boundElement:document}],this._c=[{type:"scroll",listener:e=>this.scrollListener(csEventtarget.apply(e))}];let t=tp(window.navigator.userAgent);(t===null||t&&t>=16)&&csArray.prototype.push.call(this._c,{type:"mouseover",listener:e=>this.mouseOverListener(e)}),this.ne=new Ls((e,i)=>{switch(i){case"initial":case"added":this.hi(e);break;case"removed":this.pi(e);break}})}init(){this.Ly(),this.xy(),this.wc()}onEvent(t){csArray.prototype.push.call(this.vc,t)}Kt(t,e=!1){csArray.prototype.forEach.call(this.vc,i=>i(t,e))}start(){this.bc(),this.hi(document),this.ne.observe()}stop(){this.pi(document),this.ne.disconnect(),this.vc=[]}xy(){this.Uy()&&csArray.prototype.push.call(this.yo,...this.ky)}Ly(){this.Vy()&&csArray.prototype.push.call(this.yo,...this.Dy)}hi(t){Ki(t)?csArray.prototype.forEach.call(this.yo,e=>Pt(e)):csArray.prototype.forEach.call(this._c,e=>{let i={type:e.type,listener:e.listener,boundElement:t};Pt(i)})}pi(t){Ki(t)?csArray.prototype.forEach.call(this.yo,e=>Ot(e)):csArray.prototype.forEach.call(this._c,e=>{let i={type:e.type,listener:e.listener,boundElement:t};Ot(i)})}Uy(){return"PointerEvent"in window&&typeof window.PointerEvent=="function"}Vy(){return"TouchEvent"in window&&typeof window.TouchEvent=="function"}bc(){this.jy()}jy(){let t=As.getScrollContainer()||document,e=st(t),i=this.md(t);if(i.top!==0||i.left!==0){let r={type:D.SCROLL,args:[e,i.left,i.top],date:O.now()};this.Kt(r,!0)}}md(t){return t===document?{top:window.pageYOffset,left:window.pageXOffset}:{top:t.scrollTop,left:t.scrollLeft}}scrollListener(t){if(k.isMaskedElement(t)||k.isMaskedElementChild(t))return;let e=st(t),i=this.md(t),r={type:D.SCROLL,args:[e,i.left,i.top],date:O.now()};this.Kt(r)}mouseOverListener(t){if(k.isMaskedElementChild(t.target))return;let e=st(t.target),i={type:D.MOUSE_OVER,args:[e],date:O.now()};this.Kt(i)}clickListener(t){let e=St(t);if(k.isMaskedElementChild(e))return;let i=st(e),r={type:D.CLICK,args:[i],date:O.now()};this.Kt(r)}keyUpListener(t){let e=St(t);if(k.isMaskedElementChild(e))return;let i=st(e),r=this.D[t.key];if(r===void 0)return;let a={type:D.KEY_UP,args:[i,r],date:O.now()};this.Kt(a)}keyDownListener(t){let e=St(t);if(k.isMaskedElementChild(e))return;let i=st(e),r=this.D[t.key];if(r===void 0)return;let a={type:D.KEY_DOWN,args:[i,r],date:O.now()};this.Kt(a)}copyListener(t){let e=St(t);if(k.isMaskedElementChild(e))return;let i=st(e),r={type:D.CLIPBOARD_COMMAND,args:[i,Ts.COPY],date:O.now()};this.Kt(r)}cutListener(t){let e=St(t);if(k.isMaskedElementChild(e))return;let i=st(e),r={type:D.CLIPBOARD_COMMAND,args:[i,Ts.CUT],date:O.now()};this.Kt(r)}pasteListener(t){let e=St(t);if(k.isMaskedElementChild(e))return;let i=st(e),r={type:D.CLIPBOARD_COMMAND,args:[i,Ts.PASTE],date:O.now()};this.Kt(r)}pointerUpListener(t){let e=St(t);if(k.isMaskedElementChild(e))return;let i=st(e),r={type:D.POINTER_UP,args:[t.pointerId,t.pointerType,jt(t.clientX,1),jt(t.clientY,1),i,t.button],date:O.now()};this.Kt(r)}pointerMoveListener(t){let e={type:D.POINTER_MOVE,args:[t.pointerId,t.pointerType,jt(t.clientX,1),jt(t.clientY,1)],date:O.now()};this.Kt(e)}pointerDownListener(t){let e=St(t);if(k.isMaskedElementChild(e))return;let i=st(e),r={type:D.POINTER_DOWN,args:[t.pointerId,t.pointerType,jt(t.clientX,1),jt(t.clientY,1),i,t.button,{pageX:jt(t.pageX,1),pageY:jt(t.pageY,1)}],date:O.now()};this.Kt(r)}touchStartListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let r=e[i],a={type:D.TOUCH_START,args:[r.identifier,jt(r.clientX,1),jt(r.clientY,1)],date:O.now()};this.Kt(a)}}touchMoveListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let r=e[i],a={type:D.TOUCH_MOVE,args:[r.identifier,jt(r.clientX,1),jt(r.clientY,1)],date:O.now()};this.Kt(a)}}touchEndCancelListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let r=e[i],a={type:t.type==="touchend"?D.TOUCH_END:D.TOUCH_CANCEL,args:[r.identifier,jt(r.clientX,1),jt(r.clientY,1)],date:O.now()};this.Kt(a)}}wc(){this.D={},this.D[" "]=G.SPACE,this.D.Spacebar=G.SPACE,this.D.Backspace=G.BACKSPACE,this.D.Enter=G.ENTER,this.D.Delete=G.DELETE,this.D.ArrowUp=G.ARROWUP,this.D.ArrowDown=G.ARROWDOWN,this.D.ArrowLeft=G.ARROWLEFT,this.D.ArrowRight=G.ARROWRIGHT,this.D.Up=G.ARROWUP,this.D.Down=G.ARROWDOWN,this.D.Left=G.ARROWLEFT,this.D.Right=G.ARROWRIGHT,this.D.CapsLock=G.CAPSLOCK,this.D.Shift=G.SHIFT,this.D.Tab=G.TAB,this.D.Escape=G.ESCAPE,this.D.Esc=G.ESCAPE,this.D.End=G.END,this.D.Alt=G.ALT,this.D.Control=G.CTRL,this.D.Meta=G.META}}return j([Rt("RecordingPageEvents.start")],s.prototype,"start",null),j([I("scroll")],s.prototype,"scrollListener",null),j([I("mouseOver"),bt(),Zd()],s.prototype,"mouseOverListener",null),j([I("click"),bt()],s.prototype,"clickListener",null),j([I("Event handler type: keyup")],s.prototype,"keyUpListener",null),j([I("Event handler type: keydown")],s.prototype,"keyDownListener",null),j([I("Event handler type: copy")],s.prototype,"copyListener",null),j([I("Event handler type: cut")],s.prototype,"cutListener",null),j([I("Event handler type: paste")],s.prototype,"pasteListener",null),j([I("Event handler type: pointerup"),bt()],s.prototype,"pointerUpListener",null),j([I("Event handler type: pointermove"),bt(),xs({wait:op})],s.prototype,"pointerMoveListener",null),j([I("Event handler type: pointerdown"),bt()],s.prototype,"pointerDownListener",null),j([I("Event handler type: touchstart"),bt()],s.prototype,"touchStartListener",null),j([I("Event handler type: touchmove"),bt()],s.prototype,"touchMoveListener",null),j([I("Event handler type: touchend-cancel"),bt()],s.prototype,"touchEndCancelListener",null),s})(),cp=2,Cr=(()=>{class s{constructor(t){this.Hy=t,this.Eo=0}addString(t){this.Eo+=t.length*cp}addArrayBuffer(t){this.Eo+=t.byteLength}isThresholdReached(){return this.Eo>this.Hy}reset(){this.Eo=0}}return s})(),lp=2*1e3*1024,hp=200,up=(()=>{class s{constructor(t=[],e=lp){this.Nt=t,this.Ac=new Cr(e)}addEvent(t){this.Ac.addString(Os(t)),csArray.prototype.push.call(this.Nt,t)}addEventByTimestamp(t){let e=0;for(;e<this.Nt.length&&!(this.Nt[e].date>=t.date);e+=1);csArray.prototype.splice.call(this.Nt,e,0,t)}eventsCount(){return this.Nt.length}clearEvents(){this.Ac.reset(),this.Nt=[]}isFull(){return this.eventsCount()>=hp}isThresholdReached(){return this.Ac.isThresholdReached()}getEvents(){return this.Nt}extractEvents(...t){let e=[],i=[];return csArray.prototype.forEach.call(this.Nt,r=>{csArray.prototype.indexOf.call(t,r.type)!==-1?csArray.prototype.push.call(e,r):csArray.prototype.push.call(i,r)}),this.Nt=i,e}stringifyEvents(){return Os(this.Nt)}dC(t){t.type===D.INITIAL_DOM&&(window.CSDomSerialized=window.CSDomSerialized?window.CSDomSerialized+1:1)}}return j([Rt("RecordingBatch.addEvent")],s.prototype,"addEvent",null),s})(),dp=(()=>{class s{constructor(){this.So=1}getCurrentIndex(){return this.So}increment(){this.So+=1}reset(){this.So=1}getRequestParameters(){return{ri:`${this.So}`}}}return s})(),gc=(()=>{class s{emit(t,e,i,r=document){let c=`${i!==void 0?`${i}`:`${s.By}`}${t}`,l=s.createEvent(c,{detail:e});l!==null&&r.dispatchEvent(l)}static createEvent(t,e={}){if(typeof CustomEvent=="function")return new CustomEvent(t,e);let i=this.Fy();if(i===null)return null;let{bubbles:r=!1,cancelable:a=!1,detail:c}=e;return i.initCustomEvent(t,r,a,c),i}static Fy(){try{return document.createEvent("CustomEvent")}catch{return null}}}return s.By="cs.tracking.",s})(),Mt=(()=>{class s{constructor(){this._isStarted=!1}get isStarted(){return this._isStarted}start(...t){this._isStarted||(this._isStarted=!0,this.onStart(...t))}stop(){this._isStarted&&(this._isStarted=!1,this.onStop())}restart(){this.stop(),this.start()}}return s})(),zi="null",ze=null,mc=[],pp=()=>{var s;return di||!!(!((s=document.body)===null||s===void 0)&&s.getAttribute("data-cs-tag-extension"))};!di&&pp()&&(window._uxa?_uxa.push(["debugEvents",!0]):window._uxa=[["debugEvents",!0]],ze=new BroadcastChannel("cs-tag"),document.addEventListener("cs.tracking.recordingEvent",s=>{rr({type:"UXA_EVENT",event:s.detail})}),ze.addEventListener("message",s=>{if(s.data.type==="CONNECT"){if(s.data.sessionId===zi)return;zi=s.data.sessionId,csArray.prototype.forEach.call(mc,n=>n()),ze==null||ze.postMessage({type:"CONNECTED",sessionId:zi})}}));function fp(s){di||(zi!==null&&csSetTimeout(s),csSetTimeout(()=>csArray.prototype.push.call(mc,s)))}function rr(s){ze==null||ze.postMessage(s)}var un=(()=>{class s{constructor(t,e=""){this.name=t,this.format=e}}return s})(),os=(()=>{class s extends un{constructor(t){super(t,"Value: {count}"),this.count=0}increase(t=1){this.count+=t}decrease(){this.count>0&&this.count--}clear(){this.count=0}getData(){return{count:this.count}}}return s})();var Mo=(()=>{class s extends un{constructor(t){super(t,"Living intances: {instances}<br/>Added: {added}<br/>Removed: {removed}"),this.added=0,this.removed=0}get value(){return this.added-this.removed}increase(){this.added++}decrease(){this.removed++}getData(){return{added:this.added,removed:this.removed,instances:this.added-this.removed}}}return s})(),kn=(()=>{class s extends un{constructor(t){super(t,"Count: {count}<br/>Average: {average}ms<br/>Total: {total}ms"),this.total=0,this.count=0}get average(){return this.count?this.total/this.count:0}measure(t){let e=O.elapsed();t(),this.count++,this.total+=O.elapsed()-e}asyncMeasure(){let t=O.elapsed();return()=>{this.count++,this.total+=O.elapsed()-t}}getData(){return{total:this.total,count:this.count,average:this.average}}}return s})(),Tt={general:{category:"General",nbEvents:new os("Nb of Events"),pendingTasks:new os("Pending Tasks"),pendingEvents:new os("Pending Tasks"),nbOfMutationObservers:new Mo("Nb of Mutation Observers")},mutations:{category:"Mutations",initialDOM:new kn("Initial DOM"),pendingMutations:new os("Nb of Mutations scheduled"),serializedMutations:new kn("Serialized Mutations"),count:new os("Mutation Count"),elementMutationObserved:new Mo("Nb of Elements Observed by MutationObserver"),unobserveGarbageCollection:new kn("Unobserve GC")},visibilityObserver:{category:"Visibility Observer",hiddenElements:new os("Nb of Hidden Elements "),nbElements:new os("Nb of  Elements")}},ko=null;fp(()=>{let s=i=>Object.keys(i),n=csArray.prototype.map.call(s(Tt),i=>Tt[i]),t=csArray.prototype.map.call(n,i=>csArray.prototype.filter.call(csArray.prototype.map.call(s(i),r=>i[r]),r=>r instanceof un));rr({type:"UXA_PERFORMANCE_COUNTER_SCHEMA",event:csArray.prototype.map.call(n,(i,r)=>({category:i.category,performanceCounters:csArray.prototype.map.call(t[r],a=>({name:a.name,format:a.format}))}))}),!ko&&(ko=csSetInterval(()=>{let i=Fa(_e(t,r=>_e(r,a=>a.getData())),r=>r);rr({type:"UXA_PERFORMANCE_COUNTER",event:i})},1e3))});var N=(()=>{let s;return function(n){n.QUOTA_REACHED="X",n.RECORDING_RULES_TARGETING="8",n.ANALYTICS_ONLY_RULES_TARGETING="9",n.ANALYTICS_ONLY="0",n.RECORDING_GLOBAL_SAMPLING="5",n.RECORDING_TEMPORARILY="T",n.RECORDING_URL_SAMPLING="6",n.RECORDING_ETR_SAMPLING="7",n.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED="B",n.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN="W"}(s||(s={})),s})(),Lt=(()=>{let s;return function(n){n.ETR_OFF="0",n.ETR_ON="1"}(s||(s={})),s})(),We=(()=>{let s;return function(n){n.ETR_LEGACY="0",n.ETR_SESSION="1",n.ETR_PAGE="2"}(s||(s={})),s})(),kt=(()=>{let s;return function(n){n.ETR_DISABLED="0",n.ETR_PENDING="1",n.ETR_SAVED_PAGE="2",n.ETR_SAVED_SESSION="3",n.ETR_NOT_SAVED_SESSION="9"}(s||(s={})),s})();function Zt(s,n,t,e){var i=arguments.length,r=i<3?n:e===null?e=Object.getOwnPropertyDescriptor(n,t):e,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,n,t,e);else for(var c=s.length-1;c>=0;c--)(a=s[c])&&(r=(i<3?a(r):i>3?a(n,t,r):a(n,t))||r);return i>3&&r&&Object.defineProperty(n,t,r),r}function zt(s){return fe(s,"data:")}function gp(s){return fe(s,"#")}function mp(s){return!!s&&(Ei(s,".css")||fe(s,"https://fonts.googleapis.com/css"))}var Do=/\bhttps?:\/\/[^\s<>"')\]]*[^\s<>"'),.;:\])]/gi;function yp(s){Do.lastIndex=0;let n,t=0,e=[];for(;(n=Do.exec(s))!==null;){let i=n.index,r=n.index+n[0].length;if(i>t){let c=csString.prototype.slice.call(s,t,i);csArray.prototype.push.call(e,{content:c,isUrl:!1})}let a=csString.prototype.slice.call(s,i,r);csArray.prototype.push.call(e,{content:a,isUrl:!0}),t=r}if(t<s.length){let i=csString.prototype.slice.call(s,t);csArray.prototype.push.call(e,{content:i,isUrl:!1})}return e}function Ir(s){let n=csString.prototype.trim.call(s);if(s==="")return[];let[t,e]=Ep(n);return e?(Ei(t,",")||(e=Sp(e)),[Lo(t),...Ir(e)]):[Lo(t)]}function Ep(s){return csString.prototype.split.call(s,/\s(.+)/)}function Lo(s){return csString.prototype.split.call(s,/,$/)[0]}function Sp(s){return csString.prototype.split.call(s,/,(.+)/)[1]||""}var vp=/(@import\s*("([^"]+)"|'([^']+)'))|(url\s*\(\s*((("([^"\]]+)"|'([^'\]]+)')\s*)|([^)\]]+))\))/g;function _p(s,n){return csString.prototype.replace.call(s,vp,(...e)=>{let i=e[3]||e[4],r=e[9]||e[10]||e[11],a=bp((i||r).trim()),c=i?"@import ":"",l=n(a)||a;return`${c}url(${wp(l)})`})}function wp(s){return csString.prototype.indexOf.call(s,'"')===-1?`"${s}"`:csString.prototype.indexOf.call(s,"'")===-1?`'${s}'`:s}function ei(s){let n=new Set;return _p(s,t=>{var e,i;return n.add((i=(e=csString.prototype.match.call(t,/^["|'](.*)?["|']$/))===null||e===void 0?void 0:e[1])!==null&&i!==void 0?i:t),t}),ps(n)}function bp(s){let n=/(\\)*\\(?:([a-fA-F0-9]{1,6})|(.))[\n\t\x20]?/g;return csString.prototype.replace.call(s,n,(t,e,i,r)=>{if(e==="\\")return csString.prototype.slice.call(t,1);if(r)return r;let a=parseInt(i,16);return 55296<=a&&a<=57343||a===0||a>1114111?"\uFFFD":csString.fromCodePoint(a)})}var xo=new Map,Dn=!di&&document.implementation.createHTMLDocument("");function yc(s){var n,t;return(t=(n=s.sheet)===null||n===void 0?void 0:n.href)!==null&&t!==void 0?t:s.getAttribute("href")}function Ap(s){if(!fi(s))return null;let n=Ec(s);if(n===null||n.length===0)return null;let t="";if(Oa(s.textContent))q(n,e=>t+=e.cssText);else{let e=Tp(s);if(e===n.length||e>n.length)return null;let i=new csArray(n.length-e);for(let r=e,a=0;r<n.length;r+=1,a+=1)i[a]=n[r];q(i,r=>t+=r.cssText)}return t}function Tp(s){if(!Dn)return 0;let n=xo.get(s.textContent);if(n)return n;let t=s.cloneNode(!0);t.textContent=s.textContent,Dn.head.appendChild(t);let e=Ec(t);return n=e?e.length:0,xo.set(s.textContent,n),Dn.head.removeChild(t),n}function Ec(s){try{if(s.disabled)return null;let n=s.sheet;return n?n.cssRules||n.rules:null}catch(n){if(n.name!=="SecurityError"&&n.name!=="InvalidAccessError")throw n;return null}}var Xs=s=>s instanceof HTMLFormElement?"form":s.localName;var fs=(()=>{class s{constructor(t){this.csId=st(t),this.props=$i.getStore(t)}}return s})(),Sc=(()=>{class s extends fs{constructor(t){super(t),this.nodeType=3,this.data=t.data}}return s})(),Rs=(()=>{class s extends fs{constructor(t){var e,i,r;super(t),this.attributes=[],this.nodeType=1,this.localName=Xs(t),this.namespaceURI=(e=t.namespaceURI)!==null&&e!==void 0?e:void 0,this.children=[];let a=Ap(t);if(a){this.children=new csArray(csNodechildNodes.apply(t).length);let c=document.createTextNode(a),l=new Sc(c);csArray.prototype.push.call(this.children,l)}ks(t)&&Y.setProperty(this,"SVG",!0),(fi(t)||gr(t))&&(this.disabledSheet=(r=(i=t.sheet)===null||i===void 0?void 0:i.disabled)!==null&&r!==void 0?r:!1)}static isElement(t){return t.nodeType===1}static getAttribute(t,e){return ve(t.attributes,i=>i.name===e)}static getAttributeValue(t,e){var i;return(i=this.getAttribute(t,e))===null||i===void 0?void 0:i.value}}return s})(),Pr=(()=>{class s{constructor(t){this.type="asyncEvent",this.Tc=!1,t&&t(e=>this.resolve(e))}resolve(t){if(this.Tc)throw new Error("AsyncEvent already resolve.");t.timestamp==null&&(t={...t,timestamp:this.timestamp}),this.Ns=t,this.Tc=!0,this.S&&this.S(this.Ns)}complete(t){this.Tc&&t(this.Ns),this.S=t}wait(){return new Promise(t=>this.complete(t))}}return s})();function Rp(s,n){let t=!1,e=function(){if(!t)return s.apply(n,arguments)};return e.cancel=()=>t=!0,e}var or=csQueueMicrotask||csSetTimeout,ki=new Ds,Ys=new Ds,Uo=1;function xt(s,n="high"){let t=Uo;ki.isEmpty&&Ys.isEmpty&&vc(()=>{if(Uo!==t)return;let r=ds(()=>{for(;!Ys.isEmpty;)Ys.pop()();for(;!ki.isEmpty;)ki.pop()();Ys.isEmpty||r()},"groupMicrotask.run");r()});let e=s.name||s.toString(),i=Ae(`groupMicrotask:${n}:${e}`,s);n==="high"?Ys.push(i):ki.push(i)}function vc(s,n=10){or(n===0?s:()=>vc(s,n-1))}async function _c(s=1){for(let n=0;n<s;n++)await new Promise(t=>xt(t))}var Si=(()=>{class s{constructor(){this.set=new Set}add(t){this.set.add(t),this.set.size===1&&csSetTimeout(()=>{this.set.clear()})}has(t){return this.set.has(t)}del(t){this.set.delete(t)}clear(){this.set.clear()}values(){return ps(this.set)}get count(){return this.set.size}}return s})(),Cp=(()=>{class s extends Si{constructor(t="high"){super(),this.$y=t}add(t){this.set.add(t),this.set.size===1&&xt(()=>{this.set.clear()},this.$y)}}return s})();function dn(s,n=!1){let t=new Si;return{push(e){t.count===0&&(n?xt:csSetTimeout)(()=>{s(t.values()),t.clear()}),t.add(e)}}}var Ee=csSymbol(),Or=(()=>{class s{constructor(t){var e,i,r,a,c,l,h,f,d,y,E,v,C;this.S=t,this.Rc=null,this.Cc=null,this.Ic=null,this.Pc=null,this.Oc=null,this.zy=dn(P=>this.processUpdateRulesInATick(P)),this.Nc=null,this.Mc=null,this.kc=null,this.S=P=>xt(()=>t(P)),typeof((i=(e=window.CSSStyleSheet)===null||e===void 0?void 0:e.prototype)===null||i===void 0?void 0:i.insertRule)=="function"&&(this.Rc=Kt({target:window.CSSStyleSheet.prototype,methodName:"insertRule",hook:({context:P,args:A})=>{this.processInsertRule(P,A)}})),typeof((a=(r=window.CSSStyleSheet)===null||r===void 0?void 0:r.prototype)===null||a===void 0?void 0:a.deleteRule)=="function"&&(this.Cc=Kt({target:window.CSSStyleSheet.prototype,methodName:"deleteRule",hook:({context:P,args:A})=>{this.processDeleteRule(P,A)}})),typeof((l=(c=window.CSSGroupingRule)===null||c===void 0?void 0:c.prototype)===null||l===void 0?void 0:l.insertRule)=="function"&&(this.Ic=Kt({target:window.CSSGroupingRule.prototype,methodName:"insertRule",hook:({context:P})=>this.processUpdateRule(P)})),typeof((f=(h=window.CSSGroupingRule)===null||h===void 0?void 0:h.prototype)===null||f===void 0?void 0:f.deleteRule)=="function"&&(this.Pc=Kt({target:window.CSSGroupingRule.prototype,methodName:"deleteRule",hook:({context:P})=>this.processUpdateRule(P)})),!((d=window.StyleSheet)===null||d===void 0)&&d.prototype&&"disabled"in window.StyleSheet.prototype&&(this.Oc=sn(window.StyleSheet.prototype,"disabled",(P,A,w)=>{A!==w&&this.Gy(P,A)})),typeof((E=(y=window.CSSStyleDeclaration)===null||y===void 0?void 0:y.prototype)===null||E===void 0?void 0:E.setProperty)=="function"&&(this.Nc=Kt({target:window.CSSStyleDeclaration.prototype,methodName:"setProperty",hook:({context:P})=>{let A=P.parentRule;A instanceof CSSStyleRule&&this.processUpdateRule(A)}})),typeof((C=(v=window.CSSStyleDeclaration)===null||v===void 0?void 0:v.prototype)===null||C===void 0?void 0:C.removeProperty)=="function"&&(this.Mc=Kt({target:window.CSSStyleDeclaration.prototype,methodName:"removeProperty",hook:({context:P})=>{let A=P.parentRule;A instanceof CSSStyleRule&&this.processUpdateRule(A)}})),Object.getOwnPropertyDescriptor(window.CSSStyleRule.prototype,"style")&&(this.kc=qd(window.CSSStyleRule.prototype,"style",P=>{this.processUpdateRule(P)}))}observe(){var t,e,i,r,a,c,l,h;(t=this.Rc)===null||t===void 0||t.activate(),(e=this.Cc)===null||e===void 0||e.activate(),(i=this.Ic)===null||i===void 0||i.activate(),(r=this.Pc)===null||r===void 0||r.activate(),(a=this.Oc)===null||a===void 0||a.activate(),(c=this.Nc)===null||c===void 0||c.activate(),(l=this.Mc)===null||l===void 0||l.activate(),(h=this.kc)===null||h===void 0||h.activate()}disconnect(){var t,e,i,r,a,c,l,h;(t=this.Rc)===null||t===void 0||t.deactivate(),(e=this.Cc)===null||e===void 0||e.deactivate(),(i=this.Ic)===null||i===void 0||i.deactivate(),(r=this.Pc)===null||r===void 0||r.deactivate(),(a=this.Oc)===null||a===void 0||a.deactivate(),(c=this.Nc)===null||c===void 0||c.deactivate(),(l=this.Mc)===null||l===void 0||l.deactivate(),(h=this.kc)===null||h===void 0||h.deactivate()}processInsertRule(t,[e,i]){if(t[Ee]==null&&!t.ownerNode)return;let r={type:"cssRuleInserted",sheet:t,rule:e,index:i};this.S(r)}processUpdateRule(t){let e=t;for(;e.parentRule!==null;)e=e.parentRule;e.parentStyleSheet!==null&&this.zy.push(e)}processUpdateRulesInATick(t){for(let e of t){if(e.parentStyleSheet===null)return;let i=e.parentStyleSheet,r=csArray.prototype.indexOf.call(Is(i.cssRules),e);if(r===-1)return;let a={type:"cssRuleUpdated",sheet:i,rule:e.cssText,index:r};this.S(a)}}processDeleteRule(t,[e]){if(t[Ee]==null&&!t.ownerNode)return;let i={type:"cssRuleDeleted",sheet:t,index:e};this.S(i)}Gy(t,e){if(t[Ee]==null&&!t.ownerNode)return;let i={type:"cssStyleSheetDisabled",sheet:t,disabled:e};this.S(i)}}return tt([I()],s.prototype,"observe",null),tt([I()],s.prototype,"disconnect",null),tt([I()],s.prototype,"processInsertRule",null),tt([I()],s.prototype,"processUpdateRule",null),tt([I()],s.prototype,"processUpdateRulesInATick",null),tt([I()],s.prototype,"processDeleteRule",null),s})(),Ip=(()=>{class s{constructor(t){this.qy=1,this.vo=new Set,this.Dc=null,this.Lc=null,this.xc=(e,i)=>{(i==="initial"||i==="added")&&this.setStyleSheets(e,e.adoptedStyleSheets)},this.Wy=e=>{let i=e.sheet;if(this.vo.has(i)){if(e.type==="cssRuleInserted"){let r={type:"adoptedStyleSheetRuleInserted",sheetId:i[Ee],rule:e.rule,index:e.index};this.S(r)}else if(e.type==="cssRuleDeleted"){let r={type:"adoptedStyleSheetRuleDeleted",sheetId:i[Ee],index:e.index};this.S(r)}else if(e.type==="cssRuleUpdated"){let r={type:"adoptedStyleSheetRuleUpdated",sheetId:i[Ee],rule:e.rule,index:e.index};this.S(r)}else if(e.type==="cssStyleSheetDisabled"){let r={type:"adoptedStyleSheetDisabled",sheetId:i[Ee],disabled:e.disabled};this.S(r)}}},this.S=e=>xt(async()=>{await _c(2),t(e)}),this.ne=new Ls(this.xc),"adoptedStyleSheets"in Document.prototype&&(this.Dc=sn(window.Document.prototype,"adoptedStyleSheets",(e,i)=>{this.setStyleSheets(e,i)})),"ShadowRoot"in window&&"adoptedStyleSheets"in window.ShadowRoot.prototype&&(this.Lc=sn(window.ShadowRoot.prototype,"adoptedStyleSheets",(e,i)=>{this.setStyleSheets(e,i)})),this.yd=new Or(this.Wy)}observe(){var t,e;this.setStyleSheets(document,document.adoptedStyleSheets),this.ne.observe(),(t=this.Dc)===null||t===void 0||t.activate(),(e=this.Lc)===null||e===void 0||e.activate(),this.yd.observe()}disconnect(){var t,e;this.vo.clear(),this.ne.disconnect(),(t=this.Dc)===null||t===void 0||t.deactivate(),(e=this.Lc)===null||e===void 0||e.deactivate(),this.yd.disconnect()}setStyleSheets(t,e){if(!e.length)return;this.Yy(e);let i=_e(e,a=>a[Ee]),r={type:"adoptedStyleSheetsSet",target:t,sheetsIds:i};this.S(r)}Yy(t){q(t,e=>{if(this.vo.has(e))return;let i=this.qy++;e[Ee]=i,this.vo.add(e);let r=this.Xy(e),a={type:"adoptedStyleSheetRegistered",sheetId:i,cssRules:r,disabled:e==null?void 0:e.disabled};this.S(a)})}Xy(t){let e=[];try{e=_e(t.cssRules,i=>i.cssText)}catch{}return e}}return tt([I()],s.prototype,"observe",null),tt([I()],s.prototype,"disconnect",null),tt([I()],s.prototype,"setStyleSheets",null),s})(),Pp=ds(kp,"optimizeMutations"),Op=csSymbol.for("ignoreNextSerialization");function Np(){let s=new Set,n=new Set,t=new Set,e=new Set,i=new Map,r=new Map,a=new Map,c=new Set,l=new Set,h=new Map,f=new Set;return{isMovedNode(d){return s.has(d)},markAsMovedNode(d){f.delete(d),s.add(d)},isDetachedMove(d){return!!it.findAncestor(d,y=>f.has(y),!0)},isAddedNode(d){let y=it.findAncestor(d,E=>n.has(E)||l.has(E)||s.has(E),!0);return!!y&&!s.has(y)},isMovedNodeIntoAddedNode(d){return s.has(d)&&!!it.findAncestor(d,y=>n.has(y)||l.has(y),!0)},markAsAddedNode(d){f.delete(d),l.delete(d),n.add(d)},markAsPendingInsert(d){l.add(d)},isPendingInsert(d){return l.has(d)},isRemovedNode(d){return!!it.findAncestor(d,y=>t.has(y),!0)},markAsRemovedNode(d){t.add(d)},isUselessNode(d){return e.has(d)},markAsUselessNode(d){e.add(d)},getPlaceholder(d,y){let E=y==="previous"?r:i;return d&&E.has(d)?E.get(d)||null:d},getSiblings(d){let y=d.addedNodes.length,E=this.getPlaceholder(d.previousSibling,"previous"),v=this.getPlaceholder(d.nextSibling,"next");if(y){let C=E,P=v,A=d.previousSibling!==E,w=d.nextSibling!==v;for(let x=0;x<y;x++){let b=d.addedNodes[x],L=d.addedNodes[y-x-1];this.isLatestNodeMutation(b,d)?(r.delete(b),d.previousSibling&&A&&(i.set(d.previousSibling,b),A=!1),C=b):r.set(b,C),this.isLatestNodeMutation(L,d)?(i.delete(L),d.nextSibling&&w&&(r.set(d.nextSibling,L),w=!1),P=L):i.set(L,P)}}else d.previousSibling&&d.previousSibling!==E&&i.set(d.previousSibling,v),d.nextSibling&&d.nextSibling!==v&&r.set(d.nextSibling,E);return{previousSibling:E,nextSibling:v}},setAttributeMutation(d,y){let E=a.get(d)||new Set;E.add(y),a.set(d,E)},isAttributeMutated(d,y){var E;return!!(!((E=a.get(d))===null||E===void 0)&&E.has(y))},setLatestNodeMutation(d,y){h.set(d,y)},isLatestNodeMutation(d,y){return h.get(d)===y},markAsFutureAddedNode(d){h.has(d)||f.add(d)},isTextMutated(d){return c.has(d)},setTextMutated(d){return c.add(d)}}}function Mp(s,n){for(let t=0;t<s.addedNodes.length;t++){let e=s.addedNodes[t];n.markAsFutureAddedNode(e),n.setLatestNodeMutation(e,s)}for(let t=0;t<s.removedNodes.length;t++){let e=s.removedNodes[t];n.setLatestNodeMutation(e,s)}}function kp(s){let n=Np(),t=[];for(let e of s)e.type==="childList"&&Mp(e,n);for(let e of s)switch(e.type){case"attributes":Lp(e,n,t);break;case"characterData":Dp(e,n,t);break;case"childList":Vp(e,n,t);break}return t}function Dp(s,n,t=[]){let e=s.target;return it.isConnected(e)&&!n.isTextMutated(e)&&!n.isAddedNode(e)&&!Up(e,"characterData")&&(n.setTextMutated(e),csArray.prototype.push.call(t,s)),t}function Lp(s,n,t=[]){let e=s.target,i=`${s.attributeNamespace}/${s.attributeName}`;return it.isConnected(e)&&!n.isAttributeMutated(e,i)&&!n.isAddedNode(e)&&(n.setAttributeMutation(e,i),csArray.prototype.push.call(t,s)),t}var xp=30;function Up(s,n,t){let e=csSymbol.for(t?`${n}:${t}`:n),i=O.now(),r=s[e];return r&&i<r?!0:(s[e]=i+xp,!1)}function Vp(s,n,t=[]){let e=it.isConnected(s.target),i=!e&&n.isRemovedNode(s.target),r=e&&n.isAddedNode(s.target),a=n.getSiblings(s),c=a.nextSibling,l=a.previousSibling,h=null,f=()=>{if(h){let{childListType:E,movedNodes:v,...C}=h;csArray.prototype.push.call(t,E==="added"?C:{...C,movedNodes:v}),h=null}},d=E=>E===(h==null?void 0:h.childListType)?h:(f(),{childListType:E,type:"childList",target:s.target,addedNodes:[],removedNodes:[],movedNodes:[],previousSibling:l,nextSibling:c});if(e){for(let E=0;E<s.addedNodes.length;E++){let v=s.addedNodes[E];n.isLatestNodeMutation(v,s)?(n.isMovedNode(v)?(h=d("moved"),csArray.prototype.push.call(h.movedNodes,v)):(n.markAsAddedNode(v),r||(h=d("added"),csArray.prototype.push.call(h.addedNodes,v))),l=v):it.isConnected(v)?n.isMovedNode(v)||n.markAsPendingInsert(v):n.markAsUselessNode(v)}f()}let y=ci(s.removedNodes,E=>{if(it.isConnected(E)){if(!i&&!n.isPendingInsert(E)){if(n.isDetachedMove(E))return!0;n.markAsMovedNode(E),n.isMovedNodeIntoAddedNode(E)&&(E[Op]=!0)}return!1}return n.isUselessNode(E)?!1:(n.markAsRemovedNode(E),!0)});return y.length&&csArray.prototype.push.call(t,{type:"childList",removedNodes:y,addedNodes:[],movedNodes:[],target:s.target,nextSibling:c,previousSibling:l}),t}var Vo={childList:!0,subtree:!0,attributes:!0,characterData:!0,characterDataOldValue:!0,attributeOldValue:!0},ge=(()=>{var s;class n{static setShadowRootFilter(e){csArray.prototype.push.call(s.shadowRootFilters,e)}static Uc(e){if(s.shadowRootFilters.length>0&&oi(e))for(let i=0;i<s.shadowRootFilters.length;i++){let r=s.shadowRootFilters[i];if(r(e))return}this.observedTargets.add(e),this.mutationObserver.observe(e,Vo)}static disconnectShadowRoot(e){this.observedTargets.has(e)&&(this.observedTargets.delete(e),this.isRefreshing||(this.isRefreshing=!0,xt(()=>{this.isRefreshing=!1;let i=this.mutationObserver.takeRecords();i.length&&s.mutationCallback(i),this.mutationObserver.disconnect(),this.observedTargets.forEach(r=>{this.mutationObserver.observe(r,Vo)})})))}static observe(e,i){csArray.prototype.push.call(this.callbacks,e),i&&csArray.prototype.push.call(this.shadowRootCallbacks,i),this.started?i&&csArray.prototype.forEach.call(hs.getAllShadowHosts(document),r=>i(csElementshadowRoot.apply(r),"initial")):(this.mutationObserver=new csMutationObserver(this.mutationCallback),this.Uc(document),this.shadowRootObserver=new Ls(this.onShadowRoot),this.shadowRootObserver.observe(),this.started=!0,q(this.shadowRootObserver.shadowRoots,r=>{this.Uc(r)}))}static disconnect(e,i){var r,a;this.callbacks=csArray.prototype.filter.call(this.callbacks,c=>c!==e),i&&(this.shadowRootCallbacks=csArray.prototype.filter.call(this.shadowRootCallbacks,c=>c!==i)),this.callbacks.length===0&&(this.callbacks=[],this.shadowRootCallbacks=[],s.shadowRootFilters=[],(r=this.shadowRootObserver)===null||r===void 0||r.disconnect(),(a=this.mutationObserver)===null||a===void 0||a.disconnect(),this.observedTargets.clear(),this.started=!1)}constructor(e,i){this.S=e,this.Ed=i;let r=dn(a=>e(a,this),!0);this.S=Ae("DocumentMutationObserver:callback",a=>{q(a,c=>r.push(c))})}get shadowRoots(){var e,i;return(i=(e=s.shadowRootObserver)===null||e===void 0?void 0:e.shadowRoots)!==null&&i!==void 0?i:[]}takeRecords(){var e;let i=(e=s.mutationObserver)===null||e===void 0?void 0:e.takeRecords(),r=s.shadowRootObserver.takeRecords();return i!=null&&i.length&&r.length?Iu(i,r):i!=null?i:r}observe(){s.observe(this.S,this.Ed)}disconnect(){s.disconnect(this.S,this.Ed)}}return s=n,n.callbacks=[],n.shadowRootCallbacks=[],n.started=!1,n.observedTargets=new Set,n.shadowRootFilters=[],n.mutationCallback=t=>{Tt.mutations.count.increase(t.length),csArray.prototype.forEach.call(s.callbacks,e=>e(t,s.mutationObserver))},n.onShadowRoot=(t,e)=>{q(s.shadowRootCallbacks,i=>i(t,e)),e!=="removed"?s.Uc(t):s.disconnectShadowRoot(t)},n.isRefreshing=!1,tt([I()],n.prototype,"observe",null),tt([I()],n.prototype,"disconnect",null),n})(),jp=(()=>{class s{constructor(t){this.S=t,this.Ky=e=>{e.sheet.ownerNode&&(e.type==="cssRuleInserted"?this.S({type:e.type,target:e.sheet.ownerNode,rule:e.rule,index:e.index}):e.type==="cssRuleDeleted"?this.S({type:e.type,target:e.sheet.ownerNode,index:e.index}):e.type==="cssRuleUpdated"?this.S({type:e.type,target:e.sheet.ownerNode,rule:e.rule,index:e.index}):e.type==="cssStyleSheetDisabled"&&this.S({type:e.type,target:e.sheet.ownerNode,disabled:e.disabled}))},this.S=e=>xt(()=>t(e)),this.Sd=new Or(e=>xt(async()=>{await _c(),this.Ky(e)})),"adoptedStyleSheets"in Document.prototype&&(this.vd=new Ip(t))}observe(){var t;this.P=new ge(e=>this.Jy(e),(e,i)=>{i==="added"&&this.Qy(e)}),this.P.observe(),this.Sd.observe(),(t=this.vd)===null||t===void 0||t.observe()}disconnect(){var t,e;(t=this.P)===null||t===void 0||t.disconnect(),this.Sd.disconnect(),(e=this.vd)===null||e===void 0||e.disconnect()}Jy(t){let e=Pp(t);for(let i=0;i<e.length;i++){let r=e[i];if(!r){ht.error("processRawMutations: empty record");continue}switch(r.type){case"attributes":this.processAttributeChanged(r);break;case"characterData":this.processCharacterDataChanged(r);break;case"childList":this.processChildListChanged(r);break;default:ht.error(`processRawMutations: unknown record type '${r.type}'`);break}}}processAttributeChanged(t){let e={type:"attributeChanged",target:t.target,attribute:t.attributeName,namespace:t.attributeNamespace,oldValue:t.oldValue,newValue:it.getAttributeNS(t.target,t.attributeNamespace,t.attributeName)};this.S(e)}processCharacterDataChanged(t){let e={type:"characterDataChanged",target:t.target,oldValue:t.oldValue,newValue:t.target.data};this.S(e)}processChildListChanged(t){var e,i,r;if(!((e=t.movedNodes)===null||e===void 0)&&e.length){let a={type:"nodesMoved",target:t.target,nodes:t.movedNodes,previousSibling:t.previousSibling,nextSibling:t.nextSibling};this.S(a)}if(!((i=t.addedNodes)===null||i===void 0)&&i.length){let a={type:"nodesAdded",target:t.target,previousSibling:t.previousSibling,nextSibling:t.nextSibling,nodes:Is(t.addedNodes)};this.S(a)}if(!((r=t.removedNodes)===null||r===void 0)&&r.length){let a={type:"nodesRemoved",target:t.target,nodes:_e(t.removedNodes,c=>c)};this.S(a)}}Qy(t){let e={type:"shadowRootAttached",target:t.host,shadowRoot:t};this.S(e)}}return tt([I()],s.prototype,"processAttributeChanged",null),tt([I()],s.prototype,"processCharacterDataChanged",null),tt([I()],s.prototype,"processChildListChanged",null),s})(),Hp=(()=>{class s extends fs{constructor(t){super(t),this.nodeType=4,this.data=t.data}}return s})(),Bp=(()=>{class s extends fs{constructor(t){super(t),this.nodeType=8,this.data=t.data}}return s})(),Fp=(()=>{class s extends fs{constructor(t){super(t),this.nodeType=10,this.name=t.name,this.publicId=t.publicId,this.systemId=t.systemId}}return s})(),$p=(()=>{class s extends fs{constructor(t){super(t),this.nodeType=9,this.baseURI=s.getBaseURI(t),this.children=[]}static getBaseURI(t){let e=t.baseURI;if(e==null){let i=t.getElementsByTagName("base");e=i.length!==0?i[0].href:t.URL}return e}}return s})(),zp=(()=>{class s extends fs{constructor(t){super(t),this.nodeType=11,this.mode=t.mode,this.children=[]}}return s})(),Gp=(()=>{class s{constructor(t,e,i){var r;typeof t=="string"?(this.name=t,this.value=e,this.namespaceURI=i!=null?i:""):(this.name=t.name,this.value=t.value,this.namespaceURI=(r=t.namespaceURI)!==null&&r!==void 0?r:"")}static create(t){let e=t.attributes,i=new csArray(e.length);for(let r=0;r<i.length;r++){let a=e[r];i[r]=new s(a.name,a.value,a.namespaceURI),a.name==="href"&&gr(t)&&(i[r].value=yc(t))}return i}}return s})(),jo={workTime:40,async:!0,initialDOM:!0};var si=csSymbol("InitialDom"),Ho=csSymbol.for("ignoreNextSerialization");function wc(s){return s[Ho]?(delete s[Ho],!0):!1}function qp(s=jo){return function(t,e){var i;(i=s.workTime)!==null&&i!==void 0||(s.workTime=jo.workTime);let r=Ae("serialize:callback",y=>e(y)),a=new Ds,c=(y,E)=>{y.hasChildNodes()&&a.push({node:y,serializedNode:E});let v=y instanceof Element&&csElementshadowRoot.apply(y);if(v){let C=E.shadowRoot=ii(v);s.async&&s.initialDOM&&Y.setProperty(v,si,!0),c(v,C)}},l,h=!0,f=8,d=Ae("work",()=>{var y;if(h)l=ii(t),s.async&&s.initialDOM&&Y.setProperty(t,si,!0),c(t,l),h=!1;else if(a.isEmpty)return;let E=Xp(100);for(;!a.isEmpty;){if(s.async&&E.elapsed()>=s.workTime){--f<=0&&csSetTimeout(d);return}let{node:v,serializedNode:C}=a.pop(),P=(y=C.children)!==null&&y!==void 0?y:[];if(gi(v))continue;let A=0;for(let w=csNodefirstChild.apply(v);w;w=csNodenextSibling.apply(w)){if(wc(w))continue;let x=ii(w);s.async&&s.initialDOM&&Y.setProperty(w,si,!0),P[A++]=x,c(w,x)}}s.async?csSetTimeout(()=>r(l)):e(l)});if(!s.async)s.workTime=1/0,d();else for(let y=0;y<f;y++)csSetTimeout(d,1)}}function Wp(s){let n=ii(s),t=n;if(gi(s))return n;let e=0;for(let r=csNodefirstChild.apply(s);r;r=csNodenextSibling.apply(r))wc(r)||(t.children[e++]=ar(r));let i=s.shadowRoot;return i&&(t.shadowRoot=ar(i)),n}var ar=ds(Wp,"serializeSync");function ii(s){let n,t;switch(s.nodeType){case 1:t=n=new Rs(s),n.attributes=Kp(s);break;case 3:t=new Sc(s);break;case 4:t=new Hp(s);break;case 8:t=new Bp(s);break;case 10:t=new Fp(s);break;case 9:t=new $p(s);break;case 11:t=new zp(s);break;default:throw new Error("Node type not supported: "+s.nodeType)}return t}function Yp(){si=csSymbol("InitialDom")}function Xp(s){if(s<1)throw new Error("Precision should be >= 1");let n=0,t=performance.now();return{started:t,elapsed(){return++n%s===0&&(t=performance.now()),t-this.started}}}function Kp(s){return gi(s)?[]:Gp.create(s)}var te=(()=>{class s{constructor(){this.re=[],this.isStarted=!1}produceEvent(t){var e;this.isStarted&&(t.timestamp=(e=t.timestamp)!==null&&e!==void 0?e:O.now(),t.timestamp==null&&(t.timestamp=O.now()),csArray.prototype.forEach.call(this.re,i=>i(t)))}onStop(){}start(){this.isStarted||(this.isStarted=!0,this.onStart())}stop(){this.isStarted&&(this.isStarted=!1,this.onStop(),this.re=[])}stopForInactivity(){this.isStarted&&(this.isStarted=!1,this.onStop())}subscribe(t){return csArray.prototype.push.call(this.re,t),()=>{let e=csArray.prototype.indexOf.call(this.re,t);csArray.prototype.splice.call(this.re,e,1)}}}return s})(),Jp=qp(),Qp=(()=>{class s extends te{constructor(){super(...arguments),this._o=!1}onStart(){this._o=!0,this.S=Rp(this.Zy,this),this.F=new jp(this.S),this.F.observe();let t=Tt.mutations.initialDOM.asyncMeasure(),e=()=>{this._o=!1,Yp(),t()};this.produceEvent(new Pr(i=>Jp(document,r=>{e(),i({type:"DomEvent",domEvent:"initialDOM",initialDOM:r})})))}onStop(){var t,e;this._o=!1,(t=this.S)===null||t===void 0||t.cancel(),(e=this.F)===null||e===void 0||e.disconnect()}xt(t,e){let i={type:"DomEvent",domEvent:e.type,target:0,targetProps:{}};return"target"in e&&(i.target=st(e.target),i.targetProps=Y.getProperties(e.target)),[e,i]}Zy(t){if(!this.tE(t))switch(t.type){case"attributeChanged":{let[e,i]=this.xt(t.type,t);i.attribute=e.attribute,i.isSvg=ks(e.target),i.namespace=e.namespace,i.newValue=e.newValue,i.oldValue=e.oldValue,i.localName=Xs(e.target),i.linkRel=Na(e.target)?e.target.rel:null,i.parentLocalName=e.target.parentElement?Xs(e.target.parentElement):void 0,i.localName==="input"&&(i.inputType=e.target.getAttribute("type")),this.produceEvent(i)}break;case"characterDataChanged":{let[e,i]=this.xt(t.type,t);i.newValue=e.newValue,i.oldValue=e.oldValue,i.targetNodeType=e.target.nodeType,i.parentLocalName=e.target.parentElement?Xs(e.target.parentElement):null,i.parentProps=e.target.parentElement?Y.getProperties(e.target.parentElement):void 0,this.produceEvent(i)}break;case"nodesAdded":{let[e,i]=this.xt(t.type,t);i.targetLocalName=lt(e.target)?Xs(e.target):null,i.nextSibling=e.nextSibling?st(e.nextSibling):null,i.previousSibling=e.previousSibling?st(e.previousSibling):null,Tt.mutations.serializedMutations.measure(()=>{i.nodes=_e(e.nodes,ar)}),this.produceEvent(i);break}case"nodesMoved":{let[e,i]=this.xt(t.type,t);i.previousSibling=e.previousSibling?st(e.previousSibling):null,i.nextSibling=e.nextSibling?st(e.nextSibling):null,i.nodesIds=_e(e.nodes,st),this.produceEvent(i);break}case"nodesRemoved":{let[e,i]=this.xt(t.type,t);i.nodesIds=_e(e.nodes,st),this.produceEvent(i);break}case"shadowRootAttached":{let[e,i]=this.xt(t.type,t);i.shadowRoot=ii(e.shadowRoot),this.produceEvent(i);break}case"cssRuleInserted":{let[e,i]=this.xt(t.type,t);i.index=e.index,i.rule=e.rule,this.produceEvent(i);break}case"cssRuleDeleted":{let[e,i]=this.xt(t.type,t);i.index=e.index,this.produceEvent(i);break}case"cssRuleUpdated":{let[e,i]=this.xt(t.type,t);i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"cssStyleSheetDisabled":{let[e,i]=this.xt(t.type,t);i.disabled=e.disabled,this.produceEvent(i);break}case"adoptedStyleSheetRegistered":{let[e,i]=this.xt(t.type,t);i.sheetId=e.sheetId,i.cssRules=e.cssRules,i.disabled=e.disabled,this.produceEvent(i);break}case"adoptedStyleSheetsSet":{let[e,i]=this.xt(t.type,t);i.sheetsIds=e.sheetsIds,this.produceEvent(i);break}case"adoptedStyleSheetRuleInserted":{let[e,i]=this.xt(t.type,t);i.sheetId=e.sheetId,i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetRuleDeleted":{let[e,i]=this.xt(t.type,t);i.sheetId=e.sheetId,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetRuleUpdated":{let[e,i]=this.xt(t.type,t);i.sheetId=e.sheetId,i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetDisabled":{let[e,i]=this.xt(t.type,t);i.sheetId=e.sheetId,i.disabled=e.disabled,this.produceEvent(i);break}}}wo(t){return this._o&&!Y.getProperty(t,si)}tE(t){switch(t.type){case"nodesAdded":case"nodesMoved":case"nodesRemoved":case"shadowRootAttached":return this.wo(t.target)||k.isMaskedElement(t.target)||k.isMaskedElementChild(t.target);case"characterDataChanged":{let e=t.target.parentElement;return e!==null&&(this.wo(e)||k.isMaskedElement(e)||k.isMaskedElementChild(e))}case"attributeChanged":return this.wo(t.target)||k.isMaskedElementChild(t.target)||k.isMaskedAttribute(t.target,t.attribute);case"cssRuleInserted":case"cssRuleDeleted":case"cssRuleUpdated":case"cssStyleSheetDisabled":return this.wo(t.target)||k.isMaskedElementChild(t.target);default:return!1}}}return s})(),vi=(()=>{let s;return function(n){function t(e){return e.type==="DomEvent"}n.isDOMEvent=t}(s||(s={})),s})(),Us=(()=>{class s{constructor(){this.re=[]}start(){}stop(){this.re.length=0,this.re=[]}pushEvent(t){if(s.pendingEvents++,this.isListening(t)){let e=this.re;csSetTimeout(()=>{let r=Ae("Processor:processEvent",a=>this.processEvent(a))(t);r!=null&&csArray.prototype.forEach.call(e,a=>a(r)),s.pendingEvents--})}else csSetTimeout(()=>{csArray.prototype.forEach.call(this.re,e=>e(t))})}subscribe(t){return csArray.prototype.push.call(this.re,t),()=>{this.re=csArray.prototype.filter.call(this.re,e=>e!==t)}}emitEvent(t){xt(()=>csArray.prototype.forEach.call(this.re,e=>e(t)))}}return s.pendingEvents=0,s})(),Bo=(()=>{class s{static async toStaticResourceEvent(t,e,i){let r=await s.eE(t);if(!r)return null;let a=await s._d(r),c=zt(t)?void 0:t,l={type:"StaticResourceManagerEvent",timestamp:i,resourceId:e,resource:{hash:a,data:r}};return c&&(l.originalResourceName=c),l}static async toCSSStaticResourceEvent(t,e,i,r){let a=await s.sE(t,r),c=pe(t),l=a.get(c);if(!l)return null;let h={type:"StaticResourceManagerEvent",timestamp:i,resourceId:e,resource:{hash:l.hash,data:l.data}};return a.delete(c),a.size&&(h.nestedResources=[],a.forEach(f=>{f&&csArray.prototype.push.call(h.nestedResources,{hash:f.hash,data:f.data})})),h}static async _d(t){let e=await t.arrayBuffer(),i=await crypto.subtle.digest(this.qn,e);return er(i)}static async eE(t){let e;if(!zt(t))e=await(await window.fetch(t)).blob();else{let i=mo(t);if(!i)return null;e=i}return e}static async sE(t,e){let i=new Map,r=pe(t),c=[{resourceRawPath:t,resourceAbsolutePath:r}];for(;c.length>0;){let l=csArray.prototype.pop.call(c);if(!e&&l.resourceAbsolutePath!==null&&!zt(l.resourceAbsolutePath)){i.set(l.resourceAbsolutePath,null);continue}if(i.get(l.resourceAbsolutePath)===void 0)try{if(l.resourceRawPath===null||csString.prototype.indexOf.call(l.resourceRawPath,".css")>0){if(!l.data){let E=await fetch(l.resourceAbsolutePath);l.data=await E.text()}l.nestedResources||(l.nestedResources=ei(l.data));let d=!1,y=!1;for(let E of l.nestedResources){let v=zt(E)?E:l.resourceAbsolutePath?cd(E,l.resourceAbsolutePath):pe(E),C=i.get(v);if(C!==void 0){if(C!==null){let A=s.iE(C,E);l.data=ot.stringReplaceAll(l.data,E,A)}continue}ve(c,A=>A.resourceAbsolutePath===v)!==void 0||(d=!0,y||(csArray.prototype.push.call(c,l),y=!0),csArray.prototype.push.call(c,{resourceRawPath:E,resourceAbsolutePath:v}))}if(!d){let E=await s.nE(l.data);i.set(l.resourceAbsolutePath,{hash:E.hash,data:E.data})}}else{let d;if(!zt(l.resourceAbsolutePath))d=await(await fetch(l.resourceAbsolutePath)).blob();else{let E=mo(l.resourceAbsolutePath);if(!E){i.set(l.resourceAbsolutePath,null);continue}d=E}let y=await s._d(d);i.set(l.resourceAbsolutePath,{hash:y,data:d})}}catch{i.set(l.resourceAbsolutePath,null)}}return i}static iE(t,e){let i=`cs://resources/${t.hash}`;return zt(e)||(i+=`?${s.Vc}=${e}`),i}static async nE(t){let e=new Blob([t],{type:"text/css"}),i=await e.arrayBuffer(),r=await crypto.subtle.digest(s.qn,i);return{data:e,hash:er(r)}}}return s.qn="SHA-256",s.Vc="original-resource-name",s})(),cr=(()=>{class s extends Us{constructor(){super(),this.bo="cssrm://",this.oe=0,this.ps=!1}isListening(t){return!s.isSupported()||!vi.isDOMEvent(t)?!1:t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="attributeChanged"||t.domEvent==="characterDataChanged"}processEvent(t){switch(t.domEvent){case"initialDOM":case"nodesAdded":this.rE(t);break;case"attributeChanged":this.oE(t);break;case"characterDataChanged":this.aE(t);break}return t}disableOnlineAssets(){this.ps=!1}enableOnlineAssets(){this.ps=!0}isOnlineAssetsActivated(){return this.ps}rE(t){let e=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let i of e)Y.traverse(i,(r,a)=>{if(r.nodeType===3&&a){this.cE(r,a.localName);return}if(!Rs.isElement(r))return;let c=ve(r.attributes,l=>l.name==="style");if(c&&(c.value=this.Ao(c.value)),this.lE(r)||this.hE(r,a)){let l=ve(r.attributes,f=>f.name==="src");l&&l.value&&(l.value=this.wd(l.value));let h=ve(r.attributes,f=>f.name==="srcset");if(h){h.value=this.bd(h.value);return}}if(this.uE(r)&&this.ps){let l=ve(r.attributes,h=>h.name==="href");if(!l||!l.value)return;this.oe++,this.Hi(pe(l.value),this.oe,!0),this.dE(r,l,this.oe)}})}dE(t,e,i){csArray.prototype.push.call(t.attributes,{name:"data-cs-original-href",namespaceURI:"",value:e.value}),e.value=this.bo+i}cE(t,e){if(!t||e!=="style")return;let i=this.Ao(t.data);i!==null&&(t.data=i)}aE(t){if(t.parentLocalName!=="style"||!t.newValue)return;let e=this.Ao(t.newValue);e!==null&&(t.newValue=e)}oE(t){if(!t.newValue||t.newValue===t.oldValue)return;let e=t.attribute==="src",i=t.attribute==="srcset";if(t.attribute==="style"){t.newValue=this.Ao(t.newValue);return}if(!e&&!i)return;let a=t.localName==="img",c=t.localName==="source"&&t.parentLocalName&&t.parentLocalName==="picture";!a&&!c||(e&&(t.newValue=this.wd(t.newValue)),i&&(t.newValue=this.bd(t.newValue)))}wd(t){return zt(t)||this.ps?(this.oe++,this.Hi(t,this.oe,!1,O.now()),this.bo+this.oe):t}bd(t){if(!this.ps)return t;let e=t,i=Ir(t),r=O.now();for(let a of i)this.oe++,this.Hi(pe(a),this.oe,!1,r),e=csString.prototype.replace.call(e,a,this.bo+this.oe);return e}Ao(t){let e=ei(t),i=t,r=O.now();for(let a of e){let c=zt(a);if(!(c||this.ps)||this.pE(a))continue;this.oe++,i=csString.prototype.replace.call(i,a,this.bo+this.oe);let l=mp(a);c?this.Hi(a,this.oe,!1,r):this.ps&&(l?this.Hi(a,this.oe,!0,r):this.Hi(pe(a),this.oe,!1,r))}return i}Hi(t,e,i,r=O.now()){let a=i?Bo.toCSSStaticResourceEvent:Bo.toStaticResourceEvent,c=new Pr(async l=>{try{let h=await a(t,e,r,this.ps);l(h||{type:"warning",message:`Failed to process static resource: ${t}`})}catch(h){l({type:"warning",message:h})}});this.emitEvent(c)}lE(t){return t.localName==="img"}hE(t,e){return t.localName==="source"&&!!e&&e.localName==="picture"}uE(t){return t.localName==="link"&&csArray.prototype.some.call(t.attributes,e=>e.name==="rel"&&e.value==="stylesheet")}static isSupported(){return Xa()&&id()&&!!csArray.from}pE(t){return csString.prototype.replace.call(t,/['"]+/g,"").length===0}}return Zt([Rt("StaticResourceManagerProcessor.processEvent")],s.prototype,"processEvent",null),s})(),Gt=(()=>{let s;return function(n){n.Visible="visible",n.Hidden="hidden",n.Blur="blur",n.PagehideVisible="pagehideVisible",n.PagehideHidden="pagehideHidden",n.ExitPageByNavigate="exitPageByNavigate"}(s||(s={})),s})(),bc=(()=>{class s{constructor(){this.N=!1,this.Ms=t=>{try{switch(t.type){case"visibilitychange":return document.visibilityState==="hidden"?this.Jt(Gt.Hidden):this.Jt(Gt.Visible);case"pagehide":return document.visibilityState==="hidden"?this.Jt(Gt.PagehideHidden):this.Jt(Gt.PagehideVisible);case"blur":return this.Jt(Gt.Blur);case"navigate":return this.fE(t)?this.Jt(Gt.ExitPageByNavigate):void 0;default:return}}catch{}}}start(){this.N||(this.N=!0,this.jc(),this.gE(),this.mE(),So()&&this.yE())}stop(){this.N&&(this.N=!1,this.Hc(),this.EE(),this.SE(),So()&&this.vE())}onEvent(t){this.Jt=t}yE(){window.navigation.addEventListener("navigate",this.Ms)}vE(){window.navigation.removeEventListener("navigate",this.Ms)}jc(){document.addEventListener("visibilitychange",this.Ms)}Hc(){document.removeEventListener("visibilitychange",this.Ms)}gE(){window.addEventListener("pagehide",this.Ms)}EE(){window.removeEventListener("pagehide",this.Ms)}mE(){window.addEventListener("blur",this.Ms)}SE(){window.removeEventListener("blur",this.Ms)}fE(t){return t instanceof NavigateEvent?!t.downloadRequest&&!t.formData:!1}}return s})(),It=(()=>{let s;return function(n){n[n.Active=0]="Active",n[n.Paused=1]="Paused",n[n.Stopped=2]="Stopped"}(s||(s={})),s})(),Zp=(()=>{class s{constructor(t,e,i=[]){this.Bi=t,this.Bc=e,this._E=i,this.To=null,this.wt=It.Active,this.Z=[]}reset(){this.To=null,this.Z=[],this.wt=It.Active}disconnect(){this.wt=It.Stopped}wE(){this.Bc(It.Paused),this.wt=It.Paused,csSetTimeout(()=>{this.wt===It.Paused&&this.Fc()},s.STOP_TIMEOUT)}bE(){this.Bc(It.Active),this.wt=It.Active,q(this.Z,this.Bi),this.Z=[]}Fc(){this.Z=[],this.Bc(It.Stopped),this.wt=It.Stopped}pushEvent(t,e){if(e.isUserEvent&&(this.To=t.date,this.wt!==It.Active)){this.bE(),this.Bi(t);return}if(this.AE(t)){this.Bi(t);return}switch(this.wt){case It.Active:if(this.TE(t,e)){this.wE(),csArray.prototype.push.call(this.Z,t);return}this.Bi(t);break;case It.Paused:csArray.prototype.push.call(this.Z,t);break;case It.Stopped:break}}TE(t,e){return!e.isUserEvent&&this.To!==null&&t.date-this.To>s.INACTIVITY_TIMEOUT}AE(t){return csArray.prototype.indexOf.call(this._E,t.type)>-1}}return s.INACTIVITY_TIMEOUT=5e3,s.STOP_TIMEOUT=5e3,s})(),tf=2e3,ef=(()=>{class s extends Mt{constructor(t,e,i,r,a,c,l,h,f,d,y,E,v,C,P=[],A,w,x,b,L){super(),this.h=t,this.j=e,this.RE=i,this.xe=r,this.X=a,this.w=c,this.ae=l,this.at=h,this.ce=f,this.tt=d,this.U=y,this.Ct=E,this.yt=v,this.Pe=C,this.Oe=P,this.Ad=A,this.Ut=w,this.Fi=x,this.We=b,this.Ye=L,this.ks=0,this.Ds=new gc,this.$i={allowFromQuotaService:!0,allowFromSerialization:!0},this.Td=hn(()=>{this.j.eventsCount()>0&&this.Rd()},tf),this.fs=H=>this.processBrowserEvent(H),this.Wn=H=>this.It(H),this.Cd=0,this.Ro=0,this.Ue=new bc,this.$c=!1,this.Id=50*1024,this.fi=!1,this.Yn=!1,this.gi=[],this.Co=new Zp(H=>this.G(H),H=>{switch(H){case It.Active:this.CE();break;case It.Stopped:this.IE();break}},[D.RESOURCE_HASHES,D.TEXT_VISIBILITY,D.API_ERROR,D.JAVASCRIPT_ERROR]),this.Pd=H=>{this.Ct.removeBatchInProgress(`${H.params.sn}.${H.params.pn}.${H.params.ri}`)}}init(){this.zc(),this.U.onLoad(this.Pd),this.U.onError(this.Pd)}CE(){csArray.prototype.forEach.call(this.Ad,t=>t.start())}IE(){csArray.prototype.forEach.call(this.Ad,t=>t.stopForInactivity())}zc(){var t,e,i;this.Pe.onEvent(this.fs,this.Wn),(t=this.tt)===null||t===void 0||t.onInputNodeToEncrypt(this.Wn),(e=this.tt)===null||e===void 0||e.onApiErrorToEncrypt(r=>{this.Od(r)}),(i=this.tt)===null||i===void 0||i.onUserIdentifierToEncrypt(this.fs),this.Ue.onEvent(r=>{if(csSetTimeout(()=>this.mi("page-state",r)),r!==Gt.Visible){if(r===Gt.Blur)return this.Nd();if(!this.$c)return this.$c=!0,csSetTimeout(()=>{this.$c=!1}),r===Gt.Hidden?this.Nd():this.PE()}})}isRecording(){return this.w.hasValidSession()&&this.isStarted}Nd(){if(!this.canSendEvents())return;this.Pe.flush(),this.Ct.saveBatchesInProgress(),q(this.Oe,a=>{var c,l;return q((l=(c=a.getPendingEvents)===null||c===void 0?void 0:c.call(a))!==null&&l!==void 0?l:[],h=>this.j.addEvent(h))});let t=this.j.getEvents();if(t.length===0)return;this.mi("pending-events",this.Pe.pendingEvents);let e=this.U.getQueryParams();e.rst=this.getRecordingStartTimestamp(),e.let=this.getRecordingLastEventTimestamp();let i=this.xe.getCurrentIndex();e.ri=i.toString(),this.yt.removeQueryParams(),this.yt.setQueryParams(e),this.Ro=t[t.length-1].date;let r=this.j.stringifyEvents();if(r.length>this.Id){let a=this.Md();if(a.length>0){let c=Os(a);this.yt.send(c)||this.Ct.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:c}),this.xe.increment()}if(this.j.eventsCount()>0){e.ri=this.xe.getCurrentIndex().toString();let c=this.j.stringifyEvents();this.Ct.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:c}),this.xe.increment()}}else this.yt.send(r)||this.Ct.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:r}),this.xe.increment();this.yt.removeQueryParams(),this.j.clearEvents()}PE(){if(!this.canSendEvents())return;this.Pe.flush();let t=this.U.getQueryParams();this.Ct.saveBatchesInProgress(),t.rst=this.getRecordingStartTimestamp(),delete t.ri,t.hlm="true",this.yt.removeQueryParams(),q(this.Oe,r=>{var a,c;return q((c=(a=r.getPendingEvents)===null||a===void 0?void 0:a.call(r))!==null&&c!==void 0?c:[],l=>this.j.addEvent(l))});let e=this.j.getEvents();if(e.length===0){delete t.let,delete t.rst,this.yt.setQueryParams(t),this.yt.send(),this.yt.removeQueryParams();return}this.mi("pending-events",this.Pe.pendingEvents),this.Ro=e[e.length-1].date,t.let=this.getRecordingLastEventTimestamp(),this.yt.setQueryParams(t);let i=this.j.stringifyEvents();if(i.length>this.Id){let r=this.Md();if(r.length>0){let a=Os(r);this.yt.send(a)||this.Ct.save({key:`${t.sn}.${t.pn}.last`,metadata:{...t,datatype:"json"},events:a})}else delete t.let,delete t.rst,delete t.ri,this.yt.removeQueryParams(),this.yt.setQueryParams(t),this.yt.send(),this.yt.removeQueryParams();if(this.j.eventsCount()>0){t.rst=this.getRecordingStartTimestamp(),t.let=this.getRecordingLastEventTimestamp();let a=this.xe.getCurrentIndex();t.ri=a.toString();let c=this.j.stringifyEvents();this.Ct.save({key:`${t.sn}.${t.pn}.${t.ri}.last`,metadata:{...t,datatype:"json"},events:c}),this.xe.increment()}}else this.yt.send(i)||(this.Ct.save({key:`${t.sn}.${t.pn}.${t.ri}.last`,metadata:{...t,datatype:"json"},events:i}),this.xe.increment());this.yt.removeQueryParams(),this.j.clearEvents()}blockSendingEventsFromQuotaService(){this.$i.allowFromQuotaService=!1}allowSendingEventsFromQuotaService(){this.$i.allowFromQuotaService=!0}blockSendingEventsFromSerialization(){this.$i.allowFromSerialization=!1}allowSendingEventsFromSerialization(){this.$i.allowFromSerialization=!0}canSendEvents(){return this.$i.allowFromQuotaService&&this.$i.allowFromSerialization}onIframeJavascriptError(t){var e;if(this.ae&&this.We){(e=this.ae)===null||e===void 0||e.anonymize(t);let i=this.We.translate({message:t.message,colno:t.colno,lineno:t.lineno,filename:t.filename,timestamp:O.now(),type:"JSError"});i&&this.fs(i)}}onIframeCustomError(t){if(this.Ye){let e=this.Ye.translate({...t,timestamp:O.now(),type:"CustomError"});e&&this.fs(e)}}onIframeDetailedApiError(t){this.kd(t)}onIframeRecordingUserEvent(t){for(let e of t)this.It(e)}onIframeRecordingBrowserEvent(t){if(this.isStarted)for(let e of t)this.processBrowserEvent(e)}processBrowserEvent(t){this.X.isCurrentPageviewValid()&&this.Co.pushEvent(t,{isUserEvent:!1})}It(t){this.X.refreshSession(),this.X.isSessionValid()&&this.Co.pushEvent(t,{isUserEvent:!0})}G(t){Tt.general.nbEvents.increase(),this.j.addEvent(t),this.j.isThresholdReached()?this.pushEvents():this.j.isFull()&&this.Td(),this.Dd(t)}Dd(t){this.h.emitDebugEvents&&this.Ds.emit("recordingEvent",{...t,typeName:D[t.type]})}onStart(){var t;this.mi("tag-version","15.109.0"),this.mi("page-state",document.visibilityState),this.Co.reset(),this.Ue.start(),this.initStates(),this.Pe.start(),this.at&&this.ce&&this.at.subscribe(s.Mt,e=>this.kd(e),{detailedEvent:!0}),this.h.emitDebugEvents&&this.Ds.emit("replayRecordingStarted"),csArray.prototype.forEach.call(this.gi,e=>this.Ld(e)),this.gi=[],this.fi&&((t=this.Ut)===null||t===void 0||t.enableOnlineAssets(),this.fi=!1)}onStop(){var t;this.Ue.stop(),this.at&&this.at.unsubscribe(s.Mt),this.Pe.stop(),this.Co.disconnect(),(t=this.Ut)===null||t===void 0||t.disableOnlineAssets()}clearStates(){this.Pe.flush(),this.Td.cancel(),this.pushEvents(),this.U.removeQueryParams()}initStates(){this.Cd=O.now(),this.xe.reset(),this.ks=0,this.U.setQueryParams(this.RE.getRequestParameters())}pushEvents(){q(this.Oe,t=>{var e;return(e=t.flushEvents)===null||e===void 0?void 0:e.call(t)}),this.j.eventsCount()>0&&(this.isStarted?this.Rd():this.j.clearEvents())}Rd(){if(!this.canSendEvents())return;let t=this.j.getEvents();this.Ro=t[t.length-1].date;let e=this.xe.getCurrentIndex();this.U.setQueryParams({ri:e.toString(),rst:this.getRecordingStartTimestamp(),let:this.getRecordingLastEventTimestamp()});let i=this.U.getQueryParams();this.Ct.addBatchInProgress(`${i.sn}.${i.pn}.${e}`,this.U.getQueryParams(),t),this.U.send(t),this.xe.increment(),this.j.clearEvents(),this.xd&&this.xd()}addInitialDom(t){this.j.addEventByTimestamp(t),this.Dd(t)}kd(t){if(this.Fi&&(t.plainCustomRequestHeaders||t.plainCustomResponseHeaders||t.requestBodyAttributes||t.responseBodyAttributes||t.customRequestHeaders||t.customResponseHeaders||t.queryParameters||t.requestBody||t.responseBody)){if(this.Fi.truncate(t),this.tt){this.tt.registerApiErrorToEncrypt(t);return}t.customRequestHeaders="",t.customResponseHeaders="",t.requestBodyAttributes="",t.responseBodyAttributes="",t.queryParameters="",t.requestBody="",t.responseBody=""}this.Od(t)}Od(t){if(this.ks<s.OE){let e={type:D.API_ERROR,date:O.now(),args:[this.ce.anonymize(t)]};this.fs(e),this.ks=this.ks+1,ct.counters.networkRequests.count("collected")}}NE(t){t===We.ETR_SESSION?this.U.setQueryParams({[s.ME]:s.Ud}):t===We.ETR_PAGE&&this.U.setQueryParams({[s.kE]:s.Ud})}clearEvents(){this.j.clearEvents()}onCustomJavaScriptErrorEvent(t){var e;let i=(e=this.We)===null||e===void 0?void 0:e.translate({type:"JSError",timestamp:O.now(),message:t.message,colno:t.colno,lineno:t.lineno,filename:t.filename});i&&this.fs(i)}onCustomErrorEvent(t){var e;let i=(e=this.Ye)===null||e===void 0?void 0:e.translate({type:"CustomError",timestamp:O.now(),message:t.message,attributes:t.attributes});i&&this.fs(i)}onPageEvent(t){this.Vd(t)}onUserIdentifierEvent(t){var e;let i={userIdentifier:t,date:O.now(),keyId:this.h.encryptionPublicKeyId};(e=this.tt)===null||e===void 0||e.registerUserIdentifierToEncrypt(i)}onEventTriggerRecording(t,e){this.isStarted?this.Ld({eventName:t,eventType:e}):csArray.prototype.push.call(this.gi,{eventName:t,eventType:e})}Ld(t){this.NE(t.eventType),this.Vd(t.eventName),this.pushEvents()}Vd(t){let e={type:D.PAGE_EVENT,date:O.now(),args:[{eventName:csString.prototype.slice.call(t,0,s.DE)}]};this.j.addEvent(e)}triggerUnanonymizationConsentGranted(){let t={date:O.now(),type:D.UNANONYMIZED_CONSENT_GRANTED};this.j.addEvent(t)}triggerUnanonymizationConsentWithdrawn(){let t={date:O.now(),type:D.UNANONYMIZED_CONSENT_WITHDRAWN};this.j.addEvent(t)}triggerRecordingForSessionGranted(){this.mi("consent-granted")}triggerRecordingForSessionWithdrawn(){this.mi("consent-withdrawn")}activateOnlineAssetsOnNextPageview(){this.Yn=!0}getStaticResourceManagerStatus(){return this.Ut?{isStarted:this.h.useStaticResourceManager&&cr.isSupported(),onlineAssets:{activated:this.Ut.isOnlineAssetsActivated(),enabledOnNextPageview:this.Yn}}:null}resetOnlineAssetsOnPageview(){this.fi=!1,this.Yn=!1}updateOnlineAssetsOnPageview(){this.Ut&&this.Yn&&(this.fi=!0,this.Yn=!1)}onRecordingRequestSent(t){this.xd=t}getRecordingStartTimestamp(){return this.Cd.toString()}getRecordingLastEventTimestamp(){return this.Ro.toString()}onOptOut(){q(this.Oe,t=>{var e;return(e=t.releaseResources)===null||e===void 0?void 0:e.call(t)})}mi(t,e){if(!this.h.emitRecordInfoEvents)return;let i={date:O.now(),type:D.RECORDING_INFO_EVENT,args:e==null?[t]:[t,e]};this.j.addEvent(i)}Md(){return this.j.extractEvents(D.API_ERROR,D.JAVASCRIPT_ERROR,D.CUSTOM_ERROR,D.TEXT_VISIBILITY,D.POINTER_DOWN)}}return s.Mt="RecordingService",s.DE=255,s.OE=20,s.kE="etrp",s.ME="etrs",s.Ud="1",j([Rt("addInitialDom")],s.prototype,"addInitialDom",null),s})(),sf=(()=>{class s extends Mt{constructor(t,e,i){super(),this.Yt=t,this.yt=e,this.U=i,this.Gc=!1,this.Xn={},this.LE=r=>{if(r.length!==0)for(let a of r){let{metadata:c,events:l}=a;this.xE(c.rt)&&this.U.send(l,c)}},window.addEventListener("focus",()=>{this.recover()})}onStart(){this.Xn={}}onStop(){}recover(){this.Yt.recover(this.LE)}addBatchInProgress(t,e,i){this.Xn[t]={metadata:{...e},events:i}}removeBatchInProgress(t){delete this.Xn[t]}blockSendingLastMessage(){this.Gc=!1}allowSendingLastMessage(){this.Gc=!0}sendLastMessageBeacon(){if(this.Gc){let{ri:t,rst:e,let:i,...r}=this.U.getQueryParams();r.hlm="true",this.yt.setQueryParams(r),this.yt.send()}}xE(t){return!!t&&csString.prototype.indexOf.call(t,N.RECORDING_TEMPORARILY)===-1}saveBatchesInProgress(){csArray.prototype.forEach.call(Object.keys(this.Xn),t=>{let{metadata:e,events:i}=this.Xn[t];this.Yt.save({key:`${e.sn}.${e.pn}.${e.ri}`,metadata:{...e,datatype:"json"},events:csJSON.stringify(i)})})}save(t){this.Yt.save(t)}}return j([I("RecordingRecovery")],s.prototype,"recover",null),s})(),hi=(()=>{class s{constructor(...t){this.jd=t}addProvider(t){csArray.prototype.push.call(this.jd,t)}getRequestParameters(){return csArray.prototype.reduce.call(this.jd,(t,e)=>({...e.getRequestParameters(),...t}),{})}}return s})(),nf=(()=>{class s{constructor(t,e){this.Rt=t,this.I=e,this.Ls=[{boundElement:window,type:"hashchange",listener:()=>this.hashChangeListener()},{boundElement:document,type:"visibilitychange",listener:()=>this.visibilityChangeListener()}]}onEvent(t){this.O=t}start(){this.hi(),this.triggerInitialEvents()}stop(){this.pi()}hi(){csArray.prototype.forEach.call(this.Ls,t=>Pt(t))}pi(){csArray.prototype.forEach.call(this.Ls,t=>Ot(t))}triggerInitialEvents(){this.hashChangeListener()}hashChangeListener(){let t={type:D.HASH_CHANGE,args:[this.I.anonymizePII(this.Rt.href)],date:O.now()};this.O(t)}visibilityChangeListener(){let t={type:D.VISIBILITY_CHANGE,args:[document.visibilityState],date:O.now()};this.O(t)}}return j([I("hashChange")],s.prototype,"hashChangeListener",null),j([I("visibilityChange")],s.prototype,"visibilityChangeListener",null),s})(),rf=(()=>{class s{constructor(){}onScannedAsset(t){this.Io=t}scanCssString(t){this.qc(ei(t))}scanElement(t,e){k.getMaskedElementDetails(t).state!==k.MaskedElementState.NotMasked||e&&k.isMaskedAttribute(t,e)||(fi(t)?this.UE(t):gr(t)?this.VE(t,e):(this.jE(t,e),this.HE(t,e),this.BE(t,e)))}VE(t,e){var i;if((!e||e==="href")&&t.href){let a={assetId:((i=t.sheet)===null||i===void 0?void 0:i.href)||t.href,assetBasePath:window.location.href,assetRawPath:yc(t)};this.Io({type:"stylesheet",asset:a})}}UE(t){var e;let i=new Set;if(t.textContent)for(let a of ei(t.textContent))i.add(a);let r;try{r=(e=t.sheet)===null||e===void 0?void 0:e.cssRules}catch(a){a.name==="SecurityError"||a.name==="InvalidAccessError"||V.error(a.message)}if(r)for(let a=0;a<r.length;a++){let c=r.item(a).cssText;for(let l of ei(c))i.add(l)}this.qc(ps(i))}Wc(t){return!this.FE(t)&&!zt(t)&&!gp(t)}jE(t,e){if(Wh(t)||qh(t)){if(!e||e==="src"){let i=t.getAttribute("src");if(i&&this.Wc(i)){let r={assetId:t.src,assetRawPath:i,assetBasePath:window.location.href};this.Io({type:"asset",asset:r})}}(!e||e==="srcset")&&t.srcset&&this.$E(t.srcset)}}HE(t,e){if(t.nodeType!==1){ht.warn(`StaticResourceUrlTracker: Wrong element nodeType: ${t==null?void 0:t.nodeName}/${t.nodeType}`);return}if(t.hasAttribute&&(!e||e==="style")&&t.hasAttribute("style")){let i=t.getAttribute("style");if(typeof i=="string")this.scanCssString(i);else throw new Error("Unexpected style: "+t.outerHTML)}}$E(t){this.qc(Ir(t))}BE(t,e){if((Jh(t)||Qh(t)||Zh(t))&&(!e||e==="href"||e==="xlink:href")){let i=t.getAttribute("href")||t.getAttribute("xlink:href");if(i&&this.Wc(i)){let r={assetId:pe(i),assetRawPath:i,assetBasePath:window.location.href};this.Io({type:"asset",asset:r})}}}qc(t){return csArray.prototype.forEach.call(csArray.prototype.map.call(csArray.prototype.filter.call(t,e=>this.Wc(e)),e=>({rawUrl:e,absoluteUrl:pe(e)})),e=>{let i={assetId:e.absoluteUrl,assetBasePath:window.location.href,assetRawPath:e.rawUrl};this.Io({type:"asset",asset:i})})}FE(t){return/^https:\/\/\w+:\w+@/.test(t)}}return s})(),of=(()=>{class s{constructor(t=Number.POSITIVE_INFINITY){this.xs=[],this.Z=[],this.zE=t}next(t){this.Z.length===this.zE&&csArray.prototype.shift.call(this.Z),csArray.prototype.push.call(this.Z,t),this.Z.length===1&&csSetTimeout(()=>this.clear());for(let e of this.xs)e(t)}subscribe(t){if(ve(this.xs,i=>t===i))return()=>{this.xs=csArray.prototype.filter.call(this.xs,i=>i!==t)};csArray.prototype.push.call(this.xs,t);for(let i of this.Z)t(i);return()=>{this.xs=csArray.prototype.filter.call(this.xs,i=>i!==t)}}clear(){this.Z=[]}hasObservers(){return this.xs.length>0}}return s})(),Ac=(()=>{var s;class n{constructor(e){this.S=e}observe(){this.GE=s.Kn.subscribe(e=>this.S(e)),s.Po||(s.Po=!0,s.Jn.observe(),Ft(document,NodeFilter.SHOW_ELEMENT).visitAll(i=>{s.gs.add(i),s.Kn.next(i)}))}disconnect(){s.Po&&(this.GE(),s.Kn.hasObservers()||(s.Po=!1,s.Jn.disconnect(),s.Kn.clear(),s.gs.clear()))}}return s=n,n.gs=new Si,n.Kn=new of,n.qE=ds(t=>{xt(()=>{for(let e of t)e.type==="childList"&&q(e.addedNodes,i=>{Ft(i,NodeFilter.SHOW_ELEMENT).visitAll(a=>{s.gs.has(a)||(s.gs.add(a),s.Kn.next(a))})})})},"ElementObserver.findAllElements"),n.Po=!1,n.Jn=new ge(s.qE),tt([I()],n.prototype,"observe",null),tt([I()],n.prototype,"disconnect",null),n})(),af=1,cf=0,Tc=(()=>{class s{constructor(t,e=af,i=cf){this.WE=t,this.YE=e,this.XE=i,this.Ve=new Ds,this.Le=!1,this.Yc=0,this.Hd=()=>{for(this.Yc=0;this.Ve.length;){if(this.Yc>=this.YE){csSetTimeout(this.Hd,this.XE);return}let r=O.elapsed(),a=this.Ve.pop();if(!a)break;this.runTask(a);let c=O.elapsed()-r;this.Yc+=c}this.Le=!1}}schedule(t,e=!1){if(!this.WE||e){t();return}Tt.general.pendingTasks.increase(),this.Ve.push(t),this.KE()}KE(){this.Le||(this.Le=!0,csSetTimeout(()=>{this.Hd()}))}runTask(t){Tt.general.pendingTasks.decrease(),t()}runPendingTasks(){this.Ve.forEach(t=>{this.runTask(t)}),this.Ve.clear()}clearQueue(){Tt.general.pendingTasks.clear(),Tt.mutations.pendingMutations.clear(),this.Ve.clear()}isEmpty(){return this.Ve.length===0}}return j([I("TaskScheduler"),Rt("runTask")],s.prototype,"runTask",null),j([Rt("runPendingTasks")],s.prototype,"runPendingTasks",null),s})(),lf=(()=>{class s{constructor(){this.B=!1,this.Bd=new Or(t=>t.type==="cssRuleInserted"&&this.JE(t)),this.QE=dn(t=>{this.B&&t.length>0&&this.C.schedule(()=>q(t,e=>this.Qn.scanElement(e)))}),this.ZE=({type:t,asset:e})=>{var i,r,a;t==="stylesheet"&&((i=this.tS)===null||i===void 0||i.call(this,e)),(r=this.eS)===null||r===void 0||r.call(this,e);let c={date:O.now(),type:D.STATIC_RESOURCE_URL,args:[e.assetId]};(a=this.O)===null||a===void 0||a.call(this,c)},this.C=new Tc(!0,30,0),this.Zn=new Ac(t=>this.sS(t)),this.P=new ge(t=>this.Oo(t)),this.Qn=new rf,this.Qn.onScannedAsset(this.ZE)}onEvent(t){this.O=t}onAsset(t){this.eS=t}onStyleSheetFound(t){this.tS=t}start(){this.B||(this.B=!0,this.Bd.observe(),this.Zn.observe(),this.P.observe())}stop(){this.B&&(this.Bd.disconnect(),this.Zn.disconnect(),this.P.disconnect(),this.B=!1)}JE(t){!t.rule||!this.B||this.Qn.scanCssString(t.rule)}sS(t){this.B&&k.getMaskedElementDetails(t).state===k.MaskedElementState.NotMasked&&this.QE.push(t)}Oo(t){csSetTimeout(()=>{for(let e of t)switch(e.type){case"attributes":this.Qn.scanElement(e.target,e.attributeName);break;case"characterData":this.iS(e.target);break;case"childList":}})}iS(t){Xi(t)&&csNodeparentNode.apply(t)&&fi(csNodeparentNode.apply(t))&&this.Qn.scanCssString(t.data)}}return s})(),Rc=(()=>{class s{constructor(t){this.Fd=[],this.$d=[],this.qt={},this.Wt=t}setQueryParams(t){csArray.prototype.forEach.call(Object.keys(t),e=>{this.qt[e]=t[e]})}removeQueryParams(t){t?csArray.prototype.forEach.call(t,e=>{delete this.qt[e]}):this.qt={}}onBeaconSuccess(t){csArray.prototype.push.call(this.Fd,t)}onBeaconFailure(t){csArray.prototype.push.call(this.$d,t)}send(t){let e=li.toQuery({...this.qt,ct:ln.UNCOMPRESSED}),i=this.nS(e,t);return i?csArray.prototype.forEach.call(this.Fd,r=>r()):csArray.prototype.forEach.call(this.$d,r=>r(this.qt)),i}nS(t,e){try{if(typeof csNavigatorsendBeacon!="function")return!1;let i=csNavigatorsendBeacon(`${this.Wt}?${t}`,e||"");if(i)return i}catch{}return typeof navigator.sendBeacon!="function"?!1:navigator.sendBeacon(`${this.Wt}?${t}`,e||"")}}return s})(),hf=(()=>{class s{constructor(t){this.Mo={},this._e=new Cr(t)}save({key:t,metadata:e,events:i}){this._e.isThresholdReached()||(this._e.addString(t),typeof i=="string"?this._e.addString(i):this._e.addArrayBuffer(i),!this._e.isThresholdReached()&&(this.Mo[t]={metadata:e,events:i}))}recover(t){let e=[];csArray.prototype.forEach.call(this.rS(),i=>{let r=this.Mo[i];r!==void 0&&(delete r.metadata.datatype,csArray.prototype.push.call(e,r),this.oS(i))}),e.length!==0&&(t(e),this._e.reset())}rS(){return Object.keys(this.Mo)}oS(t){delete this.Mo[t]}}return s})(),je=(()=>{let s;return function(n){n[n.NOT_STARTED=0]="NOT_STARTED",n[n.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",n[n.OPEN_FAILED=2]="OPEN_FAILED",n[n.READY=3]="READY"}(s||(s={})),s})(),uf=(()=>{class s{constructor(t,e,i){this.zi=t,this.aS=i,this.yi=je.NOT_STARTED,this.ko=[],this.Xc=0,this.cS=self.origin,this.we=typeof window=="object"?"":"worker-",this._e=new Cr(e),this.Kc()}async Kc(){await this.zd(),this.yi===je.READY?this.lS():this.aS(this.ko)}lS(){csArray.prototype.forEach.call(this.ko,t=>{this.save(t)}),this.ko=[]}async save(t){try{if(this.yi===je.OPEN_IN_PROGRESS){csArray.prototype.push.call(this.ko,t);return}if(this.yi!==je.READY||this._e.isThresholdReached())return;let{key:e,metadata:i,events:r}=t;if(this._e.addString(e),typeof r=="string"?this._e.addString(r):this._e.addArrayBuffer(r),this._e.isThresholdReached())return;await this.Qt.put(`${this.cS}/${e}`,new Response(r,{headers:i}))}catch{}}async recover(t){!this.Qt&&(await this.zd(),this.yi!==je.READY)||this.hS(t)}async zd(){try{this.yi=je.OPEN_IN_PROGRESS,this.Qt=await self.caches.open(`${this.we}${this.zi}`),this.yi=je.READY}catch{this.yi=je.OPEN_FAILED}}async hS(t){try{if(this.Xc++,this.Xc>1)return;let e=await this.Qt.keys();if(e.length===0)return;let i=await this.Qt.matchAll(),r=csArray.prototype.map.call(i,c=>{let l={};c.headers.forEach((f,d)=>{l[d]=f}),delete l["content-type"];let h=l.datatype;return delete l.datatype,h==="json"||h==="base64"?c.text().then(f=>({metadata:l,events:f})):c.arrayBuffer().then(f=>({metadata:l,events:f}))}),a=await Promise.all(r);await Promise.all(csArray.prototype.map.call(e,c=>this.Qt.delete(c))),t(a),this._e.reset()}catch{}finally{this.Xc--}}}return s})(),df=(()=>{class s{constructor(t){try{this.uS(t)}catch{this.Jc()}}uS(t){self.caches?this.dS(t):this.Jc()}save(t){this.Do.save(t)}recover(t){this.Do.recover(t)}dS(t){this.Do=new uf(t,s.Gd,e=>{this.Jc(e)})}Jc(t){this.Do=new hf(s.Gd),t&&csArray.prototype.forEach.call(t,e=>{this.Do.save(e)})}}return s.Gd=1024*1024*16,s})(),Ln=(()=>{let s;return function(n){n.REQUEST_START="requestStart",n.DOM_INTERACTIVE="domInteractive",n.TIME_ORIGIN="timeOrigin"}(s||(s={})),s})();var pf=(()=>{class s extends Us{isListening(t){return vi.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded")}processEvent(t){let e=0,i=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let r of i){if(r instanceof Rs){let c=k.getMaskedAttributeDetails(r);r.attributes=this.xo(r,c)}if(k.getMaskedElementDetails(r).state===k.MaskedElementState.Child){if(t.domEvent==="initialDOM")return null;t.nodes=csArray.prototype.filter.call(t.nodes,c=>c!==r);continue}Y.traverse(r,c=>{if(c instanceof Rs){let l=k.getMaskedAttributeDetails(c);c.attributes=this.xo(c,l);let h=k.getMaskedElementDetails(c);h.state===k.MaskedElementState.Parent&&(this.Zc(c,h),e++)}})}return e>0&&ct.counters.sensitiveElements.count("masked-elements",e),t}xo(t,e){return e.attributes.length===0?t.attributes:csArray.prototype.filter.call(t.attributes,i=>csArray.prototype.indexOf.call(e.attributes,i.name)===-1)}Zc(t,e){let i=`width: ${e.width}px !important; height: ${e.height}px !important;`;t.children=[],t.shadowRoot=void 0,csArray.prototype.push.call(t.attributes,{name:"style",value:i,namespaceURI:""}),Rs.getAttribute(t,"data-cs-mask")||csArray.prototype.push.call(t.attributes,{name:"data-cs-mask",value:"",namespaceURI:""})}}return Zt([Rt("MaskedElementProcessor.processEvent")],s.prototype,"processEvent",null),s})(),le=(()=>{let s;return function(n){n.ANONYMIZED_TEXT_STATUS_PROP="anonymizationStatus",n.WHITELISTED_STATUS="whitelisted";function t(r){return Y.getProperty(r,n.ANONYMIZED_TEXT_STATUS_PROP)===n.WHITELISTED_STATUS}n.isWhitelistedElement=t;function e(r){Y.setProperty(r,n.ANONYMIZED_TEXT_STATUS_PROP,n.WHITELISTED_STATUS)}n.whitelistElement=e;function i(r){Y.setProperty(r,n.ANONYMIZED_TEXT_STATUS_PROP,void 0)}n.removeWhitelistElement=i}(s||(s={})),s})(),ff=/[\u4E00-\u9FFF]|[\u3000-\u303F]|[\u3040-\u309F]|[\u30A0-\u30FF]|[\uFF00-\uFFEF]/g,gf="\uFF41",mf=/[^\s]/g,yf="a";function xn(s){let n=csString.prototype.replace.call(s,ff,gf);return csString.prototype.replace.call(n,mf,yf)}var Ef=["id","class","style","srcset","sizes","rel","type","width","height","media","align","dir","bgcolor","color","border","colspan","rowspan","cols","rows","size","start","slot","data-cs-override-id"],Cc=s=>{let n=new Set(Ef);return csArray.prototype.forEach.call(s,t=>{n.add(t)}),n},Sf=["svg","slot"],vf=(s,n,t)=>t==="radio"&&s==="input"&&n==="name"||csArray.prototype.indexOf.call(Sf,s)>-1,Ic={href:new Set(["a"]),src:new Set(["iframe"])},_f=s=>Ic.hasOwnProperty(s),wf=(s,n,t)=>{var e;return((e=Ic[n])===null||e===void 0?void 0:e.has(s))&&!zt(t)},bf=(s,n,t)=>(t==="submit"||t==="button")&&s==="input"&&n==="value",Af=(()=>{class s{constructor(t,e,i,r=null){this.Xe=t,this.vS=e,this.I=i,this.Uo=r,this._S=Cc(this.vS)}sanitize(t,e){return Y.traverse(t,(i,r)=>{if(i.anonymized=this.Xe,i.nodeType===3){let{anonymizedValue:a,withAnonymization:c}=this.getAnonymizedValue(i.data,r?r==null?void 0:r.localName:e==null?void 0:e.targetLocalName,r?Y.getProperties(r):e==null?void 0:e.targetProps);i.anonymized=c,i.data=a;return}if(Rs.isElement(i))return this.wS(i);if(i.nodeType===4){i.data=this.Xe?xn(i.data):this.I.checkAndAnonymizePII(i.data,this.Uo);return}}),t}setAnonymization(t){this.Xe=t}getAnonymizedValue(t,e,i){if(e==="style")return{anonymizedValue:t,withAnonymization:!1};let r=(i==null?void 0:i[le.ANONYMIZED_TEXT_STATUS_PROP])===le.WHITELISTED_STATUS;return this.Xe&&!r?{anonymizedValue:xn(t),withAnonymization:!0}:{anonymizedValue:this.I.checkAndAnonymizePII(t,this.Uo),withAnonymization:!1}}wS(t){if(Y.getProperty(t,"SVG"))return;let e=ve(t.attributes,r=>r.name==="type"),i=e==null?void 0:e.value;t.attributes=csArray.prototype.map.call(t.attributes,r=>(r.anonymized=this.Xe,r.value=this.getAnonymizedAttributeValue(t.localName,r.name,r.value,i),r))}getAnonymizedAttributeValue(t,e,i,r){return this.bS(t,e,r)?i:_f(e)?wf(t,e,i)?this.I.anonymizePII(i):i:this.Xe&&bf(t,e,r)?xn(i):this.Xe?"":this.I.checkAndAnonymizePII(i,null)}bS(t,e,i){return vf(t,e,i)||this._S.has(e)}}return s})(),Fo=(()=>{class s{static create(t,e){if(!s.isSupported())throw new Error("IntersectionObserver is not supported");if(e&&e.delay&&e.delay<100)throw new Error("Visibility delay should be > 100ms");return e!=null&&e.trackVisibility&&(t=s.AS(t)),new IntersectionObserver(t,e)}static isSupported(){return!!window.IntersectionObserver&&!!window.IntersectionObserverEntry}static AS(t){return(e,i)=>t(_e(e,Tf),i)}}return s})();function Tf(s){return s.isVisible||!it.isVisibleInViewportInForeground(s.target)?s:{boundingClientRect:s.boundingClientRect,intersectionRatio:s.intersectionRatio,intersectionRect:s.intersectionRect,isIntersecting:s.isIntersecting,rootBounds:s.rootBounds,target:s.target,time:s.time,isVisible:!0}}var lr=()=>(s,n,t)=>{t.value=Cf(t.value)},Rf=csQueueMicrotask||csSetTimeout;function Cf(s){let n=csSymbol("oncePerTickSymbol"),t=null,e={},i=function(){var r;let a=(r=this)!==null&&r!==void 0?r:e;if(t=arguments,a[n])return;a[n]=!0,Rf(()=>{a[n]=!1,s.apply(a,t)})};return i.oncePerTickSymbol=n,i}lr.isScheduled=(s,n)=>{let t=n.oncePerTickSymbol;return s[t]};var If=(()=>{class s{constructor(t){this.S=t,this.Us=new Map,this.qd=e=>{let i=e.target;if(this.Us.has(i))return!0;let r=!1;return this.Us.forEach((a,c)=>{r||!this.Us.get(c).subtree||(r=c.contains(i))}),r},Tt.general.nbOfMutationObservers.increase(),this.P=new csMutationObserver(e=>{lr.isScheduled(this,this.garbageCollect)&&(e=ci(e,this.qd)),e.length&&xt(()=>t(e,this))})}disconnect(){Tt.general.nbOfMutationObservers.decrease(),this.P.disconnect(),this.Us=new Map}takeRecords(){return this.P.takeRecords()}observe(t,e){return Tt.mutations.elementMutationObserved.increase(),this.Us.set(t,e),this.P.observe(t,e)}unobserve(t){this.Us.has(t)&&(Tt.mutations.elementMutationObserved.decrease(),this.Us.delete(t),this.garbageCollect())}garbageCollect(){Tt.mutations.unobserveGarbageCollection.measure(()=>{let t=ci(this.takeRecords(),this.qd);t.length&&this.S(t,this),this.P.disconnect(),this.Us.forEach((e,i)=>this.P.observe(i,e))})}}return tt([lr()],s.prototype,"garbageCollect",null),s})(),Pf=(()=>{class s{constructor(t){this.S=t,this.Vo=new Set}onMutations(t){if(ai(t,e=>{var i;return!!(!((i=e.removedNodes)===null||i===void 0)&&i.length)}))for(let e of this.Vo.values())it.isConnected(e)||(this.Vo.delete(e),this.S(e))}observe(t){this.F||(this.F=new ge(e=>csSetTimeout(()=>this.onMutations(e))),this.F.observe()),this.Vo.add(t)}disconnect(){var t;(t=this.F)===null||t===void 0||t.disconnect(),this.Vo.clear(),this.F=void 0}}return tt([I("NodeDisconnectedObserver.onMutations")],s.prototype,"onMutations",null),s})(),Of=300,Gi=(()=>{class s{constructor(t){this.jo=new Set,this.TS=new Pf(e=>this.Wd(e)),this.B=!1,this.Et=t?{...$o,...t}:$o}stop(){var t,e;this.B=!1,(t=this.nr)===null||t===void 0||t.disconnect(),(e=this.P)===null||e===void 0||e.disconnect()}start(t){if(this.B)throw new Error("VisibilityObserver is already started");this.S=Ae("VisibilityObserver:callback",(i,r)=>t(i,r));let e={root:null,rootMargin:"0px",threshold:.5,trackVisibility:!0,delay:Of};this.nr=Fo.create(i=>this.handleIntersection(i),e),this.P=new If(i=>csSetTimeout(()=>{q(i,r=>this.Wd(r.target))})),this.Kc(),this.B=!0}observe(t){if(!this.B)throw new Error("Observer is stopped.");this.Et.reobserve===!1&&t[this.tl]||(Tt.visibilityObserver.nbElements.increase(),t[this.tl]=!0,this.watchIntersection(t))}Kc(){this.Ho=csSymbol("isVisible"),this.tl=csSymbol("ObservedElement"),this.sl=csSymbol("LinkedElement"),this.Yd=csSymbol("Tracked")}Wd(t){this.jo.add(t);for(let e of this.RS(t))this.jo.add(e);this.recheckCssVisibilityAll()}recheckCssVisibilityAll(){q(this.jo.keys(),t=>{!t.isConnected||it.areAncestorsHiddenByCSS(t)||t[this.tl]&&this.watchIntersection(t)}),this.jo.clear()}watchIntersection(t){this.P.unobserve(t),this.nr.unobserve(t);let e=it.getTopAncestorHiddenByCSS(t);e?(e!==t&&(this.Xd(e,t),this.watchMutation(e)),this.watchMutation(t)):this.nr.observe(t)}watchMutation(t,e=!0){e&&delete t[this.Ho],this.nr.unobserve(t);let i={attributeFilter:["style","class","hidden"]};this.P.observe(t,i)}handleIntersection(t){for(let e of t){let i=e.target;if(!e.isVisible){it.isVisibleInDocument(i)||this.CS(i);continue}let r=this.Et.allowSameMatch||!e.target[this.Ho];e.target[this.Ho]=!0,r&&!this.Et.delay&&this.onVisibilityChanged(e.target,qi.VisibleInViewPort)}this.Et.delay&&csSetTimeout(()=>{for(let e of t){let i=e.isIntersecting&&e.isVisible;e.target[this.Ho]&&i&&this.onVisibilityChanged(e.target,qi.VisibleInViewPort)}},this.Et.delay)}CS(t){Tt.visibilityObserver.hiddenElements.increase();let e=it.getTopElement(t);this.watchMutation(t),e&&(this.TS.observe(e),this.Xd(e,t),this.watchMutation(e,!1))}Xd(t,e){var i;(t[this.sl]=(i=t[this.sl])!==null&&i!==void 0?i:new Set).add(e)}RS(t){var e,i;let r=[],a=(i=(e=t[this.sl])===null||e===void 0?void 0:e.values())!==null&&i!==void 0?i:[];return q(a,c=>csArray.prototype.push.call(r,c)),r}onVisibilityChanged(t,e){if(e===qi.VisibleInViewPort&&this.Et.trackOnce){if(this.nr.unobserve(t),this.P.unobserve(t),t[this.Yd])return;t[this.Yd]=!0}this.S(t,e)}static isSupported(){return Fo.isSupported()}}return tt([I()],s.prototype,"observe",null),tt([xs({wait:50}),I(),Rt("recheckCssVisibilityAll")],s.prototype,"recheckCssVisibilityAll",null),tt([I()],s.prototype,"watchIntersection",null),tt([I()],s.prototype,"watchMutation",null),tt([I(),Rt("VisibilityObserver.handleIntersection")],s.prototype,"handleIntersection",null),tt([I()],s.prototype,"onVisibilityChanged",null),s})(),qi=(()=>{let s;return function(n){n.VisibleInViewPort="VisibleInViewPort",n.HiddenByAnother="HiddenByAnother",n.Hidden="Hidden"}(s||(s={})),s})(),$o={delay:1e3,trackOnce:!0,reobserve:!1},Nf=(()=>{class s{constructor(t){this.S=t,this.gs=new Si,this.IS=e=>{xt(()=>{for(let i of e)i.type==="childList"&&q(i.addedNodes,r=>{Ft(r,NodeFilter.SHOW_TEXT).visitAll(c=>{this.gs.has(c)||(this.gs.add(c),this.S(c))})})})},this.Jn=new ge(this.IS)}observe(){this.Jn.observe(),Ft(document,NodeFilter.SHOW_TEXT).visitAll(e=>{this.gs.add(e),this.S(e)})}disconnect(){this.gs.clear(),this.Jn.disconnect()}}return s})(),Pc=(()=>{let s;return function(n){n.ENCRYPTED_NODE_PROP="toEncrypt";function t(r){return Y.getProperty(r,n.ENCRYPTED_NODE_PROP)===!0}n.shouldEncrypt=t;function e(r){Y.setProperty(r,n.ENCRYPTED_NODE_PROP,!0)}n.markEncryptedNode=e;function i(r){Y.setProperty(r,n.ENCRYPTED_NODE_PROP,void 0)}n.unmarkEncryptedNode=i}(s||(s={})),s})(),Se=(()=>{let s;return function(n){n.EDITABLE_NODE_PROP="editableNode";function t(r){return Y.getProperty(r,n.EDITABLE_NODE_PROP)===!0}n.isEditableNode=t;function e(r){Y.setProperty(r,n.EDITABLE_NODE_PROP,!0)}n.markEditableNode=e;function i(r){Y.setProperty(r,n.EDITABLE_NODE_PROP,void 0)}n.unmarkEditableNode=i}(s||(s={})),s})(),Mf=(()=>{class s extends te{constructor(){super(),this.Vs=new Set,this.il=new Set,this.nl=new Set,this.Xe=!1,this.bt=new Gi,this.Kd=new Nf(t=>{let e=it.getParentElement(t);!e||!e.isConnected||k.isMaskedElement(e)||k.isMaskedElementChild(e)||Pc.shouldEncrypt(e)||Se.isEditableNode(e)||fi(e)||gi(e)||an(e)||Oa(t.data)||(this.Vs.add(e),this.watchElements())})}onStart(){Gi.isSupported()&&(this.bt.start((t,e)=>this.onVisibilityChanged(t,e)),this.Kd.observe())}onStop(){Gi.isSupported()&&(this.bt.stop(),this.Kd.disconnect(),this.Vs.clear(),this.il.clear(),this.nl.clear())}setAnonymization(t){this.Xe=t}watchElements(){if(!this.isStarted)return;let t=this.Vs;this.Vs=new Set;for(let e of ps(t))!e.isConnected||this.il.has(e)||(this.il.add(e),ai(csNodechildNodes.apply(e),i=>i.nodeType===3)&&this.bt.observe(e))}onVisibilityChanged(t,e){e!==qi.VisibleInViewPort||this.Xe&&!le.isWhitelistedElement(t)||q(csNodechildNodes.apply(t),i=>{if(i.nodeType!==3)return;let r=i.data;this.nl.has(r)||(this.nl.add(r),this.produceEvent({type:"TextVisibility",text:r,state:e}))})}}return Zt([I(),xs({wait:50,mode:"trailing"})],s.prototype,"watchElements",null),Zt([I()],s.prototype,"onVisibilityChanged",null),s})(),zo=(()=>{let s;return function(n){function t(e){return e.type==="TextVisibility"}n.isTextVisibilityEvent=t}(s||(s={})),s})(),kf=(()=>{class s extends Us{constructor(t,e,i,r=null){super(),this.I=i,this.Uo=r,this.Bo=new Af(t,e,i,r)}setAnonymization(t){this.Bo.setAnonymization(t)}isListening(t){return zo.isTextVisibilityEvent(t)||vi.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="attributeChanged"||t.domEvent==="characterDataChanged")}processEvent(t){if(zo.isTextVisibilityEvent(t))return t.text=this.I.checkAndAnonymizePII(t.text,this.Uo),t;switch(t.domEvent){case"initialDOM":case"nodesAdded":this.rl(t);break;case"attributeChanged":this.PS(t);break;case"characterDataChanged":this.OS(t);break}return t}rl(t){let e=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes,i;t.domEvent==="nodesAdded"&&(i={targetLocalName:t.targetLocalName,targetProps:t.targetProps});for(let r of e)this.Bo.sanitize(r,i)}PS(t){if(!t.isSvg&&t.newValue){if(t.localName===null){t.newValue="";return}t.newValue=this.Bo.getAnonymizedAttributeValue(t.localName,t.attribute,t.newValue,t.inputType)}}OS(t){t.newValue=this.Bo.getAnonymizedValue(t.newValue,t.parentLocalName,t.parentProps).anonymizedValue}}return Zt([Rt("AnonymizedTextProcessor.processEvent")],s.prototype,"processEvent",null),s})();var Df=(()=>{class s extends Us{constructor(t){super(),this.K=t}isListening(t){return vi.isDOMEvent(t)&&t.domEvent==="initialDOM"}processEvent(t){return t.domEvent==="initialDOM"&&(t.initialDOM.baseURI=this.K.anonymizeUrl(t.initialDOM.baseURI)),t}}return Zt([Rt("UrlAnonymizationProcessor.processEvent")],s.prototype,"processEvent",null),s})(),Un="textarea",Lf=(()=>{class s extends Us{isListening(t){return vi.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="characterDataChanged")}processEvent(t){switch(t.domEvent){case"initialDOM":this.MS(t);break;case"nodesAdded":this.kS(t);break;case"characterDataChanged":this.DS(t);break}return t}MS(t){Y.traverse(t.initialDOM,(e,i)=>{(this.Qd(e,i)||this.Zd(e))&&(e.data=this.ol(e.data))})}kS(t){for(let e of t.nodes)Y.traverse(e,(i,r)=>{(this.LS(i,r,t)||this.Zd(i))&&(i.data=this.ol(i.data))})}DS(t){var e;(t.parentLocalName===Un||!((e=t.targetProps)===null||e===void 0)&&e.editableNode)&&(t.newValue=this.ol(t.newValue))}ol(t){return csString.prototype.replace.call(t,/\S/g,"\u2022")}LS(t,e,i){return this.xS(t,i)||this.Qd(t,e)}xS(t,e){return t.nodeType===3&&e.targetLocalName===Un}Qd(t,e){return t.nodeType===3&&Q(e)&&e.localName===Un}Zd(t){return t.nodeType===3&&Se.isEditableNode(t)}}return Zt([Rt("AnonymizedEditableTextProcessor.processEvent")],s.prototype,"processEvent",null),s})(),xf=(()=>{class s{constructor(t){this.S=t,this.Vt={boundElement:window,type:"resize",listener:()=>this.resizeListener()},this.S=t}observe(){Pt(this.Vt),this.bc()}bc(){this.resizeListener()}disconnect(){Ot(this.Vt)}resizeListener(){let t={width:yt.windowWidth(),height:yt.windowHeight()};this.S(t)}}return tt([I("resize")],s.prototype,"resizeListener",null),s})(),Fe=(()=>{let s;return function(n){n.PORTRAIT="Portrait",n.LANDSCAPE="Landscape"}(s||(s={})),s})(),Di=(()=>{let s;return function(n){n.PORTRAIT_PRIMARY="portrait-primary",n.PORTRAIT_SECONDARY="portrait-secondary",n.LANDSCAPE_PRIMARY="landscape-primary",n.LANDSCAPE_SECONDARY="landscape-secondary"}(s||(s={})),s})(),Li=(()=>{let s;return function(n){n[n.PORTRAIT=0]="PORTRAIT",n[n.PORTRAIT_REVERSE=180]="PORTRAIT_REVERSE",n[n.LANDSCAPE=-90]="LANDSCAPE",n[n.LANDSCAPE_REVERSE=90]="LANDSCAPE_REVERSE"}(s||(s={})),s})(),Uf=(()=>{let s;return function(n){let t=null;n.isScreenOrientationApiSupported=()=>{var c;return t!=null?t:t=!!(!((c=At.screen)===null||c===void 0)&&c.orientation)},n.isDeprecatedScreenOrientationApiSupported=()=>"orientation"in At;function e(){return Fe.LANDSCAPE}function i(){var c;switch((c=At.screen.orientation)===null||c===void 0?void 0:c.type){case Di.PORTRAIT_PRIMARY:case Di.PORTRAIT_SECONDARY:return Fe.PORTRAIT;case Di.LANDSCAPE_PRIMARY:case Di.LANDSCAPE_SECONDARY:return Fe.LANDSCAPE;default:return Fe.PORTRAIT}}function r(){switch(window.orientation){case Li.PORTRAIT:case Li.PORTRAIT_REVERSE:return Fe.PORTRAIT;case Li.LANDSCAPE:case Li.LANDSCAPE_REVERSE:return Fe.LANDSCAPE;default:return Fe.PORTRAIT}}function a(){return n.isScreenOrientationApiSupported()?i():n.isDeprecatedScreenOrientationApiSupported()?r():e()}n.getCurrentOrientation=a}(s||(s={})),s})(),Vf=(()=>{class s extends te{constructor(){super(...arguments),this.al=null,this.cl=null,this.js=new xf(t=>{this.produceEvent({...t,type:"viewportResize"}),this.onScreenPotentiallyChanged()})}onScreenPotentiallyChanged(){let t=Uf.getCurrentOrientation(),{screenWidth:e,screenHeight:i}=this.US(t);if(e!==this.al||i!==this.cl){this.al=e,this.cl=i;let r={type:"screenResize",width:e,height:i};this.produceEvent(r)}}US(t){let e,i,r=yt.screenWidth(),a=yt.screenHeight();return t===Fe.PORTRAIT?(e=r,i=a):(e=Math.max(r,a),i=Math.min(r,a)),{screenWidth:e,screenHeight:i}}onStart(){this.js.observe()}onStop(){this.al=null,this.cl=null,this.js.disconnect()}}return s})();function jf(s){let n=csEventtarget.apply(s);return n&&lt(n)&&csElementshadowRoot.apply(n)&&s.composedPath?s.__csOriginalTarget||s.composedPath()[0]:n}var Ms=(()=>{class s{get selectors(){return this.He===""?null:this.He}constructor(t,e={closest:!1}){this.S=t,this.Et=e,this.He="",this.rr=new Si,this.Oo=ds(i=>{if(this.He==="")return;let r=[];for(let a of Fa(i,c=>c.addedNodes)){if(!(eu(a)||this.Et.closest&&Xi(a)))continue;let c=this.Et.closest?this.VS(a,this.He):this.findMatchingElements(a,this.He);fo(c,r)}r.length&&this.S(r,"added")},"SelectorObserver.processMutations"),this.jS=(i,r)=>{if(this.He===""||r!=="added")return;let a=this.findMatchingElements(i,this.He);a.length&&this.S(a,"added")},this.F=new ge(this.Oo,this.jS)}observe(t){this.He===""?this.F.observe():this.He+=",",this.He+=t;let e=this.findMatchingElements(document,t);for(let i of this.F.shadowRoots){let r=this.findMatchingElements(i,t);fo(r,e)}e.length&&(q(e,i=>{this.rr.add(i)}),this.S(e,"initial"))}processPendingMutations(){this.Oo(this.F.takeRecords())}disconnect(){this.F.disconnect(),this.rr.clear(),this.He=""}VS(t,e){let i=[];if(Xi(t)){if(t.parentElement){let r=nr(t.parentElement,e);r&&csArray.prototype.push.call(i,r)}return csArray.prototype.filter.call(i,r=>this.rr.has(r)===!1)}else{if(pi(t)){let r=nr(t,e);if(r)return csArray.prototype.push.call(i,r),csArray.prototype.filter.call(i,a=>this.rr.has(a)===!1)}return this.findMatchingElements(t,e)}}findMatchingElements(t,e){let i=Is(window.csquerySelectorAll[t.nodeType].call(t,e));return lt(t)&&Qt.call(t,e)&&csArray.prototype.push.call(i,t),csArray.prototype.filter.call(i,r=>this.rr.has(r)===!1)}}return tt([I()],s.prototype,"observe",null),tt([I()],s.prototype,"disconnect",null),tt([Rt("SelectorObserver.findMatchingElements")],s.prototype,"findMatchingElements",null),s})(),Hf=(()=>{class s extends te{constructor(){super(),this.tp=t=>{let e=jf(t);e&&this.ll(e,t.type)},this.ne=new Ls((t,e)=>{switch(e){case"initial":case"added":this.ep(t);break;case"removed":this.sp(t);break}}),this.V=new Ms((t,e)=>{(e==="initial"||e==="added")&&this.HS(t)})}static shouldProcessElement(t){return t.tagName==="VIDEO"&&it.isConnected(t)&&!k.isMaskedElement(t)&&!k.isMaskedElementChild(t)}static isPlaying(t){return!t.paused&&!t.ended}onStart(){this.ep(document),this.ne.observe(),this.V.observe("video")}onStop(){this.sp(document),this.ne.disconnect(),this.V.disconnect()}ll(t,...e){if(this.isStarted&&s.shouldProcessElement(t))for(let i of e){let r=st(t),a={type:"VideoEvent",videoEventType:i,nodeId:r};i==="seeked"&&(a.newTimePositionInSec=t.currentTime),or(()=>this.produceEvent(a))}}HS(t){for(let e of t)this.ll(e,"seeked"),s.isPlaying(e)&&this.ll(e,"play")}ep(t){for(let e of["play","pause","seeked"])Pt({type:e,listener:this.tp,boundElement:t})}sp(t){for(let e of["play","pause","seeked"])Ot({type:e,listener:this.tp,boundElement:t})}}return s})();function Bf(s){return s.nodeName==="SELECT"}function Nr(s){return s.nodeName==="INPUT"}function Ff(s){return s.nodeName==="TEXTAREA"||Nr(s)&&!Oc(s)&&!Nc(s)}function Oc(s){return Nr(s)&&s.type==="number"}function Nc(s){return Nr(s)&&(s.type==="checkbox"||s.type==="radio")}var $f=(()=>{class s extends te{constructor(t){super(),this.tt=t,this.ul=new Cp("low"),this.Gi=e=>this.inputHandler(e),this.Ei=[],this.BS(),this.FS(),this.V=new Ms(e=>{for(let i of e)this.dl(i)&&xt(()=>{this.pl(i,st(i))},"low")}),this.ne=new Ls((e,i)=>{switch(i){case"initial":case"added":Pt({type:"change",listener:this.Gi,boundElement:e});break;case"removed":Ot({type:"change",boundElement:e,listener:this.Gi});break}})}onStart(){Pt({type:"keyup",boundElement:document,listener:this.Gi}),Pt({type:"change",boundElement:document,listener:this.Gi}),q(this.Ei,t=>t.activate()),this.V.observe(csArray.prototype.join.call(s.$S,",")),this.ne.observe()}onStop(){Ot({type:"keyup",boundElement:document,listener:this.Gi}),Ot({type:"change",boundElement:document,listener:this.Gi}),q(this.Ei,t=>t.deactivate()),this.V.disconnect(),this.ne.disconnect(),this.ul.clear()}pl(t,e){var i,r,a;if(this.ul.has(t))return;if(this.ul.add(t),Bf(t)){let h={type:"InputEvent",inputType:"select",target:st(t),selectedIndex:t.selectedIndex,timestamp:O.now()};this.produceEvent(h);return}if(Nc(t)){let h={type:"InputEvent",inputType:"checkable",target:st(t),checked:t.checked,timestamp:O.now()};this.produceEvent(h);return}let c=Ff(t),l=Oc(t);if(c||l){let h=(i=t.value)!==null&&i!==void 0?i:"";if(!((r=this.tt)===null||r===void 0)&&r.shouldEncrypt(t)){(a=this.tt)===null||a===void 0||a.registerInputNodeToEncrypt({targetId:e,targetValue:h,date:O.now()});return}let f=l?"0":"\u2022",d={type:"InputEvent",inputType:"text",target:st(t),value:csString.prototype.replace.call(h,/\S/g,f),timestamp:O.now()};this.produceEvent(d)}}inputHandler(t){if(!this.isStarted)return;let e=St(t),i=st(e);!i||!this.dl(e)||it.isConnected(e)&&xt(()=>{this.pl(e,i)},"low")}BS(){this.trackChanges(HTMLInputElement,"checked"),this.trackChanges(HTMLInputElement,"value"),this.trackChanges(HTMLTextAreaElement,"value")}FS(){this.trackChanges(HTMLSelectElement,"selectedIndex"),this.trackChanges(HTMLSelectElement,"value"),this.trackChanges(HTMLOptionElement,"selected",!0)}trackChanges(t,e,i=!1){let r=sn(t.prototype,e,(a,c,l)=>{if(l!==c&&it.isConnected(a)){let h=i?a.parentElement:a;this.zS(h)}});r&&csArray.prototype.push.call(this.Ei,r)}dl(t){return!k.isMaskedElement(t)&&!k.isMaskedElementChild(t)&&(on(t)||mr(t)||an(t))}zS(t){if(this.isStarted&&it.isConnected(t)){let e=st(t);e&&this.dl(t)&&xt(()=>{this.pl(t,e)},"low")}}}return s.$S=["textarea","input:not([type])",'input[type="text"]','input[type="email"]','input[type="search"]','input[type="tel"]','input[type="url"]','input[type="password"]','input[type="number"]','input[type="checkbox"]','input[type="radio"]',"select"],Zt([bt()],s.prototype,"inputHandler",null),Zt([I()],s.prototype,"trackChanges",null),s})();var zf=(()=>{class s extends te{constructor(){super(),this.ms=typeof window.customElements=="object"&&typeof window.customElements.whenDefined=="function"&&typeof window.Promise=="function",this.GS=Ae("CustomElementRegistrationProducer:onElementsFound",e=>{for(let i of e)k.isMaskedElement(i)||k.isMaskedElementChild(i)||iu(i)&&this.register(csString.prototype.toLowerCase.call(i.tagName))});let t=dn(this.GS);this.Zn=new Ac(e=>t.push(e)),this.Vs=new Set}onStart(){this.ms&&this.Zn.observe()}onStop(){this.Vs.clear(),this.Zn.disconnect()}async register(t){this.Vs.has(t)||(this.Vs.add(t),await window.customElements.whenDefined(t),this.produceEvent({type:"CustomElementRegistration",tagName:csString.prototype.toLowerCase.call(t)}))}}return Zt([I()],s.prototype,"register",null),s})(),Go=(()=>{class s{static isNavigationTimingObserverSupported(){var t,e;return(((t=window.PerformanceObserver)===null||t===void 0?void 0:t.supportedEntryTypes)==null?void 0:csArray.prototype.indexOf.call((e=window.PerformanceObserver)===null||e===void 0?void 0:e.supportedEntryTypes,"navigation"))>=0}static getTimeOrigin(){return window.performance.timeOrigin}static ip(){if(this.isNavigationTimingObserverSupported())return new window.PerformanceObserver(t=>s.qS(t))}static qS(t){let i=t.getEntriesByType("navigation")[0];i&&(this.Si=i,s.qi(i))}static $n(t){this.WS(t),this.Si&&t(this.Si),this.Ne||this.YS()}static WS(t){this.Pt.add(t)}static XS(t){this.Pt.delete(t)}static YS(){if(this.or||(this.or=this.ip()),!this.or){this.Si||(this.Si={requestStart:window.performance.timing.requestStart,domInteractive:window.performance.timing.domInteractive}),this.qi(this.Si);return}this.or.observe({type:"navigation",buffered:!0}),this.Ne=!0}static qi(t){this.Pt.forEach(e=>e(t))}static Gn(t){this.XS(t),this.Pt.size===0&&this.er()}static er(){var t;this.Ne&&((t=this.or)===null||t===void 0||t.disconnect(),this.Ne=!1,this.Si=null,this.or=this.ip())}constructor(t){this.S=t}observe(){s.$n(this.S)}disconnect(){s.Gn(this.S)}}return s.Ne=!1,s.Pt=new Set,s.Si=null,s})(),Gf=(()=>{class s extends te{constructor(){super(...arguments),this.Fo=null,this.np=new Go(t=>{if(this.Fo)return;let e=this.KS(t);e&&(this.Fo=e,this.produceEvent(e))})}onStart(){if(this.Fo){this.produceEvent(this.Fo);return}this.np.observe()}onStop(){this.np.disconnect()}KS(t){let e=Go.getTimeOrigin();return{type:"PerformanceTiming",timings:{timeOrigin:e,requestStart:Math.floor(e+t.requestStart),domInteractive:Math.floor(e+t.domInteractive)},timestamp:O.now()}}}return s})(),vt=(()=>{let s;return function(n){n[n.TAP=0]="TAP",n[n.LONG_PRESS=1]="LONG_PRESS",n[n.DRAG=2]="DRAG",n[n.FLICK=3]="FLICK",n[n.PINCH_IN=4]="PINCH_IN",n[n.PINCH_OUT=5]="PINCH_OUT"}(s||(s={})),s})(),xi=(()=>{let s;return function(n){n[n.UP=1]="UP",n[n.DOWN=2]="DOWN",n[n.LEFT=3]="LEFT",n[n.RIGHT=4]="RIGHT"}(s||(s={})),s})(),qf=(()=>{class s{compute(t,e){let i=this.Hs(e.x)-this.Hs(t.x),r=this.Hs(e.y)-this.Hs(t.y),a=e.time-t.time;return{duration:a,distance:this.rp(i,r),direction:this.JS(i,r),velocity:this.QS(i,r,a)}}computePinchMetrics(t,e){let i=this.Hs(e.x)-this.Hs(t.x),r=this.Hs(e.y)-this.Hs(t.y);return{duration:e.time-t.time,distance:this.rp(i,r)}}getScale(t,e){return Math.abs(e/t-1)}Hs(t){return t/window.devicePixelRatio}rp(t,e){return Math.round(Math.sqrt(t*t+e*e))}QS(t,e,i){let r=i/1e3,a=t/r,c=e/r;return Math.round(Math.abs(a)+Math.abs(c))}JS(t,e){return Math.abs(t)>Math.abs(e)?t>0?xi.RIGHT:xi.LEFT:e>0?xi.DOWN:xi.UP}}return s})(),Mc=typeof performance!="undefined"&&!!performance.now,qo=Mc?()=>performance.now():csDate.now,Wf=(()=>{var s;return Mc?(s=performance.timing)===null||s===void 0?void 0:s.navigationStart:0})(),Ui={now(){return Math.round(qo()+Wf)},elapsed(){return qo()}};function Wo(s,n=0){let t=Math.pow(10,n);return Math.round(s*t)/t}var Yf=1e3,Xf=100,Kf=.1,hr=(()=>{class s{constructor(){this.jt={},this.gl=()=>{},this.$o=new qf,this.be()}static isGestureDetectionSupported(){return typeof devicePixelRatio!="undefined"}onGesture(t){this.gl=t}isValidTouchEvent(t){return"touches"in t&&"changedTouches"in t}processActionDown(t){if(!this.ZS(t))return;this.sv(t)&&this.be();let e={x:t.touches[0].clientX,y:t.touches[0].clientY,time:Ui.now()};if(t.touches.length===1)this.jt.startPinchTime=e.time,this.jt.firstTouch=e;else if(t.touches.length===2&&(this.jt.secondTouch={x:t.touches[1].clientX,y:t.touches[1].clientY,time:Ui.now()},this.jt.firstTouch&&this.jt.secondTouch)){let i=this.$o.computePinchMetrics(this.jt.firstTouch,this.jt.secondTouch);this.Wi=i.distance}csArray.prototype.push.call(this.ar,e),this.zo=St(t)}processActionMove(){this.ml=!0}processActionUp(t){if(this.iv(t)){if(csArray.prototype.push.call(this.ar,{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:Ui.now()}),this.nv(t)&&this.jt.startPinchTime){let e={x:t.touches[0].clientX,y:t.touches[0].clientY,time:this.jt.startPinchTime},i={x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:Ui.now()};this.jt.firstTouch&&(this.jt.firstTouch=e,this.jt.secondTouch=i),this.rv(t)}this.Wi||this.ov()&&this.av(t)}}be(){this.ar=[],this.zo=null,this.ml=!1,this.Wi=null,this.cr=!0}av(t){let e=this.$o.compute(this.ar[0],this.ar[1]);this.cr=t.isTrusted;let i=this.ml?this.cv(e):this.lv(e);if(this.hv(i.type,t.changedTouches)){let r=t.changedTouches[0];i.pageX=Wo(r.pageX,1),i.pageY=Wo(r.pageY,1)}this.gl(i,t)}rv(t){if(!(this.jt.firstTouch&&this.jt.secondTouch))return;let e=this.$o.computePinchMetrics(this.jt.firstTouch,this.jt.secondTouch);this.cr=t.isTrusted;let i=this.uv(e);i&&this.gl(i,t)}uv(t){return!this.Wi||this.$o.getScale(this.Wi,t.distance)<Kf?void 0:{type:this.Wi>t.distance?vt.PINCH_IN:vt.PINCH_OUT,target:this.zo,distance:t.distance,isTrusted:this.cr}}cv(t){return{type:t.velocity<Xf?vt.DRAG:vt.FLICK,target:this.zo,velocity:t.velocity,distance:t.distance,direction:t.direction,isTrusted:this.cr}}lv(t){return{type:t.duration<Yf?vt.TAP:vt.LONG_PRESS,target:this.zo,isTrusted:this.cr}}hv(t,e){return t===vt.TAP&&e&&e.length===1}sv(t){return t.touches.length===1}ov(){return this.ar.length===2}ZS(t){return t.touches.length>0}iv(t){return t.changedTouches.length>0}nv(t){return this.ml&&!!this.Wi&&t.changedTouches.length===1&&t.touches.length===1}}return s})(),Jf="touchstart",Qf="touchmove",Zf="touchend",tg=(()=>{class s{constructor(t){this.S=t}observe(){s.op&&s.yl(this.S)}disconnect(){s.op&&s.El(this.S)}static pv(t,e){csArray.prototype.forEach.call(ps(s.Pt),i=>i(t,e))}static yl(t){s.Pt.has(t)||(s.Pt.add(t),s.Pt.size===1&&(s.lr.onGesture(s.pv),csArray.prototype.forEach.call(s.Ls,e=>Pt(e))))}static El(t){s.Pt.delete(t),s.Pt.size===0&&csArray.prototype.forEach.call(s.Ls,e=>Ot(e))}static Sl(t){if(s.lr.isValidTouchEvent(t))switch(t.type){case"touchstart":s.lr.processActionDown(t);break;case"touchmove":s.lr.processActionMove();break;case"touchend":s.lr.processActionUp(t);break}}}return s.Ls=[{boundElement:At.document,type:Jf,listener:n=>s.Sl(n)},{boundElement:At.document,type:Qf,listener:n=>s.Sl(n)},{boundElement:At.document,type:Zf,listener:n=>s.Sl(n)}],s.op=hr.isGestureDetectionSupported(),s.Pt=new Set,s.lr=new hr,s})(),eg=(()=>{class s extends te{constructor(){super(),this.ur=new tg(this.vl.bind(this))}onStart(){this.ur.observe()}onStop(){this.ur.disconnect()}vl(t){let e=this.fv(t);e&&this.produceEvent(e)}fv(t){if(!this.gv(t))return null;let e=rp(t.target);return e?{type:"Gesture",targetId:e,data:{type:t.type,direction:t.direction,distance:t.distance,velocity:t.velocity,pageX:t.pageX,pageY:t.pageY}}:null}gv(t){return t.target!==null&&!(lt(t.target)&&k.isMaskedElementChild(t.target))}}return s})(),kc=(()=>{class s{constructor(t){this.S=t,this.Bs=!1,this.Vt={boundElement:At,type:"error",listener:e=>this.mv(e)}}observe(){Pt(this.Vt,this.Bs)}disconnect(){Ot(this.Vt,this.Bs)}mv(t){this.S(t)}}return s})(),sg=(()=>{class s extends te{constructor(){super(...arguments),this.ap=new kc(t=>this.Go(t))}Go({message:t,filename:e,lineno:i,colno:r}){t=t!=null?t:"[NO ERROR MESSAGE]",e=!e||zt(e)?"":e,this.produceEvent({type:"JSError",message:t,filename:e,lineno:i,colno:r})}onStart(){this.ap.observe()}onStop(){this.ap.disconnect()}}return s})(),ig=(()=>{class s extends Us{constructor(t){super(),this.yv=t,this._l=1024,this.wl=150}isListening(t){return t.type==="JSError"}processEvent(t){return t.message=ot.truncate(t.message,this._l,ot.ELLIPSIS),t.filename=ot.truncate(t.filename,this.wl,ot.ELLIPSIS),this.yv(t)}}return s})();var ws=[],ur=!1,Dc=ds(rg,"executeTasks");function ng(s){if(csArray.prototype.push.call(ws,s),!ur){for(let n=0;n<3;n++)csSetTimeout(Dc);ur=!0}}function rg(){let s=csDate.now();for(let n=0;n<ws.length;n++)if(ws[n](),csDate.now()-s>=35){ws=csArray.prototype.slice.call(ws,n+1),csSetTimeout(Dc);return}ws=[],ur=!1}var He=(()=>{let s;return function(n){n[n.Started=0]="Started",n[n.Stopped=1]="Stopped",n[n.Processing=2]="Processing",n[n.Completed=3]="Completed"}(s||(s={})),s})(),Lc=(()=>{class s{constructor(){this.At=new Ds,this.wt=He.Stopped,this.S=null,this.lp=t=>{this.wt===He.Stopped||!t||(this.S(t),this.hp())}}get queueLength(){return this.At.length}start(t){if(this.S)throw new Error("callback already set");this.wt=He.Started,this.S=t}push(t){this.At.push(t),this.Rl()}stop(){this.S=null,this.wt=He.Stopped,this.At.clear()}static pipe(t,e){let i=t,r=new csArray;for(let c of e){let l=new s;l.start(h=>{c.pushEvent(h)}),csArray.prototype.push.call(r,l),q(i,h=>h.subscribe(f=>l.push(f))),i=[c]}let a=new og(r);return q(i,c=>c.subscribe(l=>a.push(l))),a}up(){return this.wt===He.Stopped}Ke(){return this.wt===He.Processing}hp(){if(!this.up()){if(this.At.isEmpty){this.wt=He.Completed;return}this.wt=He.Processing,ng(()=>{let t=this.At.pop();t instanceof Pr?t.complete(this.lp):this.lp(t)})}}Rl(){this.up()||this.Ke()||this.hp()}}return s})(),og=(()=>{class s extends Lc{constructor(t){super(),this.dp=t}get queueLength(){return csArray.prototype.reduce.call(this.dp,(t,e)=>t+e.queueLength,0)}stop(){super.stop(),q(this.dp,t=>t.stop())}}return s})(),ag=(()=>{class s{constructor(t,e=[]){this.producers=t,this.processors=e,this.B=!1,this.Pt=[]}get pendingEvents(){var t,e;return(e=(t=this.At)===null||t===void 0?void 0:t.queueLength)!==null&&e!==void 0?e:0}start(){if(this.B)throw new Error("Recording is already started.");let t=this.Pt;this.At=Lc.pipe(this.producers,this.processors),this.At.start(e=>csArray.prototype.forEach.call(t,i=>i(e))),q(this.producers,e=>e.start()),q(this.processors,e=>e.start()),this.B=!0}stop(){this.At.stop(),this.Pt.length=0;for(let t of this.producers)t.stop();for(let t of this.processors)t.stop();this.B=!1,this.Pt=[]}subscribe(t){if(this.B)throw new Error("Recording is already started.");return csArray.prototype.push.call(this.Pt,t),()=>this.Pt=csArray.prototype.filter.call(this.Pt,e=>e!==t)}}return s})(),cg=(()=>{class s extends te{constructor(t){super(),this.Oe=t}subscribe(t){return super.subscribe(t)}onStart(){q(this.Oe,t=>{t.onEvent(e=>{var i;return this.Bi(e,(i=t.eventType)!==null&&i!==void 0?i:"browser")})}),q(this.Oe,t=>{var e;(e=t.start)===null||e===void 0||e.call(t)})}onStop(){q(this.Oe,t=>{var e;return(e=t.stop)===null||e===void 0?void 0:e.call(t)})}Bi(t,e){this.produceEvent({timestamp:O.now(),type:"Legacy",originalEvent:t,eventType:e})}}return s})();function lg(s,n,t){let{timestamp:e}=s;switch(s.domEvent){case"initialDOM":{let{initialDOM:i}=s,r={type:D.INITIAL_DOM,date:e,args:[i]};t.emitInitialDomDone(r);break}case"nodesAdded":{csArray.prototype.forEach.call(s.nodes,i=>{n({type:D.MUTATION_INSERT,date:e,args:[s.target,s.nextSibling,i]})});break}case"nodesMoved":{for(let i of s.nodesIds)n({type:D.MUTATION_MOVE,date:e,args:[i,s.nextSibling,s.target]});break}case"nodesRemoved":{csArray.prototype.forEach.call(s.nodesIds,i=>{n({type:D.MUTATION_REMOVE,date:e,args:[i]})});break}case"attributeChanged":{let{target:i,namespace:r,attribute:a,newValue:c}=s;n({type:D.MUTATION_ATTRIBUTE,date:e,args:[i,r,a,c]});break}case"characterDataChanged":{let{target:i,newValue:r}=s;n({type:D.MUTATION_CHARACTER_DATA,date:e,args:[i,r]});break}case"cssRuleInserted":{let{target:i,rule:r,index:a}=s,c=Q(a)?[i,r,a]:[i,r];n({type:D.STYLESHEET_RULE_INSERT,date:e,args:c});break}case"cssRuleDeleted":{let{target:i,index:r}=s;n({type:D.STYLESHEET_RULE_DELETE,date:e,args:[i,r]});break}case"cssRuleUpdated":{let{target:i,rule:r,index:a}=s;n({type:D.STYLESHEET_RULE_UPDATE,date:e,args:[i,r,a]});break}case"cssStyleSheetDisabled":{let{target:i,disabled:r}=s;n({type:D.STYLESHEET_DISABLED,date:e,args:[i,r]});break}case"shadowRootAttached":{let{target:i,shadowRoot:r}=s;n({type:D.ATTACH_SHADOW,date:e,args:[i,r]});break}case"adoptedStyleSheetRegistered":{let{sheetId:i,cssRules:r,disabled:a}=s;n({type:D.REGISTER_ADOPTED_STYLE_SHEET,date:e,args:[i,{cssRules:r,disabled:a}]});break}case"adoptedStyleSheetsSet":{let{target:i,sheetsIds:r}=s;n({type:D.SET_ADOPTED_STYLE_SHEETS,date:e,args:[i,r]});break}case"adoptedStyleSheetRuleInserted":{let{sheetId:i,rule:r,index:a}=s,c=Q(a)?[i,r,a]:[i,r];n({type:D.ADOPTED_STYLESHEET_RULE_INSERT,date:e,args:c});break}case"adoptedStyleSheetRuleDeleted":{let{sheetId:i,index:r}=s;n({type:D.ADOPTED_STYLESHEET_RULE_DELETE,date:e,args:[i,r]});break}case"adoptedStyleSheetRuleUpdated":{let{sheetId:i,rule:r,index:a}=s,c=[i,r,a];n({type:D.ADOPTED_STYLESHEET_RULE_UPDATE,date:e,args:c});break}case"adoptedStyleSheetDisabled":{let{sheetId:i,disabled:r}=s,a=[i,r];n({type:D.ADOPTED_STYLESHEET_DISABLED,date:e,args:a});break}default:V.error("translateDOMEvent: DOMEvent not supported");break}}function hg(s){let n=ug(s.data);return{type:D.GESTURE_RECOGNITION,args:[s.targetId,n],date:s.timestamp}}function ug(s){let n={type:dg(s.type)};for(let t in s){let e=s[t];e!==void 0&&t!=="type"&&(n[t]=e)}return n}function dg(s){switch(s){case vt.DRAG:case vt.FLICK:return Ws.SWIPE;case vt.LONG_PRESS:return Ws.LONG_PRESS;case vt.TAP:return Ws.TAP;case vt.PINCH_IN:return Ws.PINCH_IN;case vt.PINCH_OUT:return Ws.PINCH_OUT}}function pg(s,n){let t=[],e=!1;return{push(i){if(csArray.prototype.push.call(t,i),t.length===n.batchSize){this.flush();return}n.autoFlushDelay&&n.autoFlushDelay>0&&!e&&(e=!0,csSetTimeout(()=>{e=!1,t.length>0&&this.flush()},n.autoFlushDelay))},flush(){if(!t.length)return;let i=t;t=[],s(i)}}}var fg=20;function gg(s){return pg(n=>{let t={visibleInViewPort:n},e={type:D.TEXT_VISIBILITY,date:O.now(),args:[t]};s(e)},{batchSize:fg,autoFlushDelay:1e3})}function mg(s){return{type:D.PERFORMANCE_TIMINGS,args:[{performanceTiming:Ln.REQUEST_START,timestamp:s.timings.requestStart},{performanceTiming:Ln.DOM_INTERACTIVE,timestamp:s.timings.domInteractive},{performanceTiming:Ln.TIME_ORIGIN,timestamp:s.timings.timeOrigin}],date:s.timestamp}}function yg(s){switch(s.inputType){case"text":return{type:D.INPUT_TEXT,args:[s.target,s.value],date:s.timestamp};case"select":return{type:D.INPUT_SELECT,args:[s.target,s.selectedIndex],date:s.timestamp};case"checkable":return{type:D.INPUT_CHECKABLE,args:[s.target,s.checked],date:s.timestamp}}}var Eg=500,Vn=0;function Sg(){return{processEvent(s,n){if(s.originalEvent.type===D.PERFORMANCE_RESOURCE_TIMING)return Vn>=Eg?null:(Vn+=1,n({...s.originalEvent,date:s.timestamp}));n(s.originalEvent)},reset(){Vn=0}}}function vg(s){switch(s.videoEventType){case"play":return{type:D.VIDEO_PLAY,args:[s.nodeId],date:s.timestamp};case"pause":return{type:D.VIDEO_PAUSE,args:[s.nodeId],date:s.timestamp};case"seeked":{let n=s;return{type:D.VIDEO_SEEK,args:[n.nodeId,n.newTimePositionInSec],date:s.timestamp}}default:return null}}var _g=(()=>{class s{get pendingEvents(){return this.qo.pendingEvents}constructor(t,e,i,r,a){this.qo=t,this.E=e,this.Ae=i,this.We=r,this.Ye=a,this.Zt=()=>{},this.Wo=()=>{},this.pp=gg(c=>this.Zt(c))}start(){var t,e;this.fp=Sg(),this.qo.subscribe(i=>{var r,a,c,l,h,f;let d=i,{timestamp:y}=d;switch(d.type){case"Legacy":{let E=d.eventType==="user"?(r=this.Wo)!==null&&r!==void 0?r:()=>{}:this.Zt;this.fp.processEvent(d,E)}break;case"CustomElementRegistration":{this.Zt({type:D.CUSTOM_ELEMENT_REGISTRATION,date:y,args:[d.tagName]});break}case"DomEvent":{lg(d,this.Zt,this.E);break}case"InputEvent":{let E=yg(d);(a=this.Wo)===null||a===void 0||a.call(this,E);break}case"encryptedCharacterDataChanged":{let{target:E,rawData:v,encryptedData:C,encryptionMetadata:P}=d;this.Zt({type:D.MUTATION_ENCRYPTED_CHARACTER_DATA,date:y,args:[E,v,C,P]});break}case"StaticResource":{let{url:E}=d;this.Zt({type:D.STATIC_RESOURCE_URL,date:y,args:[E]});break}case"ResizeMaskedElement":{let{target:E,width:v,height:C}=d;this.Zt({type:D.MUTATION_ATTRIBUTE,date:y,args:[E,"","style",`width:${v}px !important;height:${C}px !important;`]});break}case"Gesture":{let E=hg(i);(c=this.Wo)===null||c===void 0||c.call(this,E);break}case"TextVisibility":{this.pp.push(d.text);break}case"StaticResourceManagerEvent":{(l=this.Ae)===null||l===void 0||l.processEvent(d);break}case"screenResize":{let{width:E,height:v}=d,C={type:D.SCREEN_RESIZE,date:y,args:[E,v]};this.Zt(C);break}case"viewportResize":{let{width:E,height:v}=d,C={type:D.RESIZE,date:y,args:[E,v]};this.Zt(C);break}case"PerformanceTiming":{this.Zt(mg(d));break}case"CustomError":{let E=(h=this.Ye)===null||h===void 0?void 0:h.translate(d);E&&this.Zt(E);break}case"JSError":{let E=(f=this.We)===null||f===void 0?void 0:f.translate(d);E&&this.Zt(E);break}case"VideoEvent":{let E=vg(d);E&&this.Zt(E);break}case"warning":{V.warn(d.message);break}default:V.error(`WebRecorderEventTranslator: Event not supported (${d.type})`);break}}),this.E.emitInitialDomStart(),(t=this.We)===null||t===void 0||t.start(),(e=this.Ye)===null||e===void 0||e.start(),this.qo.start()}stop(){var t,e,i;this.reset(),this.flush(),this.qo.stop(),(t=this.Ae)===null||t===void 0||t.flushEvents(),(e=this.We)===null||e===void 0||e.stop(),(i=this.Ye)===null||i===void 0||i.stop()}flush(){this.pp.flush()}onEvent(t,e){var i;this.Zt=t,this.Wo=e,(i=this.Ae)===null||i===void 0||i.onEvent(r=>this.Zt(r))}reset(){this.fp.reset()}}return s})(),wg=(()=>{class s{constructor(t=100){this._v=t,this.Yo={},this.pr=null,this.Vc="original-resource-name"}onEvent(t){this.wv=t}processEvent(t){this.bv(t.resourceId,t.resource.hash,t.originalResourceName),this.Av(t)}flushEvents(){this.pr&&csClearTimeout(this.pr),this.gp()}onSendStaticResource(t){this.Av=t}gp(){if(!Object.keys(this.Yo).length)return;let t={type:D.RESOURCE_HASHES,date:O.now(),args:[this.Yo]};this.pr=null,this.Yo={},this.wv(t)}bv(t,e,i){let r=e;i&&(r+=`?${this.Vc}=${i}`),this.Yo[t]=r,!this.pr&&(this.pr=window.csSetTimeout(()=>this.gp(),this._v))}}return s})(),bg=(()=>{class s{constructor(t,e,i){this.E=t,this.w=e,this.Tv=i,this.fr=kt.ETR_DISABLED,this.Xo=kt.ETR_PENDING,this.Ko=!0}getEtrStatus(t){t===void 0&&(t=this.w.getSession());let e=t==null?void 0:t.etrStatus;return this.Cl()&&e===kt.ETR_SAVED_SESSION?e:this.fr}onEventTriggerRecording(t,e){switch(e){case We.ETR_PAGE:this.mp(kt.ETR_SAVED_PAGE);break;case We.ETR_LEGACY:case We.ETR_SESSION:this.mp(kt.ETR_SAVED_SESSION);break}}handleCollectStateChange(t){this.Ko=!1,t?this.gr(this.Xo):this.gr(kt.ETR_DISABLED)}handleArtificialPageview(){this.Tv?(this.Ko=!0,this.gr(kt.ETR_DISABLED)):this.Cl()&&this.gr(kt.ETR_PENDING)}handleSessionRenewal(){this.Ko=!0,this.gr(kt.ETR_DISABLED)}gr(t){this.fr=t,this.Xo=kt.ETR_PENDING,this.yp(t),this.E.emitRecordingContextChange()}mp(t){this.Ko?Number(t)>Number(this.Xo)&&(this.Xo=t):this.Cl()&&Number(t)>Number(this.fr)&&(this.fr=t,this.yp(t),this.E.emitRecordingContextChange())}yp(t){let e=this.w.getSession();e!==null&&e.etrStatus===kt.ETR_NOT_SAVED_SESSION&&t===kt.ETR_SAVED_SESSION&&(e.etrStatus=t,this.w.setSession(e))}Cl(){return this.fr!==kt.ETR_DISABLED}}return s})();function dr(s,n){let t,e,i,r,a=null,c=h=>{let f=O.elapsed();if(!h&&a!==null){let y=n-(f-a);if(y>0){e=window.csSetTimeout(c,y);return}}let d=f-i;e=null,a=null,i=null,r=s(d,...t)},l=(...h)=>{if(t=[...h],i){a=O.elapsed();return}return i=O.elapsed(),e=window.csSetTimeout(c,n),r};return l.flushPending=()=>{e&&(window.csClearTimeout(e),c(!0))},l.cancel=()=>{a=null,i=null,e&&(window.csClearTimeout(e),e=null)},l}var Ag=(()=>{let s;return function(n){n[n.NOT_EXIST=2]="NOT_EXIST"}(s||(s={})),s})(),Tg=8*1024*1024,Rg=(()=>{class s extends Mt{constructor(t,e,i){super(),this.Ae=t,this.Ep=e,this.J=i,this.Il={},this.Sp=new Set,this.Ke=!1}initState(){Xa()&&(this.Me=this.J.getRequestParameters(),this.Rv=`${this.Ep}/exist?${li.toQuery(this.Me)}`,this.Cv=`${this.Ep}/putTag?${li.toQuery(this.Me)}`,this.vp=dr(async()=>{if(this.Ke){this.vp();return}this.Ke=!0;try{await this.Iv()}finally{this.Ke=!1}},300),this.Ae.onSendStaticResource(t=>{this._p(t)}))}onStart(){}onStop(){}onIframeStaticResource(t){this._p(t)}_p(t){this.wp(t.resource.hash,t.resource.data),t.nestedResources&&t.nestedResources.length>0&&csArray.prototype.forEach.call(t.nestedResources,e=>{this.wp(e.hash,e.data)})}wp(t,e){this.Sp.has(t)||(this.Sp.add(t),this.Il[t]=e,this.vp())}async Iv(){let t=this.Il;this.Il={};let e=await this.Pv(t);if(!e.length)return;let i=this.Ov(e);await Promise.all(csArray.prototype.map.call(i,r=>window.fetch(this.Cv,{method:"POST",body:r})))}async Nv(t){try{let e=Object.keys(t);if(!e.length)return[];let i={projectId:this.Me.pid,filter:Ag.NOT_EXIST,hashes:e,touch:!0};return await(await window.fetch(this.Rv,{method:"POST",body:csJSON.stringify(i)})).json()}catch{return[]}}async Pv(t){let e=[],i=await this.Nv(t);return csArray.prototype.forEach.call(i,r=>{let a=t[r];a?csArray.prototype.push.call(e,{hash:r,data:a}):V.warn("SRM: received unknown hash: "+r)}),e}Ov(t){let e=0,i=[new FormData];for(let r of t){let{data:a,hash:c}=r,l=i.length-1;if(e=e+a.size,e<Tg)i[l].append("",a,c);else{let h=new FormData;h.append("",a,c),e=a.size,csArray.prototype.push.call(i,h)}}return i}}return s})(),Cg=(()=>{class s{constructor(t){this.Jo=t,this.mr=20,this.vi=0,this.N=!1}translate(t){if(this.vi>=this.mr)return this.Jo.stop(),null;this.vi+=1;let{filename:e,message:i,lineno:r,colno:a,timestamp:c}=t;return{type:D.JAVASCRIPT_ERROR,date:c,args:[{errorType:"jsError",message:i,filename:e,lineno:r,colno:a}]}}start(){this.N||(this.vi=0,this.N=!0)}stop(){this.N=!1}}return s})(),Ig=(()=>{class s{constructor(){this.mr=20,this._i=0,this.N=!1}translate(t){if(this._i>=this.mr)return null;this._i+=1;let{message:e,attributes:i,timestamp:r}=t;return{type:D.CUSTOM_ERROR,date:r,args:[{errorType:"customError",message:e,attributes:i}]}}start(){this.N||(this._i=0,this.N=!0)}stop(){this.N=!1}}return s})(),Pg="csPersisted",Yo="v2/recording",Og=["isRecording"],Ng=["replay:resourceManager:enableForOnlineResource:nextPageviewOnly","cssrm:onlineAssets:activateForNextPageview"],Mg=["replay:resourceManager:getStatus","cssrm:getStatus"],kg=(()=>{class s{constructor(t,e,i,r,a,c,l,h,f,d,y,E,v,C,P,A,w,x,b,L,H,W){this.Fs=t,this.w=e,this.h=i,this.Me=r,this.f=a,this.I=c,this.X=l,this.Ht=h,this.ae=f,this.at=d,this.ce=y,this.lt=E,this.E=v,this.$s=C,this.bp=P,this.te=A,this.St=w,this.K=x,this.Fi=b,this.ot=L,this.pC=H,this.tt=W}init(){var t,e;let i=[],r=[];csArray.prototype.push.call(r,new pf),this.yr=new kf(this.ot.shouldUseAnonymization(),this.h.whitelistedAttributes,this.I,this.h.anonymizeDigits),this.wi();let a=new df(Pg);this.Mv(a);let c=new dp;this.j=new up;let l=new lf;csArray.prototype.push.call(i,l),this.h.useStaticResourceManager&&cr.isSupported()&&(this.Ut=new cr,this.Ae=new wg,this.Ap=new Rg(this.Ae,this.h.getStaticResourceManagerUri(),this.Me),this.bp.addListener(this.Ap),csArray.prototype.push.call(r,this.Ut));let h=new hi(c,this.Me,{getRequestParameters:()=>({let:this.recordingService.getRecordingLastEventTimestamp()})},{getRequestParameters:()=>({rst:this.recordingService.getRecordingStartTimestamp()})},{getRequestParameters:()=>({rt:csArray.prototype.join.call(this.w.getCollectStates(),",")})}),f=new Rc(`${this.h.getRecordingUri()}/${Yo}`);csArray.prototype.push.call(r,this.yr),csArray.prototype.push.call(r,new Df(this.K)),csArray.prototype.push.call(r,new Lf),this.bi=new ap,this.bi.init(),csArray.prototype.push.call(i,this.bi),this.Ct=new sf(a,f,this.U),csArray.prototype.push.call(i,new nf(window.location,this.I));let d=new Qp,y=new Vf,E=new Hf,v=new $f(this.tt),C=new zf,P=[y,this.Ht,d,new cg(csArray.prototype.filter.call(i,b=>b)),C,new Gf,new eg,v,E];this.h.textVisibilityEnabled&&Gi.isSupported()&&(this.Er=new Mf,csArray.prototype.push.call(P,this.Er)),this.h.jsErrorsEnabled&&(this.Jo=new sg,this.kv=new ig(b=>this.ae.anonymize(b)),this.We=new Cg(this.Jo),csArray.prototype.push.call(P,this.Jo),csArray.prototype.push.call(r,this.kv)),!((e=this.h.customErrors)===null||e===void 0)&&e.enabled&&(this.Ye=new Ig);let A=new ag(P,r),w=new _g(A,this.E,this.Ae,this.We,this.Ye),x=[d,y,E,v,C];this.recordingService=new ef(this.h,this.j,h,c,this.X,this.w,this.ae,this.at,this.ce,this.tt,this.U,this.Ct,f,w,i,x,this.Ut,this.Fi,this.We,this.Ye),this.$s.addListener(this.recordingService),this.bp.addListener(this.recordingService),this.recordingService.init(),this.f.register(Og,()=>this.w.isReplayRecorded()&&!this.te.isUrlExcludedForSessionReplay()),this.f.register(Ng,()=>{this.recordingService.activateOnlineAssetsOnNextPageview(),this.E.emitRecordingContextChange()}),this.f.register(Mg,()=>this.recordingService.getStaticResourceManagerStatus()),this.Ai=new bg(this.E,this.w,this.h.malkaUrlEnabled),this.$s.addListener(this.Ai),this.Fs.enableRecordingContext(this.recordingService,this.w,this.Ai),this.Pl()}onAfterNaturalPageView(){var t;this.te.isUrlExcludedForSessionReplay()?this.recordingService.resetOnlineAssetsOnPageview():this.recordingService.updateOnlineAssetsOnPageview(),(t=this.Ap)===null||t===void 0||t.initState()}onStartTracking(){this.Ct.recover(),this.wi(),this.w.isReplayRecorded()&&!this.te.isUrlExcludedForSessionReplay()&&(this.w.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.Ol())}onArtificialPageViewEnd(){this.w.isReplayRecorded()&&!this.te.isUrlExcludedForSessionReplay()&&!this.w.isTemporarilyRecorded()&&this.Ct.sendLastMessageBeacon(),this.recordingService.clearStates()}onBeforeArtificialPageView(){this.Ai.handleArtificialPageview()}onAfterArtificialPageView(){this.wi(),this.w.isReplayRecorded()&&!this.te.isUrlExcludedForSessionReplay()?(this.w.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.recordingService.updateOnlineAssetsOnPageview(),this.Dv()):(this.recordingService.resetOnlineAssetsOnPageview(),this.Yi())}onBeforeSessionRenewal(){this.Ai.handleSessionRenewal(),this.recordingService.clearStates(),this.Yi()}onOptout(){this.Yi(),this.recordingService.onOptOut()}onReplayUnanonymizationConsentGranted(){this.wi(),this.recordingService.triggerUnanonymizationConsentGranted(),this.E.emitRecordingContextChange()}onReplayUnanonymizationConsentWithdrawn(){this.wi(),this.recordingService.triggerUnanonymizationConsentWithdrawn(),this.E.emitRecordingContextChange()}onCollectStateChange(t,e){if(t===N.QUOTA_REACHED||t===N.ANALYTICS_ONLY&&e===Lt.ETR_OFF)this.recordingService.clearEvents(),this.Yi();else{this.U.setQueryParams({rt:csArray.prototype.join.call(this.w.getCollectStates(),",")}),this.recordingService.allowSendingEventsFromQuotaService(),this.recordingService.pushEvents();let i=t===N.ANALYTICS_ONLY&&e===Lt.ETR_ON;this.Ai.handleCollectStateChange(i)}}onInitialDomStart(){this.recordingService.blockSendingEventsFromSerialization(),this.Ct.blockSendingLastMessage()}onInitialDomDone(t){this.recordingService.allowSendingEventsFromSerialization(),this.recordingService.addInitialDom(t),this.Ct.allowSendingLastMessage(),this.bi.start(),this.recordingService.pushEvents()}onAfterReplayRecordingConsentGranted(){this.w.isReplayRecorded()&&!this.te.isUrlExcludedForSessionReplay()&&(this.w.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.Ol(),this.recordingService.triggerRecordingForSessionGranted())}onAfterReplayRecordingConsentWithdrawn(){this.recordingService.isRecording()&&(this.recordingService.triggerRecordingForSessionWithdrawn(),this.recordingService.clearStates(),this.Yi())}Pl(){var t,e,i,r;if(!((e=(t=this.h.experimental.sessionReplay)===null||t===void 0?void 0:t.shadowRoot)===null||e===void 0)&&e.filterByHostSelector){let a=(r=(i=this.h.experimental.sessionReplay)===null||i===void 0?void 0:i.shadowRoot)===null||r===void 0?void 0:r.filterByHostSelector;q(a,c=>{ti(c)&&ge.setShadowRootFilter(l=>{try{return Qt.call(l.host,c)}catch{return!1}})})}}Ol(){this.recordingService.start(),this.Ct.start(),this.E.emitRecordingContextChange()}Yi(){np(),this.recordingService.stop(),this.Ct.stop(),this.E.emitRecordingContextChange()}Dv(){this.Yi(),this.Ol()}Mv(t){let e="byteArray";this.U=this.St.create(`${this.h.getRecordingUri()}/${Yo}`,!0,e,t,["rt","v","pid","pn","sn","uu"])}wi(){var t;let e=this.ot.shouldUseAnonymization();this.yr.setAnonymization(e),(t=this.Er)===null||t===void 0||t.setAnonymization(e)}}return j([Rt("Recording.onStartTracking")],s.prototype,"onStartTracking",null),j([Rt("onInitialDomDone")],s.prototype,"onInitialDomDone",null),s})(),Vi=(()=>{let s;return function(n){n[n.NOT_NEEDED=1]="NOT_NEEDED",n[n.NOT_EXPRESSED=2]="NOT_EXPRESSED",n[n.WITHDRAWN=3]="WITHDRAWN",n[n.GRANTED=4]="GRANTED"}(s||(s={})),s})(),qe=(()=>{let s;return function(n){function t(r){return r.replayConsentRequiredForSession}n.isReplayConsentNeeded=t;function e(r){return r.collectState===N.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED||r.collectState===N.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}n.isRecordingBlockedByConsent=e;function i(r){return r.collectState===N.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}n.isRecordingWithDrawn=i}(s||(s={})),s})(),Dg=(()=>{class s{constructor(t,e,i,r){this.R=t,this.w=e,this.h=i,this.Je=r,this.Tp=!1}isNaturalPageViewSent(){return this.Tp}setNaturalPageViewSent(t){this.Tp=t}getTrackingContext(){let t=this.w.getSession();if(!t)return null;let e=this.getSessionKey();if(!e)return null;let i=this.h.projectId,r=this.h.uxaDomain,a=t.pageNumber,c=this.Je.getPageViewType(),l=this.w.isReplayRecorded(),h=this.Lv(t);return{projectId:i,sessionKey:e,pageNumber:a,pageViewType:c,isRecording:l,uxaDomain:r,recordingConsentState:h,...this.h.smbConfig}}getSessionKey(){let t=this.R.getVisitor();return t?`${t.id}.${t.visitsCount}`:null}Lv(t){return qe.isReplayConsentNeeded(this.h)?t.collectState===N.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED?Vi.NOT_EXPRESSED:t.collectState===N.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN?Vi.WITHDRAWN:Vi.GRANTED:Vi.NOT_NEEDED}}return s})(),Lg=(()=>{class s{constructor(t){this.vt=t,this.ee=[]}handleCommand(t){if(Xe(t)&&(this.Sr(t),this.vt.isNaturalPageViewSent())){let e=this.vt.getTrackingContext();e!==null&&this.kt(t,e)}}Sr(t){csArray.prototype.push.call(this.ee,t)}executeRegisteredCallbacks(){let t=this.vt.getTrackingContext();t!==null&&csArray.prototype.map.call(this.ee,e=>this.kt(e,t))}kt(t,e){csSetTimeout(()=>{t(e)})}}return s})(),xg=(()=>{class s{constructor(t){this.vt=t,this.Ti=[]}handleCommand(t){if(this.vt.isNaturalPageViewSent())return this.xv(t);this.vr(t)}xv(t){let e=this.vt.getSessionKey();return this.Rp(t)&&e!==null&&this.kt(t.callback,e),e}vr(t){this.Rp(t)&&csArray.prototype.push.call(this.Ti,t.callback)}flushPendingCallbacks(){let t=this.vt.getSessionKey();t!==null&&csArray.prototype.forEach.call(this.Ti,e=>{this.kt(e,t)}),this.Ti=[]}Rp(t){return t&&typeof t.callback=="function"}kt(t,e){csSetTimeout(()=>{t(e)})}}return s})(),Ug=(()=>{class s{constructor(t,e){this.Y=t,this.vt=e}onTrackingContextRequestCallback(t){let e=this.vt.getTrackingContext();e!==null&&this.Y.sendToChildren(J.TrackingContextResultMessage,{...t,trackingContext:e})}onIframeIntegrationCallback(t){if(!this.vt.isNaturalPageViewSent())return;let e=this.vt.getTrackingContext();e!==null&&(t.trackingContext=e,this.Y.sendToChildren(J.IntegrationCallback,t))}sendAfterPageViewCallbackToChildren(){let t=this.vt.getTrackingContext();if(t===null)return;let e={trackingContext:t,initiator:hd.AfterPageView};this.Y.sendToChildren(J.IntegrationCallback,e)}}return s})();function Vg(s,n){let{isRecording:t,pageNumber:e,projectId:i,siteId:r,uxaDomain:a,csLiteDomain:c}=s,l=/^(.+)\.(\d+)$/.exec(s.sessionKey),h;if(t&&l){let[,f,d]=l;r?h=`${c}/sites/${r}/player?uu=${f}&sn=${d}&pn=${e}`:h=`${a}/quick-playback/index.html?pid=${i}&uu=${f}&sn=${d}&pvid=${e}&recordingType=cs`,n.withTimestamp&&(h+=`&t=${O.now()-n.recordingStartTimestamp}`)}return{replayLink:h,isRecording:t}}var jg=(()=>{class s{constructor(t){this.vt=t}handleCommand(t,e){Ye(t)&&Xe(e)&&this.kt(t,e)}kt(t,e){csSetTimeout(()=>{let i=this.vt.getTrackingContext();if(i){let r=Vg(i,t);e(r)}})}}return s})(),Hg=(()=>{class s{constructor(){this.ee=new Set}handleCommand(t,e){return!Xe(t)||this.ee.has(t)?null:(this.ee.add(t),e&&(this.we=e,this.Cp(t,e)),()=>this.ee.delete(t))}executeCallbacks(t){this.Uv(t)&&(this.we=t,this.ee.forEach(e=>this.Cp(e,t)))}Cp(t,e){csSetTimeout(()=>{try{t(e)}catch{}})}Uv(t){let{isRecording:e,recordingStartTimestamp:i,etrState:r,etrStatus:a,collectState:c}=t;return this.we&&(this.we.isRecording!==e||this.we.recordingStartTimestamp!==i||this.we.etrState!==r||this.we.etrStatus!==a||this.we.collectState!==c)}}return s})(),Bg=["afterPageView"],Fg=["getSessionKey"],$g=["onRecordingContextChange","onRecordingStateChange"],zg=["replay:link:generate"],Gg=(()=>{class s{constructor(t,e,i,r,a,c,l,h){this.R=t,this.w=e,this.f=i,this.it=r,this.Y=a,this.h=c,this.Je=l,this.Fs=h}init(){this.vt=new Dg(this.R,this.w,this.h,this.Je),this.Nl=new Lg(this.vt),this.Ip=new xg(this.vt),this._r=new Hg,this.jv=new jg(this.vt),this.Ml=new Ug(this.Y,this.vt),this.it.addListener(this.Ml),this.f.register(Fg,t=>this.Ip.handleCommand(t)),this.f.register(Bg,t=>this.Nl.handleCommand(t)),this.f.register($g,t=>this._r.handleCommand(t,this.Fs.getRecordingContext())),this.f.register(zg,(t,e)=>{this.Xi&&this.jv.handleCommand({...t,recordingStartTimestamp:this.Fs.getRecordingContext().recordingStartTimestamp},e)})}onAfterNaturalPageView(){this.vt.setNaturalPageViewSent(!0),this.Ip.flushPendingCallbacks(),this.Nl.executeRegisteredCallbacks(),this.Ml.sendAfterPageViewCallbackToChildren()}onAfterArtificialPageView(){this.Nl.executeRegisteredCallbacks(),this.Ml.sendAfterPageViewCallbackToChildren()}onCollectStateChange(){this.executeRecordingContextChangeCallbacks()}onRecordingContextChange(){this.executeRecordingContextChangeCallbacks()}executeRecordingContextChangeCallbacks(){this._r.executeCallbacks(this.Fs.getRecordingContext())}setRecordingService(t){this.Xi=t}}return j([xs({wait:0,mode:"trailing"})],s.prototype,"executeRecordingContextChangeCallbacks",null),s})(),qg=512,Wg=255,jn=(()=>{class s{constructor(t,e){this.key=csString.prototype.slice.call(t,0,qg),this.value=$(e)?csString.prototype.slice.call(e,0,Wg):e}static isKeyValid(t){return $(t)}static isValueValid(t){return $(t)||Cs(t)}}return s})(),Yg=(()=>{class s extends Mt{constructor(t,e){super(),this.Bt=t,this.I=e,this.kl=[]}onStart(){csArray.prototype.forEach.call(this.kl,t=>this.Pp(t.key,t.value)),this.kl=[]}onStop(){}Pp(t,e){let i=this.I.anonymizePII(t),r=Cs(e)?e:this.I.anonymizePII(e);this.Bt.add(new jn(i,r))}trackDynamicVariable(t,e){if(jn.isKeyValid(t)&&jn.isValueValid(e)){if(!this.isStarted){csArray.prototype.push.call(this.kl,{key:t,value:e});return}this.Pp(t,e)}else throw new Error(`Command misuse: ${xc[0]}`)}}return s})(),Xg=(()=>{class s{constructor(t){this.le=t,this.Bt=[]}add(t){csArray.prototype.push.call(this.Bt,t),this.setBatchReadyCall()}clear(){this.Bt=[]}onBatchReady(t){this.Hv=t}getRequestParameters(){let t={};for(let e of this.Bt)t[e.key]=e.value;return{dv:this.le.compressSync(csJSON.stringify(t),"base64"),ct:this.le.algorithm}}setBatchReadyCall(){this.Hv()}}return j([xs({wait:0,mode:"trailing"}),I("dynamicVariablesBatchReady")],s.prototype,"setBatchReadyCall",null),s})(),Kg="dvar",xc=["trackDynamicVariable"],Jg=(()=>{class s{constructor(t,e,i,r,a,c){this.f=t,this.w=e,this.h=i,this.Me=r,this.le=a,this.I=c,this.hs=new Ns(this.h.getTrackerUri(),Kg),this.Bt=new Xg(this.le),this.Qe=new Yg(this.Bt,this.I)}init(){this.hs.setRequestParametersProviders(this.Me,this.Bt),this.w.setDynamicVariablesService(this.Qe),this.Bt.onBatchReady(()=>this.hs.send()),this.hs.after(()=>this.Bt.clear()),this.f.register(xc,({key:t,value:e}={})=>{this.Qe.trackDynamicVariable(t,e)})}onStartTracking(){this.Qe.start()}}return s})(),Xo=(()=>{class s{constructor(t,e){this.id=t,this.revenue=e}static from(t){let e=new s(t.id,parseFloat(t.revenue));return isNaN(parseFloat(t.tax))||(e.tax=parseFloat(t.tax)),isNaN(parseFloat(t.shipping))||(e.shipping=parseFloat(t.shipping)),$(t.currency)&&t.currency.length<=10&&(e.currency=t.currency),e}hasValidRevenue(){return!isNaN(this.revenue)&&this.revenue>=0}static isValid(t){return Nt(t)&&ue(t.revenue)&&$(t.currency)&&t.currency.length<=10&&(!Nt(t.id)||$(t.id))}}return s})(),Uc=100,Qg=100,Zg=(()=>{class s{constructor(t,e,i,r){this.id=t,this.name=e,this.price=i,this.quantity=r}static from(t){if(!s.Dl(t))return null;let e=new s(t.id,t.name,parseFloat(t.price),parseInt(t.quantity,10));return Q(t.sku)&&(e.sku=t.sku),Q(t.category)&&(e.category=t.category),Q(t.merchant)&&t.merchant.length>0&&(e.merchant=t.merchant.slice(0,Uc)),e}static Dl(t){return Nt(t)&&$(t.id)&&$(t.name)&&ue(parseFloat(t.price))&&Cs(parseInt(t.quantity,10))&&(!Q(t.sku)||$(t.sku))&&(!Q(t.category)||$(t.category))&&(!Q(t.merchant)||$(t.merchant))}}return s})(),tm=(()=>{class s extends Mt{constructor(t,e,i){super(),this.I=t,this.Op=e,this.X=i,this.Ll=[],this.clear()}onStart(){csArray.prototype.forEach.call(this.Ll,t=>{this.he=t.transaction,this.wr=t.transactionItems,this.sendTransaction()}),this.Ll=[]}onStop(){}addTransaction(t){let e=this.I.anonymizeFields(t,["id"]);this.he=Xo.from(e)}getTransaction(){return this.he}sendTransaction(){if(!this.isStarted){csArray.prototype.push.call(this.Ll,{transaction:this.he,transactionItems:[...this.wr]}),this.clear();return}if(!(this.Op===null||this.X===null)&&(this.X.refreshSession(),!!this.X.isSessionValid())){if(!this.he.hasValidRevenue()){V.warn("Transaction Service: unable to send transaction with invalid parameters");return}this.Op.send()}}addItem(t){if(Xe(t))throw new Error(`Command misuse: ${Vc[1]}`);let e=this.I.anonymizeFields(t,["id","name","sku","category"]),i=Zg.from(e);i!==null&&csArray.prototype.push.call(this.wr,i)}getItems(){return this.wr}clear(){this.he=Xo.from({revenue:NaN}),this.wr=[]}getRequestParameters(){let t={id:this.he.id?`${this.he.id}`:"",revenue:`${this.he.revenue}`};return Q(this.he.tax)&&(t.tax=`${this.he.tax}`),Q(this.he.shipping)&&(t.shipping=`${this.he.shipping}`),Q(this.he.currency)&&(t.cu=`${this.he.currency}`),t.items=window.csJSON.stringify(this.wr),t}}return s})(),em=(()=>{class s extends Mt{constructor(t,e){super(),this.Bv=t,this.X=e,this.Te=null,this.xl=[]}onStart(){csArray.prototype.forEach.call(this.xl,t=>{this.Te=t,this.Np()}),this.xl=[]}onStop(){}addToCart(t){let e={};$(t.sku)&&(e.sku=csString.prototype.slice.call(t.sku,0,Qg)),$(t.merchant)&&(e.merchant=csString.prototype.slice.call(t.merchant,0,Uc)),(e.sku||e.merchant)&&(this.Te=e,this.Np())}getCartItem(){return this.Te}Np(){if(!this.isStarted&&this.Te!==null){csArray.prototype.push.call(this.xl,this.Te),this.clear();return}this.X.refreshSession(),this.X.isSessionValid()&&this.Bv.send()}clear(){this.Te=null}getRequestParameters(){if(!this.Te)return{};let t={};return $(this.Te.sku)&&this.Te.sku.length>0&&(t.sku=this.Te.sku),$(this.Te.merchant)&&this.Te.merchant.length>0&&(t.me=this.Te.merchant),t}}return s})(),sm=["ecommerce:addToCart","ec:cart:add"],im=["ecommerce:addTransaction","ec:transaction:create"],Vc=["ecommerce:addItem","ec:transaction:items:add"],nm=["ecommerce:send","ec:transaction:send"],rm=(()=>{class s{constructor(t,e,i,r,a,c,l){this.h=t,this.J=e,this.R=i,this.f=r,this.I=a,this.X=c,this.A=l}init(){let t=new Ns(this.h.getTrackerUri(),"transaction"),e=new Ns(this.h.getTrackerUri(),"addtocart");this.Ze=new tm(this.I,t,this.X),this.Qo=new em(e,this.X);let i=new hi(this.J,this.R,this.A,this.Ze);t.setRequestParametersProviders(i),t.after(()=>{this.Ze.clear()});let r=new hi(this.J,this.R,this.A,this.Qo);e.setRequestParametersProviders(r),e.after(()=>{this.Qo.clear()}),this.f.register(im,a=>{this.Ze.addTransaction(a)}),this.f.register(Vc,a=>this.Ze.addItem(a)),this.f.register(nm,()=>this.Ze.sendTransaction()),this.f.register(sm,a=>{this.Qo.addToCart(a)})}onStartTracking(){this.Ze.start(),this.Qo.start()}}return s})(),om=(()=>{class s{constructor(t){this.Zo=t.performance}getRequestParameters(){if(this.Fv())return{};let t=this.$v();return{str:t.startRender,di:t.domInteractive,dc:t.domComplete,fl:t.fullyLoaded}}$v(){let t=this.Zo.timing;return{startRender:`${t.domLoading-t.requestStart}`,domInteractive:`${t.domInteractive-t.requestStart}`,domComplete:`${t.domComplete-t.requestStart}`,fullyLoaded:`${t.loadEventEnd-t.requestStart}`}}Fv(){return!(this.Zo&&this.Zo.timing&&this.Zo.timing.loadEventEnd>0)}}return s})(),Ht=(()=>{class s{static build(t,e,i){return csArray.prototype.reduce.call(i,(r,a)=>a.enhanceAnalysisEvent(t,r),e)}}return s})(),z=(()=>{let s;return function(n){n[n.RESIZE=0]="RESIZE",n[n.SCROLL=1]="SCROLL",n[n.MOUSEMOVE=2]="MOUSEMOVE",n[n.MOUSEDOWN=3]="MOUSEDOWN",n[n.MOUSEUP=4]="MOUSEUP",n[n.CLICK=5]="CLICK",n[n.MOUSEOVER=6]="MOUSEOVER",n[n.MOUSEOUT=7]="MOUSEOUT",n[n.CHANGE=10]="CHANGE",n[n.FOCUSIN=11]="FOCUSIN",n[n.FOCUSOUT=12]="FOCUSOUT",n[n.TAP=14]="TAP",n[n.KEYDOWN=15]="KEYDOWN",n[n.KEYUP=16]="KEYUP",n[n.COMMAND=17]="COMMAND",n[n.SUBMIT_COMMAND=18]="SUBMIT_COMMAND",n[n.PERFORMANCE=19]="PERFORMANCE",n[n.DRAG=20]="DRAG",n[n.FLICK=21]="FLICK",n[n.KEYBOARD_NAVIGATION=22]="KEYBOARD_NAVIGATION",n[n.ZOOM=23]="ZOOM",n[n.VIEWPORT_SCALE=24]="VIEWPORT_SCALE",n[n.TEXT_HIGHLIGHT=25]="TEXT_HIGHLIGHT",n[n.DEAD_CLICK=30]="DEAD_CLICK",n[n.DEAD_ZOOM=31]="DEAD_ZOOM",n[n.PAGE_RELOAD=32]="PAGE_RELOAD",n[n.THRASHED_CURSOR=33]="THRASHED_CURSOR",n[n.BLANK_PAGE=34]="BLANK_PAGE",n[n.EXTERNAL_EVENT=35]="EXTERNAL_EVENT",n[n.SUBMIT=36]="SUBMIT"}(s||(s={})),s})(),Hn=(()=>{let s;return function(n){n.SUCCESS="success",n.FAILURE="failure",n.ATTEMPT="attempt"}(s||(s={})),s})();function am(s){return s.tgtHM!==void 0}function jc(s){return s.tgt!==void 0}function cm(s){return s.tgtLk!==void 0}function lm(s){return s.x!==void 0&&s.y!==void 0}function hm(s){return s===Hn.SUCCESS||s===Hn.FAILURE||s===Hn.ATTEMPT}var um=(()=>{class s{constructor(t,e,i){this.se=t,this.Dt=e,this.Et=i}processGesture(t,e){switch(t.type){case vt.TAP:this.zv(e);break;case vt.FLICK:this.Gv(t,e);break;case vt.DRAG:this.qv(t,e);break;default:break}}zv(t){let e={type:z.TAP,ts:0,x:0,y:0,tgt:""},i=Ht.build(t,e,this.se);i.tgt!==we.INVALID_ELEMENT&&this.O(i)}qv(t,e){var i,r;let a={type:z.DRAG,ts:0,fd:t.direction,tgt:""};!((i=this.Et)===null||i===void 0)&&i.collectGestureDistance&&(a.distance=t.distance),!((r=this.Et)===null||r===void 0)&&r.collectGestureVelocity&&(a.velocity=t.velocity);let c=Ht.build(e,a,this.se);c.tgt!==we.INVALID_ELEMENT&&this.O(c)}Gv(t,e){var i,r;let a={type:z.FLICK,ts:0,fd:t.direction,tgt:""};!((i=this.Et)===null||i===void 0)&&i.collectGestureDistance&&(a.distance=t.distance),!((r=this.Et)===null||r===void 0)&&r.collectGestureVelocity&&(a.velocity=t.velocity);let c=Ht.build(e,a,this.se);c.tgt!==we.INVALID_ELEMENT&&this.O(c)}onEvent(t){this.O=t}start(){this.Dt.subscribe(s.Mp,(t,e)=>this.processGesture(t,e))}stop(){this.Dt.unsubscribe(s.Mp)}}return s.Mp="AnalysisGestureTracker",j([bt()],s.prototype,"processGesture",null),s})(),dm=(()=>{class s{constructor(t,e,i,r=["submit"]){this.se=t,this.ut=e,this.Lt=i,this.Wv=r,this.kp="select, select *, input, textarea",this.Yv="select, select *, input, textarea",this.Dp="a, a *, button, button *, select, select *, input, textarea",this.br="input, select, textarea",this.Xv="form",this.ta=150,this.Kv=400,this.Lp=!1,this.Ar=dr((a,c)=>this.scrollListener(a,c),this.ta),this.xp=dr(a=>this.resizeListener(a),this.ta),this.Jv=hn(a=>this.mouseMoveListener(a),this.Kv),this.Qv=[{boundElement:window,type:"resize",listener:()=>this.xp()},{boundElement:document,type:"scroll",listener:a=>this.Ar(a)},{boundElement:window,type:"mousemove",listener:a=>{this.Jv(Qd(a))}},{boundElement:document,type:"mousedown",listener:a=>this.mouseDownListener(a)},{boundElement:document,type:"mouseup",listener:a=>this.mouseUpListener(a)},{boundElement:document,type:"click",listener:a=>this.clickListener(a)}],this.Up=[{type:"change",listener:this.Lt.on(this.Yv,a=>this.changeListener(a))},{type:"submit",listener:this.Lt.on(this.Xv,a=>this.submitListener(a))}],this.Zv=[{boundElement:document,type:"mouseover",listener:this.Lt.on(this.Dp,a=>this.mouseOverListener(a))},{boundElement:document,type:"mouseout",listener:this.Lt.on(this.Dp,a=>this.mouseOutListener(a))},{boundElement:document,type:"focusin",listener:this.Lt.on(this.kp,a=>this.focusInListener(a))},{boundElement:document,type:"focusout",listener:this.Lt.on(this.kp,a=>this.focusOutListener(a))},{boundElement:document,type:"keyup",listener:this.Lt.on(this.br,a=>this.keyUpListener(a))},{boundElement:document,type:"keydown",listener:this.Lt.on(this.br,a=>this.keyDownListener(a))},{boundElement:document,type:"copy",listener:this.Lt.on(this.br,a=>this.copyListener(a))},{boundElement:document,type:"cut",listener:this.Lt.on(this.br,a=>this.cutListener(a))},{boundElement:document,type:"paste",listener:this.Lt.on(this.br,a=>this.pasteListener(a))},...csArray.prototype.map.call(this.Up,a=>({...a,boundElement:document}))],this.D={},this.xc=(a,c)=>{switch(c){case"initial":case"added":this.hi(a);break;case"removed":this.pi(a);break}},this.ne=new Ls(this.xc),this.wc()}hi(t){if(Ki(t)){let e=this.Vp();csArray.prototype.forEach.call(e,i=>Pt(i))}else{let e=this.jp();csArray.prototype.forEach.call(e,i=>{Pt({...i,boundElement:t})})}}pi(t){if(Ki(t)){let e=this.Vp();csArray.prototype.forEach.call(e,i=>Ot(i))}else{let e=this.jp();csArray.prototype.forEach.call(e,i=>{Ot({...i,boundElement:t})})}}onEvent(t){this.O=t}start(){this.ne.observe(),this.hi(document),this.resizeListener()}stop(){this.pi(document),this.ne.disconnect()}flushPendingDebouncedListeners(){this.Ar.flushPending(),this.xp.flushPending()}Hp(t){return csArray.prototype.some.call(this.Wv,e=>e===t)}jp(){return this.Lt.isMatchesSelectorSupported()?csArray.prototype.filter.call(this.Up,t=>!this.Hp(t.type)):(V.warn("Element.matches is not implemented yet"),[])}Vp(){let t=[];return csArray.prototype.push.call(t,...this.Qv),this.Lt.isMatchesSelectorSupported()?csArray.prototype.push.call(t,...this.Zv):V.warn("Element.matches is not implemented yet"),csArray.prototype.filter.call(t,e=>!this.Hp(e.type))}resizeListener(t){let e=As.getScrollContainer(),i=pi(e);i&&(this.Lp=!0);let r={type:z.RESIZE,ts:0,x:i?e.clientWidth:yt.windowWidth(),y:i?e.clientHeight:yt.windowHeight()};t!==void 0&&(r.d=t),this.O(r)}scrollListener(t,e){let i=As.isEventOnScrollContainer(e);!this.Lp&&i&&this.resizeListener();let r={type:z.SCROLL,ts:0,x:i?csEventtarget.apply(e).scrollLeft:yt.windowOffsetX(),y:i?csEventtarget.apply(e).scrollTop:yt.windowOffsetY(),d:t},a=Ht.build(e,r,this.se);this.O(a)}mouseMoveListener(t){let e={type:z.MOUSEMOVE,ts:0,x:t.pageX,y:t.pageY},i=Ht.build(t,e,this.se);this.O(i)}mouseDownListener(t){let e={type:z.MOUSEDOWN,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Ht.build(t,e,this.se);this.ue(i)}mouseUpListener(t){let e={type:z.MOUSEUP,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Ht.build(t,e,this.se);this.ue(i)}clickListener(t){let e={type:z.CLICK,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Ht.build(t,e,this.se);this.ue(i)}mouseOverListener(t){let e={type:z.MOUSEOVER,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Ht.build(t,e,this.se);this.ue(i)}mouseOutListener(t){let e={type:z.MOUSEOUT,ts:0,x:t.pageX,y:t.pageY,tgt:this.ut.getEventTargetPath(t)},i=Ht.build(t,e,this.se);this.ue(i)}focusInListener(t){let e={type:z.FOCUSIN,ts:0,tgt:this.ut.getEventTargetPath(t)},i=Ht.build(t,e,this.se);this.ue(i)}focusOutListener(t){let e={type:z.FOCUSOUT,ts:0,tgt:this.ut.getEventTargetPath(t)},i=Ht.build(t,e,this.se);this.ue(i)}changeListener(t){let e={type:z.CHANGE,ts:0,tgt:""},i=Ht.build(t,e,this.se);this.ue(i)}submitListener(t){let e={type:z.SUBMIT,ts:0,tgt:""},i=Ht.build(t,e,this.se);this.ue(i)}copyListener(t){let e={type:z.COMMAND,ts:0,tgt:this.ut.getEventTargetPath(t),key:Ts.COPY};this.ue(e)}cutListener(t){let e={type:z.COMMAND,ts:0,tgt:this.ut.getEventTargetPath(t),key:Ts.CUT};this.ue(e)}pasteListener(t){let e={type:z.COMMAND,ts:0,tgt:this.ut.getEventTargetPath(t),key:Ts.PASTE};this.ue(e)}keyUpListener(t){let e={type:z.KEYUP,ts:0,tgt:this.ut.getEventTargetPath(t),key:this.Bp(t)};this.ue(e)}keyDownListener(t){let e={type:z.KEYDOWN,ts:0,tgt:this.ut.getEventTargetPath(t),key:this.Bp(t)};this.ue(e)}Bp(t){let e=this.D[t.key];return e===void 0?G.ALPHANUMERICAL:e}ue(t){jc(t)&&t.tgt!==we.INVALID_ELEMENT&&this.O(t)}wc(){this.D[" "]=G.SPACE,this.D.Spacebar=G.SPACE,this.D.Enter=G.ENTER,this.D.Backspace=G.BACKSPACE,this.D.Delete=G.DELETE,this.D.ArrowUp=G.ARROWUP,this.D.ArrowDown=G.ARROWDOWN,this.D.ArrowLeft=G.ARROWLEFT,this.D.ArrowRight=G.ARROWRIGHT,this.D.Up=G.ARROWUP,this.D.Down=G.ARROWDOWN,this.D.Left=G.ARROWLEFT,this.D.Right=G.ARROWRIGHT,this.D.CapsLock=G.CAPSLOCK,this.D.Shift=G.SHIFT,this.D.Tab=G.TAB}}return j([I("Event handler type: resize")],s.prototype,"resizeListener",null),j([I("Event handler type: scroll")],s.prototype,"scrollListener",null),j([I("Event handler type: mouseMove"),bt()],s.prototype,"mouseMoveListener",null),j([I("Event handler type: mouseDown"),bt()],s.prototype,"mouseDownListener",null),j([I("Event handler type: mouseUp"),bt()],s.prototype,"mouseUpListener",null),j([I("Event handler type: click"),bt()],s.prototype,"clickListener",null),j([I("Event handler type: mouseOver"),bt()],s.prototype,"mouseOverListener",null),j([I("Event handler type: mouseOut"),bt()],s.prototype,"mouseOutListener",null),j([I("Event handler type: focusIn")],s.prototype,"focusInListener",null),j([I("Event handler type: focusOut")],s.prototype,"focusOutListener",null),j([I("Event handler type: change")],s.prototype,"changeListener",null),j([I("Event handler type: submit"),bt()],s.prototype,"submitListener",null),j([I("Event handler type: copy")],s.prototype,"copyListener",null),j([I("Event handler type: cut")],s.prototype,"cutListener",null),j([I("Event handler type: paste")],s.prototype,"pasteListener",null),j([I("Event handler type: keyup")],s.prototype,"keyUpListener",null),j([I("Event handler type: keydown")],s.prototype,"keyDownListener",null),s})(),pm=(()=>{class s{constructor(){this.Fp=100,this.Tr=0,this.Rr=yt.documentHeight(),this.$p={boundElement:document,type:"scroll",listener:t=>this.maxScrollRateListener(t)},this.Tr=this.Ul(As.getScrollContainer()).maxScrollRate}onEvent(t){this.O=t}start(){Pt(this.$p)}stop(){Ot(this.$p)}reset(){let t=As.getScrollContainer(),{maxScrollRate:e,maxDocumentHeight:i}=this.Ul(t);this.Rr=i,this.Tr=e,this.O()}Ul(t){let e=0,i=0;if(t===null)i=yt.documentHeight(),e=this.t_(i);else{let r=this.e_(t);i=this.zp(t,r),e=this.s_(t,r)}return{maxScrollRate:e,maxDocumentHeight:i}}maxScrollRateListener(t){let e=null;As.isEventOnScrollContainer(t)&&(e=csEventtarget.apply(t));let{maxScrollRate:i,maxDocumentHeight:r}=this.Ul(e);(i>this.Tr||r>this.Rr)&&(this.Tr=i,r>this.Rr&&(this.Rr=r),this.O())}t_(t){let e=Math.round(this.i_()/t*100);return Math.min(e,this.Fp)}i_(){let t=yt.windowHeight();return yt.windowOffsetY()+t}s_(t,e){let i=t.scrollTop+t.clientHeight+t.getBoundingClientRect().top+e,r=this.zp(t,e),a=Math.round(i/r*100);return Math.min(a,this.Fp)}e_(t){let e=window.getComputedStyle(t).paddingTop||"0px";return parseInt(e,10)}zp(t,e){return t.scrollHeight+t.getBoundingClientRect().top+e}getRequestParameters(){return{sr:`${this.Tr}`,mdh:`${this.Rr}`}}}return j([I("MaxScrollRate handler")],s.prototype,"maxScrollRateListener",null),s})();var fm=(()=>{class s{constructor(t,e,i,r,a,c,l,h,f,d,y,E,v,C,P,A,w,x,b,L,H){this.h=t,this.zs=e,this.Dt=i,this.Ki=r,this.Vl=a,this.Be=c,this.es=l,this.Gp=h,this.X=f,this.Yt=d,this.W=y,this.jl=E,this.Ue=v,this.U=C,this.sa=P,this.ys=A,this.Es=w,this.Hl=x,this.Ri=b,this.Ci=L,this.Ii=H,this.Ds=new gc,this.ia=!1}init(){var t,e,i,r,a,c,l;this.zs.onEvent(h=>this.It(h)),this.Dt.onEvent(h=>this.It(h)),this.Ki.onEvent(()=>{let h=this.Ki.getRequestParameters();this.U.setQueryParams(h),this.es.setQueryParams(h)}),this.jl.onEvent(h=>this.Fe(h)),this.Bl(),(t=this.sa)===null||t===void 0||t.onEvent(h=>this.It(h)),(e=this.Ri)===null||e===void 0||e.onEvent(h=>this.It(h)),(i=this.ys)===null||i===void 0||i.onEvent(h=>this.It(h)),(r=this.Es)===null||r===void 0||r.onEvent(h=>this.It(h)),this.n_(),(a=this.Hl)===null||a===void 0||a.onEvent(h=>this.Fe(h)),(c=this.Ci)===null||c===void 0||c.onEvent(h=>this.Fe(h)),(l=this.Ii)===null||l===void 0||l.onEvent(h=>this.Fe(h))}n_(){this.es.onBeaconSuccess(()=>{this.Be.clearEvents()}),this.es.onBeaconFailure(t=>{this.r_(t)})}initStates(){let t=this.Gp.getRequestParameters(),e=this.Vl.getRequestParameters(),i=this.Ki.getRequestParameters();this.U.setQueryParams(t),this.U.setQueryParams(e),this.U.setQueryParams(i),this.es.setQueryParams(t),this.es.setQueryParams(e),this.es.setQueryParams(i),this.Fl()}clearStates(t){var e,i;this.zs.flushPendingDebouncedListeners(),(e=this.ys)===null||e===void 0||e.flushPendingKeyboardNavigationEvent(),(i=this.Es)===null||i===void 0||i.flushPendingTextHighlightEvent(),t?(this.$l(),this.sendLastMessageBeacon()):this.sendEvents(),this.Ki.reset(),this.U.removeQueryParams()}start(t){var e,i,r,a,c,l,h;t||(e=this.Hl)===null||e===void 0||e.start(),this.Ue.start(),this.zs.start(),this.Ki.start(),this.Dt.start(),(i=this.sa)===null||i===void 0||i.start(),(r=this.Es)===null||r===void 0||r.start(),t||this.jl.start(),(a=this.ys)===null||a===void 0||a.start(),(c=this.Ri)===null||c===void 0||c.start(),(l=this.Ci)===null||l===void 0||l.start(),(h=this.Ii)===null||h===void 0||h.start()}collectInitialEvents(){var t;(t=this.sa)===null||t===void 0||t.collectInitialEvents()}onIframeAnalysisBrowserEvent(t){this.Fe(t)}onIframeAnalysisUserEvent(t){this.It(t)}onExternalEvent(t){this.G(t)}Fe(t){this.X.isCurrentPageviewValid()&&this.G(t)}It(t){this.X.refreshSession(),this.X.isSessionValid()&&this.G(t)}G(t){this.Be.addEvent(this.o_(t)),this.Be.isFull()&&this.sendEvents(),this.h.emitDebugEvents&&this.Ds.emit("analysisEvent",{...t,typeName:z[t.type]})}o_(t){return t.ts=this.Pi(),t}$l(){this.es.setQueryParams({hlm:"true"}),this.ia=!0}sendLastMessageBeacon(){this.es.setQueryParams(this.Vl.getRequestParameters()),this.es.send(this.Be.stringifyEvents()),this.es.removeQueryParams(["hlm"]),this.ia=!1}sendEvents(){this.Be.isEmpty()||(this.U.setQueryParams(this.Gp.getRequestParameters()),this.U.setQueryParams(this.Vl.getRequestParameters()),this.U.send(this.Be.getEvents()),this.Be.clearEvents())}stop(){var t,e,i,r,a,c,l;this.Ue.stop(),this.zs.stop(),this.Ki.stop(),this.Dt.stop(),this.jl.stop(),(t=this.sa)===null||t===void 0||t.stop(),(e=this.ys)===null||e===void 0||e.stop(),(i=this.Es)===null||i===void 0||i.stop(),(r=this.Ri)===null||r===void 0||r.stop(),this.Be.empty(),(a=this.Hl)===null||a===void 0||a.stop(),(c=this.Ci)===null||c===void 0||c.stop(),(l=this.Ii)===null||l===void 0||l.stop()}Fl(){this.ss=O.now()}Pi(){return O.now()-this.ss}Bl(){this.Ue.onEvent(t=>{var e,i;t!==Gt.Visible&&((e=this.ys)===null||e===void 0||e.flushPendingKeyboardNavigationEvent(),(i=this.Es)===null||i===void 0||i.flushPendingTextHighlightEvent(),t===Gt.PagehideVisible?this.$l():t===Gt.PagehideHidden?(this.$l(),this.sendLastMessageBeacon()):(!this.Be.isEmpty()||this.ia)&&this.sendLastMessageBeacon())})}r_(t){try{(!this.Be.isEmpty()||this.ia)&&this.Yt.save({requestParameters:t,events:this.Be.getEvents()})}catch{}}pushSubmitCommandEvent(t,e){if(!hm(t)||!pi(e))throw new Error(`Command misuse: ${Kc}`);let i={status:t,type:z.SUBMIT_COMMAND,ts:0,tgt:this.W.getElementPath(e)};i.tgt!==we.INVALID_ELEMENT&&this.Fe(i)}}return s})(),gm=(()=>{class s{constructor(t,e){this.Yt=t,this.U=e,this.qp=()=>{document.visibilityState==="visible"&&this.Wp()}}start(){this.Wp(),this.jc()}stop(){this.Hc()}getRecoveryStorage(){return this.Yt}Wp(){let t=this.Yt.recover();if(t!==null){let{requestParameters:e,events:i}=t;this.U.send(i,e)}}jc(){document.addEventListener("visibilitychange",this.qp)}Hc(){document.removeEventListener("visibilitychange",this.qp)}}return s})(),mm=(()=>{class s{constructor(t){this.zi=t}save(t){localStorage.setItem(this.zi,csJSON.stringify(t))}clear(){localStorage.removeItem(this.zi)}recover(){let t=localStorage.getItem(this.zi);if(t===null)return null;let e=null;try{e=csJSON.parse(t)}catch{V.error(`Invalid item in localStorage.
         (key:${this.zi}; value:${t})`)}finally{this.clear()}return e}}return s})(),ym=(()=>{class s{constructor(t){this.Ji=t,this.Qi=e=>this.processMetric(e),this.N=!1}onEvent(t){this.O=t}start(){this.N||(this.N=!0,this.Ji.onFCP(this.Qi),this.Ji.onCLS(this.Qi),this.Ji.onFID(this.Qi),this.Ji.onLCP(this.Qi),this.Ji.onTTFB(this.Qi),this.Ji.onINP(this.Qi))}stop(){this.N=!1}processMetric(t){if(!this.N)return;let e={type:z.PERFORMANCE,name:t.name,val:t.value,ts:0};this.O(e)}}return j([I("Performance metric handler")],s.prototype,"processMetric",null),s})(),Ge,ni,Hc,nn,pr,Bc=-1,gs=function(s){addEventListener("pageshow",function(n){n.persisted&&(Bc=n.timeStamp,s(n))},!0)},Mr=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},pn=function(){var s=Mr();return s&&s.activationStart||0},qt=function(s,n){var t=Mr(),e="navigate";return Bc>=0?e="back-forward-cache":t&&(document.prerendering||pn()>0?e="prerender":document.wasDiscarded?e="restore":t.type&&(e=t.type.replace(/_/g,"-"))),{name:s,value:n===void 0?-1:n,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:e}},Vs=function(s,n,t){try{if(PerformanceObserver.supportedEntryTypes.includes(s)){var e=new PerformanceObserver(function(i){Promise.resolve().then(function(){n(i.getEntries())})});return e.observe(Object.assign({type:s,buffered:!0},t||{})),e}}catch{}},Wt=function(s,n,t,e){var i,r;return function(a){n.value>=0&&(a||e)&&((r=n.value-(i||0))||i===void 0)&&(i=n.value,n.delta=r,n.rating=function(c,l){return c>l[1]?"poor":c>l[0]?"needs-improvement":"good"}(n.value,t),s(n))}},kr=function(s){requestAnimationFrame(function(){return requestAnimationFrame(function(){return s()})})},fn=function(s){var n=function(t){t.type!=="pagehide"&&document.visibilityState!=="hidden"||s(t)};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},Dr=function(s){var n=!1;return function(t){n||(s(t),n=!0)}},bs=-1,Ko=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},rn=function(s){document.visibilityState==="hidden"&&bs>-1&&(bs=s.type==="visibilitychange"?s.timeStamp:0,Em())},Jo=function(){addEventListener("visibilitychange",rn,!0),addEventListener("prerenderingchange",rn,!0)},Em=function(){removeEventListener("visibilitychange",rn,!0),removeEventListener("prerenderingchange",rn,!0)},Lr=function(){return bs<0&&(bs=Ko(),Jo(),gs(function(){setTimeout(function(){bs=Ko(),Jo()},0)})),{get firstHiddenTime(){return bs}}},_i=function(s){document.prerendering?addEventListener("prerenderingchange",function(){return s()},!0):s()},Qo=[1800,3e3],Fc=function(s,n){n=n||{},_i(function(){var t,e=Lr(),i=qt("FCP"),r=Vs("paint",function(a){a.forEach(function(c){c.name==="first-contentful-paint"&&(r.disconnect(),c.startTime<e.firstHiddenTime&&(i.value=Math.max(c.startTime-pn(),0),i.entries.push(c),t(!0)))})});r&&(t=Wt(s,i,Qo,n.reportAllChanges),gs(function(a){i=qt("FCP"),t=Wt(s,i,Qo,n.reportAllChanges),kr(function(){i.value=performance.now()-a.timeStamp,t(!0)})}))})},Zo=[.1,.25],Sm=function(s,n){n=n||{},Fc(Dr(function(){var t,e=qt("CLS",0),i=0,r=[],a=function(l){l.forEach(function(h){if(!h.hadRecentInput){var f=r[0],d=r[r.length-1];i&&h.startTime-d.startTime<1e3&&h.startTime-f.startTime<5e3?(i+=h.value,r.push(h)):(i=h.value,r=[h])}}),i>e.value&&(e.value=i,e.entries=r,t())},c=Vs("layout-shift",a);c&&(t=Wt(s,e,Zo,n.reportAllChanges),fn(function(){a(c.takeRecords()),t(!0)}),gs(function(){i=0,e=qt("CLS",0),t=Wt(s,e,Zo,n.reportAllChanges),kr(function(){return t()})}),setTimeout(t,0))}))},Ks={passive:!0,capture:!0},vm=new Date,ta=function(s,n){Ge||(Ge=n,ni=s,Hc=new Date,zc(removeEventListener),$c())},$c=function(){if(ni>=0&&ni<Hc-vm){var s={entryType:"first-input",name:Ge.type,target:Ge.target,cancelable:Ge.cancelable,startTime:Ge.timeStamp,processingStart:Ge.timeStamp+ni};nn.forEach(function(n){n(s)}),nn=[]}},_m=function(s){if(s.cancelable){var n=(s.timeStamp>1e12?new Date:performance.now())-s.timeStamp;s.type=="pointerdown"?function(t,e){var i=function(){ta(t,e),a()},r=function(){a()},a=function(){removeEventListener("pointerup",i,Ks),removeEventListener("pointercancel",r,Ks)};addEventListener("pointerup",i,Ks),addEventListener("pointercancel",r,Ks)}(n,s):ta(n,s)}},zc=function(s){["mousedown","keydown","touchstart","pointerdown"].forEach(function(n){return s(n,_m,Ks)})},ea=[100,300],wm=function(s,n){n=n||{},_i(function(){var t,e=Lr(),i=qt("FID"),r=function(l){l.startTime<e.firstHiddenTime&&(i.value=l.processingStart-l.startTime,i.entries.push(l),t(!0))},a=function(l){l.forEach(r)},c=Vs("first-input",a);t=Wt(s,i,ea,n.reportAllChanges),c&&fn(Dr(function(){a(c.takeRecords()),c.disconnect()})),c&&gs(function(){var l;i=qt("FID"),t=Wt(s,i,ea,n.reportAllChanges),nn=[],ni=-1,Ge=null,zc(addEventListener),l=r,nn.push(l),$c()})})},Gc=0,Bn=1/0,ji=0,bm=function(s){s.forEach(function(n){n.interactionId&&(Bn=Math.min(Bn,n.interactionId),ji=Math.max(ji,n.interactionId),Gc=ji?(ji-Bn)/7+1:0)})},qc=function(){return pr?Gc:performance.interactionCount||0},Am=function(){"interactionCount"in performance||pr||(pr=Vs("event",bm,{type:"event",buffered:!0,durationThreshold:0}))},sa=[200,500],Wc=0,ia=function(){return qc()-Wc},he=[],Fn={},na=function(s){var n=he[he.length-1],t=Fn[s.interactionId];if(t||he.length<10||s.duration>n.latency){if(t)t.entries.push(s),t.latency=Math.max(t.latency,s.duration);else{var e={id:s.interactionId,latency:s.duration,entries:[s]};Fn[e.id]=e,he.push(e)}he.sort(function(i,r){return r.latency-i.latency}),he.splice(10).forEach(function(i){delete Fn[i.id]})}},Tm=function(s,n){n=n||{},_i(function(){var t;Am();var e,i=qt("INP"),r=function(c){c.forEach(function(f){f.interactionId&&na(f),f.entryType==="first-input"&&!he.some(function(d){return d.entries.some(function(y){return f.duration===y.duration&&f.startTime===y.startTime})})&&na(f)});var l,h=(l=Math.min(he.length-1,Math.floor(ia()/50)),he[l]);h&&h.latency!==i.value&&(i.value=h.latency,i.entries=h.entries,e())},a=Vs("event",r,{durationThreshold:(t=n.durationThreshold)!==null&&t!==void 0?t:40});e=Wt(s,i,sa,n.reportAllChanges),a&&("PerformanceEventTiming"in window&&"interactionId"in PerformanceEventTiming.prototype&&a.observe({type:"first-input",buffered:!0}),fn(function(){r(a.takeRecords()),i.value<0&&ia()>0&&(i.value=0,i.entries=[]),e(!0)}),gs(function(){he=[],Wc=qc(),i=qt("INP"),e=Wt(s,i,sa,n.reportAllChanges)}))})},ra=[2500,4e3],$n={},Rm=function(s,n){n=n||{},_i(function(){var t,e=Lr(),i=qt("LCP"),r=function(l){var h=l[l.length-1];h&&h.startTime<e.firstHiddenTime&&(i.value=Math.max(h.startTime-pn(),0),i.entries=[h],t())},a=Vs("largest-contentful-paint",r);if(a){t=Wt(s,i,ra,n.reportAllChanges);var c=Dr(function(){$n[i.id]||(r(a.takeRecords()),a.disconnect(),$n[i.id]=!0,t(!0))});["keydown","click"].forEach(function(l){addEventListener(l,function(){return setTimeout(c,0)},!0)}),fn(c),gs(function(l){i=qt("LCP"),t=Wt(s,i,ra,n.reportAllChanges),kr(function(){i.value=performance.now()-l.timeStamp,$n[i.id]=!0,t(!0)})})}})},oa=[800,1800],Cm=function s(n){document.prerendering?_i(function(){return s(n)}):document.readyState!=="complete"?addEventListener("load",function(){return s(n)},!0):setTimeout(n,0)},Im=function(s,n){n=n||{};var t=qt("TTFB"),e=Wt(s,t,oa,n.reportAllChanges);Cm(function(){var i=Mr();if(i){var r=i.responseStart;if(r<=0||r>performance.now())return;t.value=Math.max(r-pn(),0),t.entries=[i],e(!0),gs(function(){t=qt("TTFB",0),(e=Wt(s,t,oa,n.reportAllChanges))(!0)})}})},Pm=(()=>{class s{onFCP(t){Fc(t,{reportAllChanges:!0})}onCLS(t){Sm(t,{reportAllChanges:!0})}onFID(t){wm(t,{reportAllChanges:!0})}onLCP(t){Rm(t,{reportAllChanges:!0})}onTTFB(t){Im(t,{reportAllChanges:!0})}onINP(t){Tm(t,{reportAllChanges:!0})}}return s})();var gn=(()=>{class s{isEventTypeSupported(t){return csArray.prototype.indexOf.call(this.supportedEventTypes,t)!==-1}enhanceAnalysisEvent(t,e){return this.isEventTypeSupported(e.type)?this.baseEnhanceAnalysisEvent(t,e):e}}return s})(),Om=(()=>{class s extends gn{constructor(){super(...arguments),this.supportedEventTypes=[z.CHANGE],this.O_=["text","email","number","search","tel","url","password"]}baseEnhanceAnalysisEvent(t,e){let i=St(t);return on(i)&&csArray.prototype.indexOf.call(this.O_,i.type)>=0&&(e.isBlank=i.value===""),e}}return s})();var Yc=(()=>{class s extends gn{constructor(t){super(),this.ut=t,this.supportedEventTypes=[z.MOUSEDOWN,z.MOUSEUP,z.CLICK,z.MOUSEOVER,z.TAP,z.DRAG,z.FLICK,z.SUBMIT,z.CHANGE]}baseEnhanceAnalysisEvent(t,e){return e.tgt||(e.tgt=this.ut.getEventTargetPath(t)),e}}return s})(),aa=65535,Nm=(()=>{let s;return function(n){function t(e){let i=St(e);if(!i||!lt(i)||!Xe(i.getBoundingClientRect)||!Nt(e.pageX)||!Nt(e.pageY))return{xRel:-1,yRel:-1,valid:!1};let r=i.getBoundingClientRect(),a=e.pageX-r.left-yt.windowOffsetX(),c=e.pageY-r.top-yt.windowOffsetY();i!==document.documentElement&&(a+=i.scrollLeft,c+=i.scrollTop);let l=Math.max(i.scrollWidth,r.width),h=Math.max(i.scrollHeight,r.height),f=Math.round(a/l*aa),d=Math.round(c/h*aa);return{xRel:f,yRel:d,valid:!0}}n.getRelativePosition=t}(s||(s={})),s})(),Mm=(()=>{class s extends gn{constructor(t,e){super(),this.Ps=t,this.ut=e,this.supportedEventTypes=[z.MOUSEMOVE,z.CLICK],this.Ql=""}baseEnhanceAnalysisEvent(t,e){let{valid:i,xRel:r,yRel:a}=Nm.getRelativePosition(t);if(i){let c=this.ut.getEventTargetPath(t);c!==we.INVALID_ELEMENT&&(e.xRel=r,e.yRel=a,e.type===z.MOUSEMOVE&&(c!==this.Ql||this.Ps.iframesTracking?(this.Ql=c,e.tgtHM=c):e.tgtHM=""))}else e.type===z.MOUSEMOVE&&(this.Ql="");return e}}return s})(),$e=(()=>{let s;return function(n){n[n.ANONYMIZED=0]="ANONYMIZED",n[n.CAPTURED=1]="CAPTURED",n[n.MASKED=2]="MASKED",n[n.ENCRYPTED=3]="ENCRYPTED"}(s||(s={})),s})(),ca=100,Xc=(()=>{class s extends gn{constructor(t,e,i){super(),this.h=t,this.de=e,this.I=i,this.supportedEventTypes=[z.TAP,z.CLICK,z.SUBMIT]}N_(t){let e="",i=document.createTreeWalker(t,NodeFilter.SHOW_TEXT),r=i.nextNode();for(;r;){if(e+=r.textContent,mr(r.parentElement)||an(r.parentElement)||this.de.getElementSensitiveStatus(r.parentElement)!==$e.CAPTURED)return!0;if(csString.prototype.trim.call(e).length>=ca)break;r=i.nextNode()}return!1}M_(t){let e=nr(t,"button,a");return e||(this.h.collectTargetText===Zn.ButtonAndLinkOnly?null:t)}baseEnhanceAnalysisEvent(t,e){if(pi(csEventtarget.apply(t))){let i=this.M_(csEventtarget.apply(t));if(i&&$(i.textContent)&&!this.N_(i)&&!this.I.hasPII(i.textContent,this.h.anonymizeDigits)){let r=ot.truncate(csString.prototype.trim.call(i.textContent),ca);r.length>0&&(e.text=r)}}return e}}return s})();function km(s,n,t){let e=[];return s.mouseMoveHeatmapEnabled&&csArray.prototype.push.call(e,new Mm(s,n)),s.isCollectTargetTextEnabled()&&csArray.prototype.push.call(e,new Xc(s,t,new yi)),csArray.prototype.push.call(e,new Om,new Yc(n)),e}function Dm(s,n,t){let e=[];return s.isCollectTargetTextEnabled()&&csArray.prototype.push.call(e,new Xc(s,t,new yi)),csArray.prototype.push.call(e,new Yc(n)),e}var Lm=50,xm=(()=>{class s{constructor(t=[]){this.Nt=t}stringifyEvents(){return csJSON.stringify(this.Nt)}addEvent(t){csArray.prototype.push.call(this.Nt,t)}eventsCount(){return this.Nt.length}clearEvents(){this.Nt=[]}empty(){this.clearEvents()}isFull(){return this.eventsCount()>=Lm}isEmpty(){return this.Nt.length===0}getEvents(){return this.Nt}}return s})(),Um="csAnalysisEventsPersisted",la="v2/events",Kc=["submit"],Vm=(()=>{class s{constructor(t,e,i,r,a,c,l,h,f,d,y,E){this.h=t,this.J=e,this.R=i,this.W=r,this.Lt=a,this.f=c,this.X=l,this.Dt=h,this.it=f,this.St=d,this.Q=y,this.de=E}init(){let t=new xm,e=this.St.create(`${this.h.getTrackerUri()}/${la}`,!0,"base64");this.aa=this.k_(e),this.ke=this.D_(t,this.aa.getRecoveryStorage(),e),this.ke.init(),this.Q.addListener(this.ke),this.it.addListener(this.ke),this.f.register(Kc,(i,r)=>{this.ke.pushSubmitCommandEvent(i,r)})}onStartTracking(t){this.aa.start(),this.ke.start(t)}onAfterNaturalPageView(){this.ke.initStates()}onAfterArtificialPageView(){this.ke.initStates(),this.ke.collectInitialEvents()}onArtificialPageViewEnd(){this.ke.clearStates(!0)}onBeforeSessionRenewal(){this.ke.clearStates(),this.ke.stop(),this.aa.stop()}onOptout(){this.ke.stop(),this.aa.stop()}D_(t,e,i){var r;let a=new om(window),c=new pm,l=km(this.h,this.W,this.de),h=[];this.h.collectSubmit||csArray.prototype.push.call(h,"submit");let f=new dm(l,this.W,this.Lt,h),d=Dm(this.h,this.W,this.de),y=new um(d,this.Dt),E=new ym(new Pm),v=new bc,C,P,A,w=new Rc(`${this.h.getTrackerUri()}/${la}`),x=new hi(this.J,this.R),b,L,H,W;return new fm(this.h,f,y,c,a,t,w,x,this.X,e,this.W,E,v,i,C,P,A,b,L,H,W)}k_(t){return new gm(new mm(Um),t)}}return s})(),Wi=(()=>{let s;return function(n){n.Artificial="a",n.Renewal="r",n.Natural="n"}(s||(s={})),s})(),jm=(()=>{class s extends Mt{constructor(t,e,i,r,a){super(),this.E=t,this.Q=e,this.Zl=i,this.A=r,this.Je=a}init(){this.L_()}onStart(t){t?this.x_():this.U_()}onStop(){}triggerArtificialPageView(t,e){this.isStarted?this.mf(t,e):Nt(t)&&this.A.overridePath(t,e),this.isStarted||(this.Q.emitTargetingRulesArtificialPageview(this.A.getUrl()),this.A.cleanupOverrideLifespan())}U_(){this.Je.setPageViewType(Wi.Natural),this.E.emitBeforeNaturalPageView(),this.Zl.send(),this.A.cleanupOverrideLifespan(),this.E.emitAfterNaturalPageView()}x_(){this.Je.setPageViewType(Wi.Renewal),this.E.emitBeforeNaturalPageView(),this.Zl.send(),this.E.emitAfterNaturalPageView()}mf(t,e){this.Je.setPageViewType(Wi.Artificial),this.E.emitArtificialPageViewEnd(),Nt(t)&&this.A.overridePath(t,e),this.E.emitBeforeArtificialPageView(),this.Zl.send(),this.A.cleanupOverrideLifespan(),this.E.emitAfterArtificialPageView()}L_(){window.addEventListener("pageshow",t=>{this.isStarted&&t.persisted&&this.mf()})}}return s})(),Hm=window.navigator.language||window.navigator.userLanguage||window.navigator.browserLanguage||window.navigator.systemLanguage||"unknown";function Bm(){return{la:Hm}}var Fm=(()=>{class s{constructor(t,e){this.K=t,this.lt=e,this.th=!1}getRequestParameters(){return{dr:this.eh()}}addUrlMaskingPattern(t){this.lt.addUrlMaskingPattern(t)}enableRemoveQueryString(){this.th=!0}disableRemoveQueryString(){this.th=!1}eh(){let t=this.th?this.K.removeQueryString(this.yf()):this.yf();return this.K.anonymizeUrl(t,{maskingPatterns:this.lt.getUrlMaskingPatterns()})}yf(){let t="";try{t=window.top.document.referrer}catch{if(window.parent)try{t=window.parent.document.referrer}catch{t=""}}return t===""&&(t=document.referrer),typeof t!="string"&&(t=""),t}}return s})(),$m=99999,zm=(()=>{class s{constructor(t){this.w=t,this.V_=this.j_()&&window.CSCurrentScript}H_(){let t=window.CSCurrentScript;if(!t)return null;let e=window.performance.getEntriesByName(t.src,"resource")[0];return!e||this.B_(e)?null:Math.round(e.responseEnd-e.fetchStart)}B_(t){let e=t.transferSize;return e!==void 0?e===0||e===300||e<t.encodedBodySize:t.connectStart===t.domainLookupEnd}getRequestParameters(){if(!this.V_||this.F_()!==1)return{};let t=this.H_();return t===null?{}:{dt:`${Math.min(t,$m)}`}}F_(){var t;return((t=this.w.getSession())===null||t===void 0?void 0:t.pageNumber)||null}j_(){return typeof window.performance=="object"&&typeof window.performance.getEntriesByName=="function"}}return s})(),Jc=":";function ha(s){let n=[],t=Gm(s),e=csString.prototype.split.call(t,"/");for(let i of e)Te(i,Jc)?csArray.prototype.push.call(n,{key:i,value:`CS_ANONYMIZED_${csString.prototype.toUpperCase.call(csString.prototype.slice.call(i,1))}`}):csArray.prototype.push.call(n,{key:i,value:null});return n}function Gm(s){let n=s;return Te(s,"/")&&(n=csString.prototype.substring.call(n,1)),Ei(s,"/")&&(n=csString.prototype.slice.call(n,0,-1)),n}var Qc=(()=>{class s{constructor(){this.Ef=new Set,this.Sf=[],this.ih=new Set,this.nh=[]}addUrlMaskingPattern(t){if(this.Ef.has(t))return;this.Ef.add(t);let e=ha(t);csArray.prototype.push.call(this.Sf,e)}getUrlMaskingPatterns(){return this.Sf}resetPartialUrlMaskingPatterns(){this.ih.clear(),this.nh=[]}addPartialUrlMaskingPattern(t){if(this.ih.has(t))return;this.ih.add(t);let e=ha(t);csArray.prototype.push.call(this.nh,e)}getPartialUrlMaskingPatterns(){return this.nh}}return s})(),qm=["trackPageview"],ua=["setPath"],da=["setQuery"],pa=["referrer:maskUrl"],Wm=["referrer:removeQueryString"],Ym=["referrer:keepQueryString"],Xm=(()=>{class s{constructor(t,e,i,r,a,c,l,h,f,d,y,E,v,C,P){this.h=t,this.f=e,this.E=i,this.Me=r,this.R=a,this.w=c,this.pe=l,this._t=h,this.K=f,this.A=d,this.te=y,this.Je=E,this.Q=v,this.qs=C,this.rn=P}init(){var t;let e=new Ns(this.h.getTrackerUri(),"pageview");this.an=new jm(this.E,this.Q,e,this.A,this.Je);let i=new Fm(this.K,new Qc);this.an.init();let r=new hi(this.Me,this.R,yt,i,this.A,this.pe,fr,this._t,this.Je,new zm(this.w),this.te);this.qs&&r.addProvider(this.qs),this.rn&&r.addProvider(this.rn);let a=this.h.isCsCrosswritingHeap();if(a||this.h.isCsSideloadingHeap()||this.h.isHeapSideloadsCs()){let c=(t=this.h.heapEnvironment)===null||t===void 0?void 0:t.env_id;r.addProvider({getRequestParameters(){let l={cw:a?"1":"2"};return c&&(l.happid=c),l}})}e.setRequestParametersProviders(r),this.f.register(qm,(c,l)=>{if(!$(c)){this.an.triggerArtificialPageView();return}this.rh(l)?this.an.triggerArtificialPageView(c,l):this.an.triggerArtificialPageView(c)}),this.f.register(ua,(c,l)=>{if(!$(c))throw new Error(`Command misuse: ${ua[0]}`);this.rh(l)?this.A.overridePath(c,l):this.A.overridePath(c)}),this.f.register(da,(c,l)=>{if(!$(c))throw new Error(`Command misuse: ${da[0]}`);this.rh(l)?this.A.overrideQuery(c,l):this.A.overrideQuery(c)}),this.f.register(pa,c=>{if(!$(c))throw new Error(`Command misuse: ${pa[0]}`);i.addUrlMaskingPattern(c)}),this.f.register(Wm,()=>i.enableRemoveQueryString()),this.f.register(Ym,()=>i.disableRemoveQueryString())}start(t){this.an.start(t)}onBeforeSessionRenewal(){this.an.stop()}rh(t){return Ye(t)&&t!==null}}return s})(),Km=(()=>{class s{constructor(t){this.ut=t}on(t,e){return i=>{this.ut.hasValidEventTarget(i)&&this.$_(i,t)&&e(i)}}$_(t,e){let i=St(t);return Qt.call(i,e)}isMatchesSelectorSupported(){return!!Qt}}return s})(),Jm=(()=>{class s{constructor(){}onLoad(t){this.ji=t}onLoadCallbackExecute(){this.ji()}start(){let t=this.onLoadCallbackExecute.bind(this);this.z_(t)}z_(t){document.readyState==="complete"||document.readyState!=="loading"&&!document.documentElement.doScroll?csSetTimeout(t):(document.addEventListener("DOMContentLoaded",e),window.addEventListener("load",e));function e(){document.removeEventListener("DOMContentLoaded",e),window.removeEventListener("load",e),t()}}}return j([I("onLoad")],s.prototype,"onLoadCallbackExecute",null),s})(),Qm=(()=>{class s{constructor(t,e,i){this.h=t,this.R=e,this.w=i,this.ss=O.now()}resetStartTime(){this.ss=O.now()}getSessionData(){let{projectId:t}=this.h,e=this.R.getVisitor();e==null&&V.warn("Visitor is null. This happens when a snippet tries to get Session Data before the tag was initialized.");let{id:i,visitsCount:r}=e!=null?e:{},a=this.w.getSession();a===null&&V.warn("Session is null. This happens when a snippet tries to get Session Data before the tag was initialized.");let{pageNumber:c}=a!=null?a:{};return{projectId:t,userId:i,sessionNumber:r,pageNumber:c,relativeTimestamp:O.now()-this.ss}}}return s})(),Zm=["clearSession"],ty=["extendSession"];var ey=["getSessionData"],sy=["session:start:newVisitor"],iy=["session:clear:visitor"],ny=(()=>{class s{constructor(t,e,i,r){this.h=t,this.R=e,this.w=i,this.f=r}init(){this.oh=new Qm(this.h,this.R,this.w),this.f.register(Zm,()=>this.w.removeSession()),this.f.register(ty,()=>this.w.extendSessionPeriodically(),{disableApplyPending:!0}),this.f.register(ey,()=>this.oh.getSessionData(),{disableApplyPending:!0}),this.f.register(sy,()=>this.R.renewVisitor()),this.f.register(iy,()=>{this.R.resetVisitor()},{disableApplyImmediate:!0})}onBeforeNaturalPageView(){this.R.createOrUpdateVisitor(),this.w.createOrUpdateSession()}onBeforeArtificialPageView(){this.w.abortQuotaServiceRequest(),this.R.createOrUpdateVisitor(),this.w.createOrUpdateSession()}onAfterNaturalPageView(){this.oh.resetStartTime()}onAfterArtificialPageView(){this.oh.resetStartTime()}onOptout(){this.R.removeVisitor(),this.w.removeSession()}onCollectStateChange(t,e){this.w.updateCollectState(t,e)}}return s})(),ry=60*1e3,oy=30*1e3,ay=(()=>{class s{constructor(t,e){this.w=t,this.R=e,this.ah=!1,this.G_=hn(()=>this.w.refreshSession(),oy)}onSessionExpired(t){this.q_=t}isSessionValid(){return this.ah?!0:!(!this.w.hasValidSession()||this.w.pollCacheRefreshEvent()&&this.R.isSessionRenewed())}isCurrentPageviewValid(){let t=this.w.hasValidSession();return this.w.pollCacheRefreshEvent(!1)?!this.R.isSessionRenewed():t}refreshSession(){this.isSessionValid()?this.G_():this.W_()&&(this.vf=O.now(),this.renewSession())}renewSession(){this.ah=!0,this.q_(),this.ah=!1}W_(){return!Q(this.vf)||O.now()-this.vf>ry}}return s})();var us;(function(s){s.ContentSquare="CONTENTSQUARE",s.LoadedByClicktale="LOADED_BY_CLICKTALE",s.LoadClicktalePtc="LOAD_CLICKTALE_PTC",s.DualCollectionReview="DUAL_COLLECTION_REVIEW",s.DualCollection="DUAL_COLLECTION",s.ContentSquareTagClickTaleEndpoints="CONTENTSQUARE_TAG_CLICKTALE_ENDPOINTS"})(us||(us={}));function Zc(s){return s.tagDeploymentMode===us.DualCollectionReview||s.tagDeploymentMode===us.DualCollection}function cy(s){return Zc(s)||s.tagDeploymentMode===us.LoadClicktalePtc}var fa=(()=>{let s;return function(n){function t(){return window.ClickTaleIsRecording&&window.ClickTaleIsRecording()}n.isRecording=t;function e(){window.ClickTaleStop&&window.ClickTaleStop()}n.stopRecording=e;function i(c){window.ClickTaleLogicalWithUploadPage&&window.ClickTaleLogicalWithUploadPage(c)}n.triggerLogicalPageView=i;function r(c){window.ClickTaleEvent&&window.ClickTaleEvent(c)}n.sendPageEvent=r;function a(c){window.ClickTaleEventTrigger&&window.ClickTaleEventTrigger(c)}n.sendEventTriggerRecording=a}(s||(s={})),s})();var ly="@ETP@",ga="@user-identifier@",hy=(()=>{class s extends Mt{constructor(t,e,i,r){super(),this.h=t,this.Lw=e,this.le=i,this.Q=r,this.lh=[],this.gi=[]}onStart(){csArray.prototype.forEach.call(this.lh,t=>this.Df(t)),this.lh=[],csArray.prototype.forEach.call(this.gi,t=>this.Lf(t)),this.gi=[]}onStop(){}Df(t){this.xw(t)?Qs.isSupported()&&this.Uw(t):this.Vw(t)}trackPageEvent(t){if(!s.xf(t))throw new Error(`Command misuse: ${tl[0]}`);this.isStarted?this.Df(t):csArray.prototype.push.call(this.lh,t)}xw(t){return Te(t,ga)}async Uw(t){if(!this.h.customHashIdEnabled)return;let e=csString.prototype.slice.call(t,ga.length);if(e.length>Qs.MAX_DIGEST_INPUT_SIZE){V.warn("UserIdentifier event: invalid user identifier");return}let i=await Qs.digest(e);i?(this.vn={eventName:i,isETR:!1,isCustomHashId:!0},this.fa()):V.warn("Page event: unable to compute customHashId"),this.h.encryptionEnabled&&this.Q.emitUserIdentifierEvent(e)}Vw(t){this.Q.emitPageEvent(t),this.vn={eventName:t,isETR:!1,isCustomHashId:!1},this.fa(),this.h.tagDeploymentMode===us.LoadClicktalePtc&&fa.sendPageEvent(t)}Lf(t){this.h.malkaEtrEnabled?this.jw(t):this.Hw(t)}trackEventTriggerRecording(t){if(!s.xf(t))throw new Error(`Command misuse: ${el[0]}`);this.isStarted?this.Lf(t):csArray.prototype.push.call(this.gi,t)}jw(t){Te(t,ly)?this.Q.emitEventTriggerRecording(t,We.ETR_PAGE):this.Q.emitEventTriggerRecording(t,We.ETR_SESSION),this.vn={eventName:t,isETR:!0,isCustomHashId:!1},this.fa()}Hw(t){cy(this.h)&&(this.Q.emitEventTriggerRecording(t,We.ETR_LEGACY),this.vn={eventName:t,isETR:!0,isCustomHashId:!1},this.fa(),this.h.tagDeploymentMode===us.LoadClicktalePtc&&fa.sendEventTriggerRecording(t))}getRequestParameters(){return{value:this.le.compressSync(this.vn.eventName,"base64"),ct:this.le.algorithm,isETR:`${this.vn.isETR}`,isCustomHashId:`${this.vn.isCustomHashId}`}}fa(){this.Lw.send()}static xf(t){return $(t)&&!!csString.prototype.trim.call(t)}}return s})(),tl=["trackPageEvent"],el=["trackEventTriggerRecording"],uy=(()=>{class s{constructor(t,e,i,r,a){this.h=t,this.f=e,this.le=i,this.Me=r,this.Q=a}init(){let t=new Ns(this.h.getTrackerUri(),"pageEvent");this.ga=new hy(this.h,t,this.le,this.Q),t.setRequestParametersProviders(this.ga,this.Me),this.f.register(tl,e=>{this.ga.trackPageEvent(e)}),this.f.register(el,e=>{this.ga.trackEventTriggerRecording(e)})}onStartTracking(){this.ga.start()}}return s})(),xr=(()=>{class s{constructor(){this.subscriptions={}}subscribe(t,e){this.subscriptions[t]=e,Object.keys(this.subscriptions).length===1&&this.onStartTracking()}unsubscribe(t){delete this.subscriptions[t],Object.keys(this.subscriptions).length===0&&this.onStopTracking()}}return s})(),dy=(()=>{class s extends xr{constructor(){super(),this.F=new kc(t=>this.errorListener(t))}onStartTracking(){this.F.observe()}onStopTracking(){this.F.disconnect()}errorListener(t){let e=this.Bw(t);for(let i in this.subscriptions){let r=this.subscriptions[i];r(e)}}Fw(t){return t=t!=null?t:"[NO ERROR MESSAGE]",ot.truncate(t,s._l,ot.ELLIPSIS)}$w(t){return!t||zt(t)?"":ot.truncate(t,s.wl,ot.ELLIPSIS)}Bw(t){return{errorType:"jsError",message:this.Fw(t.message),filename:this.$w(t.filename),lineno:t.lineno,colno:t.colno}}}return s._l=1024,s.wl=150,j([I("Event handler type: error")],s.prototype,"errorListener",null),s})(),py=(()=>{class s{constructor(t){this.f=t}init(){this.Uf(s.zw,Qa),this.Uf(s.Gw,Ja)}Uf(t,e){this.f.register([t],(i,r)=>{!$(i)||!($(r)||Ke(r))||V.error(r,`${e}${i}`)})}}return s.Gw="logSnippetError",s.zw="logImplementationSnippetError",s})(),fy=(()=>{class s{constructor(t,e,i,r,a){this.h=t,this.Y=e,this.Fs=i,this.de=r,this.it=a}init(){this.Y.onChildMessage((t,e,i)=>this.it.emitIframeEvent(t,e,i)),this.Y.setSentiveStatusCallback(()=>this.de.getSensitiveStatus()),this.Y.setRecordingContextCallback(()=>this.Fs.getRecordingContext())}onStartTracking(){this.h.iframesTracking&&this.Y.start()}onOptout(){this.h.iframesTracking&&this.Y.stop()}onSensitiveStatusChange(){if(this.h.iframesTracking){let t=this.de.getSensitiveStatus();this.Y.onSensitiveStatusChange(t)}}onRecordingContextChange(){if(this.h.iframesTracking){let t=this.Fs.getRecordingContext();this.Y.onRecordingContextChange(t)}}}return s})(),gy=(()=>{class s extends Mt{constructor(t){super(),this.h=t,this.hh=0,this.Ce=new Map,this.Vf={boundElement:window,type:"message",listener:e=>this.uh(e)}}onChildMessage(t){this.jf=t}setRecordingContextCallback(t){this.qw=t}setSentiveStatusCallback(t){this.Ww=t}onSensitiveStatusChange(t){let e=mt.buildBaseMessage(J.SensitiveStatus,oe.Parent,this.h.projectId);e.content=t;let i=mt.buildBaseMessage(J.SensitiveStatus,oe.Parent,this.h.projectId);i.content={...t,started:!1,useAnonymization:!0,capturedElementSelector:""},this.Ce.forEach(r=>{if(r.port){let a=this.ma(r)?i:e;this.ph(r,a)}})}onRecordingContextChange(t){let e=mt.buildBaseMessage(J.RecordingContext,oe.Parent,this.h.projectId);e.content=t,this.Ce.forEach(i=>{!this.ma(i)&&i.port&&this.ph(i,e)})}sendToChildren(t,e){let i=mt.buildBaseMessage(t,oe.Parent,this.h.projectId);i.content=e,this.Yw(i)}onStart(){Pt(this.Vf,!1),this.Hf()}onStop(){this.Xw(),Ot(this.Vf,!1),this.Kw()}Hf(){let t=this.Jw();this.Qw(t),csArray.prototype.forEach.call(t,e=>{if(this.Zw(e)===null){let r={iframe:e};this.Ce.set(this.hh,r),this.hh+=1}}),this.tb()}Jw(){return csArray.prototype.filter.call(it.findAllElements("iframe"),t=>this.eb(t))}Qw(t){this.Ce.forEach((e,i)=>{e.iframe&&csArray.prototype.indexOf.call(t,e.iframe)===-1&&this.sb(i,e)})}sb(t,e){e.port&&mt.closeChannelPort(e.port),this.Ce.delete(t)}Kw(){this.Ce.forEach(t=>{t.port&&mt.closeChannelPort(t.port)}),this.Ce.clear()}Zw(t){let e=null;return this.Ce.forEach((i,r)=>{e===null&&i.iframe===t&&(e=r)}),e}eb(t){return t.id!==Ca&&(!t.src||fe(t.src,"about:")||br(Za(t.src),this.h.hostnames))}Yw(t){this.Ce.forEach(e=>{this.ph(e,t)})}ph(t,e){let i=e.type===J.SensitiveStatus||e.type===J.RecordingContext;t.port&&(!i||t.initialStatusSent)&&mt.sendChannelMessage(t.port,e)}tb(){this.Ce.forEach((t,e)=>{if(t.iframe.contentWindow){let i=this.ib(e);mt.sendPostMessage(t.iframe.contentWindow,"*",i)}})}Xw(){let t=this.nb();this.Ce.forEach(e=>{e.port?mt.sendChannelMessage(e.port,t):e.iframe.contentWindow&&mt.sendPostMessage(e.iframe.contentWindow,"*",t)})}ib(t){return mt.buildBaseMessage(J.Discovery,oe.Parent,this.h.projectId,t)}nb(){return mt.buildBaseMessage(J.Stop,oe.Parent,this.h.projectId)}rb(t,e){let i=this.Ce.get(t);if(i===void 0){V.error(`Parent received channel messaging initialization from unknow child id : ${t} (${this.hh})`);return}i.port=e,i.port.onmessage=r=>{this.fh(r,i)}}ob(t){if(!t.port)return;let e=mt.buildBaseMessage(J.SensitiveStatus,oe.Parent,this.h.projectId),i=this.Ww();this.ma(t)&&(i.started=!1,i.capturedElementSelector="",i.useAnonymization=!0),e.content=i,mt.sendChannelMessage(t.port,e)}ab(t){if(!t.port)return;let e=mt.buildBaseMessage(J.RecordingContext,oe.Parent,this.h.projectId),i=this.qw();this.ma(t)&&(i.isRecording=!1),e.content=i,mt.sendChannelMessage(t.port,e)}fh(t,e){if(e===void 0){V.error(`Parent received channelMessage from unknown child : ${csJSON.stringify(t.data)}`);return}let i=t.data.type,r=t.data.content;i===J.EndOfBufferedMessages?(this.ob(e),this.ab(e),e.initialStatusSent=!0):this.jf(e.iframe,i,r)}uh(t){if(mt.isMessageValid(t,oe.Child,this.h.projectId,this.h.hostnames))switch(t.data.type){case J.Discovery:if(t.data.id===void 0){this.Hf();return}if(t.ports&&t.ports.length===1&&this.Ce.has(t.data.id)){this.rb(t.data.id,t.ports[0]);return}V.error(`Parent received wrong channelMessage initialization : (${t.origin}) : ${csJSON.stringify(t.data)}`);break;case J.ChildLogMessage:this.jf(null,J.ChildLogMessage,t.data.content);break;default:V.warn(`Parent received unexpected postMessage type from child (${t.origin}) : ${csJSON.stringify(t.data)}`)}}ma(t){return k.isMaskedElement(t.iframe)||k.isMaskedElementChild(t.iframe)}}return s})(),my=(()=>{class s{constructor(t){this.cb=t}buildApiErrors(t,e){let i=this.cb.collectDataPoints(t,e);if(i===null)return null;let r=this.lb(t,i);if(e){let a=this.hb(t,i);return{apiError:r,detailedApiError:a}}return{apiError:r}}hb(t,e){let i=this.Bf(t);return e.collectQueryParam&&t.queryParameters&&(i.queryParameters=t.queryParameters),e.collectRequestBody&&t.requestBody&&(i.requestBody=t.requestBody),e.collectResponseBody&&t.responseBody&&(i.responseBody=t.responseBody),Object.keys(e.standardRequestHeaders).length>0&&(i.standardRequestHeaders=e.standardRequestHeaders),Object.keys(e.standardResponseHeaders).length>0&&(i.standardResponseHeaders=e.standardResponseHeaders),Object.keys(e.customRequestHeaders).length>0&&(i.customRequestHeaders=csJSON.stringify(e.customRequestHeaders)),Object.keys(e.customResponseHeaders).length>0&&(i.customResponseHeaders=csJSON.stringify(e.customResponseHeaders)),Object.keys(e.plainCustomRequestHeaders).length>0&&(i.plainCustomRequestHeaders=e.plainCustomRequestHeaders),Object.keys(e.plainCustomResponseHeaders).length>0&&(i.plainCustomResponseHeaders=e.plainCustomResponseHeaders),e.plainResponseBodyAttributes&&Object.keys(e.plainResponseBodyAttributes).length>0&&(i.plainResponseBodyAttributes=e.plainResponseBodyAttributes),e.plainRequestBodyAttributes&&Object.keys(e.plainRequestBodyAttributes).length>0&&(i.plainRequestBodyAttributes=e.plainRequestBodyAttributes),Object.keys(e.responseBodyAttributes).length>0&&(i.responseBodyAttributes=csJSON.stringify(e.responseBodyAttributes)),Object.keys(e.requestBodyAttributes).length>0&&(i.requestBodyAttributes=csJSON.stringify(e.requestBodyAttributes)),i}Bf(t){return{errorType:"apiError",url:t.url,method:t.method,requestTime:t.requestTime,responseTime:t.responseTime,statusCode:t.statusCode,library:t.library}}lb(t,e){let i=this.Bf(t);return e.matchingBodyContents.length>0&&(i.matchingBodyContents=e.matchingBodyContents),Object.keys(e.plainResponseBodyAttributes).length>0&&(i.plainBodyResponseAttributes=e.plainResponseBodyAttributes),i}}return s})(),yy=(()=>{class s extends xr{constructor(t,e,i){super(),this.ya=t,this.Ea=e,this.db=i,this.gh=0,this.pb=new my(i)}subscribe(t,e,i){i!=null&&i.detailedEvent&&(Object.defineProperty(e,"detailedEvent",{value:i.detailedEvent}),this.gh++),super.subscribe(t,e)}unsubscribe(t){var e;!((e=this.subscriptions[t])===null||e===void 0)&&e.hasOwnProperty("detailedEvent")&&this.gh--,super.unsubscribe(t)}init(){let t=this.db.computeApiErrorCollectionOptions();this.ya.setCollectionOptions(t),this.ya.onEvent(e=>this.Ff(e)),this.Ea.setCollectionOptions(t),this.Ea.onEvent(e=>this.Ff(e))}onStartTracking(){this.ya.start(),this.Ea.start()}onStopTracking(){this.ya.stop(),this.Ea.stop()}Ff(t){let e=this.pb.buildApiErrors(t,this.gh!==0);if(e)for(let i in this.subscriptions){let r=this.subscriptions[i];r.hasOwnProperty("detailedEvent")?e.detailedApiError&&r(e.detailedApiError):r(e.apiError)}}}return s})(),Ey=(()=>{class s{constructor(t,e,i=!1){this.lt=t,this.K=e,this.Lr=i}addUrlMaskingPattern(t){this.lt.addUrlMaskingPattern(t)}anonymize(t){let e=this.K.removeQueryString(t.url),i={maskingPatterns:this.lt.getUrlMaskingPatterns(),partialMaskingPatterns:this.lt.getPartialUrlMaskingPatterns(),maskNames:this.Lr};return{...t,url:this.K.anonymizeUrl(e,i),library:t.library?this.K.anonymizeUrl(t.library,i):void 0}}}return s})(),Sy="CS_ANONYMIZED_VALUE",vy=(()=>{class s{constructor(t,e){this.I=t,this.A=e}anonymize(t){return $(t.message)&&(t.message=this.fb(t.message),t.message=this.I.anonymizePII(t.message)),$(t.filename)&&(t.filename=this.A.computeOverriddenUrl(t.filename)),t}fb(t){return csString.prototype.replace.call(t,/(value\s*=\s*".*"|value\s*=\s*'.*')/,`value='${Sy}'`)}}return s})(),_y=(()=>{class s extends xr{constructor(t){super(),this.gb=t,this.Ls=[{boundElement:document,type:"touchstart",listener:e=>this.G(e)},{boundElement:document,type:"touchmove",listener:e=>this.G(e)},{boundElement:document,type:"touchend",listener:e=>this.G(e)}],this.xr=new hr,this.xr.onGesture((e,i)=>this.vl(e,i))}vl(t,e){for(let i in this.subscriptions){let r=this.subscriptions[i];r(t,e)}}onStartTracking(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.Ls,t=>Pt(t))}onStopTracking(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.Ls,t=>Ot(t))}canDetectGesture(){return typeof devicePixelRatio!="undefined"}G(t){this.gb.tryToExecute("process gesture event",()=>{if(this.xr.isValidTouchEvent(t))switch(t.type){case"touchstart":this.xr.processActionDown(t);break;case"touchmove":this.xr.processActionMove();break;case"touchend":this.xr.processActionUp(t);break}})()}static isSwipe(t){return t.type===vt.FLICK||t.type===vt.DRAG}}return s})(),wy=(()=>{class s extends Mt{constructor(t,e){super(),this.U=t,this.mh=e,this.$f=0}onStart(){V.isPerfLoggingActive()&&(this.Mr=window.csSetInterval(()=>this.zf(),s.mb))}onStop(){V.isPerfLoggingActive()&&(this.zf(),csClearInterval(this.Mr))}zf(){if(Fi.isEmpty||this.$f>=s.yb)return;this.$f++;let t={a:s.Eb,l:s.Sb,...this.mh.getRequestParameters()},e=[];Fi.forEach(i=>{csArray.prototype.forEach.call(i,r=>{csArray.prototype.push.call(e,{...r,...t})})}),this.U.send(e),Fi.clear()}}return s.Eb="uxa",s.Sb="perf",s.mb=5e3,s.yb=5,s})(),by=(()=>{class s{constructor(t,e,i){this.h=t,this.mh=e,this.St=i}init(){this.Gf=new wy(this.St.create(this.h.getLoggerUri(),!0),this.mh)}onStartTracking(){this.Gf.start()}onOptout(){this.Gf.stop()}}return s})(),Ay=(()=>{class s{constructor(t){this.de=t,this.qf=!1}enableRecordingContext(t,e,i){this.qf=!0,this.Xi=t,this.w=e,this.Ai=i}getRecordingContext(){var t,e,i,r;if(!this.qf)return{isRecording:!1,recordingStartTimestamp:0,etrState:Lt.ETR_OFF,etrStatus:kt.ETR_DISABLED,collectState:N.ANALYTICS_ONLY};let a=this.w.getSession();return{isRecording:this.Xi.isRecording(),useAnonymization:this.de.getSensitiveStatus().useAnonymization,enableOnlineResources:(t=this.Xi.getStaticResourceManagerStatus())===null||t===void 0?void 0:t.onlineAssets.activated,enableOnlineResourcesOnNextPageview:(e=this.Xi.getStaticResourceManagerStatus())===null||e===void 0?void 0:e.onlineAssets.enabledOnNextPageview,recordingStartTimestamp:parseInt(this.Xi.getRecordingStartTimestamp(),10),etrState:(i=a==null?void 0:a.etrState)!==null&&i!==void 0?i:Lt.ETR_OFF,etrStatus:this.Ai.getEtrStatus(a),collectState:(r=a==null?void 0:a.collectState)!==null&&r!==void 0?r:N.ANALYTICS_ONLY}}}return s})(),ui=(()=>{class s{static isRecordingSupported(){return"MutationObserver"in window&&"visibilityState"in document}static isAsyncSerializationSupported(){return"Promise"in window&&"findIndex"in csArray.prototype}}return s})(),Ty=(()=>{class s extends Mt{constructor(t,e,i,r){super(),this.at=t,this.yh=e,this.J=i,this.ce=r,this.Sa=[],this.ks=0}init(){this.at.init()}initStates(){this.Eh(),this.Sa=[],this.ks=0,this.Fl()}Fl(){this.ss=O.now()}Pi(){return O.now()-this.ss}onStart(){this.at.subscribe(s.Mt,t=>this.G(t))}onStop(){this.at.unsubscribe(s.Mt)}onIframeApiError(t){this.G(t)}G(t){this.isStarted&&this.ks<s.mr&&(t.relativeTime=this.Pi(),csArray.prototype.push.call(this.Sa,this.ce.anonymize(t)),this.Ur(),ct.counters.networkRequests.count("collected"))}Eh(){this.yh.removeQueryParams(),this.yh.setQueryParams(this.J.getRequestParameters())}Ur(){this.yh.send({errors:this.Sa}),this.Sa=[],this.ks+=1}}return s.Mt="ApiErrorsService",s.mr=20,s})(),Ry="api-errors",ma=["api-errors:maskUrl"],Cy=(()=>{class s{constructor(t,e,i,r,a,c,l){this.at=t,this.ce=e,this.h=i,this.J=r,this.it=a,this.f=c,this.St=l}init(){let t=this.St.create(`${this.h.getTrackerUri()}/${Ry}`,!0);this.Ni=new Ty(this.at,t,this.J,this.ce),this.Ni.init(),this.it.addListener(this.Ni),this.ht()}ht(){this.f.register(ma,t=>{if(!$(t))throw new Error(`Command misuse: ${ma[0]}`);this.ce.addUrlMaskingPattern(t)})}onStartTracking(){this.Ni.start()}onAfterNaturalPageView(){this.Ni.initStates()}onAfterArtificialPageView(){this.Ni.initStates()}onBeforeSessionRenewal(){this.Ni.stop()}onOptout(){this.Ni.stop()}}return s})(),Iy=20,Py="Custom Error:",Oy="https://cserror.com/texterror.js",Ny=(()=>{class s extends Mt{constructor(t,e,i,r,a,c){super(),this.ws=t,this.Sh=e,this.J=i,this.ae=r,this.$s=a,this.A=c,this.va=[],this.vi=0,this.Mi=[]}initStates(){this.ss=O.now(),this.Sh.removeQueryParams(),this.Sh.setQueryParams(this.J.getRequestParameters()),this.va=[],this.vi=0}onStart(){this.ws.subscribe(s.Mt,t=>this.G(t)),this.vh()}onStop(){this.ws.unsubscribe(s.Mt)}onIframeJavascriptError(t){this.G(t)}trackCustomError(t){let e={errorType:"jsError",message:`${Py} ${t}`,lineno:1,colno:1,filename:Oy};this.Vr(e)}Vr(t){if(this.isStarted){let e=this.G(t);e&&this.$s.emitCustomJavaScriptErrorEvent(e)}else csArray.prototype.push.call(this.Mi,t)}vh(){this.isStarted&&(csArray.prototype.forEach.call(this.Mi,t=>this.Vr(t)),this.Mi=[])}G(t){if(this.isStarted&&this.vi<Iy){let e={...t,pageUrl:this.A.getAnonymizedUrl(),rt:this.Pi()};return this.ae.anonymize(e),csArray.prototype.push.call(this.va,e),this.Ur(),e}return null}Pi(){return O.now()-this.ss}Ur(){this.Sh.send({errors:this.va}),this.va=[],this.vi+=1}}return s.Mt="JavaScriptErrorsService",s})(),Ur=["trackError"],My="errors",ky=(()=>{class s{constructor(t,e,i,r,a,c,l,h,f){this.ws=t,this.ae=e,this.h=i,this.J=r,this.it=a,this.f=c,this.$s=l,this.A=h,this.St=f}init(){let t=this.St.create(`${this.h.getTrackerUri()}/${My}`,!0);this.ki=new Ny(this.ws,t,this.J,this.ae,this.$s,this.A),this.it.addListener(this.ki),this.ht()}ht(){this.h.jsCustomErrorsEnabled&&!this.h.customErrors.enabled&&this.f.register(Ur,t=>{this.ki.trackCustomError(t)})}onStartTracking(){this.ki.start()}onAfterNaturalPageView(){this.ki.initStates()}onAfterArtificialPageView(){this.ki.initStates()}onBeforeSessionRenewal(){this.ki.stop()}onOptout(){this.ki.stop()}}return s})(),Dy=(()=>{let s;return function(n){function a(h,f,d=!1){let E={message:ot.truncate(h,300,ot.ELLIPSIS),errorType:"customError"};return(d||l(f))&&(c(f),E.attributes=f),E}n.buildCustomErrorEvent=a;function c(h){for(let f in h){let d=h[f];if(typeof d=="string"&&d.length>30&&(d=ot.truncate(d,30,ot.ELLIPSIS),h[f]=d),f.length>30){let y=ot.truncate(f,30,ot.ELLIPSIS);delete h[f],h[y]=d}}}function l(h){let f=Object.keys(h).length;return f>0&&f<=5}}(s||(s={})),s})(),Ly=20,xy=(()=>{class s extends Mt{constructor(t,e,i,r,a){super(),this._h=t,this.J=e,this.Xs=i,this.Q=r,this.bs=a,this._a=[],this._i=0,this.Mi=[]}initStates(){var t;this.Eh(),this.ss=O.now(),this._a=[],this._i=0,(t=this.bs)===null||t===void 0||t.onEvent(e=>this.G(e))}trackCustomError(t,e={}){if(!($(t)&&Ye(e)&&Nt(e)))throw new Error(`Command misuse: ${Ur[0]}`);let i=Dy.buildCustomErrorEvent(t,e);this.Vr(i)}onIframeCustomError(t){this.G(t)}onStart(){var t;this.vh(),(t=this.bs)===null||t===void 0||t.start()}onStop(){var t;(t=this.bs)===null||t===void 0||t.stop()}vh(){this.isStarted&&(csArray.prototype.forEach.call(this.Mi,t=>this.Vr(t)),this.Mi=[])}Vr(t){if(this.isStarted){let e=this.G(t);e&&this.Q.emitCustomErrorEvent(e)}else csArray.prototype.push.call(this.Mi,t)}G(t){if(this.isStarted&&this._i<Ly){let e=this.vb(t);return csArray.prototype.push.call(this._a,e),this.Ur(),e}return null}vb(t){let e={...t,rt:this.Pi()};return e.message=this.Xs.anonymize(t.message),e}Eh(){this._h.removeQueryParams(),this._h.setQueryParams(this.J.getRequestParameters())}Pi(){return O.now()-this.ss}Ur(){this._h.send({errors:this._a}),this._a=[],this._i+=1}}return s})(),Uy="custom-errors",Vy=(()=>{class s{constructor(t,e,i,r,a,c,l,h){this.Xs=t,this.h=e,this.J=i,this.f=r,this.$s=a,this.St=c,this.it=l,this.bs=h}init(){let t=this.St.create(`${this.h.getTrackerUri()}/${Uy}`,!0);this.Di=new xy(t,this.J,this.Xs,this.$s,this.bs),this.it.addListener(this.Di),this.ht()}ht(){this.f.register(Ur,(t,e)=>{this.Di.trackCustomError(t,e)})}onStartTracking(){this.Di.start()}onAfterNaturalPageView(){this.Di.initStates()}onAfterArtificialPageView(){this.Di.initStates()}onBeforeSessionRenewal(){this.Di.stop()}onOptout(){this.Di.stop()}}return s})(),jy=(()=>{class s{constructor(){this.bh=Wi.Natural}setPageViewType(t){this.bh=t}getPageViewType(){return this.bh}getRequestParameters(){return{pvt:this.bh}}}return s})(),Hy=(()=>{class s{constructor(t){this.X=t}onAfterVisitorRenewal(){this.X.renewSession()}}return s})();var By=(()=>{let s;return function(n){function t(){let i=navigator.userAgent+navigator.language+navigator.platform,r=csString.prototype.slice.call(e(i).toString(16),-4),a=new csDate().getTime(),c="xxxxxxxx-hhhh-axxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,l=>{let h=(a+Math.random()*16)%16|0;return a=Math.floor(a/16),(l==="x"?h:h&7|8).toString(16)});return csString.prototype.replace.call(c,"hhhh",r)}n.generate=t;function e(i){let r=0;for(let a=0;a<i.length;a+=1)r=csString.prototype.charCodeAt.call(i,a)+(r<<6)+(r<<16)-r;return Math.abs(r)}}(s||(s={})),s})();var ye;(function(s){s.replayRecordingUnmaskedUrlRegex="replayRecordingUnmaskedUrlRegex",s.replayRecordingMaskedUrlRegex="replayRecordingMaskedUrlRegex",s.replayRecordingUnmaskedUrlRegexRules="replayRecordingUnmaskedUrlRegexRules",s.replayRecordingMaskedUrlRegexRules="replayRecordingMaskedUrlRegexRules"})(ye||(ye={}));var ae;(function(s){s.START="start",s.NOT_START="not-start",s.END="end",s.NOT_END="not-end",s.CONTAIN="contain",s.NOT_CONTAIN="not-contain",s.EXACT="exact",s.NOT_EXACT="not-exact"})(ae||(ae={}));var Fy=(()=>{class s{constructor(t,e,i,r){this.pe=t,this.h=e,this.A=i,this.Br=r}init(){this.Ub()}shouldMaskNonTextElements(){if(this.h.anonymisationMethod!==ye.replayRecordingMaskedUrlRegexRules)return!1;if(this.h.isSMB)return this.shouldUseAnonymization();let t=this.Br.getMatchingRules(this.A.getAnonymizedUrl());return csArray.prototype.some.call(t,e=>e.maskMedia)}shouldUseAnonymization(){if(this.pe.isReplayUnanonymizedAllowedByConsent()){switch(this.h.anonymisationMethod){case null:case ye.replayRecordingMaskedUrlRegex:return!!(this.h.replayRecordingMaskedUrlRegex&&this.h.replayRecordingMaskedUrlRegex.test(this.A.getAnonymizedUrl()));case ye.replayRecordingMaskedUrlRegexRules:return this.Br.evaluateUrl(this.A.getAnonymizedUrl())}return!1}else{switch(this.h.anonymisationMethod){case null:case ye.replayRecordingUnmaskedUrlRegex:return!(this.h.replayRecordingUnmaskedUrlRegex&&this.h.replayRecordingUnmaskedUrlRegex.test(this.A.getAnonymizedUrl()));case ye.replayRecordingUnmaskedUrlRegexRules:return!this.Br.evaluateUrl(this.A.getAnonymizedUrl())}return!0}}Ub(){this.h.anonymisationMethod===ye.replayRecordingMaskedUrlRegexRules&&this.h.replayRecordingMaskedUrlRegexRules?this.Br.setRegexRules(this.h.replayRecordingMaskedUrlRegexRules):this.h.anonymisationMethod===ye.replayRecordingUnmaskedUrlRegexRules&&this.h.replayRecordingUnmaskedUrlRegexRules&&this.Br.setRegexRules(this.h.replayRecordingUnmaskedUrlRegexRules)}}return s})(),$y=(()=>{class s{constructor(){this.Ih=[]}setRegexRules(t){this.Ih=csArray.prototype.map.call(t,e=>this.Vb(e))}evaluateUrl(t){return csArray.prototype.some.call(this.Ih,e=>this.Qf(t,e))}getMatchingRules(t){return csArray.prototype.filter.call(this.Ih,e=>this.Qf(t,e))}Qf(t,e){var i,r;let a=this.jb(t,e);return!!(e!=null&&e.notOperator?!(!((i=e.regex)===null||i===void 0)&&i.test(a)):!((r=e.regex)===null||r===void 0)&&r.test(a))}jb(t,e){let i=Ar(t);return i?e.ignoreQueryParams&&e.ignoreURIFragments?`${i.origin}${i.pathname}`:e.ignoreQueryParams?`${i.origin}${i.pathname}${i.hash}`:e.ignoreURIFragments?`${i.origin}${i.pathname}${i.search}`:t:t}wa(t){return t.ignoreCaseSensitivity?"i":""}Vb(t){switch(t.operator){case ae.NOT_START:t.notOperator=!0;case ae.START:t.regex=new csRegExp(`^${t.value}`,this.wa(t));break;case ae.NOT_END:t.notOperator=!0;case ae.END:t.regex=new csRegExp(`${t.value}$`,this.wa(t));break;case ae.NOT_CONTAIN:t.notOperator=!0;case ae.CONTAIN:t.regex=new csRegExp(`${t.value}`,this.wa(t));break;case ae.NOT_EXACT:t.notOperator=!0;case ae.EXACT:t.regex=new csRegExp(`^${t.value}$`,this.wa(t));break;default:V.warn(`buildRegexWithRule, unknown type: ${t.operator}`)}return t}}return s})(),sl=(()=>{class s{constructor(){this.Hb=["application/json","application/graphql","application/xml","text/plain","text/csv","text/html","text/xml","text/javascript"]}setCollectionOptions(t){this.Ph=t}isValidBodyType(t){let e=t["content-type"];if(!e)return!1;let i=csString.prototype.toLocaleLowerCase.call(e);return ai(this.Hb,r=>Te(i,r))}canCollect(t,e){return this.Bb(t,e)&&this.Fb(e)}Bb(t,e){return t>=400||t>=200&&t<300&&this.Ph.statusCodes.has(t)&&this.Oh(e)}Oh(t){return ai(this.Ph.urls,e=>csString.prototype.indexOf.call(t,e)!==-1)}Fb(t){return Cu(this.Ph.excludedDomains,e=>csString.prototype.indexOf.call(t,e)===-1)}}return s})(),zy=0,Gy=(()=>{class s extends sl{constructor(){super(),this.$t=csSymbol("ApiCall"),this.N=!1,this.bn=null,this.An=null,this.ba=null,this.$b=({context:t,args:e,callerName:i})=>this.interceptOpen(t,e,i),this.zb=({context:t,args:e})=>this.interceptSetRequestHeader(t,e),this.Gb=({context:t,args:e})=>this.interceptSend(t,e)}onEvent(t){this.O=t}start(){this.N||(this.Nh(),this.bn&&this.bn.activate(),this.An&&this.An.activate(),this.ba&&this.ba.activate(),this.N=!0)}stop(){this.N&&(this.bn&&this.bn.deactivate(),this.An&&this.An.deactivate(),this.N=!1)}Nh(){this.bn||(this.bn=Kt({target:XMLHttpRequest.prototype,methodName:"open",hook:this.$b,options:{withCallerName:!0}})),this.An||(this.An=Kt({target:XMLHttpRequest.prototype,methodName:"setRequestHeader",hook:this.zb})),this.ba||(this.ba=Kt({target:XMLHttpRequest.prototype,methodName:"send",hook:this.Gb}))}interceptOpen(t,e,i){if(!e[1]||!$(e[1]))return;let[r,a]=csString.prototype.split.call(e[1],"?");t[this.$t]={library:i,requestTime:O.now(),method:e[0],url:pe(r),queryParameters:a,statusCode:zy,responseHeaders:{},requestHeaders:{},responseBody:"",requestBody:""},t.addEventListener("readystatechange",()=>this.readyStateChangeListener(t))}readyStateChangeListener(t){t[this.$t]&&t.readyState===XMLHttpRequest.DONE&&this.canCollect(t.status,t[this.$t].url)&&(t[this.$t].responseTime=O.now(),t[this.$t].statusCode=t.status,t[this.$t].responseHeaders=this.qb(t.getAllResponseHeaders()),super.isValidBodyType(t[this.$t].responseHeaders)&&(t.responseType===""||t.responseType==="text")&&(t[this.$t].responseBody=t.responseText),this.O(t[this.$t]))}interceptSetRequestHeader(t,e){if(!t[this.$t])return;let i=e[0],r=csString.prototype.valueOf.call(new csString(e[1]));typeof i!="string"||r.length===0||(i=csString.prototype.toLowerCase.call(csString.prototype.trim.call(i)),r=csString.prototype.trim.call(r),t[this.$t].requestHeaders[i]?t[this.$t].requestHeaders[i]+=`, ${r}`:t[this.$t].requestHeaders[i]=r)}interceptSend(t,e){t[this.$t]&&super.isValidBodyType(t[this.$t].requestHeaders)&&typeof e[0]=="string"&&(t[this.$t].requestBody=e[0])}qb(t){let e={};return csArray.prototype.forEach.call(csString.prototype.split.call(t,/[\r\n]+/),i=>{let[r,a]=csString.prototype.split.call(i,/:\s*/);a&&(e[csString.prototype.toLowerCase.call(r)]=csString.prototype.trim.call(a))}),e}}return j([I("XhrRequestTracker.interceptOpen")],s.prototype,"interceptOpen",null),j([I("XhrRequestTracker.readyStateChangeListener")],s.prototype,"readyStateChangeListener",null),j([I("XhrRequestTracker.interceptSetRequestHeader")],s.prototype,"interceptSetRequestHeader",null),j([I("XhrRequestTracker.interceptSend")],s.prototype,"interceptSend",null),s})(),qy=(()=>{class s extends sl{constructor(){super(),this.N=!1,this.Tn=null,this.Wb=({result:t,args:e,callerName:i})=>{this.interceptFetch(t,e,i)}}onEvent(t){this.O=t}start(){this.N||this.Yb()&&(this.Xb(),this.Tn&&this.Tn.activate(),this.N=!0)}stop(){this.N&&(this.Tn&&this.Tn.deactivate(),this.N=!1)}Yb(){return!!window.fetch&&typeof window.fetch=="function"}Kb(t){if(t[0]&&typeof t[0].clone=="function"){let e=Is(t);return e[0]=t[0].clone(),e}return t}Xb(){this.Tn||(this.Tn=Kt({target:window,methodName:"fetch",hook:this.Wb,hookPrepareArgs:this.Kb,options:{withCallerName:!0}}))}async interceptFetch(t,e,i){let r=e[0],a=e[1],c=new Request(r,a);if(!$(c.url))return;let l=O.now(),h;try{h=await t}catch(E){if(this.Jb(E)||this.Zf(E)||this.Qb(E)||this.Zb(E))return;throw E}let[f,d]=csString.prototype.split.call(c.url,"?"),y=pe(f);if(h&&super.canCollect(h.status,y)){let E={library:i,method:c.method,url:y,queryParameters:d,requestTime:l,responseTime:O.now(),statusCode:h.status,requestBody:"",responseBody:"",requestHeaders:this.tg(c.headers),responseHeaders:this.tg(h.headers)};if(!h.bodyUsed&&super.isValidBodyType(E.responseHeaders))try{E.responseBody=await h.clone().text()}catch(v){if(this.Zf(v))return}super.isValidBodyType(E.requestHeaders)&&(E.requestBody=await c.text()),this.O(E)}}Jb(t){return t instanceof TypeError}Zf(t){return t instanceof DOMException&&t.name==="AbortError"}Zb(t){return t instanceof DOMException&&t.name==="TimeoutError"}Qb(t){return t instanceof DOMException&&csArray.prototype.some.call(s.tA,e=>e===t.name)}tg(t){let e={};return t.forEach((i,r)=>{i&&(e[csString.prototype.toLowerCase.call(r)]=csString.prototype.trim.call(i))}),e}}return s.tA=["NoModificationAllowedError","InvalidStateError","OperationError"],j([I("FetchRequestTracker.interceptFetch")],s.prototype,"interceptFetch",null),s})(),Wy=(()=>{class s{constructor(){this.eA=64e3,this.sA=5e3,this.iA=2e3,this.eg=8e3,this.ms=!!self.TextEncoder,this.ms&&(this.nA=new TextEncoder)}Fr(t){return this.nA.encode(t).byteLength}sg(t,e,i){let r=0;t[e]&&(r+=this.Fr(t[e]),r>this.eg&&(r=0,t[e]=ot.ELLIPSIS)),t[i]&&(r+=this.Fr(csJSON.stringify(t[i])),r>this.eg&&(t[i]=s.truncatedObjectMarker))}rA(t){t.queryParameters&&this.Fr(t.queryParameters)>this.iA&&(t.queryParameters=ot.ELLIPSIS)}oA(t){t.requestBody&&this.Fr(t.requestBody)>this.eA&&(t.requestBody=ot.ELLIPSIS),t.responseBody&&this.Fr(t.responseBody)>this.sA&&(t.responseBody=ot.ELLIPSIS)}truncate(t){this.ms?(this.rA(t),this.oA(t),this.sg(t,"customResponseHeaders","plainCustomResponseHeaders"),this.sg(t,"customRequestHeaders","plainCustomRequestHeaders")):(t.queryParameters="",t.requestBody="",t.responseBody="",t.customResponseHeaders="",t.customRequestHeaders="",t.plainCustomResponseHeaders={},t.plainCustomRequestHeaders={})}}return s.truncatedObjectMarker={[ot.ELLIPSIS]:ot.ELLIPSIS},s})(),Yy=(()=>{let s;return function(n){function t(r){let a="[",c="]",l=[];for(let h=0;h<r.length;++h)if(r[h]===a)csArray.prototype.push.call(l,r[h]);else if(r[h]===c)if(csString.prototype.indexOf.call(r,a)>-1)csArray.prototype.pop.call(l);else return!1;return l.length===0}function e(r){if(!r)return!0;if(!t(r))return!1;let a=csString.prototype.split.call(r,/[\[\]]/);return csArray.prototype.every.call(a,c=>{let l=c[0],h=c[c.length-1];if((l==="'"||l==='"')&&l!==h)return!1;let f=csString.prototype.split.call(c,".");return f[0].length===0&&csArray.prototype.shift.call(f),csArray.prototype.every.call(f,d=>{let y=/^\-?\d+$/.exec(d);return y?parseInt(y[0],10)>=0:d==="$"||/\w+/.test(d)})})}n.isValidJSONPath=e;function i(r,a){if(!r)return;let c=csString.prototype.split.call(r,/[\$\[\]]/),l=[];csArray.prototype.forEach.call(c,f=>{if(f[0]==="'"||f[0]==='"'){csArray.prototype.push.call(l,csString.prototype.substring.call(f,1,f.length-1));return}csArray.prototype.push.call(l,...csArray.prototype.filter.call(csString.prototype.split.call(f,"."),d=>d.length>0))}),l[0]==="$"&&csArray.prototype.shift.call(l);let h=a;for(let f of l)if(h[f]!==void 0)h=h[f];else return;return h}n.getJSONPathValue=i}(s||(s={})),s})(),Xy=(()=>{class s{constructor(){this.aA=new Set(["age","cache-control","clear-site-data","expires","pragma","warning","downlink","ect","rtt","last-modified","connection","keep-alive","accept","accept-encoding","accept-language","expect","access-control-allow-origin","access-control-allow-credentials","access-control-allow-headers","access-control-allow-methods","access-control-expose-headers","access-control-max-age","access-control-request-headers","access-control-request-method","origin","timing-allow-origin","content-length","content-type","content-encoding","content-language","via","host","referrer-policy","user-agent","allow","server","accept-ranges","range","if-range","content-range","cross-origin-embedder-policy","cross-origin-opener-policy","cross-origin-resource-policy","content-security-policy","content-security-policy-report-only","expect-ct","feature-policy","strict-transport-security","upgrade-insecure-requests","x-content-type-options","x-download-options","x-frame-options","x-permitted-cross-domain-policies","x-powered-by","x-xss-protection","sec-fetch-site","sec-fetch-mode","sec-fetch-user","sec-fetch-dest"])}isValidStandardHeader(t){return this.aA.has(t)}}return s})(),il=(()=>{class s{constructor(){this.cA=64e3,this.lA=100,this.L={collectQueryParam:!1,collectRequestBody:!1,collectResponseBody:!1,matchingBodyContents:[],plainResponseBodyAttributes:{},plainRequestBodyAttributes:{},requestBodyAttributes:{},responseBodyAttributes:{},standardRequestHeaders:{},standardResponseHeaders:{},customRequestHeaders:{},customResponseHeaders:{},plainCustomRequestHeaders:{},plainCustomResponseHeaders:{}},this.ig=new Xy}hA(t){return t.length<=this.cA}uA(t){let e=t["content-type"];return e!==void 0&&(fe(e,"application/json")||fe(e,"application/graphql"))}dA(t,e){return t&&this.hA(t)&&this.uA(e)}Aa(t,e,i,r){let a=r==="request"?this.pA:this.fA;if(a!==void 0||this.dA(e,i)){if(a===void 0)try{a=csJSON.parse(e),r==="request"?this.pA=a:this.fA=a}catch{return}let c=Yy.getJSONPathValue(t,a);if(c!==void 0&&(c===null||!Ye(c))){let l=$(c)?c:csJSON.stringify(c);return ot.truncate(l,this.lA,ot.ELLIPSIS)}}}isBodyAttributeValueFound(t,e){let i,r;return(e.type==="request-response"||e.type==="response")&&(i=this.Aa(e.path,t.responseBody,t.responseHeaders,"response")),(e.type==="request-response"||e.type==="request")&&(r=this.Aa(e.path,t.requestBody,t.requestHeaders,"request")),Q(i)||Q(r)}collectBodyAttribute(t,e,i){let r;(e.type==="request-response"||e.type==="response")&&(r=this.Aa(e.path,t.responseBody,t.responseHeaders,"response"),r&&(e.encrypted?this.L.responseBodyAttributes[e.path]=r:(r=i(r),this.L.plainResponseBodyAttributes[e.path]=r))),(e.type==="request-response"||e.type==="request")&&(r=this.Aa(e.path,t.requestBody,t.requestHeaders,"request"),r&&(e.encrypted?r&&(this.L.requestBodyAttributes[e.path]=r):(r=i(r),this.L.plainRequestBodyAttributes[e.path]=r)))}isBodyContentMatching(t,e){return t.responseBody?!!new csRegExp(e,"i").test(t.responseBody):!1}collectBodyContent(t){csArray.prototype.indexOf.call(this.L.matchingBodyContents,t)===-1&&csArray.prototype.push.call(this.L.matchingBodyContents,t)}collectCustomHeaders(t,e,i){let r=csString.prototype.toLocaleLowerCase.call(e.headerName);t.responseHeaders[r]&&(e.type==="request-response"||e.type==="response")&&(e.encrypted?this.L.customResponseHeaders[r]=t.responseHeaders[r]:this.L.plainCustomResponseHeaders[r]=i(t.responseHeaders[r])),t.requestHeaders[r]&&(e.type==="request-response"||e.type==="request")&&(e.encrypted?this.L.customRequestHeaders[r]=t.requestHeaders[r]:this.L.plainCustomRequestHeaders[r]=i(t.requestHeaders[r]))}collectStandardHeaders(t){if(!(Object.keys(this.L.standardRequestHeaders).length>0||Object.keys(this.L.standardResponseHeaders).length>0)){for(let[e,i]of Object.entries(t.requestHeaders))this.ig.isValidStandardHeader(e)&&(this.L.standardRequestHeaders[e]=i);for(let[e,i]of Object.entries(t.responseHeaders))this.ig.isValidStandardHeader(e)&&(this.L.standardResponseHeaders[e]=i)}}setCollectQueryParam(t){t&&(this.L.collectQueryParam=!0)}setCollectResponseBody(t){t&&(this.L.collectResponseBody=!0)}setCollectRequestBody(t){t&&(this.L.collectRequestBody=!0)}getCollectedDataPoints(){return this.L}}return s})(),be=(()=>{let s;return function(n){n.CONTENTSQUARE="contentsquare.net",n.CLICKTALE="clicktale.net",n.FAKE_TRACKER="fake-tracker.content-square.fr"}(s||(s={})),s})(),nl=(()=>{class s{computeApiErrorCollectionOptions(){let t=new Set,e=[];if(this.rules)for(let r of this.rules)r.statusCode!==void 0&&t.add(r.statusCode),r.url!==void 0&&csArray.prototype.indexOf.call(e,r.url)===-1&&csArray.prototype.push.call(e,r.url);let i=[be.CONTENTSQUARE,be.CLICKTALE];return csArray.prototype.push.call(i,be.FAKE_TRACKER),{statusCodes:t,urls:e,excludedDomains:i}}}return s})(),Ky=(()=>{class s extends nl{constructor(t,e){super(),this.Tt=t,this.I=e,this.rules=t.collectionRules}collectDataPoints(t,e){this.L=new il;let i=!1;if(this.Tt.collectionRules)for(let r of this.Tt.collectionRules)this.gA(r,t)&&this.mA(r,t)&&this.yA(r,t)&&(i=!0,this.EA(t,r,e));return i||(i=this.SA(t)),i&&e&&this.Tt.collectStandardHeaders&&this.L.collectStandardHeaders(t),i?this.L.getCollectedDataPoints():null}computeApiErrorCollectionOptions(){let t=this.Tt.collectionRules||[],e=new Set,i=[];for(let a of t)a.statusCode!==void 0&&e.add(a.statusCode),a.url!==void 0&&csArray.prototype.indexOf.call(i,a.url)===-1&&csArray.prototype.push.call(i,a.url);let r=[be.CONTENTSQUARE,be.CLICKTALE];return csArray.prototype.push.call(r,be.FAKE_TRACKER),{statusCodes:e,urls:i,excludedDomains:r}}gA(t,e){return(!t.statusCode&&e.statusCode>=400||t.statusCode!==void 0&&t.statusCode===e.statusCode)&&(!t.url||csString.prototype.indexOf.call(e.url,t.url)!==-1)}mA(t,e){return t.bodyContent?this.L.isBodyContentMatching(e,t.bodyContent):!0}yA(t,e){let i=csArray.prototype.find.call(t.bodyAttributePaths,r=>r.primary);return i===void 0?!0:this.L.isBodyAttributeValueFound(e,i)}SA(t){return t.statusCode>=400}EA(t,e,i){e.bodyContent&&this.L.collectBodyContent(e.bodyContent);let r=ve(e.bodyAttributePaths,a=>a.primary===1);if(r&&this.L.collectBodyAttribute(t,r,a=>this.I.anonymizePII(a)),i){this.L.setCollectQueryParam(e.collectQueryParam),this.L.setCollectResponseBody(e.collectResponseBody),this.L.setCollectRequestBody(e.collectRequestBody);for(let c of e.customHeaders)this.L.collectCustomHeaders(t,c,l=>this.I.anonymizePII(l));let a=ci(e.bodyAttributePaths,c=>!c.primary);for(let c of a)this.L.collectBodyAttribute(t,c,l=>this.I.anonymizePII(l))}}}return s})(),Jy=(()=>{class s extends nl{constructor(t,e){super(),this.Tt=t,this.I=e,this.rules=t.configurableApiErrorRules}collectDataPoints(t,e){this.L=new il;let i=this.vA(t,this.Tt.configurableApiErrorRules);return i.isMatching?(i.matchingBodyContents.length>0&&this.L.collectBodyContent(i.matchingBodyContents[0]),e&&this._A(t),this.L.getCollectedDataPoints()):null}computeApiErrorCollectionOptions(){let t=this.Tt.configurableApiErrorRules||[],e=new Set,i=[];for(let a of t)a.statusCode!==void 0&&e.add(a.statusCode),a.url!==void 0&&csArray.prototype.indexOf.call(i,a.url)===-1&&csArray.prototype.push.call(i,a.url);let r=[be.CONTENTSQUARE,be.CLICKTALE];return csArray.prototype.push.call(r,be.FAKE_TRACKER),{statusCodes:e,urls:i,excludedDomains:r}}vA(t,e){if(t.statusCode>=400)return{isMatching:!0,matchingBodyContents:[]};if(e){for(let i of e)if(this.wA(t,i))return{isMatching:!0,matchingBodyContents:i.bodyContent?[i.bodyContent]:[]}}return{isMatching:!1,matchingBodyContents:[]}}wA(t,e){return!!(t.statusCode===e.statusCode&&csString.prototype.indexOf.call(t.url,e.url)!==-1&&(!e.bodyContent||this.L.isBodyContentMatching(t,e.bodyContent)))}_A(t){this.Tt.collectStandardHeaders&&this.L.collectStandardHeaders(t),this.Tt.validCustomHeaders&&this.ng(t,this.Tt.validCustomHeaders,1),this.Tt.plainCustomHeaders&&this.ng(t,this.Tt.plainCustomHeaders,0),this.Oh(t.url,this.Tt.validUrls)&&(this.Tt.collectQueryParam&&this.L.setCollectQueryParam(Number(this.Tt.collectQueryParam)),this.Tt.collectResponseBody&&this.L.setCollectResponseBody(Number(this.Tt.collectResponseBody)),this.Tt.collectRequestBody&&this.L.setCollectRequestBody(Number(this.Tt.collectRequestBody)))}ng(t,e,i){for(let r of e)this.L.collectCustomHeaders(t,{headerName:r,encrypted:i,type:"request-response"},a=>this.I.anonymizePII(a))}Oh(t,e){return e?csArray.prototype.some.call(e,i=>csString.prototype.indexOf.call(t,i)!==-1):!1}}return s})();var Qy=(()=>{class s extends te{constructor(t){super(),this.V=null,this.Ta=null,this.P=null,this.js=null,this.rg=["value","checked","src","data","alt"],this.Ra={state:k.MaskedElementState.Child},this.AA=e=>{for(let i of e){if(k.isMaskedElement(i.target)||k.isMaskedElementChild(i.target))for(let r=0;r<i.addedNodes.length;r+=1){let a=i.addedNodes[r];k.isMaskedElement(a)||k.isMaskedElementChild(a)||lt(a)&&this.og(a)}for(let r=0;r<i.removedNodes.length;r+=1){let a=i.removedNodes[r];it.isConnected(a)||this.ag(a)}}},this.TA=t}setMaskedElementSettings(t){this.As=t}startIdentifier(){this.isStarted||(this.isStarted=!0,this.onStart())}stopIdentifier(){return this.isStarted=!1,this.onStop()}start(){}stop(){}onStart(){var t,e,i,r;this.As||(ht.error("maskedElementSettings not initialized","MaskedElementIdentifier.start"),this.As={elementSelector:"",attrSelector:"",attrSelectors:[]});let{elementSelector:a,attrSelector:c,attrSelectors:l}=this.As;(t=this.js)!==null&&t!==void 0||(this.js=this.RA()),a.length!==0&&((e=this.V)!==null&&e!==void 0||(this.V=this.CA()),this.V.observe(a)),c.length!==0&&((i=this.Ta)!==null&&i!==void 0||(this.Ta=this.IA(l)),this.Ta.observe(c)),(r=this.P)!==null&&r!==void 0||(this.P=new ge(this.AA,(h,f)=>f==="added"&&this.PA(h))),this.P.observe(),csSetTimeout(this.TA)}onStop(){var t,e,i;this.V&&(this.ag(document),this.V.disconnect()),(t=this.Ta)===null||t===void 0||t.disconnect(),(e=this.P)===null||e===void 0||e.disconnect(),(i=this.js)===null||i===void 0||i.disconnect()}RA(){return window.ResizeObserver?new ResizeObserver(t=>{csArray.prototype.forEach.call(t,e=>{this.resizeObserverCallback(e)})}):null}CA(){return new Ms(t=>{csArray.prototype.forEach.call(t,e=>{this.OA(e)?this.og(e):(this.NA(e),this.MA(e))})})}IA(t){return new Ms(e=>{csArray.prototype.forEach.call(e,i=>this.kA(i,t))})}resizeObserverCallback(t){let e=t.target.getBoundingClientRect(),i=k.getMaskedElementDetails(t.target);if(i.state!==k.MaskedElementState.Parent||e.width===i.width&&e.height===i.height)return;let r={state:k.MaskedElementState.Parent,width:e.width,height:e.height};k.setMaskedElementProperty(t.target,r),this.produceEvent({type:"ResizeMaskedElement",target:st(t.target),width:e.width,height:e.height})}MA(t){!this.js||!lt(t)||gi(t)||this.js.observe(t)}OA(t){let e=csNodeparentNode.apply(t);return e?k.isMaskedElement(e)||k.isMaskedElementChild(e):oi(t)?k.isMaskedElement(t.host)||k.isMaskedElementChild(t.host):!1}PA(t){(k.isMaskedElement(t.host)||k.isMaskedElementChild(t.host))&&k.setMaskedElementProperty(t,this.Ra)}ag(t){Ft(t,NodeFilter.SHOW_ELEMENT).visitAll(i=>{k.unsetMaskedElementProperty(i)})}NA(t){let e=t.getBoundingClientRect(),i={state:k.MaskedElementState.Parent,width:e.width,height:e.height};k.setMaskedElementProperty(t,i),this.DA(t),Ft(t).visitAll(r=>r!=t&&k.setMaskedElementProperty(r,this.Ra))}og(t){k.setMaskedElementProperty(t,this.Ra),Ft(t).visitAll(e=>e!=t&&k.setMaskedElementProperty(e,this.Ra))}DA(t){var e;let i=(e=Y.getProperty(t,k.maskedAttributeProp))!==null&&e!==void 0?e:{attributes:[]};for(let r=0;r<this.rg.length;r+=1){let a=this.rg[r];csArray.prototype.indexOf.call(i.attributes,a)===-1&&csArray.prototype.push.call(i.attributes,a)}i.attributes.length!==0&&k.setMaskedAttributeProperty(t,i)}kA(t,e){var i;let r=(i=Y.getProperty(t,k.maskedAttributeProp))!==null&&i!==void 0?i:{attributes:[]};for(let a=0;a<t.attributes.length;a+=1){let c=t.attributes[a].name;csArray.prototype.indexOf.call(r.attributes,c)===-1&&csArray.prototype.some.call(e,l=>csString.prototype.indexOf.call(l.attrName,c)>-1&&Qt.call(t,l.selector))&&csArray.prototype.push.call(r.attributes,c)}r.attributes.length!==0&&k.setMaskedAttributeProperty(t,r)}}return Zt([I()],s.prototype,"resizeObserverCallback",null),s})(),Zy=(()=>{class s{constructor(){this.Mh=0,this.N=!1,this.cg="data-cs-capture",this.Ys=t=>{for(let e of t){if(le.isWhitelistedElement(e.target))for(let i=0;i<e.addedNodes.length;i+=1){let r=e.addedNodes[i];le.isWhitelistedElement(r)||lt(r)&&this.lg(r)}for(let i=0;i<e.removedNodes.length;i+=1){let r=e.removedNodes[i];it.isConnected(r)||this.hg(r)}}}}start(){this.Mh++,!this.N&&(this.N=!0,this.LA())}LA(){this.V||(this.V=new Ms(e=>q(e,i=>this.lg(i))));let t=this.kh?`[${this.cg}], ${this.kh}`:`[${this.cg}]`;this.V.observe(t),this.P||(this.P=new ge(this.Ys,(e,i)=>i==="added"&&this.xA(e))),this.P.observe()}stop(){this.N&&(this.Mh--,this.Mh===0&&(this.N=!1,this.UA()))}UA(){this.V&&(this.hg(document),this.V.disconnect()),this.P&&this.P.disconnect()}setWhitelistedElementsSelector(t,e=!0){if(ti(t))this.kh=t;else if(e)throw new Error("Command misuse: setCapturedElementsSelector")}getWhitelistedElementsSelector(){return this.kh}lg(t){Ft(t).visitAll(e=>{le.whitelistElement(e)})}xA(t){le.isWhitelistedElement(t.host)&&le.whitelistElement(t)}hg(t){Ft(t,NodeFilter.SHOW_ELEMENT).visitAll(i=>{le.removeWhitelistElement(i)})}}return s})(),tE=(()=>{class s{constructor(){this.V=null,this.P=null,this.N=!1,this.Ys=t=>{for(let e of t)if(Se.isEditableNode(e.target))for(let i=0;i<e.addedNodes.length;i+=1){let r=e.addedNodes[i];if(!Se.isEditableNode(r)){if(Xi(r)||Gh(r)){Se.markEditableNode(r);continue}lt(r)&&this.ug(r)}}}}start(){this.N||(this.N=!0,this.V=new Ms(t=>q(t,e=>{this.ug(e)})),this.V.observe("[contenteditable]"),this.P=new ge(this.Ys,(t,e)=>e==="added"&&this.VA(t)),this.P.observe())}stop(){var t,e;this.N&&(this.N=!1,(t=this.V)===null||t===void 0||t.disconnect(),this.V=null,(e=this.P)===null||e===void 0||e.disconnect(),this.P=null)}ug(t){Ft(t).visitAll(e=>{Se.markEditableNode(e)})}VA(t){Se.isEditableNode(t.host)&&Se.markEditableNode(t)}}return s})();var eE=s=>{let n=s*60*1e3;return`${Math.floor(csDate.now()/n)}`},sE=5e3,iE=(()=>{class s extends Ga{constructor(t,e,i){super(t,e),this.Rn=null,this.HA=(i==null?void 0:i.type)||"json",this.pg=i==null?void 0:i.cacheMinutes,this.Fn=i==null?void 0:i.timeout}onLoad(t){this.ji=t}onError(t){this.Bn=t}onTimeout(t,e){this.ai=t,this.Fn=e}send(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,r=>r());let t=this.retrieveParameters();this.nc(t);let e=li.toQuery(t),i=`${this.domainUri}${this.path?`/${this.path}`:""}?${e}`;this.eh(i,this.HA)}abort(){this.Rn&&(this.Rn.abort(),this.Rn=null)}isInProgress(){return this.Rn!==null}eh(t,e){var i;let r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType=e,r.onerror=()=>{var a;return(a=this.Bn)===null||a===void 0?void 0:a.call(this,r)},r.ontimeout=()=>{var a;return(a=this.ai)===null||a===void 0?void 0:a.call(this,r)},r.onload=()=>{var a,c;r.status>=200&&r.status<400?((a=this.ji)===null||a===void 0||a.call(this,this.BA(r,e)?r.response:r.responseText),csArray.prototype.forEach.call(this.afterRequestCallbacks,l=>l())):(c=this.Bn)===null||c===void 0||c.call(this,r)},r.onloadend=()=>{this.Rn=null},r.timeout=(i=this.Fn)!==null&&i!==void 0?i:sE,this.Rn=r,r.send()}BA(t,e){let i=t.getResponseHeader("Content-Type");return i===null?e==="json":csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(i),"json")>0}nc(t){let e;this.pg?e=`${eE(this.pg)}`:e=csString.prototype.slice.call(`${Math.random()}`,2,8),t.r=e}}return s})();var nE=(()=>{class s{constructor(t,e,i,r,a){this.ot=t,this.gt=e,this.ge=i,this.Ot=r,this.tt=a}getSensitiveStatus(){var t,e;return{started:this.ge.isStarted,useAnonymization:this.ot.shouldUseAnonymization(),capturedElementSelector:this.Ot.getWhitelistedElementsSelector(),maskedElementSettings:this.gt.getMaskedElementSettings((t=this.ot)===null||t===void 0?void 0:t.shouldMaskNonTextElements()),encryptionSelectors:(e=this.tt)===null||e===void 0?void 0:e.getEncryptionSelectors()}}getElementSensitiveStatus(t){let e=this.ge.isStarted,i=this.ot.shouldUseAnonymization();return e?k.isMaskedElement(t)||k.isMaskedElementChild(t)?$e.MASKED:Pc.shouldEncrypt(t)?$e.ENCRYPTED:Se.isEditableNode(t)?$e.ANONYMIZED:i?le.isWhitelistedElement(t)?$e.CAPTURED:$e.ANONYMIZED:$e.CAPTURED:$e.ANONYMIZED}}return s})(),rE=["setEncryptionSelectors"],rl=["setPIISelectors"],oE=["setCapturedElementsSelector"],aE=(()=>{class s{constructor(t,e,i,r,a,c,l){this.E=t,this.f=e,this.gt=i,this.ge=r,this.Ot=a,this.tt=c,this.Pn=l}init(){var t,e;this.Pn&&this.tt&&((t=this.Pn)===null||t===void 0||t.addSelector((e=this.tt)===null||e===void 0?void 0:e.getEncryptionSelectors())),this.ht()}onStartTracking(t){this.ge.start(),this.E.emitSensitiveStatusChange()}onBeforeArtificialPageView(){this.ge.stop(),this.E.emitSensitiveStatusChange()}onAfterArtificialPageView(){this.ge.start(),this.E.emitSensitiveStatusChange()}onBeforeSessionRenewal(){this.ge.stop(),this.E.emitSensitiveStatusChange()}onOptout(){this.ge.stop(),this.E.emitSensitiveStatusChange()}onReplayUnanonymizationConsentGranted(){this.E.emitSensitiveStatusChange()}onReplayUnanonymizationConsentWithdrawn(){this.E.emitSensitiveStatusChange()}ht(){this.f.register(rl,t=>{this.gt.setMaskedElementSettingsFromCommand(t),this.E.emitSensitiveStatusChange()}),this.f.register(oE,t=>{this.Ot.setWhitelistedElementsSelector(t),this.E.emitSensitiveStatusChange()}),this.f.register(rE,t=>{var e,i;(e=this.tt)===null||e===void 0||e.setEncryptionSelectors(t),(i=this.Pn)===null||i===void 0||i.addSelector(t)})}}return s})(),cE=(()=>{class s extends Mt{constructor(t,e,i,r,a,c){super(),this.Ht=t,this.gt=e,this.Ot=i,this.Pn=r,this.On=a,this.ot=c}onStart(){var t,e,i;this.Ot.start(),this.Ht.setMaskedElementSettings(this.gt.getMaskedElementSettings((t=this.ot)===null||t===void 0?void 0:t.shouldMaskNonTextElements())),this.Ht.startIdentifier(),(e=this.Pn)===null||e===void 0||e.start(),(i=this.On)===null||i===void 0||i.start()}onStop(){var t,e;this.Ot.stop(),this.Ht.stopIdentifier(),(t=this.Pn)===null||t===void 0||t.stop(),(e=this.On)===null||e===void 0||e.stop()}}return s})(),lE=["networkRequest:maskUrls"],hE=["networkRequest:maskUrls:reset"],uE=(()=>{class s{constructor(t,e){this.yg=t,this.lt=e}init(){this.yg.register(lE,t=>{if($(t)){this.lt.addPartialUrlMaskingPattern(t);return}if(csArray.isArray(t))for(let e of t)$(e)&&this.lt.addPartialUrlMaskingPattern(e)}),this.yg.register(hE,()=>this.lt.resetPartialUrlMaskingPatterns())}}return s})(),dE=/(\b["']?key["']?\s*[=:]\s*["'](?:first|last|user|profile|primary|primary[ _-]?last)[ _-]?name["']\s*,?\s*["']?value["']?\s*[=:]\s*["'])(.+?)(["']|$)|(\b["']?(?:first|last|user|profile|primary|primary[ _-]?last)[\s_-]?name["']?\s*[=:]\s*["'])(.+?)(["']|$)/gi,pE="$1$4CS_ANONYMIZED_NAME$3$6",fE=/(?:\(\d{3}\) \d{3}[- ]\d{4}\b)|(?:\b\d{3}([-\. ])\d{3}\1\d{4}\b)|(?:\b\d{2} \d{2} \d{2} \d{2} \d{2}\b)|(?:\b\d{4} \d{3} \d{3}\b)|(?:\b\d{2}([-\. ])\d{4}\2\d{4}\b)|(?:\b\d{3}([- ])\d{4}\3\d{4}\b)|(?:\+\d{1,3} \d{3} \d{3} \d{4}\b)|(?:\+\d{1,3} \(\d{3}\) \d{3}-\d{4}\b)|(?:\+\d{1,3}([- ])\d{4}\4\d{3}\4\d{3}\b)|(?:\+\d{1,3} \d \d{4} \d{4}\b)|(?:\+\d{1,3} \d \d{3} \d{3} \d{4}\b)|(?:\+\d{1,3} \d \d{2} \d{2} \d{2} \d{2}\b)|(?:\+\d{7,15}\b)|(?:\+\d{1,3} \d{6,12}\b)|(?:\+\d{1,3}([- ])\d{4}\5\d{3}\5\d{3}\b)/g,gE="CS_ANONYMIZED_PHONE",mE=(()=>{class s{constructor(t,e){this.I=t,this.K=e}anonymize(t){return this.K?csArray.prototype.join.call(csArray.prototype.map.call(yp(t),({content:e,isUrl:i})=>{var r;return i?(r=this.K)===null||r===void 0?void 0:r.anonymizeUrl(e,{maskNames:!0}):this.Eg(e)}),""):this.Eg(t)}Eg(t){t=this.I.anonymizePII(t);let e=t;t=this.Lr(t),t!==e&&(ct.counters.redactedPII.count("name"),ct.counters.redactedPII.count("name-in-custom-error"));let i=t;return t=this.tT(t),t!==i&&(ct.counters.redactedPII.count("phone"),ct.counters.redactedPII.count("phone-in-custom-error")),t}Lr(t){return csString.prototype.replace.call(t,dE,pE)}tT(t){return csString.prototype.replace.call(t,fE,gE)}}return s})(),ya=(()=>{let s;return function(n){function t(d,y){for(let E of d)if(i(E,y))return!0;return!1}n.isUrlMatching=t;function e(d,y){if($(y)){for(let E of d)if(i(E,y))return!0}else if(lo(y)){for(let E of d)if(i(E,csString(y)))return!0}return!1}n.isMatching=e;function i(d,y){let E=r(d,y);return d.negate?!E:E}function r(d,y){switch(d.rule_type==="date"&&(d.match_operation==="less_than"||d.match_operation==="greater_than")&&(y=(new csDate(y).valueOf()/1e3).toFixed(0)),d.match_operation){case"exact":switch(d.rule_type){case"string":return $(d.pattern)?csString.prototype.toLowerCase.call(y)===csString.prototype.toLowerCase.call(d.pattern):!1;case"boolean":return y===d.pattern||y===csString(d.pattern);case"number":return Nt(y)?Number(y)===Number(d.pattern):!1;default:return y===d.pattern}case"starts_with":return $(d.pattern)?csString.prototype.indexOf.call(y,d.pattern)===0:!1;case"ends_with":return $(d.pattern)?Ei(y,d.pattern):!1;case"contains":return $(d.pattern)?csString.prototype.indexOf.call(y,d.pattern)!==-1:!1;case"regex":if(!$(d.pattern))return!1;try{return new csRegExp(d.pattern).test(y)}catch(E){return V.warn(`targeting.matchOperation.regex invalid ${E==null?void 0:E.message}`),!1}case"simple":return $(d.pattern)?f(y)===f(d.pattern):!1;case"greater_than":return Number(y)>Number(d.pattern);case"less_than":return Number(y)<Number(d.pattern);case"exact_date":{let E=Number(d.pattern);if(!ue(E))return!1;let v=new csDate(E*1e3);return new csDate(y).toDateString()===v.toDateString()}case"exact_days_ago":return a(d,y);case"more_than_days_ago":return c(d,y);case"less_than_days_ago":return l(d,y);case"unknown":return h(y);default:return V.warn(`targeting.matchOperation.regex not managed operation ${d.match_operation}`),!1}}function a(d,y){let E=new csDate,v=E.setDate(E.getDate()-Number(d.pattern)),C=new csDate(v);return new csDate(y).toDateString()===C.toDateString()}function c(d,y){let E=Number(d.pattern);if(!ue(E))return!1;let v=Number(E)+1,C=new csDate,P=new csDate(C);return P.setDate(C.getDate()-v),new csDate(y).getTime()<=P.getTime()}function l(d,y){let E=Number(d.pattern);if(!ue(E))return!1;if(E===0)return a(d,y);let v=new csDate,C=new csDate(v);return C.setDate(v.getDate()-E),new csDate(y).getTime()>=C.getTime()}function h(d){return Nt(d)?$(d)?csString.prototype.trim.call(d)==="":lo(d)?d===!0:ue(d)?d!==0:!1:!0}function f(d){let y=fe(d,"http://")||fe(d,"https://")?d:`https://${d}`,E=Ar(y);return E!==null?csString.prototype.replace.call(E.host,/^www./,""):d}}(s||(s={})),s})(),yE=(()=>{class s{constructor(){this.Sg=[],this.vg=[]}setTargetingRules(t){for(let e of t)e.component==="url"?csArray.prototype.push.call(this.Sg,e):e.component==="trigger"&&csArray.prototype.push.call(this.vg,e)}matchUrl(t){return ya.isUrlMatching(this.Sg,t)}matchTrigger(t){return ya.isMatching(this.vg,t)}}return s})(),EE=(()=>{class s extends Mt{constructor(t,e,i){super(),this.Ia=t,this.Hh=e,this.A=i}init(){this.Bh=new yE,this.Ia&&this.Bh.setTargetingRules(this.Ia)}onStart(){}checkInitialUrlTargetingRules(){let t=this.A.getAnonymizedUrl();this.Fh(t,"url")&&this.Hh()}onStop(){}onTargetingRulesArtificialPageview(t){this.isStarted&&this.Fh(t,"url")&&this.Hh()}onExternalEvent(t){this.isStarted&&this.Fh(t.name,"trigger")&&this.Hh()}Fh(t,e){var i,r;return e==="url"&&$(t)&&(!((i=this.Bh)===null||i===void 0)&&i.matchUrl(t))?!0:!!(e==="trigger"&&(!((r=this.Bh)===null||r===void 0)&&r.matchTrigger(t)))}}return s})(),SE=(()=>{class s{constructor(t,e,i,r,a,c){this.Ia=t,this.eT=e,this.E=i,this.et=r,this.Q=a,this.A=c}init(){this.$r=new EE(this.Ia,this.eT,this.A),this.Q.addListener(this.$r),this.$r.init()}start(){this.$r.start()}stop(){this.$r.stop()}checkInitialUrlTargetingRules(){this.$r.checkInitialUrlTargetingRules()}emitTargetingCollectState(){let t=this.et.getInitialCollectState();t===N.ANALYTICS_ONLY?this.E.emitCollectStateChange(N.ANALYTICS_ONLY_RULES_TARGETING,Lt.ETR_OFF):t===N.RECORDING_GLOBAL_SAMPLING&&this.E.emitCollectStateChange(N.RECORDING_RULES_TARGETING,Lt.ETR_OFF)}}return s})();var vE=(()=>{let s;return function(n){n.COMPRESSION_DISABLED="compressionDisabled"}(s||(s={})),s})(),_E=(()=>{class s{constructor(){}static init(t){(!this.$h||t!==void 0)&&this.initFlags(t)}static initFlags(t=document.cookie){var e;let i=(e=/_cs_debug=((\w|\.|\:|=)+)/g.exec(t))===null||e===void 0?void 0:e[1];if(this.$h=new Map,i){let r=csString.prototype.split.call(i,".");for(let a=0;a<r.length;a++){let[c,l]=csString.prototype.split.call(r[a],"=");this.$h.set(c,l||"true")}}}static getBoolean(t){let e=this.getString(t);return e!=null&&e!=="false"&&parseInt(e)!==0}static getString(t){var e;return this.init(),(e=this.$h)===null||e===void 0?void 0:e.get(t)}static isCompressionEnabled(){return!this.getBoolean(vE.COMPRESSION_DISABLED)}static Log(t){return(e,i,r)=>{var a;let c=i.toString(),l=`${(a=e.constructor)===null||a===void 0?void 0:a.name}.${c}`,h=r.value;wE(s.getString("debugLog"),t)&&(r.value=function(...f){return console.log(l,...f),h.bind(this)(...f)})}}}return s})();function wE(s,n){var t;return s==null?!1:s===n||!!(!((t=csString.prototype.match.call(s,new csRegExp("(^|,)("+n+")(,|$)")))===null||t===void 0)&&t.length)}function Ea(){function i(o){let p=o.length;for(;--p>=0;)o[p]=0}let r=0,a=1,c=2,l=3,h=258,f=29,d=256,y=d+1+f,E=30,v=19,C=2*y+1,P=15,A=16,w=7,x=256,b=16,L=17,H=18,W=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),nt=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),pt=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),ft=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),S=512,M=new Array((y+2)*2);i(M);let U=new Array(E*2);i(U);let B=new Array(S);i(B);let et=new Array(h-l+1);i(et);let ut=new Array(f);i(ut);let Ct=new Array(E);i(Ct);function Re(o,p,g,m,u){this.static_tree=o,this.extra_bits=p,this.extra_base=g,this.elems=m,this.max_length=u,this.has_stree=o&&o.length}let Qe,mn,Ze;function ee(o,p){this.dyn_tree=o,this.max_code=0,this.stat_desc=p}let ts=o=>o<256?B[o]:B[256+(o>>>7)],se=(o,p)=>{o.pending_buf[o.pending++]=p&255,o.pending_buf[o.pending++]=p>>>8&255},Et=(o,p,g)=>{o.bi_valid>A-g?(o.bi_buf|=p<<o.bi_valid&65535,se(o,o.bi_buf),o.bi_buf=p>>A-o.bi_valid,o.bi_valid+=g-A):(o.bi_buf|=p<<o.bi_valid&65535,o.bi_valid+=g)},Ut=(o,p,g)=>{Et(o,g[p*2],g[p*2+1])},js=(o,p)=>{let g=0;do g|=o&1,o>>>=1,g<<=1;while(--p>0);return g>>>1},yn=o=>{o.bi_valid===16?(se(o,o.bi_buf),o.bi_buf=0,o.bi_valid=0):o.bi_valid>=8&&(o.pending_buf[o.pending++]=o.bi_buf&255,o.bi_buf>>=8,o.bi_valid-=8)},En=(o,p)=>{let g=p.dyn_tree,m=p.max_code,u=p.stat_desc.static_tree,T=p.stat_desc.has_stree,_=p.stat_desc.extra_bits,R=p.stat_desc.extra_base,K=p.stat_desc.max_length,F,Bt,Le,rt,rs,Es,Mi=0;for(rt=0;rt<=P;rt++)o.bl_count[rt]=0;for(g[o.heap[o.heap_max]*2+1]=0,F=o.heap_max+1;F<C;F++)Bt=o.heap[F],rt=g[g[Bt*2+1]*2+1]+1,rt>K&&(rt=K,Mi++),g[Bt*2+1]=rt,!(Bt>m)&&(o.bl_count[rt]++,rs=0,Bt>=R&&(rs=_[Bt-R]),Es=g[Bt*2],o.opt_len+=Es*(rt+rs),T&&(o.static_len+=Es*(u[Bt*2+1]+rs)));if(Mi!==0){do{for(rt=K-1;o.bl_count[rt]===0;)rt--;o.bl_count[rt]--,o.bl_count[rt+1]+=2,o.bl_count[K]--,Mi-=2}while(Mi>0);for(rt=K;rt!==0;rt--)for(Bt=o.bl_count[rt];Bt!==0;)Le=o.heap[--F],!(Le>m)&&(g[Le*2+1]!==rt&&(o.opt_len+=(rt-g[Le*2+1])*g[Le*2],g[Le*2+1]=rt),Bt--)}},Hs=(o,p,g)=>{let m=new Array(P+1),u=0,T,_;for(T=1;T<=P;T++)m[T]=u=u+g[T-1]<<1;for(_=0;_<=p;_++){let R=o[_*2+1];R!==0&&(o[_*2]=js(m[R]++,R))}},Hr=()=>{let o,p,g,m,u,T=new Array(P+1);for(g=0,m=0;m<f-1;m++)for(ut[m]=g,o=0;o<1<<W[m];o++)et[g++]=m;for(et[g-1]=m,u=0,m=0;m<16;m++)for(Ct[m]=u,o=0;o<1<<nt[m];o++)B[u++]=m;for(u>>=7;m<E;m++)for(Ct[m]=u<<7,o=0;o<1<<nt[m]-7;o++)B[256+u++]=m;for(p=0;p<=P;p++)T[p]=0;for(o=0;o<=143;)M[o*2+1]=8,o++,T[8]++;for(;o<=255;)M[o*2+1]=9,o++,T[9]++;for(;o<=279;)M[o*2+1]=7,o++,T[7]++;for(;o<=287;)M[o*2+1]=8,o++,T[8]++;for(Hs(M,y+1,T),o=0;o<E;o++)U[o*2+1]=5,U[o*2]=js(o,5);Qe=new Re(M,W,d+1,y,P),mn=new Re(U,nt,0,E,P),Ze=new Re(new Array(0),pt,0,v,w)},Br=o=>{let p;for(p=0;p<y;p++)o.dyn_ltree[p*2]=0;for(p=0;p<E;p++)o.dyn_dtree[p*2]=0;for(p=0;p<v;p++)o.bl_tree[p*2]=0;o.dyn_ltree[x*2]=1,o.opt_len=o.static_len=0,o.last_lit=o.matches=0},Fr=o=>{o.bi_valid>8?se(o,o.bi_buf):o.bi_valid>0&&(o.pending_buf[o.pending++]=o.bi_buf),o.bi_buf=0,o.bi_valid=0},pl=(o,p,g,m)=>{Fr(o),m&&(se(o,g),se(o,~g)),o.pending_buf.set(o.window.subarray(p,p+g),o.pending),o.pending+=g},$r=(o,p,g,m)=>{let u=p*2,T=g*2;return o[u]<o[T]||o[u]===o[T]&&m[p]<=m[g]},Sn=(o,p,g)=>{let m=o.heap[g],u=g<<1;for(;u<=o.heap_len&&(u<o.heap_len&&$r(p,o.heap[u+1],o.heap[u],o.depth)&&u++,!$r(p,m,o.heap[u],o.depth));)o.heap[g]=o.heap[u],g=u,u<<=1;o.heap[g]=m},zr=(o,p,g)=>{let m,u,T=0,_,R;if(o.last_lit!==0)do m=o.pending_buf[o.d_buf+T*2]<<8|o.pending_buf[o.d_buf+T*2+1],u=o.pending_buf[o.l_buf+T],T++,m===0?Ut(o,u,p):(_=et[u],Ut(o,_+d+1,p),R=W[_],R!==0&&(u-=ut[_],Et(o,u,R)),m--,_=ts(m),Ut(o,_,g),R=nt[_],R!==0&&(m-=Ct[_],Et(o,m,R)));while(T<o.last_lit);Ut(o,x,p)},vn=(o,p)=>{let g=p.dyn_tree,m=p.stat_desc.static_tree,u=p.stat_desc.has_stree,T=p.stat_desc.elems,_,R,K=-1,F;for(o.heap_len=0,o.heap_max=C,_=0;_<T;_++)g[_*2]!==0?(o.heap[++o.heap_len]=K=_,o.depth[_]=0):g[_*2+1]=0;for(;o.heap_len<2;)F=o.heap[++o.heap_len]=K<2?++K:0,g[F*2]=1,o.depth[F]=0,o.opt_len--,u&&(o.static_len-=m[F*2+1]);for(p.max_code=K,_=o.heap_len>>1;_>=1;_--)Sn(o,g,_);F=T;do _=o.heap[1],o.heap[1]=o.heap[o.heap_len--],Sn(o,g,1),R=o.heap[1],o.heap[--o.heap_max]=_,o.heap[--o.heap_max]=R,g[F*2]=g[_*2]+g[R*2],o.depth[F]=(o.depth[_]>=o.depth[R]?o.depth[_]:o.depth[R])+1,g[_*2+1]=g[R*2+1]=F,o.heap[1]=F++,Sn(o,g,1);while(o.heap_len>=2);o.heap[--o.heap_max]=o.heap[1],En(o,p),Hs(g,K,o.bl_count)},Gr=(o,p,g)=>{let m,u=-1,T,_=p[0*2+1],R=0,K=7,F=4;for(_===0&&(K=138,F=3),p[(g+1)*2+1]=65535,m=0;m<=g;m++)T=_,_=p[(m+1)*2+1],!(++R<K&&T===_)&&(R<F?o.bl_tree[T*2]+=R:T!==0?(T!==u&&o.bl_tree[T*2]++,o.bl_tree[b*2]++):R<=10?o.bl_tree[L*2]++:o.bl_tree[H*2]++,R=0,u=T,_===0?(K=138,F=3):T===_?(K=6,F=3):(K=7,F=4))},qr=(o,p,g)=>{let m,u=-1,T,_=p[0*2+1],R=0,K=7,F=4;for(_===0&&(K=138,F=3),m=0;m<=g;m++)if(T=_,_=p[(m+1)*2+1],!(++R<K&&T===_)){if(R<F)do Ut(o,T,o.bl_tree);while(--R!==0);else T!==0?(T!==u&&(Ut(o,T,o.bl_tree),R--),Ut(o,b,o.bl_tree),Et(o,R-3,2)):R<=10?(Ut(o,L,o.bl_tree),Et(o,R-3,3)):(Ut(o,H,o.bl_tree),Et(o,R-11,7));R=0,u=T,_===0?(K=138,F=3):T===_?(K=6,F=3):(K=7,F=4)}},fl=o=>{let p;for(Gr(o,o.dyn_ltree,o.l_desc.max_code),Gr(o,o.dyn_dtree,o.d_desc.max_code),vn(o,o.bl_desc),p=v-1;p>=3&&o.bl_tree[ft[p]*2+1]===0;p--);return o.opt_len+=3*(p+1)+5+5+4,p},gl=(o,p,g,m)=>{let u;for(Et(o,p-257,5),Et(o,g-1,5),Et(o,m-4,4),u=0;u<m;u++)Et(o,o.bl_tree[ft[u]*2+1],3);qr(o,o.dyn_ltree,p-1),qr(o,o.dyn_dtree,g-1)},ml=o=>{let p=4093624447,g;for(g=0;g<=31;g++,p>>>=1)if(p&1&&o.dyn_ltree[g*2]!==0)return 0;if(o.dyn_ltree[9*2]!==0||o.dyn_ltree[10*2]!==0||o.dyn_ltree[13*2]!==0)return 1;for(g=32;g<d;g++)if(o.dyn_ltree[g*2]!==0)return 1;return 0},Wr=!1,yl=o=>{Wr||(Hr(),Wr=!0),o.l_desc=new ee(o.dyn_ltree,Qe),o.d_desc=new ee(o.dyn_dtree,mn),o.bl_desc=new ee(o.bl_tree,Ze),o.bi_buf=0,o.bi_valid=0,Br(o)},Yr=(o,p,g,m)=>{Et(o,(r<<1)+(m?1:0),3),pl(o,p,g,!0)},El=o=>{Et(o,a<<1,3),Ut(o,x,M),yn(o)},Sl=(o,p,g,m)=>{let u,T,_=0;o.level>0?(o.strm.data_type===2&&(o.strm.data_type=ml(o)),vn(o,o.l_desc),vn(o,o.d_desc),_=fl(o),u=o.opt_len+3+7>>>3,T=o.static_len+3+7>>>3,T<=u&&(u=T)):u=T=g+5,g+4<=u&&p!==-1?Yr(o,p,g,m):o.strategy===4||T===u?(Et(o,(a<<1)+(m?1:0),3),zr(o,M,U)):(Et(o,(c<<1)+(m?1:0),3),gl(o,o.l_desc.max_code+1,o.d_desc.max_code+1,_+1),zr(o,o.dyn_ltree,o.dyn_dtree)),Br(o),m&&Fr(o)},vl=(o,p,g)=>(o.pending_buf[o.d_buf+o.last_lit*2]=p>>>8&255,o.pending_buf[o.d_buf+o.last_lit*2+1]=p&255,o.pending_buf[o.l_buf+o.last_lit]=g&255,o.last_lit++,p===0?o.dyn_ltree[g*2]++:(o.matches++,p--,o.dyn_ltree[(et[g]+d+1)*2]++,o.dyn_dtree[ts(p)*2]++),o.last_lit===o.lit_bufsize-1);var _l=yl,wl=Yr,bl=Sl,Al=vl,Tl=El,Rl={_tr_init:_l,_tr_stored_block:wl,_tr_flush_block:bl,_tr_tally:Al,_tr_align:Tl},Xr=(o,p,g,m)=>{let u=o&65535|0,T=o>>>16&65535|0,_=0;for(;g!==0;){_=g>2e3?2e3:g,g-=_;do u=u+p[m++]|0,T=T+u|0;while(--_);u%=65521,T%=65521}return u|T<<16|0};let Cl=()=>{let o,p=[];for(var g=0;g<256;g++){o=g;for(var m=0;m<8;m++)o=o&1?3988292384^o>>>1:o>>>1;p[g]=o}return p},Il=new Uint32Array(Cl());var Ce=(o,p,g,m)=>{let u=Il,T=m+g;o^=-1;for(let _=m;_<T;_++)o=o>>>8^u[(o^p[_])&255];return o^-1},bi={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Kr={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};let{_tr_init:Pl,_tr_stored_block:Ol,_tr_flush_block:Nl,_tr_tally:Ie,_tr_align:Ml}=Rl,{Z_NO_FLUSH:es,Z_PARTIAL_FLUSH:kl,Z_FULL_FLUSH:Dl,Z_FINISH:Pe,Z_BLOCK:Jr,Z_OK:ie,Z_STREAM_END:Qr,Z_STREAM_ERROR:$t,Z_DATA_ERROR:Ll,Z_BUF_ERROR:_n,Z_DEFAULT_COMPRESSION:xl,Z_FILTERED:Ul,Z_HUFFMAN_ONLY:Ai,Z_RLE:Vl,Z_FIXED:jl,Z_DEFAULT_STRATEGY:Hl,Z_UNKNOWN:Bl,Z_DEFLATED:Ti}=Kr,Fl=9,$l=15,zl=8,wn=256+1+29,Gl=30,ql=19,Wl=2*wn+1,Yl=15,X=3,Oe=258,Yt=Oe+X+1,Xl=32,Ri=42,bn=69,Ci=73,Ii=91,Pi=103,ss=113,Bs=666,gt=1,Fs=2,is=3,ms=4,Kl=3,Ne=(o,p)=>(o.msg=bi[p],p),Zr=o=>(o<<1)-(o>4?9:0),Me=o=>{let p=o.length;for(;--p>=0;)o[p]=0},ke=(o,p,g)=>(p<<o.hash_shift^g)&o.hash_mask,De=o=>{let p=o.state,g=p.pending;g>o.avail_out&&(g=o.avail_out),g!==0&&(o.output.set(p.pending_buf.subarray(p.pending_out,p.pending_out+g),o.next_out),o.next_out+=g,p.pending_out+=g,o.total_out+=g,o.avail_out-=g,p.pending-=g,p.pending===0&&(p.pending_out=0))},_t=(o,p)=>{Nl(o,o.block_start>=0?o.block_start:-1,o.strstart-o.block_start,p),o.block_start=o.strstart,De(o.strm)},Z=(o,p)=>{o.pending_buf[o.pending++]=p},$s=(o,p)=>{o.pending_buf[o.pending++]=p>>>8&255,o.pending_buf[o.pending++]=p&255},Jl=(o,p,g,m)=>{let u=o.avail_in;return u>m&&(u=m),u===0?0:(o.avail_in-=u,p.set(o.input.subarray(o.next_in,o.next_in+u),g),o.state.wrap===1?o.adler=Xr(o.adler,p,u,g):o.state.wrap===2&&(o.adler=Ce(o.adler,p,u,g)),o.next_in+=u,o.total_in+=u,u)},to=(o,p)=>{let g=o.max_chain_length,m=o.strstart,u,T,_=o.prev_length,R=o.nice_match,K=o.strstart>o.w_size-Yt?o.strstart-(o.w_size-Yt):0,F=o.window,Bt=o.w_mask,Le=o.prev,rt=o.strstart+Oe,rs=F[m+_-1],Es=F[m+_];o.prev_length>=o.good_match&&(g>>=2),R>o.lookahead&&(R=o.lookahead);do if(u=p,!(F[u+_]!==Es||F[u+_-1]!==rs||F[u]!==F[m]||F[++u]!==F[m+1])){m+=2,u++;do;while(F[++m]===F[++u]&&F[++m]===F[++u]&&F[++m]===F[++u]&&F[++m]===F[++u]&&F[++m]===F[++u]&&F[++m]===F[++u]&&F[++m]===F[++u]&&F[++m]===F[++u]&&m<rt);if(T=Oe-(rt-m),m=rt-Oe,T>_){if(o.match_start=p,_=T,T>=R)break;rs=F[m+_-1],Es=F[m+_]}}while((p=Le[p&Bt])>K&&--g!==0);return _<=o.lookahead?_:o.lookahead},ns=o=>{let p=o.w_size,g,m,u,T,_;do{if(T=o.window_size-o.lookahead-o.strstart,o.strstart>=p+(p-Yt)){o.window.set(o.window.subarray(p,p+p),0),o.match_start-=p,o.strstart-=p,o.block_start-=p,m=o.hash_size,g=m;do u=o.head[--g],o.head[g]=u>=p?u-p:0;while(--m);m=p,g=m;do u=o.prev[--g],o.prev[g]=u>=p?u-p:0;while(--m);T+=p}if(o.strm.avail_in===0)break;if(m=Jl(o.strm,o.window,o.strstart+o.lookahead,T),o.lookahead+=m,o.lookahead+o.insert>=X)for(_=o.strstart-o.insert,o.ins_h=o.window[_],o.ins_h=ke(o,o.ins_h,o.window[_+1]);o.insert&&(o.ins_h=ke(o,o.ins_h,o.window[_+X-1]),o.prev[_&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=_,_++,o.insert--,!(o.lookahead+o.insert<X)););}while(o.lookahead<Yt&&o.strm.avail_in!==0)},Ql=(o,p)=>{let g=65535;for(g>o.pending_buf_size-5&&(g=o.pending_buf_size-5);;){if(o.lookahead<=1){if(ns(o),o.lookahead===0&&p===es)return gt;if(o.lookahead===0)break}o.strstart+=o.lookahead,o.lookahead=0;let m=o.block_start+g;if((o.strstart===0||o.strstart>=m)&&(o.lookahead=o.strstart-m,o.strstart=m,_t(o,!1),o.strm.avail_out===0)||o.strstart-o.block_start>=o.w_size-Yt&&(_t(o,!1),o.strm.avail_out===0))return gt}return o.insert=0,p===Pe?(_t(o,!0),o.strm.avail_out===0?is:ms):(o.strstart>o.block_start&&(_t(o,!1),o.strm.avail_out===0),gt)},An=(o,p)=>{let g,m;for(;;){if(o.lookahead<Yt){if(ns(o),o.lookahead<Yt&&p===es)return gt;if(o.lookahead===0)break}if(g=0,o.lookahead>=X&&(o.ins_h=ke(o,o.ins_h,o.window[o.strstart+X-1]),g=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart),g!==0&&o.strstart-g<=o.w_size-Yt&&(o.match_length=to(o,g)),o.match_length>=X)if(m=Ie(o,o.strstart-o.match_start,o.match_length-X),o.lookahead-=o.match_length,o.match_length<=o.max_lazy_match&&o.lookahead>=X){o.match_length--;do o.strstart++,o.ins_h=ke(o,o.ins_h,o.window[o.strstart+X-1]),g=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart;while(--o.match_length!==0);o.strstart++}else o.strstart+=o.match_length,o.match_length=0,o.ins_h=o.window[o.strstart],o.ins_h=ke(o,o.ins_h,o.window[o.strstart+1]);else m=Ie(o,0,o.window[o.strstart]),o.lookahead--,o.strstart++;if(m&&(_t(o,!1),o.strm.avail_out===0))return gt}return o.insert=o.strstart<X-1?o.strstart:X-1,p===Pe?(_t(o,!0),o.strm.avail_out===0?is:ms):o.last_lit&&(_t(o,!1),o.strm.avail_out===0)?gt:Fs},ys=(o,p)=>{let g,m,u;for(;;){if(o.lookahead<Yt){if(ns(o),o.lookahead<Yt&&p===es)return gt;if(o.lookahead===0)break}if(g=0,o.lookahead>=X&&(o.ins_h=ke(o,o.ins_h,o.window[o.strstart+X-1]),g=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart),o.prev_length=o.match_length,o.prev_match=o.match_start,o.match_length=X-1,g!==0&&o.prev_length<o.max_lazy_match&&o.strstart-g<=o.w_size-Yt&&(o.match_length=to(o,g),o.match_length<=5&&(o.strategy===Ul||o.match_length===X&&o.strstart-o.match_start>4096)&&(o.match_length=X-1)),o.prev_length>=X&&o.match_length<=o.prev_length){u=o.strstart+o.lookahead-X,m=Ie(o,o.strstart-1-o.prev_match,o.prev_length-X),o.lookahead-=o.prev_length-1,o.prev_length-=2;do++o.strstart<=u&&(o.ins_h=ke(o,o.ins_h,o.window[o.strstart+X-1]),g=o.prev[o.strstart&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=o.strstart);while(--o.prev_length!==0);if(o.match_available=0,o.match_length=X-1,o.strstart++,m&&(_t(o,!1),o.strm.avail_out===0))return gt}else if(o.match_available){if(m=Ie(o,0,o.window[o.strstart-1]),m&&_t(o,!1),o.strstart++,o.lookahead--,o.strm.avail_out===0)return gt}else o.match_available=1,o.strstart++,o.lookahead--}return o.match_available&&(m=Ie(o,0,o.window[o.strstart-1]),o.match_available=0),o.insert=o.strstart<X-1?o.strstart:X-1,p===Pe?(_t(o,!0),o.strm.avail_out===0?is:ms):o.last_lit&&(_t(o,!1),o.strm.avail_out===0)?gt:Fs},Zl=(o,p)=>{let g,m,u,T,_=o.window;for(;;){if(o.lookahead<=Oe){if(ns(o),o.lookahead<=Oe&&p===es)return gt;if(o.lookahead===0)break}if(o.match_length=0,o.lookahead>=X&&o.strstart>0&&(u=o.strstart-1,m=_[u],m===_[++u]&&m===_[++u]&&m===_[++u])){T=o.strstart+Oe;do;while(m===_[++u]&&m===_[++u]&&m===_[++u]&&m===_[++u]&&m===_[++u]&&m===_[++u]&&m===_[++u]&&m===_[++u]&&u<T);o.match_length=Oe-(T-u),o.match_length>o.lookahead&&(o.match_length=o.lookahead)}if(o.match_length>=X?(g=Ie(o,1,o.match_length-X),o.lookahead-=o.match_length,o.strstart+=o.match_length,o.match_length=0):(g=Ie(o,0,o.window[o.strstart]),o.lookahead--,o.strstart++),g&&(_t(o,!1),o.strm.avail_out===0))return gt}return o.insert=0,p===Pe?(_t(o,!0),o.strm.avail_out===0?is:ms):o.last_lit&&(_t(o,!1),o.strm.avail_out===0)?gt:Fs},th=(o,p)=>{let g;for(;;){if(o.lookahead===0&&(ns(o),o.lookahead===0)){if(p===es)return gt;break}if(o.match_length=0,g=Ie(o,0,o.window[o.strstart]),o.lookahead--,o.strstart++,g&&(_t(o,!1),o.strm.avail_out===0))return gt}return o.insert=0,p===Pe?(_t(o,!0),o.strm.avail_out===0?is:ms):o.last_lit&&(_t(o,!1),o.strm.avail_out===0)?gt:Fs};function ne(o,p,g,m,u){this.good_length=o,this.max_lazy=p,this.nice_length=g,this.max_chain=m,this.func=u}let zs=[new ne(0,0,0,0,Ql),new ne(4,4,8,4,An),new ne(4,5,16,8,An),new ne(4,6,32,32,An),new ne(4,4,16,16,ys),new ne(8,16,32,32,ys),new ne(8,16,128,128,ys),new ne(8,32,128,256,ys),new ne(32,128,258,1024,ys),new ne(32,258,258,4096,ys)],eh=o=>{o.window_size=2*o.w_size,Me(o.head),o.max_lazy_match=zs[o.level].max_lazy,o.good_match=zs[o.level].good_length,o.nice_match=zs[o.level].nice_length,o.max_chain_length=zs[o.level].max_chain,o.strstart=0,o.block_start=0,o.lookahead=0,o.insert=0,o.match_length=o.prev_length=X-1,o.match_available=0,o.ins_h=0};function sh(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Ti,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Wl*2),this.dyn_dtree=new Uint16Array((2*Gl+1)*2),this.bl_tree=new Uint16Array((2*ql+1)*2),Me(this.dyn_ltree),Me(this.dyn_dtree),Me(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Yl+1),this.heap=new Uint16Array(2*wn+1),Me(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*wn+1),Me(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}let eo=o=>{if(!o||!o.state)return Ne(o,$t);o.total_in=o.total_out=0,o.data_type=Bl;let p=o.state;return p.pending=0,p.pending_out=0,p.wrap<0&&(p.wrap=-p.wrap),p.status=p.wrap?Ri:ss,o.adler=p.wrap===2?0:1,p.last_flush=es,Pl(p),ie},so=o=>{let p=eo(o);return p===ie&&eh(o.state),p},ih=(o,p)=>!o||!o.state||o.state.wrap!==2?$t:(o.state.gzhead=p,ie),io=(o,p,g,m,u,T)=>{if(!o)return $t;let _=1;if(p===xl&&(p=6),m<0?(_=0,m=-m):m>15&&(_=2,m-=16),u<1||u>Fl||g!==Ti||m<8||m>15||p<0||p>9||T<0||T>jl)return Ne(o,$t);m===8&&(m=9);let R=new sh;return o.state=R,R.strm=o,R.wrap=_,R.gzhead=null,R.w_bits=m,R.w_size=1<<R.w_bits,R.w_mask=R.w_size-1,R.hash_bits=u+7,R.hash_size=1<<R.hash_bits,R.hash_mask=R.hash_size-1,R.hash_shift=~~((R.hash_bits+X-1)/X),R.window=new Uint8Array(R.w_size*2),R.head=new Uint16Array(R.hash_size),R.prev=new Uint16Array(R.w_size),R.lit_bufsize=1<<u+6,R.pending_buf_size=R.lit_bufsize*4,R.pending_buf=new Uint8Array(R.pending_buf_size),R.d_buf=1*R.lit_bufsize,R.l_buf=3*R.lit_bufsize,R.level=p,R.strategy=T,R.method=g,so(o)},nh=(o,p)=>io(o,p,Ti,$l,zl,Hl),rh=(o,p)=>{let g,m;if(!o||!o.state||p>Jr||p<0)return o?Ne(o,$t):$t;let u=o.state;if(!o.output||!o.input&&o.avail_in!==0||u.status===Bs&&p!==Pe)return Ne(o,o.avail_out===0?_n:$t);u.strm=o;let T=u.last_flush;if(u.last_flush=p,u.status===Ri)if(u.wrap===2)o.adler=0,Z(u,31),Z(u,139),Z(u,8),u.gzhead?(Z(u,(u.gzhead.text?1:0)+(u.gzhead.hcrc?2:0)+(u.gzhead.extra?4:0)+(u.gzhead.name?8:0)+(u.gzhead.comment?16:0)),Z(u,u.gzhead.time&255),Z(u,u.gzhead.time>>8&255),Z(u,u.gzhead.time>>16&255),Z(u,u.gzhead.time>>24&255),Z(u,u.level===9?2:u.strategy>=Ai||u.level<2?4:0),Z(u,u.gzhead.os&255),u.gzhead.extra&&u.gzhead.extra.length&&(Z(u,u.gzhead.extra.length&255),Z(u,u.gzhead.extra.length>>8&255)),u.gzhead.hcrc&&(o.adler=Ce(o.adler,u.pending_buf,u.pending,0)),u.gzindex=0,u.status=bn):(Z(u,0),Z(u,0),Z(u,0),Z(u,0),Z(u,0),Z(u,u.level===9?2:u.strategy>=Ai||u.level<2?4:0),Z(u,Kl),u.status=ss);else{let _=Ti+(u.w_bits-8<<4)<<8,R=-1;u.strategy>=Ai||u.level<2?R=0:u.level<6?R=1:u.level===6?R=2:R=3,_|=R<<6,u.strstart!==0&&(_|=Xl),_+=31-_%31,u.status=ss,$s(u,_),u.strstart!==0&&($s(u,o.adler>>>16),$s(u,o.adler&65535)),o.adler=1}if(u.status===bn)if(u.gzhead.extra){for(g=u.pending;u.gzindex<(u.gzhead.extra.length&65535)&&!(u.pending===u.pending_buf_size&&(u.gzhead.hcrc&&u.pending>g&&(o.adler=Ce(o.adler,u.pending_buf,u.pending-g,g)),De(o),g=u.pending,u.pending===u.pending_buf_size));)Z(u,u.gzhead.extra[u.gzindex]&255),u.gzindex++;u.gzhead.hcrc&&u.pending>g&&(o.adler=Ce(o.adler,u.pending_buf,u.pending-g,g)),u.gzindex===u.gzhead.extra.length&&(u.gzindex=0,u.status=Ci)}else u.status=Ci;if(u.status===Ci)if(u.gzhead.name){g=u.pending;do{if(u.pending===u.pending_buf_size&&(u.gzhead.hcrc&&u.pending>g&&(o.adler=Ce(o.adler,u.pending_buf,u.pending-g,g)),De(o),g=u.pending,u.pending===u.pending_buf_size)){m=1;break}u.gzindex<u.gzhead.name.length?m=u.gzhead.name.charCodeAt(u.gzindex++)&255:m=0,Z(u,m)}while(m!==0);u.gzhead.hcrc&&u.pending>g&&(o.adler=Ce(o.adler,u.pending_buf,u.pending-g,g)),m===0&&(u.gzindex=0,u.status=Ii)}else u.status=Ii;if(u.status===Ii)if(u.gzhead.comment){g=u.pending;do{if(u.pending===u.pending_buf_size&&(u.gzhead.hcrc&&u.pending>g&&(o.adler=Ce(o.adler,u.pending_buf,u.pending-g,g)),De(o),g=u.pending,u.pending===u.pending_buf_size)){m=1;break}u.gzindex<u.gzhead.comment.length?m=u.gzhead.comment.charCodeAt(u.gzindex++)&255:m=0,Z(u,m)}while(m!==0);u.gzhead.hcrc&&u.pending>g&&(o.adler=Ce(o.adler,u.pending_buf,u.pending-g,g)),m===0&&(u.status=Pi)}else u.status=Pi;if(u.status===Pi&&(u.gzhead.hcrc?(u.pending+2>u.pending_buf_size&&De(o),u.pending+2<=u.pending_buf_size&&(Z(u,o.adler&255),Z(u,o.adler>>8&255),o.adler=0,u.status=ss)):u.status=ss),u.pending!==0){if(De(o),o.avail_out===0)return u.last_flush=-1,ie}else if(o.avail_in===0&&Zr(p)<=Zr(T)&&p!==Pe)return Ne(o,_n);if(u.status===Bs&&o.avail_in!==0)return Ne(o,_n);if(o.avail_in!==0||u.lookahead!==0||p!==es&&u.status!==Bs){let _=u.strategy===Ai?th(u,p):u.strategy===Vl?Zl(u,p):zs[u.level].func(u,p);if((_===is||_===ms)&&(u.status=Bs),_===gt||_===is)return o.avail_out===0&&(u.last_flush=-1),ie;if(_===Fs&&(p===kl?Ml(u):p!==Jr&&(Ol(u,0,0,!1),p===Dl&&(Me(u.head),u.lookahead===0&&(u.strstart=0,u.block_start=0,u.insert=0))),De(o),o.avail_out===0))return u.last_flush=-1,ie}return p!==Pe?ie:u.wrap<=0?Qr:(u.wrap===2?(Z(u,o.adler&255),Z(u,o.adler>>8&255),Z(u,o.adler>>16&255),Z(u,o.adler>>24&255),Z(u,o.total_in&255),Z(u,o.total_in>>8&255),Z(u,o.total_in>>16&255),Z(u,o.total_in>>24&255)):($s(u,o.adler>>>16),$s(u,o.adler&65535)),De(o),u.wrap>0&&(u.wrap=-u.wrap),u.pending!==0?ie:Qr)},oh=o=>{if(!o||!o.state)return $t;let p=o.state.status;return p!==Ri&&p!==bn&&p!==Ci&&p!==Ii&&p!==Pi&&p!==ss&&p!==Bs?Ne(o,$t):(o.state=null,p===ss?Ne(o,Ll):ie)},ah=(o,p)=>{let g=p.length;if(!o||!o.state)return $t;let m=o.state,u=m.wrap;if(u===2||u===1&&m.status!==Ri||m.lookahead)return $t;if(u===1&&(o.adler=Xr(o.adler,p,g,0)),m.wrap=0,g>=m.w_size){u===0&&(Me(m.head),m.strstart=0,m.block_start=0,m.insert=0);let K=new Uint8Array(m.w_size);K.set(p.subarray(g-m.w_size,g),0),p=K,g=m.w_size}let T=o.avail_in,_=o.next_in,R=o.input;for(o.avail_in=g,o.next_in=0,o.input=p,ns(m);m.lookahead>=X;){let K=m.strstart,F=m.lookahead-(X-1);do m.ins_h=ke(m,m.ins_h,m.window[K+X-1]),m.prev[K&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=K,K++;while(--F);m.strstart=K,m.lookahead=X-1,ns(m)}return m.strstart+=m.lookahead,m.block_start=m.strstart,m.insert=m.lookahead,m.lookahead=0,m.match_length=m.prev_length=X-1,m.match_available=0,o.next_in=_,o.input=R,o.avail_in=T,m.wrap=u,ie};var ch=nh,lh=io,hh=so,uh=eo,dh=ih,ph=rh,fh=oh,gh=ah,mh="pako deflate (from Nodeca project)",Gs={deflateInit:ch,deflateInit2:lh,deflateReset:hh,deflateResetKeep:uh,deflateSetHeader:dh,deflate:ph,deflateEnd:fh,deflateSetDictionary:gh,deflateInfo:mh};let yh=(o,p)=>Object.prototype.hasOwnProperty.call(o,p);var Eh=function(o){let p=Array.prototype.slice.call(arguments,1);for(;p.length;){let g=p.shift();if(g){if(typeof g!="object")throw new TypeError(g+"must be non-object");for(let m in g)yh(g,m)&&(o[m]=g[m])}}return o},Sh=o=>{let p=0;for(let m=0,u=o.length;m<u;m++)p+=o[m].length;let g=new Uint8Array(p);for(let m=0,u=0,T=o.length;m<T;m++){let _=o[m];g.set(_,u),u+=_.length}return g},no={assign:Eh,flattenChunks:Sh};let ro=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{ro=!1}let qs=new Uint8Array(256);for(let o=0;o<256;o++)qs[o]=o>=252?6:o>=248?5:o>=240?4:o>=224?3:o>=192?2:1;qs[254]=qs[254]=1;var vh=o=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(o);let p,g,m,u,T,_=o.length,R=0;for(u=0;u<_;u++)g=o.charCodeAt(u),(g&64512)===55296&&u+1<_&&(m=o.charCodeAt(u+1),(m&64512)===56320&&(g=65536+(g-55296<<10)+(m-56320),u++)),R+=g<128?1:g<2048?2:g<65536?3:4;for(p=new Uint8Array(R),T=0,u=0;T<R;u++)g=o.charCodeAt(u),(g&64512)===55296&&u+1<_&&(m=o.charCodeAt(u+1),(m&64512)===56320&&(g=65536+(g-55296<<10)+(m-56320),u++)),g<128?p[T++]=g:g<2048?(p[T++]=192|g>>>6,p[T++]=128|g&63):g<65536?(p[T++]=224|g>>>12,p[T++]=128|g>>>6&63,p[T++]=128|g&63):(p[T++]=240|g>>>18,p[T++]=128|g>>>12&63,p[T++]=128|g>>>6&63,p[T++]=128|g&63);return p};let oo=(o,p=o.length)=>{if(p<65534&&o.subarray&&ro)return String.fromCharCode.apply(null,o.length===p?o:o.subarray(0,p));let g="";for(let m=0;m<p;m++)g+=String.fromCharCode(o[m]);return g};var _h=(o,p)=>{let g=p||o.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(o.subarray(0,p));let m,u,T=new Array(g*2);for(u=0,m=0;m<g;){let _=o[m++];if(_<128){T[u++]=_;continue}let R=qs[_];if(R>4){T[u++]=65533,m+=R-1;continue}for(_&=R===2?31:R===3?15:7;R>1&&m<g;)_=_<<6|o[m++]&63,R--;if(R>1){T[u++]=65533;continue}_<65536?T[u++]=_:(_-=65536,T[u++]=55296|_>>10&1023,T[u++]=56320|_&1023)}return oo(T,u)},wh=(o,p)=>{p=p||o.length,p>o.length&&(p=o.length);let g=p-1;for(;g>=0&&(o[g]&192)===128;)g--;return g<0||g===0?p:g+qs[o[g]]>p?g:p},ao={string2buf:vh,buf2string:_h,utf8border:wh};function bh(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Ah=bh;let co=Object.prototype.toString,{Z_NO_FLUSH:Th,Z_SYNC_FLUSH:Rh,Z_FULL_FLUSH:Ch,Z_FINISH:Ih,Z_OK:Oi,Z_STREAM_END:Ph,Z_DEFAULT_COMPRESSION:Oh,Z_DEFAULT_STRATEGY:Nh,Z_DEFLATED:Mh}=Kr;function Ni(o){this.options=no.assign({level:Oh,method:Mh,chunkSize:16384,windowBits:15,memLevel:8,strategy:Nh},o||{});let p=this.options;p.raw&&p.windowBits>0?p.windowBits=-p.windowBits:p.gzip&&p.windowBits>0&&p.windowBits<16&&(p.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ah,this.strm.avail_out=0;let g=Gs.deflateInit2(this.strm,p.level,p.method,p.windowBits,p.memLevel,p.strategy);if(g!==Oi)throw new Error(bi[g]);if(p.header&&Gs.deflateSetHeader(this.strm,p.header),p.dictionary){let m;if(typeof p.dictionary=="string"?m=ao.string2buf(p.dictionary):co.call(p.dictionary)==="[object ArrayBuffer]"?m=new Uint8Array(p.dictionary):m=p.dictionary,g=Gs.deflateSetDictionary(this.strm,m),g!==Oi)throw new Error(bi[g]);this._dict_set=!0}}Ni.prototype.push=function(o,p){let g=this.strm,m=this.options.chunkSize,u,T;if(this.ended)return!1;for(p===~~p?T=p:T=p===!0?Ih:Th,typeof o=="string"?g.input=ao.string2buf(o):co.call(o)==="[object ArrayBuffer]"?g.input=new Uint8Array(o):g.input=o,g.next_in=0,g.avail_in=g.input.length;;){if(g.avail_out===0&&(g.output=new Uint8Array(m),g.next_out=0,g.avail_out=m),(T===Rh||T===Ch)&&g.avail_out<=6){this.onData(g.output.subarray(0,g.next_out)),g.avail_out=0;continue}if(u=Gs.deflate(g,T),u===Ph)return g.next_out>0&&this.onData(g.output.subarray(0,g.next_out)),u=Gs.deflateEnd(this.strm),this.onEnd(u),this.ended=!0,u===Oi;if(g.avail_out===0){this.onData(g.output);continue}if(T>0&&g.next_out>0){this.onData(g.output.subarray(0,g.next_out)),g.avail_out=0;continue}if(g.avail_in===0)break}return!0},Ni.prototype.onData=function(o){this.chunks.push(o)},Ni.prototype.onEnd=function(o){o===Oi&&(this.result=no.flattenChunks(this.chunks)),this.chunks=[],this.err=o,this.msg=this.strm.msg};function kh(o,p){p=p||{};let g=new Ni(p);if(g.push(o,!0),g.err)throw g.msg||bi[g.err];return g.result}function Dh(o,p){return p=p||{},p.gzip=!0,kh(o,p)}return(o,p,g)=>{let m=Dh(o);return p==="base64"?m=btoa(oo(m)):m=m.buffer,g&&g(m),m}}var bE=(()=>{class s extends tc{constructor(t){super(t),this.algorithm=ln.GZIP,this.bg=Ea(),this.iT=(i,r,a)=>{let c=this.bg(i,r);a(c)},this.compress=Sa(),typeof CompressionStream!="undefined"&&ep||(this.compress=this.iT,this.getCompressorSourceCode=()=>Ea.toString())}compressSync(t,e){return this.bg(t,e)}getCompressorSourceCode(){return Sa.toString()}}return s})();function Sa(){let s=n=>new Promise(t=>{let e=new FileReader;e.onload=i=>t(i.target.result.split(",")[1]),e.readAsDataURL(new Blob([n]))});return(n,t,e)=>{let i=new Response(n).body.pipeThrough(new CompressionStream("gzip")),r=new Response(i).arrayBuffer();if(t==="base64"){r.then(a=>s(a)).then(a=>e(a));return}r.then(a=>e(a))}}var AE=(()=>{class s extends tc{constructor(){super(...arguments),this.algorithm=ln.UNCOMPRESSED}compress(t,e,i){i(this.compressSync(t,e))}compressSync(t,e){return t}getCompressorSourceCode(){return function(){return(t,e,i)=>i(t)}.toString()}}return s})(),ol=(()=>{class s{static create(t,e=!0){return this.instance?this.instance:e&&!_E.isCompressionEnabled()?new AE(t):this.instance=new bE(t)}}return s})();var TE=(()=>{class s{constructor(t,e,i,r,a,c,l,h,f,d,y,E,v,C,P,A,w,x,b,L,H,W,nt,pt,ft,S,M,U,B){this.J=t,this.le=e,this.R=i,this.w=r,this.E=a,this.f=c,this.Gh=l,this.h=h,this.qh=f,this.Js=d,this.Gr=y,this.pe=E,this.I=v,this.W=C,this.K=P,this.A=A,this.lT=w,this.Q=x,this.it=b,this._t=L,this.Tg=H,this.te=W,this.hT=nt,this.C=pt,this.St=ft,this.M=S,this.Ft=M,this.et=U,this.gt=B,this.uT=(et=!1)=>{let ut=this.w.getSession();ut===null?(this.Nn=new SE(this.h.recordTargetingRules,this.Rg,this.E,this.et,this.Q,this.A),this.Nn.init(),this.Nn.start()):(ut.collectState===N.RECORDING_RULES_TARGETING||ut.collectState===N.ANALYTICS_ONLY_RULES_TARGETING)&&this.Rg(et)},this.Rg=(et=!1)=>{this.Mn.onLoad(()=>{var ut,Ct;(ut=this.Nn)===null||ut===void 0||ut.emitTargetingCollectState(),(Ct=this.Nn)===null||Ct===void 0||Ct.stop(),this.E.emitStartTracking(et)}),this.Ma(et)},this.Ma=(et=!1)=>{this.Js.isActive()||(this.gt.init(),this.Wh.start(et),this.Mn.start())},this.dT=()=>{this.E.emitBeforeSessionRenewal(),this.kn(!0),this.E.emitAfterSessionRenewal()},this.pT=()=>{this.E.emitBeforeSessionRenewal(),this.et.refreshQuota(),this.et.onQuotaReady(et=>{et!==N.QUOTA_REACHED&&(this.kn(!0),this.E.emitAfterSessionRenewal())})}}start(){var t;if(this.qh.init(),this.Js.init(),this.Js.isActive())return;let e,i,r,a,c,l,h,f,d,y,E,v,C,P,A,w,x,b,L,H;this.C.schedule(()=>{C=new ay(this.w,this.R),w=new Hy(C),v=new Km(this.W),P=new Qy(()=>{}),x=new Zy,H=new tE;let W=new cE(P,this.gt,x,L,H,this.Yh());A=new nE(this.Yh(),this.gt,W,x,b);let nt=new aE(this.E,this.f,this.gt,W,x,b,L);nt.init(),this.E.addListener(nt),e=new Vm(this.h,this.J,this.R,this.W,v,this.f,C,new _y(V),this.it,this.St,this.Q,A),i=new Jg(this.f,this.w,this.h,this.J,this.le,this.I),E=new Ay(A);let pt=new gy(this.h);y=new fy(this.h,pt,E,A,this.it),y.init();let ft=new jy;r=new Gg(this.R,this.w,this.f,this.it,pt,this.h,ft,E),a=new rm(this.h,this.J,this.R,this.f,this.I,C,this.A);let S;this.Wh=new Xm(this.h,this.f,this.E,this.J,this.R,this.w,this.pe,this._t,this.K,this.A,this.te,ft,this.Q,this.qs,S),this.Cg=new ny(this.h,this.R,this.w,this.f),h=new uy(this.h,this.f,this.le,this.J,this.Q),f=new py(this.f),d=new by(this.h,new Ka(this.h,this.I),this.St),this.Mn=new Jm}),this.h.apiErrors.enabled&&this.C.schedule(()=>{this.lt=new Qc,this.fT=new uE(this.f,this.lt),this.fT.init()}),this.h.apiErrors.enabled&&this.C.schedule(()=>{var W,nt,pt;let ft;!((W=this.h.apiErrors.collectionRules)===null||W===void 0)&&W.length?ft=new Ky(this.h.apiErrors,this.I):ft=new Jy(this.h.apiErrors,this.I),this.at=new yy(new Gy,new qy,ft),this.ce=new Ey(this.lt,this.K,!!(!((pt=(nt=this.h)===null||nt===void 0?void 0:nt.experimental)===null||pt===void 0)&&pt.anonymizeNameInUrls)),this.Fi=new Wy;let S=new Cy(this.at,this.ce,this.h,this.J,this.it,this.f,this.St);S.init(),this.E.addListener(S)}),this.h.customErrors.enabled&&this.C.schedule(()=>{var W,nt,pt;let ft;this.Xs=new mE(this.I,!((pt=(nt=this.h)===null||nt===void 0?void 0:nt.experimental)===null||pt===void 0)&&pt.anonymizeNameInUrls?this.K:void 0);let S=new Vy(this.Xs,this.h,this.J,this.f,this.Q,this.St,this.it,ft);S.init(),this.E.addListener(S)}),this.h.jsErrorsEnabled&&this.C.schedule(()=>{this.ws=new dy,this.ae=new vy(this.I,this.A);let W=new ky(this.ws,this.ae,this.h,this.J,this.it,this.f,this.Q,this.A,this.St);W.init(),this.E.addListener(W)}),this.C.schedule(()=>{this.Gr.init()}),this.C.schedule(()=>{r.init()}),this.C.schedule(()=>{i.init()}),this.C.schedule(()=>{a.init()}),this.C.schedule(()=>{this.Tg.init()}),this.C.schedule(()=>{this.Wh.init()}),this.C.schedule(()=>{this.Cg.init()}),this.C.schedule(()=>{h.init()}),this.C.schedule(()=>{this.lT.init()}),this.C.schedule(()=>{f.init()}),this.C.schedule(()=>{d.init()}),this.C.schedule(()=>{this.hT.init()}),this.C.schedule(()=>{this.E.addListener(this.Cg),this.E.addListener(this.Gh),this.E.addListener(e),this.E.addListener(this.Gr),this.E.addListener(r),this.E.addListener(a),this.E.addListener(this.Tg),this.E.addListener(this.Wh),this.E.addListener(h),this.E.addListener(i),this.E.addListener(y),this.E.addListener(d),this.E.addListener(w)}),ui.isRecordingSupported()&&this.C.schedule(()=>{let W=new kg(E,this.w,this.h,this.J,this.f,this.I,C,P,this.ae,this.at,this.ce,this.lt,this.E,this.Q,this.it,this.te,this.St,this.K,this.Fi,this.Yh(),this.Xs,b);W.init(),this.E.addListener(W),r.setRecordingService(W.recordingService)}),this.C.schedule(()=>{e.init()}),this.C.schedule(()=>{this.h.isQuotaEnabled()?C.onSessionExpired(()=>{this.pT()}):C.onSessionExpired(()=>{this.dT()}),this.kn()})}kn(t=!1){var e;if(this.h.hasTargetingRules()){this.uT(t),this.f.start(),this.Nn&&this.Nn.checkInitialUrlTargetingRules();return}this.f.start(),this.Mn.onLoad(()=>{this.E.emitStartTracking(t)}),(!Zc(this.h)||t)&&this.Ma(t)}Yh(){if(this.ot)return this.ot;let t=new $y;return this.ot=new Fy(this.pe,this.h,this.A,t),this.ot.init(),this.ot.shouldUseAnonymization()&&ct.counters.pageAnonymisation.count("anonymized-on-start"),this.ot}}return s})(),RE=(()=>{class s{constructor(t,e,i,r,a,c,l,h){this.h=t,this.R=e,this.qe=i,this.Ig=r,this.gT=a,this.mT=c,this.yT=l,this.Xh=h}compute(t){var e,i;this.h.crossDomainTracking&&!this.h.cookielessTrackingEnabled?this.h.crossDomainSingleIframeTracking?(e=this.yT)===null||e===void 0||e.start(()=>this.Kh(t)):(i=this.mT)===null||i===void 0||i.applyUpToDate(()=>this.Kh(t)):this.Kh(t)}Kh(t){this.gT.handle(),this.Ig.clear(),this.ET()?(this.Ig.restoreClearedVisitor(),t(!0)):(this.qe.exclude(this.h),t(!1))}ET(){let t=Ps.boolean(this.h.sampleRate);return this.Xh.isForceIncluded()||!this.qe.isExcluded()&&this.R.doesVisitorExist()||!this.qe.isExcluded()&&t}}return s})(),CE=(()=>{class s{constructor(t,e,i,r){this.h=t,this.nt=e,this.E=i,this.w=r,this.ST=10*1e3}createOrUpdateVisitor(){var t;let e=this.getVisitor();e===null&&(e=this.vT(),(t=this.w)===null||t===void 0||t.removeSession()),this._T(e),this.setVisitor(e)}vT(){return{id:By.generate(),visitsCount:0,appliedTrackingDraw:this.h.lastTrackingDraw,creationTimestamp:Eo(),lastVisitTimestamp:0,hitTimestamp:0,expires:O.now()+this.h.visitorCookieTimeout,allowSubdomains:this.h.allowSubdomains,identityPrint:null}}_T(t){let e=Eo();this.w&&!this.w.doesSessionExist()&&(t.visitsCount+=1,t.lastVisitTimestamp=e),t.hitTimestamp=e,t.appliedTrackingDraw=this.h.lastTrackingDraw,this.Pg=t.visitsCount}getRequestParameters(){let t=this.getVisitor();return t?{uu:t.id,sn:`${t.visitsCount}`,hd:`${t.hitTimestamp}`}:{}}getVisitor(){return this.nt.get()}setVisitor(t){this.nt.set(t)}doesVisitorExist(){return this.nt.get()!==null}resetVisitor(){this.Og(),this.E.emitAfterVisitorCleared()}removeVisitor(){this.nt.remove()}hasAllowSubdomainsChanged(){let t=this.getVisitor();return t?t.allowSubdomains!==this.h.allowSubdomains:!1}handleSubdomainChange(){this.nt.handleSubdomainChange()}isSessionRenewed(){let t=this.getVisitor();return t===null||this.Pg===void 0?!1:t.visitsCount!==this.Pg}wT(){return!Q(this.Ng)||O.now()-this.Ng>this.ST}renewVisitor(){this.wT()?(this.Ng=O.now(),this.Og(),this.E.emitAfterVisitorRenewal()):V.warn("session:start:newVisitor is trying to renew visitor under time limit")}Og(){this.E.emitBeforeVisitorRenewal(),this.removeVisitor()}}return s})(),Xt="_cs_s",Yi=18e5,zn=".",IE=13,Hi=(()=>{let s;return function(n){n[n.NOT_FOUND=0]="NOT_FOUND",n[n.EXPIRED=1]="EXPIRED",n[n.FOUND=2]="FOUND"}(s||(s={})),s})(),PE=(()=>{class s{constructor(t,e,i){this.h=t,this.M=e,this.Xt=i,this.Qt=null,this.Jh=!1}get(t){let e=this.getRawSession(t);return this.isValid(e)?cc(e):null}getRawSession(t){if(t){let f=this.Qh();return sr(f)}let{sessionString:e,status:i}=this.bT(),r=sr(e);if(i!==Hi.EXPIRED)return r;if(this.h.cookielessTrackingEnabled)return null;let a=this.Qh();if(!a)return null;let c=csString.prototype.split.call(a,zn);if(!s.Mg(c))return a;let l=c[c.length-1],h=parseInt(l,10);return isNaN(h)||this.AT(h),r}onCookieToSet(t){this.ci=t}onCookieToRemove(t){this.li=t}set(t,e=Yi){var i;let r=O.now()+e,a=Md(t);a+=`${zn}${r}`,this.TT(a,r),this.h.cookielessTrackingEnabled?this.Xt.setItem(Xt,a):(this.M.set(Xt,a,e),(i=this.ci)===null||i===void 0||i.call(this,Xt,a,e))}remove(){var t;this.h.cookielessTrackingEnabled?this.Xt.removeItem(Xt):(this.M.delete(Xt),(t=this.li)===null||t===void 0||t.call(this,Xt)),this.RT()}handleSubdomainChange(){if(this.h.cookielessTrackingEnabled)return;let t=this.get(!0);t&&(this.h.allowSubdomains?this.M.delete(Xt,cn.CURRENT_DOMAIN):this.M.delete(Xt,this.M.getRootDomain()),this.set(t))}isValid(t){return t!==null&&Rr(t)}TT(t,e){this.Qt={sessionString:t,expires:e}}bT(){return this.Qt?this.Qt&&O.now()<=this.Qt.expires?{sessionString:this.Qt.sessionString,status:Hi.FOUND}:{sessionString:this.Qt.sessionString,status:Hi.EXPIRED}:{sessionString:this.Qh(),status:Hi.NOT_FOUND}}RT(){this.Qt=null}AT(t){this.Qt&&(this.Qt.expires=t,this.Jh=!0)}isCacheRefreshed(){return this.Jh}resetCacheRefreshed(){this.Jh=!1}Qh(){if(this.h.cookielessTrackingEnabled){let e=this.Xt.getItem(Xt);return!e||this.kg(e)?null:e}let t=this.M.get(Xt);return!t||this.kg(t)?null:t}kg(t){let e=csString.prototype.split.call(t,zn);if(!s.Mg(e))return!1;let i=parseInt(e[e.length-1],10);return!isNaN(i)&&O.now()>i}static Mg(t){return t[t.length-1].length===IE}}return s})(),Vr=60*1e3,OE=60*Vr,NE=4*OE-Vr,_s=(()=>{let s;return function(n){n[n.NO=0]="NO",n[n.WITHDRAWN=1]="WITHDRAWN",n[n.GRANTED=2]="GRANTED"}(s||(s={})),s})(),ME=(()=>{class s{constructor(t,e){this.ye=t,this.et=e,this.qr=null,this.Zh=0,this.Wr=_s.NO}setDynamicVariablesService(t){this.CT=t}createOrUpdateSession(){this.tu(),this.IT=O.now(),this.Zh=0;let t=this.Dg();t===null?(t=this.PT(),this.Lg(t),this.ka(t)):(t=this.et.sanitizeSessionCollectState(t),this.Lg(t),t.collectState=this.et.getEligibleCollectState(t)),this.setSession(t)}grantReplayRecording(t){t.collectState=this.et.getInitialCollectState(),t.collectState=this.et.computeInitialCollectStateFromRecordingConsentGranted(t),this.setSession(t)}grantReplayRecordingBeforeSessionStart(){this.Wr=_s.GRANTED}withdrawnReplayRecording(t){t.collectState=this.et.getRecordingConsentWithdrawn(),this.setSession(t)}withdrawnReplayRecordingBeforeSessionStart(){this.Wr=_s.WITHDRAWN}ka(t){this.Wr===_s.WITHDRAWN?(t.collectState=this.et.getRecordingConsentWithdrawn(),this.setSession(t)):this.Wr===_s.GRANTED?t.collectState=this.et.computeInitialCollectStateFromRecordingConsentGranted(t):t.collectState=this.et.computeInitialCollectState(t),this.Wr=_s.NO}PT(){return{pageNumber:0,collectState:this.et.getInitialCollectState(),etrState:Lt.ETR_OFF,etrStatus:kt.ETR_NOT_SAVED_SESSION}}Lg(t){t.pageNumber+=1}isReplayRecorded(){let t=this.getSession();return!!t&&this.et.isReplayRecorded(t)}isTemporarilyRecorded(){let t=this.getSession();return(t==null?void 0:t.collectState)===N.RECORDING_TEMPORARILY}abortQuotaServiceRequest(){this.et.abortQuotaServiceRequest()}getRequestParameters(){let t={},e=this.getSession();return e!==null&&(t.pn=`${e.pageNumber}`),t}getSession(){return this.ye.get()}Dg(){return this.ye.get(!0)}doesSessionExist(){return this.ye.get()!==null}setSession(t){this.ye.set(t)}refreshSession(){let t=this.Dg();t&&this.setSession(t)}removeSession(){this.ye.remove()}getCollectStates(){let t=this.getSession(),e=[];return t&&(t.collectState!==N.ANALYTICS_ONLY&&csArray.prototype.push.call(e,t.collectState===N.RECORDING_RULES_TARGETING?N.RECORDING_GLOBAL_SAMPLING:t.collectState),t.etrState===Lt.ETR_ON&&csArray.prototype.push.call(e,N.RECORDING_ETR_SAMPLING)),e}updateCollectState(t,e){let i=this.getSession();i!==null&&(i.collectState=t,i.etrState=e,this.setSession(i))}hasValidSession(){let t=this.ye.getRawSession();return this.ye.isValid(t)}handleSubdomainChange(){this.ye.handleSubdomainChange()}pollCacheRefreshEvent(t=!0){let e=this.ye.isCacheRefreshed();return e&&t&&this.ye.resetCacheRefreshed(),e}extendSessionPeriodically(){this.qr||this.xg()}extendSession(){let t=this.getSession();return t===null?(V.warn("extendSession is trying to extend an expired session"),this.tu(),!1):(this.ye.set(t,Yi),!0)}xg(){if(this.OT()){this.tu();return}this.extendSession()&&(this.NT(),this.MT())}MT(){this.qr=window.csSetTimeout(()=>{this.xg()},Yi-Vr)}OT(){return NE-(O.now()+Yi-this.IT)<0}tu(){this.qr&&(window.csClearTimeout(this.qr),this.qr=null)}NT(){this.Zh+=1,this.CT.trackDynamicVariable("session_expiry_update",this.Zh)}}return s})(),kE=(()=>{class s{constructor(t,e,i){this.h=t,this.R=e,this.qe=i}clear(){this.kT()&&(this.Ug=this.R.getVisitor(),this.R.removeVisitor()),this.DT()&&this.qe.removeExclusion()}kT(){return this.R.doesVisitorExist()&&this.R.getVisitor().appliedTrackingDraw!==this.h.lastTrackingDraw}DT(){return this.qe.getAppliedTrackingDraw()!==this.h.lastTrackingDraw}restoreClearedVisitor(){this.Ug&&this.R.setVisitor(this.Ug)}}return s})(),DE=(()=>{class s{constructor(t,e,i){this.R=t,this.w=e,this.LT=i}handle(){this.R.hasAllowSubdomainsChanged()&&(this.R.handleSubdomainChange(),this.w.handleSubdomainChange(),this.LT.handleSubdomainChange())}}return s})(),Be="_cs_c",as=(()=>{let s;return function(n){n[n.NOT_REQUIRED=0]="NOT_REQUIRED",n[n.NOT_EXPRESSED=1]="NOT_EXPRESSED",n[n.GRANTED=2]="GRANTED",n[n.WITHDRAWN=3]="WITHDRAWN"}(s||(s={})),s})(),LE=(()=>{class s{constructor(t,e,i){this.h=t,this.M=e,this.Ft=i}get(){let t;return this.h.cookielessTrackingEnabled?t=this.Ft.getItem(Be):t=this.M.get(Be),t===null?t:Number(t)}set(t){this.h.cookielessTrackingEnabled?this.Ft.setItem(Be,csString(t)):this.M.set(Be,csString(t),vr)}remove(){this.h.cookielessTrackingEnabled?this.Ft.removeItem(Be):this.M.delete(Be)}handleSubdomainChange(){this.h.cookielessTrackingEnabled||(this.h.allowSubdomains?this.M.delete(Be,cn.CURRENT_DOMAIN):this.M.delete(Be,this.M.getRootDomain()))}}return s})(),xE=(()=>{class s{constructor(t,e,i){this.h=t,this.w=e,this.E=i}grantReplayConsent(){if(!qe.isReplayConsentNeeded(this.h))return;let t=this.w.getSession();if(!t){this.w.grantReplayRecordingBeforeSessionStart();return}qe.isRecordingBlockedByConsent(t)&&(this.w.grantReplayRecording(t),this.E.emitAfterReplayRecordingConsentGranted())}withdrawReplayConsent(){if(!qe.isReplayConsentNeeded(this.h))return;let t=this.w.getSession();if(!t){this.w.withdrawnReplayRecordingBeforeSessionStart();return}qe.isRecordingWithDrawn(t)||(this.w.withdrawnReplayRecording(t),this.E.emitAfterReplayRecordingConsentWithdrawn())}}return s})(),UE=["replay:consent:unanonymized:granted","trackConsentGranted"],VE=["replay:consent:unanonymized:withdrawn","trackConsentWithdrawn"],jE=["replay:consent:startForSession:granted"],HE=["replay:consent:startForSession:withdrawn"],BE=(()=>{class s{constructor(t,e,i,r,a){this.h=t,this.f=e,this.pe=i,this.w=r,this.E=a}init(){this.Vg=new xE(this.h,this.w,this.E),this.pe.setInitialConsent(),this.ht()}ht(){this.f.register(UE,()=>{this.pe.grantReplayAnonymizationConsent()}),this.f.register(VE,()=>{this.pe.withdrawReplayAnonymizationConsent()}),this.f.register(jE,()=>{this.Vg.grantReplayConsent()}),this.f.register(HE,()=>{this.Vg.withdrawReplayConsent()})}onOptout(){this.pe.removeAllConsents()}onBeforeVisitorRenewal(){this.pe.removeAllConsents()}onAfterVisitorRenewal(){this.pe.setInitialConsent()}onAfterVisitorCleared(){this.pe.setInitialConsent()}}return s})(),FE=(()=>{class s{constructor(t,e,i){this.h=t,this.nt=e,this.E=i}setInitialConsent(){let t=this.nt.get();(t===null||this.hasConsentRequiredChanged(t))&&this.setDefaultReplayAnonymization()}hasConsentRequiredChanged(t){let e=this.h.consentRequired;return e&&t===as.NOT_REQUIRED||!e&&t!==as.NOT_REQUIRED}handleSubdomainChange(){this.nt.handleSubdomainChange()}setDefaultReplayAnonymization(){let t=this.h.consentRequired?as.NOT_EXPRESSED:as.NOT_REQUIRED;this.nt.set(t)}grantReplayAnonymizationConsent(){this.h.consentRequired&&(this.nt.set(as.GRANTED),this.E.emitReplayUnanonymizationConsentGranted())}withdrawReplayAnonymizationConsent(){this.h.consentRequired&&(this.nt.set(as.WITHDRAWN),this.E.emitReplayUnanonymizationConsentWithdrawn())}removeAllConsents(){this.nt.remove()}isReplayUnanonymizedAllowedByConsent(){return!this.h.consentRequired||this.nt.get()===as.GRANTED}getRequestParameters(){return{uc:`${this.nt.get()}`}}}return s})(),$E=(()=>{class s{constructor(t,e,i,r,a,c,l){this.E=t,this.f=e,this.Gh=i,this.qh=r,this.Js=a,this.xT=c,this.Gr=l}start(){this.E.addListener(this.xT),this.E.addListener(this.Gr),this.E.addListener(this.Gh),this.Gr.init(),this.qh.init(),this.Js.init(),!this.Js.isActive()&&this.f.start()}}return s})(),zE=(()=>{class s{constructor(t,e){this.Rt=t,this.nt=e}exclude(t){this.nt.set(csString(t.lastTrackingDraw))}removeExclusion(){this.nt.remove()}isExcluded(){return this.UT()||this.VT()}UT(){return this.getAppliedTrackingDraw()!==0}getAppliedTrackingDraw(){return this.nt.get()}VT(){return csString.prototype.indexOf.call(this.Rt.href,me)>0}}return s})(),GE=(()=>{class s{constructor(t){this.Qe=t}onOptout(){this.Qe.removeExclusion()}}return s})(),Gn=(()=>{let s;return function(n){n.SessionReplay="SR",n.None=""}(s||(s={})),s})(),qE=".^",WE=".*",YE=(()=>{class s{constructor(t){this.A=t,this.eu=new csRegExp(`${qE}`)}setExcludeUrlForSessionReplay(t){try{this.eu=new csRegExp(t)}catch{V.warn(`excludeURLforReplay - invalid regex '${t}'`),this.eu=new csRegExp(`${WE}`)}}jg(){return this.eu.test(this.A.getAnonymizedUrl())?Gn.SessionReplay:Gn.None}isUrlExcludedForSessionReplay(){return this.jg()===Gn.SessionReplay}getRequestParameters(){return{ex:this.jg()}}}return s})(),XE=["excludeURLforReplay"],KE=(()=>{class s{constructor(t,e){this.Qe=t,this.f=e}init(){this.f.register(XE,t=>{if($(t))this.Qe.setExcludeUrlForSessionReplay(t);else throw new Error("Command misuse: excludeURLforReplay")})}}return s})(),qn="_cs_inc",JE=(()=>{class s{constructor(t,e){this.Rt=t,this.M=e}isForceIncluded(){return this.jT()||this.HT()}isForceReplayRecorded(){return this.BT(N.RECORDING_GLOBAL_SAMPLING)}jT(){return this.M.get(qn)!==null}BT(t){return this.M.get(qn)===t}HT(){return csString.prototype.indexOf.call(this.Rt.href,qn)>0}}return s})(),Js="_cs_optout",QE=(()=>{class s{constructor(t,e,i){this.h=t,this.M=e,this.Ft=i}get(){return this.h.cookielessTrackingEnabled?this.Ft.getItem(Js):this.M.get(Js)}set(t){this.h.cookielessTrackingEnabled?this.Ft.setItem(Js,t):this.M.set(Js,t,vr)}}return s})(),va="1",ZE=(()=>{class s{constructor(t,e,i){this.E=t,this.Rt=e,this.nt=i}init(){!this.isActive()&&this.FT()&&this.activate()}isActive(){return this.nt.get()===va}activate(){this.E.emitOptout(),this.nt.set(va)}FT(){return csString.prototype.indexOf.call(this.Rt.href,Js)>0}}return s})(),tS=["optout"];var eS=(()=>{class s{constructor(t,e){this.f=t,this.Js=e}init(){this.f.register(tS,()=>{this.Js.activate()})}}return s})(),al=(()=>{let s;return function(n){function t(e,i){let r=sS(e,i),a=iS(e,i);return r||a}n.select=t}(s||(s={})),s})();function sS(s,n){return csArray.prototype.filter.call(s,t=>t.exclusion===n)[0]}function iS(s,n){return csArray.prototype.sort.call(csArray.prototype.filter.call(s,t=>nS(t,n)),rS)[0]}function nS(s,n){return s.visitor&&s.visitor.appliedTrackingDraw===n}function rS(s,n){return n.visitor.visitsCount!==s.visitor.visitsCount?n.visitor.visitsCount-s.visitor.visitsCount:s.session?n.session?n.session.pageNumber-s.session.pageNumber:-1:1}var oS=(()=>{class s{constructor(t,e,i){this.h=t,this.Yr=e,this.$T=i}applyUpToDate(t){this.$T.retrieve(this.h.hostnames,e=>{let i=[this.Yr.get(),...e],r=al.select(i,this.h.lastTrackingDraw);this.Yr.apply(r),t()})}}return s})(),aS=(()=>{class s{constructor(t,e){this.f=t,this.it=e}init(){this.it.addListener(this.f)}onOptout(){this.f.stop()}onBeforeSessionRenewal(){this.f.stop()}}return s})();var cS=(()=>{let s;return function(n){n.UXA="_uxa",n.WVT="cs_wvt"}(s||(s={})),s})(),lS=(()=>{class s extends Mt{constructor(t){super(),this.su=t,this.cs={}}register(t,e,i){for(let r of t){let a=(...c)=>{try{let l=e(...c);return ct.counters.commandApplied.count(r),l}catch(l){ct.counters.commandMisuse.count(r),V.warn(`Misused Command: ${r}; Args: ${csJSON.stringify(c)}; Error: ${Ke(l)?l.stack:l}`)}};this.cs[r]={callback:a,configuration:i},this.cs}}onStart(){this.zT(),this.GT()}onStop(){for(let t of this.su)window[t]=[]}applyFromIntegration(t,e,i){this.Hg(t,e,`Commands.apply.from.integration: ${i}`),ct.counters.commandsFromIntegrations.count(t)}applyFromImplementation(t,e,i){this.Hg(t,e,`Commands.apply.from.implementation: ${i}`),ct.counters.commandsFromCSTC.count(t)}onIframeCommands(t){for(let e of t.commands)this.qT(e.name,e.params,t.iframePath),ct.counters.commandsFromIframe.count(e.name)}Hg(t,e,i){if(!this.isStarted){window._uxa.push([t,...e]);return}V.tryToExecute(i,()=>{if(this.cs[t])return this.cs[t].callback(...e)})()}qT(t,e,i){V.tryToExecute(`Commands.apply.from.iframe: ${i}`,()=>{if(this.cs[t])return this.cs[t].callback(...e)})()}zT(){for(let t of this.su)window[t].forEach(([e,...i])=>this.Bg(e,i,!1))}GT(){for(let t of this.su)window[t]={push:([e,...i])=>this.Bg(e,i,!0)}}Bg(t,e,i){var r,a;if(this.cs[t]){if(((r=this.cs[t].configuration)===null||r===void 0?void 0:r.disableApplyPending)&&!i||((a=this.cs[t].configuration)===null||a===void 0?void 0:a.disableApplyImmediate)&&i)return;try{return this.cs[t].callback(...e)}catch(l){ct.counters.commandError.count(t),V.error(`Command ${t} failed - params: ${csJSON.stringify(e)}`,l)}}}}return s})(),_a="contentsquare.net",wa=(()=>{let s;return function(n){n.Set="set",n.Remove="remove"}(s||(s={})),s})(),hS=(()=>{class s{constructor(t,e,i,r,a,c){this.h=t,this.M=e,this.ye=i,this.Fg=r,this.$g=a,this.zg=c,this.Gg=Jt.None,this.iu=!1,this.Qs=[],this.Zs=[]}init(){this.Gg=this.M.isSameSiteSupported()?Jt.None:Jt.NotSet,this.WT()}setStates(t,e){this.Yr=t,this.qg=e}start(t){this.qg.init(this.Wg(),(e,i)=>{let r=[this.Yr.get()];i&&csArray.prototype.push.call(r,e);let a=al.select(r,this.h.lastTrackingDraw);this.iu=!0,this.Yr.apply(a),t()}),this.Yg=this.qg.openIframe()}setCookie(t,e,i){if(this.iu){let r=this.Gg,a=ce.Yes,c={name:t,value:e,samesite:r,secure:a};i&&(c.expires=dt.toExpireDate(i).getTime()),this.YT(c)}}removeCookie(t){this.iu&&this.XT(t)}XT(t){this.Zs=csArray.prototype.filter.call(this.Zs,e=>e!==t),this.Qs=csArray.prototype.filter.call(this.Qs,e=>e.name!==t),csArray.prototype.push.call(this.Zs,t),this.setBatchReadyCall()}YT(t){this.Zs=csArray.prototype.filter.call(this.Zs,e=>e!==t.name),this.Qs=csArray.prototype.filter.call(this.Qs,e=>e.name!==t.name),csArray.prototype.push.call(this.Qs,t),this.setBatchReadyCall()}setBatchReadyCall(){this.KT()}KT(){if(this.Qs.length>0){let t=this.Xg(wa.Set,this.Qs);this.Da(t),this.Qs=[]}if(this.Zs.length>0){let t=this.Xg(wa.Remove,this.Zs);this.Da(t),this.Zs=[]}}Xg(t,e){return{command:t,cookies:e,domain:null,pid:this.h.projectId}}Da(t){var e;let i=`https://${this.Wg()}`;!((e=this.Yg)===null||e===void 0)&&e.contentWindow&&this.Yg.contentWindow.postMessage(t,i)}Wg(){return this.h.dualCollectionTagDomain&&this.h.dualCollectionTagDomain!==_a?`cdnssl.${this.h.dualCollectionTagDomain}`:`csxd.${_a}`}WT(){this.ye.onCookieToSet((t,e,i)=>{this.setCookie(t,e,i)}),this.Fg.onCookieToSet((t,e,i)=>{this.setCookie(t,e,i)}),this.$g.onCookieToSet((t,e,i)=>{this.setCookie(t,e,i)}),this.zg.onCookieToSet((t,e,i)=>{this.setCookie(t,e,i)}),this.ye.onCookieToRemove(t=>{this.removeCookie(t)}),this.Fg.onCookieToRemove(t=>{this.removeCookie(t)}),this.$g.onCookieToRemove(t=>{this.removeCookie(t)}),this.zg.onCookieToRemove(t=>{this.removeCookie(t)})}}return j([xs({wait:0,mode:"trailing"}),I("send xdframe-single-iframe batch")],s.prototype,"setBatchReadyCall",null),s})(),uS="1.2.0",dS=(()=>{class s{constructor(t,e){this.h=t,this.Se=e}init(t,e){this.nu=`https://${t}`,this.S=e}openIframe(){this.Se.onMessage(e=>{this.mc(e)}),this.Se.onTimeout(()=>{this.yc()}),this.Se.start();let t=this.Kg(this.nu);return this.Se.open(t)}mc(t){if(this.Ec(t)){let e=t.data,i=!0;if(this.JT(t)){V.warn(`Error xdframe single domain: ${csJSON.stringify(t.data)} from ${t.origin}`);return}if(!ir.isRawDomainState(e)){V.warn(`Unknown message format from xdframe single domain: ${csJSON.stringify(t.data)} from ${t.origin}`);return}ir.isValid(e)||(V.warn(`Invalid xdframe single domain state: ${csJSON.stringify(t.data)} from ${t.origin}`),i=!1),this.Se.stop(),this.S(i?lc.fromRaw(e):{},i)}}yc(){V.warn(`xdframe single domain: timeout: ${this.Kg(this.nu)}`),this.Se.stop(),this.S({},!1)}Ec(t){return t.origin===this.nu&&Ye(t.data)}JT(t){return!!t.data.error}Kg(t){let e=this.h.projectId;return`${t}/uxa/xdframe-single-domain-${uS}.html?pid=${e}`}}return s})(),pS=(()=>{class s{constructor(t,e,i,r){this.h=t,this.R=e,this.w=i,this.Jg=r}getRequestParameters(){var t;let e={..._r(),...this.h.getRequestParameters()},i=this.w.getSession();i&&(e.pn=`${i.pageNumber}`);let r=this.R.getVisitor();if(r&&(e.sn=`${r.visitsCount}`,e.uu=`${r.id}`),!((t=this.Jg)===null||t===void 0)&&t.hasSubProjectId()&&(e.subProjectID=`${this.Jg.getSubProjectId()}`),window.heap)try{e.happid=window.heap.appid,window.heap.getSessionId&&(e.hsid=window.heap.getSessionId()),window.heap.getUserId?e.huu=window.heap.getUserId():window.heap.userId&&(e.huu=window.heap.userId),window.heap.getPageviewMetadata&&(e.hpvid=window.heap.getPageviewMetadata().pageviewId)}catch{delete e.happid,delete e.hsid,delete e.huu,delete e.hpvid}return e}}return s})(),fS=(()=>{class s{constructor(t,e){this.f=t,this.Ps=e}init(){this.f.register(["debugEvents"],t=>{typeof t=="boolean"&&this.Ps.updateDynamicFields("emitDebugEvents",t)})}}return s})();function ba(s,n,t){if(!Q(n)&&!Q(t))return s.href;let e=Q(n)?cl(n):s.pathname,i=Q(t)?ll(t):s.search;return`${s.protocol}//${s.host}${e}${i}`}function cl(s){return Te(s,"/")?s:`/${s}`}function ll(s){return Te(s,"?")||s===""?s:`?${s}`}var Wn=(()=>{let s;return function(n){n[n.page=1]="page",n[n.onNextPageviewOnly=2]="onNextPageviewOnly"}(s||(s={})),s})(),gS=(()=>{class s{constructor(t,e){this.Rt=t,this.K=e,this.QT=10}overridePath(t,e){if(t===""){this.Dn=void 0;return}let i=this.Qg(e);i&&(this.ru=i),this.Dn=e?this.Zg(t,e):t}overrideQuery(t,e){let i=this.Qg(e);i&&(this.ou=i),this.Xr=e?this.Zg(t,e):t}computeOverriddenUrl(t){return this.ZT(t)?this.getAnonymizedUrl():t}t0(t){return(typeof t=="string"||typeof t=="number")&&t in Wn}ZT(t){let e=this.tm(this.Rt.href);return this.tm(t)===e}tm(t){return $a(t,"/")?csString.prototype.slice.call(t,0,-1):t}Qg(t){return Q(t==null?void 0:t.lifespan)&&this.t0(t==null?void 0:t.lifespan)?t==null?void 0:t.lifespan:null}e0(){return this.ru&&this.ru in Wn}s0(){return this.ou&&this.ou in Wn}cleanupOverrideLifespan(){this.e0()&&(this.Dn=void 0,this.ru=void 0),this.s0()&&(this.Xr=void 0,this.ou=void 0)}getAnonymizedUrl(){let t=ba(this.Rt,this.Dn,this.Xr);return this.K.anonymizeUrl(t)}getUrl(){return ba(this.Rt,this.Dn,this.Xr)}getAnonymizedPathAndQuery(){let t=Q(this.Dn)?cl(this.Dn):this.Rt.pathname,e=Q(this.Xr)?ll(this.Xr):this.Rt.search;return this.K.anonymizeUrl(t+e)}getUrlProtocol(){return this.Rt.protocol}getRequestParameters(){return{url:this.getAnonymizedUrl()}}Zg(t,e){return this.i0(e)?this.n0(t):this.r0(e)?this.o0(t):t}r0(t){return!!t.decodeURI}o0(t){return this.em(t,1,!1)}i0(t){return!!t.decodeURIDeep}n0(t){return this.em(t,this.QT,!0)}em(t,e,i){let r=t;for(let a=0;a<e;a++)try{let c=window.decodeURI(r);if(c===r)return r;r=c}catch{return r}return i&&V.warn(`decodeURIDeep limit reached: ${r}`),r}}return s})(),jr=(()=>{class s{constructor(){this.listeners=[]}addListener(t){csArray.prototype.push.call(this.listeners,t)}}return s})(),mS=(()=>{class s extends jr{emitPageEvent(t){for(let e of this.listeners)e.onPageEvent&&e.onPageEvent(t)}emitEventTriggerRecording(t,e){for(let i of this.listeners)i.onEventTriggerRecording&&i.onEventTriggerRecording(t,e)}emitCustomJavaScriptErrorEvent(t){for(let e of this.listeners)e.onCustomJavaScriptErrorEvent&&e.onCustomJavaScriptErrorEvent(t)}emitCustomErrorEvent(t){for(let e of this.listeners)e.onCustomErrorEvent&&e.onCustomErrorEvent(t)}emitUserIdentifierEvent(t){for(let e of this.listeners)e.onUserIdentifierEvent&&e.onUserIdentifierEvent(t)}emitExternalEvent(t){for(let e of this.listeners)e.onExternalEvent&&e.onExternalEvent({type:z.EXTERNAL_EVENT,name:t,ts:0})}emitTargetingRulesArtificialPageview(t){for(let e of this.listeners)e.onTargetingRulesArtificialPageview&&e.onTargetingRulesArtificialPageview(t)}}return s})(),ri="|iframe|",yS=(()=>{class s extends jr{constructor(t,e,i,r){super(),this.a0=t,this.c0=e,this.l0=i,this.h0=r}emitIframeEvent(t,e,i){if(this.u0(e)&&t===null){V.error(`iframeEventEmitter received event ${e} with null iframe, content:${csJSON.stringify(i)}`);return}switch(e){case J.ChildLogMessage:this.d0(i);break;case J.AnalysisEvent:{let r=i,a=this.a0.transformEvent(t,r);a.isUserEvent?this.p0(a.event):this.f0(a.event);break}case J.RecordingEvent:{let r=i,a=this.h0.transformEvents(t,r);if(a.events.length===0)return;a.containsUserEvent?this.g0(a.events):this.m0(a.events);break}case J.JavascriptError:this.y0(i);break;case J.ApiError:this.E0(i);break;case J.DetailedApiError:this.S0(i);break;case J.CustomError:this.v0(i);break;case J.EmerchandisingMessage:{let r=this.l0.transformEvent(t,i);this._0(r);break}case J.Commands:{let r=this.c0.transformEvent(t,i);this.w0(r);break}case J.IntegrationCallback:this.b0(i);break;case J.StaticResource:this.A0(i);break;case J.TrackingContextRequestMessage:this.T0(i);break;default:V.error(`Parent received unknown data type from iframe : ${csJSON.stringify(i)}`)}}u0(t){let e=[J.AnalysisEvent,J.RecordingEvent,J.EmerchandisingMessage,J.Commands];return csArray.prototype.indexOf.call(e,t)!==-1}d0(t){let{message:e,errorCode:i,level:r}=t;switch(r){case at.debug:V.debug(e,i);break;case at.warn:V.warn(e,!0,i);break;case at.implementation:V.implementation(e,i);break;case at.error:V.error(e,i);break;case at.critical:V.critical(e,i);break}}p0(t){for(let e of this.listeners)e.onIframeAnalysisUserEvent&&e.onIframeAnalysisUserEvent(t)}f0(t){for(let e of this.listeners)e.onIframeAnalysisBrowserEvent&&e.onIframeAnalysisBrowserEvent(t)}g0(t){for(let e of this.listeners)e.onIframeRecordingUserEvent&&e.onIframeRecordingUserEvent(t)}m0(t){for(let e of this.listeners)e.onIframeRecordingBrowserEvent&&e.onIframeRecordingBrowserEvent(t)}y0(t){for(let e of this.listeners)e.onIframeJavascriptError&&e.onIframeJavascriptError(t)}E0(t){for(let e of this.listeners)e.onIframeApiError&&e.onIframeApiError(t)}S0(t){for(let e of this.listeners)e.onIframeDetailedApiError&&e.onIframeDetailedApiError(t)}_0(t){for(let e of this.listeners)e.onIframeEmerchandisingMessage&&e.onIframeEmerchandisingMessage(t)}w0(t){for(let e of this.listeners)e.onIframeCommands&&e.onIframeCommands(t)}b0(t){for(let e of this.listeners)e.onIframeIntegrationCallback&&e.onIframeIntegrationCallback(t)}A0(t){for(let e of this.listeners)e.onIframeStaticResource&&e.onIframeStaticResource(t)}T0(t){for(let e of this.listeners)e.onTrackingContextRequestCallback&&e.onTrackingContextRequestCallback(t)}v0(t){for(let e of this.listeners)e.onIframeCustomError&&e.onIframeCustomError(t)}}return s})(),ES=(()=>{class s{setItem(t,e){window.sessionStorage.setItem(t,e)}getItem(t){return window.sessionStorage.getItem(t)}removeItem(t){window.sessionStorage.removeItem(t)}}return s})(),SS=(()=>{class s{setItem(t,e){window.localStorage.setItem(t,e)}getItem(t){return window.localStorage.getItem(t)}removeItem(t){window.localStorage.removeItem(t)}}return s})(),hl=["setCustomVariable"],vS=(()=>{class s{constructor(t,e){this.f=t,this._t=e}init(){this.f.register(hl,(t,e,i,r)=>{this._t.set(t,e,i,r)})}onAfterArtificialPageView(){this._t.deleteNextPageOnlyCustomVariables()}onAfterNaturalPageView(){this._t.deleteNextPageOnlyCustomVariables()}onOptout(){this._t.removeCustomVariablesSession()}onBeforeVisitorRenewal(){this._t.removeCustomVariablesSession(),this._t.removeCustomVariablesPage()}}return s})(),Aa=512,Ta=255,Yn={SESSION:["visit",2],PAGE:["page",3],NEXT_PAGE_ONLY:["nextPageOnly",4]},_S=(()=>{class s{constructor(t,e){this.I=t,this.nt=e,this.zt={},this.De={}}set(t,e,i,r){let a,c;if((ue(t)||$(t))&&Number(t)>0&&Nt(e)&&Nt(i)&&!Xe(e)&&!Xe(i)&&this.R0(r)){let l=this.I.anonymizePII(csString(e)),h=this.I.anonymizePII(csString(i));if(a=[csString.prototype.slice.call(l,0,Aa),csString.prototype.slice.call(h,0,Ta)],c=i!=="",!Q(r)||csArray.prototype.indexOf.call(Yn.SESSION,r)>=0){let f=this.getCustomVariablesSession();c?f[t]=a:delete f[t],this.setCustomVariableSession(f)}(!Q(r)||csArray.prototype.indexOf.call(Yn.PAGE,r)>=0)&&(c?this.zt[t]=a:delete this.zt[t]),Q(r)&&csArray.prototype.indexOf.call(Yn.NEXT_PAGE_ONLY,r)>=0&&(c?this.De[t]=a:delete this.De[t])}else throw new Error(`Command misuse: ${hl[0]}`)}getCustomVariablesSession(){let t=this.nt.get();if(!t)return{};let e=window.csJSON.parse(t);return e!==null&&Ye(e)?e:{}}setCustomVariableSession(t){this.nt.set(window.csJSON.stringify(t))}removeCustomVariablesSession(){this.nt.remove()}removeCustomVariablesPage(){this.zt={}}getRequestParameters(){let t=this.getCustomVariablesSession();for(let i in this.De)this.De.hasOwnProperty(i)&&(this.zt[i]=this.De[i]);for(let i in this.zt)this.zt.hasOwnProperty(i)&&(t[i]=this.zt[i]);if(window.csJSON.stringify(t).length<=2)return{};let e={cvars:this.sm(t)};return this.zt&&window.csJSON.stringify(this.zt).length>2&&(e.cvarp=this.sm(this.zt)),e}deleteNextPageOnlyCustomVariables(){if(Object.keys(this.De).length>0)for(let t in this.De)this.De[t]===this.zt[t]&&(delete this.zt[t],delete this.De[t])}im(t){for(let e in t)if(t.hasOwnProperty(e)){let i=parseInt(e,10),r=t[e],a=r[0],c=r[1];(!$h(i,1,20)||a.length>Aa||c.length>Ta)&&delete t[e]}}sm(t){this.im(t);let e=zh(t)?[]:t;return window.csJSON.stringify(e)}R0(t){return!Q(t)||$(t)||ue(t)}getAllValidCustomVars(){let t=this.getCustomVariablesSession();for(let e in this.De)this.De.hasOwnProperty(e)&&(this.zt[e]=this.De[e]);for(let e in this.zt)this.zt.hasOwnProperty(e)&&(t[e]=this.zt[e]);return this.im(t),t}}return s})(),re="_cs_id",wS=(()=>{class s{constructor(t,e,i){this.h=t,this.M=e,this.Xt=i}onCookieToSet(t){this.ci=t}onCookieToRemove(t){this.li=t}get(){let t;return this.h.cookielessTrackingEnabled?t=this.Xt.getItem(re):t=this.M.get(re),t?(nc(t)||V.warn(`Invalid visitor string: ${t}`),ic(t)):null}set(t){var e;let i=Rd(t);if(this.h.cookielessTrackingEnabled)this.Xt.setItem(re,i);else{let r=new csDate(t.expires);this.M.set(re,i,r),(e=this.ci)===null||e===void 0||e.call(this,re,i,r)}}remove(){var t;this.h.cookielessTrackingEnabled?this.Xt.removeItem(re):(this.M.delete(re),(t=this.li)===null||t===void 0||t.call(this,re))}handleSubdomainChange(){if(this.h.cookielessTrackingEnabled)return;let t=this.get();t&&(t.allowSubdomains=this.h.allowSubdomains,this.h.allowSubdomains?this.M.delete(re,cn.CURRENT_DOMAIN):this.M.delete(re,this.M.getRootDomain()),this.set(t))}}return s})(),bS=/\b((?:profile|user|last|first|primary|primary(?:[/_+-]|%20)?last)(?:[/_+-]|%20)?(?:name)[/=])[^#;?&/]+/gi,AS="$1CS_ANONYMIZED_NAME",TS=(()=>{class s{constructor(t){this.I=t}anonymizeUrl(t,e={}){let i=e.maskingPatterns||[],r=e.partialMaskingPatterns||[],a=this.I.anonymizePII(t);if(a=this.I.anonymizeJwt(a),e.maskNames){let h=a;a=this.Lr(a),a!==h&&(ct.counters.redactedPII.count("name"),ct.counters.redactedPII.count("name-in-url"))}let c=this.C0(a,i);if(c!==a)return ct.counters.redactedPII.count("url"),c;let l=this.I0(a,r);return l!==a&&ct.counters.redactedPII.count("url"),l}removeQueryString(t){let{path:e,queryString:i}=this.au(t);return i!==""?`${e}?`:e}au(t){let e=csString.prototype.indexOf.call(t,"?"),i,r="";return e!==-1?(i=csString.prototype.slice.call(t,0,e),r=csString.prototype.slice.call(t,e,t.length)):i=t,{path:i,queryString:r}}C0(t,e){if(e.length===0)return t;let{path:i,queryString:r}=this.au(t),a=csString.prototype.split.call(i,"/");for(let c of e){let l=this.P0(a,c);if(l!==null)return`${l}${r}`}return t}P0(t,e){if(t.length<e.length)return null;let i=[];for(let r=0;r<t.length;r++){let a=t[r];if(r>=e.length){csArray.prototype.push.call(i,a);continue}let c=e[r].key;if(this.nm(c)){let l=e[r].value;csArray.prototype.push.call(i,l);continue}if(a===c){csArray.prototype.push.call(i,a);continue}return null}return csArray.prototype.join.call(i,"/")}I0(t,e){if(e.length===0)return t;let{path:i,queryString:r}=this.au(t),a=csString.prototype.split.call(i,"/");for(let c of e)a=this.O0(a,c);return`${csArray.prototype.join.call(a,"/")}${r}`}O0(t,e){let i=[],r=0,c=t[0]==="http:"||t[0]==="https:"?2:0;for(let l=0;l<t.length;l++){let h=t[l],f=e[r].key;if(this.nm(f)&&l>=c){let d=e[r].value;csArray.prototype.push.call(i,h.length>0?d:""),r++,r===e.length&&(r=0);continue}if(h===f){csArray.prototype.push.call(i,h),r++,r===e.length&&(r=0);continue}for(let d=0;d<r;d++){let y=l-r+d;i[y]=t[y]}r=0,csArray.prototype.push.call(i,h)}for(let l=0;l<r;l++){let h=t.length-r+l;i[h]=t[h]}return i}nm(t){return Te(t,Jc)}Lr(t){return csString.prototype.replace.call(t,bS,AS)}}return s})(),RS=["class","data-com.agilebits.onepassword.initial-value","data-com.onepassword.iv","data-ember-action","data-initial-value","data-previous-value","data-react-checksum","data-reactid","id","maxlength","onclick","onsubmit","style"],CS=1024,IS=1024,PS=(()=>{class s{constructor(t,e){this.ut=t,this.h=e}getEventTargetPathAndHierarchy(t,e){let i=St(t),r={isNodeSensitive(a){return k.isMaskedElement(a)||k.isMaskedElementChild(a)},isAttributeSensitive(a,c){return k.isMaskedAttribute(a,c)},allWhitelistedAttributes:Cc(this.h.whitelistedAttributes),attributeIgnoreTokens:RS,useAnonymization:e,attrMaxLength:IS,hierarchyMaxLength:CS};return this.ut.getElementPathAndHierarchy(i,r,{dynamicIdRegex:this.h.dynamicIdRegex,...this.h.pathComputationRules})}getEventTargetPath(t){let e=St(t);return this.ut.getElementPath(e,{dynamicIdRegex:this.h.dynamicIdRegex,...this.h.pathComputationRules})}getEventTargetPathAndTargetLink(t){let e=St(t),{path:i,firstAnchorParent:r}=this.ut.getElementPathAndFirstAnchorParent(e,{dynamicIdRegex:this.h.dynamicIdRegex,...this.h.pathComputationRules}),a=this.N0(r)?r.href:"";return{path:i,targetLink:a}}hasValidEventTarget(t){let e=St(t);return this.ut.isValidElement(e)}getElementPath(t){return this.ut.getElementPath(t,{dynamicIdRegex:this.h.dynamicIdRegex,...this.h.pathComputationRules})}N0(t){var e;return t!==null&&t.hasAttribute("href")&&!Te((e=t.getAttribute("href"))!==null&&e!==void 0?e:"","#")}}return s})(),OS=(()=>{class s{constructor(t){this.W=t}transformEvent(t,e){this.M0(t,e.event);let i=this.W.getElementPath(t);return this.k0(i,e.event),e}M0(t,e){if(lm(e)){let i=t.getBoundingClientRect();e.x=Math.round(i.left+e.x+yt.windowOffsetX()),e.y=Math.round(i.top+e.y+yt.windowOffsetY())}}k0(t,e){jc(e)&&(e.tgt=`${t}${ri}${e.tgt}`),am(e)&&(e.tgtHM=`${t}${ri}${e.tgtHM}`),cm(e)&&(e.tgtLk=`${t}${ri}${e.tgtLk}`)}}return s})(),NS=(()=>{class s{constructor(t){this.W=t}transformEvent(t,e){let i=this.W.getElementPath(t);return{iframePath:e.iframePath?`${i}${ri}${e.iframePath}`:i,commands:e.commands}}}return s})(),MS=(()=>{class s{constructor(t){this.W=t}transformEvent(t,e){if(e.products.length===0)return e;let i=this.W.getElementPath(t),r=csArray.prototype.map.call(e.products,a=>({...a,targetPath:`${i}${ri}${a.targetPath}`}));return{...e,products:r}}}return s})(),kS=(()=>{class s{constructor(){this.D0={clientX:2,clientY:3},this.L0={clientX:1,clientY:2},this.x0=[D.POINTER_DOWN,D.POINTER_MOVE,D.POINTER_UP],this.U0=[D.TOUCH_START,D.TOUCH_MOVE,D.TOUCH_END]}transformEvents(t,e){if(!it.isConnected(t))return e.events=csArray.prototype.filter.call(e.events,c=>c.type!==D.VISIBILITY_CHANGE),e.events.length===0||(V.warn(`IframeRecordingEventsTransformer received event ${J.RecordingEvent}
        from disconnected iframe, content:${csJSON.stringify(e.events)}`),e.events=[]),e;let i=st(t),r=null;csArray.prototype.some.call(e.events,c=>this.rm(c)||this.om(c))&&(r=t.getBoundingClientRect());for(let c of e.events)this.rm(c)?this.V0(r,c):this.om(c)&&this.j0(r,c),c.context=c.context&&c.context.length>0?`${i}/${c.context}`:`${i}`;return e}j0(t,e){this.am(this.L0,t,e)}V0(t,e){this.am(this.D0,t,e)}am(t,e,i){i.args&&(i.args[t.clientX]=Math.round(e.left+i.args[t.clientX]),i.args[t.clientY]=Math.round(e.top+i.args[t.clientY]))}rm(t){return csArray.prototype.indexOf.call(this.x0,t.type)!==-1}om(t){return csArray.prototype.indexOf.call(this.U0,t.type)!==-1}}return s})(),DS=(()=>{class s{constructor(t){this.lu=t}start(){this.lu.onEvent(t=>this.G(t)),this.lu.start()}stop(){this.lu.stop()}G(t){let e=`Content Security Policy error. Violated directive: ${t.violatedDirective} - Source file: ${t.sourceFile}`;V.warn(e)}}return s})(),LS=(()=>{class s{constructor(){this.Vt={boundElement:document,type:"securitypolicyviolation",listener:t=>this.securityPolicyViolationListener(t)},csArray.prototype.push.call(s.hu,"localhost"),csArray.prototype.push.call(s.hu,"fake-tracker.content-square.fr")}start(){Pt(this.Vt)}stop(){Ot(this.Vt)}onEvent(t){this.O=t}H0(t){if(!t)return!1;let e=t.disposition;return $(t.sourceFile)&&csArray.prototype.some.call(s.hu,i=>csString.prototype.indexOf.call(t.sourceFile,i)>0)&&e!=="report"}securityPolicyViolationListener(t){this.H0(t)&&this.O({violatedDirective:t.violatedDirective,sourceFile:t.sourceFile})}}return s.hu=["contentsquare","cdnssl.clicktale.net"],j([I("Event handler type: securitypolicyviolation")],s.prototype,"securityPolicyViolationListener",null),s})(),xS=(()=>{class s{init(){this.cm=new DS(new LS),this.cm.start()}onOptout(){this.cm.stop()}}return s})();var{toString:lv}=Object.prototype;function ul(s,n){if(typeof s!="function"||n!=null&&typeof n!="function")throw new TypeError("Expected a function");let t=function(...e){let i=n?n.apply(this,e):e[0],{cache:r}=t;if(r.has(i))return r.get(i);let a=s.apply(this,e);return t.cache=r.set(i,a)||r,a};return t.cache=new(ul.Cache||Map),t}ul.Cache=Map;var{hasOwnProperty:hv}=Object.prototype;var dl=(()=>{class s{constructor(t){this.configuration=t}}return s})(),US=(()=>{class s extends dl{constructor(t,e,i){super(t),this.configuration=t,this.to=e,this.E=i,this.aR=N.RECORDING_GLOBAL_SAMPLING}refreshQuota(){this.eo=void 0,this.ja()}onQuotaReady(t){this.vm=t}init(){this.cR()}sanitizeSessionCollectState(t){return t}canCollect(t){return t!==null&&t.collectState!==N.QUOTA_REACHED}computeInitialCollectState(t){return this.eo?(this.E.emitCollectStateChange(this.eo,Lt.ETR_OFF),this.eo):(V.warn("Quota file error computeInitialCollectState() called before quota answered"),N.QUOTA_REACHED)}getEligibleCollectState(t){return t.collectState===N.QUOTA_REACHED?N.QUOTA_REACHED:!ui.isRecordingSupported()&&this.isReplayRecorded(t)?N.ANALYTICS_ONLY:t.collectState===N.RECORDING_RULES_TARGETING?N.RECORDING_RULES_TARGETING:t.collectState===N.ANALYTICS_ONLY_RULES_TARGETING?N.ANALYTICS_ONLY_RULES_TARGETING:t.collectState===N.RECORDING_GLOBAL_SAMPLING?N.RECORDING_GLOBAL_SAMPLING:N.ANALYTICS_ONLY}abortQuotaServiceRequest(){}isReplayRecorded(t){return t.collectState===N.RECORDING_GLOBAL_SAMPLING||t.collectState===N.RECORDING_RULES_TARGETING}getInitialCollectState(){return this.eo||N.QUOTA_REACHED}setVisitorService(t){}computeInitialCollectStateFromRecordingConsentGranted(t){return N.ANALYTICS_ONLY}so(t){this.eo=t,this.vm&&this.vm(t)}cR(){this.to.onError(t=>this.quotaServiceErrorHandler(`HTTP:${t.status} - fetching quota file for pid: ${this.configuration.projectId}`)),this.to.onTimeout(()=>this.quotaServiceErrorHandler("timeout")),this.to.onLoad(t=>this.quotaFileHandler(t))}ja(){this.to.isInProgress()||this.to.send()}quotaFileHandler(t){var e;if(!(!((e=t==null?void 0:t.quotas)===null||e===void 0)&&e.length)){this.quotaServiceErrorHandler("Quota types missing from config file");return}this.lR(t)}quotaServiceErrorHandler(t){let e=`Quota error - ${t}`;V.warn(e),this.so(this.aR)}lR(t){let e=!1,i=!1;for(let r of t.quotas)r.quotaType==="ANALYTICS"&&r.value?e=!0:r.quotaType==="RECORDING"&&r.value&&Ps.boolean(Math.round(r.value*100))&&(i=!0);!e&&i?this.quotaServiceErrorHandler(`Quota types impossible: replay without analytics - ${csJSON.stringify(t)}`):e&&i?ui.isRecordingSupported()?this.so(N.RECORDING_GLOBAL_SAMPLING):this.so(N.ANALYTICS_ONLY):e&&!i?this.so(N.ANALYTICS_ONLY):this.so(N.QUOTA_REACHED)}getRecordingConsentWithdrawn(){return N.ANALYTICS_ONLY}}return j([I("Quota File: quotaFileHandler")],s.prototype,"quotaFileHandler",null),j([I("Quota File: onerror")],s.prototype,"quotaServiceErrorHandler",null),s})(),VS=3e3,jS=(()=>{class s extends dl{constructor(t,e,i,r,a){super(t),this.configuration=t,this.io=e,this.E=i,this.Xh=r,this.A=a,this.ze=[]}refreshQuota(){}onQuotaReady(t){}canCollect(t){return!0}init(){this.hR()}sanitizeSessionCollectState(t){return(t.collectState===N.QUOTA_REACHED||t.collectState===N.RECORDING_RULES_TARGETING||t.collectState===N.RECORDING_TEMPORARILY)&&(t.collectState=N.ANALYTICS_ONLY),t}computeInitialCollectState(t){return qe.isReplayConsentNeeded(this.configuration)?N.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED:this.ka(t)}computeInitialCollectStateFromRecordingConsentGranted(t){return this.ka(t)}ka(t){return ui.isRecordingSupported()?(this.ze=[],Ps.percentage()<this.configuration.replayRecordingRate||this.Xh.isForceReplayRecorded()?csArray.prototype.push.call(this.ze,N.RECORDING_GLOBAL_SAMPLING):this.configuration.malkaUrlEnabled&&csArray.prototype.push.call(this.ze,N.RECORDING_URL_SAMPLING),this.configuration.malkaEtrEnabled&&csArray.prototype.push.call(this.ze,N.RECORDING_ETR_SAMPLING),this.ze.length>0?(this.ja(t),N.RECORDING_TEMPORARILY):N.ANALYTICS_ONLY):N.ANALYTICS_ONLY}getEligibleCollectState(t){return ui.isRecordingSupported()?qe.isRecordingBlockedByConsent(t)?t.collectState===N.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN?N.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN:N.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED:t.collectState===N.RECORDING_GLOBAL_SAMPLING?N.RECORDING_GLOBAL_SAMPLING:(this.ze=[],this.configuration.malkaUrlEnabled&&(csArray.prototype.push.call(this.ze,N.RECORDING_URL_SAMPLING),this.configuration.malkaEtrEnabled&&csArray.prototype.push.call(this.ze,N.RECORDING_ETR_SAMPLING)),this.ze.length>0?(this.ja(t),N.RECORDING_TEMPORARILY):(t.etrState===Lt.ETR_ON&&this.E.emitCollectStateChange(N.ANALYTICS_ONLY,Lt.ETR_ON),N.ANALYTICS_ONLY)):N.ANALYTICS_ONLY}ja(t){var e;let i=(e=this.R)===null||e===void 0?void 0:e.getVisitor();this.io.send({recordingTypes:csArray.prototype.map.call(this.ze,Number),url:this.A.getAnonymizedUrl(),projectId:this.configuration.projectId,uu:(i==null?void 0:i.id)||"",sn:(i==null?void 0:i.visitsCount)||"",pn:(t==null?void 0:t.pageNumber)||""})}abortQuotaServiceRequest(){this.io.abort()}isReplayRecorded(t){return qe.isRecordingBlockedByConsent(t)?!1:t.collectState===N.RECORDING_TEMPORARILY||t.collectState===N.RECORDING_GLOBAL_SAMPLING||t.collectState===N.RECORDING_URL_SAMPLING||t.etrState===Lt.ETR_ON}hR(){this.io.onError(()=>this.quotaServiceErrorHandler("NetworkError")),this.io.onTimeout(()=>this.quotaServiceTimeoutHandler(),VS),this.io.onLoad(t=>this.quotaServiceLoadHandler(t))}quotaServiceErrorHandler(t){this._m(`error - ${t}`)}quotaServiceTimeoutHandler(){this._m("timeout")}_m(t){let e=N.ANALYTICS_ONLY;this.wm(this.ze)?(e=N.RECORDING_GLOBAL_SAMPLING,V.warn(`Quota Service: request ${t} - bypassed by GLOBAL_SAMPLING`)):V.warn(`Quota Service: request ${t}`),this.E.emitCollectStateChange(e,Lt.ETR_OFF)}quotaServiceLoadHandler(t){if(t.status!==200){this.quotaServiceErrorHandler(`Status code: ${t.status}`);return}let e;try{e=csJSON.parse(t.responseText)}catch{this.quotaServiceErrorHandler(`Unable to parse the quota service response: ${t.responseText}`);return}let i=e.allowedRecordingTypes==null?void 0:csArray.prototype.map.call(e.allowedRecordingTypes,csString);if(!i){this.quotaServiceErrorHandler("recording types missing from quota service response");return}let r=Lt.ETR_OFF,a=N.ANALYTICS_ONLY;this.wm(i)?a=N.RECORDING_GLOBAL_SAMPLING:this.uR(i)&&(a=N.RECORDING_URL_SAMPLING),this.dR(i)&&(r=Lt.ETR_ON),this.E.emitCollectStateChange(a,r)}wm(t){return csArray.prototype.some.call(t,e=>e===N.RECORDING_GLOBAL_SAMPLING)}uR(t){return csArray.prototype.some.call(t,e=>e===N.RECORDING_URL_SAMPLING)}dR(t){return csArray.prototype.some.call(t,e=>e===N.RECORDING_ETR_SAMPLING)}setVisitorService(t){this.R=t}getInitialCollectState(){return N.ANALYTICS_ONLY}getRecordingConsentWithdrawn(){return N.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}}return j([I("Quota Service: onerror")],s.prototype,"quotaServiceErrorHandler",null),j([I("Quota Service: ontimeout")],s.prototype,"quotaServiceTimeoutHandler",null),j([I("Quota Service: onload")],s.prototype,"quotaServiceLoadHandler",null),s})();function HS(){let s="[data-cs-mask]",n="#c1_card_info_id",t=".ctHidden",e=["[data-heap-redact-text]","[heap-ignore]","[data-heap-ignore]","[data-heap-redact-attributes]"],i=["[data-hj-suppress]",".data-hj-suppress","[data-hj-masked]"];return[s,n,t,...e,...i]}function BS(){return[{selector:".ctHidden,input:not([type=button]):not([type=submit])",attrName:"value"}]}var FS=(()=>{class s{constructor(){this.pR={PIISelectors:["picture","img","video","audio"],Attributes:[]},this.As={elementSelector:"",attrSelector:"",attrSelectors:[]};let t={PIISelectors:HS(),Attributes:BS()};this.As=k.getComputedSelectorSettings(t,this.As)}init(){this.fR()}setMaskedElementSettingsFromCommand(t){if(t=k.sanitizeSelectorUserInput(t),!k.isSelectorUserInput(t))throw new Error(`Command misuse: ${rl[0]}`);this._u(t)}setMaskedElementSettingsFromParent(t){let e={PIISelectors:csString.prototype.split.call(t.elementSelector,","),Attributes:t.attrSelectors};this._u(e)}getMaskedElementSettings(t){return t?this.bm(this.pR):this.As}fR(){var t,e,i,r,a,c;let l={PIISelectors:[],Attributes:[]};((i=(e=(t=window==null?void 0:window.ClickTaleSettings)===null||t===void 0?void 0:t.DOM)===null||e===void 0?void 0:e.PII)===null||i===void 0?void 0:i.Text)instanceof Array&&l.PIISelectors.push(...window.ClickTaleSettings.DOM.PII.Text),((c=(a=(r=window==null?void 0:window.ClickTaleSettings)===null||r===void 0?void 0:r.DOM)===null||a===void 0?void 0:a.PII)===null||c===void 0?void 0:c.Attributes)instanceof Array&&window.ClickTaleSettings.DOM.PII.Attributes.forEach(h=>{$(h.attr)&&$(h.rule)&&l.Attributes.push({selector:h.rule,attrName:h.attr})}),this._u(l)}_u(t){this.As=this.bm(t)}bm(t){return k.getComputedSelectorSettings(t,this.As)}}return s})();var $S=(()=>{class s{constructor(t,e,i,r,a){this.h=t,this.oi=e,this.us=i,this.C=r,this.E=a,this.gR=()=>{var c;let l=dt.get(Xt);l!==null&&Rr(l)?this.et.canCollect(ac(l))?this.init():!((c=this.h.voc)===null||c===void 0)&&c.enabled:(this.et.onQuotaReady(h=>{var f;h!==N.QUOTA_REACHED?this.init():!((f=this.h.voc)===null||f===void 0)&&f.enabled}),this.et.refreshQuota())}}initWithQuota(){var t;if(!this.h.collectionEnabled){!((t=this.h.voc)===null||t===void 0)&&t.enabled;return}let e=new iE(this.h.getSettingsFileUri(),"",{type:"json",cacheMinutes:15});this.et=new US(this.h,e,this.E),this.et.init(),this.gR()}init(){Qs.isSupported()&&Qs.setDigestSalt(this.h.projectId.toString());let t,e,i,r,a,c,l,h,f,d,y,E,v,C,P,A,w,x,b,L,H,W,nt,pt,ft,S,M,U,B,et,ut,Ct,Re,Qe,mn;this.C.schedule(()=>{t=new yi,e=new TS(t),r=new gS(window.location,e),i=new cn(this.h,r,this.oi),i.init()}),this.C.schedule(()=>{a=new ES,c=new SS,w=new JE(window.location,i),new xS().init(),x=ol.create(V.warn),A=new ec(x);let ee=A.create(`${this.h.getLegacyQuotaUri()}/quota`,!0);this.et===void 0&&(this.et=new jS(this.h,ee,this.E,w,r),this.et.init())}),this.C.schedule(()=>{l=new PE(this.h,i,a),f=new ME(l,this.et)}),this.C.schedule(()=>{d=new wS(this.h,i,a),y=new CE(this.h,d,this.E,f),this.us.setContext(y,f),this.et.setVisitorService(y)}),this.C.schedule(()=>{Qe=new FE(this.h,new LE(this.h,i,c),this.E),E=new DE(y,f,Qe),v=new hc(this.h,i,a),C=new zE(window.location,v),P=new GE(C),H=new kE(this.h,y,C),Ct=new PS(we,this.h),M=new OS(Ct),U=new NS(Ct),B=new MS(Ct),et=new kS,ut=new yS(M,U,B,et),S=new lS([cS.UXA]),W=new aS(S,ut),nt=new YE(r),pt=new KE(nt,S);let Ze=new uc(this.h,i,a);Re=new _S(t,Ze),ft=new vS(S,Re);let ee=new Ad(y,f,C,Re,this.h);{let ts=new xd,se=new Ld(ts,window.location);this.h.crossDomainSingleIframeTracking||(b=new oS(this.h,ee,se));{h=new hS(this.h,i,l,d,v,Ze),h.init();let Et=new dS(this.h,ts);h.setStates(ee,Et)}}}),this.C.schedule(()=>{new RE(this.h,y,C,H,E,b,h,w).compute(ee=>{this.C.schedule(()=>{W.init();let ts=new mS,se=new BE(this.h,S,Qe,f,this.E),Et=new QE(this.h,i,c),Ut=new ZE(this.E,window.location,Et),js=new eS(S,Ut),yn=new fS(S,this.h),En=new pS(this.h,y,f,L);if(ee){this.E.emitInitTracking();let Hs=new FS;new TE(En,x,y,f,this.E,S,W,this.h,js,Ut,se,Qe,t,Ct,e,r,yn,ts,ut,Re,ft,nt,pt,this.C,A,i,c,this.et,Hs).start()}else new $E(this.E,S,W,js,Ut,P,se).start()})})})}}return s})(),ls=(()=>{let s;return function(n){let t="{domain}/tag/tag.bundle.js?v={version}",e,i={loadBundle(w){let x=w.source,b=w.data;if(c(b)){let L=()=>{let H=r(t,b);y(H,()=>x.postMessage("csBundleLoaded",w.origin))};e=b.token,A(i.loadBundle),l(w.origin)&&L()}}};function r(w,x){return csString.prototype.replace.call(csString.prototype.replace.call(csString.prototype.replace.call(w,"{version}",x.version),"{token}",x.token),"{domain}",x.domain)}function a(){return e}n.getToken=a;function c(w){return w&&w.type==="csBundleInjection"&&l(w.domain)&&f(w.version)&&h(w.token)}n.isAuthorizedIncomingMessage=c,n.hjDomainRegex=/^https?:\/\/[a-zA-Z0-9\.\-]+\.hotjar\.com$/;function l(w){return/^https?:\/\/[a-zA-Z0-9\.\-]+\.(content-square\.fr|contentsquare\.com|csq\.io)$/.test(w)||n.hjDomainRegex.test(w)}n.isAuthorizedDomain=l;function h(w){return/^[a-zA-Z0-9]+$/.test(w)}n.isAuthorizedToken=h;function f(w){return/^[a-zA-Z0-9\.]+$/.test(w)}n.isAuthorizedTagVersion=f;function d(){let w=window.opener||window.parent;return window!==w&&window.addEventListener}n.isActivable=d;function y(w,x){let b=document.createElement("script");b.type="text/javascript",b.async=!0,b.src=w,b.onload=x,b.charset="utf-8",document.head.appendChild(b)}n.addScript=y;function E(w){let x=document.createElement("link");x.rel="stylesheet",x.href=w,document.head.appendChild(x)}n.addStyle=E;function v(w){return`${w}?cb=${new csDate().getTime()}`}n.addCacheBusting=v;function C(){P(i.loadBundle)}n.waitForBundleInjection=C;function P(w){window.addEventListener("message",w,!1)}n.listen=P;function A(w){window.removeEventListener("message",w,!1)}n.removeListener=A}(s||(s={})),s})(),Ra="_hp_ved",zS=18e5,wi="https://heapanalytics.com",GS=`${wi}/js/ved.js`,qS=`${wi}/css/ved.css`,WS=`${wi}/js/ved.css`,YS=(()=>{let s;return function(n){n.StatusUpdate="status"}(s||(s={})),s})(),XS=(()=>{let s;return function(n){n.ReceivedInitMessage="received_init_message"}(s||(s={})),s})();var Xn=(()=>{let s;return function(n){let t=!1;function e(){let f=[qS,WS];csArray.prototype.forEach.call(f,d=>{ls.addStyle(d)})}function i(f){let d=new csRegExp("(^|;)[ ]*"+f+"=([^;]*)"),y=d.exec(document.cookie);return y?decodeURIComponent(y[2]):null}function r(f,d,y){let E=encodeURIComponent(f)+"="+encodeURIComponent(d),v=new csDate;v.setTime(v.getTime()+y);let C=E+"; expires="+v.toUTCString()+"; path=/";document.cookie=C}function a(){r(Ra,"on",zS)}function c(){return i(Ra)==="on"}n.isVLCookieEnabled=c;function l(f){window.heapV=Object.assign({},window.heap,{source:f==null?void 0:f.source,uri:wi,loadArgs:f==null?void 0:f.data.args,identify:()=>{},track:()=>{}})}n.initializeHeapV=l;function h(f){var d;if(f){let y={type:YS.StatusUpdate,value:XS.ReceivedInitMessage},E={targetOrigin:f==null?void 0:f.origin};(d=f==null?void 0:f.source)===null||d===void 0||d.postMessage(y,E)}t||(t=!0,a(),l(f),window.heapV&&(ls.addScript(GS),e()))}n.init=h}(s||(s={})),s})(),KS=(()=>{let s;return function(n){let t=window.opener||window.parent,e="tag",i="https://app.contentsquare.com",r=[/^https:\/\/app\.contentsquare\.com$/,/^https:\/\/dev-app\.contentsquare\.com$/,/^https:\/\/staging-app\.contentsquare\.com$/,/^https:\/\/.*\.test\.contentsquare\.com$/,/^https:\/\/app\.[a-z0-9-]+\.csiab\.[a-z0-9-]+\.csq\.io$/,ls.hjDomainRegex],a,c,l={initHeapVisualLabeler(b){var L;b.origin===wi&&((L=b.data)===null||L===void 0?void 0:L.message)==="init"&&b.source&&(Xn.init(b),A(l.initHeapVisualLabeler))},ping(b){typeof b.data=="string"&&b.data==="ping"&&d(b.origin)&&(c=b.origin,a=ls.hjDomainRegex.test(b.origin)?i:b.origin,A(l.ping),P(l.insertMessageScript),y(ls.addCacheBusting("utils.js")))},insertMessageScript:w(b=>{typeof b.data=="string"&&b.data!=="ping"&&(A(l.insertMessageScript),y(b.data))})};function h(){return ls.getToken()}n.getToken=h;function f(){return window!==t&&window.addEventListener}n.isActivable=f;function d(b){return csArray.prototype.some.call(r,L=>L.test(b))}n.isAuthorizedDomain=d;function y(b,L){let H=document.createElement("script");H.type="text/javascript",H.async=!0;let W=a==null?void 0:csString.prototype.replace.call(a,/^https?:/,"");H.src=`${W}/${e}/${b}`,H.onload=L,H.charset="utf-8",document.getElementsByTagName("head")[0].appendChild(H),E(b)}function E(b){csString.prototype.includes.call(b,"&mode=")&&sessionStorage.setItem("_hjRetakerMode",csString.prototype.split.call(b,"&mode=")[1])}function v(){P(l.ping),ls.waitForBundleInjection()}n.waitForConnection=v;function C(){P(l.initHeapVisualLabeler),Xn.isVLCookieEnabled()&&Xn.init()}n.waitForHeapVisualLabeler=C;function P(b){window.addEventListener("message",b,!1)}n.listen=P;function A(b){window.removeEventListener("message",b,!1)}n.removeListener=A;function w(b){return function(L){L.origin===c&&b(L)}}n.secureListener=w;function x(b){c&&t.postMessage(b,c)}n.post=x}(s||(s={})),s})();var Bi=window.CSFrameCommunication||KS;var JS=(()=>{class s extends jr{constructor(t){super(),this.C=t}emitBeforeNaturalPageView(){for(let t of this.listeners)t.onBeforeNaturalPageView&&t.onBeforeNaturalPageView()}emitAfterNaturalPageView(){for(let t of this.listeners)t.onAfterNaturalPageView&&t.onAfterNaturalPageView()}emitInitTracking(){for(let t of this.listeners)t.onInitTracking&&t.onInitTracking()}emitStartTracking(t){for(let e of this.listeners)e.onStartTracking&&this.C.schedule(()=>e.onStartTracking(t))}emitArtificialPageViewEnd(){for(let t of this.listeners)if(t.onArtificialPageViewEnd)try{t.onArtificialPageViewEnd()}catch(e){V.error(e)}}emitBeforeArtificialPageView(){for(let t of this.listeners)t.onBeforeArtificialPageView&&t.onBeforeArtificialPageView()}emitAfterArtificialPageView(){for(let t of this.listeners)t.onAfterArtificialPageView&&t.onAfterArtificialPageView()}emitBeforeSessionRenewal(){for(let t of this.listeners)t.onBeforeSessionRenewal&&t.onBeforeSessionRenewal()}emitAfterSessionRenewal(){for(let t of this.listeners)t.onAfterSessionRenewal&&t.onAfterSessionRenewal()}emitOptout(){for(let t of this.listeners)t.onOptout&&t.onOptout()}emitReplayUnanonymizationConsentGranted(){for(let t of this.listeners)t.onReplayUnanonymizationConsentGranted&&t.onReplayUnanonymizationConsentGranted()}emitReplayUnanonymizationConsentWithdrawn(){for(let t of this.listeners)t.onReplayUnanonymizationConsentWithdrawn&&t.onReplayUnanonymizationConsentWithdrawn()}emitAfterReplayRecordingConsentGranted(){for(let t of this.listeners)t.onAfterReplayRecordingConsentGranted&&t.onAfterReplayRecordingConsentGranted()}emitAfterReplayRecordingConsentWithdrawn(){for(let t of this.listeners)t.onAfterReplayRecordingConsentWithdrawn&&t.onAfterReplayRecordingConsentWithdrawn()}emitCollectStateChange(t,e){for(let i of this.listeners)i.onCollectStateChange&&i.onCollectStateChange(t,e)}emitInitialDomStart(){for(let t of this.listeners)t.onInitialDomStart&&t.onInitialDomStart()}emitInitialDomDone(t){for(let e of this.listeners)e.onInitialDomDone&&e.onInitialDomDone(t)}emitRecordingContextChange(){for(let t of this.listeners)t.onRecordingContextChange&&t.onRecordingContextChange()}emitSensitiveStatusChange(){var t;for(let e of this.listeners)(t=e.onSensitiveStatusChange)===null||t===void 0||t.call(e)}emitBeforeVisitorRenewal(){for(let t of this.listeners)t.onBeforeVisitorRenewal&&t.onBeforeVisitorRenewal()}emitAfterVisitorCleared(){for(let t of this.listeners)t.onAfterVisitorCleared&&t.onAfterVisitorCleared()}emitAfterVisitorRenewal(){for(let t of this.listeners)t.onAfterVisitorRenewal&&t.onAfterVisitorRenewal()}}return j([Rt("emitStartTracking")],s.prototype,"emitStartTracking",null),s})();var QS=(()=>{let s;return function(n){function t(){return typeof window.CSJavascriptBridge=="object"&&typeof window.CSJavascriptBridge.optIn=="function"&&typeof window.CSJavascriptBridge.optOut=="function"&&typeof window.CSJavascriptBridge.sendEvent=="function"&&typeof window.CSJavascriptBridge.sendDynamicVar=="function"&&typeof window.CSJavascriptBridge.sendTransaction=="function"}n.isCSJavascriptBridgeDefined=t;function e(){if(typeof window.CSJavascriptBridge.getVersion=="function")try{let v=window.CSJavascriptBridge.getVersion();if(ue(v))return v}catch{V.warn("an error occurred when calling getVersion")}return null}n.getBridgeVersion=e;function i(){typeof window.CSJavascriptBridge.onWebviewTrackingReady=="function"&&window.CSJavascriptBridge.onWebviewTrackingReady()}n.notifyIsReadyForTracking=i;function r(v){window.CSJavascriptBridge.sendEvent(csJSON.stringify(v))}n.sendAnalysisEvent=r;function a(v){if(window.CSJavascriptBridge.sendSREvent)for(let C of v.events)window.CSJavascriptBridge.sendSREvent(csJSON.stringify(C))}n.sendSREvent=a;function c(v){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendLog&&window.CSJavascriptBridge.sendLog(csJSON.stringify(v))}n.sendLog=c;function l(){window.CSJavascriptBridge.optIn()}n.sendOptIn=l;function h(){window.CSJavascriptBridge.optOut()}n.sendOptOut=h;function f(v,C){window.CSJavascriptBridge.sendDynamicVar(v,C)}n.sendDynamicVariable=f;function d(v,C,P){window.CSJavascriptBridge.sendTransaction(v,C,P)}n.sendTransaction=d;function y(v,C){if(window.CSJavascriptBridge.sendAssets){let P=csJSON.stringify(v);window.CSJavascriptBridge.sendAssets(P,C||null)}else window.CSJavascriptBridge.sendSRAssets&&window.CSJavascriptBridge.sendSRAssets(csArray.prototype.map.call(v,P=>P.assetId))}n.sendAssets=y;function E(v){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendNativeSREvent&&window.CSJavascriptBridge.sendNativeSREvent(csJSON.stringify(v))}n.sendNativeSREvent=E}(s||(s={})),s})();var ZS=(()=>{class s{constructor(t,e,i){this.h=t,this.mt=e,this.us=i}start(){var t,e,i,r,a;if(window.UXAnalytics)return;window.UXAnalytics={};let c=new Tc(!!(!((t=this.h.taskSchedulerOptions)===null||t===void 0)&&t.enabled),(e=this.h.taskSchedulerOptions)===null||e===void 0?void 0:e.maxProcessingTime,(i=this.h.taskSchedulerOptions)===null||i===void 0?void 0:i.waitDuration),l=new Ed(this.mt,this.h);l.init();let h=new vd(this.h,l);if(this.mt.isTopWindowTracker()&&h.canTrack()){if(!((r=window.CSProtectnativeFunctionsLogs)===null||r===void 0)&&r.Warning&&V.warn(`protectNativeFunctions failed: ${window.CSProtectnativeFunctionsLogs.Warning}`),!((a=window.CSProtectnativeFunctionsLogs)===null||a===void 0)&&a.Critical){V.error(`protectNativeFunctions failed: ${window.CSProtectnativeFunctionsLogs.Critical}`);return}md();let d=new JS(c),y=new $S(this.h,l,this.us,c,d);this.h.isQuotaEnabled()?y.initWithQuota():y.init()}let f=csString.prototype.indexOf.call(window.location.href,"csDebug=1")>-1;window.UXAnalytics={Sensitive:{isNodeSensitive(d){return k.isMaskedElement(d)||k.isMaskedElementChild(d)},isAttributeSensitive(d,y){return k.isMaskedAttribute(d,y)},getSensitiveAttributes(d){return ci(d.attributes,y=>k.isMaskedAttribute(d,y.name))}},Console:{warn(d){f&&console.warn("cs.tracking.warning",d)},error(d){f&&console.error("cs.tracking.error",d)}},Version:qa},window.CSFrameCommunication||(window.CSFrameCommunication=Bi,Bi.isActivable()&&Bi.waitForConnection(),this.h.isCsCrosswritingHeap()&&Bi.waitForHeapVisualLabeler())}}return j([Rt("main.start"),I("main.start")],s.prototype,"start",null),s})(),tv=(()=>{class s{constructor(){}send(t,e,i=at.warn){let r={message:t,errorCode:e,level:i};QS.sendLog(r)}}return s})();var ev=(()=>{class s{constructor(t,e,i){this.U=t,this.I=e,this.hC=i,this.At=[],this.Ie=null,this.uC=_r().v}Hm(){this.At.length!==0&&(this.U.send({m:csArray.prototype.map.call(this.At,t=>({n:t.name,p:t.parameter,v:t.value})),p:this.I.anonymizePII(window.location.pathname),pid:this.hC,v:this.uC}),this.At=[])}push(t){if(csArray.prototype.push.call(this.At,...t),this.Ie&&(csClearTimeout(this.Ie),this.Ie=null),this.At.length>=s.MAX_QUEUE_SIZE){this.Hm();return}this.Ie=window.csSetTimeout(()=>{this.Hm(),this.Ie=null},s.DEBOUNCE_INTERVAL)}}return s.DEBOUNCE_INTERVAL=5e3,s.MAX_QUEUE_SIZE=100,s})();function sv(s,n){let t=s.validationRate/10,e=Ps.boolean(t);if((s.environment==="staging"||!1||e)&&!n.isInWebViewContext())try{let a=ol.create(V.warn,n.isTopWindowTracker()),l=new ec(a).create(s.getMetricsUri(),!0),h=new yi,f=new ev(l,h,s.projectId);ct.setService(f)}catch(a){V.warn(`Error initializing metrics: ${a.message}`)}}function iv(){var s;let n=new Hu(window.CS_CONF);window._uxa=window._uxa||[],n.processOptionOverrides(window._uxa);let t=new Bu(window,n);t.init();let e=new dd;if(wu(V),V.computeIsActive(n.validationRate),t.isTopWindowTracker()){let a=new od(n,e);V.setStrategy(a)}else if(t.isInIframeContext()){let r=new ud(n);V.setStrategy(r)}else if(t.isInWebViewContext()){let r=new tv;V.setStrategy(r)}!((s=n==null?void 0:n.experimental)===null||s===void 0)&&s.disableMutationObserverProtection&&window.csMutationObserver&&(window.csMutationObserver=Je(window,"MutationObserver")),Au(),sv(n,t),new ZS(n,t,e).start()}window.CSCurrentScript=document.currentScript;csSetTimeout(()=>{try{pd(iv)}catch{}});})();

