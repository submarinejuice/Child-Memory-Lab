!function(e){var t={};function r(a){if(t[a])return t[a].exports;var s=t[a]={i:a,l:!1,exports:{}};return e[a].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=t,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(a,s,function(t){return e[t]}.bind(null,s));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/packs/",r(r.s=126)}({113:function(e,t){const r=e=>{if(e.classList.contains("s-imageload--error-hide"))e.classList.add("s-imageload--error-hidden");else{const t=e.parentNode.insertBefore(document.createElement("div"),e);t.classList.add(...Array.from(e.classList.values()),"s-imageload--error"),t.dataset.imageFail=e.src,e.remove()}};window.addEventListener("error",(e=>{"IMG"===e.target.tagName&&r(e.target)}),!0),Array.from(document.querySelectorAll("img"),(e=>(e.complete&&(e.naturalWidth&&e.naturalHeight||r(e)),!0)))},114:function(e,t){const r=document.querySelector(".js-background-video");if(r){const e=document.querySelector(".js-background-video-container"),t=document.querySelector(".js-stop-button"),a=20,s=document.querySelector(".js-background-video-credit"),n=document.querySelector(".js-background-image-credit");let o=0;const i=()=>{s&&s.classList.remove("s-hidden"),n&&n.classList.add("s-hidden")},c=()=>{s&&s.classList.add("s-hidden"),n&&n.classList.remove("s-hidden")};r.addEventListener("canplaythrough",(()=>{o>=a?(e.classList.remove("b-video-background--fade"),r.pause(),c(),t.classList.add("s-hidden")):(e.classList.add("b-video-background--fade"),o+=1,i(),t.classList.remove("s-hidden")),0===e.offsetHeight&&t.classList.add("s-hidden")}));const l=()=>{0===e.offsetHeight?(r.pause(),c(),t.classList.add("s-hidden")):(r.play(),i(),t.classList.remove("s-hidden"))};window.addEventListener("load",(()=>{l()})),window.addEventListener("resize",(()=>{l()})),t&&(t.onclick=()=>{r.pause(),e.classList.remove("b-video-background--fade"),r.paused&&(t.classList.add("s-hidden"),c())})}},115:function(e,t){const r=document.querySelectorAll(".js-grid-reveal-more");if(r.length){let e=0;Array.from(r,(t=>{const r=t.dataset.revealMoreCounter||4;if(r<t.childElementCount){e+=1;const a=t.dataset.iconUrl,s=[...t.children],n=t.dataset.revealMoreTheme||"dark",o=t.dataset.revealMoreTracking||"";let i=t;t.dataset.revealMorePutAfter&&(i=document.querySelector(t.dataset.revealMorePutAfter));const c=`js-reveal-more-next-item${e}`;s.slice(r).forEach((e=>e.setAttribute("hidden","hidden"))),s[r].id=c;const l=document.createElement("footer");l.setAttribute("class",`b-block-grid__footer b-block-grid__footer--${n}`),l.innerHTML=`\n        <button aria-label="show more" aria-expanded="false" aria-controls="${c}" class="js-reveal-more-btn">\n          <div class="b-icon-badge b-icon-badge--small b-icon-badge--${n}">\n            <div class="b-icon-badge__icon s-themed s-themed--background-color s-themed--background-color--hover">\n              <svg aria-hidden="true">\n                <use xlink:href="${a}#plus"></use>\n              </svg>\n            </div>\n            <small class="b-icon-badge__label">\n              Show more\n            </small>\n          </div>\n        </button>\n      `,i.parentNode.insertBefore(l,i.nextSibling),l.querySelector(".js-reveal-more-btn").addEventListener("click",(e=>{e.preventDefault();const a=s.filter((e=>e.hasAttribute("hidden")));if(a.length){a[0].id="";if(window.getComputedStyle(t).getPropertyValue("column-count")>1){const e=a[0].parentNode.insertBefore(a[0].cloneNode(!1),a[0]);e.removeAttribute("hidden"),e.classList.add("b-block-grid__cols-restarter")}a.slice(0,r).forEach((e=>e.removeAttribute("hidden"))),a.length>r?a[r].id=c:l.remove()}window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"Show more",type:o})}),!1)}return!0}))}},116:function(e,t){document.addEventListener("DOMContentLoaded",(()=>{const e=e=>{e.parentNode.querySelector(".b-events-featured__item--active").classList.remove("b-events-featured__item--active"),e.classList.add("b-events-featured__item--active")};Array.from(document.querySelectorAll(".b-events-featured"),(t=>(t.addEventListener("pointerover",(t=>{"touch"!==t.pointerType&&t.target.closest(".b-events-featured__item")&&e(t.target.closest(".b-events-featured__item"))})),t.addEventListener("keyup",(t=>{"Tab"===t.key&&e(t.target.closest(".b-events-featured__item"))})),t.addEventListener("scrollend",(()=>{const r=t.getBoundingClientRect().left;let a=0;for(;a<t.children.length;){if(t.children[a].getBoundingClientRect().left>=r){e(t.children[a]);break}a+=1}})),t.addEventListener("click",(t=>{if(t.target.closest(".b-events-featured__item")){const r=t.target.closest(".b-events-featured__item");r.classList.contains("b-events-featured__item--active")||(t.preventDefault(),e(r),r.scrollIntoView())}})),!0)))}))},117:function(e,t){document.addEventListener("DOMContentLoaded",(()=>{let e=0;Array.from(document.querySelectorAll(".b-image-row"),(t=>{e+=1,t.classList.add(`b-image-row-${e}`),t._imageRowId=e;const r=t.parentNode.insertBefore(document.createElement("style"),t),a=()=>{const e=[],a=getComputedStyle(t),s=t.getBoundingClientRect().width-parseInt(a.paddingLeft,10)-parseInt(a.paddingRight,10);let n="",o=0;Array.from(t.querySelectorAll(".b-image-row__img"),(r=>(r.naturalWidth?e.push(r.naturalWidth/r.naturalHeight):(e.push(1),r.closest(".b-image-row__item").classList.add("b-image-row__item--failed")),o+=1,o%2===0&&(n+=`\n            .b-image-row-${t._imageRowId} .b-image-row__item:nth-child(${o-1}), \n            .b-image-row-${t._imageRowId} .b-image-row__item:nth-child(${o}) {\n              height: ${Math.round(s/(e[o-2]+e[o-1])-1.5)}px;\n            }\n          `),!0))),r.innerHTML=`\n        @media screen and (max-width: 768px) {\n          .b-image-row-${t._imageRowId} { \n            flex-wrap: wrap;\n          }\n          ${n}\n        }\n        .b-image-row-${t._imageRowId} .b-image-row__item {\n          height: ${s/e.reduce(((e,t)=>e+t))}px;\n        }\n      `},s=t.querySelectorAll(".b-image-row__img"),n=[],o=e=>{n.push(e),n.length===s.length&&(a(),a())};return Array.from(s,(e=>(e.complete||"IMG"!==e.tagName?o(e):(e.addEventListener("load",(()=>{o(e)})),e.addEventListener("error",(()=>{o(e)}))),!0))),window.addEventListener("resize",a,!1),!0}))}))},118:function(e,t){document.addEventListener("DOMContentLoaded",(()=>{Array.from(document.querySelectorAll(".b-list-promo"),(e=>{const t=e.querySelectorAll(".b-list-promo__image-list-item");if(t.length>1){const r=e.querySelectorAll(".b-list-promo__list-item");let a=0;r[a].classList.add("b-list-promo__list-item--active");const s=a=>{e.querySelector(".b-list-promo__image-list-item--active").classList.remove("b-list-promo__image-list-item--active"),t[a].classList.add("b-list-promo__image-list-item--active"),e.querySelector(".b-list-promo__list-item--active").classList.remove("b-list-promo__list-item--active"),r[a].classList.add("b-list-promo__list-item--active")},n=e.querySelector(".b-list-promo__ctrls");n.classList.add("b-list-promo__ctrls--active");const o=n.querySelector(".js-list-promo__ctrls-btn--prev"),i=n.querySelector(".js-list-promo__ctrls-btn--next");o.setAttribute("disabled","true"),n.addEventListener("click",(e=>{e.target===o?(a-=1,i.removeAttribute("disabled"),0===a&&o.setAttribute("disabled","true")):e.target===i&&(a+=1,o.removeAttribute("disabled"),a===t.length-1&&i.setAttribute("disabled","true")),s(a)}))}return!0}))}))},119:function(e,t){Array.from(document.querySelectorAll(".js-newsletter_form"),(e=>(e.addEventListener("submit",(t=>{t.preventDefault();const r=e.querySelector(".js-emailValidation"),a=e.querySelector(".js-newsletter__descriptor"),s=e.querySelector(".js-newsletter__submit"),n=new XMLHttpRequest;let o="";var i;i=r.value,/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i.test(i)?(n||e.submit(),Array.from(e.querySelectorAll("input"),(e=>(o+=`${e.name}=${encodeURIComponent(e.value)}&`,!0))),n.onreadystatechange=()=>{n.readyState===XMLHttpRequest.DONE&&(200===n.status?(s.value="Thank you!",a.innerHTML="A confirmation email will be sent to this address shortly&hellip;",e.classList.remove("invalid"),e.classList.add("sent")):e.submit())},n.open("POST",e.action),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send(o)):(a.innerHTML="That doesn't look like an email address&hellip;",e.classList.add("invalid"),e.querySelector(".b-newsletter__form-fields-field").setAttribute("aria-invalid","true"))})),!0)))},120:function(e,t){Array.from(document.querySelectorAll(".js-search-site, .js-search-etc-gateway"),(e=>{const t=e.querySelector(".b-search-form__input");if(e.classList.contains("js-search-site")){e._props={type:"siteSearch"};const r=e.querySelector(".b-search-form__underscore"),a=e.querySelector(".b-search-form__submit"),s=e.querySelector(".b-search-form__clear"),n=()=>{r.innerHTML=t.value.replace(/\s/g,"&nbsp;")},o=()=>{s.classList.add("b-search-form__clear--hidden"),t.value.length?a.classList.remove("b-search-form__submit--hidden"):a.classList.add("b-search-form__submit--hidden")},i=()=>{s.classList.add("b-search-form__clear--hidden"),t.value="",n()};t.value.length?s.classList.remove("b-search-form__clear--hidden"):a.classList.add("b-search-form__submit--hidden"),n(),t.addEventListener("input",(()=>{n(),o()}),!1),s.addEventListener("click",i,!1)}else if(e.classList.contains("js-search-etc-gateway")){e._props={type:"etcGatewaySearch",suggestionsTop:"https://collections.vam.ac.uk/assets/data/suggestions.json",suggestionsAPI:"https://api.vam.ac.uk/v2/sayt/search"};const r=e=>{e._props.storedSuggestions=JSON.parse(sessionStorage.getItem(`storedSuggestions_${e._props.type}`));const t=new Date;if(!e._props.storedSuggestions||t.getTime()>e._props.storedSuggestions.expires){return fetch(e._props.suggestionsTop,{cache:"no-cache"}).then((e=>e.json())).then((r=>{const a={expires:t.getTime()+9e5,data:r};e._props.storedSuggestions=a,sessionStorage.setItem(`storedSuggestions_${e._props.type}`,JSON.stringify(e._props.storedSuggestions))})).catch((e=>console.error(e.name,e.message)))}return Promise.resolve(!0)},a=e=>{window.dataLayer.push({event:e.target.tracking.event,eventCategory:e.target.tracking.eventCategory,eventAction:e.target.tracking.eventAction,eventLabel:e.target.tracking.eventLabel})},s=e.querySelector(".b-search-form__suggestions"),n=e.querySelector("#sel_etc"),o=(r,n)=>{if(t.name.startsWith("q_"))e.removeAttribute("suggesting");else{const e=document.createElement("a");if(s.childElementCount<10){const t=n.displayName||n.displayTerm,o=`https://collections.vam.ac.uk/search/?id_${n.recordType}=${n.systemNumber}`;e.className="b-search-form__suggestion",e.href=o,e.tabindex=0,e.innerHTML=`\n            <div class="b-search-form__suggestion-type">\n              ${n.recordType}\n            </div>\n            ${t}\n          `,e.tracking={event:"autosuggest EtC landing",eventCategory:`search - autosuggest - ${n.index}`,eventAction:r,eventLabel:o},e.addEventListener("click",a),s.appendChild(e)}}};r(e).then((()=>{let r=null;t.addEventListener("input",(()=>{if(e.removeAttribute("suggesting"),s.innerHTML="",t.value.length){const a=t.value.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");let s="(^|\\|)";t.value.length>2&&(s="\\b");const i=new RegExp(`${s}${a}.*`,"i");Array.from(e._props.storedSuggestions.data,(r=>(Array.from(r.suggestions,(r=>{const a=r.displayName;return i.test(a)&&(e.setAttribute("suggesting",!0),o(t.value,r)),!0})),!0))),t.value.length>4&&0===n.selectedIndex&&(r&&r.abort(),r=new window.AbortController,setTimeout((()=>r.abort()),500),fetch(`${e._props.suggestionsAPI}?q=${encodeURI(a)}&page_size=10`,{signal:r.signal}).then((e=>e.json())).then((r=>{r.info.record_count>0&&(e.setAttribute("suggesting",!0),Array.from(r.records,(e=>(o(t.value,e),!0))))})).catch((e=>console.error(e.name,e.message))))}}),!1)})).catch((e=>console.error(e.name,e.message))),document.addEventListener("click",(e=>{if(e.target.closest(".b-search-form__filter-date-btn-show")){const e=document.querySelector(".b-search-form__filter-date"),t=e.querySelector(".b-search-form__filter-date-btn-show"),r=e.querySelector(".b-search-form__filter-date-container"),a=!("true"===t.getAttribute("aria-expanded")),s=e.querySelectorAll(".b-search-form__filter-input--date");r.classList.contains("open")?r.classList.remove("open"):r.classList.add("open"),t.setAttribute("aria-expanded",a),s.length&&s.forEach((e=>{e.value=""}))}}));const i=e.querySelector(".b-search-form__input-wrapper"),c=e.querySelector(".b-search-form__inner"),l=()=>{i.querySelector("input").classList.remove("b-search-form__input--validation-error"),document.querySelector(".b-search-form__input__input-error-label")&&document.querySelector(".b-search-form__input__input-error-label").remove()},d=()=>{const e=document.createElement("label");return e.classList.add("b-search-form__input__input-error-label"),e.appendChild(document.createTextNode("Enter 3 or more characters")),e.setAttribute("id","form-input-error-label"),e.setAttribute("role","alert"),e.setAttribute("aria-live","polite"),e},u=()=>{l(),document.querySelector(".b-search-form__input--validation-error")&&i.querySelector("input").classList.remove("b-search-form__input--validation-error"),c.classList.remove("b-search-form__inner--focused-search-validation-error")},m=e=>{null!=document.querySelector(".b-search-form__input__input-error-label")?i.querySelector("input").focus():(i.querySelector("input").setAttribute("aria-labelledby","form-input-error-label"),c.classList.add("b-search-form__inner--focused-search-validation-error"),i.querySelector("input").focus(),i.querySelector("input").classList.add("b-search-form__input--validation-error"),i.insertAdjacentHTML("beforeend",e.outerHTML))};e.addEventListener("change",(r=>{if(r&&"sel_etc"===r.target.name){if("all_fields"!==r.target.value&&r.target.value.startsWith("q_")){if(t.setAttribute("name",r.target.value),e.removeAttribute("suggesting"),t.value.length<3){const e=d();m(e)}}else t.setAttribute("name","q"),u()}})),e.addEventListener("input",(e=>{const t=e.target.name.toString().startsWith("q_");if(e.target.value.length<3){if(t){const e=d();m(e)}}else u()})),e.addEventListener("submit",(r=>{r.preventDefault();const a=new FormData(e);if(a.has("q")||a.get("sel_etc").toString().startsWith("q_")&&t.value.length>2){let t="";Array.from(a.entries(),(e=>("sel_etc"===e[0]||(n.selectedIndex>0&&"q"===e[0]&&(e[0]=a.get("sel_etc")),t+=(t.length>1?"&":"")+`${e[0]}=${encodeURIComponent(e[1])}`),!0))),window.location.href=`${e.action}?${t}`}}))}return!0}))},121:function(e,t){const r=()=>{Array.from(document.querySelectorAll(".js-search-result-text"),(e=>((e=>{e.dataset.fulltext||(e.dataset.fulltext=e.innerHTML);const t=e.dataset.fulltext;if(e.innerHTML=t,e.scrollHeight-e.clientHeight>10){const r=t.indexOf("</em>"),a=e.clientHeight/e.scrollHeight*t.length,s=r-a;let n=0,o=t.lastIndexOf(" ",a),i="";s>0&&(i="&hellip;",n=t.indexOf(" ",s+20)+1,o=t.lastIndexOf(" ",a+s+20)),e.innerHTML=`${i}${t.substring(n,o)}&hellip;`}})(e),!0)))};r(),window.addEventListener("resize",r,!1)},122:function(e,t){const r=document.querySelector(".js-video-trailer");if(r){const e=r.querySelector(".js-video-trailer-preview"),t=document.createElement("div"),a=.5625;r.addEventListener("click",(s=>{s.preventDefault(),t.className="b-video-trailer__image",t.innerHTML=`<iframe class="" width="100%" height="100%" src="${r.href}"&playsinline=1" frameborder="0" allowfullscreen></iframe>`,e.remove(),r.appendChild(t),t.style.height=t.offsetWidth*a+"px"})),window.addEventListener("resize",(()=>{t.style.height=t.offsetWidth*a+"px"}))}},126:function(e,t,r){"use strict";r.r(t);var a=r(13);var s=()=>{const e=Array.from(document.querySelectorAll(".js-object-image-overlay-item"));if(e.length){let t=document.querySelector(".b-object-image-overlay");t||(t=document.createElement("div"),t.classList.add("b-object-image-overlay"),t.id="object-image-overlay",t.setAttribute("role","dialog"),t.setAttribute("aria-modal","true"),document.body.appendChild(t));const r=document.createElement("div");r.classList.add("b-object-image-overlay__items"),t.appendChild(r),t.seeds=e,t.addItem=(e,a=!1)=>{const s=t.seeds[e]||t.seeds[0],n=s.dataset.objectImageOverlay?JSON.parse(s.dataset.objectImageOverlay):null,o=s.querySelector("a").getAttribute("href"),i=o.length>1?`<a tabindex="-1" class="b-object-image-overlay__cta u-btn u-btn--micro u-btn--outlined-inverse" href="${o}" data-tracking-oic="explore the object">More info</a>`:"",c=s.querySelector("img"),l=c?`<img class="b-object-image-overlay__img"\n            itemprop="contentUrl"\n            alt="${c.alt}"\n            loading="lazy"\n            sizes="(min-width: 992px) calc(100vw - 210px),\n                  (min-width: 768px) calc(100vw - 80px),\n                  (min-width: 500px) calc(100vw - 40px),\n                  calc(100vw - 20px)"\n            srcset="${c.srcset}"\n            src="${c.src}">\n        `:'<img class="b-object-image-overlay__img" src="">';let d=s.querySelector("figcaption");d=d?d.firstElementChild?d.firstElementChild.textContent:d.textContent:"";const u=n&&n.copyright?n.copyright:"",m=n&&n.locationType?`<div class="b-object-image-overlay__location-type">${n.locationType}</div>`:"",b=document.createElement("div");b.classList.add("b-object-image-overlay__item"),b.innerHTML+=`\n        <div class="b-object-image-overlay__img-pane">\n          ${l}\n        </div>\n        <div class="b-object-image-overlay__content" id="object-image-content-${e}">\n          <div class="b-object-image-overlay__details">\n            <div class="b-object-image-overlay__header">\n              <div class="b-object-image-overlay__caption">\n                ${d}\n              </div>\n              <button class="b-object-image-overlay__dismiss u-btn-icon u-btn-icon--close">Close</button>\n            </div>\n            ${(()=>{let e=n&&n.locationSite?`<div class="b-object-image-overlay__location" title="Object venue">${n.locationSite}</div>`:"";if(n&&n.locationRoom){let t=n.locationRoom;n.visitUrl&&(t=`<a class="u-link" href="${n.visitUrl}" tabindex="-1" data-tracking-oic="visit the object">${t}</a>`),e+=`\n            <div class="b-object-image-overlay__location b-object-image-overlay__location--room" title="Object room">${t}</div>`}return e})()}\n          </div>\n          <div class="b-object-image-overlay__more">\n            <div class="b-object-image-overlay__onward">\n              ${m}\n              ${i}\n            </div>\n            <div class="b-object-image-overlay__footer">\n              <div class="b-object-image-overlay__copyright" itemprop="copyrightHolder">\n                ${u}\n              </div>\n              <div class="b-object-image-overlay__buttons">\n                <button class="js-object-image-overlay-btn--info u-btn-icon u-btn-icon--info" data-tracking-oic="hide info" title="Show/hide information" aria-controls="object-image-content-${e}" aria-expanded="true">Show/hide information</button>\n                <button class="js-object-image-overlay-btn--prev u-btn-icon u-btn-icon--point-left" data-tracking-oic="previous object" title="Previous object">Previous object</button>\n                <button class="js-object-image-overlay-btn--next u-btn-icon u-btn-icon--point-right" data-tracking-oic="next object" title="Next object">Next object</button>\n              </div>\n            </div>\n          </div>\n        </div>\n      `,a?r.insertBefore(b,r.firstElementChild):r.appendChild(b)},t.getIndex=e=>t.seeds.findIndex((t=>t===e)),t.clipItem=(e=!1)=>{e?r.lastElementChild.remove():r.firstElementChild.remove()},t.advance=(e=!1)=>{(!e&&t._index<t.seeds.length-1||e&&t._index>0)&&(t.clipItem(e),t.addItem(t._index+2*(e?-1:1),e),t._index+=1*(e?-1:1),t.track(t._index)),t.buttonInit(e)},t.infoToggle=(e,r=!1)=>{r?e.classList.add("u-btn-icon--active"):e.classList.toggle("u-btn-icon--active"),e.classList.contains("u-btn-icon--active")?(t.classList.add("b-object-image-overlay--img-only"),e.dataset.trackingOic="show info",e.setAttribute("aria-expanded",!1)):(t.classList.remove("b-object-image-overlay--img-only"),e.dataset.trackingOic="hide info",e.setAttribute("aria-expanded",!0))},t.exit=()=>{t.classList.remove("b-object-image-overlay--active"),document.body.style.overflow="",r.innerHTML="",t.onclick=null},t.track=e=>{window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"OIC",object:t.seeds[e].querySelector("figcaption").textContent.trim(),museumNumber:JSON.parse(t.seeds[e].dataset.objectImageOverlay).museumNumber||null,status:JSON.parse(t.seeds[e].dataset.objectImageOverlay).locationType||null})},t.buttonInit=(e=!1)=>{Array.from(t.querySelectorAll("button"),(e=>e.setAttribute("disabled",!0))),Array.from(t.querySelectorAll("a"),(e=>e.setAttribute("tabindex","-1")));const r=document.querySelectorAll(".b-object-image-overlay__item")[1];Array.from(r.querySelectorAll("a"),(e=>e.removeAttribute("tabindex"))),Array.from(r.querySelectorAll("button"),(e=>e.removeAttribute("disabled"))),t._index===t.seeds.length-1&&r.querySelector(".js-object-image-overlay-btn--next").setAttribute("disabled",!0),0===t._index&&r.querySelector(".js-object-image-overlay-btn--prev").setAttribute("disabled",!0),t.classList.contains("b-object-image-overlay--img-only")&&t.infoToggle(r.querySelector(".js-object-image-overlay-btn--info"),!0),t.focusable=r.querySelectorAll('button:enabled, a:not([tabindex="-1"]), [tabindex]:not([tabindex="-1"])');(e?r.querySelector(".js-object-image-overlay-btn--prev:enabled")||r.querySelector(".js-object-image-overlay-btn--next:enabled")||t.focusable[0]:r.querySelector(".js-object-image-overlay-btn--next:enabled")||r.querySelector(".js-object-image-overlay-btn--prev:enabled")||t.focusable[0]).focus({preventScroll:!0})},t.ontouchstart=e=>{const a=[e.touches[0].pageX,e.touches[0].pageY];t.ontouchmove=e=>{const s=[e.touches[0].pageX-a[0],e.touches[0].pageY-a[1]];Math.abs(s[0])>Math.abs(s[1])&&(s[0]<0&&t._index<t.seeds.length-1||s[0]>0&&t._index>0)&&(Math.abs(s[0])<74?window.requestAnimationFrame((()=>{r.style.marginLeft=`${s[0]}px`})):(t.ontouchmove=null,s[0]<0?t.advance():t.advance(!0)))},t.ontouchend=()=>{window.requestAnimationFrame((()=>{r.style.marginLeft=0,r.style.transition="all .35s"}))}},document.addEventListener("click",(e=>{if(e.target.closest(".js-object-image-overlay-item > a")){e.preventDefault();const r=e.target.closest(".js-object-image-overlay-item"),a=r.closest('[data-object-image-overlay-contained="true"]');t.seeds=a?Array.from(a.querySelectorAll(".js-object-image-overlay-item")):Array.from(document.querySelectorAll(".js-object-image-overlay-item")),t._index=t.getIndex(r),t.addItem(t._index),t.classList.add("b-object-image-overlay--active"),t.addItem(t._index+1),t.addItem(t._index-1,!0),t.focus(),t.buttonInit(),t.track(t._index),document.body.style.overflow="hidden"}else e.target.matches(".b-object-image-overlay__item, .b-object-image-overlay__dismiss")?t.exit():e.target.matches(".js-object-image-overlay-btn--next")?t.advance():e.target.matches(".js-object-image-overlay-btn--prev")?t.advance(!0):e.target.classList.contains("js-object-image-overlay-btn--info")&&t.infoToggle(e.target)})),document.addEventListener("keydown",(e=>{if(e.target.closest(".b-object-image-overlay"))if("ArrowLeft"===e.key)e.preventDefault(),t.advance(!0);else if("ArrowRight"===e.key)e.preventDefault(),t.advance();else if("Escape"===e.key||"Esc"===e.key)t.exit();else if("Tab"===e.key){const r=t.focusable[0],a=t.focusable[t.focusable.length-1];t.focusable.length&&(e.shiftKey&&document.activeElement===r?(a.focus(),e.preventDefault()):e.shiftKey||document.activeElement!==a||(r.focus(),e.preventDefault()))}}))}};r(113);const n=()=>{const e=document.querySelectorAll(".b-accordion");if(e.length){const t=(e,t)=>{const r=window.getComputedStyle(t);window.requestAnimationFrame((()=>{e.classList.toggle("b-accordion__section--open"),t.style.transition=r.getPropertyValue("transition")}))},r=new MutationObserver((e=>{e.forEach((e=>{if("open"===e.attributeName){const r=e.target,a=r.firstElementChild.nextElementSibling;t(r,a)}}))}));Array.from(e,(e=>(r.observe(e,{attributes:!0,subtree:!0}),!0)))}};n();r(114),r(115),r(116),r(117),r(118);var o=r(20),i=r.n(o);const c=document.querySelectorAll(".js-modal");function l(e,t){window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"myClick",category:e,action:t})}Array.from(c,(e=>{const t=null==e.dataset.modalCampaign?"modalCampaign-not-set":e.dataset.modalCampaign,r=()=>{e.setAttribute("tabindex","-1"),e.setAttribute("aria-hidden","true"),l(t,"pop-up dismissed"),e.dispatchEvent(new CustomEvent("jsModalClosed",{bubbles:!0})),e.classList.remove("b-modal--active"),e.removeEventListener("keydown",a)},a=t=>{if("Tab"===t.key){const r=e.querySelectorAll("a, button:enabled, input:enabled"),a=r[0],s=r[r.length-1],n=t.shiftKey;r.length&&(n&&document.activeElement===a?(t.preventDefault(),s.focus()):n||document.activeElement!==s||(t.preventDefault(),a.focus()))}else"Escape"===t.key&&(e.removeEventListener("keydown",a),r())};return e.dataset.modalOnceOnly&&i.a.get(t)||e.dataset.notOnLoad||(document.body.appendChild(e),e.setAttribute("tabindex","0"),e.removeAttribute("aria-hidden"),e.classList.add("b-modal--active"),l(t,"pop-up displayed"),e.querySelector("a, button:enabled, input:enabled").focus(),e.addEventListener("keydown",a)),e.addEventListener("click",(a=>{e.dataset.modalOnceOnly&&i.a.set(t,"seen",{domain:e.dataset.modalDomain,expires:365}),a.target.closest(".js-modal-action")?l(t,`clicked: ${a.target.textContent}`):a.target.closest(".js-modal-exit")&&r()})),!0}));r(119),r(120),r(121);const d=document.querySelector(".b-site-nav");if(d){const e=d.querySelectorAll(".js-site-nav__mobile-toggle"),t=d.querySelector(".js-site-nav__mobile-toggle--icon"),r=d.querySelectorAll(".js-site-nav-bag"),a=d.querySelector(".js-site-nav-search-btn"),s=d.querySelector(".js-site-nav-search"),n=s.querySelector(".b-search-form__input"),o=s.querySelector(".js-search-content"),c=s.querySelector(".js-search-suggest"),l=i.a.get("basketCount"),u=d.querySelector(".js-site-nav__tablet-toggle");if(l&&l>0&&Array.from(r,(e=>(e.classList.remove("b-site-nav__bag--hidden"),e.querySelector(".js-site-nav-bag-total").innerHTML=l<100?l:"",!0))),t&&"none"!==window.getComputedStyle(t).display){new IntersectionObserver((e=>{t.classList.toggle("b-site-nav__mobile-toggle--solo",!e[0].isIntersecting)}),{rootMargin:"-90px"}).observe(d)}u&&u.addEventListener("click",(e=>{e.preventDefault(),document.querySelector(".js-site-nav-more").classList.toggle("active")}),!1);const m=e=>{e?(s.classList.add("b-site-nav__core__search--active"),document.body.style.overflow="hidden"):(s.classList.remove("b-site-nav__core__search--active"),document.body.style.overflow="")};if(Array.from(e,(e=>{const r=t,a=d.querySelector(".b-site-nav__core__item:nth-last-child(2)>a"),s=e=>{"Tab"===e.key&&(document.activeElement===r&&e.shiftKey?(e.preventDefault(),a.focus()):document.activeElement!==a||e.shiftKey||(e.preventDefault(),r.focus()))};return e.addEventListener("click",(e=>{e.preventDefault(),d.classList.contains("b-site-nav--open")?(d.classList.remove("b-site-nav--open"),d.setAttribute("aria-expanded","false"),document.removeEventListener("keydown",s,!1),m(!1)):(d.classList.add("b-site-nav--open"),d.setAttribute("aria-expanded","true"),document.addEventListener("keydown",s,!1),m(!0))}),!1),!0})),a){const e=n,t=a,r=r=>{"Tab"===r.key&&(document.activeElement===e&&r.shiftKey?(r.preventDefault(),t.focus()):document.activeElement!==t||r.shiftKey||(r.preventDefault(),e.focus()))};a.addEventListener("click",(e=>{e.preventDefault(),a.classList.contains("b-site-nav__core__search-btn--active")?(a.classList.remove("b-site-nav__core__search-btn--active"),document.removeEventListener("keydown",r,!1),m(!1)):(a.classList.add("b-site-nav__core__search-btn--active"),document.addEventListener("keydown",r,!1),m(!0))}),!1)}let b=JSON.parse(sessionStorage.getItem("storedSearch"));if(!b||Date.parse(new Date)>Date.parse(b.expires)){const e=new XMLHttpRequest;e.open("GET","https://www.vam.ac.uk/services/search/suggest/promoted"),e.send(),e.onreadystatechange=()=>{if(e.readyState===XMLHttpRequest.DONE&&200===e.status){const t=new Date,r={expires:new Date(t.setMinutes(t.getMinutes()+15)),results:e.responseText};sessionStorage.setItem("storedSearch",JSON.stringify(r)),b=JSON.parse(sessionStorage.getItem("storedSearch"))}}}const g=()=>{window.dataLayer.push({event:"autosuggest search",eventCategory:(void 0).tracking.eventCategory,eventAction:(void 0).tracking.eventAction,eventLabel:(void 0).tracking.eventLabel})},v=(e,t,r,a)=>{let s=null,n=null,i=null;JSON.parse(t).forEach((t=>{for(s=0;s<t.suggestions.length;s+=1)if(n=t.suggestions[s].title,t.suggestions[s].terms&&(n=t.suggestions[s].terms.join("|")),e.test(n)){o.classList.remove("b-site-nav__core__search__container--hidden"),i=t.suggestions[s].icon?t.suggestions[s].icon:"https://s3-eu-west-1.amazonaws.com/vanda-production-assets/static/search/result_placeholder.jpg";const e=document.createElement("li");a&&e.classList.add("js-live-result");const n=t.suggestions[s].venue?`\n            <div class="b-search-result-auto-suggest-content-type b-search-result-auto-suggest-content-venue">\n              ${t.suggestions[s].venue}\n            </div>\n          `:"";e.innerHTML=`\n            <div class="b-search-result-auto-suggest">\n              <a class="b-search-result-auto-suggest-content"\n                href="${t.suggestions[s].url}">\n                <img class="b-search-result-auto-suggest-image"\n                    src="${i}"\n                    alt=""\n                    aria-hidden="true"\n                    loading="lazy">\n                <div class="b-search-result-auto-suggest-text">\n                  <div class="b-search-result-auto-suggest-content-type">\n                    ${t.suggestions[s].type}\n                  </div>\n                  <div class="b-search-result-auto-suggest-title">\n                    ${t.suggestions[s].title}\n                  </div>\n                  ${n}\n                </div>\n              </a>\n            </div>\n          `,e.tracking={eventCategory:`search - autosuggest - ${t.suggestions[s].type}`,eventAction:r,eventLabel:t.suggestions[s].url},e.addEventListener("click",g),c.appendChild(e)}}))};n&&n.addEventListener("input",(()=>{if(n.value.length<42&&(o.classList.add("b-site-nav__core__search__container--hidden"),c.innerHTML="",n.value.length)){let e="(^|\\|)";n.value.length>2&&(e="\\b");const t=n.value.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),r=new RegExp(`${e}${t}.*`,"i");if(v(r,b.results,n.value,!1),n.value.length>4){const e=new XMLHttpRequest;e.open("GET",`https://www.vam.ac.uk/services/search/suggest/popular?q=${encodeURI(n.value)}`),e.send(),e.onreadystatechange=()=>{e.readyState===XMLHttpRequest.DONE&&200===e.status&&(Array.from(c.querySelectorAll(".js-live-result"),(e=>(e.remove(),!0))),v(r,e.responseText,n.value,!0))}}}}),!1)}document.addEventListener("click",(e=>{const t=e.target.closest(".b-toggle-set__button");if(t){const e=t.closest(".b-toggle-set"),r=e.querySelector(".b-toggle-set__nav"),a=r.querySelector(".u-btn--pill-active");a&&(a.classList.remove("u-btn--pill-active"),a.setAttribute("aria-expanded",!1),a.setAttribute("aria-selected",!1)),t.classList.add("u-btn--pill-active"),t.setAttribute("aria-expanded",!0),t.setAttribute("aria-selected",!0),Array.from(e.querySelectorAll(".b-toggle-set__target--active"),(e=>(e.classList.remove("b-toggle-set__target--active"),Array.from(e.querySelectorAll("a, button"),(e=>e.setAttribute("tabindex",-1))),!0)));const s=t.getAttribute("aria-controls").split(" ").map((e=>`#${e}`));Array.from(e.querySelectorAll(...s),(e=>(e.classList.add("b-toggle-set__target--active"),Array.from(e.querySelectorAll("a, button"),(e=>e.removeAttribute("tabindex"))),!0))),r.scrollLeft=t.offsetLeft-(r.getBoundingClientRect().width-t.getBoundingClientRect().width)/2}})),document.addEventListener("DOMContentLoaded",(()=>{const e=Array.from(document.querySelectorAll(".b-toggle-set"));e.forEach((e=>{Array.from(e.querySelectorAll(".b-toggle-set__target :is(a, button)"),(e=>(e.setAttribute("tabindex",-1),!0)));(e.querySelector("[data-toggle-set-default-type]")||e.querySelector(".b-toggle-set__button")).click()}));const t=new IntersectionObserver((e=>{e.forEach((e=>{if(e.isIntersecting){const t=e.target;Array.from(t.querySelectorAll(".b-toggle-set__target"),(e=>(e.classList.add("b-toggle-set__target--pre-loaded"),Array.from(e.querySelectorAll(".b-carousel"),(e=>(setTimeout((()=>{Object(a.a)(e)}),0),!0))),!0)))}}))}),{threshold:.5});e.forEach((e=>t.observe(e)))}));r(122);Array.from(document.querySelectorAll(".b-carousel"),(function(e){return Object(a.a)(e),!0})),Array.from(document.querySelectorAll(".b-object-card-warning"),((e,t)=>{const r=`object-card-${t}`;return e.id=r,e.setAttribute("aria-hidden","true"),Array.from(e.querySelectorAll("a, button"),(e=>e.setAttribute("tabindex","-1"))),e.innerHTML=`\n    <button class="b-object-card-warning__banner" aria-expanded="false" aria-controls="${r}">\n      <div class="b-object-card-warning__banner-text">\n        This object, or the text that describes it, is deemed offensive and discriminatory. We are committed to improving our records, and work is ongoing.\n      </div>\n      <div class="b-object-card-warning__banner-dismiss">\n        View record\n      </div>\n    </button>\n    ${e.innerHTML}\n    `,!0})),document.addEventListener("click",(e=>{if(e.target.closest(".b-object-card-warning")){const t=e.target.closest(".b-object-card-warning");t.classList.remove("b-object-card-warning"),Array.from(t.querySelectorAll('[tabindex="-1"]'),(e=>e.removeAttribute("tabindex"))),t.removeAttribute("aria-hidden"),t.firstElementChild.remove(),t.querySelector("a").focus()}})),s()},13:function(e,t,r){"use strict";t.a=(e,t=e.querySelector(".b-carousel__ctrls"))=>{const r=Array.from(e.querySelectorAll(".b-carousel__item"));if(r.length>1){e._viewport=e.querySelector(".b-carousel__viewport"),e._activeIndex=0,e._oldActiveIndex=0;let a=[];r.forEach((e=>(e.querySelector("a, button")||e.setAttribute("tabindex",0),!0)));let s=!0,n=1;const o=()=>{if(e.style.setProperty("--carousel-width",`${e.offsetWidth}px`),e.dataset.carouselTemplateParentSelector){const t=e.closest(e.dataset.carouselTemplateParentSelector);t&&e.style.setProperty("--carousel-template-width",`${t.offsetWidth}px`)}n=parseInt(window.getComputedStyle(e).getPropertyValue("--items-per-view"),10),r.length>n?(s=!0,t&&t.classList.add("b-carousel__ctrls--active")):(s=!1,t&&t.classList.remove("b-carousel__ctrls--active"))};o(),e._setActiveItem=(t,a=!0)=>{a&&((e,t=e.parentElement,r=t)=>{const a=e.offsetLeft+e.offsetWidth,s=t.scrollLeft+r.offsetWidth;if(t.scrollLeft>e.offsetLeft)t.scrollTo(e.offsetLeft,0);else if(s<a){const e=t.scrollLeft+a-s;t.scrollTo(e,0)}})(t,e._viewport,e),e.dispatchEvent(new CustomEvent("itemChange",{detail:{activeIndex:r.indexOf(t)}})),e._activeIndex!==e._oldActiveIndex&&(window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"Carousel interaction",elementId:e.dataset.trackingId,interactionType:"scroll "+(e._activeIndex>e._oldActiveIndex?"forward":"back")}))};const i=new IntersectionObserver((t=>{t.forEach((e=>{const t=r.indexOf(e.target);a=e.isIntersecting?[...a,t]:a.filter((e=>e!==t)),a.sort(((e,t)=>e-t))})),a.length&&(e._oldActiveIndex=e._activeIndex,e._activeIndex=a[0],e._setActiveItem(r[a[0]],!1))}),{root:e,threshold:.9});if(r.forEach((e=>i.observe(e))),e._viewport.addEventListener("keyup",(t=>{if("Tab"===t.key){const r=t.target.closest(".b-carousel__item");r&&e._setActiveItem(r)}})),e._viewport.addEventListener("click",(t=>{if(s){const s=t.target.closest(".b-carousel__item");s&&!a.includes(r.indexOf(s))&&(t.preventDefault(),t.stopImmediatePropagation(),e._setActiveItem(s))}})),e._viewport.addEventListener("focusin",(t=>{t.relatedTarget&&t.relatedTarget.closest(".b-carousel__viewport")||(r[e._activeIndex].tabIndex>-1?r[e._activeIndex].focus():r[e._activeIndex].querySelector("a, button").focus())})),window.addEventListener("resize",(()=>{o()})),t){s&&t.classList.add("b-carousel__ctrls--active");const a=t.querySelector(".js-carousel__ctrl--prev"),o=t.querySelector(".js-carousel__ctrl--next");a.setAttribute("disabled","true"),t.addEventListener("click",(t=>{t.stopImmediatePropagation(),t.target===o?e._setActiveItem(r[e._activeIndex+2*n-1]||r[r.length-1]):t.target===a&&e._setActiveItem(r[e._activeIndex-n]||r[0])})),e.addEventListener("itemChange",(()=>{e._activeIndex>0?a.removeAttribute("disabled"):(document.activeElement===a&&o.focus(),a.setAttribute("disabled","true")),e._activeIndex<r.length-n?o.removeAttribute("disabled"):(document.activeElement===o&&a.focus(),o.setAttribute("disabled","true"))}))}}return!0}},20:function(e,t){t.defaults={},t.set=function(e,r,a){var s=a||{},n=t.defaults,o=s.expires||n.expires,i=s.domain||n.domain,c=void 0!==s.path?s.path:void 0!==n.path?n.path:"/",l=void 0!==s.secure?s.secure:n.secure,d=void 0!==s.httponly?s.httponly:n.httponly,u=void 0!==s.samesite?s.samesite:n.samesite,m=o?new Date("number"===typeof o?(new Date).getTime()+864e5*o:o):0;document.cookie=e.replace(/[^+#$&^`|]/g,encodeURIComponent).replace("(","%28").replace(")","%29")+"="+r.replace(/[^+#$&/:<-\[\]-}]/g,encodeURIComponent)+(m&&m.getTime()>=0?";expires="+m.toUTCString():"")+(i?";domain="+i:"")+(c?";path="+c:"")+(l?";secure":"")+(d?";httponly":"")+(u?";samesite="+u:"")},t.get=function(e){for(var t=document.cookie.split(";");t.length;){var r=t.pop(),a=r.indexOf("=");if(a=a<0?r.length:a,decodeURIComponent(r.slice(0,a).replace(/^\s+/,""))===e)return decodeURIComponent(r.slice(a+1))}return null},t.erase=function(e,r){t.set(e,"",{expires:-1,domain:r&&r.domain,path:r&&r.path,secure:0,httponly:0})},t.all=function(){for(var e={},t=document.cookie.split(";");t.length;){var r=t.pop(),a=r.indexOf("=");a=a<0?r.length:a,e[decodeURIComponent(r.slice(0,a).replace(/^\s+/,""))]=decodeURIComponent(r.slice(a+1))}return e}}});