(self.webpackChunknatgeo=self.webpackChunknatgeo||[]).push([[4181],{5075:(e,t,i)=>{var a=i(85893),o=i(67294),s=i(3896),n=i(50239),l=i(21800),r=i(36238),c=i(35215),d=i(27361),m=i(34248),u=i(34248).inject,p=o.createElement,E=m.observable,_=m.action,h=n.emptyObj,y=n.FALSE,v=n.NULL,k=n.TRUE,S="hide",F={};i(10566),e.exports=function(e,t){var i,o,n=t||"default",m={activeVideo:v,userInitiated:y};return F[n]=F[n]||E(m),i=F[n],(o=c(s({displayName:"ComponentWithManagedPlayback",autoplayVideo:_((function(){i.activeVideo=this,i.userInitiated=y})),getInitialState:function(){return{hasBeenInView:y}},onInViewChange:function(e){e&&this.setState({hasBeenInView:k})},render:function(){var t=this,o=t.props||h,s=o.embedType,n=(t.state||h).hasBeenInView,c=t.setActiveVideo,m=t.autoplayVideo,u=i.activeVideo,E="desktop"===d(o,"state.app.device"),_=u===t,y=o.cmsType||"",v=i.userInitiated,k=v?"non-autoplay":"autoplay";return E&&"onClick"===s?p(e,l({},o,{embedVideo:_,playVideo:_,setActiveVideo:c,autoplayVideo:m,placeholderButtonDisplay:S})):a.jsx(r,{className:y,onChange:t.onInViewChange,children:p(e,l({},o,{embedVideo:n,isActiveVideo:_,configuration:{autoplay:E&&_,volume:{muted:!v&&_,namespace:k}},onPlay:c,onAdPlay:c,setActiveVideo:c,autoplayVideo:m,placeholderButtonDisplay:_?S:"show"}))})},setActiveVideo:_((function(){i.activeVideo=this,i.userInitiated=k}))}))).defaultProps={embedType:"preEmbed"},o.displayName="withManagedPlayback(".concat(e.displayName||e.componentName||e.name,")"),u("state")((function(e){return p(o,l({},e,{playbackStore:i}))}))}},73327:(e,t,i)=>{var a=i(85893),o=(i(67294),i(45697)),s=i(50239),n=i(86746),l=i(94184),r=i(27361),c=s.cbool,d=s.passThru,m=s.emptyObj,u=s.NULL,p=s.TRUE;function E(e,t){var i=e||m,o=t||m,s=o.translate||d,E=r(o,"adConfig.enabled"),_=i.ad||m,h=i.className||"",y=i.pos||"",v=i.uniquePos||"",k=_.kvps,S=c(i.hideLabel),F="pixel"===y||S?u:s("advertisement"),b=l(y,"".concat(y).concat(h?"--"+h:"")),g=p;return E?a.jsx("div",{tabIndex:"-1","aria-hidden":"true",className:"ad-wrapper",children:a.jsx(n,{className:b,label:F,type:y,uniquePos:v,kvps:k,collapseBeforeLoad:g})}):u}i(4197),E.contextTypes={translate:o.func,adConfig:o.object},E.propTypes={className:o.string,pos:o.string,uniquePos:o.string,ad:o.shape({kvps:o.object}),hideLabel:o.bool},e.exports=E},77756:(e,t,i)=>{e.exports=i(73327)},62694:(e,t,i)=>{var a,o=i(85893),s=i(67294),n=i(3896),l=i(94184),r=i(50239),c=i(84967),d=i(5902),m=i(45697),u=i(27361),p=i(64721),E=i(33439),_=i(67102),h=i(5075),y=i(33363),v=i(43881),k=i(17779),S=i(24071),F=i(59308),b=i(64535),g=c.evtTgt,f=i(94042).isEmail,x=i(359),N=i(90432),I=i(17739),j=i(74055),C=i(83978),w=i(57281).EMBED_EVENTS.FIRED,T=c.doc(),V=r.isFunc,L=r.passThru,A=r.strlc,P=c.evtCancel,B=c.qsa,M=r.emptyAry,D=r.emptyObj,O="",R=r.FALSE,H=r.noop,U=r.NULL,q=r.TRUE,Y=u(E,"THEMES.DARK"),K=x.COMMON_ANALYTICS.CUSTOM_EVENT,W=u(_,"PROP_NAMES.CAMPAIGN_CODE"),G="interactive",z="div",J="props.formSuccess",Q="props.state.page.type",X="focusout",Z="props.triggerPosition",$="modalRef.current.ref",ee="EmailStickyFooter__EmailInput__Field",te="state.isActive",ie="mrktngMeta.".concat(W),ae=["home","hub",G,"mediaspotlight"];i(4977),(a=n({displayName:"EmailStickyFooter",componentDidMount:function(){var e=this||D,t=u(e,Z),i=u(e,J),a=u(T,"documentElement.scrollHeight"),o=u(e,Q);i||(o===G?d.on(w,(function(){e.startEmailTimeout()})):p(ae,o)?e.startEmailTimeout():a<t&&e.setState({isActive:q}))},componentDidUpdate:function(e){var t=this||D,i=B(".EmailStickyFooter__Modal",q),a=e.windowScrollY,o=u(t,J),s=u(t,Z),n=u(t,"props.windowScrollY"),l=u(t,$),r=u(t,Q);if(o&&(t.setFocusOnElement(),i))try{I(i)}catch(e){}if(p(ae,r)||a&&n&&a!==n&&!u(t,te)&&t.setState({isActive:n>=s}),!t.hasFocusListener&&l){l.addEventListener(X,t.initFocusListener),t.hasFocusListener=q;try{T.body.style.removeProperty("overflow-x")}catch(e){}}},componentWillUnmount:function(){u(this,Q)===G&&d.off(w),this.clearFocusListener()},getInitialState:function(){return{isActive:R,isValidEmail:R}},render:function(){var e=this||D,t=e.renderForm,i=e.state||D,a=e.props||D,s=a.autoplayVideo,n=(a.email||D).isValidEmail||R,l=i.isActive,r=e.hasErrored;return i.isDisabled?U:(n||(e.hasErrored=q),r&&(e.setFocusOnElement(),e.hasErrored=R),l&&V(s)&&s(),o.jsx(k,{className:"EmailStickyFooter__Modal",setFocus:e.setFocusOnElement,shouldHavePointerEvents:R,open:l,ref:e.modalRef,children:o.jsx(S,{children:t()})}))},renderForm:function(){var e,t=this||D,i=t.context||D,a=i.translate||L,s=t.props||D,n=A(s.theme||i.theme),r=n===Y,c=r?q:R,d=s.formError||R,m=s.formSuccess||R,p=s.newsletter,E=s.placeholder||" ",_=s.policy||M,h=s.submitButton,y=s.success||D,k=s.title,S=s.subtitle,g=y.description,f=y.header,x=y.footer,N=s.inputError||R,I=s.email||D,w=I.value,T=I.isValidEmail||R,V=s.submit||H,P=s.isInternational,B=s.launchNewsletters||H,U=s.loggedIn,W=s.isCollapsible||R,G=t.close,J=t.validator||H,Q=t.keyHandler||H,X=u(s,ie,O),Z=W?"collapsible":"roadblock",$={event_name:"email wall impression",emailwall_type:Z,campaign_name:X},te=l("EmailStickyFooter__Container",{"EmailStickyFooter__Container--dark":r}),ae=l("EmailStickyFooter__Content",{"EmailStickyFooter__Content--dark":r,"EmailStickyFooter__Content--success":m===q}),oe=l("EmailStickyFooter__Heading",{"EmailStickyFooter__Heading--dark":r}),se=l("EmailStickyFooter__SubHeading",{"EmailStickyFooter__SubHeading--dark":r}),ne=l("EmailStickyFooter__PrivacyText",{"EmailStickyFooter__PrivacyText--dark":r}),le=l("EmailInput__Input Input",{"EmailInput__Input--large":r,"EmailInput__Input--error":N}),re=l("EmailStickyFooter__Form",{"EmailStickyFooter__Form--dark":r}),ce=l("EmailStickyFooter__Footer",{"EmailStickyFooter__Footer--dark":r}),de=l("EmailStickyFooter__Caption",{"EmailStickyFooter__Caption--dark":r}),me=l("EmailStickyFooter__EmailInput__InputItem",{"EmailStickyFooter__EmailInput__InputItem--error":N}),ue=o.jsx(F,{className:"EmailStickyFooter__Close",onClick:G,closeLabel:a("close"),theme:n});return e=P?o.jsx(b,{className:"EmailStickyFooter__SubmitButton",onClick:B,label:h,inverse:c}):o.jsx(b,{className:"EmailStickyFooter__SubmitButton",label:h,onClick:V,inverse:c}),o.jsx(C,{trackEvent:K,trackValues:$,children:o.jsx("div",{className:te,children:m?o.jsxs("div",{className:ae,children:[ue,o.jsx("div",{className:oe,role:"status",children:a(f)}),g&&o.jsx(v,{className:de,text:g,element:z}),x&&o.jsx(v,{className:ce,text:x,element:z})]}):o.jsxs("div",{className:ae,role:"dialog","aria-labelledby":"dialogTitle",children:[W&&ue,k&&o.jsx("div",{id:"dialogTitle",className:oe,children:k}),S&&o.jsx("div",{id:"dialogSubtitle",className:se,children:S}),o.jsxs("div",{className:"EmailStickyFooter__FormContainer",children:[N&&!T&&o.jsx("div",{className:"EmailStickyFooter__ErrorText",children:a("Please enter a valid e-mail address.")}),d&&o.jsx("div",{className:"EmailStickyFooter__ErrorText",children:a(d)}),!P&&o.jsx("form",{className:re,noValidate:!0,onSubmit:V,children:o.jsxs("div",{className:me,children:[o.jsx("input",{type:"email",placeholder:E,className:le,id:ee,onChange:J,onKeyDown:Q,disabled:U?q:R,value:w,required:!0}),o.jsx("label",{id:"EmailStickyFooter__EmailInput__Label",htmlFor:ee,children:a("Email Address")})]})})]}),p&&o.jsx(v,{className:"EmailStickyFooter__Text",text:p,element:z}),!P&&o.jsx("ul",{className:ne,children:_}),e,o.jsxs("div",{className:"EmailStickyFooter__TextNote",children:[o.jsx("p",{className:"EmailStickyFooter__TextNote--text",children:a("paywall.already.subscriber")}),o.jsx(j,{className:"EmailStickyFooter__TextNote--link","data-track-event_name":"email wall sign in click","data-track-emailwall_type":Z,"data-track-campaign_name":X,onClick:t.launchSignIn,children:a("paywall.signin")})]})]})})})},close:function(){var e=this||D,t=u(e,"props.onClose"),i=T.documentElement;e.setState({isActive:R,isDisabled:q}),V(t)&&t(),d.emit("natgeo_newsletters_close");try{i.style.removeProperty("overflow")}catch(e){}},setFocusOnElement:function(){var e=this||D,t=u(e,"props.isInternational"),i=u(e,J);N(i?".EmailStickyFooter__Close":t?".EmailStickyFooter__SubmitButton":".EmailStickyFooter__Container .EmailInput__Input")},changeHandler:function(e){var t=this||D;((t.props||D).handleEmailChange||H)({isValidEmail:(t.state||D).isValidEmail,value:(g(e)||D).value||O})},validator:function(e){var t=this||D,i=t.props||D,a=i.onChange||i.handleEmailChange||H,o=(g(e)||D).value||O,s=f(A(o));t.setState({isValidEmail:s}),a({isValidEmail:s,value:o})},keyHandler:function(e){"Enter"!==e.key&&13!==e.keyCode||this.blurHandler(e)},launchSignIn:function(e){var t=u(this,"context.guest.disneyInstance",D).launchIdentityFlow;P(e),V(t)&&t()},modalRef:s.createRef(),initFocusListener:function(e){var t=this,i=(e||D).relatedTarget===U,a=u(t,te);u(t,$)&&a&&i&&(t.setFocusOnElement(),t.clearFocusListener())},clearFocusListener:function(){var e=this,t=u(e,$);t&&e.hasFocusListener&&!e.clearedFocusListener&&(t.removeEventListener(X,e.initFocusListener),e.clearedFocusListener=q)},startEmailTimeout:function(){var e=this;setTimeout((function(){e.setState({isActive:q})}),4e3)},hasErrored:R})).contextTypes={analytics:m.object,guest:m.object,translate:m.func},a.defaultProps={newsletter:O,placeholder:O,submitButton:O,subtitle:O,success:D,title:O,windowScrollY:0,triggerPosition:1e3},a.propTypes={email:m.object,formError:m.string,handleEmailChange:m.func,heading:m.string,inputError:m.string,isCollapsible:m.bool,isInternational:m.bool,launchNewsletters:m.func,newsletter:m.string,placeholder:m.string,policy:m.array,submit:m.func,submitButton:m.string,subtitle:m.string,success:m.object,title:m.string,toggleState:m.func,triggerPosition:m.number,windowScrollY:m.number},a=y(a,{windowScrollY:q}),e.exports=h(a)},24162:(e,t,i)=>{e.exports=i(62694)},57281:(e,t)=>{t.EMBED_EVENTS={FIRED:"embedReadyService.fired"}},90432:(e,t,i)=>{var a=i(50239),o=i(84967).qsa,s=a.TRUE;e.exports=function(e){var t;if(e&&(t=o(e,s)))try{t.focus()}catch(e){}}},10566:(e,t,i)=>{"use strict";i.r(t)},4197:(e,t,i)=>{"use strict";i.r(t)},4977:(e,t,i)=>{"use strict";i.r(t)}}]);