function setUpOneClick(e){var t=$(".oneClick");if(t.length){var a=$("#"+e),n=a.data("checkout-id"),i=!1;t.click(function(){if(!i){i=!0,showAdyenLoader(),dropInObject.setStatus("loading");var e="/a-payment/one-click",a={token:$(this).data("token"),csrf:$(this).data("csrf"),checkoutId:n},o=function(e){if(t.hide(),"success"===e.message){var a=e.url?e.url:"/payment-waiting";return hidePaypalButton(),dropInObject.setStatus("success",{message:"Success!"}),void(window.location=a)}hidePaypalButton(),dropInObject.setStatus("error",{message:e.message}),setTimeout(function(){dropInObject.setStatus("ready"),showPaypalButton()},1500)};$.post(e,a,o)}})}}function setUpBillingAddressCollection(e,t,a){var n=function(n){var i=$("#"+e);i.append(n);var o=i.find(".billingAddressForm");"undefined"==typeof a||null==a?(a=$('<button class="green">Next</button>'),o.append(a)):$(".adyenLoaderImage").remove(),$.each(billingAddress,function(e,t){o.find('[name="'+e+'"]').val(t)}),a.unbind(),a.click(function(){i.find("input, select").each(function(){billingAddress[$(this).attr("name")]=$(this).val()}),$(".billingAddressForm").remove(),$("#saveMethod").remove(),t(e)})};$.get("/a-payment/billing-address-form",n)}function getPaymentMethods(e,t){$.post("/payment-history",{action:"getPaymentMethods"},function(a){if("success"!==a.message){var n="Unable to get payment methods.";t(e,n)}else t(e,a.html)})}function usePaymentMethodForAutoRenew(e,t){var a={token:e},n=function(a){a.error?showDialogMessage("Error!",a.error):"function"==typeof t&&t(e)};$.post("/a-payment/use-payment-method-for-auto-renew",a,n)}function removePaypalBillingId(e,t){var a={billingId:e},n=function(a){a.error?showDialogMessage("Error!",a.error):"function"==typeof t&&t(e)};$.post("/a-payment/remove-billing-id",a,n)}function setAdyenPrimaryMethod(e,t){var a={token:e},n=function(a){a.error?showDialogMessage("Error!",a.error):"function"==typeof t&&t(e)};$.post("/a-payment/set-primary-method",a,n)}function deleteAdyenPaymentMethod(e,t){var a={token:e},n=function(a){a.error?showDialogMessage("Error!",a.error):"function"==typeof t&&t(e)};$.post("/a-payment/remove-token",a,n)}function addApplePayCallback(e){return"undefined"!=typeof e.applepay&&(e.applepay.onValidateMerchant=function(e,t,a){var n="/a-payment/apple-pay-session",i={validationURL:a},o=function(a){"error"===a.session?(console.log(a),t()):e(a.session)};$.post(n,i,o)},e.applepay.onChange=function(){dropInObject.submit()}),e}function addGooglePayCallback(e){return"undefined"!=typeof e.paywithgoogle&&(e.paywithgoogle.onSubmit=function(e){dropInObject.submit()}),e}function getBrowserInfo(){return{language:navigator.language,colorDepth:screen.colorDepth,screenHeight:screen.height,screenWidth:screen.width,javaEnabled:navigator.javaEnabled(),timeZoneOffset:(new Date).getTimezoneOffset()}}function setUpAdyenCheckout(e,t,a){var n=$("#"+e),i=n.data("checkout-id");if("function"!=typeof AdyenCheckout)return void $("#payment_holder").prepend('<p class="error" style="background-color:red;padding: 10px;color: white;font-size:24px;">Unable to load checkout! Access to adyen.com is blocked. Please unblock and reload the page.</p>');var o=new AdyenCheckout(adyenConfig),r=addApplePayCallback(adyenPaymentMethodsConfig);r=addGooglePayCallback(r);var s={paymentMethodsConfiguration:r,onSubmit:function(n,o){if($(".adyenQuestionMark").remove(),!dropInSubmitted){dropInSubmitted=!0,showAdyenLoader(),o.setStatus("loading"),hidePaypalButton(),hideAutoRenew();var r=autoRenewStatus()?"1":"0",s=getBrowserInfo(),l=window.location.href,c=$("#drop-in").data("monthly"),d={data:n.data,checkout_id:i,auto_renew:r,browserInfo:s,isMonthly:c,currency:adyenExtraConfig.currency,origin:l,ajax:1,billing_address:billingAddress},u=function(){processDropIn(d,o,i,e,t,a)};if("undefined"==typeof adyenExtraConfig.collectBillingAddress)u();else{$(".adyen-checkout__dropin").hide();var p=null;"undefined"!=typeof t&&"undefined"!=typeof t.saveButton&&(p=t.saveButton),setUpBillingAddressCollection(e,u,p)}}},onAdditionalDetails:function(n,o){$.post("/a-payment/process-details",{data:n.data,checkout_id:i,ajax:1},function(n){removeAdyenLoader(),n.error?(document.twinkl.sendEvent("payment","process-drop-in-additional-error",n.error),o.setStatus("error",{message:n.error}),resetCheckout(e,t,a)):n.action?(document.twinkl.sendEvent("payment","process-drop-in-additional-action"),o.handleAction(n.action)):n.success?(document.twinkl.sendEvent("payment","process-drop-in-additional-success"),o.setStatus("success",{message:"Success!"}),$("#saveMethod").remove(),i?window.location.replace("/payment-waiting"):location.reload()):(document.twinkl.sendEvent("payment","process-drop-in-additional-fail",JSON.stringify(n)),o.setStatus("error",{message:"Server error"}))}).fail(function(e,t){document.twinkl.sendEvent("payment","process-drop-in-additional-fail",t)})},onSelect:function(e){$(".adyenQuestionMark").remove(),$(".oneClick button").hide(),"card"===e.props.type&&setTimeout(function(){var e=$(".adyen-checkout__field__cvc:visible");if(e.length){var t=$('<div class="adyenQuestionMark">?</div>');e.parent().css("position","relative"),e.parent().append(t),t.css({position:"absolute",right:"0",top:"-5px","z-index":10,cursor:"pointer"}),t.click(function(){var e=$('<img src="'+adyenExtraConfig.cvc_demo+'">');e.css("width","100%");var t=$("<div>");t.append(e);var a=.8*window.innerWidth,n=.6*a;a>600&&(a=600),n>400&&(n=400),t.dialog({modal:!0,width:a,height:n}),$(".ui-dialog-content, .ui-dialog").css("padding",0),$(".ui-dialog").css("background","none"),$(".ui-dialog-titlebar").hide(),$(".ui-widget-content").css("border","none"),t.click(function(){$(this).remove()}),$(".ui-widget-overlay").click(function(){$(".ui-dialog").remove()})})}},100)}};"object"==typeof t&&(s=Object.assign(s,t)),dropInObject=o.create("dropin",s).mount("#"+e),"function"==typeof a&&a(dropInObject),$(".adyenAutoRenew").find("input").click(function(){$(this).prop("checked")===!0?($(".paypalAutoRenewLink").show(),$(".adyenSimpleForm").hide()):($(".paypalAutoRenewLink").hide(),$(".adyenSimpleForm").show())}),$(".oneClick").click(function(){$(this).find("button").show()})}function removeAdyenLoader(){$(".adyenLoaderImage").remove()}function showAdyenLoader(){$(".adyen-checkout__button__content").append('<img src="/images/adyen_loader.gif" class="adyenLoaderImage">')}function processDropIn(e,t,a,n,i,o){$.post("/a-payment/process-drop-in",e,function(e){removeAdyenLoader(),dropInSubmitted=!1,e.error?(document.twinkl.sendEvent("payment","process-drop-in-error",e.error),t.setStatus("error",{message:e.error}),resetCheckout(n,i,o)):e.action?(document.twinkl.sendEvent("payment","process-drop-in-action"),t.handleAction(e.action)):e.redirect?(document.twinkl.sendEvent("payment","process-drop-in-redirect"),performRedirect(e.redirect)):e.success?(document.twinkl.sendEvent("payment","process-drop-in-success"),t.setStatus("success",{message:"Success!"}),$(".paypalContainer").remove(),$("#saveMethod").remove(),e.url?window.location.replace(e.url):a?window.location.replace("/payment-waiting"):($("#dropInNewMethod").html(""),$(".showPaymentMethods").trigger("click"))):(document.twinkl.sendEvent("payment","process-drop-in-fail",JSON.stringify(e)),t.setStatus("error",{message:"Server error"}))}).fail(function(e,t){document.twinkl.sendEvent("payment","process-drop-in-failed",t)})}function resetCheckout(e,t,a){"dropInNewMethod"===e&&location.reload(),setTimeout(function(){var n=$("#"+e);n.html(""),showPaypalButton(),setUpAdyenCheckout(e,t,a)},3e3)}function autoRenewStatus(){return $(".adyenAutoRenew").find("input").prop("checked")||$("#drop-in").data("monthly")}function performRedirect(e){if("POST"===e.method){var t='<form action="'+e.url+'" method="post">';$.each(e.data,function(e,a){t+='<input type="text" name="'+e+'" value="'+a+'" />'}),t+="</form>";var a=$(t);return $("body").append(a),void a.submit()}window.location.replace(e.redirect.url)}function hidePaypalButton(){$(".paypalContainer").hide(),$(".paypalAutoRenewLink").hide()}function showPaypalButton(){$(".paypalContainer").show(),$(".paypalAutoRenewLink").css("display","block")}function hideAutoRenew(){$(".adyenAutoRenew").hide()}function showAutoRenew(){$(".adyenAutoRenew").show()}function onOptInToggleSwitchClick(){var e=$(".toggle-switch-input"),t=e.prop("checked",!e.is(":checked")).is(":checked");$(".details-delivery-address").attr("data-optedin",t?1:0)}function saveBookClubDetails(){$(".button").hide(),$(".results").html('<div class="inline-loader"><img src="'+imageAssetBase+'/images/loading.gif" alt="Please wait..." class="loader" /><span>Saving...</span></div>'),$(".inline-loader").show();var e=$("#first_name").val(),t=$("#last_name").val(),a=$("#address_postcode").val(),n=$("#address_line_1").val(),i=$("#address_line_2").val(),o=$("#address_city").val(),r=$("#county_id").val(),s=$("#country_id").val(),l=$('input[name="book-type"]:checked').val(),c=$('input[name="book-type"]:checked').attr("data-name"),d=+$(".details-delivery-address").attr("data-optedin"),u="",p=$(".details-delivery-address .preferredLanguage"),h=parseInt($(".preferredLanguage").attr("data-welsh-language-id")),m=parseInt($(".preferredLanguage").attr("data-picture-books-id")),f=0;if(p.find("input[type=radio]").each(function(){this.checked&&(f=parseInt(this.value))}),e||(u+="<li>First name</li>"),t||(u+="<li>Last name</li>"),isValidUKPostcode(a)||(u+="<li>Valid UK postcode</li>"),$("#current-address-container").is(":hidden")&&1===d&&(n||i||(u+="<li>Address</li>")),l||(u+="<li>Book type preference</li>"),l!=m&&f===h&&(u+="<li>Your selected book preference is only available in English</li>"),u)return $(".button").show(),$(".inline-loader").hide(),void apprise("<p>Please make sure to enter the following information...</p>"+u);var v=location.pathname+"/save-details";$.post(v,{action:"save-details",first_name:e,last_name:t,address_postcode:a,address_line_1:n,address_line_2:i,address_city:o,county_id:r,country_id:s,book_type:l,book_type_name:c,opt_in:d,preferredLanguage:f},function(e){e.redirect?window.location.href=e.redirect:("success"!=e.message&&apprise("<p>Unable to save details - please try again</p>"),$(".button").show(),$(".inline-loader").hide())})}function addWhereCanWeFindYou(e){var t=document.getElementById("current-address-container"),a=document.getElementById("new-address-container"),n=document.getElementById("address_postcode");t.style.display="none",notYourAddress.style.display="none",a.style.display="block",n.value="",n.focus()}function isValidUKPostcode(e){if(e=null==e?"":String(e).trim(),""===e)return!1;var t="[abcdefghijklmnoprstuwyz]",a="[abcdefghklmnopqrstuvwxy]",n="[abcdefghjkpmnrstuvwxy]",i="[abehmnprvwxy]",o="[abdefghjlnpqrstuwxyz]",r="[abdefghjlnpqrst]",s="[abdefghjlnpqrstuwzyz]",l=new Array;l.push(new RegExp("^(bf1)(\\s*)([0-6]{1}"+r+"{1}"+s+"{1})$","i")),l.push(new RegExp("^("+t+"{1}"+a+"?[0-9]{1,2})(\\s*)([0-9]{1}"+o+"{2})$","i")),l.push(new RegExp("^("+t+"{1}[0-9]{1}"+n+"{1})(\\s*)([0-9]{1}"+o+"{2})$","i")),l.push(new RegExp("^("+t+"{1}"+a+"{1}?[0-9]{1}"+i+"{1})(\\s*)([0-9]{1}"+o+"{2})$","i")),l.push(/^(GIR)(\s*)(0AA)$/i),l.push(/^(bfpo)(\s*)([0-9]{1,4})$/i),l.push(/^(bfpo)(\s*)(c\/o\s*[0-9]{1,3})$/i);for(var c=0;c<l.length;c++)if(l[c].test(e))return l[c].exec(e),e=RegExp.$1.toUpperCase()+" "+RegExp.$3.toUpperCase(),e=e.replace(/C\/O\s*/,"c/o "),!0;return!1}function onPreferredLanguageSelect(e){var t=parseInt($(".preferredLanguage").attr("data-welsh-language-id"));e==t?($("#board-books").attr("disabled",!0),$(".english-available-only").show(),$("#longer-stories").attr("disabled",!0)):($("#board-books").attr("disabled",!1),$("#longer-stories").attr("disabled",!1),$(".english-available-only").hide())}function redirectCancellationPage(e){return"contact-us"===e?void(window.location.href="/contact-us"):void(window.location.href="/cancel-membership/"+e)}function showOrHideContainers(e,t){e.forEach(function(e){e.show()}),t.forEach(function(e){e.hide()})}function initBackToTop(e,t){var a=$("<a>",{id:"back-to-top",href:"#js-top"}),n=$("<i>",{"class":"icon icon-chevron-up"}),e=e;""!=e&&a.css("backgroundColor",e),""!=t&&a.text(t),a.appendTo("body"),n.appendTo(a),a.hide(),$(window).scroll(function(){$(this).scrollTop()>150?a.fadeIn():a.fadeOut()}),a.click(function(e){e.preventDefault(),$("body, html").animate({scrollTop:0},600)})}function showBulkResourceLinker(e){function t(){var e=n?"#bulk-resource-list":"#bulk-resource-list-resource-view",t=[];$.each(i.searchedResources,function(e,a){a.show!==!1&&(n?t.push('<option value="'+a.value+'" data-image-url="'+a.image_url+'">['+a.value+"] "+a.label+"</option>"):t.push('<div class="resource-view" data-resource-id="'+a.value+'"><img src="'+a.image_url+'">['+a.value+"] "+a.label+"</div>"))}),$(e).html(t.join("\n"))}var a=$('<div title="Linked Resources" class="container-fluid"><div class="row" id="resource-bulk-link-main"><div id="bulk-resource-left"><input type="text" placeholder="Enter resource ID or search term..." id="bulk-resource-search"><select multiple id="bulk-resource-list"></select></div><div id="bulk-resource-center"><input type="button" name="" id="add-bulk-resource" value="&gt;"><br><input type="button" name="" id="remove-bulk-resource" value="&lt;"></div><div id="bulk-resource-right"><select multiple id="bulk-resource-linked"></select></div></div></div>'),n=!0,i={linkedResources:{},searchedResources:{},selectedResources:{}},o=null,r=debounce(function(e){null!==o&&o.abort(),$("#bulk-resource-list, #bulk-resource-list-resource-view").html('<option class="italic text-gray-light">Loading...</option>'),o=$.post("/php/ajax/right_click_menu.php",{action:"getResources",searchTerm:$(this).val()},function(e){if("success"!==e.message)$("#bulk-resource-list, #bulk-resource-list-resource-view").html('<option class="italic text-gray-light">'+e.message+"</option>");else{i.searchedResources={};for(var a=0;a<e.resultsList.length;a++){var n=e.resultsList[a],o=i.linkedResources[n.value];o&&o.active===!0||(i.searchedResources[n.value]={value:n.value,label:n.label,image_url:n.image_url,show:!0})}t(),postComplete=!0}},"json")},450);$(document).on("keyup","#bulk-resource-search",r),a.dialog({create:function(t,o){$("#linkResource").parent().prev().css("z-index","1001"),$("#linkResource").parent().css("z-index","1001"),$.post("/php/ajax/right_click_menu.php",{action:"getLinkedResources",resourceId:e},function(e){field=a.find("#bulk-resource-linked"),e.array&&$.each(e.array,function(e,t){i.linkedResources[e]={active:!0,id:e,title:t.title,image:t.image_url},field.append($("<option />",{value:e}).text(t.title+" ("+e+")"))})},"json"),$("#add-bulk-resource").on("click",function(){var e=null;n?(e=a.find("#bulk-resource-list option:selected"),e.length&&(e.detach(),$("#bulk-resource-linked").append(e),e.each(function(){var e=$(this).val(),t=$(this).html(),a=$(this).data("imageUrl");i.linkedResources[e]={active:!0,id:e,title:t,image:a},i.searchedResources[e].show=!1}))):(e=a.find("#bulk-resource-list-resource-view .resource-view.selected"),e.length&&e.each(function(){var e=$(this).data("resourceId"),t=i.searchedResources[e],a=t.label,n=t.image_url;i.linkedResources[e]={active:!0,id:e,title:a,image:n},i.searchedResources[e].show=!1,$(this).detach(),$("#bulk-resource-linked-resource-view").append($(this)),$(this).removeClass("selected")}))}),$("#remove-bulk-resource").on("click",function(){var e=null;n?(e=a.find("#bulk-resource-linked option:selected"),e.remove(),e.each(function(){var e=$(this).val();i.linkedResources[e].active=!1})):(e=a.find("#bulk-resource-linked-resource-view .resource-view.selected"),e.length&&e.each(function(){var e=$(this).data("resourceId");i.linkedResources[e].active=!1,$(this).remove()}))})},close:function(){a.remove()},draggable:!1,modal:!0,resizable:!1,width:800,height:600,buttons:[{text:"List View",click:function(){n||(n=!0,$("#bulk-resource-list-resource-view").remove(),$("#bulk-resource-left").append('<select multiple id="bulk-resource-list"></select>'),$("#bulk-resource-right").html('<select multiple id="bulk-resource-linked"></select>'),$.each(i.linkedResources,function(e,t){t.active===!0&&$("#bulk-resource-linked").append('<option value="'+t.id+'" >'+t.title+"</option>")}),t(),$(".resource-view-button").removeClass("selected"),$(".list-view-button").addClass("selected"))},"class":"selected list-view-button"},{text:"Resource View",click:function(){n&&(n=!1,$("#bulk-resource-list").remove(),$("#bulk-resource-linked").remove(),$("#bulk-resource-right").append('<div id="bulk-resource-linked-resource-view"></div>'),$("#bulk-resource-left").append('<div id="bulk-resource-list-resource-view"></div>'),$.each(i.linkedResources,function(e,t){t.active===!0&&$("#bulk-resource-linked-resource-view").append('<div class="resource-view" data-resource-id="'+e+'"><img src="'+t.image+'" style="width: 100%">'+t.title+"</div>")}),t(),a.off("click",".resource-view"),a.on("click",".resource-view",function(){$(this).toggleClass("selected")}),$(".resource-view-button").addClass("selected"),$(".list-view-button").removeClass("selected"))},"class":"resource-view-button",style:"margin-right: 310px;"},{text:"Save","class":"ui-button-primary",click:function(){var t=[];a.find("#bulk-resource-linked option").each(function(){t.push($(this).val())}),a.find("#bulk-resource-linked-resource-view .resource-view").each(function(){t.push($(this).data("resourceId"))}),t=t.join(","),a.dialog("close"),a.remove();var n=$('<div title="Linking resource">Please wait...</div>');n.dialog({draggable:!1,modal:!0,resizable:!1,dialogClass:"no-close loadingDialog"}),$.post("/php/ajax/right_click_menu.php",{action:"bulkLinkResource",resourceId:e,linkId:t,status:1},function(e){if(n.dialog("close"),"success"!=e.message){var t=$('<div title="Error!">'+e.message+"</div>");t.dialog({draggable:!1,modal:!0,resizable:!1})}else location.reload()})}},{text:"Close",click:function(){$(this).dialog("close")}}],dialogClass:"bulk-link-resource-dialog"})}function capitaliseFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)}function toDataUrl(e,t){var a=new XMLHttpRequest;a.onload=function(){var e=new FileReader;e.onloadend=function(){t(e.result)},e.readAsDataURL(a.response)},a.open("GET",e),a.responseType="blob",a.send()}function setHorizontalScrollOnMegamenu(){var e=document.body.classList.contains("lang-dir-rtl"),t=document.getElementById("leftArrow"),a=document.getElementById("rightArrow"),n=document.getElementsByClassName("menuTab")[0],i=n.children.length,o=n.children[0].offsetWidth,r=function(){return document.getElementById("menu-wrapper").offsetWidth},s=r(),l=n.offsetWidth,c=function(){return Math.max(l-r(),0)},d=c(),u=(e?t:a).offsetWidth,p=function(){return Math.max(c(),0)},h=p(),m=(l-i*o)/(i-1),f=o+m,v=200,g=null;$(window).on("resize",function(){s=r(),d=c(),h=p();var n=Math.max(l-s,0),i=e?t:a;n<=0?i.classList.add("hidden"):i.classList.remove("hidden")});var _=function(){return parseFloat(n.style[e?"right":"left"])||0},y=function(){return-1*_()},w=function(){var n=y(),i=e?a:t,o=e?t:a;n<=u?(i.classList.add("hidden"),o.classList.remove("hidden")):n<h?(i.classList.remove("hidden"),o.classList.remove("hidden")):n>=h&&(i.classList.remove("hidden"),o.classList.add("hidden"))};0===d?(t.classList.add("hidden"),a.classList.add("hidden")):w();var b=function(t,a,i){var o=t-g,r=o/v;r=Math.min(r,1);var s=(a+i*r).toFixed(2)+"px";n.style[e?"right":"left"]=s,o<v&&requestAnimationFrame(function(e){b(e,a,i)}),w()},k=function(e,t){e=e||(new Date).getTime(),g=e;var a=_();b(e,a,t)};a.addEventListener("click",function(){requestAnimationFrame(function(t){k(t,(e?1:-1)*f)})}),t.addEventListener("click",function(){requestAnimationFrame(function(t){k(t,(e?-1:1)*f)})})}function showSharePopUp(e){var t=$("#overlay");t.show();var a=$(".payWithATweetPop");shareDownloadHtml?a=$(shareDownloadHtml):shareDownloadHtml=a.prop("outerHTML"),a.appendTo(document.body),a.addClass("popup-top"),""==a.find("input").val()&&a.find("input").show(),a.show(),a.center(),a.find(".dismiss").off().click(function(e){e.preventDefault(),a.fadeOut(function(){a.remove()}),t.fadeOut()}),a.find(".cloudsponge").find("button").click(function(){var n=a.find("input:visible").val(),i=a.attr("data-hash");"undefined"!=typeof cloudsponge&&(cloudsponge.init({noTracking:!0,browserContactCacheMin:0,selectAccount:!0,afterSubmitContacts:function(t,a,o){var r=showDialogLoader("Checking emails");emails=[];for(var s=0;s<t.length;s++){var l=t[s].__selectedMail__;emails.push(l)}for(var c=[],d=[],u=0,s=0;s<emails.length;s++)isEmailDisposable(emails[s],function(e,t){e.disposable?d.push(t):c.push(t),u++});var p=setInterval(function(){u===emails.length&&(clearInterval(p),c.length?$.post("/share/email",{emails:c,notvalid:d,data_hash:i,name:n},function(t,a,n){removeDialog(r);var o="",s=!1;if("undefined"==typeof t.valid)o+="<p>Oh dear! We couldn't find any valid emails to send!</p>",s=!0;else{o+="<p>Thanks for sharing Twinkl. Your accout has been updated with a FREE "+t.months_free+" month subscription!</p>",o+='<div class="alert alert-success"><strong>Invited</strong><ul>';for(var l=0;l<t.valid.length;l++)o+="<li>"+t.valid[l]+"</li>";o+="</ul></div>"}if("undefined"!=typeof t.used){o+='<div class="alert alert-info"><strong>Already invited</strong><ul>';for(var l=0;l<t.used.length;l++)o+="<li>"+t.used[l]+"</li>";o+="</ul></div>"}if("undefined"!=typeof t.invalid){o+='<div class="alert alert-warning"><strong>Invalid emails</strong><ul>';for(var l=0;l<t.invalid.length;l++)o+="<li>"+t.invalid[l]+"</li>";o+="</ul></div>"}var c={dialogClass:"shareTwinklThanks",afterShow:function(){$(".shareTwinklThanks").find(".ui-button.green").css({"background-color":"#769d33",color:"#ffffff"})}};$(window).width()>400&&(c.width=400);var d=[{text:"Let's get downloading!","class":"green",click:function(){e?window.location.replace(e):location.reload()}}];s&&(d=[{text:"Try again?","class":"green",click:function(){$(this).dialog("close"),showSharePopUp(e)}},{text:"No thanks",click:function(){$(this).dialog("close")}}]);var u=showDialogMessage("Share Twinkl",o,function(){i?window.location.replace("/sign-up"):s||(e?window.location.replace(e):location.reload())},d,c);$(".ui-widget-overlay").on("click",function(){u.dialog("close")})}):(removeDialog(r),showDialogMessage("Share Twinkl","Oh dear, no valid emails to share! Would you like to try again?",null,{Yes:function(){$(this).dialog("close"),$("#shareDownload").trigger("click")},No:function(){$(this).dialog("close")}})))},100)}}),a.remove(),t.hide(),cloudsponge.launch())})}function isEmailDisposable(e,t){var a=e.split("@"),n=a[0];a.length>1&&(n=a[1]);var i="https://open.kickbox.com/v1/disposable/",o=i+encodeURIComponent(n);$.ajax({url:o}).done(function(a){t(a,e)}).error(function(a){t({disposable:0},e)})}function returnTwinklVideoTag(e,t){var t=t||"t_video-560",e=e,a="",n="";return e=e.replace(/\.[^\.]+$/,""),n="https://images.twinkl.co.uk/tw1n/video/private/"+t+"/video/"+e,a+='<video controls autoplay style="width: 560px; height: 315px;">                <source src="'+n+'.mp4" type="video/mp4" />                <source src="'+n+'.webm" type="video/webm" />                <source src="'+n+'.ogv" type="video/ogg" />                Your browser does not support HTML5 video tags            </video>'}function showPopUpMessage(e,t,a,n,i){var o=t/2+20,r="top"==i||"bottom"==i?' style="left:'+o+'px"':"",s='<div id="popUpOverlay"></div><div id="popUpDivContainer"><div id="popUpBoxDiv" style="top:'+n+"px;left:"+a+"px;width:"+t+'px"><div class="content">'+e+'</div><div class="bottomFormHolder"><button class="button pink gotIt">Got it!</button></div><div id="popUpBoxArrow" class="'+i+'"'+r+"></div></div></div>";$("body").prepend(s),$("#popUpOverlay").show(),$("#popUpDivContainer").show(),$("#popUpOverlay, #popUpBoxDiv button").click(function(){$("#popUpOverlay").remove(),$("#popUpDivContainer").remove()})}function showLoader(){var e=$("#resources").height(),t=$(".searchLoader");e&&t.height(e),t.show()}function hideLoader(){$(".searchLoader").hide()}function hideNotice(){return url="../php/ajax/hideNotice.php",url=encodeURI(url),$.post(url,function(e){$("#notice").animate({bottom:"-150px",opacity:0},500,"easeInQuad")}),!1}function showMoreRewardActions(){$(".more_reward_actions").slideDown(),$(".rewards_button").fadeOut("fast")}function showPastEvents(){$("html").animate({scrollTop:$(".event_past:eq(0)").offset().top},500,"easeOutExpo",function(){$("#show_past_events").fadeOut(),$(".event_past").css("opacity","0").show().animate({opacity:1},500)})}function CreateBookmarkLink(){if(title="Twinkl",url="http://www.twinkl.co.uk",window.sidebar)window.sidebar.addPanel(title,url,"");else if(window.external)window.external.AddFavorite(url,title);else if(window.opera&&window.print)return!0}function showContactForm(){var e=$("#contact_form");e.slideDown("fast"),$("html, body").animate({scrollTop:e.offset().top},1500)}function showTerms(){$("#terms").slideToggle("fast")}function GetXmlHttpObject(){var e=null;try{e=new XMLHttpRequest}catch(t){try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){e=new ActiveXObject("Microsoft.XMLHTTP")}}return e}function validate_schoolpremium_form(){return msg="",valid=!0,$("#authorised").attr("checked")||(valid=!1,msg+="<li>You must be authorised to renew the premium subscription for your school</li>"),$("#po").val()||(valid=!1,msg+="<li>You must enter a purchase order number</li>"),$("#name").val()||(valid=!1,msg+="<li>You must enter your name</li>"),$("#position").val()||(valid=!1,msg+="<li>You must enter your position</li>"),$("#email").val()&&isEmailValid(!$("#email").val())||(valid=!1,msg+="<li>You must enter a valid email address</li>"),$("#agree_terms").attr("checked")||(valid=!1,msg+="<li>You must agree to our terms and conditions</li>"),valid||(msg="<h2>Sorry, but there were a few problems<br />with your form entries...</h2><ul>"+msg+"</ul>",apprise(msg)),valid}function validate_contact_form(){return msg="",valid=!0,""==document.contact_form.message.value&&(msg+="You must enter a message.\n",valid=!1),""==document.contact_form.contact_name.value&&(msg+="You must enter your name.\n",valid=!1),""==document.contact_form.captcha_code.value&&(msg+="You must enter the security code.\n",valid=!1),""==document.contact_form.contact_email.value&&(msg+="You must enter your email address.\n",valid=!1),""!=document.contact_form.contact_email.value&&(apos=document.contact_form.contact_email.value.indexOf("@"),dotpos=document.contact_form.contact_email.value.lastIndexOf("."),(apos<1||dotpos-apos<2)&&(msg+="The email address entered is not valid.\n",valid=!1)),0==valid&&apprise(msg),valid}function isEmailValid(e){return!!/^(.+)@(.+){2,}\.(.+){2,}$/.test(e)}function requestSent(){4==xmlHttp.readyState&&(document.getElementById("request_form").innerHTML=xmlHttp.responseText)}function sendRequestForm(){var e="",t=!0,a=$("#name").val().trim(),n=$("#email").val().trim(),i=$("#request").val().trim(),o=$("#type").val();if(a||(t=!1,e+="<li>Please fill in your name.</li>\n"),n||(t=!1,e+="<li>Please fill in your email so we can get back to you.</li>\n"),i||(t=!1,e+="<li>Please tell us what resource you'd like to suggest.</li>\n"),o||(t=!1,e+="<li>Please tell us what type of resource you'd love to see.</li>\n"),isEmailValid(n)||(t=!1,e+="<li>Please make sure that your email is valid</li>"),t){var r=$("#user_id").val();""==r&&(r="not logged in");var s=$("#age").val(),l=$("#curric").val(),c=$("#similar").val(),d=$("#differentiation").val(),u=$("#language").val(),p="";$("#phrase").length&&(p=$("#phrase").val()),""==p&&$("#search_term").length&&(p=$("#search_term").val()),$("#send_request").html("Sending...");var h="/php/ajax/sendRequestForm.php";$.post(h,{name:a,email:n,type:o,age:s,request:i,user_id:r,phrase:p,curric:l,similar:c,differentiation:d,language:u},function(e){$("#suggestAResourceForm h2").remove(),$("#send_request").parents("form:first").replaceWith(e)})}else e="<ul>"+e+"</ul>",apprise(e)}function sendSuggestAChangeForm(){var e="",t=!0;if($("#name").val()||(t=!1,e+="<li>Please fill in your name.</li>\n"),$("#email").val()||(t=!1,e+="<li>Please enter your email address.</li>\n"),isEmailValid($("#email").val())||(t=!1,e+="<li>Please make sure your email address is correct.</li>\n"),$("#suggestion").val()||(t=!1,e+="<li>Please tell us what change you'd like to suggest.</li>\n"),t){var a=$("#name").val(),n=$("#resource_id").val(),i=$("#user_id").val(),o=$("#email").val(),r=$("#suggestion").val(),s=$("#resource_url").val();if($("#send_suggestion").html("Sending..."),xmlHttp=GetXmlHttpObject(),null==xmlHttp)return void apprise("Your browser does not support AJAX!");var l={name:a,email:o,suggestion:encodeURIComponent(r),user_id:i,resource_id:n,resource_url:s,action:"send"};jQuery.post("../php/ajax/sendchangeresourceform.php",l,function(e){$("#request_form").html(e)})}else e="<ul>"+e+"</ul>",apprise(e)}function validate_search_form(){return valid=!0,""!=document.search_form.lijit_q.value&&"Search lovely resources..."!=document.search_form.lijit_q.value||(valid=!1),0==valid&&apprise("You didn't tell us what you're looking for..."),valid}function validate_signup_form(){agree_terms=$("#agree_terms").is(":checked"),email=$("#email_address").val(),email2=$("#email_address2").val(),username=$("#username").val(),password1=$("#password1").val(),password2=$("#password2").val();var e="",t=!0;if(""!=$("#username_response").html()&&(t=!1,e+="<li>Please choose a different username.</li>"),""!=$("#email_response").html()&&(t=!1,e+="<li>Please supply a different email address.</li>"),email?isEmailValid(email)||(t=!1,e+="<li>The email you entered doesn't appear to be correct.</li>"):(t=!1,e+="<li>Your email is missing.</li>"),email2?isEmailValid(email2)||(t=!1,e+="<li>The email you repeated doesn't appear to be correct.</li>"):(t=!1,e+="<li>You didn't repeat your email address.</li>"),username){username.length<6&&(t=!1,e+="<li>Your username must be at least 6 characters long.</li>");var a=new Array(" ",'"',"!","£","$","%","^","&","*","(",")","+","=","{","}","[","]",":",";","@","'","#","~","?","/","\\","|","¬","`","<",">",","),n=!0;for(x in a)character=a[x],username.indexOf(character)>=0&&(n=!1);0==n&&(t=!1,e+="<li>Your username must not contain any special characters including spaces, apart from . - or _</li>")}else t=!1,e+="<li>You didn't enter a username.</li>";return password1||(t=!1,e+="<li>You didn't enter a password.</li>"),password2||(t=!1,e+="<li>You didn't repeat your password.</li>"),password1&&password2&&password1!=password2&&(t=!1,e+="<li>Oh no, your passwords don't match.</li>"),email&&email2&&email!=email2&&(t=!1,e+="<li>Oh no, your emails don't match.</li>"),agree_terms||(t=!1,e+="<li>You must agree to our terms and conditions.</li>"),0==t&&(e="<h1>Uh oh!</h1><p>There were a few problems with your entries...</p><ul>"+e+"</ul>",apprise(e)),t}function subscribedToMailing(){4==xmlHttp.readyState&&(document.getElementById("mailing_list").innerHTML=xmlHttp.responseText)}function validate_photo_form(){return valid=!0,$("#imagefile").val()&&0!=$("#category_id").attr("selectedIndex")||(valid=!1),0==valid&&apprise("Please make sure you've filled in every field."),valid}function getSelectResource(){4==xmlHttp.readyState&&(document.getElementById("download_result").innerHTML=xmlHttp.responseText)}function IsToolbarVisible_session(){var e=new TPI.Toolbar("CT2676929"),t=e.IsVisible();if(t.returnValue){if(xmlHttp=GetXmlHttpObject(),null==xmlHttp)return void apprise("Your browser does not support AJAX!");var a="../php/ajax/setToolbarSession.php";a=a+"?sid="+Math.random(),xmlHttp.onreadystatechange=sessionSet,xmlHttp.open("GET",a,!0),xmlHttp.send(null)}else{if(xmlHttp=GetXmlHttpObject(),null==xmlHttp)return void apprise("Your browser does not support AJAX!");var a="../php/ajax/unsetToolbarSession.php";a=a+"?sid="+Math.random(),xmlHttp.onreadystatechange=sessionSet,xmlHttp.open("GET",a,!0),xmlHttp.send(null)}}function sessionSet(){4==xmlHttp.readyState&&history.go(0)}function recommendBook(e,t){
if(xmlHttp=GetXmlHttpObject(),null==xmlHttp)return void apprise("Your browser does not support AJAX!");var a="../php/ajax/recommendBook.php";a=a+"?category_id="+e,a=a+"&book_id="+t,a=a+"&sid="+Math.random(),xmlHttp.onreadystatechange=bookRecommended,xmlHttp.open("GET",a,!0),xmlHttp.send(null)}function bookRecommended(){4==xmlHttp.readyState&&(element=xmlHttp.responseText,document.getElementById(element).style.background="url('"+imageAssetBase+"/images/recommended_book.gif') no-repeat")}function showSignIn(){document.getElementById("signin").style.display="block"}function hideSignIn(){document.getElementById("signin").style.display="none"}function validate_signin_form(){return valid=!0,""!=document.signin_form.username.value&&""!=document.signin_form.password.value||(valid=!1),0==valid&&apprise("Please make sure you've filled in both your username and password!"),valid}function getCheckedValue(e){if(!e)return"";var t=e.length;if(void 0==t)return e.checked?e.value:"";for(var a=0;a<t;a++)if(e[a].checked)return e[a].value;return""}function validate_stockavatar_form(){return radvalue=getCheckedValue(document.forms.stockavatar_form.elements.stock_avatar),valid=!0,""==radvalue&&(valid=!1),0==valid&&apprise("<h2>Erm...</h2>Did you forget to select which picture you'd like?"),valid}function validate_avatar_form(){return valid=!0,""==document.getElementById("imagefile").value&&(valid=!1),0==valid&&apprise("<h2>Oh dear...</h2>Did you forget to choose a picture by using the 'browse' button?"),valid}function enableDisableResourceReviewSubmitOnStart(e,t,a,n,i){var o=void 0!==$("#ratingSubDiv .starRating").attr("data-feature-flag");o&&!t||t<=3?(i===!1&&a.html(a.data("review-text")),n.val().length<e&&a.prop("disabled",!0).addClass("border-none")):a.prop("disabled",!1).removeClass("border-none")}function enableResourceReviewSubmitBasedOnChar(e,t,a,n,i){n.on("input",function(){var n=$(this).val(),o=n.length;i===!1&&(t>3&&o>0?a.html(a.data("review-text")):t>3&&0===o&&a.html(a.data("rating-text")));var r=a.data("track");o<e&&t<=3?(a.prop("disabled",!0).addClass("border-none"),r&&(r.reviewCommentFlag=!1,a.attr("data-track",JSON.stringify(r)))):(a.prop("disabled",!1).removeClass("border-none"),r&&(r.reviewCommentFlag=!0,a.attr("data-track",JSON.stringify(r))))})}function resourceReviewFeedbackModal(){var e=$('#review-submitted[data-review-type="resource"]');e.show(),e.center(),$("#overlay").show(),e.on("click",".continue",function(){e.hide(),$("#overlay").hide()})}function submitComment(e,t,a){if("reply"==e)if(""===$('li.comment[data-comment-id="'+t+'"] .replyText').val().trim())apprise("<h2>You forgot to enter your reply.</h2>");else{var n=$('li.comment[data-comment-id="'+t+'"] .replyButton'),i=$('li.comment[data-comment-id="'+t+'"] .replyForm');n.after('<img class="loading" src="'+imageAssetBase+'/images/loading.gif" style="float:right;margin:5px;width:20px;">'),n.hide();var o=$('li.comment[data-comment-id="'+t+'"] .replyText').val();o=o.replace(new RegExp("\\n","g"),"<br />"),$.ajax({type:"GET",url:"/php/ajax/submitComment.php",dataType:"json",data:"comment="+o+"&type="+$("input#comment_type").val()+"&item_id="+$("input#comment_item_id").val()+"&url="+encodeURI(window.location.href)+"&parent_id="+t+"&supportChecked=1",success:function(e){if(0==$("#book_page").length){var t=$('body[data-page-type="blog"]').length>0?$("#comments_container"):$(".tabContent.selected");t.html(e.html),i.length&&i.html("")}else $(".tabContent.selected").html(e.html);$(".loading").remove()}})}else if("editRating"==e){if(null==a)return;var r=parseInt(a.resourceId);if(isNaN(r))return void apprise("<h2>Resource ID is missing.</h2>");var s=a.reason;s=s.replace(/\n/g,"<br />"),$.ajax({type:"GET",url:"/php/ajax/submitComment.php",dataType:"json",data:"action=editRating&item_id="+r+"&comment="+s+"&comment_id="+a.commentId+"&parent_id="+a.commentParentId+"&type="+a.commentType+"&rating="+a.rating+"&url="+encodeURI(window.location.href)+"&supportChecked=1",success:function(e,t,n){null!=a.successCallback&&a.successCallback.apply(this,Array.from(arguments))},error:function(e,t,n){null!=a.errorCallback&&a.errorCallback.apply(this,Array.from(arguments))}})}else{var l=$(".rating").length>0?$(".rating").attr("data-rating-number"):0,c="book"===e?$("#book_comment"):$("#comment"),d=c.attr("contenteditable"),u=c.attr("placeholder");"undefined"!=typeof d&&d!==!1?comment=c.html():comment=c.val();var p=null;null!=comment&&(comment=comment.trim(),p=comment.toLowerCase());var h=["comment on this resource...","comment on this book...","comment on this event...","comment on this display...","comment on this news...","comment on this user...","comment on this shared resource...","comment on this resource pack..."];if("review"===e){if((null==p||""===p||h.indexOf(p)!==-1||p===u.toLowerCase())&&parseInt(l)<=3)return void apprise("<h2>Uh oh!</h2>You didn't enter a review!")}else if(null==p||""===p||h.indexOf(p)!==-1||p===u.toLowerCase())return void apprise("<h2>Uh oh!</h2>You didn't enter a review!");if(0==l&&$(".rating").length>0&&"support"!=e&&"review"!=e)return void apprise("<h2>You forgot to rate!</h2>Please rate this resource to leave a review!");var n=$("#submitComment");"support"===e?n=$("#requestSupport"):"review"!==e&&"blog"!==e&&"book"!==e||(n=$("#postReview")),n.hide(),$(".loading").remove(),n.after('<img class="loading" src="'+imageAssetBase+'/images/loading.gif" style="float:right;margin:10px;">');var m=n.attr("data-support-check"),f=comment;f=f.replace(new RegExp("\\n","g"),"<br />"),limit=$("#comments > li").size();var v=$("#subscribe").is(":checked")?1:0,g=$("#alertUserResource").is(":checked")?1:0,_=0,y=$("#comment_box").find("#commentId");y.length&&(_=y.val());var w={comment:f,limit:limit,type:$("#comment_type").val(),item_id:$("#comment_item_id").val(),sid:Math.random(),subscribe:v,url:encodeURI(window.location.href),rating:l,alert:g,othertype:e,supportChecked:m,commentStarRatingId:_};$.get("/php/ajax/submitComment.php",w,function(t){if("success"!==t.message)return void apprise(t.message);if(t.support){var a,n,i;t.request_a_version?(a="<p>We noticed your comment may be requesting a different version of this resource ...</p>",n="Yes, I'd like to request a different version",i="It's a normal comment"):t.url?(a='<p>We noticed your comment may be a support request...</p><a id="faqPage" target="_blank" href="/help/'+t.url+'">Our FAQ page may be able to help you, click here!</a>',n="Send it to support please",i="It's a normal comment"):(a="We noticed your comment may be a support request...",n="Yes, send it to support please",i="No, it's a normal comment");var o='<div class="appriseInner"> '+a+'<div class="aButtons"><button class="ok" value="ok">'+n+'</button><button class="cancel" value="cancel">'+i+"</button></div></div>",r=$(o);return void r.dialog({resizable:!1,width:460,modal:!0,draggable:!1,close:function(){r.dialog("destroy").remove()},open:function(){$(".ui-dialog-titlebar").css("display","none"),$("#faqPage").css("color","#2a97d4"),$("#faqPage").on("click",function(e){$("#comments_container").remove(),$(".tabContent.selected").prepend(t.html),r.dialog("destroy").remove()}),$(".aButtons").on("click",".ok",function(e){if(t.request_a_version){var a=$("#request-version-form");a.exists()&&(r.dialog("destroy").remove(),a.submit(function(){$("#rvf_user_comment").val(comment)}),a.submit())}else r.dialog("destroy").remove(),$("#requestSupport").attr("data-support-check",1).trigger("click")}),$(".aButtons").on("click",".cancel",function(e){r.dialog("destroy").remove(),$("#postReview").attr("data-support-check",1).trigger("click")})}})}if($(".loading").remove(),$(".tabContent.selected").html(t.html),Resource.commentManager.init(),""!==t.modal&&($("#footer").after(t.modal),resourceReviewFeedbackModal()),"blog"==e){var s="star_off_large.png";0==$("#comments").length?$("#comments_container").append(t.html):($("#comment_thankyou").remove(),$("#comments").html(t.html)),$(".starRating #star1").add(".starRating #star2").add(".starRating #star3").add(".starRating #star4").add(".starRating #star5").css("background",'url("'+imageAssetBase+"/images/"+s+'") 0 6px no-repeat')}var l=document.getElementById("comment");null!==l&&(l.value=""),$("#emojiIconKeyboard").hide(),commentStarted=!1,$("#first_comment").css("display","none"),$("#first_comment").slideDown("slow")},"json")}}function submitBookComment(){}function submitIdea(e,t){if("reply"==e)if(""==$('li.idea[data-idea-id="'+t+'"] .replyText').val())apprise("<h2>You forgot to enter your reply.</h2>");else{var a=$('li.idea[data-idea-id="'+t+'"] .replyText').val();a=a.replace(new RegExp("\\n","g"),"<br />"),$.ajax({type:"GET",url:"/php/ajax/submitComment.php",data:"comment="+a+"&type="+$("input#idea_type").val()+"&item_id="+$("input#idea_item_id").val()+"&url="+encodeURI(window.location.href)+"&parent_id="+t+"&tab_type=ideas&supportChecked=1",dataType:"json",success:function(e){$("#ideas_container").html(e.html)}})}else if($("#idea").val()){if(var_comment=$("#idea").val(),var_comment=var_comment.replace(new RegExp("\\n","g"),"<br />"),limit=$("#ideas > li").size(),xmlHttp=GetXmlHttpObject(),null==xmlHttp)return void apprise("Your browser does not support AJAX!");var n=$("#idea_type").val(),i=$("#idea_item_id").val(),o=encodeURI(window.location.href),r=$("#ideas_subscribe").is(":checked")?1:0;$.ajax({type:"GET",url:"/php/ajax/submitComment.php",dataType:"json",data:{comment:var_comment,limit:limit,type:n,item_id:i,url:o,subscribe:r,tab_type:"ideas",supportChecked:1},success:function(e){$("#ideas_container").html(e.html),$("#first_idea").css("display","none").slideDown("slow")}})}else apprise("<h2>Uh oh!</h2>You didn't enter your idea!")}function commentSubmit(){4==xmlHttp.readyState&&(response=xmlHttp.responseText,$(".tabContent.selected").html(response),commentStarted=!1,$("#first_comment").css("display","none").slideDown("slow"))}function moreComments(){if(limit=$("#comments").find("> li").size(),limit+=5,xmlHttp=GetXmlHttpObject(),null==xmlHttp)return void apprise("Your browser does not support AJAX!");var e="../php/ajax/moreComments.php?limit="+limit;e=e+"&type="+$("input#comment_type").val(),e=e+"&item_id="+$("input#comment_item_id").val(),e=e+"&sid="+Math.random(),xmlHttp.onreadystatechange=commentsMorededed,xmlHttp.open("GET",e,!0),xmlHttp.send(null)}function commentsMorededed(){4==xmlHttp.readyState&&(response=xmlHttp.responseText,document.getElementById("comments_container").innerHTML=response,$(".tabContent").animate({scrollTop:$("#scroll_comment").offset().top},1500))}function reviewComment(e,t){var e=e,t=t;if(!reviewCommentAjax){reviewCommentAjax=!0,0==e&&apprise("No comment ID available. Please reload the page to try again."),""==t&&apprise("No comment ID available. Please reload the page to try again.");var a=$("#comment-"+e+" .review"),n=$('<img src="'+imageAssetBase+'/images/popup_login_loader.gif" class="loader" />');$(this).after(n),$.post("/php/ajax/reviewComment.php",{comment_id:e,response:t},function(e){"success"!==e.message?apprise(e.message):(e.html?a.html(e.html):a.animate({opacity:0},500,function(){a.html("Thanks for your feedback!"),a.animate({opacity:1},500)}),reviewCommentAjax=!1)},"json")}}function reportComment(e,t){var a='<div class="generic_pop"><h3>Are you sure you want to report this comment?</h3><div class="bottomFormHolder"><button id="report" class="button blue">Report</button><button id="close" class="button pink">Close</button></div></div>';$("#overlay").show(),$("body").append(a),$(".generic_pop").css("height","130px"),center=function(){var e=$(window).height()/2-$(".generic_pop").height()/2+$(window).scrollTop(),t=$(window).width()/2-$(".generic_pop").width()/2;$(".generic_pop").css({top:e,left:t})},center(),$(".generic_pop #report").click(function(){xmlHttp=GetXmlHttpObject();var a=$(this).parents(".generic_pop");if(null==xmlHttp)return void apprise("Your browser does not support AJAX!");if("ideas"==t){limit=$("#ideas > li").size();var n=$("#idea_type").val(),i=$("#idea_item_id").val()}else{limit=$("#comments > li").size();var n=$("#comment_type").val(),i=$("#comment_item_id").val()}$.ajax({type:"GET",url:"/php/ajax/reportComment.php",data:{comment_id:e,limit:limit,type:n,item_id:i,tab_type:t},success:function(e){$(".tabContent.selected").html(e),$("#overlay").hide(),a.remove()}})}),$(".generic_pop #close").click(function(){$("#overlay").hide(),$(this).parents(".generic_pop").remove()})}function like(e,t,a){element_id="#like_"+e+"_"+t,load_url="../php/ajax/like.php?type="+e+"&id="+t+"&mini="+a,$(element_id).load(load_url)}function unlike(e,t,a){element_id="#like_"+e+"_"+t,load_url="../php/ajax/unlike.php?type="+e+"&id="+t+"&mini="+a,$(element_id).load(load_url)}function moreLikers(e,t){element_id="#more_likers_"+e+"_"+t,element_id2="#show_more_likers_"+e+"_"+t,$(element_id2).hide(),$(element_id).fadeIn()}function validate_event_form(){return valid=!0,msg="",$("#title").val()||(valid=!1,msg+="<li>The title of the event</li>"),0==$("#month").attr("selectedIndex")&&(valid=!1,msg+="<li>Month of the event</li>"),$("#description").val()||(valid=!1,msg+="<li>A brief description of the event</li>"),0==valid&&(msg="<p>You forgot to fill in some fields...</p>\n<ul>"+msg+"</ul>",apprise(msg)),valid}function addFriend(e){load_url="../php/ajax/addFriend.php?user_id="+e,$("#friend_status").load(load_url)}function unFriend(e){load_url="../php/ajax/unFriend.php?user_id="+e,$("#friend_status").load(load_url)}function showMoreFriends(){$("#friends_more").hide(),$(".hide").fadeIn()}function validate_shared_form(){valid=!0,msg="";var e=$("#resource_file").val().split(".").pop().toLowerCase();return $.inArray(e,["doc","docx","pub","pubx","pdf","ppt","pptx"])==-1&&(valid=!1,msg+="<li>The file must be a Word document, Powerpoint presentation, Publisher document, or a PDF</li>"),$("#resource_file").val()||(valid=!1,msg+="<li>The file to upload</li>"),$("#title").val()||(valid=!1,msg+="<li>Title of the resource</li>"),$("#description").val()||(valid=!1,msg+="<li>A brief description of the resource</li>"),$("#useful_for").val()||(valid=!1,msg+="<li>What your resource is useful for</li>"),0==$("#category_id").attr("selectedIndex")&&(valid=!1,msg+="<li>Resource category</li>"),0==valid&&(msg="<p>You didn't fill in some fields correctly...</p>\n<ul>"+msg+"</ul>",apprise(msg)),valid}function insertSharedResource(){return valid=!0,msg="",$("#filename").val()||(valid=!1,msg+="<li>The file to upload</li>"),$("#title").val()||(valid=!1,msg+="<li>Title of your resource</li>"),$("#description").val()||(valid=!1,msg+="<li>A brief description</li>"),$("#useful_for").val()||(valid=!1,msg+="<li>What the resource is useful for</li>"),0==$("#category_id").attr("selectedIndex")&&(valid=!1,msg+="<li>Resource category</li>"),valid?(url="../php/ajax/insertSharedResource.php?filename="+$("#filename").val()+"&title="+$("#title").val()+"&description="+$("#description").val()+"&useful_for="+$("#useful_for").val()+"&category_id="+$("#category_id").val(),url=encodeURI(url),$("#submit_shared").load(url)):(msg="You forgot to fill in some important bits...<ul>"+msg+"</ul>",apprise(msg)),valid}function insertSharedResource_new(){return valid=!0,msg="",$("#filename").val()||(valid=!1,msg+="<li>The file to upload</li>"),$("#title").val()||(valid=!1,msg+="<li>Title of your resource</li>"),$("#description").val()||(valid=!1,msg+="<li>A brief description</li>"),$("#useful_for").val()||(valid=!1,msg+="<li>What the resource is useful for</li>"),0==$("#category_id").attr("selectedIndex")&&(valid=!1,msg+="<li>Resource category</li>"),valid?(url="../php/ajax/insertSharedResource_new.php?filename="+$("#filename").val()+"&title="+$("#title").val()+"&description="+$("#description").val()+"&useful_for="+$("#useful_for").val()+"&category_id="+$("#category_id").val(),url=encodeURI(url),$("#submit_shared").load(url)):(msg="You forgot to fill in some important bits...<ul>"+msg+"</ul>",apprise(msg)),valid}function checkIfUsernameExists(){username=$("#username").val();var e="https://www.twinkl.co.uk/php/ajax/checkIfUsernameExists.php?username="+username;e=encodeURI(e),$("#username_response").load(e,function(e){""!=e?$("#username_response").slideDown("fast"):$("#username_response").slideUp("fast")})}function checkIfEmailExists(){email=$("#email_address").val();var e="https://www.twinkl.co.uk/php/ajax/checkIfEmailExists.php?email="+email;e=encodeURI(e),$("#email_response").load(e,function(e){""!=e?$("#email_response").slideDown("fast"):$("#email_response").slideUp("fast")})}function validate_details_form(){email=$("#email_address").val();var e="",t=!0,a=$("#otherIdArray").val(),n=a.split(","),i=$("#career").val();return email?isEmailValid(email)||(t=!1,e+="<li>The email you entered doesn't appear to be correct.</li>"):(t=!1,e+="<li>Your email is missing.</li>"),password=$("input[type=password]"),password.length>0&&(password=password.val(),password||(t=!1,e+="<li>Please enter your current password!</li>")),"chooseCareer"!=$("#career").val()&&0!=$("#career").val()&&""!==$("#career").val()||(t=!1,e+="<li>Please choose a career.</li>"),n.includes(i)&&""===$("#career_other").val()&&(t=!1,e+="<li>Please specify your career.</li>"),"chooseCounty"==$("#county").val()&&"1"!=$("#county").attr("noshow")&&(t=!1,e+="<li>Please choose a county.</li>"),0==t&&(e="<h1>Uh oh!</h1><p>There was a problem...</p><ul>"+e+"</ul>",apprise(e)),t}function validate_password_retrieval_form(){if(valid=!0,$("#email_address").val()&&isEmailValid($("#email_address").val())||(valid=!1),!valid){var e=document.getElementById("error");e&&(e.classList.remove("hidden-error-message"),e.classList.add("error-message"))}return valid}function checkPasswordResetInput(){if($(".error-message").length>0){var e=document.getElementById("error");e&&(e.classList.remove("error-message"),e.classList.add("hidden-error-message"))}}function validate_book_form(){request=$("#request").val(),author=$("#author").val();var e="",t=!0;return 0==$("#book_category_id").attr("selectedIndex")&&(t=!1,e+="<li>Please choose a category for the book.</li>"),request||(t=!1,e+="<li>You didn't tell us which book you'd like to suggest.</li>"),author||(t=!1,e+="<li>You didn't tell us who the author is.</li>"),0==t&&(e="<h1>Uh oh!</h1><p>There was a problem...</p><ul>"+e+"</ul>",apprise(e)),t}function validate_password_form(e){password1=$("#password1").val(),password2=$("#password2").val(),old_password=$("#old_password").val();var t="",a=!0;return password1||(a=!1,t+="<li>You didn't enter a new password.</li>"),password2||(a=!1,t+="<li>You didn't repeat your new password.</li>"),password1&&password2&&password1!=password2&&(a=!1,t+="<li>Oh no, your passwords don't match.</li>"),e||old_password||(a=!1,t+="<li>You didn't enter your current password.</li>"),0==a&&(t="<h1>Uh oh!</h1><p>There were a few problems with your entries...</p><ul>"+t+"</ul>",apprise(t)),a}function addToBasket(e,t,a){""!=e&&void 0!=e||(e=$("#quantity").val()),e=parseInt(e),e<1&&(e=1),""!=t&&void 0!=t||(t=$("#product_id").val()),""!=a&&void 0!=a||(a=$("#type_id").val()),url="../php/ajax/addToBasket.php?quantity="+e+"&product_id="+t+"&type_id="+a,url=encodeURI(url),$("#basket_checkout").html('<img src="'+imageAssetBase+'/images/user_loading.gif" alt="Loading" class="loader" /> Adding'),$("#basket_wrapper").load(url,function(){window.location="/checkout"})}function changeBasketQuantity(e,t,a){var n=$("#basket_checkout");e=parseInt(e),"+1"==e||"-1"==e?(current_quantity=$("#quantity_"+t+"-"+a).val(),current_quantity=parseInt(current_quantity),new_quantity=current_quantity+e):new_quantity=e,url="/php/ajax/updateBasket.php?quantity="+new_quantity+"&type_id="+t+"&item_id="+a,url=encodeURI(url),$("#quantity_"+t+"-"+a).replaceWith('<img src="'+imageAssetBase+'/images/loading.gif" alt="Loading" class="checkout_loader" />'),$("#checkout_wrapper").load(url,function(){$("#order_terms_wrapper").show(),$("#checkout_confirm_basket").show(),n.html('<img src="'+imageAssetBase+'/images/user_loading.gif" alt="Loading"/> Updating'),url="/php/ajax/refreshMiniBasket.php",url=encodeURI(url),$("#basket_wrapper").load(url,function(){n.html("Check Out"),$("#order_terms_wrapper").show()})})}function checkout(){document.checkout_form.submit(),$("#checkout_wrapper").fadeTo("slow",.2)}function showDashyExtra(e){$("#overlay").fadeTo(500,.7),$(".dashy_extra").hide(),$("#"+e).slideDown(),$("html, body").animate({scrollTop:$("#"+e).offset().top},1500,"easeOutExpo")}function closeDashyExtra(){$(".dashy_extra").slideUp(function(){$("#overlay").fadeOut(500)})}function validate_mailing_form(){return valid=!0,email=$("#ymlp_email").val(),email&&isEmailValid(email)||(valid=!1),0==valid?apprise("Please make sure you've filled in your email address correctly."):(url="../php/ajax/mailingListReward.php",url=encodeURI(url),$.post(url)),valid}function getFacebookReward(){url="../php/ajax/facebookReward.php",url=encodeURI(url),$.post(url)}function getTwitterReward(){url="../php/ajax/twitterReward.php",url=encodeURI(url),$.post(url)}function sendInviteEmails(){var e=new Array;if(valid=!0,msg="",$("#invite_emails > input").each(function(){email=!1,email=$(this).val(),email&&isEmailValid(email)&&e.push(email)}),0==e.length&&(valid=!1,msg+="You didn't enter any valid emails!<br />"),valid){var t=$("#invite_emails");t.html('<img src="'+imageAssetBase+'/images/loading_small.gif" alt="Loading" />'),url="/php/ajax/sendEmailInvites.php?emails=";for(x in e)url+=e[x]+"!";url=url.slice(0,-1),t.load(url)}else apprise(msg)}function studentSignUp(){valid=!0,first_name=$("#student_first_name").val(),last_name=$("#student_last_name").val(),place_of_study=$("#place_of_study").val(),tutor_name=$("#tutor_name").val(),tutor_email=$("#tutor_email").val(),country=$("#country").val(),nus_number=$("#nus_number").val(),course_end=$("#course_end").val(),first_name&&last_name&&place_of_study&&tutor_name&&tutor_email&&country&&course_end||(valid=!1),valid?isEmailValid(tutor_email)?(url="http",url+="redesign.twinkl.it"==document.domain?"":"s",url+="://"+document.domain+"/php/ajax/studentSignUp.php?first_name="+first_name+"&last_name="+last_name+"&place_of_study="+place_of_study+"&tutor_name="+tutor_name+"&tutor_email="+tutor_email+"&country="+country+"&nus_number="+nus_number+"&course_end="+course_end,url=encodeURI(url),$("#student_form").load(url)):apprise("Please make sure the email address entered is correct."):apprise("Please make sure all fields are complete.")}function createFav(e,t){var a="";valid=!0,new_folder_id=$("#folder_id").val(),"checked"==$("#remind_me").attr("checked")?($("#fav_date_year").val()&&$("#fav_date_month").val()&&$("#fav_date_day").val()||(valid=!1,a+="<li>Please fill in the date correctly</li>"),reminder_date=$("#fav_date_year").val()+"-"+$("#fav_date_month").val()+"-"+$("#fav_date_day").val()):reminder_date="",valid?(url="../php/ajax/createFav.php?type_id="+e+"&item_id="+t+"&folder_id="+new_folder_id+"&reminder_date="+reminder_date,url=encodeURI(url),$("#fav_wrapper").load(url),$("#fav_menu").hide(),$("#overlay").hide()):(a="<p>There were a few problems you'll need to correct...</p><ul>"+a+"</ul>",apprise(a))}function removeFav(e,t){url="../php/ajax/removeFav.php?type_id="+e+"&item_id="+t,url=encodeURI(url),$("#fav_wrapper").load(url)}function showFavMenu(){var e=$("#fav_menu"),t=e.attr("data-item-id"),a=$("#fav_menu").attr("data-type-id");t&&a&&($.get("/php/ajax/createFav.php",{item_id:t,type_id:a}),$(".create_fav").addClass("saved").text("Saved!"),$('.saveIcon[data-id="'+t+'"]').attr("src",imageAssetBase+"/images/bookmark/saved-icon.png")),$("#folder_id").show(),e.find(".unsave").show(),e.find(".folderMessage, .loading, .newFolderButton, .newFolder").remove(),$("#remind_me").show(),e.find('[for="remind_me"]').text("Remind me by email"),$("#fav_reminder_date").show(),e.css("height","auto");var n=e.outerHTML();e.remove(),center=function(){var e=$(window).height()/2-$("#fav_menu").height()/2+$(window).scrollTop(),t=($(window).width()-$("#fav_menu").width()-52)/2;$("#fav_menu").css({top:e,left:t})};$("#overlay").fadeIn(500),$("body").append(n),e=$("#fav_menu"),e.fadeIn(500),center(),$(document).on("keyup",function(e){toggleFavOnEscape(e)}),$("#fav_menu").find('.close, .closeButton, .closePopUp, [data-action="close"]').click(function(){hideFavMenu()}),$("#fav_menu").find('a[href="/sign-in"], a[href="/sign-up"]').click(function(){$("#fav_menu").hide()}),$("#fav_menu #folder_id").change(function(){var e=$(this),t=$("#fav_menu").attr("data-item-id"),a=$("#fav_menu").attr("data-type-id"),n=$(this).val();if("new"==n){var i=$("<div />",{"class":"like-table"}),o=$('<input type="text" class="newFolder" placeholder="Enter your new folder name...">'),r=$('<button class="newFolderButton green">Add!</button>');return i.append(o).append(r),e.after(i),e.hide(),void r.click(function(){return newName=o.val(),newName?($("#fav_menu").append('<img src="'+imageAssetBase+'/images/loading.gif" class="loading" />'),void $.post("/php/ajax/addFavFolder.php",{name:newName},function(e){"success"!==e.message?(apprise(e.message),$("#fav_menu .loading").remove()):(n=e.folderid,newName=e.name,$.get("/php/ajax/createFav.php",{item_id:t,type_id:a,folder_id:n},function(){o.remove(),r.remove(),$("#fav_menu .loading").remove(),$("#fav_menu #folder_id").after('<p class="folderMessage">Resource has been added to folder <strong>'+newName+"</strong>.</p>").hide()}))},"json")):void apprise("Folder name can not be blank!")})}$("#fav_menu").append('<img src="'+imageAssetBase+'/images/loading.gif" class="loading" />'),$.get("/php/ajax/createFav.php",{item_id:t,type_id:a,folder_id:n},function(){$("#fav_menu").find(".loading").remove();var e=$("#folder_id option:selected").text();$("#fav_menu #folder_id").after('<p class="folderMessage">Resource has been added to '+e+".</p>").hide()})}),$("#fav_date_year").add("#fav_date_month").add("#fav_date_day").click(function(){$("#fav_menu").find(".error").remove()}),$("#fav_menu").find(".setReminder").click(function(){var e=$("#fav_menu");if(e.find(".error").remove(),$("#fav_date_year").val()&&$("#fav_date_month").val()&&$("#fav_date_day").val()){var t,a=$("#fav_date_day").val(),n=$("#fav_date_month").val(),i=$("#fav_date_year").val(),o=a+"/"+n+"/"+i;try{t=$.datepicker.parseDate("dd/mm/yy",o)}catch(r){var s=o+" is not a valid date.";return e.find("#fav_reminder_date").append('<p class="error" style="display:none;">'+s+"</p>"),void e.find(".error").slideDown()}var l=new Date;l.setFullYear(i,n-1,a);var c=new Date;if(l<=c){var s="You must chose a date that is in the future.";return e.find("#fav_reminder_date").append('<p class="error" style="display:none;">'+s+"</p>"),void e.find(".error").slideDown()}var d=$("#fav_date_year").val()+"-"+$("#fav_date_month").val()+"-"+$("#fav_date_day").val(),u=e.attr("data-item-id"),p=e.attr("data-type-id");e.append('<img src="'+imageAssetBase+'/images/loading.gif" class="loading" />'),$.get("/php/ajax/createFav.php",{item_id:u,type_id:p,reminder_date:d},function(){e.find(".loading").remove(),e.find("#fav_reminder_date").append('<p class="folderMessage">Reminder has been set.</p>').hide()})}else{var s="Please fill in the date correctly";e.find("#fav_reminder_date").append('<p class="error" style="display:none;">'+s+"</p>"),e.find(".error").slideDown()}}),$("#fav_menu").find(".unsave").click(function(){var e=$("#fav_menu"),t=$("#fav_menu").attr("data-item-id"),a=$("#fav_menu").attr("data-type-id");$("#fav_menu").append('<img src="'+imageAssetBase+'/images/loading.gif" class="loading" />'),$.get("/php/ajax/removeFav.php",{item_id:t,type_id:a},function(a){e.find(".folderMessage, .loading").remove(),e.find("h3").after('<p class="folderMessage">'+a.unsavedMsg+"</p>"),e.find("#folder_id, #remind_me").hide(),e.find('[for="remind_me"]').text(""),e.find("#fav_reminder_date").hide(),e.find(".unsave").hide(),$(".create_fav").removeClass("saved").text(a.saveForLaterMsg);var n=document.querySelector("#resource_image .saveText");n&&"Saved"===n.textContent&&(n.textContent=a.saveMsg);var i=document.querySelector("#resource_image .saveFav");if(i&&(i.classList.toggle("saveForLater"),i.classList.toggle("saved")),$('.saveIcon[data-id="'+t+'"]').attr("src",imageAssetBase+"/images/bookmark/save-icon.png"),$(".saveForLater").hasClass("saveFav")){var o=$('.saveForLater[data-id="'+t+'"]');o.find(".saveText").text(a.saveMsg),o.removeAttr("style")}else $('.saveForLater[data-id="'+t+'"]').text(a.saveForLaterMsg)})}),$("#fav_menu #popup-save-resource-form .preview-image").on("contextmenu",function(){return!1}),$("#fav_menu #popup-save-resource-form a.confirmButton").click(function(e){e.preventDefault();var t=createLoaderGif("green"),a=$("#fav_menu #popup-save-resource-form .popup-loader"),n=$(this);a.html(t).show(),n.hide(),$.post(window.location.href,{action:"saveResource",itemId:$(this).data("item")},function(e){return"success"!==e.message?(showDropDownMessage(e.message,!0),a.hide(),void n.show()):(showDropDownMessage("Resource has been successfully saved."),void setTimeout(function(){window.location="/my-saved-resources"},2e3))},"json").fail(function(){a.hide(),n.show(),showDropDownMessage("Unable to save resource",!0)})})}function hideFavMenu(){$(document).off("keyup",toggleFavOnEscape),$("#fav_menu").fadeOut(500),$("#overlay").fadeOut(500)}function deleteFavFromFolder(e){$("#fav_folders_wrapper").html('<img src="'+imageAssetBase+'/images/loading.gif" alt="Please wait..." />'),url="../php/ajax/deleteFavFromFolder.php?id="+e,url=encodeURI(url),$("#fav_folders_wrapper").load(url)}function deleteFavFolder(e){$("#fav_folders_wrapper").html('<img src="'+imageAssetBase+'/images/loading.gif" alt="Please wait..." />'),url="../php/ajax/deleteFavFolder.php?id="+e,url=encodeURI(url),$("#fav_folders_wrapper").load(url)}function validate_schoolpremium1_form(){return valid=!0,msg="",$("#person_ordering").val()||(valid=!1,msg+="<li>Person ordering</li>"),$("#establishment_name").val()||(valid=!1,msg+="<li>Establishment name</li>"),$("#invoice_address").val()||(valid=!1,msg+="<li>Invoice Address</li>"),$("#telephone_number").val()||(valid=!1,msg+="<li>Telephone number</li>"),$("#email_address").val()?isEmailValid($("#email_address").val())||(valid=!1,msg+="<li>"+$("#email_address").val()+" is not a valid email address</li>"):(valid=!1,msg+="<li>Email address</li>"),$("#purchase_order_number").val()||(valid=!1,msg+="<li>Purchase order number</li>"),valid||(msg="<h2>There was a problem</h2>\n<p>Please make sure all fields are completed correctly.</p><p>You haven't filled in...</p><ul>"+msg+"</ul>",apprise(msg)),valid}function validate_schoolpremium2_form(){if(valid_user=!0,msg="",i=1,empty=0,rows=$("#rows").val(),rows&&""!=rows)for(;i<=rows;){if(user_first_name=$("#user_first_name_"+i).val(),user_last_name=$("#user_last_name_"+i).val(),desired_username=$("#desired_username_"+i).val(),user_email=$("#user_email_"+i).val(),username_taken=$("#username_taken_"+i).val(),email_taken=$("#email_taken_"+i).val(),user_id=$("#user_id_"+i).val(),user_email||desired_username||user_first_name||user_last_name){if(user_email||(valid_user=!1,msg+="<li>Please enter an email address in line #"+i+"</li>"),isEmailValid(user_email)||(valid_user=!1,msg+="<li>"+user_email+" is not a valid email address</li>"),""==user_id&&1==email_taken&&(valid_user=!1,msg+="<li>Please enter a unique email address. "+user_email+" is already taken.</li>"),desired_username||(valid_user=!1,msg+="<li>Please enter a desired username in line #"+i+"</li>"),""==user_id&&1==username_taken)valid_user=!1,msg+="<li>Please enter a unique username. "+desired_username+" is already taken.</li>";else{desired_username.length<6&&(valid_user=!1,msg+="<li>The username in line #"+i+" is not long enough! It must be at least 6 characters long.</li>");var e=new Array(" ",'"',"!","£","$","%","^","&","*","(",")","+","=","{","}","[","]",":",";","@","'","#","~","?","/","\\","|","¬","`","<",">",","),t=!0;for(x in e)character=e[x],desired_username.indexOf(character)>=0&&(t=!1);0==t&&(valid_user=!1,
msg+="<li>Please enter a correct username in line #"+i+". Your username must not contain any special characters including spaces, apart from . - or _</li>")}user_first_name||(valid_user=!1,msg+="<li>Please enter a first name in line #"+i+"</li>"),user_last_name||(valid_user=!1,msg+="<li>Please enter a last name in line #"+i+"</li>")}else empty++;i++}else valid_user=!1,msg+="<li>Please choose the number of users you would like to include.</li>";if(empty>=rows&&(valid_user=!1,msg+="<li>Any users at all! Please enter at least 1 user</li>"),valid_user){for(totalRows=$("#rows").val(),i=1;i<=totalRows;i++)$("#desired_username_"+i).attr("disabled","disabled")&&$("#desired_username_"+i).removeAttr("disabled");calculateSchoolPremiumUserTotal()}else msg="<h2>There was a problem</h2>\n<ul>"+msg+"</ul>",apprise(msg);return valid_user}function validate_schoolpremium3_form(){return valid=!0,msg="",$("#agree_terms").attr("checked")||(valid=!1,msg="<p>You must agree to the terms to complete your order</p>\n",apprise(msg)),valid}function removeUserFromSchool(e,t){url="https://www.twinkl.co.uk/php/ajax/removeUserFromSchool.php?user_id="+e+"&school_id="+t,url=encodeURI(url),$("#manage_school_premium_wrapper").slideUp("fast","easeOutExpo").html('<center><img src="'+imageAssetBase+'/images/loading.gif" alt="Loading" /></center>').slideDown("fast","easeOutExpo").load(url)}function validate_manageschoolpremium_form(){for(valid=!0,msg="",i=1,empty=0,last_row=$(".desired_username:last").attr("id"),last_row=last_row.split("_"),last_row=last_row[2],last_saved_row=$(".saved_school_user:last").attr("id"),last_saved_row=last_saved_row.split("_"),last_saved_row=last_saved_row[3],last_saved_row=parseInt(last_saved_row);i<=last_row;){if(y=last_saved_row+i,staff_member_name=$("#staff_member_name_"+i).val(),desired_username=$("#desired_username_"+i).val(),staff_member_email_address=$("#staff_member_email_address_"+i).val(),staff_member_name||desired_username||staff_member_email_address){if(""!=$("#username_response_"+i).html()&&(valid=!1,msg+="<li>A unique username. "+desired_username+" is already taken, please choose a different username</li>"),staff_member_name||(valid=!1,msg+="<li>Staff member name in line #"+y+"</li>"),desired_username){desired_username.length<6&&(valid=!1,msg+="<li>A long enough username in line #"+y+"! It must be at least 6 characters long.</li>");var e=new Array(" ",'"',"!","£","$","%","^","&","*","(",")","+","=","{","}","[","]",":",";","@","'","#","~","?","/","\\","|","¬","`","<",">",","),t=!0;for(x in e)character=e[x],desired_username.indexOf(character)>=0&&(t=!1);0==t&&(valid=!1,msg+="<li>A correct username in line #"+y+". Your username must not contain any special characters including spaces, apart from . - or _</li>")}else valid=!1,msg+="<li>Desired username in line #"+y+"</li>";staff_member_email_address?isEmailValid(staff_member_email_address)||(valid=!1,msg+="<li>"+staff_member_email_address+" is not a valid email address</li>"):(valid=!1,msg+="<li>Email address in line #"+y+"</li>")}else empty++;i++}return valid||(msg="<h2>There was a problem</h2>\n<p>Please make sure all fields are completed correctly.</p><p>You haven't filled in...</p><ul>"+msg+"</ul>",apprise(msg)),valid}function validate_referafriend_form(){var e=new Array;return is_valid=!0,msg="",$("#refer_emails").find("> input").each(function(){email=$(this).val(),email&&isEmailValid(email)&&e.push(email)}),parseInt(e.length)<1&&(is_valid=!1,msg+="You didn't enter any valid emails!<br />"),is_valid||apprise(msg),is_valid}function goStraightToPayment(){$("#checkout_wrapper").find(".address").fadeIn("fast","easeOutExpo"),$("#checkout").add("#checkout_confirm_basket").fadeOut("fast","easeInExpo"),$("#checkout_wrapper").find("> .address").html('<img src="'+imageAssetBase+'/images/loading.gif" alt="Please wait..." class="loader" /> Getting payment options...'),$("#checkout").fadeOut("fast","easeInExpo");var e="../php/ajax/returnPaymentOptions.php";e=encodeURI(e),$("#checkout_wrapper > .address").load(e,function(){$("#checkout_cheque_wrapper").hide()})}function processOrderForJustVoucher(){var e=$("#firstName").val(),t=$("#lastName").val(),a=1,n=0,i=window.location.href.split("://");i=i[1].split("/"),i=i[0],i="twinkl.resoundatwork.co.uk"==i?"http://"+i:"https://"+i,i=i+"/php/ajax/saveOrderJustVoucher.php?paymentoption_id="+a+"&purchase_order_number="+n+"&first_name="+e+"&last_name="+t,i=encodeURI(i),$("#checkout_result").load(i,function(){var e=$("#new_order_id").text();e=parseInt(e);var t='<input type="hidden" name="custom" value="'+e+'" />';1==a&&$("#checkout_form").append(t).submit(),$("#checkout_wrapper > .address").fadeOut("fast","easeInExpo"),$("#col2 > h1").html("Order Submitted!")})}function calculateSchoolPremiumUserTotal(){var e=290,t=540,a=1085,n=41.63;for(totalRows=$("#rows").val(),totalComplete=0,i=1;i<=totalRows;i++)""!=$("#user_email_"+i).val()&&""!=$("#user_first_name_"+i).val()&&""!=$("#user_last_name_"+i).val()&&""!=$("#desired_username_"+i).val()&&totalComplete++;totalComplete<=6?total=totalComplete*n:7==totalComplete?total=e:totalComplete>=8&&totalComplete<=11?(extraUsers=totalComplete-8,licencePrice=e,extraUserPrice=extraUsers*n,total=licencePrice+extraUserPrice):totalComplete>=12&&totalComplete<=15?total=t:totalComplete>=16&&totalComplete<=25?(extraUsers=totalComplete-15,licencePrice=t,extraUserPrice=extraUsers*n,total=licencePrice+extraUserPrice):totalComplete>=26&&totalComplete<=29?total=a:totalComplete>=30&&(extraUsers=totalComplete-30,licencePrice=a,extraUserPrice=extraUsers*n,total=licencePrice+extraUserPrice),total=total.toFixed(2),$("#total").val(total)}function validateEmail(e){var t=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)}function validateNumeric(e){return!!/^\d+$/.test(e)}function validate_signup_form2(e){var t=$("#email"),a=$("#password"),n=$("#occupation"),i=$("#otheroccupation"),o=$("#countryFlag").data("formtypeid"),r="",s=!0;if(t.val()?isEmailValid(t.val())||(s=!1,t.formError(signInConfig.emailIncorrect,"","valid_email"),r+="<li>The email you entered doesn't appear to be correct.</li>"):(s=!1,t.formError(signInConfig.emailAddressMissing,"","not_blank"),r+="<li>Your email is missing.</li>"),a.val()||(s=!1,a.formError(signInConfig.notFilledPassword,"","not_blank"),r+="<li>You didn't enter a password.</li>"),2!=o&&!e&&(n.val()||(s=!1,n.formError(signInConfig.occupationMissing,"","change"),r+="<li>Oh no, you haven't selected an occupation."),"0"==n.val())){var l=/^\d+$/;i.val()?l.test(i.val())&&(s=!1,i.formError(signInConfig.occupationMissing,"","change"),r+="<li>Oh no, your occupation is not valid."):(s=!1,i.formError(signInConfig.occupationMissing,"","change"),r+="<li>Oh no, your occupation is empty.")}return 0!=s}function showHiddenImages(e){var e=e;$(e).loadImages({imgLoadedClb:function(){},allLoadedClb:function(){},imgErrorClb:function(){},noImgClb:function(){},dataAttr:"src"})}function showHiddenBgImages(e){$(e).each(function(){var e=$(this).data("bg-src");$(this).css("background-image",'url("'+e+'")'),$(this).removeAttr("data-bg-src"),$(this).attr("data-bg-loaded","true")})}function createCookie(e,t,a,n){var i;if(a||n){var o=new Date;o.setTime(o.getTime()+24*a*60*60*1e3),n&&o.setTime(o.getTime()+1e3*n),i="; expires="+o.toGMTString()}else i="";document.cookie=escape(e)+"="+escape(t)+i+"; path=/"}function readCookie(e){for(var t=escape(e)+"=",a=document.cookie.split(";"),n=0;n<a.length;n++){for(var i=a[n];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return unescape(i.substring(t.length,i.length))}return null}function eraseCookie(e){createCookie(e,"",-1)}function checkVisible(e,t){if(t=t||"visible",$(e).length){var a=$(window).height(),n=$(window).scrollTop(),i=$(e).offset().top,o=$(e).height();return"visible"===t?i<a+n&&i>n-o:"above"===t?i<a+n:void 0}}function positionBirdy(){checkVisible("#footer")?$("#help_bird").add("#help_bird_career").addClass("footer-visible"):$("#help_bird").add("#help_bird_career").removeClass("footer-visible")}function refreshShareData(e,t){e.each(function(){var e=$(this)[0].share;if(e){var t=void 0!==t&&null!==t?t:location.href;e.url!=t&&(e.url=t);try{e.smd.dr!=t&&(e.smd.dr=t)}catch(a){e.smd={dr:t}}}})}function loadScript(e,t){function a(){o||(o=!0,t(e,"ok"))}function n(){var e;o||(e=r.readyState,"complete"===e&&a())}function i(){o||(o=!0,t(e,"error"))}var o=!1,r=document.createElement("script");r.onload=a,r.onreadystatechange=n,r.onerror=i,r.src=e,document.body.appendChild(r)}function sendGreenComment(){if(comment=document.ecoForm.ecoComment.value,ecoBot=document.ecoForm.ecoBot.value,""==comment)return alert("Please enter a suggestion!"),!1;if(""!=ecoBot)return!1;var e="/php/ajax/processGreenComment.php?comment="+comment;return e=encodeURI(e),$("#ecoSuggestions").css("background","none"),$("#ecoSuggestions").html("<span>Please Wait...</span>").load(e),!1}function referSchool(){if(name=document.referForm.referName.value,email=document.referForm.referEmail.value,schoolBot=document.referForm.schoolBot.value,""==email||""==name)return alert("Please enter a valid name and email!"),!1;if(""!=schoolBot)return!1;var e="/php/ajax/processReferSchool.php?name="+name;return e=e+"&email="+email,e=encodeURI(e),alert(e),$("#school_refer").html("<p>Please Wait...</p>").load(e),!1}function showInspirationalLoader(e,t){var e=e,a=!0;if("undefined"!=typeof window.skip_motivational_message){if(a=window.skip_motivational_message,a&&"undefined"!=typeof e)return void(window.location.href=e);showInspirationalMessage(e,t)}else $.post("/php/ajax/updateUserDetails.php",{action:"get_motivational_status"},function(n){return a=n,a&&"undefined"!=typeof e?void(window.location.href=e):void showInspirationalMessage(e,t)},"json")}function showInspirationalMessage(e,t){if("undefined"!=typeof window.inspirationSettings||""===String(window.inspirationSettings.ajax_url_get_messages_view||"").trim())return void(window.location.href=e);var a="";t&&(a="?group_id="+window.inspirationSettings.logout_group_id),req=$.getJSON(window.inspirationSettings.ajax_url_get_messages_view+a,function(t){if(null==t||""===t)return void(window.location.href=e);var a=$("#overlay");a.html(t.html),$("body").css({overflow:"hidden"}),a.removeClass("d-none").addClass("inspirational-quote bg-logo-blue").fadeIn(),createCookie("skip_inspirational_loader",1,365),a.find("a.dismiss-inspirational-messages-link").click(function(t){t.preventDefault(t),$(this).fadeOut(function(){$(this).text("Okay, we won' t show it again !"),$(this).fadeIn()}),createCookie("skip_inspirational_loader",1,365),"undefined"!=typeof e&&setTimeout(function(){window.location.href=e},300)}),"undefined"!=typeof e&&(setTimeout(function(){window.location.href=e},2e3),a.unbind("click"),a.click(function(t){t.preventDefault(),window.location.href=e}))}),req.fail(function(){"undefined"!=typeof e&&(window.location.href=e)})}function isTouchDevice(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}function preloadImages(e){$(e).each(function(){$("<img />").attr("src",this).appendTo("body").css("display","none")})}function showDialogLoader(e,t){e||(e="Loading"),t||(t="Please wait...");var a=$('<p title="'+t+'">'+e+' <img src="'+imageAssetBase+'/admin/images/ajax-loader.gif"></p>');return a.dialog({resizable:!1,modal:!0,draggable:!1,dialogClass:"no-close loadingDialog"}),a}function removeDialog(e){e.dialog("destroy").remove()}function isSpecialPage(){return"/"==window.location.pathname||"/payment"==window.location.pathname||"/order-premium-for-your-school"==window.location.pathname||"/sign-in"==window.location.pathname||"/sign-up"==window.location.pathname||"/sign-up"==window.location.pathname||"/forgotten-details"==window.location.pathname||"/school-premium"==window.location.pathname||"/school-premium-choose"==window.location.pathname||"/school-manager"==window.location.pathname||"/products"==window.location.pathname||"/bundles"==window.location.pathname||window.location.pathname.search("/premium")!==-1}function smoothScrollTo(e,t,a){if(0!==$(e).length){var n,t=t||1e3,i=getSelection().toString().length>0;i||(n=a===!0?$("#sticky-header").height()+50:0,$("html, body").stop().animate({scrollTop:$(e).offset().top-n},t))}}function saveSiteControlData(e,t){var a={widgetId:e,data:t,action:"saveData",page:window.location};$.post("/php/ajax/site-control.php",a)}function timer(){"stopwatch"==timer_type?stopwatch():"timer"==timer_type?countdown_timer():"countdown"==timer_type&&countdown()}function stopwatch(){currentsec=parseInt(stopwatch_form.seconds.value),currentmin=parseInt(stopwatch_form.minutes.value),currentmil=parseInt(stopwatch_form.milsecs.value),keepgoin&&(currentmil+=1,10==currentmil&&(currentmil=0,currentsec+=1),60==currentsec&&(currentsec=0,currentmin+=1),Strsec=""+currentsec,Strmin=""+currentmin,Strmil=""+currentmil,2!=Strsec.length&&(Strsec="0"+currentsec),2!=Strmin.length&&(Strmin="0"+currentmin),stopwatch_form.seconds.value=Strsec,stopwatch_form.minutes.value=Strmin,stopwatch_form.milsecs.value=Strmil,setTimeout("stopwatch()",100))}function startover(){keepgoin=!1,currentsec=0,currentmin=0,currentmil=0,Strsec="00",Strmin="00",Strmil="00","stopwatch"==timer_type?(Strsec="00",Strmin="00",Strmil="0",stopwatch_form.seconds.value=Strsec,stopwatch_form.minutes.value=Strmin,stopwatch_form.milsecs.value=Strmil):"timer"==timer_type?(Strsec="01",Strmin="00",Strmil="00",timer_form.minutes.value=Strsec,timer_form.hours.value=Strmin,timer_form.seconds.value=Strmil):"countdown"==timer_type&&(Strsec="10",countdown_form.seconds.value=Strsec)}function countdown_timer(){currentsec=parseInt(timer_form.minutes.value),currentmin=parseInt(timer_form.hours.value),currentmil=parseInt(timer_form.seconds.value),keepgoin&&(currentmil-=1,currentmil<=0&&0!=currentsec&&(currentmil=59,currentsec-=1),currentmil<=0&&currentsec<=0&&(currentmil=0,currentsec=0),currentsec<=0&&0!=currentmin&&(currentsec=59,currentmin-=1),Strsec=""+currentsec,Strmin=""+currentmin,Strmil=""+currentmil,2!=Strmil.length&&(Strmil="0"+currentmil),2!=Strsec.length&&(Strsec="0"+currentsec),2!=Strmin.length&&(Strmin="0"+currentmin),currentmil<=0&&currentsec<=0&&currentmin<=0&&(keepgoin=!1,$("#timer_container .buttons_bar #pause_timer").addClass("hide")),timer_form.minutes.value=Strsec,timer_form.hours.value=Strmin,timer_form.seconds.value=Strmil,setTimeout("countdown_timer()",1e3))}function countdown(){if(currentsec=parseInt(countdown_form.seconds.value),keepgoin){if(currentsec-=1,Strsec=""+currentsec,2!=Strsec.length&&(Strsec=currentsec),countdown_form.seconds.value=Strsec,currentsec<=0){keepgoin=!1,countdown_form.seconds.value="0";var e=0,t=$("#timer_container form input"),a=setInterval(function(){t.hasClass("highlight_blur")?(t.removeClass("highlight_blur").addClass("highlight_focus"),t.css("background-color","#ed5e5e"),++e):(t.removeClass("highlight_focus").addClass("highlight_blur"),t.css("background-color","transparent")),5===e&&(t.css("background-color","transparent"),clearInterval(a))},300);$("#timer_container .buttons_bar #pause_timer").addClass("hide")}setTimeout("countdown()",1e3)}}function getSignUpSelector(e){switch(e){case void 0:case null:case"":var t=$("#signedUpAppr");return t.length>0?t:null;case"create_placeholder":return $('<div id="signedUpAppr" />');case"popupData":return"object"==typeof signUpSelectorPopupData&&null!=signUpSelectorPopupData?signUpSelectorPopupData:null}throw new Error("Unexpected return type whilst getting signup selector: "+e)}function openPopup(e,t,a,n,i,o){var r,s,l,c,d,u=$("#overlay"),p=$("body");o===!0&&(null==(r=u.data("oldClasses"))&&(r=[]),null==(l=u.attr("class"))&&(l=""),u.data("oldClasses",r.concat([l.trim()])),null==(s=u.data("oldStyles"))&&(s=[]),null==(c=u.attr("style"))&&(c=""),u.data("oldStyles",s.concat([c.trim()])),null==(s=p.data("oldStyles"))&&(s=[]),null==(d=p.attr("style"))&&(d=""),p.data("oldStyles",s.concat([d.trim()])));var h=Array.isArray(t)?t.join(" "):t;return null!=h&&h.length>0&&u.addClass(h),u.append(e),p.css({overflow:"hidden"}),null!=n&&u.css({overflow:n===!0?"auto":"hidden"}),u.attr("data-extra",a?null:"noClose"),i===!0?u.fadeIn():u.show(),u}function closePopup(e,t,a,n,i){var o,r,s,l=$("#overlay"),c=$("body"),d=Array.isArray(t)?t.join(" "):t;null!=d&&d.length>0&&l.removeClass(d),l.children().length<=1&&($("body").css({overflow:""}),null!=a&&l.css({overflow:a===!0?"auto":""})),i===!0&&(null==(o=l.data("oldClasses"))&&(o=[]),(s=o.length)>0&&l.attr("class",o.pop()),l.data("oldClasses",o),null==(r=l.data("oldStyles"))&&(r=[]),(s=r.length)>0&&l.attr("style",r.pop()),l.data("oldStyles",r),null==(r=c.data("oldStyles"))&&(r=[]),(s=r.length)>0&&c.attr("style",r.pop()),c.data("oldStyles",r)),l.children().length<=1&&(l.removeAttr("data-extra"),n===!0?l.fadeOut():l.hide()),e.remove()}function createLoaderGif(e,t,a){null==e&&(e="default");var n;switch(e){case"default":n=$('<img src="'+imageAssetBase+'/admin/images/loader.gif" />');break;case"popup-login":n=$('<img src="'+imageAssetBase+'/images/popup_login_loader.gif" class="loader" />');break;case"pink":n=$('<img src="'+imageAssetBase+'/images/pink-on-pink-loader.gif" />');break;case"green":n=$('<img src="'+imageAssetBase+'/images/loading_green.gif" />');break;case"blue-small":n=$('<img src="'+imageAssetBase+'/images/small_blue_loader.gif" />');break;case"ajax":n=$('<img src="'+imageAssetBase+'/admin/images/ajax-loader.gif" />');break;case"sun-smile":n=$('<img src="'+imageAssetBase+'/images/loading-sun-smile.png" class="loading-sun" />');break;default:throw new Error("Invalid loader gif type detected whilst creating loader gif.",500)}return null!=t&&n.css(t),a&&(a instanceof HTMLElement?$(a).append(n):a.append(n)),n}function addGoogleAnalyticsEvent(e,t,a,n,i){var o={event:"GAEvent",eventCategory:e,eventAction:t,eventLabel:a,eventValue:n};dataLayer.push(o)}function getTwinklPremimumPriceData(){return"undefined"==typeof twinklPremiumPriceData&&(twinklPremiumPriceData={}),twinklPremiumPriceData}function showSlides(e,t){var a,n=document.getElementsByClassName("twinklStorySection"),i=document.getElementsByClassName("year");for(e>n.length&&(slideIndexTm=1),e<1&&(slideIndexTm=n.length),a=0;a<n.length;a++)n[a].style.display="none",i[a].className="year";e==n.length?$(".next").hide():$(".next").show(),1==e?$(".prev").hide():$(".prev").show(),n[slideIndexTm-1].style.display="block",void 0!=t&&($(n[slideIndexTm-1]).removeClass("slide-left"),$(n[slideIndexTm-1]).removeClass("slide-right"),t.hasClass("next")?$(n[slideIndexTm-1]).addClass("slide-right"):$(n[slideIndexTm-1]).addClass("slide-left")),i[slideIndexTm-1].className="year active"}function doodleGemAnimationGeneration(){function e(e){r=0,o=0,"undefined"!=typeof s&&(o=s,o=o.toString(),o=o.replace("%","")),"undefined"!=typeof n&&(r=n),n=30,i=30;var a,c=["strip","circle","twirl","triangle","strip"];$(".doodle-animation").hasClass("doodle-gem")&&(c=["gem1","gem2","gem3","gem4","gem5"],i=n=100+Math.floor(140*Math.random()));var d=Math.floor(Math.random()*c.length);a=c[d],s=100*Math.random();var u=l*(s/100),p=l*(o/100);u>=p&&u<=p+r&&(u+=p+r-u+1,s=u/l*100,s>100&&(s-=100)),s+="%";var h=20*-Math.random()+"%";$('<div class="blob-'+e+" "+a+'"></div>').css({width:n+"px",height:i+"px",top:h,left:s,transform:"rotate("+360*Math.random()+"deg)"}).appendTo($(".doodle-animation").find(".front_panel_container")),t(e)}function t(e){$(".blob-"+e).animate({top:"100%",left:"+="+15*Math.random()+"%"},3e3*Math.random()+3e3,function(){a(e)})}function a(e){$(".blob-"+e).animate({top:20*-Math.random()+"%",left:"-="+15*Math.random()+"%"},0,function(){t(e)})}for(var n=0,i=0,o=0,r=0,s=0,l=$(".doodle-animation").width(),c=0;c<12;c++)e(c)}function allowAnimation(){return $("body").hasClass("visible")===!0}function cinCheckWindowState(){$(".doodle-cin-balls"),$("body").hasClass("visible")&&$(".traveler").length<=0?generateCinAnimation():$("body").hasClass("visible")&&$(".traveler").length>0||$(".doodle-cin-wrapper").remove()}function generateCinAnimation(){for(var e=$(".doodle-cin-balls").find(".front_panel_container"),t=$("<div />",{"class":"doodle-cin-wrapper"}),a=0;a<8;a++){var n=Math.ceil(2+3*Math.random()),i=$("<div />",{"class":"traveler"}),o=$("<div />",{"class":"bouncer doodle-cin-ball-"+(a+1)});o.css({"animation-duration":parseFloat(n).toFixed(1)+"s"});var r=Math.random();r<.33?i.css({"animation-name":"travel-center","animation-direction":"normal"}):r>.66?i.css({"animation-name":"travel-right"}):i.css({"animation-name":"travel-left"}),height=width=70+Math.floor(140*Math.random()),o.css({width:width,height:height}),n=parseFloat(4+3*Math.random()).toFixed(1),i.css({"animation-duration":n+"s"}),i.append(o),t.append(i)}e.prepend(t)}function generateDoodleSnowFlakes(){function e(e){r=0,o=0,"undefined"!=typeof s&&(o=s,o=o.toString(),o=o.replace("%","")),"undefined"!=typeof n&&(r=n),n=30,i=30;var a;$(".doodle-animation").hasClass("doodle-snow-flakes")&&(pieces=["snow-flake-1","snow-flake-1"],i=n=10+Math.floor(20*Math.random()));var c=Math.floor(Math.random()*pieces.length);a=pieces[c],s=100*Math.random();var d=l*(s/100),u=l*(o/100);d>=u&&d<=u+r&&(d+=u+r-d+1,s=d/l*100,s>100&&(s-=100)),s+="%";var p=20*-Math.random();$('<div class="blob-'+e+" "+a+'"></div>').css({width:n+"px",height:i+"px",top:p,left:s,transform:"rotate("+360*Math.random()+"deg)"}).appendTo($(".doodle-animation").find(".front_panel_container")),t(e)}function t(e){$(".blob-"+e).animate({top:"100%",left:"+="+15*Math.random()+"%"},3e3*Math.random()+3e3,function(){a(e)})}function a(e){$(".blob-"+e).animate({top:20*-Math.random()+"%",left:"-="+15*Math.random()+"%"},0,function(){t(e)})}for(var n=0,i=0,o=0,r=0,s=0,l=$(".doodle-animation").width(),c=0;c<18;c++)e(c)}function snowFlakeCheckWindowState(){$("body").hasClass("visible")&&$(".blob-0").length<=0?generateDoodleSnowFlakes():$("body").hasClass("visible")&&$(".blob-0").length>0||deleteBlobs()}function doodleGemCheckWindowState(){$("body").hasClass("visible")&&$(".blob-0").length<=0?doodleGemAnimationGeneration():$("body").hasClass("visible")&&$(".blob-0").length>0||deleteBlobs()}function deleteBlobs(){for(var e=0;$(".blob-"+e).length>0;)$(".blob-"+e).remove(),e++}function trackHeight(e,t){$(t).height($(e).height())}function copyLinkToClipboard(e,t){var a=$("<input>");$("body").append(a),null!=e?a.val($(e).text()).select():null!=t&&a.val(t).select(),document.execCommand("copy"),a.remove()}function calculateDifferenceInWeeks(e){var t=new Date,a=6048e5,n=Math.round((t-e)/a);return n}function lockStartOfInput(e,t,a){return 37==t.which||39==t.which||!(a<e||a==e&&8==t.which)}function validatePhoneNumber(e,t){return t||(t=13),e.length==t&&!!$.isNumeric(e)}function addFileListeners(){var e=function(){return["aiFile"]};$("input[type=file]").each(function(t,a){if(!a.id||!e().includes(a.id)){var n=$(a),i=n.data("max-size"),o=3e6;if("undefined"!=typeof i&&i!==!1){if("string"==typeof i){var r=i.substring(i.length-2).toUpperCase();switch(o=parseInt(i),r){case"MB":o*=1e6;break;case"KB":o*=1e3}}}else i="3MB";n.on("change",function(e){if("undefined"!=typeof FileReader){var t=0;this.files.length>0&&(t=this.files[0].size),t>o&&(n.formError("File exceeds maximum size "+i+".  Please choose a smaller file."),this.value="")}})}})}function populateRecommendedForYou(e,t,a){var n=document.getElementById("recommended-list-show");if(n){var i=n.getAttribute("data-recommended-list");if(i=i&&null!==i?parseInt(i):0)$(n).show();else if(null!=e){var e=JSON.parse(e).filter(onlyUnique),o=[];if(t.length&&e.length&&(o=e.filter(function(e,n,i){var o=0;return t.forEach(function(t){t&&t.url==e.url&&(o=1)}),o||(o=a.indexOf(e.url)>=0?1:0),!o})),o.length>0){o.sort(function(e,t){return t.lastView-e.lastView}),$(n).removeClass("hide");var r=$("#recommendedViewedList");r.parent().removeClass("hide");var s=0,l=[];r.find("div.res-item").each(function(e){var t="";if(t=o[e]){var a=JSON.stringify({name:"click_resource",resourceId:t.resourceId,resourceIndex:s++,resourceListingName:"Recommended Resources",resourceIsRecommendation:"Yes",referringResourceId:0,searchTerm:"",searchLogId:0});listDashyItems(this,t,"","ml",a),l.push(t.resourceId)}else r.find("div.recCard_"+e).addClass("hide")}),window.dataLayer[0].tracking.push({event:"impression_resource",data:{name:"impression_resource",resourceId:0,resourceIds:l,resourceListingName:"Recommended Resources",resourceIsRecommendation:"Yes",searchLogId:0}})}else $(n).hide()}else $(n).hide()}}function populateLastViewedResource(e){if(e&&!dataLayer[0].user.loggedIn){var t=$("#lastViewedStorage");t.parent().removeClass("hide"),t.find("img").attr("src",e.image),t.find("#lastViewedTitle").html(e.title),t.find("#lastViewedContinue").attr("href",e.url);var a=e.rating||"";if("undefined"!=typeof a&&a){var n=document.createElement("div");n.classList.add("starRating","hidden-md-down");for(var a=parseInt(a),i=1;i<6;i++){var o=a>=i?"On":"Off",r=document.createElement("div");r.classList.add("star"+o),n.append(r)}t.find("#lastViewedTitle").after(n)}}}function populateRecentlyViewedBlock(e,t){var a=$("#recentlyViewedList");if(null!=e)if(e.sort(function(e,t){return t.lastView-e.lastView}),e.length>0){var n=$("#bundlePackages").attr("data-bundles"),i="undefined"!=typeof n?JSON.parse(n):[],o=Object.keys(i),r=$("#userBundle").val();e=e.filter(function(e){return!($.inArray(e.url,t)>=0)});var s=parseInt(a.find("div.res-item.fromR").length);a.find("div.res-item.fromL").each(function(t){var a="",n=e[t];if(n){o.forEach(function(e){($.inArray(n["package"],i[e])>=0||$.inArray(n.packageName,i[e])>=0)&&(a=e)}),""!=r||0!=n["package"]&&"free"!=n["package"]?$(this).find(".banner-ribbon").addClass("hide"):$(this).find(".banner-ribbon").removeClass("hide");var l=JSON.stringify({name:"click_resource",resourceId:n.resourceId,resourceIndex:s++,resourceListingName:"Recently Viewed Resource",resourceIsRecommendation:"Yes",referringResourceId:0,searchTerm:"",searchLogId:0});listDashyItems(this,n,a,"rh",l)}else $(this).hide()}),populateLastViewedResource(e[0])}else a.find("div.res-item.fromL").remove();else a.find("div.res-item.fromL").remove();a.find("div.res-item").length||a.parents(".display-box").remove()}function downloadNowWidget(e){var t=$("#readytoDownload");t.removeClass("hide"),t.find("a").attr("href",e.url),t.find("img").attr("src",e.image);var a="Download "+e.name+" resources like this with a Premium membership";t.find(".boxTitle").html(a),t.find("#lastViewedPremium").html(e.title),t.find("#lastViewedContinue").attr("href",e.url);var n=e.rating||"";if("undefined"!=typeof n&&n){var i=document.createElement("div");i.classList.add("starRating","hidden-sm-down");for(var n=parseInt(n),o=1;o<6;o++){var r=n>=o?"On":"Off",s=document.createElement("div");s.classList.add("star"+r),i.append(s)}t.find("#lastViewedPremium").after(i)}}function uniqueArrayObject(e,t){var a={};return e.filter(function(e){return!a[e[t]]&&(a[e[t]]=!0)})}function listDashyItems(e,t,a,n,i){var o=$(e);if(o.removeClass("hide"),"rh"===n){o.find("a").attr("data-resource-bundle",a),"undefined"!=typeof t.resourceId&&o.find("img").attr("data-resource-id",t.resourceId);var r=t.image.replace(/\/t_[^\/]*\//,"/t_{width}/")}else var r=t.img.replace(/\/t_[^\/]*\//,"/t_{width}/");if(o.find("img").attr("data-src",r),o.find("span.res-title").removeClass("skeleton skeleton-text"),o.find(".res-title").html(t.title),o.find("a").attr("href",t.url),o.find("a").attr("data-track",i),t.rating=t.rating||t.starsOn||"","undefined"!=typeof t.rating&&t.rating){$(".skeleton-star").remove();for(var s=$('<div class="starRating">'),l=parseInt(t.rating),c=1;c<6;c++){var d=l>=c?"On":"Off";s.append('<div class="star'+d+'">')}o.find(".res-title").after(s)}o.find("img").attr("alt",t.title).attr("title",t.title),setTimeout(function(){document.fn.events.emit("loadedContent")},300)}function recentlySearchedList(e){var t=localStorage.sh?JSON.parse(localStorage.sh):void 0;if(t){var a=t.reverse(),n=[];a.forEach(function(e,t){e.uri&&e.title&&""!==e.uri&&""!==e.title&&n.push(e)});var i,o=n.length<20?n.length:20;if(0!=n.length){$("#recentlySearchedList").show();var r=$("#recentlySearchedList.recentlySearched").find(".searchContent");for(i=0;i<o;i++){var s,l=hideClass=showMoreBtn="",c=$('<div class="searchItem">');if($("body").hasClass("is-mobile-device")&&"dashy"===e&&(c.addClass("searchItemMob"),r.attr("style","height:auto; overflow:auto;"),l='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 512"><path d="M24.707 38.101L4.908 57.899c-4.686 4.686-4.686 12.284 0 16.971L185.607 256 4.908 437.13c-4.686 4.686-4.686 12.284 0 16.971L24.707 473.9c4.686 4.686 12.284 4.686 16.971 0l209.414-209.414c4.686-4.686 4.686-12.284 0-16.971L41.678 38.101c-4.687-4.687-12.285-4.687-16.971 0z"></path></svg>',i>=2&&(hideClass="hideSearchItems",showMoreBtn='<div class="showMoreDashySH"><span>Show more</span><svg class="chevColdashy" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M441.9 167.3l-19.8-19.8c-4.7-4.7-12.3-4.7-17 0L224 328.2 42.9 147.5c-4.7-4.7-12.3-4.7-17 0L6.1 167.3c-4.7 4.7-4.7 12.3 0 17l209.4 209.4c4.7 4.7 12.3 4.7 17 0l209.4-209.4c4.7-4.7 4.7-12.3 0-17z"></path></svg></div>')),c.addClass(hideClass),n[i].imgSrc)var s='<a href="'+n[i].uri+'" target="_blank"><img src="'+n[i].imgSrc+'"><span>'+n[i].title+"</span>"+l+"</a>";else var s='<a href="'+n[i].uri+'" target="_blank"><span>'+n[i].title+"</span>"+l+"</a>";s&&c.html(s),r.append(c),$(".hideSearchItems").hide()}r.after(showMoreBtn)}}}function BackgroundNode(e){var t=e.node,a=e.loadedClassName,n=t.getAttribute("data-background-image-url"),i=function(e){requestAnimationFrame(function(){t.style.backgroundImage="url(".concat(n,")"),t.classList.add(a),e()})};return{node:t,load:function(e){var t=new Image;t.onload=i(e),t.src=n}}}function BackgroundLazyLoader(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lazyLoadBackgroundsDefaultOptions,t=e.selector,a=e.loadedClassName,n=[].slice.apply(document.querySelectorAll(t)).map(function(e){return new BackgroundNode({node:e,loadedClassName:a})}),i=function(e,t){e.forEach(function(e){var a=e.target,i=e.isIntersecting;if(i){var o=n.filter(function(e){return e.node.isSameNode(a)})[0];o&&o.load(function(){t.unobserve(a),n=n.filter(function(e){return!e.node.isSameNode(a)}),n.length||t.disconnect()})}})},o=new IntersectionObserver(i);n.forEach(function(e){return o.observe(e.node)})}function openZenDeskContactWidget(e){e.preventDefault(),document.getElementById("zenDeskLoadButton")?loadZendeskScript():"undefined"!=typeof zE&&(zE("messenger","close"),zE("messenger","open"))}function updatePauseTrackingData(e,t){var a=$(e).closest(".pauseSubNew").find("button.button.green, button.confirm-pause"),n=a.data("track");n.pauseDuration=t,renderTrackingAttribute(a,n)}function getCookie(e){for(var t=e+"=",a=decodeURIComponent(document.cookie),n=a.split(";"),i=0;i<n.length;i++){for(var o=n[i];" "===o.charAt(0);)o=o.substring(1);if(0===o.indexOf(t))return o.substring(t.length,o.length)}return""}$(document).ready(function(){"function"==typeof jQuery.fn.select2&&($("#country").select2(),$("#address-entry-form").submit(function(){$("#submit-form").html('<span class="inline-loader"><img src="'+imageAssetBase+'/images/loading.gif" alt="Please wait..." id="spinning-loader"></span>')}))}),$(function(){return});var billingAddress={},dropInObject,dropInSubmitted=!1;window.bioEp={bgEl:{},popupEl:{},closeBtnEl:{},shown:!1,overflowDefault:"visible",transformDefault:"",width:400,height:220,html:"",css:"",fonts:[],delay:5,showOnDelay:!1,cookieExp:30,showOncePerSession:!1,onPopup:null,cookieManager:{create:function(e,t,a,n){var i="";if(n)i="; expires=0";else if(a){var o=new Date;o.setTime(o.getTime()+24*a*60*60*1e3),i="; expires="+o.toGMTString()}document.cookie=e+"="+t+i+"; path=/"},get:function(e){for(var t=e+"=",a=document.cookie.split(";"),n=0;n<a.length;n++){for(var i=a[n];" "==i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return i.substring(t.length,i.length);
}return null},erase:function(e){this.create(e,"",-1)}},checkCookie:function(){return this.cookieExp<=0?!(!this.showOncePerSession||"true"!=this.cookieManager.get("bioep_shown_session"))||(this.cookieManager.erase("bioep_shown"),!1):"true"==this.cookieManager.get("bioep_shown")},addCSS:function(){for(var e=0;e<this.fonts.length;e++){var t=document.createElement("link");t.href=this.fonts[e],t.type="text/css",t.rel="stylesheet",document.head.appendChild(t)}var a=document.createTextNode("#bio_ep_bg {display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: #000; opacity: 0.3; z-index: 10001;}#bio_ep {display: none; position: fixed; width: "+this.width+"px; height: "+this.height+"px; font-family: 'Titillium Web', sans-serif; font-size: 16px; left: 50%; top: 50%; transform: translateX(-50%) translateY(-50%); -webkit-transform: translateX(-50%) translateY(-50%); -ms-transform: translateX(-50%) translateY(-50%); background-color: #fff; box-shadow: 0px 1px 4px 0 rgba(0,0,0,0.5); z-index: 10002;}#bio_ep_close {position: absolute; left: 100%; margin: -8px 0 0 -12px; width: 20px; height: 20px; color: #fff; font-size: 12px; font-weight: bold; text-align: center; border-radius: 50%; background-color: #5c5c5c; cursor: pointer;}"+this.css),n=document.createElement("style");n.type="text/css",n.appendChild(a),document.head.insertBefore(n,document.getElementsByTagName("style")[0])},addPopup:function(){this.bgEl=document.createElement("div"),this.bgEl.id="bio_ep_bg",document.body.appendChild(this.bgEl),document.getElementById("bio_ep")?this.popupEl=document.getElementById("bio_ep"):(this.popupEl=document.createElement("div"),this.popupEl.id="bio_ep",this.popupEl.innerHTML=this.html,document.body.appendChild(this.popupEl)),document.getElementById("bio_ep_close")?this.closeBtnEl=document.getElementById("bio_ep_close"):(this.closeBtnEl=document.createElement("div"),this.closeBtnEl.id="bio_ep_close",this.closeBtnEl.appendChild(document.createTextNode("X")),this.popupEl.insertBefore(this.closeBtnEl,this.popupEl.firstChild))},showPopup:function(){this.shown||(this.bgEl.style.display="block",this.popupEl.style.display="block",this.scalePopup(),this.overflowDefault=document.body.style.overflow,document.body.style.overflow="hidden",this.shown=!0,this.cookieManager.create("bioep_shown","true",this.cookieExp,!1),this.cookieManager.create("bioep_shown_session","true",0,!0),"function"==typeof this.onPopup&&this.onPopup())},hidePopup:function(){this.bgEl.style.display="none",this.popupEl.style.display="none",document.body.style.overflow=this.overflowDefault},scalePopup:function(){var e={width:40,height:40},t={width:bioEp.popupEl.offsetWidth,height:bioEp.popupEl.offsetHeight},a={width:window.innerWidth,height:window.innerHeight},n={width:0,height:0},i=t.width/t.height;t.width>a.width-e.width&&(n.width=a.width-e.width,n.height=n.width/i,n.height>a.height-e.height&&(n.height=a.height-e.height,n.width=n.height*i)),0===n.height&&t.height>a.height-e.height&&(n.height=a.height-e.height,n.width=n.height*i);var o=n.width/t.width;(o<=0||o>1)&&(o=1),""===this.transformDefault&&(this.transformDefault=window.getComputedStyle(this.popupEl,null).getPropertyValue("transform")),this.popupEl.style.transform=this.transformDefault+" scale("+o+")"},addEvent:function(e,t,a){e.addEventListener?e.addEventListener(t,a,!1):e.attachEvent&&e.attachEvent("on"+t,a)},loadEvents:function(){this.addEvent(document,"mouseout",function(e){if(e=e?e:window.event,"input"!=e.target.tagName.toLowerCase()){var t=Math.max(document.documentElement.clientWidth,window.innerWidth||0);if(!(e.clientX>=t-50||e.clientY>=50)){var a=e.relatedTarget||e.toElement;a||bioEp.showPopup()}}}.bind(this)),this.addEvent(this.closeBtnEl,"click",function(){bioEp.hidePopup()}),this.addEvent(window,"resize",function(){bioEp.scalePopup()})},setOptions:function(e){this.width="undefined"==typeof e.width?this.width:e.width,this.height="undefined"==typeof e.height?this.height:e.height,this.html="undefined"==typeof e.html?this.html:e.html,this.css="undefined"==typeof e.css?this.css:e.css,this.fonts="undefined"==typeof e.fonts?this.fonts:e.fonts,this.delay="undefined"==typeof e.delay?this.delay:e.delay,this.showOnDelay="undefined"==typeof e.showOnDelay?this.showOnDelay:e.showOnDelay,this.cookieExp="undefined"==typeof e.cookieExp?this.cookieExp:e.cookieExp,this.showOncePerSession="undefined"==typeof e.showOncePerSession?this.showOncePerSession:e.showOncePerSession,this.onPopup="undefined"==typeof e.onPopup?this.onPopup:e.onPopup},domReady:function(e){"interactive"===document.readyState||"complete"===document.readyState?e():this.addEvent(document,"DOMContentLoaded",e)},init:function(e){"undefined"!=typeof e&&this.setOptions(e),this.addCSS(),this.domReady(function(){bioEp.checkCookie()||(bioEp.addPopup(),setTimeout(function(){bioEp.loadEvents(),bioEp.showOnDelay&&bioEp.showPopup()},1e3*bioEp.delay))})}};var notYourAddress=document.getElementById("not-your-address");notYourAddress&&notYourAddress.addEventListener("click",addWhereCanWeFindYou);var ResponsiveBootstrapToolkit=function(e){var t={detectionDivs:{bootstrap:{xs:e('<div class="device-xs visible-xs visible-xs-block"></div>'),sm:e('<div class="device-sm visible-sm visible-sm-block"></div>'),md:e('<div class="device-md visible-md visible-md-block"></div>'),lg:e('<div class="device-lg visible-lg visible-lg-block"></div>'),xl:e('<div class="device-xl visible-xl visible-xl-block"></div>')},foundation:{small:e('<div class="device-xs show-for-small-only"></div>'),medium:e('<div class="device-sm show-for-medium-only"></div>'),large:e('<div class="device-md show-for-large-only"></div>'),xlarge:e('<div class="device-lg show-for-xlarge-only"></div>')}},applyDetectionDivs:function(){e(document).ready(function(){e.each(a.breakpoints,function(e){a.breakpoints[e].appendTo(".responsive-bootstrap-toolkit")})})},isAnExpression:function(e){return"<"==e.charAt(0)||">"==e.charAt(0)},splitExpression:function(e){var t=e.charAt(0),a="="==e.charAt(1),n=1+(a?1:0),i=e.slice(n);return{operator:t,orEqual:a,breakpointName:i}},isAnyActive:function(t){var n=!1;return e.each(t,function(e,t){if(a.breakpoints[t].is(":visible"))return n=!0,!1}),n},isMatchingExpression:function(e){var n=t.splitExpression(e),i=Object.keys(a.breakpoints),o=i.indexOf(n.breakpointName);if(o!==-1){var r=0,s=0;"<"==n.operator&&(r=0,s=n.orEqual?++o:o),">"==n.operator&&(r=n.orEqual?o:++o,s=void 0);var l=i.slice(r,s);return t.isAnyActive(l)}}},a={interval:300,framework:null,breakpoints:null,is:function(e){return t.isAnExpression(e)?t.isMatchingExpression(e):a.breakpoints[e]&&a.breakpoints[e].is(":visible")},use:function(e,n){a.framework=e.toLowerCase(),"bootstrap"===a.framework||"foundation"===a.framework?a.breakpoints=t.detectionDivs[a.framework]:a.breakpoints=n,t.applyDetectionDivs()},current:function(){var t="unrecognized";return e.each(a.breakpoints,function(e){a.is(e)&&(t=e)}),t},changed:function(e,t){var n;return function(){clearTimeout(n),n=setTimeout(function(){e()},t||a.interval)}}};return e(document).ready(function(){e('<div class="responsive-bootstrap-toolkit"></div>').appendTo("body")}),null===a.framework&&a.use("bootstrap"),a}(jQuery);"undefined"!=typeof module&&module.exports&&(module.exports=ResponsiveBootstrapToolkit),$(function(){function e(e){var t=$('input[name="bundleType"]'),a=$('input[name="bundleTypeA"]'),n=$('input[name="bundleType2"]');if(!e){var o=t.next().data("select-text"),r=t.next().data("span-text");$("#choose-package").find("label").html(o+"<span>"+r+"</span>"),$("#choose-subject").find("label").html(o)}t.prop("checked",!1),a.prop("checked",!1),n.prop("checked",!1),$("#choose-packages").find(".package").find("input").each(function(){$(this).prop("checked",!1).removeAttr("disabled").removeAttr("data-included"),i($(this),0)}),$("#choose-packages").find('a[data-toggle="collapse"]').each(function(){var e=$(this).data("target")||$(this).attr("href");$(e).hasClass("show")&&($(e).slideUp(function(){$(e).removeClass("show")}),$(this).removeClass("active"))});var s=$("#bundle-all");s.prop("checked",!1).prop("disabled",!1),$("#checkout_panel").html(checkoutHTML)}function t(e){var t;e===t&&(e="primary");var a=[],n=[],i=[];$("#choose-packages").find(".package").each(function(){var t=$(this);"primary"==e?t.data("secondary-only")?t.hide():t.show():t.data("secondary")?t.show():t.hide(),t.find("input").data("included")&&!t.find(".box-gray").length?a.push({order:t.find("input").data("order"),part1:t,part2:t.next()}):t.find(".box-gray").length?n.push({order:t.find("input").data("order"),part1:t,part2:t.next()}):i.push({order:t.find("input").data("order"),part1:t,part2:t.next()})}),a.sort(function(e,t){return t.order-e.order}),n.sort(function(e,t){return t.order-e.order}),i.sort(function(e,t){return t.order-e.order});for(var o=i.concat(n).concat(a),r=0;r<o.length;r++)$("#choose-packages").find("h2").after(o[r].part2).after(o[r].part1)}function a(){var e=[],t=$("#premium_form").find('input[name="current_packages"]');return t.length&&(e=(t.val()+"").split(",")),e}function n(){if(v)return v;var e=document.location.pathname,t=e.split("/"),a=t.length>=3?t[2]:"";return v=a,a}function i(e,t){var a=e.parents(".package:first");t?(a.find(".package-pricing").find("div:first").show(),a.find(".price").hide()):(a.find(".package-pricing").find("div:first").hide(),a.find(".price").show(),a.find("label").attr("title",""))}function o(){var e=$("#premium_form").find('input[name="current_bundle"]').val();return e}function r(){var e=$("#premium_form").find('input[name="months_left"]').val();return e}function s(){var e=$("#premium_form").find('input[name="renew"]').val();return e}function l(){var e=$("#premium_form").find('input[name="school_type"]').val();return e}function c(){var e=$("#premium_form").find('input[name="current_packages"]').val();return e.split(",")}function d(e){var t=$("#bundleType"+e);if(!t.length)return[];var a=t.data("default-packages").split(",");return a}function u(){var e=o(),t=r(),a=s(),n=l(),i=0;if("primary"==n){var u=$('input[name="bundleType"]:checked');!u.length&&e&&(u=$("#bundleType"+e));var h=u.val(),m=u.data("price"),f=m,v=u.data("symbol"),g=u.data("symbol-position"),_={1:"Core",2:"Extra",3:"Ultimate"},y=_[h]+" Bundle"}else var w=$('input[name="bundleType2"]:checked'),m=w.data("price"),f=m,v=w.data("symbol"),g=w.data("symbol-position"),y=w.data("title");var b=[],k=[];$(".package").find("input:checked").each(function(){var e=$(this).data("name"),t=$(this).data("price"),a=$(this).data("symbol"),n=$(this).data("symbol-position"),i={name:e,price:t,symbol:a,symbol_position:n};$(this).attr("data-included")?b.push(i):k.push(i)});var x=$("#bundle-all").prop("checked"),C=$("#checkout_panel");if(C.find("tr").not(".stick").remove(),e&&!a)if(e&&e!=h&&"secondary"!=n&&0!==h){C.find('tr[data-type="title"').html("<td><strong>Upgrade to "+y+"</strong></td><td></td>");var S=$("#bundleType"+e).data("price");if(t>=12){var T=m-S;C.find('tr[data-type="title"').after($("<tr><td>"+y+"</td><td>"+(g?m+v:v+m)+"</td></tr><tr><td>Current bundle</td><td>- "+(g?S+v:v+S)+'</td></tr><tr><td>Months remaining<br>on subscription</td><td style="border-top:1px solid #c9c9c9;">'+(g?p(T)+v:v+p(T))+"<br>x"+t+"</td></tr><tr><td><strong>Sub total</strong></td><td><strong>"+(g?p(t*T)+v:v+p(t*T))+"</strong></td></tr>")),f=p(t*T),i=f}else{for(var I=c(),b=d(e),B=[],D=0;D<I.length;D++)b.indexOf(I[D])===-1&&B.push(I[D]);for(var A="",O=0,D=0;D<B.length;D++){var E=$("#package-"+B[D]),P=E.data("price"),j=E.data("name");A+="<tr><td>"+j+"</td><td> "+(g?p(P)+v:v+p(P))+"</td></tr>",O+=parseFloat(P)}var L=p(S+O),R=p((S+O)*t);f=p(12*m-R),i=p(12*m),C.find('tr[data-type="title"').after($('<tr><td style="border-bottom:1px solid #c9c9c9;padding-top:20px;"><strong>Your current bundle</strong></td><td style="border-bottom:1px solid #c9c9c9;"></td></tr><tr><td>'+_[e]+" Bundle</td><td>"+(g?S+v:v+S)+"</td></tr>"+A+'<tr><td></td><td style="border-top:1px solid #c9c9c9;">'+(g?L+v:v+L)+"</td></tr><tr><td>Months remaining<br>on subscription</td><td>x"+t+'</td></tr><tr><td>Unused Price</td><td style="border-top:1px solid #c9c9c9;">'+(g?R+v:v+R)+'</td></tr><tr><td style="border-bottom:1px solid #c9c9c9;padding-top:20px;"><strong>Your upgrade bundle</strong></td><td style="border-bottom:1px solid #c9c9c9;"></td></tr><tr><td>'+y+'<br>(12 months)</td><td style="border-top:1px solid #c9c9c9;">'+(g?m+v:v+m)+'<br>x 12</td></tr><tr><td></td><td style="border-top:1px solid #c9c9c9;">'+v+p(12*m)+"</td></tr><tr><td>Less unused price</td><td>- "+(g?R+v:v+R)+"</strong></td></tr><tr><td><strong>Sub total</strong></td><td><strong>"+(g?f+v:v+f)+"</strong></td></tr>"))}}else"primary"==n?(C.find('tr[data-type="title"').html("<td><strong>"+_[h]+" Bundle</strong></td><td></td>"),f=0):(C.find('tr[data-type="title"').html("<td><strong>Secondary</strong></td><td></td>"),f=0);else C.find('tr[data-type="title"').html("<td><strong>"+y+"</strong></td><td>"+(g?m+v:v+m)+"</td>");for(var M=C.find('tr[data-type="total"]'),F=0,D=0;D<k.length;D++){var P="";x||(P=k[D].symbol_position?p(k[D].price)+k[D].symbol:k[D].symbol+p(k[D].price),F=parseFloat(F)+k[D].price),M.before("<tr><td>"+k[D].name+"</td><td>"+P+"</td></tr>")}if(x){var U="1"===h?$("#bundle-all").data("core-price"):$("#bundle-all").data("extra-price");"secondary"==n&&(U=$("#bundle-all").data("secondary-price")),M.before("<tr><td>All Add-ons</td><td>"+(g?p(U)+v:v+p(U))+"</td></tr>"),F+=U}if(e&&e!=h&&"secondary"!=n&&t<12?(M.before($('<tr><td></td><td style="border-top:1px solid #c9c9c9;">'+(g?p(F)+v:v+p(F))+"</td></tr><tr><td>Bundle length<br>(12 months)</td><td>x 12</td></tr><tr><td><strong>Sub total</strong></td><td><strong>"+(g?p(12*F)+v:v+p(12*F))+"</strong></td></tr>")),f=parseFloat(f)+parseFloat(12*F),i=parseFloat(i)+parseFloat(12*F)):e&&F&&!a?(M.before($('<tr><td>Months remaining<br>on subscription</td><td style="border-top:1px solid #c9c9c9;">'+(g?p(F)+v:v+p(F))+"<br>x"+t+"</td></tr><tr><td><strong>Sub total</strong></td><td><strong>"+(g?p(t*F)+v:v+p(t*F))+"</strong></td></tr>")),f=parseFloat(f)+parseFloat(t*F),i=parseFloat(i)+parseFloat(t*F)):(f=parseFloat(f)+parseFloat(F),i=parseFloat(i)+parseFloat(F)),e&&!a)M.find("td:first").find("strong").text("Total"),M.find("td:nth-child(2)").find("strong").html(g?p(f)+v:v+p(f));else{M.find("td:first").find("strong").text("Total Per Month"),M.find("td:nth-child(2)").find("strong").html(g?p(f)+v:v+p(f));var q=p(12*f);M.after('<tr class="payableAs"><td colspan="2">Payable as '+(g?q+v:v+q)+" at the start of the year's subscription</td></tr>")}var H=0==parseFloat(f);return C.find(".continueToCheckout").prop("disabled",H),f<=0&&k.length&&(C.find("tr").not(".stick").remove(),C.find('tr[data-type="title"').after($("<tr><td>"+y+"</td><td>Free</td></tr>")),M.find("td:first").find("strong").text("Total"),M.find("td:nth-child(2)").find("strong").html("Free")),[p(f),p(i)]}function p(e){var t=/\./,a=/\.[0-9]$/;return t.test(e.toString())?a.test(e.toString())?e+="0":e=parseFloat(e).toFixed(2):e+=".00",e}function h(e,t,a,n,o){var r;n===r&&(n=!0),a===r&&(a=!0),o===r&&(o=!0),setTimeout(function(){e.prop("checked",a).attr("disabled",a),o&&i(e,a),clearTimeout(g),g=setTimeout(function(){n&&u()},25)},t)}function m(){var e=$("#premium_form").offset().top;$("html, body").animate({scrollTop:e},500)}if($(".quickRenew").click(function(e){e.preventDefault(),e.stopPropagation();var t=$("#premium_form");t.append('<input type="hidden" name="renew" value="1">'),$(this).parent().find('[name="bundleType"]').prop("checked",!0),t.submit()}),$(".whatsInTheBundle").click(function(e){e.preventDefault(),e.stopPropagation();var t=$(this).parents(".packageBox:first, .packageBox-wrapper"),a=t.find(".content");return $(this).toggleClass("open"),t.toggleClass("open"),a.slideToggle(function(){a.is(":visible")&&a.css("overflow","visible")}),!1}),$(".schoolPackageBox").click(function(e){var t=$(this);t.find("form").first().submit()}),$("#premium_page").length){$("#premium_page.secondary [data-bg-src]"),"undefined"==typeof $("#checkout-panel-wrapper").stick_in_parent?document.fn.events.on("last",function(){$("#checkout-panel-wrapper").stick_in_parent()}):$("#checkout-panel-wrapper").stick_in_parent();var f={};$("#premium_form").on("click",".board-hover-info a",function(e){e.preventDefault();var t=$(this).parents(".board"),a=$(this).parents(".board-item"),n=a.returnBgClass();n="bg-blue";var i=t.find("#secondary-blurb-popup"),o=a.data("package"),r=$("[data-package-description='"+o+"']").html();t.addClass("disabled");var s=(t.find(".board-item"),$("<strong class='title' />"));s.text("Twinkl Secondary "+a.find(".board-title").text()),i.find("#secondary-blurb-left").stripBgClasses().addClass(n).html("").append(s).append(r),"undefined"==typeof f[o]?$.post("/products",{action:"getExampleContent",package_id:o},function(e){"success"!=e.message?(t.removeClass("disabled"),apprise(e.message)):(f[o]=e.html,i.find("#secondary-blurb-right").html(e.html))},"json"):i.find("#secondary-blurb-right").html(f[o]),i.addClass("blurb-active"),$("#secondary-blurb-popup").on("click",".dismiss",function(){i.removeClass("blurb-active"),t.removeClass("disabled")}),$(".board.disabled").on("click",function(e){$(e.target).parents("#secondary-blurb-popup").length||(i.removeClass("blurb-active"),t.removeClass("disabled"))})});var v;$("#choose-package, #choose-subject").find('input[name="bundleType"], input[name="bundleTypeA"], input[name="bundleType2"]').click(function(e){e.stopPropagation();var r=$(this);if("upgrade"===r.data("type"))return void setTimeout(function(){$("#premium_form").submit()},100);var l=a(),c=s(),d=n(),m=$(this).parents(".packageBox:first"),f="1";if(m.length){t();var v=m.find('input[name="bundleType"]'),g=m.find('input[name="bundleTypeA"]')}else{t("secondary"),f="2";var v=$(this)}if("1"==f&&(c||!o()))return $("#choose-packages").find("input").prop("checked",!1),void $("#premium_form").submit();var _=v.next().data("select-text"),y=v.next().data("selected-text"),w=v.next().data("span-text");if(l.length?2==f&&v.next().text(y):"1"==f?($("#choose-package").find("label").html(_+"<span>"+w+"</span>"),m.find("label").html(y+"<span>"+w+"</span>")):($("#choose-subject").find("label").html(_+"<span>"+w+"</span>"),v.next().html(y+"<span>"+w+"</span>")),v.prop("checked",!0),1==f&&g.prop("checked",!0),v.next().removeClass("unticked"),1==f&&g.next().removeClass("unticked"),1==f)var b=v.val(),x=(v.data("default-packages")+"").split(",");else var b=1,x=(v.val()+",2,22,52,53,54,55").split(",");var C="green",S="Included";if(1==b&&"1"==f?(C="blue",S="Core"):2==b?(C="pink",S="Extra"):3==b&&(C="purple",S="Ultimate"),"2"==f&&l.length)return void $("#choose-packages").find(".package").find("input").each(function(){if($(this).val()==v.val()){var e=$(this),t=$("#choose-packages .contentBox").offset().top,a=0;return void $("html,body").animate({scrollTop:t+"px"},500,function(){a||(a=1,e.prop("checked",!0),u())})}});$("#choose-packages").find(".package").find("input").each(function(){$(this).prop("checked",!1).removeAttr("disabled").removeAttr("data-included"),i($(this),0)});var T=$("#bundle-all");if(T.prop("checked",!1).prop("disabled",!1),3!=b){var I=T.data("extra-price");"1"==b&&(I=T.data("core-price")),2==f&&(I=T.data("secondary-price"));var B=T.data("symbol")+p(I);T.data("symbol-position")&&(B=p(I)+T.data("symbol")),T.parents(".row:first").find("span.bold").html("+"+B)}$("#choose-packages").find(".package").find("input").each(function(){$(this).parents(".package:first").find(".package-pricing").find("div:first").attr("class","box-"+C).text(S);var e=$(this).data("id")+"";x.indexOf(e)!==-1?($(this).parents(".package:first").find(".package-pricing").find("div:first").attr("class","box-"+C).text(S),$(this).next().attr("title","This is included with your package.")):l.indexOf(e)!==-1?1==f&&o()!=b?($(this).prop("checked",!0),$(this).next().attr("title","")):c?($(this).prop("checked",!0),$(this).next().attr("title","")):($(this).parents(".package:first").find(".package-pricing").find("div:first").attr("class","box-gray").text("Purchased"),x.push(e),$(this).next().attr("title","This is included with your package.")):($(this).parents(".package:first").find(".package-pricing").find("div:first").attr("class","").text(""),$(this).next().attr("title",""))}),setTimeout(function(){var e=$("#choose-packages .contentBox").offset().top,t=0;$("html,body").animate({scrollTop:e+"px"},500,function(){if(!t){t=1;var e=0,a=$("#choose-packages").find("h2"),n=!1;$("#choose-packages").find(".package").find("input").each(function(){var t=$(this),n=t.data("id")+"";if(x.indexOf(n)!==-1||t.data("varname")==d){x.indexOf(n)!==-1?(e+=25,h(t,e),t.attr("data-included",1)):t.prop("checked",!0);var i=t.parents(".package:first").next();a.after(i),a.after(t.parents(".package:first")),a=i}else k.indexOf(n)!==-1&&t.prop("checked",!0)}),n&&(k=[])}})},300),$("#choose-packages").find(".package:visible").length!=x.length&&3!=b||$("#bundle-all").prop("disabled",!0)}),$("#premium_form").on("click",".continueToCheckout",function(e){var t=$('input[name="school_type"]').val(),a=$('input[name="bundleType"]:checked'),n=a.val(),i=$('input[name="bundleType2"]:checked'),o=i.val();if("primary"==t){if(!n)return e.preventDefault(),m(),!1}else if(!o)return e.preventDefault(),m(),!1});var g;$("#choose-packages").find("input").click(function(){if("bundle-all"!=this.id&&"submit"!=$(this).attr("type")){var t=$(this),a=$('input[name="bundleType"]:checked');!a.length&&o()&&(a=$("#bundleType"+o()));var n=a.val(),i=$('input[name="school_type"]').val(),l=$('input[name="bundleType2"]:checked'),c=l.val();if(c&&(n="1"),"primary"==i){if(!n)return t.prop("checked",!1),void m()}else if(!c)return t.prop("checked",!1),void m();if(!$(this).prop("checked")){var d="bundleType2_"+this.value;$("#choose-subject").find('input[id="'+d+'"]').prop("checked",!1)}if("primary"==i){if(!t.prop("checked"))return void u();var p=u(),h=p[0],f=p[1],v=!1;if(o()&&!s())if(h!=f)h=f/12,v=!1;else{var g=r();h/=g,v=!0}if("1"===n){var _=($("#bundleType2").data("default-packages")+"").split(","),y=[];$(".package").find("input:checked").each(function(){y.push($(this).data("id"))});for(var w=!0,b=0;b<y.length;b++){for(var k=!1,x=0;x<_.length;x++)_[x]==y[b]&&(k=!0);k||(w=!1)}if(w){var C;if(v){var S=parseFloat($("#bundleType2").data("price"))-parseFloat($("#bundleType1").data("price"));C=parseFloat(h)>=S}else{var T=$("#bundleType2").data("price");C=parseFloat(h)>=parseFloat(T)}if(C)return void apprise("It's cheaper to move up to the next bundle.",{confirm:!0},function(a){a?(e(),$("#bundleType2").trigger("click")):(t.prop("checked",!1),u())})}else{if(v)C=parseFloat(h)>=parseFloat($("#bundle-all").data("core-price"));else{var I=$("#bundleType3").data("price");C=parseFloat(h)>=parseFloat(I)}if(C)return void apprise("It's cheaper to move up to the next bundle.",{confirm:!0},function(a){a?(e(),$("#bundleType3").trigger("click")):(t.prop("checked",!1),u())})}}else{if(v)C=parseFloat(h)>=parseFloat($("#bundle-all").data("core-price"));else{var I=$("#bundleType3").data("price");C=parseFloat(h)>=parseFloat(I)}if(C)return void apprise("It's cheaper to move up to the next bundle.",{confirm:!0},function(a){a?(e(),$("#bundleType3").trigger("click")):(t.prop("checked",!1),u())})}}else{var p=u(),h=p[0],f=p[1],v=!1;if(o()&&!s()){var g=r();h/=g,v=!0}var C;if(v)C=parseFloat(h)>=parseFloat($("#bundle-all").data("secondary-price"));else{var T=$("#bundleType2").data("price");C=parseFloat(h)>=parseFloat(T)}if(C)return void apprise("It's cheaper to buy all products.",{confirm:!0},function(e){e?$("#bundle-all").trigger("click"):(t.prop("checked",!1),u())})}u()}}),$("#bundle-all").change(function(){var e=$(this),t=e.is(":checked"),a=$('input[name="school_type"]').val(),n=$('input[name="bundleType"]:checked'),i=n.val(),o=$('input[name="bundleType2"]:checked'),r=o.val();if("primary"==a)return i?(u(),void $("#bundleType3").trigger("click")):(e.prop("checked",!1),void m());if(!r)return e.prop("checked",!1),void m();u();var s=0;t?$("#choose-packages").find(".package:visible").find("input").reverse().each(function(){var e=$(this);s+=25,h(e,s,!0,!0,!1)}):$("#choose-packages").find(".package").find("input").not('[data-included="1"]').reverse().each(function(){var e=$(this);s+=25,h(e,s,!1,!0,!1)})}),$("#premium_first_steps").find("a").click(function(a){a.preventDefault();var n=window.location.pathname;e();var i=$(this),o=i.data("type"),r=i.data("value");if("user"==o){if("individual"==r&&0===n.indexOf("/premium/school"))return void(window.location="/premium/individual");$.support.history()&&history.pushState("","","/premium/"+r),$("#premium_form").hide(),$("#premium_first_steps").find("div:nth-child(2)").find('a[data-type="school"]').each(function(){$(this).attr("href",window.location+"/"+$(this).data("value"))}),$("#premium_first_steps").children(":nth-child(2)").animate({opacity:"1"},200,function(){$(this).removeClass("inactive"),$(this).find("a").removeClass("selected")}),i.parent().find("a").removeClass("selected"),i.addClass("selected"),$("#premium_form").find('input[name="user_type"]').val(r)}if("school"==o){$("#premium_form").find('input[name="school_type"]').val(r);var s=$("#premium_form").find('input[name="user_type"]').val();if("school"==s){var l=i.data("value"),c="/premium/school/primary";return"primary"!=l&&(c="/premium/school/secondary"),void(window.location=c)}i.parent().find("a").removeClass("selected"),i.addClass("selected"),$("#premium_first_steps").addClass("compact"),$("#premium_form").show(),$("#premium_form").find('input[name="school_type"]').val(r),$.support.history()&&window.location.href!==i.attr("href")&&history.pushState("","",i.attr("href")),"secondary"==r?($("#choose-package").hide(),$("#choose-subject").fadeIn("slow"),$("#premium_page, #schools_premium_page").attr("class","").addClass("secondary"),t("secondary")):($("#choose-subject").hide(),$("#choose-package").fadeIn("slow"),$("#schools_premium_page").attr("class","").addClass("primary"),t("primary")),$("#schools_premium_page, #premium_page").attr("class","").addClass(r),setTimeout(function(){if(s)var e=$("#premium_form").offset().top;else if("primary"==r)var e=$("#choose-package .contentBox.quickQuote").offset().top;else var e=$("#choose-subject .contentBox.quickQuote").offset().top;$("html, body").animate({scrollTop:e},500)},350)}}),$(".startAgain").click(function(t){t.preventDefault(),e(),$("html, body").delay(350).animate({scrollTop:$("#premium_form").offset().top},500)});checkoutHTML=$("#checkout_panel").html(),t(l()),$(".continueToCheckout").attr("disabled",!0),urlPackage=n();var _=!1;if(o()&&$('input[name="packages[]"]').each(function(){var e=$(this);if(e.data("varname")==urlPackage)return e.prop("checked",!0),u(),$(".continueToCheckout").attr("disabled",!1),$("#bundleType"+o()).prop("checked",!0).trigger("click"),_=!0,!1}),o()&&parseInt(r())<12&&$("#bundle-all").parents(".row:first").find(".package-pricing").html(""),"secondary"==l()){var y=$("#bundle-all"),w=y.data("secondary-price");y.parents(".row:first").find("span.bold").html("+"+(y.data("symbol-position")?p(w)+y.data("symbol"):y.data("symbol")+p(w)));var b=!0;$(".package:visible").find("input").each(function(){$(this).prop("checked")||(b=!1)}),b&&y.attr("disabled",!0)}else!s()&&o()||$("#choose-packages").hide();var k=$("#premium_form").data("session-packages")+"";k=k.split(",");var x=$("#premium_form").data("session-subject");if(x){if(!o())return void $("#bundleType2_"+x).trigger("click");$("#premium_form").find(".package").each(function(){var e=$(this).find("input");e.prop("checked",!1),e.data("included")&&e.prop("checked",!0);var t=e.val();k.indexOf(t)!==-1&&e.prop("checked",!0)}),k=[],$("#bundle-all").prop("checked")?($("#bundle-all").prop("checked",!1),$("#bundle-all").trigger("click")):u()}$("#secondaryRenewNow").click(function(){var e=$("#premium_form");e.append('<input type="hidden" name="renew" value="1">'),$("#bundle-all").prop("disabled")&&e.append('<input type="hidden" name="getAllAddons" value="1">'),e.submit()})}}),$(document).ready(function(){var e=7,t=9,a=12,n=6,i=13,o=$(".other-reason"),r=$(".competitor-reason-label"),s=$(".other-reason-label"),l=$(".what-res-label"),c=$(".return-date");$(".cancellation-main-container").on("change",".cancellation-reason-options",function(e){e.preventDefault();var t=$(".cancellation-reason-options :selected").val();"0"!==t&&redirectCancellationPage(t)}).on("change",".cancellation-reasons",function(d){var u=parseInt($(this).find("option:selected").val());switch(u){case a:showOrHideContainers([o,s],[c,r,l]);break;case i:showOrHideContainers([o,r],[c,s,l]);break;case n:showOrHideContainers([o,l],[c,s,r]);break;case e:showOrHideContainers([c],[o]);break;case t:$(this).data("alt-referral-active")&&($("#share-twinkl-altruism-pop-container").remove(),$("body").append('<div id="share-twinkl-altruism-pop-container"><div class="generic_pop" id="share-twinkl-altruism-pop"><img src="/images/loading_green.gif" alt="Loading"></div></div>'),$("#overlay").show(),loadAltruismPopup());break;default:showOrHideContainers([o,s],[c,r,l])}}).on("click",".continue-cancelling",function(e){e.preventDefault();var t=$(this).attr("data-url");0!==t&&redirectCancellationPage(t)}).on("click",".cancellation-contact-button",function(e){e.preventDefault();var t=$(this).attr("data-url");0!==t&&redirectCancellationPage(t)}).on("click",".pause-days-options",function(e){e.preventDefault();var t=$(this),a=$(this).attr("data-value");document.getElementsByClassName("pause-days-options");$(".pause-days-options").removeClass("active"),t.addClass("active"),$(".pauseValue").val(a)}).on("click",".pauseAccountSubmit",function(e){e.preventDefault();var t=($(this),$(".pauseValue").val());$.post("/cancel-membership/pause-save",{pauseValue:t},function(e){"success"!==e.message||redirectCancellationPage("pause-confirmed")},"json")}).on("click",".downgradeAccountSubmit",function(e){e.preventDefault();var t=($(this),$(this).attr("data-value").toLowerCase());t="core"===t?1:2,$.post("/cancel-membership/downgrade-save",{buttonValue:t},function(e){"success"!==e.message||redirectCancellationPage("downgrade-confirmed")},"json")}).on("click",".submitSurvey",function(e){e.preventDefault();var t=$(".satisfaction-survey-rating"),a=t.find(":selected").val(),n=$(".satisfaction-survey-reason"),i=n.find(":selected").val(),o=$(".cancellation-reasons"),r=o.length>0?parseInt(o.find("option:selected").val())||0:12,s=$(".other-reason-box").val(),l=$(".return-date-box").val(),c=!1;"0"===a&&(t.addClass("error"),c=!0),"0"===i&&(n.addClass("error"),c=!0),0===r&&(o.addClass("error"),c=!0),c||$.post("/cancel-membership/survey-save",{surveySatisfactionRating:a,surveySatisfactionReason:i,cancellationReason:r,otherReason:s,returnDate:l},function(e){"success"===e.message&&redirectCancellationPage("renew-membership")})}).on("focus",".satisfaction-survey, ",function(){$(this).removeClass("error")}).on("click","#maternityPause",function(){var e=$("#overlay");e.show();var t=$("#pause-maternity-confirmation-popup");t.show(),t.center().css({top:0}),document.body.scrollTop=document.documentElement.scrollTop=0}).on("click",".downgradeAccount",function(e){var t=$("#overlay");t.show();var a=$("#downgrade-confirmation-popup"),n=a.find("#modal-container");n.removeAttr("class").addClass("reveal-animate"),a.show(),a.center().css({top:0}),document.body.scrollTop=document.documentElement.scrollTop=0})});var twinklCaptcha={execute:function(e,t,a,n,i){var o="undefined"!=typeof Promise&&Promise.toString().indexOf("[native code]")!==-1;if("v3"===e&&o&&"undefined"!=typeof grecaptcha&&"undefined"!=typeof reCAPTCHA_V3_site_key)grecaptcha.ready(function(){grecaptcha.execute(reCAPTCHA_V3_site_key,{action:t}).then(function(e){n(e,"v3")})["catch"](function(){n("","")})});else if("undefined"!=typeof grecaptcha&&"undefined"!=typeof reCAPTCHA_V2_site_key){var r="captcha"+Date.now();$("#"+a).append($('<div id="'+r+'">')),i&&i(),grecaptcha.ready(function(){grecaptcha.render(r,{sitekey:reCAPTCHA_V2_site_key,
callback:function(e){n(e,"v2")}})})}else n("","")},clearV2:function(e){"undefined"!=typeof grecaptcha&&$("#"+e+":not(:empty)").length&&(grecaptcha.reset(),$("#"+e).empty())}},earlyAdopter={init:function(){setTimeout(earlyAdopter.check,3e3)},check:function(){earlyAdopter.checks.isMobile()||earlyAdopter.checks.hasPop()||(earlyAdopter.addListeners(),$("#eyfs-early-adopter").removeClass("d-none"))},addListeners:function(){$(".eyfs-pop-container a").on("click",function(){createCookie("eyfsPopUp","1",30)}),$(".eyfs-close").on("click",function(){createCookie("eyfsPopUp","1",30),$("#eyfs-early-adopter").hide()}),$(".eyfs-overlay").on("click",function(){createCookie("eyfsPopUp","1",30),$("#eyfs-early-adopter").hide()})},checks:{isMobile:function(){return $("body").hasClass("is-mobile-device")},hasPop:function(){return $(".generic_pop:visible").length>0}}};earlyAdopter.init(),document.twinkl=document.twinkl||{},document.twinkl.exitIntent=function(){var e=0,t=null;readCookie("twinklid")||$(document).scroll(function(){e=$(this).scrollTop()}).mousemove(function(a){var n=t-a.pageY,i=a.pageY-n;i<t&&i<=e&&(readCookie("exitIntentShown")||(createCookie("exitIntentShown",1,30),$.post("/exit-intent/show-exit-popup",{},function(e){var t=$("body"),a=$('<div id="exitIntentMainContainer" class="generic_exit_pop">'),n=$("#overlay"),i=e;t.append(a),a.html(i),a.center(),a.show(),n.show(),$("body #exitIntentSubmitEmail").click(function(){var e=$("body .exitIntentContainer .exitIntentInput").val();$.post("/exit-intent/save-user-email",{email:e,segment_id:5},function(e){$(".exitIntentMessage").html(e.html)},"json")}),$(".closeExitIntent").click(function(){a.hide(),a.remove(),n.hide()})}))),t=a.pageY})},(cookieTrackingLink=document.querySelector("#countryFlag"))&&cookieTrackingLink.addEventListener("click",function(e){e.target.classList.contains("cookieConsent")&&fetch("/cookie-tracking/popup-html").then(function(e){return e.json()}).then(function(e){document.querySelectorAll(".cookie-consent-popup-container").forEach(function(e){e.remove()}),document.querySelector("body").insertAdjacentHTML("beforeend",e.html),Function(e.jsVars)(),Function(e.js)()})}),$("#footer .cookieConsentFooter").click(function(){fetch("/cookie-tracking/popup-html").then(function(e){return e.json()}).then(function(e){document.querySelectorAll(".popup-div-container").forEach(function(e){e.remove()}),document.querySelector("body").insertAdjacentHTML("beforeend",e.html),Function(e.jsVars)(),Function(e.js)()})}),function(e){function t(t){function a(e,t){t?e.on("contextmenu",i):e.off("contextmenu",i)}function n(t,a,n){a?n?(t.on("click","a",r.bind(n)),e("body").on("click",o.bind(n)),e("body").on("contextmenu",o.bind(n))):(t.on("click","a",r),e("body").on("click",o),e("body").on("contextmenu",o)):(t.off("click","a",r),e("body").off("click",o),e("body").off("contextmenu",o))}function i(t){var a=e(t.currentTarget),i=a.prop("href")||a.data("href");if(t.shiftKey&&null!=i&&""!==(i=i.trim())){t.preventDefault(),t.stopImmediatePropagation(),o();var r=c();r.data("href",i),r.find("a").each(function(){var t=e(this);null!=t.prop("href")&&""!==t.prop("href").trim()||t.prop("href",i)}),n(r,!0),r.css({top:t.pageY,left:t.pageX}),e("body").append(r)}}function o(t){var a=e("body .contextmenu.dl");n(a,!1),a.remove()}function r(t){t.preventDefault(),t.stopImmediatePropagation();var a=e(t.currentTarget),n=a.parents("div.contextmenu.dl"),i=a.prop("href")||n.data("href");if(null!=i&&""!==(i=i.trim())){var r=a.data("action"),s=1===parseInt(a.data("legacy"));switch(s&&(i+=(i.indexOf("?")===-1?"?":"")+"legacy=1"),r){case"open_new_tab":window.open(i,a.prop("target"));break;case"open_tab":window.location.href=i;break;case"copy":return copyTextToClipboard(i),void a.find("li").flash(null,function(){e(this).css({"background-color":null}),o(null)})}o(null)}}function c(t){t=t||{},t.id=t.id||s;var a=null;return a=e((a=e('script[type="text/html"]#'+l)).length>0?a.html():'<div class="contextmenu dl">   <ul>       <a data-action="open_tab">\t\t\t<li>Open download link in current tab</li>       </a>       <a data-action="copy">       \t<li>Copy download link address</li>       </a>   </ul></div>'),a.attr(t),a}(t&&0!==(t=e(t)).length||isJQuery(this)&&0!==(t=e(this)).length)&&a(t,!0)}function a(t,a,i,o){function r(e,t){t?e.on("click",s):e.off("click",s)}function s(n){var o=e(this);null!=o.attr("expanded")?c(t,a,i):l(t,a,i)}function l(e,t,a){e.attr("expanded",""),t.attr("expanded",""),null!=a&&(a.attr("expanded",""),animateCSS(a,o.expand.name,null,o.opts))}function c(e,t,a){e.attr("expanded",null),t.attr("expanded",null),null!=a&&(a.attr("expanded",null),animateCSS(a,o.collapse.name,null,o.opts))}function d(e,t){var a=u(),n=a.expand,i=a.collapse,o=a.opts,r=null;return null!=t&&(null!=(r=t.data("animated-expand-name"))&&(n["class"]=r),null!=(r=t.data("animated-collapse-name"))&&(i["class"]=r),t.hasClass("animated")&&(o.triggerRemoveClassAnim=!1)),Object.assign(a,e||{})}function u(){return{expand:p(),collapse:h(),opts:m()}}function p(){return{name:"slideInDown"}}function h(){return{name:"slideOutUp"}}function m(){return{}}var f=!1;if(t=t||e(this),null==t||0===(t=e(t)).length){if(!isJQuery(this)||0===(t=e(this)).length)return;f=!0}var v=null==a||0===(a=e(a)).length,g=null==i||0===(i=e(i)).length;if(f||v||g){var _=n(t);if(f&&(t=_.expdElems),v&&(a=_.ctrlElems),g&&(i=_.animElems),null==a||0===a.length)return;_=void 0}o=d(null,a),r(a,!0)}function n(t){var a,n={expdElems:null,ctrlElems:null,animElems:null};return(t=e(t)).length>0&&(t.hasClass("expandable")?n.expdElems=t:(a=t.find(".expandable")).length>0?n.expdElems=a:(a=t.parents(".expandable")).length>0&&(n.expdElems=a),null!=n.expdElems&&(a=n.expdElems,a.hasClass("expandable-control")?n.ctrlElems=a:n.ctrlElems=a.find(".expandable-control"),a.hasClass("expandable-anim")?n.animElems=a:n.animElems=a.find(".expandable-anim"))),n}function i(t,a){t||(t=4e3),a||(a=750),e(this).effect("highlight",{},500,function(){e(this).delay(t).effect("fade",{},a,function(){e(this).remove()})})}function o(){var t=e(this);t.append('<div class="dismiss">&times;</div>'),t.on("click",".dismiss, .no-thanks, .close",function(t){t.preventDefault(),e(t.delegateTarget).fadeOut(function(){e(t.delegateTarget).remove()})})}function r(t,a){function n(t,a){t.each(function(){iTargElem=e(this);var t=iTargElem.data("gtm-action")||"click";a?iTargElem.on(t,i):iTargElem.off(t,i)})}function i(t){if("undefined"!=typeof dataLayer&&null!=dataLayer){var a=e(this),n=a.data("gtm-id");if(null!=n&&""!==String(n).trim()){var i=returnTwinklVarProp("gtmEvtsMap"),o=null;null!=i&&null!=(o=i[n])&&(o=Object.assign({},o,{eventValue:Object.assign({},o.eventValue||{},{timestamp:timeNow()})}),dataLayer.push(o))}}}(t&&0!==(t=e(t)).length||isJQuery(this)&&0!==(t=e(this)).length)&&n(t,!0)}if("undefined"!=typeof e&&null!=e){var s="dlCtxtMenu",l="dlCtxtMenuTempl";e.twinkl=e.twinkl||{},e.twinkl.comp=Object.assign(e.twinkl.comp||{},{initDlContextMenu:t,initAnimateCssExpandable:a,initGtmEventTracking:r,flashFadeOut:i,addDismissableEvent:o}),e.fn.twklCompInitDlContextMenu=t,e.fn.initAnimateCssExpandable=a,e.fn.initGtmEventTracking=r,e.fn.twinklFlashFadeOut=i,e.fn.twinklAddDismissableEvent=o}}("undefined"!=typeof $?$:null),function(e){function t(t,a){null==a&&(a=e('[data-toggle="dialog"]')),(a&&0!==(a=e(a)).length||isJQuery(this)&&0!==(a=e(this)).length)&&(t=t||{},n(a,t),i(a,!0))}function a(e){try{return Object.assign({},e.data("config")||{})}catch(t){return{}}}function n(t,a){t.each(function(t,n){e(n).data("config",a)})}function i(e,t){null!=e&&(t===!0?e.click(o):e.off("click",o))}function o(t){t.preventDefault();var n=e(t.currentTarget),i=Object.assign({},a(n)),o=n.attr("href")||n.attr("data-dialog-href");if(i=p(i),null!=o)return void e.get(o,function(t){return"string"==typeof t?void e(t).dialog(i):void apprise("Whoops! Something went wrong loading the popup content. Please close and try again.")}).fail(function(e){apprise(parseAjaxResponseMessage(null,e,"Whoops! Something went wrong loading the popup content. Please close and try again."))});var r=e(n.attr("data-dialog-target"));if(0===r.length)throw new Error("Unable to open dialog.");r.dialog(i)}function r(e){h(e,!0,d(e)),e.trigger(TWKL_EVENT_DIALOG_INIT_COMPLETE)}function s(t){try{return e(t||this).dialog("widget")}catch(a){return null}}function l(t,a){try{a=e(a||this);var n=".ui-dialog-content.ui-widget-content";return t===!0?e(a).parents(n):e(a).find(n)}catch(i){return null}}function c(){return{form_submit:{selector:"form",event:"submit"}}}function d(t,a){try{return(null!=a?e(t).dialog("option",a):e(t).dialog("option"))||{}}catch(n){return{}}}function u(e,t){if(null==t)return d(e,"twinklOptions");try{return t.twinklOptions||{}}catch(a){return{}}}function p(e){e=e||{};var t,a,n,i=[["open",m],["close",v],["create",f]],o=i.length;for(t=0;t<o;t++)iKey=i[t][0],a=e[iKey],n=i[t][1],e[iKey]=function(e,t){return function(a){null!=e&&e(a),t(a)}}(a,n);return e}function h(e,t,a){var n=u(e,a),i=n.events;if(null!=i){var o,r,l,d,p=s(e),h=c();for(iKey in h)if(null!=(r=i[iKey])){if(iEvtObj=h[iKey],null==(l=iEvtObj.selector))throw new Error("Event selector is not defined.");o=iEvtObj.event||iKey,0!=(d=p.find(l)).length&&(t===!0?d.on(o,r):d.off(o,r))}}}function m(t){var a=e(t.target);a.trigger(TWKL_EVENT_DIALOG_OPEN)}function f(t){var a=e(t.target);a.trigger(TWKL_EVENT_DIALOG_READY),r(a)}function v(t){var a=e(t.target);a.trigger(TWKL_EVENT_DIALOG_CLOSE)}"undefined"!=typeof e&&null!=e&&(window.TWKL_EVENT_DIALOG_OPEN="twinkl_event_dialog_open",window.TWKL_EVENT_DIALOG_CLOSE="twinkl_event_dialog_close",window.TWKL_EVENT_DIALOG_READY="twinkl_event_dialog_ready",window.TWKL_EVENT_DIALOG_INIT_COMPLETE="twinkl_event_dialog_init_complete",e.twinkl=e.twinkl||{},e.twinkl.dialog=e.twinkl.dialog||{},e.twinkl.dialog.initDialogButton=t,e.twinkl.dialog.initDialog=r,e.twinkl.dialog.returnDialogElement=s,e.twinkl.dialog.returnDialogContentElement=l,e.fn.twinklInitDialogButton=t,e.fn.twinklInitDialog=r,e.fn.twinklReturnDialogElement=s,e.fn.twinklReturnDialogContentElement=l)}("undefined"!=typeof $?$:null),function(){"undefined"!=typeof $&&("function"!=typeof $.support.contenteditable&&($.support.contenteditable=function(){var e=document.body||document.documentElement;return"contentEditable"in e}),"function"!=typeof $.support.history&&($.support.history=function(){return!(!window.history||!window.history.pushState)}),"function"!=typeof $.support.transition&&($.support.transition=function(){var e=document.body||document.documentElement,t=e.style;return void 0!==t.transition||void 0!==t.WebkitTransition||void 0!==t.MozTransition||void 0!==t.MsTransition||void 0!==t.OTransition}),"function"!=typeof $.support.video&&($.support.video=function(){return"undefined"!=typeof document.createElement("video").canPlayType}))}(),function(){"undefined"!=typeof $&&("function"!=typeof $.fn.replaceTagName&&($.fn.replaceTagName=function(e){for(var t=[],a=this.length;a--;){for(var n=document.createElement(e),i=this[a],o=i.attributes,r=o.length-1;r>=0;r--){var s=o[r];n.setAttribute(s.name,s.value)}n.innerHTML=i.innerHTML,$(i).after(n).remove(),t[a]=n}return $(t)}),"function"!=typeof $.fn.reverse&&($.fn.reverse=function(){return this.pushStack(this.get().reverse(),arguments)}),"function"!=typeof $.fn.flash&&($.fn.flash=function(e,t){var a=$(this).css("background-color"),n=!1;return null==e&&(e="#FFFF93",n=!0),$(this).animate({"background-color":e},150,function(){$(this).animate({"background-color":a},700,t)}),$(this)}),"function"!=typeof $.fn.flashText&&($.fn.flashText=function(e,t){var a=$(this).css("color"),e=e,n=!1;return null==e&&(e="#FFFF93",n=!0),$(this).animate({color:e},150,function(){$(this).animate({color:a},700,t)}),$(this)}),"function"!=typeof $.fn.toggleBetween&&($.fn.toggleBetween=function(){var e=this[0],t=this[1];return t.forEach(function(e){e.is(":visible")&&e.hide()}),e.forEach(function(e){e.is(":hidden")&&e.show()}),$(this)}),"function"!=typeof $.fn.center&&($.fn.center=function(){return this.css("position","absolute"),this.css("top",Math.max(0,($(window).height()-$(this).outerHeight())/2+$(window).scrollTop())+"px"),this.css("left",Math.max(0,($(window).width()-$(this).outerWidth())/2+$(window).scrollLeft())+"px"),this}),"function"!=typeof $.fn.outerHTML&&($.fn.outerHTML=function(){return jQuery("<div />").append(this.eq(0).clone()).html()}),"function"!=typeof $.fn.exists&&($.fn.exists=function(e){var t=[].slice.call(arguments,1);return this.length>0&&"function"==typeof e&&e.call(this,t),this}),"function"!=typeof $.fn.isEmpty&&($.fn.isEmpty=function(){return 0===$(this).length}),"function"!=typeof $.fn.scrollBottom&&($.fn.scrollBottom=function(){return $(document).height()-this.scrollTop()-this.height()}),"function"!=typeof $.fn.returnBgClass&&($.fn.returnBgClass=function(){var e=$(this).attr("class").split(" "),t="";return $.each(e,function(e,a){a.match(/^bg-.*/)&&(t=a)}),t}),"function"!=typeof $.fn.stripBgClasses&&($.fn.stripBgClasses=function(){var e=$(this).attr("class").split(" "),t="";return $.each(e,function(e,a){a.match(/^bg-.*/)||(t+=a+" ")}),$(this).attr("class",t.trim()),$(this)}),"function"!=typeof $.fn.overflown&&($.fn.overflown=function(){var e=this[0];return e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth}))}(),function(e){function t(t){function a(t,a){null==t&&(t={}),null==a&&(a={}),b=null,k=null;var n;null!=t.elems&&(null!=t.elems.searchForm&&(b=t.elems.searchForm),null!=t.elems.searchPhrase&&(k=t.elems.searchPhrase)),t.useSearchSelectors===!0&&(null==b&&(n=e("#search_form")).length>0&&(b=n),null==k&&null!=b&&(n=b.find("#phrase")).length>0&&(k=n))}function s(e,t){null==e&&(e={});var a=w();if(a.autocompleteEnabled===!0){if(a.fancySearchEnabled===!0&&a.elasticSearchEnabled===!1)return e.type===i?void setupTwinklGoFancySearchAutocomplete(!0,e):void d(!0,e);if(a.elasticSearchEnabled===!0)return void p(!0,e);h(!0,e)}}function d(a,n){if(null!=k){null==n&&(n={});var i={},o="mainSearch",r="",s=e("#search_form"),l=e("#search_box"),c=parseInt(n.autocompleteDelay);isNaN(c)&&(c=t.autocompleteDelay);var d=n.baseUrl;null==d&&(d=t.baseUrl),s.find("#phrase").parents(".front_panel_container").length&&(o+="Home"),l.addClass(o),e("#search_form #phrase").on("blur",function(){e(this).removeClass("loading"),l.removeClass("visible"),e("#search_ajax").slideUp("fast")}),l.on("mousedown","#search_ajax",function(e){e.preventDefault()}),l.on("click",'.resource-controls a[href="/sign-in"]',function(t){var a=e(this).closest(".resource-details").find("h3 a");createCookie("currentPage",a.attr("href"),1,10)}),l.on("click",".resource-suggestions li",function(t){var a=e(t.target);if("/sign-in"==a.attr("href")||"undefined"!=typeof a.attr("download")||"undefined"!=typeof a.attr("class")&&a.attr("class").includes("create_fav"));else{var n=e(this).find("h3 a");window.location=n.attr("href")}}),l.on("click",".search-suggestions li a",function(t){var a=e(this).text(),n=2;"1"==e(this).data("no-suggestion")&&(n=5),e("#search_form #search_origin").val(n),e("#search_form #phrase").val(a),t.preventDefault(),s.submit()}),l.on("click",".more-resources a",function(e){s.submit()});var u,p=debounce(function(){var t=e("#category").val(),a=e("#search_form #phrase").val();a!=r&&(a.length<5||(u&&4!=u.readyState&&u.abort(),e("#phrase").addClass("loading"),r=a,u=e.post(d,{query:a,site:t,action:"fancyautosuggest"},function(t){var n,i=e("#search_box");if(i.addClass("visible"),"success"!=t.message)e("#search_ajax").length?(n=e("#search_ajax"),"aborted"==t.message?n.find(".more-resources a").length&&(n.find(".more-resources a").attr("href","/search/"+encodeURIComponent(a)),n.find(".more-resources a").find("strong").text(a.trim())):n.replaceWith("<div id='search_ajax' class='error'>"+t.message+"</div>")):"aborted"!=t.message&&i.append("<div id='search_ajax' class='error'>"+t.message+"</div>");else if(e("#search_ajax").length)n=e("#search_ajax"),n.removeClass("error"),n.replaceWith(t.html);else{var o=e(t.html);o.hide(),o.appendTo(i).slideDown()}e("#phrase").removeClass("loading")},"json")))},c),h=function(t,a){e("#phrase").addClass("loading"),e.post(d,{query:t,site:a,action:"fancyautosuggest",group:"resources"},function(a){l.addClass("visible");var n;"success"!=a.message?e("#search_ajax").length?"aborted"!=a.message&&e("#search_ajax").replaceWith("<div id='search_ajax' class='error'>"+a.message+"</div>"):"aborted"!=a.message&&l.append("<div id='search_ajax' class='error'>"+a.message+"</div>"):e("#search_ajax").length&&(n=e("#search_ajax"),n.removeClass("error"),n.find(".more-resources strong").text(t),n.find(".more-resources a").attr("href","/search/"+encodeURIComponent(t)),n.find(".resource-suggestions").replaceWith(a.html)),e("#phrase").removeClass("loading"),i.length>100&&(i={}),void 0!==typeof a.html&&(i[t]=a.html)},"json")};e("#search_form #phrase").on("keydown",function(t){if(13==t.keyCode&&e("#search_box").find(".search-suggestions li.active").length){var a=e("#search_box").find(".search-suggestions li.active a").text();e("#search_form #phrase").val(a)}}),e("#search_form #phrase").on("keyup",function(t){var a=e("#search_form #phrase").val(),n=e("#search_box"),o=e("#search_ajax");if(!e("#search_ajax").length&&a.length>4&&a!=r&&(e("#phrase").addClass("loading"),p()),suggestions=o.find(".search-suggestions li").length,40==t.keyCode||38==t.keyCode){if(40==t.keyCode)if(n.find(".search-suggestions li.active").length){var s=n.find(".search-suggestions li.active").removeClass("active"),l=s.parent().children();l.eq((l.index(s)+1)%l.length).addClass("active")}else n.find(".search-suggestions li:first-child").addClass("active");if(38==t.keyCode)if(n.find(".search-suggestions li.active").length){var s=n.find(".search-suggestions li.active").removeClass("active"),l=s.parent().children();l.eq((l.index(s)-1)%l.length).addClass("active")}else n.find(".search-suggestions li:first-child").addClass("active");var a=n.find(".search-suggestions li.active a").text(),c=e("#category").val();suggestions>1&&(void 0!==i[a]?(o.find(".more-resources strong").text(a),o.find(".more-resources a").attr("href","/search/"+encodeURIComponent(a)),o.find(".resource-suggestions").replaceWith(i[a])):h(a,c))}else{var a=e("#search_form #phrase").val();if(a.length<5)return;a!=r&&p()}})}}function u(e,t,a){if(200===t.status){var n=t.getResponseHeader("Etag");n&&C.set(e,{etag:n,data:a,expires:t.getResponseHeader("Expires")})}else 304===t.status&&C.has(e)&&(a=C.get(e).data);return a&&void 0===a.error?a:[]}function p(a,i){var o=new n;null!=k&&(null==i&&(i={}),e('[name="term"], [name="q"]').each(function(){if(!e(this).parent().parent().hasClass("searchBlog")&&!e(this).parent().parent().hasClass("searchHelp")){var a=0;if(e(this).parent().parent().hasClass("searchWiki")&&(a=1),!e(this).parents("#bookmarks").length){var n=parseInt(i.autocompleteDelay);isNaN(n)&&(n=t.autocompleteDelay);var r=i.baseUrl;null==r&&(r=t.baseUrl),e(this).parents("form").submit(function(t){return term=e(this).find("#phrase").val(),term.trim().length?(o.add(term),void o.addVeryRecent(term)):void t.preventDefault()});var s,d=dataLayer[0].autocomplete.minLength?dataLayer[0].autocomplete.minLength:3,p=dataLayer[0].autocomplete.suggestId?dataLayer[0].autocomplete.suggestId:9999,h=dataLayer[0].autocomplete.delay?dataLayer[0].autocomplete.delay:n,m=(e("[id='phrase']"),e("#phrase"));o.getVeryRecent()&&""===m.val()&&window.location.pathname.startsWith("/resource/")&&document.referrer.startsWith("https://"+window.location.hostname+"/search?")&&(m.val(o.getVeryRecent()),m.focus(),m.select());var v=0;e(this).autocomplete({delay:h,source:function(t,n){var i=t.term.replace(/[\t\n\r]/gm," "),h=i.length;s=o.get();var m=document.querySelector(".similarSearches"),g=m&&m.childNodes.length?m.querySelectorAll("a.similar"):[];v=0;var _="https://images.twinkl.co.uk/tr/raw/upload/u/ux/";if(g.length&&h<d)return void n(e.map(g,function(e,t){var a=e.text.trim();if(a&&t<13){var n=_+"blank-search-magnifyingglass_ver_1.png",i=e.querySelector("img");return{label:a,value:a,image:i?'<img src="'+i.src+'" width="25" height="25">':'<img src="'+n+'" width="25" height="25">'}}}));if(h<d)return s.length?(n(e.map(s,function(e){if(e)return{label:e,value:e,image:c,isRecentSearch:1}})),void f(r,o)):void e.ajax({dataType:"json",url:r+"/sayt/recent/search",cache:!1,success:function(t){if(t=t.map(function(e){return o.clean(e)}),o.set(t),s=t,s.length)n(e.map(t,function(e){if(e)return{label:e,value:e,image:c,isRecentSearch:1}})),f(r,o);else{var a=r+"/sayt/trending/search";e.ajax({dataType:"json",url:a,cache:!0,beforeSend:function(e){C.has(a)&&e.setRequestHeader("If-None-Match",C.get(a).etag)},success:function(e,t,i){e=u(a,i,e),v=1,n(e)}})}}});var y=encodeURIComponent(i);y=y.replace(/%00/g,"");var w=0===location.pathname.indexOf("/resources"),b={};if(dataLayer[0].autocomplete&&dataLayer[0].autocomplete.length&&(b.length=dataLayer[0].autocomplete.length),w){var k=e('meta[name="twinkl-breadcrumb"]').attr("content"),x=k?k.split(",").reverse()[0]:"";x||(x="/resources"===window.location.pathname?3754:""),x&&(b.categoryId=x)}var $="?"+new URLSearchParams(b).toString(),S=r+"/sayt/resource/"+y+"/"+p+$;if(a){var T=e("#wikiType").val();S="/"+T+"-wiki/search-suggest?term="+y}e.ajax({dataType:"json",cache:!0,url:S,beforeSend:function(e){C.has(S)&&e.setRequestHeader("If-None-Match",C.get(S).etag)},success:function(a,d,p){a=u(S,p,a);var h=a.filter(function(e){return e.includes("phonics")}),m=dataLayer[0].geo?dataLayer[0].geo:"",v=parseInt(dataLayer[0].user.country_id?dataLayer[0].user.country_id:0);if((m.match("/^US_")||226===v)&&(h=!1),s){var _=s.filter(function(e){return 0===e.indexOf(i)&&a.indexOf(e)===-1}).splice(0,3);_.length>0&&(a=_.concat(a))}h.length&&a.splice(1,0,"phonics"),n(e.map(a,function(a,n){for(var i=a,o="",r="",d=l,u=0;u<t.term.length&&t.term.charAt(u).toLowerCase()===a.charAt(u).toLowerCase();u++)i=a.substr(0,u+1),o=a.substr(u+1);var p=i;o&&(p+="<strong>"+o+"</strong>");var m=0;return g&&e.map(g,function(e){var t=e.text.trim();if(t.toLowerCase()===a.toLowerCase()){var n=e.querySelector("img");n&&(d='<img src="'+n.src+'" width="25" height="25">')}}),s.includes(a)&&(p='<span class="previous" style="color:#c45500;">'+p+"</span>",m=1,d=c),1===n&&h.length&&(m=0,p='<img src="https://images.twinkl.co.uk/tr/raw/upload/u/ux/phonics-logo-colours-2-1-1_ver_1.png" height="25">',d='<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path d="M6.5 11 12 2l5.5 9Zm11 11q-1.875 0-3.188-1.312Q13 19.375 13 17.5q0-1.875 1.312-3.188Q15.625 13 17.5 13q1.875 0 3.188 1.312Q22 15.625 22 17.5q0 1.875-1.312 3.188Q19.375 22 17.5 22ZM3 21.5v-8h8v8ZM17.5 20q1.05 0 1.775-.725Q20 18.55 20 17.5q0-1.05-.725-1.775Q18.55 15 17.5 15q-1.05 0-1.775.725Q15 16.45 15 17.5q0 1.05.725 1.775Q16.45 20 17.5 20ZM5 19.5h4v-4H5ZM10.05 9h3.9L12 5.85ZM12 9Zm-3 6.5Zm8.5 2Z"/></svg>',r="/phonics"),{label:p,value:a,isRecentSearch:m,image:d,link:r}})),"/search"===location.pathname&&e(".ui-autocomplete-input").length&&e(".ui-autocomplete-input").css({"border-bottom-left-radius":"0px !important"}),f(r,o)}})},minLength:0,open:function(t,a){e(".ui-autocomplete").off("hover");var n=e(this).autocomplete("widget"),i=e(this).width()+parseInt(e(this).css("padding-left"));n.css({width:i+"px","border-top-left-radius":0,"border-top-right-radius":0}),e(this).css({"border-bottom-right-radius":0,"border-bottom-left-radius":0,"padding-bottom":"9.5px"}),"/search"===location.pathname&&e(this).css({"border-bottom-left-radius":0})},close:function(t,n){a||e(this).css({"border-bottom-left-radius":"20px","border-bottom-right-radius":"20px"})},select:function(t,a){var n=a.item.value;n=(n+"").replace(/&#\d+;/gm,function(e){return String.fromCharCode(e.match(/\d+/gm)[0])}),a.item.value=n,e(this).val(n),a.item.link?window.location.href=a.item.link:e(this).parent().find("button").trigger("click")},appendTo:e(this).parent()}).click(function(t){e(this).autocomplete("search",""),"/search"===location.pathname&&e(".ui-autocomplete-input").length&&e(".ui-autocomplete-input").css({"border-bottom-left-radius":"0px !important"})}).data("ui-autocomplete")._renderItem=function(t,a){if(v){e(t).addClass("dropDownActive trending"),t.html()||e('<div class="trendingSearches"></div>').append("Trending Searches").appendTo(t);var n={name:"search_trending_submitted",searchTerm:a.value};return e("<li></li>").data("item.autocomplete",a).append('<div class="trendingSearchIcon"></div>').append(renderTrackingAttribute(e("<a></a>"),n).text(a.label)).appendTo(t)}e(t).removeClass("trending"),e(t).addClass("dropDownActive");var i=a.isRecentSearch?a.isRecentSearch:"",o="";i&&(o='<div class="delete"><span class="searchRemove dismiss">x</span></div>');var r={name:i?"search_recent_submitted":"search_autocomplete_submitted",typedSearch:e("#phrase").val(),searchTerm:a.value};return e("<li></li>").data("item.autocomplete",a).append(renderTrackingAttribute(e("<a></a>"),r).append(a.image).append('<div class="searchLabel">'+a.label+"</div>").append(o)).appendTo(t)}}}}))}function h(a,n){if(null!=k){null==n&&(n={});var i=e("#search_form"),o="mainSearch",r=e("#search_box");i.find("#phrase").parents(".front_panel_container").length&&(o+="Home"),r.addClass(o);var s=parseInt(n.autocompleteDelay);isNaN(s)&&(s=t.autocompleteDelay);var l=n.baseUrl;null==l&&(l=t.baseUrl),e("#search_form").find("#phrase[data-autocomplete='1']").autocomplete({delay:s,source:function(t,a){var n=e("#category").val();e.post(l,{query:t.term,site:n,action:"getautosuggest"},function(n){a(e.map(n.results,function(e){return e.name?{label:e.name,value:e.name}:{label:e,value:e}}));var i=e("ul.ui-autocomplete");i.css("left");i.css("width","346px"),i.append("<li class='ui-menu-item inspire-me'><a href='/inspire-me/"+encodeURIComponent(t.term).replace(/%20/g,"+")+"' class='ui-corner-all'>Looking for inspiration? <span class='hidden'>Inspire me!</span></a></li>"),i.on("hover","li.inspire-me a",function(){e(this).find("span.hidden").fadeIn()}),e("#phrase").removeClass("loading")},"json")},minLength:2,open:function(t,a){e("#search_form #phrase").attr("data-active")||e("#search_form #phrase").autocomplete("close")},messages:{noResults:"",results:function(){}},select:function(t,a){e("#search_form #phrase").val(a.item.value),i.submit()},appendTo:"#search_box"});var o="mainSearch";i.find("#phrase").parents(".front_panel_container").length&&(o+="Home"),i.find("#phrase[data-autocomplete='1']").autocomplete("widget").addClass(o)}}function m(e,t){null!=e.events&&(null!=e.events.keydown&&v(!0),null!=e.events.keypress&&g(!0))}function f(t,a){e("#search_box .delete .searchRemove").click(function(n){n.preventDefault(),n.stopPropagation();var i=e(this).parent().parent(),o=i.find(".searchLabel").text();i.remove(),a["delete"](o),e.ajax({type:"POST",dataType:"json",url:t+"/sayt/recent/remove",data:{text:o}})})}function v(e,t){null!=k&&k.keydown(function(e){k.attr("data-active","1"),k.data("active","1")})}function g(e,t){null!=k&&k.keydown(function(e){k.attr("data-active","1"),k.data("active","1")})}function _(t,a){e("#refine_by_bar.search a.showMoreOptions").click(function(t){t.preventDefault(),e("#refine_by_bar.search .searchArea li").removeClass("hidden"),e(this).remove()})}function y(t){var a={};return e.extend(a,{type:null,baseUrl:o,autocomplete:!0,autocompleteDelay:500,autocompleteMinChars:3,events:{keydown:!0,keypress:!0},showMoreOptions:[],useSearchSelectors:!0},t||{}),a}function w(e,t){null==t&&(t={});var a,n=null;switch(e){case void 0:case null:case"":n={},null==(a=t.searchPhraseElem)&&null==(a=k)||(n.autocompleteEnabled="1"==a.data("autocomplete"),n.fancySearchEnabled="1"==a.data("fancy"),n.elasticSearchEnabled="1"==a.data("elastic"));break;default:throw new Error("Unexpected return type whilst getting search element data: "+e,500)}return n}t=y(t);var b=null,k=null;a(t);var x=null==t.type?null:String(t.type).toLowerCase();switch(x){case void 0:case null:case"":t.type=null;break;case i:t.type=i,t.baseUrl=r;break;default:throw new Error("Unexpected search type whilst initialising search: "+t.type,500)}null!=b&&b.length>0&&(null!=k&&k.length>0&&(t.autocomplete===!0&&s(t),null!=t.events&&m(t)),null!=t.showMoreOptions&&_(t));var C=function(){function e(){try{localStorage.setItem(t,JSON.stringify(a))}catch(e){console.warn("Failed to persist "+t,e)}}var t="etagCache",a={},n=Date.now(),i=!1;try{var o=localStorage.getItem(t);o&&(a=JSON.parse(o))}catch(r){localStorage.removeItem(t)}for(var s in a)if(a.hasOwnProperty(s)){var l=new Date(a[s].expires).getTime();a[s].expires&&l<n&&(delete a[s],i=!0)}return i&&e(),{get:function(e){return a.hasOwnProperty(e)?a[e]:null},set:function(t,n){a[t]=n,e()},has:function(e){return null!==this.get(e)},remove:function(t){a.hasOwnProperty(t)&&(delete a[t],e())},clear:function(){a={},e()},keys:function(){var e=[];for(var t in a)a.hasOwnProperty(t)&&e.push(t);return e}}}();!function(){if(window.sessionStorage&&window.localStorage)try{var e=JSON.parse(sessionStorage.getItem("search:recent"))||[],t=e.map(function(e,t){return{id:Date.now().toString()+t.toString(),label:e}});localStorage.setItem("AUTOCOMPLETE_RECENT_SEARCHES:twinkl-search",JSON.stringify(t))}catch(a){return}}()}function a(t,a){function n(e,t,a){null!=e&&0!==e.length&&(a=a||{},t?e.on("contextmenu",i.bind(a)):e.off("contextmenu",i))}function i(t){var a=null;if(t){if(t.ctrlKey)return;t.preventDefault(),null!=t.currentTarget&&(a=e(t.currentTarget))}var n=null,i=null,r={},s=null;null!=a&&1===a.length&&(null!=(s=a.data("recache-block-elem"))&&(i=e(s)),null!=(s=a.data("recache-context-menu-id"))&&(n=e(s)),null!=(s=a.data("recache-ajax-url"))&&(r["data-recache-ajax-url"]=s)),null!=this&&(this.hasOwnProperty("recacheBlockElem")&&(i=e(this.blockElem)),this.hasOwnProperty("recacheContextMenuId")&&(n=this.recacheContextMenuId||n),this.hasOwnProperty("recacheBlockAttrs")&&"object"==typeof this.recacheBlockAttrs&&(r=Object.assign(r,this.recacheBlockAttrs||{}))),null!=i&&0!==i.length||(i=e("body")),null!=n&&(r.id=n);var c=l(r);n=c.prop("id"),null!=n&&(e("body #"+n).trigger(p),e("body #"+n).remove());var d={x:t.pageX,y:t.pageY};c.css({top:d.y,left:d.x}),i.append(c),o(c,!0)}function o(t,a){if(null!=t&&0!==t.length){var n=e("body");a?(t.on(p,r.bind(t)),n.on("click",r.bind(t)),t.find("li").click(s.bind(t))):(t.find("li").off(),t.off(),n.off("click",r))}}function r(t){var a=e(this);o(a,!1),a.remove()}function s(t){t.stopPropagation();var a=e(this),n=e(t.currentTarget),i=n.hasClass("exit"),o=n.hasClass("recache"),r=n.hasClass("logOut"),s=null,l=null;return null==(l=n.attr("data-ajax-url"))&&null==(l=a.attr("data-recache-ajax-url"))||(s=l),i?void this.trigger(p):void(o&&(n.addClass("loading"),createLoaderIcon("recache",null,n),c.call(a,{logOut:r?1:0,page_url:window.location.href},s)))}function l(t){t=t||{},t.id=t.id||h;var a=null;return a=e((a=e('script[type="text/html"]#'+m)).length>0?a.html():'<div class="contextmenu recache">   <ul>       <li class="recache">Re-cache page</li>       <li class="recache logOut">Re-cache logged out page</li>       <li class="exit">Close</li>   </ul></div>'),a.attr(t),a}function c(t,a,n,i){e.ajax(createAjaxSettings(a||f,t,{success:n||d.bind(this),error:i||u.bind(this)}))}function d(t,a,n){var i=e(this);i.trigger(p);var o=parseAjaxResponseMessage(t,n,"Unexpected error whilst re-caching page.").trim();return"success"===o?void location.reload(!0):void showDialogMessage("Warning",o)}function u(t,a,n){var i=e(this);i.trigger(p);var o=parseAjaxResponseMessage(null,t,"Unexpected error whilst re-caching page.");showDialogMessage("Warning",o)}var p="recachecontextmenuclose",h="recacheContextMenu",m="recacheContextMenuTemp",f="/php/ajax/recache_page.php";0!==(t=e(t)).length&&(a=a||{},n(t,!0,a))}function n(){this.cacheKey="search:recent",this.cacheKeyRecent="mostRecent"}if("undefined"!=typeof e&&null!=e){var i="go",o="/search",r="/go/search",s="https://images.twinkl.co.uk/tr/raw/upload/t";"local.twinkl.biz"==window.location.hostname&&(s="");var l='<svg xmlns="http://www.w3.org/2000/svg" height="20px" viewBox="0 0 24 24" width="20px" fill="#000000"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path></svg>',c='<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="18px" fill="#000000"><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm-.22-13h-.06c-.4 0-.72.32-.72.72v4.72c0 .35.18.68.49.86l4.15 2.49c.34.2.78.1.98-.24.21-.34.1-.79-.25-.99l-3.87-2.3V7.72c0-.4-.32-.72-.72-.72z"></path></svg>';
n.prototype.isStorageActive=function(){return window.sessionStorage},n.prototype.add=function(e){if(this.isStorageActive()){var t=this.get();e=this.clean(e);for(var a=[e],n=t.length,i=0;i<n&&i<10;i++)t[i].toLowerCase()!==e.toLowerCase()&&a.push(t[i]);this.set(a)}},n.prototype.addVeryRecent=function(e){if(this.isStorageActive()){var t=(new Date).getTime();this.set([e,t],this.cacheKeyRecent)}},n.prototype.getVeryRecent=function(e){if(!this.isStorageActive())return"";e=e?e:18e4;var t=this.get(this.cacheKeyRecent);return t.length&&(new Date).getTime()-t[1]<e?t[0]:""},n.prototype.get=function(e){if(!this.isStorageActive())return[];e||(e=this.cacheKey);var t=window.sessionStorage.getItem(e);return t||(t="[]"),JSON.parse(t)},n.prototype.set=function(e,t){this.isStorageActive()&&(e||(e=[]),t||(t=this.cacheKey),window.sessionStorage.setItem(t,JSON.stringify(e)))},n.prototype["delete"]=function(e,t){if(this.isStorageActive()&&e){t||(t=this.cacheKey);var a=this.get();e=this.clean(e);for(var n=[],i=a.length,o=0;o<i&&o<10;o++)a[o].toLowerCase()!==e.toLowerCase()&&n.push(a[o]);this.set(n,t)}},n.prototype.clean=function(e){return e.replace(/./gm,function(e){return e.match(/[a-z0-9\s]+/i)?e:"&#"+e.charCodeAt(0)+";"})},stickyHighlighted=!1,e("#header #sticky-header #phrase").on("input click",function(t){stickyHighlighted||(e("#overlay").css("z-index","1000000"),e("#header #sticky-header").css({"background-color":"#ffffff","z-index":"1000001"}),e("#overlay").show(),stickyHighlighted=!0)}),e("#header #sticky-header #phrase").on("blur",function(){stickyHighlighted&&(e("#overlay").hide(),e("#header #sticky-header").css({"z-index":"10000"}),stickyHighlighted=!1)}),e.twinkl=Object.assign(e.twinkl||{},{initSearch:t,initRecacheContextMenu:a})}}("undefined"!=typeof $?$:null),function(e){e.fn.autoResize=function(t){var a=e.extend({onResize:function(){},animate:!0,animateDuration:150,animateCallback:function(){},extraSpace:20,limit:500},t);return this.filter("textarea").each(function(){var t=e(this).css({resize:"none","overflow-y":"hidden"}),n=t.height(),i=function(){var a=["height","width","lineHeight","textDecoration","letterSpacing"],n={};return e.each(a,function(e,a){n[a]=t.css(a)}),t.clone().removeAttr("id").removeAttr("name").css({position:"absolute",top:0,left:-9999}).css(n).attr("tabIndex","-1").insertBefore(t)}(),o=null,r=function(){i.height(0).val(e(this).val()).scrollTop(1e4);var r=Math.max(i.scrollTop(),n)+a.extraSpace,s=e(this).add(i);if(o!==r){if(o=r,r>=a.limit&&0!=a.limit)return void e(this).css("overflow-y","").css("height",a.limit+"px");a.onResize.call(this),a.animate&&"block"===t.css("display")?s.stop().animate({height:r},a.animateDuration,a.animateCallback):s.height(r)}};t.unbind(".dynSiz").bind("keyup.dynSiz",r).bind("keydown.dynSiz",r).bind("change.dynSiz",r)}),this}}(jQuery),function(e){function t(t){e.fn.cycle.debug&&a(t)}function a(){window.console&&window.console.log&&window.console.log("[cycle] "+Array.prototype.join.call(arguments," "))}function n(t,n,i){function r(t,n,i){if(!t&&n===!0){var o=e(i).data("cycle.opts");if(!o)return a("options not found, can not resume"),!1;i.cycleTimeout&&(clearTimeout(i.cycleTimeout),i.cycleTimeout=0),d(o.elements,o,1,!s.rev&&!s.backwards)}}if(void 0==t.cycleStop&&(t.cycleStop=0),void 0!==n&&null!==n||(n={}),n.constructor==String){switch(n){case"destroy":case"stop":var s=e(t).data("cycle.opts");return!!s&&(t.cycleStop++,t.cycleTimeout&&clearTimeout(t.cycleTimeout),t.cycleTimeout=0,e(t).removeData("cycle.opts"),"destroy"==n&&o(s),!1);case"toggle":return t.cyclePause=1===t.cyclePause?0:1,r(t.cyclePause,i,t),!1;case"pause":return t.cyclePause=1,!1;case"resume":return t.cyclePause=0,r(!1,i,t),!1;case"prev":case"next":var s=e(t).data("cycle.opts");return s?(e.fn.cycle[n](s),!1):(a('options not found, "prev/next" ignored'),!1);default:n={fx:n}}return n}if(n.constructor==Number){var l=n;return(n=e(t).data("cycle.opts"))?l<0||l>=n.elements.length?(a("invalid slide index: "+l),!1):(n.nextSlide=l,t.cycleTimeout&&(clearTimeout(t.cycleTimeout),t.cycleTimeout=0),"string"==typeof i&&(n.oneTimeFx=i),d(n.elements,n,1,l>=n.currSlide),!1):(a("options not found, can not advance slide"),!1)}return n}function i(t,a){if(!e.support.opacity&&a.cleartype&&t.style.filter)try{t.style.removeAttribute("filter")}catch(n){}}function o(t){t.next&&e(t.next).unbind(t.prevNextEvent),t.prev&&e(t.prev).unbind(t.prevNextEvent),(t.pager||t.pagerAnchorBuilder)&&e.each(t.pagerAnchors||[],function(){this.unbind().remove()}),t.pagerAnchors=null,t.destroy&&t.destroy(t)}function r(t,n,o,r,u){var p=e.extend({},e.fn.cycle.defaults,r||{},e.metadata?t.metadata():e.meta?t.data():{});p.autostop&&(p.countdown=p.autostopCount||o.length);var v=t[0];if(t.data("cycle.opts",p),p.$cont=t,p.stopCount=v.cycleStop,p.elements=o,p.before=p.before?[p.before]:[],p.after=p.after?[p.after]:[],p.after.unshift(function(){p.busy=0}),!e.support.opacity&&p.cleartype&&p.after.push(function(){i(this,p)}),p.continuous&&p.after.push(function(){d(o,p,0,!p.rev&&!p.backwards)}),s(p),e.support.opacity||!p.cleartype||p.cleartypeNoBg||f(n),"static"==t.css("position")&&t.css("position","relative"),p.width&&t.width(p.width),p.height&&"auto"!=p.height&&t.height(p.height),p.startingSlide?p.startingSlide=parseInt(p.startingSlide):p.backwards&&(p.startingSlide=o.length-1),p.random){p.randomMap=[];for(var g=0;g<o.length;g++)p.randomMap.push(g);p.randomMap.sort(function(e,t){return Math.random()-.5}),p.randomIndex=1,p.startingSlide=p.randomMap[1]}else p.startingSlide>=o.length&&(p.startingSlide=0);p.currSlide=p.startingSlide||0;var _=p.startingSlide;n.css({position:"absolute",top:0,left:0}).hide().each(function(t){var a;a=p.backwards?_?t<=_?o.length+(t-_):_-t:o.length-t:_?t>=_?o.length-(t-_):_-t:o.length-t,e(this).css("z-index",a)}),e(o[_]).css("opacity",1).show(),i(o[_],p),p.fit&&p.width&&n.width(p.width),p.fit&&p.height&&"auto"!=p.height&&n.height(p.height);var y=p.containerResize&&!t.innerHeight();if(y){for(var w=0,b=0,k=0;k<o.length;k++){var x=e(o[k]),C=x[0],$=x.outerWidth(),S=x.outerHeight();$||($=C.offsetWidth||C.width||x.attr("width")),S||(S=C.offsetHeight||C.height||x.attr("height")),w=$>w?$:w,b=S>b?S:b}w>0&&b>0&&t.css({width:w+"px",height:b+"px"})}if(p.pause&&t.hover(function(){this.cyclePause++},function(){this.cyclePause--}),l(p)===!1)return!1;var T=!1;if(r.requeueAttempts=r.requeueAttempts||0,n.each(function(){var t=e(this);if(this.cycleH=p.fit&&p.height?p.height:t.height()||this.offsetHeight||this.height||t.attr("height")||0,this.cycleW=p.fit&&p.width?p.width:t.width()||this.offsetWidth||this.width||t.attr("width")||0,t.is("img")){var n=e.browser.msie&&28==this.cycleW&&30==this.cycleH&&!this.complete,i=e.browser.mozilla&&34==this.cycleW&&19==this.cycleH&&!this.complete,o=e.browser.opera&&(42==this.cycleW&&19==this.cycleH||37==this.cycleW&&17==this.cycleH)&&!this.complete,s=0==this.cycleH&&0==this.cycleW&&!this.complete;if(n||i||o||s){if(u.s&&p.requeueOnImageNotLoaded&&++r.requeueAttempts<100)return a(r.requeueAttempts," - img slide not loaded, requeuing slideshow: ",this.src,this.cycleW,this.cycleH),setTimeout(function(){e(u.s,u.c).cycle(r)},p.requeueTimeout),T=!0,!1;a("could not determine size of image: "+this.src,this.cycleW,this.cycleH)}}return!0}),T)return!1;if(p.cssBefore=p.cssBefore||{},p.animIn=p.animIn||{},p.animOut=p.animOut||{},n.not(":eq("+_+")").css(p.cssBefore),p.cssFirst&&e(n[_]).css(p.cssFirst),p.timeout){p.timeout=parseInt(p.timeout),p.speed.constructor==String&&(p.speed=e.fx.speeds[p.speed]||parseInt(p.speed)),p.sync||(p.speed=p.speed/2);for(var I="shuffle"==p.fx?500:250;p.timeout-p.speed<I;)p.timeout+=p.speed}if(p.easing&&(p.easeIn=p.easeOut=p.easing),p.speedIn||(p.speedIn=p.speed),p.speedOut||(p.speedOut=p.speed),p.slideCount=o.length,p.currSlide=p.lastSlide=_,p.random?(++p.randomIndex==o.length&&(p.randomIndex=0),p.nextSlide=p.randomMap[p.randomIndex]):p.backwards?p.nextSlide=0==p.startingSlide?o.length-1:p.startingSlide-1:p.nextSlide=p.startingSlide>=o.length-1?0:p.startingSlide+1,!p.multiFx){var B=e.fn.cycle.transitions[p.fx];if(e.isFunction(B))B(t,n,p);else if("custom"!=p.fx&&!p.multiFx)return a("unknown transition: "+p.fx,"; slideshow terminating"),!1}var D=n[_];return p.before.length&&p.before[0].apply(D,[D,D,p,!0]),p.after.length>1&&p.after[1].apply(D,[D,D,p,!0]),p.next&&e(p.next).bind(p.prevNextEvent,function(){return h(p,p.rev?-1:1)}),p.prev&&e(p.prev).bind(p.prevNextEvent,function(){return h(p,p.rev?1:-1)}),(p.pager||p.pagerAnchorBuilder)&&m(o,p),c(p,o),p}function s(t){t.original={before:[],after:[]},t.original.cssBefore=e.extend({},t.cssBefore),t.original.cssAfter=e.extend({},t.cssAfter),t.original.animIn=e.extend({},t.animIn),t.original.animOut=e.extend({},t.animOut),e.each(t.before,function(){t.original.before.push(this)}),e.each(t.after,function(){t.original.after.push(this)})}function l(n){var i,o,r=e.fn.cycle.transitions;if(n.fx.indexOf(",")>0){for(n.multiFx=!0,n.fxs=n.fx.replace(/\s*/g,"").split(","),i=0;i<n.fxs.length;i++){var s=n.fxs[i];o=r[s],o&&r.hasOwnProperty(s)&&e.isFunction(o)||(a("discarding unknown transition: ",s),n.fxs.splice(i,1),i--)}if(!n.fxs.length)return a("No valid transitions named; slideshow terminating."),!1}else if("all"==n.fx){n.multiFx=!0,n.fxs=[];for(p in r)o=r[p],r.hasOwnProperty(p)&&e.isFunction(o)&&n.fxs.push(p)}if(n.multiFx&&n.randomizeEffects){var l=Math.floor(20*Math.random())+30;for(i=0;i<l;i++){var c=Math.floor(Math.random()*n.fxs.length);n.fxs.push(n.fxs.splice(c,1)[0])}t("randomized fx sequence: ",n.fxs)}return!0}function c(t,a){t.addSlide=function(n,i){var o=e(n),r=o[0];t.autostopCount||t.countdown++,a[i?"unshift":"push"](r),t.els&&t.els[i?"unshift":"push"](r),t.slideCount=a.length,o.css("position","absolute"),o[i?"prependTo":"appendTo"](t.$cont),i&&(t.currSlide++,t.nextSlide++),e.support.opacity||!t.cleartype||t.cleartypeNoBg||f(o),t.fit&&t.width&&o.width(t.width),t.fit&&t.height&&"auto"!=t.height&&$slides.height(t.height),r.cycleH=t.fit&&t.height?t.height:o.height(),r.cycleW=t.fit&&t.width?t.width:o.width(),o.css(t.cssBefore),(t.pager||t.pagerAnchorBuilder)&&e.fn.cycle.createPagerAnchor(a.length-1,r,e(t.pager),a,t),e.isFunction(t.onAddSlide)?t.onAddSlide(o):o.hide()}}function d(a,n,i,o){if(i&&n.busy&&n.manualTrump&&(t("manualTrump in go(), stopping active transition"),e(a).stop(!0,!0),n.busy=!1),n.busy)return void t("transition active, ignoring new tx request");var r=n.$cont[0],s=a[n.currSlide],l=a[n.nextSlide];if(r.cycleStop==n.stopCount&&(0!==r.cycleTimeout||i)){if(!i&&!r.cyclePause&&!n.bounce&&(n.autostop&&--n.countdown<=0||n.nowrap&&!n.random&&n.nextSlide<n.currSlide))return void(n.end&&n.end(n));var c=!1;if((i||!r.cyclePause)&&n.nextSlide!=n.currSlide){c=!0;var p=n.fx;s.cycleH=s.cycleH||e(s).height(),s.cycleW=s.cycleW||e(s).width(),l.cycleH=l.cycleH||e(l).height(),l.cycleW=l.cycleW||e(l).width(),n.multiFx&&((void 0==n.lastFx||++n.lastFx>=n.fxs.length)&&(n.lastFx=0),p=n.fxs[n.lastFx],n.currFx=p),n.oneTimeFx&&(p=n.oneTimeFx,n.oneTimeFx=null),e.fn.cycle.resetState(n,p),n.before.length&&e.each(n.before,function(e,t){r.cycleStop==n.stopCount&&t.apply(l,[s,l,n,o])});var h=function(){e.each(n.after,function(e,t){r.cycleStop==n.stopCount&&t.apply(l,[s,l,n,o])})};t("tx firing; currSlide: "+n.currSlide+"; nextSlide: "+n.nextSlide),n.busy=1,n.fxFn?n.fxFn(s,l,n,h,o,i&&n.fastOnEvent):e.isFunction(e.fn.cycle[n.fx])?e.fn.cycle[n.fx](s,l,n,h,o,i&&n.fastOnEvent):e.fn.cycle.custom(s,l,n,h,o,i&&n.fastOnEvent)}if(c||n.nextSlide==n.currSlide){if(e(a[0]).hasClass("premiumQuote")){var m=e(".premiumQuote:visible").height();e("#premiumQuotes").css({height:m+"px"}),e(".premiumQuote").each(function(){"none"!==e(this).css("display")&&e("#premiumQuotes").css({height:e(this).height()+"px"})})}if(n.lastSlide=n.currSlide,n.random)n.currSlide=n.nextSlide,++n.randomIndex==a.length&&(n.randomIndex=0),n.nextSlide=n.randomMap[n.randomIndex],n.nextSlide==n.currSlide&&(n.nextSlide=n.currSlide==n.slideCount-1?0:n.currSlide+1);else if(n.backwards){var f=n.nextSlide-1<0;f&&n.bounce?(n.backwards=!n.backwards,n.nextSlide=1,n.currSlide=0):(n.nextSlide=f?a.length-1:n.nextSlide-1,n.currSlide=f?0:n.nextSlide+1)}else{var f=n.nextSlide+1==a.length;f&&n.bounce?(n.backwards=!n.backwards,n.nextSlide=a.length-2,n.currSlide=a.length-1):(n.nextSlide=f?0:n.nextSlide+1,n.currSlide=f?a.length-1:n.nextSlide-1)}}c&&n.pager&&n.updateActivePagerLink(n.pager,n.currSlide,n.activePagerClass);var v=0;n.timeout&&!n.continuous?v=u(a[n.currSlide],a[n.nextSlide],n,o):n.continuous&&r.cyclePause&&(v=10),v>0&&(r.cycleTimeout=setTimeout(function(){d(a,n,0,!n.rev&&!n.backwards)},v))}}function u(e,a,n,i){if(n.timeoutFn){for(var o=n.timeoutFn.call(e,e,a,n,i);o-n.speed<250;)o+=n.speed;if(t("calculated timeout: "+o+"; speed: "+n.speed),o!==!1)return o}return n.timeout}function h(t,a){var n=t.elements,i=t.$cont[0],o=i.cycleTimeout;if(o&&(clearTimeout(o),i.cycleTimeout=0),t.random&&a<0)t.randomIndex--,--t.randomIndex==-2?t.randomIndex=n.length-2:t.randomIndex==-1&&(t.randomIndex=n.length-1),t.nextSlide=t.randomMap[t.randomIndex];else if(t.random)t.nextSlide=t.randomMap[t.randomIndex];else if(t.nextSlide=t.currSlide+a,t.nextSlide<0){if(t.nowrap)return!1;t.nextSlide=n.length-1}else if(t.nextSlide>=n.length){if(t.nowrap)return!1;t.nextSlide=0}var r=t.onPrevNextEvent||t.prevNextClick;return e.isFunction(r)&&r(a>0,t.nextSlide,n[t.nextSlide]),d(n,t,1,a>=0),!1}function m(t,a){var n=e(a.pager);e.each(t,function(i,o){e.fn.cycle.createPagerAnchor(i,o,n,t,a)}),a.updateActivePagerLink(a.pager,a.startingSlide,a.activePagerClass)}function f(a){function n(e){return e=parseInt(e).toString(16),e.length<2?"0"+e:e}function i(t){for(;t&&"html"!=t.nodeName.toLowerCase();t=t.parentNode){var a=e.css(t,"background-color");if(a.indexOf("rgb")>=0){var i=a.match(/\d+/g);return"#"+n(i[0])+n(i[1])+n(i[2])}if(a&&"transparent"!=a)return a}return"#ffffff"}t("applying clearType background-color hack"),a.each(function(){e(this).css("background-color",i(this))})}var v="2.88";void 0==e.support&&(e.support={opacity:!e.browser.msie}),e.fn.cycle=function(i,o){var s={s:this.selector,c:this.context};return 0===this.length&&"stop"!=i?!e.isReady&&s.s?(a("DOM not ready, queuing slideshow"),e(function(){e(s.s,s.c).cycle(i,o)}),this):(a("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this):this.each(function(){var l=n(this,i,o);if(l!==!1){l.updateActivePagerLink=l.updateActivePagerLink||e.fn.cycle.updateActivePagerLink,this.cycleTimeout&&clearTimeout(this.cycleTimeout),this.cycleTimeout=this.cyclePause=0;var c=e(this),p=l.slideExpr?e(l.slideExpr,this):c.children(),h=p.get();if(h.length<1)return void a("terminating; too few slides: "+h.length);var m=r(c,p,h,l,s);if(m!==!1){var f=m.continuous?10:u(h[m.currSlide],h[m.nextSlide],m,!m.rev);f&&(f+=m.delay||0,f<10&&(f=10),t("first timeout: "+f),this.cycleTimeout=setTimeout(function(){d(h,m,0,!m.rev&&!l.backwards)},f))}}})},e.fn.cycle.resetState=function(t,a){a=a||t.fx,t.before=[],t.after=[],t.cssBefore=e.extend({},t.original.cssBefore),t.cssAfter=e.extend({},t.original.cssAfter),t.animIn=e.extend({},t.original.animIn),t.animOut=e.extend({},t.original.animOut),t.fxFn=null,e.each(t.original.before,function(){t.before.push(this)}),e.each(t.original.after,function(){t.after.push(this)});var n=e.fn.cycle.transitions[a];e.isFunction(n)&&n(t.$cont,e(t.elements),t)},e.fn.cycle.updateActivePagerLink=function(t,a,n){e(t).each(function(){e(this).children().removeClass(n).eq(a).addClass(n)})},e.fn.cycle.next=function(e){h(e,e.rev?-1:1)},e.fn.cycle.prev=function(e){h(e,e.rev?1:-1)},e.fn.cycle.createPagerAnchor=function(a,n,i,o,r){var s;if(e.isFunction(r.pagerAnchorBuilder)?(s=r.pagerAnchorBuilder(a,n),t("pagerAnchorBuilder("+a+", el) returned: "+s)):s='<a href="#">'+(a+1)+"</a>",s){var l=e(s);if(0===l.parents("body").length){var c=[];i.length>1?(i.each(function(){var t=l.clone(!0);e(this).append(t),c.push(t[0])}),l=e(c)):l.appendTo(i)}r.pagerAnchors=r.pagerAnchors||[],r.pagerAnchors.push(l),l.bind(r.pagerEvent,function(t){t.preventDefault(),r.nextSlide=a;var n=r.$cont[0],i=n.cycleTimeout;i&&(clearTimeout(i),n.cycleTimeout=0);var s=r.onPagerEvent||r.pagerClick;e.isFunction(s)&&s(r.nextSlide,o[r.nextSlide]),d(o,r,1,r.currSlide<a)}),/^click/.test(r.pagerEvent)||r.allowPagerClickBubble||l.bind("click.cycle",function(){return!1}),r.pauseOnPagerHover&&l.hover(function(){r.$cont[0].cyclePause++},function(){r.$cont[0].cyclePause--})}},e.fn.cycle.hopsFromLast=function(e,t){var a,n=e.lastSlide,i=e.currSlide;return a=t?i>n?i-n:e.slideCount-n:i<n?n-i:n+e.slideCount-i},e.fn.cycle.commonReset=function(t,a,n,i,o,r){e(n.elements).not(t).hide(),n.cssBefore.opacity=1,n.cssBefore.display="block",i!==!1&&a.cycleW>0&&(n.cssBefore.width=a.cycleW),o!==!1&&a.cycleH>0&&(n.cssBefore.height=a.cycleH),n.cssAfter=n.cssAfter||{},n.cssAfter.display="none",e(t).css("zIndex",n.slideCount+(r===!0?1:0)),e(a).css("zIndex",n.slideCount+(r===!0?0:1))},e.fn.cycle.custom=function(t,a,n,i,o,r){var s=e(t),l=e(a),c=n.speedIn,d=n.speedOut,u=n.easeIn,p=n.easeOut;l.css(n.cssBefore),r&&(c=d="number"==typeof r?r:1,u=p=null);var h=function(){l.animate(n.animIn,c,u,i)};s.animate(n.animOut,d,p,function(){n.cssAfter&&s.css(n.cssAfter),n.sync||h()}),n.sync&&h()},e.fn.cycle.transitions={fade:function(t,a,n){a.not(":eq("+n.currSlide+")").css("opacity",0),n.before.push(function(t,a,n){e.fn.cycle.commonReset(t,a,n),n.cssBefore.opacity=0}),n.animIn={opacity:1},n.animOut={opacity:0},n.cssBefore={top:0,left:0}}},e.fn.cycle.ver=function(){return v},e.fn.cycle.defaults={fx:"fade",timeout:4e3,timeoutFn:null,continuous:0,speed:1e3,speedIn:null,speedOut:null,next:null,prev:null,onPrevNextEvent:null,prevNextEvent:"click.cycle",pager:null,onPagerEvent:null,pagerEvent:"click.cycle",allowPagerClickBubble:!1,pagerAnchorBuilder:null,before:null,after:null,end:null,easing:null,easeIn:null,easeOut:null,shuffle:null,animIn:null,animOut:null,cssBefore:null,cssAfter:null,fxFn:null,height:"auto",startingSlide:0,sync:1,random:0,fit:0,containerResize:1,pause:0,pauseOnPagerHover:0,autostop:0,autostopCount:0,delay:0,slideExpr:null,cleartype:!e.support.opacity,cleartypeNoBg:!1,nowrap:0,fastOnEvent:0,randomizeEffects:1,rev:0,manualTrump:!0,requeueOnImageNotLoaded:!0,requeueTimeout:250,activePagerClass:"activeSlide",updateActivePagerLink:null,backwards:!1}}(jQuery),function(e){e.fn.cycle.transitions.none=function(t,a,n){n.fxFn=function(t,a,n,i){e(a).show(),e(t).hide(),i()}},e.fn.cycle.transitions.scrollUp=function(t,a,n){t.css("overflow","hidden"),n.before.push(e.fn.cycle.commonReset);var i=t.height();n.cssBefore={top:i,left:0},n.cssFirst={top:0},n.animIn={top:0},n.animOut={top:-i}},e.fn.cycle.transitions.scrollDown=function(t,a,n){t.css("overflow","hidden"),n.before.push(e.fn.cycle.commonReset);var i=t.height();n.cssFirst={top:0},n.cssBefore={top:-i,left:0},n.animIn={top:0},n.animOut={top:i}},e.fn.cycle.transitions.scrollLeft=function(t,a,n){t.css("overflow","hidden"),n.before.push(e.fn.cycle.commonReset);var i=t.width();n.cssFirst={left:0},n.cssBefore={left:i,top:0},n.animIn={left:0},n.animOut={left:0-i}},e.fn.cycle.transitions.scrollRight=function(t,a,n){t.css("overflow","hidden"),n.before.push(e.fn.cycle.commonReset);var i=t.width();n.cssFirst={left:0},n.cssBefore={left:-i,top:0},n.animIn={left:0},n.animOut={left:i}},e.fn.cycle.transitions.scrollHorz=function(t,a,n){t.css("overflow","hidden").width(),n.before.push(function(t,a,n,i){e.fn.cycle.commonReset(t,a,n),n.cssBefore.left=i?a.cycleW-1:1-a.cycleW,n.animOut.left=i?-t.cycleW:t.cycleW}),n.cssFirst={left:0},n.cssBefore={top:0},n.animIn={left:0},n.animOut={top:0}},e.fn.cycle.transitions.scrollVert=function(t,a,n){t.css("overflow","hidden"),n.before.push(function(t,a,n,i){e.fn.cycle.commonReset(t,a,n),n.cssBefore.top=i?1-a.cycleH:a.cycleH-1,n.animOut.top=i?t.cycleH:-t.cycleH}),n.cssFirst={top:0},n.cssBefore={left:0},n.animIn={top:0},n.animOut={left:0}},e.fn.cycle.transitions.slideX=function(t,a,n){n.before.push(function(t,a,n){e(n.elements).not(t).hide(),e.fn.cycle.commonReset(t,a,n,!1,!0),n.animIn.width=a.cycleW}),n.cssBefore={left:0,top:0,width:0},n.animIn={width:"show"},n.animOut={width:0}},e.fn.cycle.transitions.slideY=function(t,a,n){n.before.push(function(t,a,n){e(n.elements).not(t).hide(),e.fn.cycle.commonReset(t,a,n,!0,!1),n.animIn.height=a.cycleH}),n.cssBefore={left:0,top:0,height:0},n.animIn={height:"show"},n.animOut={height:0}},e.fn.cycle.transitions.shuffle=function(t,a,n){var i,o=t.css("overflow","visible").width();for(a.css({left:0,top:0}),n.before.push(function(t,a,n){e.fn.cycle.commonReset(t,a,n,!0,!0,!0)}),n.speedAdjusted||(n.speed=n.speed/2,n.speedAdjusted=!0),n.random=0,n.shuffle=n.shuffle||{left:-o,top:15},n.els=[],i=0;i<a.length;i++)n.els.push(a[i]);for(i=0;i<n.currSlide;i++)n.els.push(n.els.shift());n.fxFn=function(t,a,n,i,o){var r=e(o?t:a);e(a).css(n.cssBefore);var s=n.slideCount;r.animate(n.shuffle,n.speedIn,n.easeIn,function(){for(var a=e.fn.cycle.hopsFromLast(n,o),l=0;l<a;l++)o?n.els.push(n.els.shift()):n.els.unshift(n.els.pop());if(o)for(var c=0,d=n.els.length;c<d;c++)e(n.els[c]).css("z-index",d-c+s);else{var u=e(t).css("z-index");r.css("z-index",parseInt(u)+1+s)}r.animate({left:0,top:0},n.speedOut,n.easeOut,function(){e(o?this:t).hide(),i&&i()})})},n.cssBefore={display:"block",opacity:1,top:0,left:0}},e.fn.cycle.transitions.turnUp=function(t,a,n){n.before.push(function(t,a,n){e.fn.cycle.commonReset(t,a,n,!0,!1),n.cssBefore.top=a.cycleH,n.animIn.height=a.cycleH}),n.cssFirst={top:0},n.cssBefore={left:0,height:0},n.animIn={top:0},n.animOut={height:0}},e.fn.cycle.transitions.turnDown=function(t,a,n){n.before.push(function(t,a,n){e.fn.cycle.commonReset(t,a,n,!0,!1),n.animIn.height=a.cycleH,n.animOut.top=t.cycleH}),n.cssFirst={top:0},n.cssBefore={left:0,top:0,height:0},n.animOut={height:0}},e.fn.cycle.transitions.turnLeft=function(t,a,n){n.before.push(function(t,a,n){e.fn.cycle.commonReset(t,a,n,!1,!0),n.cssBefore.left=a.cycleW,n.animIn.width=a.cycleW}),n.cssBefore={top:0,width:0},n.animIn={left:0},n.animOut={width:0}},e.fn.cycle.transitions.turnRight=function(t,a,n){n.before.push(function(t,a,n){e.fn.cycle.commonReset(t,a,n,!1,!0),n.animIn.width=a.cycleW,n.animOut.left=t.cycleW}),n.cssBefore={top:0,left:0,width:0},n.animIn={left:0},n.animOut={width:0}},e.fn.cycle.transitions.zoom=function(t,a,n){n.before.push(function(t,a,n){e.fn.cycle.commonReset(t,a,n,!1,!1,!0),n.cssBefore.top=a.cycleH/2,n.cssBefore.left=a.cycleW/2,n.animIn={top:0,left:0,width:a.cycleW,height:a.cycleH},n.animOut={width:0,height:0,top:t.cycleH/2,left:t.cycleW/2}}),n.cssFirst={top:0,left:0},n.cssBefore={width:0,height:0}},e.fn.cycle.transitions.fadeZoom=function(t,a,n){n.before.push(function(t,a,n){e.fn.cycle.commonReset(t,a,n,!1,!1),n.cssBefore.left=a.cycleW/2,n.cssBefore.top=a.cycleH/2,n.animIn={top:0,left:0,width:a.cycleW,height:a.cycleH}}),n.cssBefore={width:0,height:0},n.animOut={opacity:0}},e.fn.cycle.transitions.blindX=function(t,a,n){var i=t.css("overflow","hidden").width();n.before.push(function(t,a,n){e.fn.cycle.commonReset(t,a,n),n.animIn.width=a.cycleW,n.animOut.left=t.cycleW}),n.cssBefore={left:i,top:0},n.animIn={left:0},n.animOut={left:i}},e.fn.cycle.transitions.blindY=function(t,a,n){var i=t.css("overflow","hidden").height();n.before.push(function(t,a,n){e.fn.cycle.commonReset(t,a,n),n.animIn.height=a.cycleH,n.animOut.top=t.cycleH}),n.cssBefore={top:i,left:0},n.animIn={top:0},n.animOut={top:i}},e.fn.cycle.transitions.blindZ=function(t,a,n){var i=t.css("overflow","hidden").height(),o=t.width();n.before.push(function(t,a,n){e.fn.cycle.commonReset(t,a,n),n.animIn.height=a.cycleH,n.animOut.top=t.cycleH}),n.cssBefore={top:i,left:o},n.animIn={top:0,left:0},n.animOut={top:i,left:o}},e.fn.cycle.transitions.growX=function(t,a,n){n.before.push(function(t,a,n){e.fn.cycle.commonReset(t,a,n,!1,!0),n.cssBefore.left=this.cycleW/2,n.animIn={left:0,width:this.cycleW},n.animOut={left:0}}),n.cssBefore={width:0,top:0}},e.fn.cycle.transitions.growY=function(t,a,n){n.before.push(function(t,a,n){e.fn.cycle.commonReset(t,a,n,!0,!1),n.cssBefore.top=this.cycleH/2,n.animIn={top:0,height:this.cycleH},n.animOut={top:0}}),n.cssBefore={height:0,left:0}},e.fn.cycle.transitions.curtainX=function(t,a,n){n.before.push(function(t,a,n){e.fn.cycle.commonReset(t,a,n,!1,!0,!0),n.cssBefore.left=a.cycleW/2,n.animIn={left:0,width:this.cycleW},n.animOut={left:t.cycleW/2,width:0}}),n.cssBefore={top:0,width:0}},e.fn.cycle.transitions.curtainY=function(t,a,n){n.before.push(function(t,a,n){e.fn.cycle.commonReset(t,a,n,!0,!1,!0),n.cssBefore.top=a.cycleH/2,n.animIn={top:0,height:a.cycleH},n.animOut={top:t.cycleH/2,height:0}}),n.cssBefore={left:0,height:0}},e.fn.cycle.transitions.cover=function(t,a,n){var i=n.direction||"left",o=t.css("overflow","hidden").width(),r=t.height();n.before.push(function(t,a,n){e.fn.cycle.commonReset(t,a,n),"right"==i?n.cssBefore.left=-o:"up"==i?n.cssBefore.top=r:"down"==i?n.cssBefore.top=-r:n.cssBefore.left=o}),n.animIn={left:0,top:0},n.animOut={opacity:1},n.cssBefore={top:0,left:0}},e.fn.cycle.transitions.uncover=function(t,a,n){var i=n.direction||"left",o=t.css("overflow","hidden").width(),r=t.height();n.before.push(function(t,a,n){e.fn.cycle.commonReset(t,a,n,!0,!0,!0),"right"==i?n.animOut.left=o:"up"==i?n.animOut.top=-r:"down"==i?n.animOut.top=r:n.animOut.left=-o}),n.animIn={left:0,top:0},n.animOut={opacity:1},n.cssBefore={top:0,left:0}},e.fn.cycle.transitions.toss=function(t,a,n){var i=t.css("overflow","visible").width(),o=t.height();n.before.push(function(t,a,n){e.fn.cycle.commonReset(t,a,n,!0,!0,!0),n.animOut.left||n.animOut.top?n.animOut.opacity=0:n.animOut={left:2*i,top:-o/2,opacity:0}}),n.cssBefore={left:0,top:0},n.animIn={left:0}},e.fn.cycle.transitions.wipe=function(t,a,n){var i=t.css("overflow","hidden").width(),o=t.height();n.cssBefore=n.cssBefore||{};var r;if(n.clip)if(/l2r/.test(n.clip))r="rect(0px 0px "+o+"px 0px)";else if(/r2l/.test(n.clip))r="rect(0px "+i+"px "+o+"px "+i+"px)";else if(/t2b/.test(n.clip))r="rect(0px "+i+"px 0px 0px)";else if(/b2t/.test(n.clip))r="rect("+o+"px "+i+"px "+o+"px 0px)";else if(/zoom/.test(n.clip)){var s=parseInt(o/2),l=parseInt(i/2);r="rect("+s+"px "+l+"px "+s+"px "+l+"px)"}n.cssBefore.clip=n.cssBefore.clip||r||"rect(0px 0px 0px 0px)";var c=n.cssBefore.clip.match(/(\d+)/g),d=parseInt(c[0]),u=parseInt(c[1]),p=parseInt(c[2]),h=parseInt(c[3]);n.before.push(function(t,a,n){if(t!=a){var r=e(t),s=e(a);e.fn.cycle.commonReset(t,a,n,!0,!0,!1),n.cssAfter.display="block";var l=1,c=parseInt(n.speedIn/13)-1;!function m(){var e=d?d-parseInt(l*(d/c)):0,t=h?h-parseInt(l*(h/c)):0,a=p<o?p+parseInt(l*((o-p)/c||1)):o,n=u<i?u+parseInt(l*((i-u)/c||1)):i;s.css({clip:"rect("+e+"px "+n+"px "+a+"px "+t+"px)"}),l++<=c?setTimeout(m,13):r.css("display","none")}()}}),n.cssBefore={display:"block",opacity:1,top:0,left:0},n.animIn={left:0},n.animOut={left:0}}}(jQuery),function(e){"use strict";function t(){var e=document.documentElement;return"requestFullscreen"in e||"mozRequestFullScreen"in e&&document.mozFullScreenEnabled||"webkitRequestFullScreen"in e}function a(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen&&e.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}function n(){return document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||!1}function i(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen()}function o(t){e(document).on("fullscreenchange mozfullscreenchange webkitfullscreenchange",function(){t(n())})}e.support.fullscreen=t(),e.fn.fullScreen=function(t,r){if(!e.support.fullscreen||1!==this.length)return this;if(n())return i(),this;r=r||{};var s,l=r.use_tmp_div!==!1,c=r.use_background_colour?r.use_background_colour:"#111",d=e.extend({background:c,callback:e.noop(),fullscreenClass:"fullScreen"},t),u=this,p=null;return l?s=e("<div>").insertBefore(u).append(u):(s=u,p=s.prop("style")),s.css({overflow:d.overflow,background:d.background,width:"100%",height:"100%"}),u.addClass(d.fullscreenClass),a(s.get(0)),s.click(function(e){e.target===this&&i()}),u.cancel=function(){return i(),u},o(function(t){t||(e(document).off("fullscreenchange mozfullscreenchange webkitfullscreenchange"),null!=p&&s.prop("style",p),u.removeClass(d.fullscreenClass),l&&(u.insertBefore(fs),s.remove())),d.callback&&d.callback(t)}),u},e.fn.cancelFullScreen=function(){return i(),this}}(jQuery),function(e){e.fn.hoverFlow=function(t,a,n,i,o){if(e.inArray(t,["mouseover","mouseenter","mouseout","mouseleave"])==-1)return this;var r="object"==typeof n?n:{complete:o||!o&&i||e.isFunction(n)&&n,duration:n,easing:o&&i||i&&!e.isFunction(i)&&i};r.queue=!1;var s=r.complete;return r.complete=function(){e(this).dequeue(),e.isFunction(s)&&s.call(this)},this.each(function(){var n=e(this);"mouseover"==t||"mouseenter"==t?n.data("jQuery.hoverFlow",!0):n.removeData("jQuery.hoverFlow"),n.queue(function(){var e="mouseover"==t||"mouseenter"==t?void 0!==n.data("jQuery.hoverFlow"):void 0===n.data("jQuery.hoverFlow");e?n.animate(a,r):n.queue([])})})}}(jQuery),function(e){"use strict";var t,a,n;e.fn.loadImages=function(a){return a=e.extend({},e.fn.loadImages.defaults,a),this.each(function(){var n,i=this,o=e(i);return n=o.is("img")?o:o.find("*[data-"+a.dataAttr+"]"),n.length<1&&e.isFunction(a.noImgClb)?void a.noImgClb.call(i):(o.data("dfd",e.Deferred()),o.data("options",a),o.data("total_images_count",n.length),o.data("processed_count",0),o.data("failed_count",0),void e.when(t.call(i,n)).then(function(){e.isFunction(a.allLoadedClb)&&a.allLoadedClb.call(i)}))}),this},t=function(t){var n=this,i=e(n),o=i.data("options"),r=i.data("dfd");return t.each(function(){var t,i=e(this);t=i.is("img")?i:e("<img/>"),t.load(function(){i.is("img")||i.css({"background-image":'url("'+i.data(o.dataAttr)+'")'}),a.call(n,i[0],"success")}).error(function(){a.call(n,i[0],"error")}).attr("src",i.data(o.dataAttr))}),r.promise()},a=function(t,a){var i=this,o=e(i),r=o.data("dfd"),s=o.data("options"),l=o.data("processed_count")+1,c=o.data("total_images_count");o.data("processed_count",l),"success"===a&&e.isFunction(s.imgLoadedClb)&&s.imgLoadedClb.call(t,l,c),"error"===a&&(o.data("failed_count",o.data("failed_count")+1),e(this).unbind("load"),e.isFunction(s.imgErrorClb)&&s.imgErrorClb.call(t,l,c)),l===c&&(o.data("failed_count")===c?(e.isFunction(s.noImgClb)&&s.noImgClb.call(i),r.reject()):r.resolve(),n.call(i))},n=function(){e(this).removeData("dfd","options","total_images_count","processed_count","failed_count")},e.fn.loadImages.defaults={imgLoadedClb:!1,allLoadedClb:!1,imgErrorClb:!1,noImgClb:!1,dataAttr:"src"}}(jQuery),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(e){function t(t){var r=t||window.event,s=l.call(arguments,1),c=0,u=0,p=0,h=0,m=0,f=0;if(t=e.event.fix(r),t.type="mousewheel","detail"in r&&(p=r.detail*-1),"wheelDelta"in r&&(p=r.wheelDelta),"wheelDeltaY"in r&&(p=r.wheelDeltaY),"wheelDeltaX"in r&&(u=r.wheelDeltaX*-1),"axis"in r&&r.axis===r.HORIZONTAL_AXIS&&(u=p*-1,p=0),c=0===p?u:p,"deltaY"in r&&(p=r.deltaY*-1,c=p),"deltaX"in r&&(u=r.deltaX,0===p&&(c=u*-1)),0!==p||0!==u){if(1===r.deltaMode){var v=e.data(this,"mousewheel-line-height");c*=v,p*=v,u*=v}else if(2===r.deltaMode){var g=e.data(this,"mousewheel-page-height");c*=g,p*=g,u*=g}if(h=Math.max(Math.abs(p),Math.abs(u)),(!o||h<o)&&(o=h,n(r,h)&&(o/=40)),n(r,h)&&(c/=40,u/=40,p/=40),c=Math[c>=1?"floor":"ceil"](c/o),u=Math[u>=1?"floor":"ceil"](u/o),p=Math[p>=1?"floor":"ceil"](p/o),d.settings.normalizeOffset&&this.getBoundingClientRect){var _=this.getBoundingClientRect();m=t.clientX-_.left,f=t.clientY-_.top}return t.deltaX=u,t.deltaY=p,t.deltaFactor=o,t.offsetX=m,t.offsetY=f,t.deltaMode=0,s.unshift(t,c,u,p),i&&clearTimeout(i),i=setTimeout(a,200),(e.event.dispatch||e.event.handle).apply(this,s)}}function a(){o=null}function n(e,t){return d.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120===0;
}var i,o,r=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],s="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],l=Array.prototype.slice;if(e.event.fixHooks)for(var c=r.length;c;)e.event.fixHooks[r[--c]]=e.event.mouseHooks;var d=e.event.special.mousewheel={version:"3.1.11",setup:function(){if(this.addEventListener)for(var a=s.length;a;)this.addEventListener(s[--a],t,!1);else this.onmousewheel=t;e.data(this,"mousewheel-line-height",d.getLineHeight(this)),e.data(this,"mousewheel-page-height",d.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var a=s.length;a;)this.removeEventListener(s[--a],t,!1);else this.onmousewheel=null;e.removeData(this,"mousewheel-line-height"),e.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var a=e(t)["offsetParent"in e.fn?"offsetParent":"parent"]();return a.length||(a=e("body")),parseInt(a.css("fontSize"),10)},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),function(e,t,a){function n(e){var t={},n=/^jQuery\d+$/;return a.each(e.attributes,function(e,a){a.specified&&!n.test(a.name)&&(t[a.name]=a.value)}),t}function i(e,n){var i=this,o=a(i);if(i.value==o.attr("placeholder")&&o.hasClass("placeholder"))if(o.data("placeholder-password")){if(o=o.hide().next().show().attr("id",o.removeAttr("id").data("placeholder-id")),e===!0)return o[0].value=n;o.focus()}else i.value="",o.removeClass("placeholder"),i==t.activeElement&&i.select()}function o(){var e,t=this,o=a(t),r=this.id;if(""==t.value){if("password"==t.type){if(!o.data("placeholder-textinput")){try{e=o.clone().attr({type:"text"})}catch(s){e=a("<input>").attr(a.extend(n(this),{type:"text"}))}e.removeAttr("name").data({"placeholder-password":!0,"placeholder-id":r}).bind("focus.placeholder",i),o.data({"placeholder-textinput":e,"placeholder-id":r}).before(e)}o=o.removeAttr("id").hide().prev().attr("id",r).show()}o.addClass("placeholder"),o[0].value=o.attr("placeholder")}else o.removeClass("placeholder")}var r,s,l="placeholder"in t.createElement("input"),c="placeholder"in t.createElement("textarea"),d=a.fn,u=a.valHooks;l&&c?(s=d.placeholder=function(){return this},s.input=s.textarea=!0):(s=d.placeholder=function(){var e=this;return e.filter((l?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":i,"blur.placeholder":o}).data("placeholder-enabled",!0).trigger("blur.placeholder"),e},s.input=l,s.textarea=c,r={get:function(e){var t=a(e);return t.data("placeholder-enabled")&&t.hasClass("placeholder")?"":e.value},set:function(e,n){var r=a(e);return r.data("placeholder-enabled")?(""==n?(e.value=n,e!=t.activeElement&&o.call(e)):r.hasClass("placeholder")?i.call(e,!0,n)||(e.value=n):e.value=n,r):e.value=n}},l||(u.input=r),c||(u.textarea=r),a(function(){a(t).delegate("form","submit.placeholder",function(){var e=a(".placeholder",this).each(i);setTimeout(function(){e.each(o)},10)})}),a(e).bind("beforeunload.placeholder",function(){a(".placeholder").each(function(){this.value=""})}))}(this,document,jQuery),function(e,t,a,n){!function(t){var n="function"==typeof define&&define.amd,i="https:"==a.location.protocol?"https:":"http:",o="cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.1.11/jquery.mousewheel.min.js";n||e.event.special.mousewheel||e("head").append(decodeURI("%3Cscript src="+i+"//"+o+"%3E%3C/script%3E")),t()}(function(){var n="mCustomScrollbar",i="mCS",o=".mCustomScrollbar",r={setWidth:!1,setHeight:!1,setTop:0,setLeft:0,axis:"y",scrollbarPosition:"inside",scrollInertia:950,autoDraggerLength:!0,autoHideScrollbar:!1,autoExpandScrollbar:!1,alwaysShowScrollbar:0,snapAmount:null,snapOffset:0,mouseWheel:{enable:!0,scrollAmount:"auto",axis:"y",preventDefault:!1,deltaFactor:"auto",normalizeDelta:!1,invert:!1,disableOver:["select","option","keygen","datalist","textarea"]},scrollButtons:{enable:!1,scrollType:"stepless",scrollAmount:"auto"},keyboard:{enable:!0,scrollType:"stepless",scrollAmount:"auto"},contentTouchScroll:25,advanced:{autoExpandHorizontalScroll:!1,autoScrollOnFocus:"input,textarea,select,button,datalist,keygen,a[tabindex],area,object,[contenteditable='true']",updateOnContentResize:!0,updateOnImageLoad:!0,updateOnSelectorChange:!1,releaseDraggableSelectors:!1},theme:"light",callbacks:{onInit:!1,onScrollStart:!1,onScroll:!1,onTotalScroll:!1,onTotalScrollBack:!1,whileScrolling:!1,onTotalScrollOffset:0,onTotalScrollBackOffset:0,alwaysTriggerOffsets:!0,onOverflowY:!1,onOverflowX:!1,onOverflowYNone:!1,onOverflowXNone:!1},live:!1,liveSelector:null},s=0,l={},c=function(e){l[e]&&(clearTimeout(l[e]),h._delete.call(null,l[e]))},d=t.attachEvent&&!t.addEventListener?1:0,u=!1,p={init:function(t){var t=e.extend(!0,{},r,t),a=h._selector.call(this);if(t.live){var n=t.liveSelector||this.selector||o,d=e(n);if("off"===t.live)return void c(n);l[n]=setTimeout(function(){d.mCustomScrollbar(t),"once"===t.live&&d.length&&c(n)},500)}else c(n);return t.setWidth=t.set_width?t.set_width:t.setWidth,t.setHeight=t.set_height?t.set_height:t.setHeight,t.axis=t.horizontalScroll?"x":h._findAxis.call(null,t.axis),t.scrollInertia=t.scrollInertia>0&&t.scrollInertia<17?17:t.scrollInertia,"object"!=typeof t.mouseWheel&&1==t.mouseWheel&&(t.mouseWheel={enable:!0,scrollAmount:"auto",axis:"y",preventDefault:!1,deltaFactor:"auto",normalizeDelta:!1,invert:!1}),t.mouseWheel.scrollAmount=t.mouseWheelPixels?t.mouseWheelPixels:t.mouseWheel.scrollAmount,t.mouseWheel.normalizeDelta=t.advanced.normalizeMouseWheelDelta?t.advanced.normalizeMouseWheelDelta:t.mouseWheel.normalizeDelta,t.scrollButtons.scrollType=h._findScrollButtonsType.call(null,t.scrollButtons.scrollType),h._theme.call(null,t),e(a).each(function(){var a=e(this);if(!a.data(i)){a.data(i,{idx:++s,opt:t,scrollRatio:{y:null,x:null},overflowed:null,contentReset:{y:null,x:null},bindEvents:!1,tweenRunning:!1,sequential:{},langDir:a.css("direction"),cbOffsets:null,trigger:null});var n=a.data(i).opt,o=a.data("mcs-axis"),r=a.data("mcs-scrollbar-position"),l=a.data("mcs-theme");o&&(n.axis=o),r&&(n.scrollbarPosition=r),l&&(n.theme=l,h._theme.call(null,n)),h._pluginMarkup.call(this),p.update.call(null,a)}})},update:function(t){var a=t||h._selector.call(this);return e(a).each(function(){var t=e(this);if(t.data(i)){var a=t.data(i),n=a.opt,o=e("#mCSB_"+a.idx+"_container"),r=[e("#mCSB_"+a.idx+"_dragger_vertical"),e("#mCSB_"+a.idx+"_dragger_horizontal")];if(!o.length)return;a.tweenRunning&&h._stop.call(null,t),t.hasClass("mCS_disabled")&&t.removeClass("mCS_disabled"),t.hasClass("mCS_destroyed")&&t.removeClass("mCS_destroyed"),h._maxHeight.call(this),h._expandContentHorizontally.call(this),"y"===n.axis||n.advanced.autoExpandHorizontalScroll||o.css("width",h._contentWidth(o.children())),a.overflowed=h._overflowed.call(this),h._scrollbarVisibility.call(this),n.autoDraggerLength&&h._setDraggerLength.call(this),h._scrollRatio.call(this),h._bindEvents.call(this);var s=[Math.abs(o[0].offsetTop),Math.abs(o[0].offsetLeft)];"x"!==n.axis&&(a.overflowed[0]?r[0].height()>r[0].parent().height()?h._resetContentPosition.call(this):(h._scrollTo.call(this,t,s[0].toString(),{dir:"y",dur:0,overwrite:"none"}),a.contentReset.y=null):(h._resetContentPosition.call(this),"y"===n.axis?h._unbindEvents.call(this):"yx"===n.axis&&a.overflowed[1]&&h._scrollTo.call(this,t,s[1].toString(),{dir:"x",dur:0,overwrite:"none"}))),"y"!==n.axis&&(a.overflowed[1]?r[1].width()>r[1].parent().width()?h._resetContentPosition.call(this):(h._scrollTo.call(this,t,s[1].toString(),{dir:"x",dur:0,overwrite:"none"}),a.contentReset.x=null):(h._resetContentPosition.call(this),"x"===n.axis?h._unbindEvents.call(this):"yx"===n.axis&&a.overflowed[0]&&h._scrollTo.call(this,t,s[0].toString(),{dir:"y",dur:0,overwrite:"none"}))),h._autoUpdate.call(this)}})},scrollTo:function(t,a){if("undefined"!=typeof t&&null!=t){var n=h._selector.call(this);return e(n).each(function(){var n=e(this);if(n.data(i)){var o=n.data(i),r=o.opt,s={trigger:"external",scrollInertia:r.scrollInertia,scrollEasing:"mcsEaseInOut",moveDragger:!1,timeout:60,callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},l=e.extend(!0,{},s,a),c=h._arr.call(this,t),d=l.scrollInertia>0&&l.scrollInertia<17?17:l.scrollInertia;c[0]=h._to.call(this,c[0],"y"),c[1]=h._to.call(this,c[1],"x"),l.moveDragger&&(c[0]*=o.scrollRatio.y,c[1]*=o.scrollRatio.x),l.dur=d,setTimeout(function(){null!==c[0]&&"undefined"!=typeof c[0]&&"x"!==r.axis&&o.overflowed[0]&&(l.dir="y",l.overwrite="all",h._scrollTo.call(this,n,c[0].toString(),l)),null!==c[1]&&"undefined"!=typeof c[1]&&"y"!==r.axis&&o.overflowed[1]&&(l.dir="x",l.overwrite="none",h._scrollTo.call(this,n,c[1].toString(),l))},l.timeout)}})}},stop:function(){var t=h._selector.call(this);return e(t).each(function(){var t=e(this);t.data(i)&&h._stop.call(null,t)})},disable:function(t){var a=h._selector.call(this);return e(a).each(function(){var a=e(this);if(a.data(i)){var n=a.data(i);n.opt;h._autoUpdate.call(this,"remove"),h._unbindEvents.call(this),t&&h._resetContentPosition.call(this),h._scrollbarVisibility.call(this,!0),a.addClass("mCS_disabled")}})},destroy:function(){var t=h._selector.call(this);return e(t).each(function(){var a=e(this);if(a.data(i)){var o=a.data(i),r=o.opt,s=e("#mCSB_"+o.idx),l=e("#mCSB_"+o.idx+"_container"),d=e(".mCSB_"+o.idx+"_scrollbar");r.live&&c(t),h._autoUpdate.call(this,"remove"),h._unbindEvents.call(this),h._resetContentPosition.call(this),a.removeData(i),h._delete.call(null,this.mcs),d.remove(),s.replaceWith(l.contents()),a.removeClass(n+" _"+i+"_"+o.idx+" mCS-autoHide mCS-dir-rtl mCS_no_scrollbar mCS_disabled").addClass("mCS_destroyed")}})}},h={_selector:function(){return"object"!=typeof e(this)||e(this).length<1?o:this},_theme:function(t){var a=["rounded","rounded-dark","rounded-dots","rounded-dots-dark"],n=["rounded-dots","rounded-dots-dark","3d","3d-dark","3d-thick","3d-thick-dark","inset","inset-dark","inset-2","inset-2-dark","inset-3","inset-3-dark"],i=["minimal","minimal-dark"],o=["minimal","minimal-dark"],r=["minimal","minimal-dark"];t.autoDraggerLength=!(e.inArray(t.theme,a)>-1)&&t.autoDraggerLength,t.autoExpandScrollbar=!(e.inArray(t.theme,n)>-1)&&t.autoExpandScrollbar,t.scrollButtons.enable=!(e.inArray(t.theme,i)>-1)&&t.scrollButtons.enable,t.autoHideScrollbar=e.inArray(t.theme,o)>-1||t.autoHideScrollbar,t.scrollbarPosition=e.inArray(t.theme,r)>-1?"outside":t.scrollbarPosition},_findAxis:function(e){return"yx"===e||"xy"===e||"auto"===e?"yx":"x"===e||"horizontal"===e?"x":"y"},_findScrollButtonsType:function(e){return"stepped"===e||"pixels"===e||"step"===e||"click"===e?"stepped":"stepless"},_pluginMarkup:function(){var t=e(this),a=t.data(i),o=a.opt,r=o.autoExpandScrollbar?" mCSB_scrollTools_onDrag_expand":"",s=["<div id='mCSB_"+a.idx+"_scrollbar_vertical' class='mCSB_scrollTools mCSB_"+a.idx+"_scrollbar mCS-"+o.theme+" mCSB_scrollTools_vertical"+r+"'><div class='mCSB_draggerContainer'><div id='mCSB_"+a.idx+"_dragger_vertical' class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>","<div id='mCSB_"+a.idx+"_scrollbar_horizontal' class='mCSB_scrollTools mCSB_"+a.idx+"_scrollbar mCS-"+o.theme+" mCSB_scrollTools_horizontal"+r+"'><div class='mCSB_draggerContainer'><div id='mCSB_"+a.idx+"_dragger_horizontal' class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>"],l="yx"===o.axis?"mCSB_vertical_horizontal":"x"===o.axis?"mCSB_horizontal":"mCSB_vertical",c="yx"===o.axis?s[0]+s[1]:"x"===o.axis?s[1]:s[0],d="yx"===o.axis?"<div id='mCSB_"+a.idx+"_container_wrapper' class='mCSB_container_wrapper' />":"",u=o.autoHideScrollbar?" mCS-autoHide":"",p="x"!==o.axis&&"rtl"===a.langDir?" mCS-dir-rtl":"";o.setWidth&&t.css("width",o.setWidth),o.setHeight&&t.css("height",o.setHeight),o.setLeft="y"!==o.axis&&"rtl"===a.langDir?"989999px":o.setLeft,t.addClass(n+" _"+i+"_"+a.idx+u+p).wrapInner("<div id='mCSB_"+a.idx+"' class='mCustomScrollBox mCS-"+o.theme+" "+l+"'><div id='mCSB_"+a.idx+"_container' class='mCSB_container' style='position:relative; top:"+o.setTop+"; left:"+o.setLeft+";' dir="+a.langDir+" /></div>");var m=e("#mCSB_"+a.idx),f=e("#mCSB_"+a.idx+"_container");"y"===o.axis||o.advanced.autoExpandHorizontalScroll||f.css("width",h._contentWidth(f.children())),"outside"===o.scrollbarPosition?("static"===t.css("position")&&t.css("position","relative"),t.css("overflow","visible"),m.addClass("mCSB_outside").after(c)):(m.addClass("mCSB_inside").append(c),f.wrap(d)),h._scrollButtons.call(this);var v=[e("#mCSB_"+a.idx+"_dragger_vertical"),e("#mCSB_"+a.idx+"_dragger_horizontal")];v[0].css("min-height",v[0].height()),v[1].css("min-width",v[1].width())},_contentWidth:function(t){return Math.max.apply(Math,t.map(function(){return e(this).outerWidth(!0)}).get())},_expandContentHorizontally:function(){var t=e(this),a=t.data(i),n=a.opt,o=e("#mCSB_"+a.idx+"_container");n.advanced.autoExpandHorizontalScroll&&"y"!==n.axis&&o.css({position:"absolute",width:"auto"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:Math.ceil(o[0].getBoundingClientRect().right+.4)-Math.floor(o[0].getBoundingClientRect().left),position:"relative"}).unwrap()},_scrollButtons:function(){var t=e(this),a=t.data(i),n=a.opt,o=e(".mCSB_"+a.idx+"_scrollbar:first"),r=["<a href='#' class='mCSB_buttonUp' oncontextmenu='return false;' />","<a href='#' class='mCSB_buttonDown' oncontextmenu='return false;' />","<a href='#' class='mCSB_buttonLeft' oncontextmenu='return false;' />","<a href='#' class='mCSB_buttonRight' oncontextmenu='return false;' />"],s=["x"===n.axis?r[2]:r[0],"x"===n.axis?r[3]:r[1],r[2],r[3]];n.scrollButtons.enable&&o.prepend(s[0]).append(s[1]).next(".mCSB_scrollTools").prepend(s[2]).append(s[3])},_maxHeight:function(){var t=e(this),a=t.data(i),n=(a.opt,e("#mCSB_"+a.idx)),o=t.css("max-height"),r=o.indexOf("%")!==-1,s=t.css("box-sizing");if("none"!==o){var l=r?t.parent().height()*parseInt(o)/100:parseInt(o);"border-box"===s&&(l-=t.innerHeight()-t.height()+(t.outerHeight()-t.innerHeight())),n.css("max-height",Math.round(l))}},_setDraggerLength:function(){var t=e(this),a=t.data(i),n=e("#mCSB_"+a.idx),o=e("#mCSB_"+a.idx+"_container"),r=[e("#mCSB_"+a.idx+"_dragger_vertical"),e("#mCSB_"+a.idx+"_dragger_horizontal")],s=[n.height()/o.outerHeight(!1),n.width()/o.outerWidth(!1)],l=[parseInt(r[0].css("min-height")),Math.round(s[0]*r[0].parent().height()),parseInt(r[1].css("min-width")),Math.round(s[1]*r[1].parent().width())],c=d&&l[1]<l[0]?l[0]:l[1],u=d&&l[3]<l[2]?l[2]:l[3];r[0].css({height:c,"max-height":r[0].parent().height()-10}).find(".mCSB_dragger_bar").css({"line-height":l[0]+"px"}),r[1].css({width:u,"max-width":r[1].parent().width()-10})},_scrollRatio:function(){var t=e(this),a=t.data(i),n=e("#mCSB_"+a.idx),o=e("#mCSB_"+a.idx+"_container"),r=[e("#mCSB_"+a.idx+"_dragger_vertical"),e("#mCSB_"+a.idx+"_dragger_horizontal")],s=[o.outerHeight(!1)-n.height(),o.outerWidth(!1)-n.width()],l=[s[0]/(r[0].parent().height()-r[0].height()),s[1]/(r[1].parent().width()-r[1].width())];a.scrollRatio={y:l[0],x:l[1]}},_onDragClasses:function(e,t,a){var n=a?"mCSB_dragger_onDrag_expanded":"",i=["mCSB_dragger_onDrag","mCSB_scrollTools_onDrag"],o=e.closest(".mCSB_scrollTools");"active"===t?(e.toggleClass(i[0]+" "+n),o.toggleClass(i[1]),e[0]._draggable=e[0]._draggable?0:1):e[0]._draggable||("hide"===t?(e.removeClass(i[0]),o.removeClass(i[1])):(e.addClass(i[0]),o.addClass(i[1])))},_overflowed:function(){var t=e(this),a=t.data(i),n=e("#mCSB_"+a.idx),o=e("#mCSB_"+a.idx+"_container"),r=null==a.overflowed?o.height():o.outerHeight(!1),s=null==a.overflowed?o.width():o.outerWidth(!1);return[r>n.height(),s>n.width()]},_resetContentPosition:function(){var t=e(this),a=t.data(i),n=a.opt,o=e("#mCSB_"+a.idx),r=e("#mCSB_"+a.idx+"_container"),s=[e("#mCSB_"+a.idx+"_dragger_vertical"),e("#mCSB_"+a.idx+"_dragger_horizontal")];if(h._stop(t),("x"!==n.axis&&!a.overflowed[0]||"y"===n.axis&&a.overflowed[0])&&(s[0].add(r).css("top",0),h._scrollTo(t,"_resetY")),"y"!==n.axis&&!a.overflowed[1]||"x"===n.axis&&a.overflowed[1]){var l=dx=0;"rtl"===a.langDir&&(l=o.width()-r.outerWidth(!1),dx=Math.abs(l/a.scrollRatio.x)),r.css("left",l),s[1].css("left",dx),h._scrollTo(t,"_resetX")}},_bindEvents:function(){function t(){r=setTimeout(function(){e.event.special.mousewheel?(clearTimeout(r),h._mousewheel.call(a[0])):t()},1e3)}var a=e(this),n=a.data(i),o=n.opt;if(!n.bindEvents){if(h._draggable.call(this),o.contentTouchScroll&&h._contentDraggable.call(this),o.mouseWheel.enable){var r;t()}h._draggerRail.call(this),h._wrapperScroll.call(this),o.advanced.autoScrollOnFocus&&h._focus.call(this),o.scrollButtons.enable&&h._buttons.call(this),o.keyboard.enable&&h._keyboard.call(this),n.bindEvents=!0}},_unbindEvents:function(){var t=e(this),n=t.data(i),o=n.opt,r=i+"_"+n.idx,s=".mCSB_"+n.idx+"_scrollbar",l=e("#mCSB_"+n.idx+",#mCSB_"+n.idx+"_container,#mCSB_"+n.idx+"_container_wrapper,"+s+" .mCSB_draggerContainer,#mCSB_"+n.idx+"_dragger_vertical,#mCSB_"+n.idx+"_dragger_horizontal,"+s+">a"),c=e("#mCSB_"+n.idx+"_container");o.advanced.releaseDraggableSelectors&&l.add(e(o.advanced.releaseDraggableSelectors)),n.bindEvents&&(e(a).unbind("."+r),l.each(function(){e(this).unbind("."+r)}),clearTimeout(t[0]._focusTimeout),h._delete.call(null,t[0]._focusTimeout),clearTimeout(n.sequential.step),h._delete.call(null,n.sequential.step),clearTimeout(c[0].onCompleteTimeout),h._delete.call(null,c[0].onCompleteTimeout),n.bindEvents=!1)},_scrollbarVisibility:function(t){var a=e(this),n=a.data(i),o=n.opt,r=e("#mCSB_"+n.idx+"_container_wrapper"),s=r.length?r:e("#mCSB_"+n.idx+"_container"),l=[e("#mCSB_"+n.idx+"_scrollbar_vertical"),e("#mCSB_"+n.idx+"_scrollbar_horizontal")],c=[l[0].find(".mCSB_dragger"),l[1].find(".mCSB_dragger")];"x"!==o.axis&&(n.overflowed[0]&&!t?(l[0].add(c[0]).add(l[0].children("a")).css("display","block"),s.removeClass("mCS_no_scrollbar_y mCS_y_hidden")):(o.alwaysShowScrollbar?(2!==o.alwaysShowScrollbar&&c[0].add(l[0].children("a")).css("display","none"),s.removeClass("mCS_y_hidden")):(l[0].css("display","none"),s.addClass("mCS_y_hidden")),s.addClass("mCS_no_scrollbar_y"))),"y"!==o.axis&&(n.overflowed[1]&&!t?(l[1].add(c[1]).add(l[1].children("a")).css("display","block"),s.removeClass("mCS_no_scrollbar_x mCS_x_hidden")):(o.alwaysShowScrollbar?(2!==o.alwaysShowScrollbar&&c[1].add(l[1].children("a")).css("display","none"),s.removeClass("mCS_x_hidden")):(l[1].css("display","none"),s.addClass("mCS_x_hidden")),s.addClass("mCS_no_scrollbar_x"))),n.overflowed[0]||n.overflowed[1]?a.removeClass("mCS_no_scrollbar"):a.addClass("mCS_no_scrollbar")},_coordinates:function(e){var t=e.type;switch(t){case"pointerdown":case"MSPointerDown":case"pointermove":case"MSPointerMove":case"pointerup":case"MSPointerUp":return[e.originalEvent.pageY,e.originalEvent.pageX,!1];case"touchstart":case"touchmove":case"touchend":var a=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],n=e.originalEvent.touches.length||e.originalEvent.changedTouches.length;return[a.pageY,a.pageX,n>1];default:return[e.pageY,e.pageX,!1]}},_draggable:function(){function t(e){var t=v.find("iframe");if(t.length){var a=e?"auto":"none";t.css("pointer-events",a)}}function n(e,t,a,n){if(v[0].idleTimer=p.scrollInertia<233?250:0,o.attr("id")===f[1])var i="x",r=(o[0].offsetLeft-t+n)*c.scrollRatio.x;else var i="y",r=(o[0].offsetTop-e+a)*c.scrollRatio.y;h._scrollTo(l,r.toString(),{dir:i,drag:!0})}var o,r,s,l=e(this),c=l.data(i),p=c.opt,m=i+"_"+c.idx,f=["mCSB_"+c.idx+"_dragger_vertical","mCSB_"+c.idx+"_dragger_horizontal"],v=e("#mCSB_"+c.idx+"_container"),g=e("#"+f[0]+",#"+f[1]),_=p.advanced.releaseDraggableSelectors?g.add(e(p.advanced.releaseDraggableSelectors)):g;g.bind("mousedown."+m+" touchstart."+m+" pointerdown."+m+" MSPointerDown."+m,function(n){if(n.stopImmediatePropagation(),n.preventDefault(),h._mouseBtnLeft(n)){u=!0,d&&(a.onselectstart=function(){return!1}),t(!1),h._stop(l),o=e(this);var i=o.offset(),c=h._coordinates(n)[0]-i.top,m=h._coordinates(n)[1]-i.left,f=o.height()+i.top,v=o.width()+i.left;c<f&&c>0&&m<v&&m>0&&(r=c,s=m),h._onDragClasses(o,"active",p.autoExpandScrollbar)}}).bind("touchmove."+m,function(e){e.stopImmediatePropagation(),e.preventDefault();var t=o.offset(),a=h._coordinates(e)[0]-t.top,i=h._coordinates(e)[1]-t.left;n(r,s,a,i)}),e(a).bind("mousemove."+m+" pointermove."+m+" MSPointerMove."+m,function(e){if(o){var t=o.offset(),a=h._coordinates(e)[0]-t.top,i=h._coordinates(e)[1]-t.left;if(r===a)return;n(r,s,a,i)}}).add(_).bind("mouseup."+m+" touchend."+m+" pointerup."+m+" MSPointerUp."+m,function(e){o&&(h._onDragClasses(o,"active",p.autoExpandScrollbar),o=null),u=!1,d&&(a.onselectstart=null),t(!0)})},_contentDraggable:function(){function t(e,t){var a=[1.5*t,2*t,t/1.5,t/2];return e>90?t>4?a[0]:a[3]:e>60?t>3?a[3]:a[2]:e>30?t>8?a[1]:t>6?a[0]:t>4?t:a[2]:t>8?t:a[3]}function a(e,t,a,n,i,o){e&&h._scrollTo(g,e.toString(),{dur:t,scrollEasing:a,dir:n,overwrite:i,drag:o})}var n,o,r,s,l,c,d,p,m,f,v,g=e(this),_=g.data(i),y=_.opt,w=i+"_"+_.idx,b=e("#mCSB_"+_.idx),k=e("#mCSB_"+_.idx+"_container"),x=[e("#mCSB_"+_.idx+"_dragger_vertical"),e("#mCSB_"+_.idx+"_dragger_horizontal")],C=[],$=[],S=0,T="yx"===y.axis?"none":"all",I=[];k.bind("touchstart."+w+" pointerdown."+w+" MSPointerDown."+w,function(e){if(h._pointerTouch(e)&&!u&&!h._coordinates(e)[2]){var t=k.offset();n=h._coordinates(e)[0]-t.top,o=h._coordinates(e)[1]-t.left,I=[h._coordinates(e)[0],h._coordinates(e)[1]]}}).bind("touchmove."+w+" pointermove."+w+" MSPointerMove."+w,function(e){if(h._pointerTouch(e)&&!u&&!h._coordinates(e)[2]){e.stopImmediatePropagation(),c=h._getTime();var t=b.offset(),i=h._coordinates(e)[0]-t.top,r=h._coordinates(e)[1]-t.left,s="mcsLinearOut";if(C.push(i),$.push(r),I[2]=Math.abs(h._coordinates(e)[0]-I[0]),I[3]=Math.abs(h._coordinates(e)[1]-I[1]),_.overflowed[0])var l=x[0].parent().height()-x[0].height(),d=n-i>0&&i-n>-(l*_.scrollRatio.y)&&(2*I[3]<I[2]||"yx"===y.axis);if(_.overflowed[1])var p=x[1].parent().width()-x[1].width(),m=o-r>0&&r-o>-(p*_.scrollRatio.x)&&(2*I[2]<I[3]||"yx"===y.axis);(d||m)&&e.preventDefault(),f="yx"===y.axis?[n-i,o-r]:"x"===y.axis?[null,o-r]:[n-i,null],k[0].idleTimer=250,_.overflowed[0]&&a(f[0],S,s,"y","all",!0),_.overflowed[1]&&a(f[1],S,s,"x",T,!0)}}),b.bind("touchstart."+w+" pointerdown."+w+" MSPointerDown."+w,function(e){if(h._pointerTouch(e)&&!u&&!h._coordinates(e)[2]){e.stopImmediatePropagation(),h._stop(g),l=h._getTime();var t=b.offset();r=h._coordinates(e)[0]-t.top,s=h._coordinates(e)[1]-t.left,C=[],$=[]}}).bind("touchend."+w+" pointerup."+w+" MSPointerUp."+w,function(e){if(h._pointerTouch(e)&&!u&&!h._coordinates(e)[2]){e.stopImmediatePropagation(),d=h._getTime();var n=b.offset(),i=h._coordinates(e)[0]-n.top,o=h._coordinates(e)[1]-n.left;if(!(d-c>30)){m=1e3/(d-l);var g="mcsEaseOut",w=m<2.5,x=w?[C[C.length-2],$[$.length-2]]:[0,0];p=w?[i-x[0],o-x[1]]:[i-r,o-s];var S=[Math.abs(p[0]),Math.abs(p[1])];m=w?[Math.abs(p[0]/4),Math.abs(p[1]/4)]:[m,m];var I=[Math.abs(k[0].offsetTop)-p[0]*t(S[0]/m[0],m[0]),Math.abs(k[0].offsetLeft)-p[1]*t(S[1]/m[1],m[1])];f="yx"===y.axis?[I[0],I[1]]:"x"===y.axis?[null,I[1]]:[I[0],null],v=[4*S[0]+y.scrollInertia,4*S[1]+y.scrollInertia];var B=parseInt(y.contentTouchScroll)||0;f[0]=S[0]>B?f[0]:0,f[1]=S[1]>B?f[1]:0,_.overflowed[0]&&a(f[0],v[0],g,"y",T,!1),_.overflowed[1]&&a(f[1],v[1],g,"x",T,!1)}}})},_mousewheel:function(){function t(e){var t=null;try{var a=e.contentDocument||e.contentWindow.document;t=a.body.innerHTML}catch(n){}return null!==t}var a=e(this),n=a.data(i);if(n){var o=n.opt,r=i+"_"+n.idx,s=e("#mCSB_"+n.idx),l=[e("#mCSB_"+n.idx+"_dragger_vertical"),e("#mCSB_"+n.idx+"_dragger_horizontal")],c=e("#mCSB_"+n.idx+"_container").find("iframe"),u=s;c.length&&c.each(function(){var a=this;t(a)&&(u=u.add(e(a).contents().find("body")))}),u.bind("mousewheel."+r,function(t,i){if(h._stop(a),!h._disableMousewheel(a,t.target)){var r="auto"!==o.mouseWheel.deltaFactor?parseInt(o.mouseWheel.deltaFactor):d&&t.deltaFactor<100?100:t.deltaFactor||100;if("x"===o.axis||"x"===o.mouseWheel.axis)var c="x",u=[Math.round(r*n.scrollRatio.x),parseInt(o.mouseWheel.scrollAmount)],p="auto"!==o.mouseWheel.scrollAmount?u[1]:u[0]>=s.width()?.9*s.width():u[0],m=Math.abs(e("#mCSB_"+n.idx+"_container")[0].offsetLeft),f=l[1][0].offsetLeft,v=l[1].parent().width()-l[1].width(),g=t.deltaX||t.deltaY||i;else var c="y",u=[Math.round(r*n.scrollRatio.y),parseInt(o.mouseWheel.scrollAmount)],p="auto"!==o.mouseWheel.scrollAmount?u[1]:u[0]>=s.height()?.9*s.height():u[0],m=Math.abs(e("#mCSB_"+n.idx+"_container")[0].offsetTop),f=l[0][0].offsetTop,v=l[0].parent().height()-l[0].height(),g=t.deltaY||i;"y"===c&&!n.overflowed[0]||"x"===c&&!n.overflowed[1]||(o.mouseWheel.invert&&(g=-g),o.mouseWheel.normalizeDelta&&(g=g<0?-1:1),(g>0&&0!==f||g<0&&f!==v||o.mouseWheel.preventDefault)&&(t.stopImmediatePropagation(),t.preventDefault()),h._scrollTo(a,(m-g*p).toString(),{dir:c}))}})}},_disableMousewheel:function(t,a){var n=a.nodeName.toLowerCase(),o=t.data(i).opt.mouseWheel.disableOver,r=["select","textarea"];return e.inArray(n,o)>-1&&!(e.inArray(n,r)>-1&&!e(a).is(":focus"))},_draggerRail:function(){var t=e(this),a=t.data(i),n=i+"_"+a.idx,o=e("#mCSB_"+a.idx+"_container"),r=o.parent(),s=e(".mCSB_"+a.idx+"_scrollbar .mCSB_draggerContainer");s.bind("touchstart."+n+" pointerdown."+n+" MSPointerDown."+n,function(e){u=!0}).bind("touchend."+n+" pointerup."+n+" MSPointerUp."+n,function(e){u=!1}).bind("click."+n,function(n){if(e(n.target).hasClass("mCSB_draggerContainer")||e(n.target).hasClass("mCSB_draggerRail")){h._stop(t);var i=e(this),s=i.find(".mCSB_dragger");if(i.parent(".mCSB_scrollTools_horizontal").length>0){if(!a.overflowed[1])return;var l="x",c=n.pageX>s.offset().left?-1:1,d=Math.abs(o[0].offsetLeft)-c*(.9*r.width())}else{if(!a.overflowed[0])return;var l="y",c=n.pageY>s.offset().top?-1:1,d=Math.abs(o[0].offsetTop)-c*(.9*r.height())}h._scrollTo(t,d.toString(),{dir:l,scrollEasing:"mcsEaseInOut"})}})},_focus:function(){var t=e(this),n=t.data(i),o=n.opt,r=i+"_"+n.idx,s=e("#mCSB_"+n.idx+"_container"),l=s.parent();s.bind("focusin."+r,function(n){var i=e(a.activeElement),r=s.find(".mCustomScrollBox").length,c=0;i.is(o.advanced.autoScrollOnFocus)&&(h._stop(t),clearTimeout(t[0]._focusTimeout),t[0]._focusTimer=r?(c+17)*r:0,t[0]._focusTimeout=setTimeout(function(){var e=[i.offset().top-s.offset().top,i.offset().left-s.offset().left],a=[s[0].offsetTop,s[0].offsetLeft],n=[a[0]+e[0]>=0&&a[0]+e[0]<l.height()-i.outerHeight(!1),a[1]+e[1]>=0&&a[0]+e[1]<l.width()-i.outerWidth(!1)],r="yx"!==o.axis||n[0]||n[1]?"all":"none";"x"===o.axis||n[0]||h._scrollTo(t,e[0].toString(),{dir:"y",scrollEasing:"mcsEaseInOut",overwrite:r,dur:c}),"y"===o.axis||n[1]||h._scrollTo(t,e[1].toString(),{dir:"x",scrollEasing:"mcsEaseInOut",overwrite:r,dur:c})},t[0]._focusTimer))})},_wrapperScroll:function(){var t=e(this),a=t.data(i),n=i+"_"+a.idx,o=e("#mCSB_"+a.idx+"_container").parent();o.bind("scroll."+n,function(t){0===o.scrollTop()&&0===o.scrollLeft()||e(".mCSB_"+a.idx+"_scrollbar").css("visibility","hidden")})},_buttons:function(){var t=e(this),a=t.data(i),n=a.opt,o=a.sequential,r=i+"_"+a.idx,s=(e("#mCSB_"+a.idx+"_container"),".mCSB_"+a.idx+"_scrollbar"),l=e(s+">a");l.bind("mousedown."+r+" touchstart."+r+" pointerdown."+r+" MSPointerDown."+r+" mouseup."+r+" touchend."+r+" pointerup."+r+" MSPointerUp."+r+" mouseout."+r+" pointerout."+r+" MSPointerOut."+r+" click."+r,function(i){function r(e,a){o.scrollAmount=n.snapAmount||n.scrollButtons.scrollAmount,h._sequentialScroll.call(this,t,e,a)}if(i.preventDefault(),h._mouseBtnLeft(i)){var s=e(this).attr("class");switch(o.type=n.scrollButtons.scrollType,i.type){case"mousedown":case"touchstart":case"pointerdown":case"MSPointerDown":if("stepped"===o.type)return;u=!0,a.tweenRunning=!1,r("on",s);break;case"mouseup":case"touchend":case"pointerup":case"MSPointerUp":case"mouseout":case"pointerout":case"MSPointerOut":if("stepped"===o.type)return;u=!1,o.dir&&r("off",s);break;case"click":if("stepped"!==o.type||a.tweenRunning)return;r("on",s)}}})},_keyboard:function(){var t=e(this),n=t.data(i),o=n.opt,r=n.sequential,s=i+"_"+n.idx,l=e("#mCSB_"+n.idx),c=e("#mCSB_"+n.idx+"_container"),d=c.parent(),u="input,textarea,select,datalist,keygen,[contenteditable='true']";l.attr("tabindex","0").bind("blur."+s+" keydown."+s+" keyup."+s,function(i){function s(e,a){r.type=o.keyboard.scrollType,r.scrollAmount=o.snapAmount||o.keyboard.scrollAmount,"stepped"===r.type&&n.tweenRunning||h._sequentialScroll.call(this,t,e,a)}switch(i.type){case"blur":n.tweenRunning&&r.dir&&s("off",null);break;case"keydown":case"keyup":var l=i.keyCode?i.keyCode:i.which,p="on";if("x"!==o.axis&&(38===l||40===l)||"y"!==o.axis&&(37===l||39===l)){if((38===l||40===l)&&!n.overflowed[0]||(37===l||39===l)&&!n.overflowed[1])return;"keyup"===i.type&&(p="off"),e(a.activeElement).is(u)||(i.preventDefault(),i.stopImmediatePropagation(),s(p,l))}else if(33===l||34===l){if((n.overflowed[0]||n.overflowed[1])&&(i.preventDefault(),i.stopImmediatePropagation()),"keyup"===i.type){h._stop(t);var m=34===l?-1:1;if("x"===o.axis||"yx"===o.axis&&n.overflowed[1]&&!n.overflowed[0])var f="x",v=Math.abs(c[0].offsetLeft)-m*(.9*d.width());else var f="y",v=Math.abs(c[0].offsetTop)-m*(.9*d.height());h._scrollTo(t,v.toString(),{dir:f,scrollEasing:"mcsEaseInOut"})}}else if((35===l||36===l)&&!e(a.activeElement).is(u)&&((n.overflowed[0]||n.overflowed[1])&&(i.preventDefault(),i.stopImmediatePropagation()),"keyup"===i.type)){if("x"===o.axis||"yx"===o.axis&&n.overflowed[1]&&!n.overflowed[0])var f="x",v=35===l?Math.abs(d.width()-c.outerWidth(!1)):0;else var f="y",v=35===l?Math.abs(d.height()-c.outerHeight(!1)):0;h._scrollTo(t,v.toString(),{dir:f,scrollEasing:"mcsEaseInOut"})}}})},_sequentialScroll:function(t,a,n){function o(e){var a="stepped"!==c.type,n=e?a?l.scrollInertia/1.5:l.scrollInertia:1e3/60,i=e?a?7.5:40:2.5,r=[Math.abs(d[0].offsetTop),Math.abs(d[0].offsetLeft)],u=[s.scrollRatio.y>10?10:s.scrollRatio.y,s.scrollRatio.x>10?10:s.scrollRatio.x],p="x"===c.dir[0]?r[1]+c.dir[1]*(u[1]*i):r[0]+c.dir[1]*(u[0]*i),m="x"===c.dir[0]?r[1]+c.dir[1]*parseInt(c.scrollAmount):r[0]+c.dir[1]*parseInt(c.scrollAmount),f="auto"!==c.scrollAmount?m:p,v=e?a?"mcsLinearOut":"mcsEaseInOut":"mcsLinear",g=!!e;return e&&n<17&&(f="x"===c.dir[0]?r[1]:r[0]),h._scrollTo(t,f.toString(),{dir:c.dir[0],scrollEasing:v,dur:n,onComplete:g}),e?void(c.dir=!1):(clearTimeout(c.step),void(c.step=setTimeout(function(){o()},n)))}function r(){clearTimeout(c.step),h._stop(t)}var s=t.data(i),l=s.opt,c=s.sequential,d=e("#mCSB_"+s.idx+"_container"),u="stepped"===c.type;switch(a){case"on":if(c.dir=["mCSB_buttonRight"===n||"mCSB_buttonLeft"===n||39===n||37===n?"x":"y","mCSB_buttonUp"===n||"mCSB_buttonLeft"===n||38===n||37===n?-1:1],h._stop(t),h._isNumeric(n)&&"stepped"===c.type)return;o(u);break;case"off":r(),(u||s.tweenRunning&&c.dir)&&o(!0)}},_arr:function(t){var a=e(this).data(i).opt,n=[];return"function"==typeof t&&(t=t()),t instanceof Array?n=t.length>1?[t[0],t[1]]:"x"===a.axis?[null,t[0]]:[t[0],null]:(n[0]=t.y?t.y:t.x||"x"===a.axis?null:t,n[1]=t.x?t.x:t.y||"y"===a.axis?null:t),"function"==typeof n[0]&&(n[0]=n[0]()),"function"==typeof n[1]&&(n[1]=n[1]()),n},_to:function(t,a){if(null!=t&&"undefined"!=typeof t){var n=e(this),o=n.data(i),r=o.opt,s=e("#mCSB_"+o.idx+"_container"),l=s.parent(),c=typeof t;a||(a="x"===r.axis?"x":"y");var d="x"===a?s.outerWidth(!1):s.outerHeight(!1),u="x"===a?s.offset().left:s.offset().top,m="x"===a?s[0].offsetLeft:s[0].offsetTop,f="x"===a?"left":"top";switch(c){case"function":return t();case"object":if(t.nodeType)var v="x"===a?e(t).offset().left:e(t).offset().top;else if(t.jquery){if(!t.length)return;var v="x"===a?t.offset().left:t.offset().top}return v-u;case"string":case"number":if(h._isNumeric.call(null,t))return Math.abs(t);
if(t.indexOf("%")!==-1)return Math.abs(d*parseInt(t)/100);if(t.indexOf("-=")!==-1)return Math.abs(m-parseInt(t.split("-=")[1]));if(t.indexOf("+=")!==-1){var g=m+parseInt(t.split("+=")[1]);return g>=0?0:Math.abs(g)}if(t.indexOf("px")!==-1&&h._isNumeric.call(null,t.split("px")[0]))return Math.abs(t.split("px")[0]);if("top"===t||"left"===t)return 0;if("bottom"===t)return Math.abs(l.height()-s.outerHeight(!1));if("right"===t)return Math.abs(l.width()-s.outerWidth(!1));if("first"===t||"last"===t){var _=s.find(":"+t),v="x"===a?e(_).offset().left:e(_).offset().top;return v-u}if(e(t).length){var v="x"===a?e(t).offset().left:e(t).offset().top;return v-u}return s.css(f,t),void p.update.call(null,n[0])}}},_autoUpdate:function(t){function a(){clearTimeout(u[0].autoUpdate),u[0].autoUpdate=setTimeout(function(){return d.advanced.updateOnSelectorChange&&(m=r(),m!==w)?(s(),void(w=m)):(d.advanced.updateOnContentResize&&(f=[u.outerHeight(!1),u.outerWidth(!1),g.height(),g.width(),y()[0],y()[1]],f[0]===b[0]&&f[1]===b[1]&&f[2]===b[2]&&f[3]===b[3]&&f[4]===b[4]&&f[5]===b[5]||(s(),b=f)),d.advanced.updateOnImageLoad&&(v=n(),v!==k&&(u.find("img").each(function(){o(this.src)}),k=v)),void((d.advanced.updateOnSelectorChange||d.advanced.updateOnContentResize||d.advanced.updateOnImageLoad)&&a()))},60)}function n(){var e=0;return d.advanced.updateOnImageLoad&&(e=u.find("img").length),e}function o(e){function t(e,t){return function(){return t.apply(e,arguments)}}function a(){this.onload=null,s()}var n=new Image;n.onload=t(n,a),n.src=e}function r(){d.advanced.updateOnSelectorChange===!0&&(d.advanced.updateOnSelectorChange="*");var t=0,a=u.find(d.advanced.updateOnSelectorChange);return d.advanced.updateOnSelectorChange&&a.length>0&&a.each(function(){t+=e(this).height()+e(this).width()}),t}function s(){clearTimeout(u[0].autoUpdate),p.update.call(null,l[0])}var l=e(this),c=l.data(i),d=c.opt,u=e("#mCSB_"+c.idx+"_container");if(t)return clearTimeout(u[0].autoUpdate),void h._delete.call(null,u[0].autoUpdate);var m,f,v,g=u.parent(),_=[e("#mCSB_"+c.idx+"_scrollbar_vertical"),e("#mCSB_"+c.idx+"_scrollbar_horizontal")],y=function(){return[_[0].is(":visible")?_[0].outerHeight(!0):0,_[1].is(":visible")?_[1].outerWidth(!0):0]},w=r(),b=[u.outerHeight(!1),u.outerWidth(!1),g.height(),g.width(),y()[0],y()[1]],k=n();a()},_snapAmount:function(e,t,a){return Math.round(e/t)*t-a},_stop:function(t){var a=t.data(i),n=e("#mCSB_"+a.idx+"_container,#mCSB_"+a.idx+"_container_wrapper,#mCSB_"+a.idx+"_dragger_vertical,#mCSB_"+a.idx+"_dragger_horizontal");n.each(function(){h._stopTween.call(this)})},_scrollTo:function(t,a,n){function o(e){return l&&c.callbacks[e]&&"function"==typeof c.callbacks[e]}function r(){return[c.callbacks.alwaysTriggerOffsets||w>=b[0]+x,c.callbacks.alwaysTriggerOffsets||w<=-C]}function s(){var e=[m[0].offsetTop,m[0].offsetLeft],a=[_[0].offsetTop,_[0].offsetLeft],i=[m.outerHeight(!1),m.outerWidth(!1)],o=[p.height(),p.width()];t[0].mcs={content:m,top:e[0],left:e[1],draggerTop:a[0],draggerLeft:a[1],topPct:Math.round(100*Math.abs(e[0])/(Math.abs(i[0])-o[0])),leftPct:Math.round(100*Math.abs(e[1])/(Math.abs(i[1])-o[1])),direction:n.dir}}var l=t.data(i),c=l.opt,d={trigger:"internal",dir:"y",scrollEasing:"mcsEaseOut",drag:!1,dur:c.scrollInertia,overwrite:"all",callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},n=e.extend(d,n),u=[n.dur,n.drag?0:n.dur],p=e("#mCSB_"+l.idx),m=e("#mCSB_"+l.idx+"_container"),f=m.parent(),v=c.callbacks.onTotalScrollOffset?h._arr.call(t,c.callbacks.onTotalScrollOffset):[0,0],g=c.callbacks.onTotalScrollBackOffset?h._arr.call(t,c.callbacks.onTotalScrollBackOffset):[0,0];if(l.trigger=n.trigger,0===f.scrollTop()&&0===f.scrollLeft()||(e(".mCSB_"+l.idx+"_scrollbar").css("visibility","visible"),f.scrollTop(0).scrollLeft(0)),"_resetY"!==a||l.contentReset.y||(o("onOverflowYNone")&&c.callbacks.onOverflowYNone.call(t[0]),l.contentReset.y=1),"_resetX"!==a||l.contentReset.x||(o("onOverflowXNone")&&c.callbacks.onOverflowXNone.call(t[0]),l.contentReset.x=1),"_resetY"!==a&&"_resetX"!==a){switch(!l.contentReset.y&&t[0].mcs||!l.overflowed[0]||(o("onOverflowY")&&c.callbacks.onOverflowY.call(t[0]),l.contentReset.x=null),!l.contentReset.x&&t[0].mcs||!l.overflowed[1]||(o("onOverflowX")&&c.callbacks.onOverflowX.call(t[0]),l.contentReset.x=null),c.snapAmount&&(a=h._snapAmount(a,c.snapAmount,c.snapOffset)),n.dir){case"x":var _=e("#mCSB_"+l.idx+"_dragger_horizontal"),y="left",w=m[0].offsetLeft,b=[p.width()-m.outerWidth(!1),_.parent().width()-_.width()],k=[a,0===a?0:a/l.scrollRatio.x],x=v[1],C=g[1],$=x>0?x/l.scrollRatio.x:0,S=C>0?C/l.scrollRatio.x:0;break;case"y":var _=e("#mCSB_"+l.idx+"_dragger_vertical"),y="top",w=m[0].offsetTop,b=[p.height()-m.outerHeight(!1),_.parent().height()-_.height()],k=[a,0===a?0:a/l.scrollRatio.y],x=v[0],C=g[0],$=x>0?x/l.scrollRatio.y:0,S=C>0?C/l.scrollRatio.y:0}k[1]<0||0===k[0]&&0===k[1]?k=[0,0]:k[1]>=b[1]?k=[b[0],b[1]]:k[0]=-k[0],t[0].mcs||(s(),o("onInit")&&c.callbacks.onInit.call(t[0])),clearTimeout(m[0].onCompleteTimeout),!l.tweenRunning&&(0===w&&k[0]>=0||w===b[0]&&k[0]<=b[0])||(h._tweenTo.call(null,_[0],y,Math.round(k[1]),u[1],n.scrollEasing),h._tweenTo.call(null,m[0],y,Math.round(k[0]),u[0],n.scrollEasing,n.overwrite,{onStart:function(){n.callbacks&&n.onStart&&!l.tweenRunning&&(o("onScrollStart")&&(s(),c.callbacks.onScrollStart.call(t[0])),l.tweenRunning=!0,h._onDragClasses(_),l.cbOffsets=r())},onUpdate:function(){n.callbacks&&n.onUpdate&&o("whileScrolling")&&(s(),c.callbacks.whileScrolling.call(t[0]))},onComplete:function(){if(n.callbacks&&n.onComplete){"yx"===c.axis&&clearTimeout(m[0].onCompleteTimeout);var e=m[0].idleTimer||0;m[0].onCompleteTimeout=setTimeout(function(){o("onScroll")&&(s(),c.callbacks.onScroll.call(t[0])),o("onTotalScroll")&&k[1]>=b[1]-$&&l.cbOffsets[0]&&(s(),c.callbacks.onTotalScroll.call(t[0])),o("onTotalScrollBack")&&k[1]<=S&&l.cbOffsets[1]&&(s(),c.callbacks.onTotalScrollBack.call(t[0])),l.tweenRunning=!1,m[0].idleTimer=0,h._onDragClasses(_,"hide")},e)}}}))}},_tweenTo:function(e,a,n,i,o,r,s){function l(){x.stop||(w||v.call(),w=h._getTime()-y,c(),w>=x.time&&(x.time=w>x.time?w+m-(w-x.time):w+m-1,x.time<w+1&&(x.time=w+1)),x.time<i?x.id=f(l):_.call())}function c(){i>0?(x.currVal=p(x.time,b,C,i,o),k[a]=Math.round(x.currVal)+"px"):k[a]=n+"px",g.call()}function d(){m=1e3/60,x.time=w+m,f=t.requestAnimationFrame?t.requestAnimationFrame:function(e){return c(),setTimeout(e,.01)},x.id=f(l)}function u(){null!=x.id&&(t.requestAnimationFrame?t.cancelAnimationFrame(x.id):clearTimeout(x.id),x.id=null)}function p(e,t,a,n,i){switch(i){case"linear":case"mcsLinear":return a*e/n+t;case"mcsLinearOut":return e/=n,e--,a*Math.sqrt(1-e*e)+t;case"easeInOutSmooth":return e/=n/2,e<1?a/2*e*e+t:(e--,-a/2*(e*(e-2)-1)+t);case"easeInOutStrong":return e/=n/2,e<1?a/2*Math.pow(2,10*(e-1))+t:(e--,a/2*(-Math.pow(2,-10*e)+2)+t);case"easeInOut":case"mcsEaseInOut":return e/=n/2,e<1?a/2*e*e*e+t:(e-=2,a/2*(e*e*e+2)+t);case"easeOutSmooth":return e/=n,e--,-a*(e*e*e*e-1)+t;case"easeOutStrong":return a*(-Math.pow(2,-10*e/n)+1)+t;case"easeOut":case"mcsEaseOut":default:var o=(e/=n)*e,r=o*e;return t+a*(.499999999999997*r*o+-2.5*o*o+5.5*r+-6.5*o+4*e)}}e._malihuTween||(e._malihuTween={top:{},left:{}});var m,f,s=s||{},v=s.onStart||function(){},g=s.onUpdate||function(){},_=s.onComplete||function(){},y=h._getTime(),w=0,b=e.offsetTop,k=e.style,x=e._malihuTween[a];"left"===a&&(b=e.offsetLeft);var C=n-b;x.stop=0,"none"!==r&&u(),d()},_getTime:function(){return t.performance&&t.performance.now?t.performance.now():t.performance&&t.performance.webkitNow?t.performance.webkitNow():Date.now?Date.now():(new Date).getTime()},_stopTween:function(){var e=this;e._malihuTween||(e._malihuTween={top:{},left:{}}),e._malihuTween.top.id&&(t.requestAnimationFrame?t.cancelAnimationFrame(e._malihuTween.top.id):clearTimeout(e._malihuTween.top.id),e._malihuTween.top.id=null,e._malihuTween.top.stop=1),e._malihuTween.left.id&&(t.requestAnimationFrame?t.cancelAnimationFrame(e._malihuTween.left.id):clearTimeout(e._malihuTween.left.id),e._malihuTween.left.id=null,e._malihuTween.left.stop=1)},_delete:function(e){try{delete e}catch(t){e=null}},_mouseBtnLeft:function(e){return!(e.which&&1!==e.which)},_pointerTouch:function(e){var t=e.originalEvent.pointerType;return!(t&&"touch"!==t&&2!==t)},_isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)}};e.fn[n]=function(t){return p[t]?p[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist"):p.init.apply(this,arguments)},e[n]=function(t){return p[t]?p[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist"):p.init.apply(this,arguments)},e[n].defaults=r,t[n]=!0,e(t).load(function(){e(o)[n]()})})}(jQuery,window,document),function(){var e,t;e=this.jQuery||window.jQuery,t=e(window),e.fn.stick_in_parent=function(a){var n,i,o,r,s,l,c,d,u,p,h,m;for(null==a&&(a={}),m=a.sticky_class,l=a.inner_scrolling,h=a.recalc_every,p=a.parent,u=a.offset_top,d=a.spacer,o=a.bottoming,null==u&&(u=0),null==p&&(p=void 0),null==l&&(l=!0),null==m&&(m="is_stuck"),n=e(document),null==o&&(o=!0),r=function(a,i,r,s,c,f,v,g){var _,y,w,b,k,x,C,$,S,T,I,B;if(!a.data("sticky_kit")){if(a.data("sticky_kit",!0),k=n.height(),C=a.parent(),null!=p&&(C=C.closest(p)),!C.length)throw"failed to find stick parent";if(w=!1,_=!1,I=null!=d?d&&a.closest(d):e("<div />"),I&&I.css("position",a.css("position")),$=function(){var e,t,o;if(!g)return k=n.height(),e=parseInt(C.css("border-top-width"),10),t=parseInt(C.css("padding-top"),10),i=parseInt(C.css("padding-bottom"),10),r=C.offset().top+e+t,s=C.height(),w&&(w=!1,_=!1,null==d&&(a.insertAfter(I),I.detach()),a.css({position:"",top:"",width:"",bottom:""}).removeClass(m),o=!0),c=a.offset().top-(parseInt(a.css("margin-top"),10)||0)-u,f=a.outerHeight(!0),v=a.css("float"),I&&I.css({width:a.outerWidth(!0),height:f,display:a.css("display"),"vertical-align":a.css("vertical-align"),"float":v}),o?B():void 0},$(),f!==s)return b=void 0,x=u,T=h,B=function(){var e,p,y,S,B,D;if(!g)return y=!1,null!=T&&(T-=1,T<=0&&(T=h,$(),y=!0)),y||n.height()===k||($(),y=!0),S=t.scrollTop(),null!=b&&(p=S-b),b=S,w?(o&&(B=S+f+x>s+r,_&&!B&&(_=!1,a.css({position:"fixed",bottom:"",top:x}).trigger("sticky_kit:unbottom"))),S<c&&(w=!1,x=u,null==d&&("left"!==v&&"right"!==v||a.insertAfter(I),I.detach()),e={position:"",width:"",top:""},a.css(e).removeClass(m).trigger("sticky_kit:unstick")),l&&(D=t.height(),f+u>D&&(_||(x-=p,x=Math.max(D-f,x),x=Math.min(u,x),w&&a.css({top:x+"px"}))))):S>c&&(w=!0,e={position:"fixed",top:x},e.width="border-box"===a.css("box-sizing")?a.outerWidth()+"px":a.width()+"px",a.css(e).addClass(m),null==d&&(a.after(I),"left"!==v&&"right"!==v||I.append(a)),a.trigger("sticky_kit:stick")),w&&o&&(null==B&&(B=S+f+x>s+r),!_&&B)?(_=!0,"static"===C.css("position")&&C.css({position:"relative"}),a.css({position:"absolute",bottom:i,top:"auto"}).trigger("sticky_kit:bottom")):void 0},S=function(){return $(),B()},y=function(){if(g=!0,t.off("touchmove",B),t.off("scroll",B),t.off("resize",S),e(document.body).off("sticky_kit:recalc",S),a.off("sticky_kit:detach",y),a.removeData("sticky_kit"),a.css({position:"",bottom:"",top:"",width:""}),C.position("position",""),w)return null==d&&("left"!==v&&"right"!==v||a.insertAfter(I),I.remove()),a.removeClass(m)},t.on("touchmove",B),t.on("scroll",B),t.on("resize",S),e(document.body).on("sticky_kit:recalc",S),a.on("sticky_kit:detach",y),setTimeout(B,0)}},s=0,c=this.length;s<c;s++)i=this[s],r(e(i));return this}}.call(this),!function(e){"function"==typeof define&&define.amd?define(e):e()}(function(){"use strict";var e=function(){function e(e,t){var a=void 0!==t?t:{};this.version="3.6.7",this.userAgent=window.navigator.userAgent||"no `userAgent` provided by the browser",this.props={customStickyChangeNumber:a.customStickyChangeNumber||null,noStyles:a.noStyles||!1,stickyBitStickyOffset:a.stickyBitStickyOffset||0,parentClass:a.parentClass||"js-stickybit-parent",scrollEl:"string"==typeof a.scrollEl?document.querySelector(a.scrollEl):a.scrollEl||window,stickyClass:a.stickyClass||"js-is-sticky",stuckClass:a.stuckClass||"js-is-stuck",stickyChangeClass:a.stickyChangeClass||"js-is-sticky--change",useStickyClasses:a.useStickyClasses||!1,useFixed:a.useFixed||!1,useGetBoundingClientRect:a.useGetBoundingClientRect||!1,verticalPosition:a.verticalPosition||"top"},this.props.positionVal=this.definePosition()||"fixed",this.instances=[];var n=this.props,i=n.positionVal,o=n.verticalPosition,r=n.noStyles,s=n.stickyBitStickyOffset,l="top"!==o||r?"":s+"px",c="fixed"!==i?i:"";this.els="string"==typeof e?document.querySelectorAll(e):e,"length"in this.els||(this.els=[this.els]);for(var d=0;d<this.els.length;d++){var u=this.els[d];u.style[o]=l,u.style.position=c,this.instances.push(this.addInstance(u,this.props))}}var t=e.prototype;return t.definePosition=function(){var e;if(this.props.useFixed)e="fixed";else{for(var t=["","-o-","-webkit-","-moz-","-ms-"],a=document.head.style,n=0;n<t.length;n+=1)a.position=t[n]+"sticky";e=a.position?a.position:"fixed",a.position=""}return e},t.addInstance=function(e,t){var a=this,n={el:e,parent:e.parentNode,props:t};if("fixed"===t.positionVal||t.useStickyClasses){this.isWin=this.props.scrollEl===window;var i=this.isWin?window:this.getClosestParent(n.el,n.props.scrollEl);this.computeScrollOffsets(n),n.parent.className+=" "+t.parentClass,n.state="default",n.stateContainer=function(){return a.manageState(n)},i.addEventListener("scroll",n.stateContainer)}return n},t.getClosestParent=function(e,t){var a=t,n=e;if(n.parentElement===a)return a;for(;n.parentElement!==a;)n=n.parentElement;return a},t.getTopPosition=function(e){if(this.props.useGetBoundingClientRect)return e.getBoundingClientRect().top+(this.props.scrollEl.pageYOffset||document.documentElement.scrollTop);for(var t=0;t=e.offsetTop+t,e=e.offsetParent;);return t},t.computeScrollOffsets=function(e){var t=e,a=t.props,n=t.el,i=t.parent,o=!this.isWin&&"fixed"===a.positionVal,r="bottom"!==a.verticalPosition,s=o?this.getTopPosition(a.scrollEl):0,l=o?this.getTopPosition(i)-s:this.getTopPosition(i),c=null!==a.customStickyChangeNumber?a.customStickyChangeNumber:n.offsetHeight,d=l+i.offsetHeight;t.offset=s+a.stickyBitStickyOffset,t.stickyStart=r?l-t.offset:0,t.stickyChange=t.stickyStart+c,t.stickyStop=r?d-(n.offsetHeight+t.offset):d-window.innerHeight},t.toggleClasses=function(e,t,a){var n=e,i=n.className.split(" ");a&&-1===i.indexOf(a)&&i.push(a);var o=i.indexOf(t);-1!==o&&i.splice(o,1),n.className=i.join(" ")},t.manageState=function(e){var t=e,a=t.el,n=t.props,i=t.state,o=t.stickyStart,r=t.stickyChange,s=t.stickyStop,l=a.style,c=n.noStyles,d=n.positionVal,u=n.scrollEl,p=n.stickyClass,h=n.stickyChangeClass,m=n.stuckClass,f=n.verticalPosition,v="bottom"!==f,g=function(e){e()},_=this.isWin&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame)||g,y=this.toggleClasses,w=this.isWin?window.scrollY||window.pageYOffset:u.scrollTop,b=v&&w<=o&&("sticky"===i||"stuck"===i),k=s<=w&&"sticky"===i;o<w&&w<s&&("default"===i||"stuck"===i)?(t.state="sticky",_(function(){y(a,m,p),l.position=d,c||(l.bottom="",l[f]=n.stickyBitStickyOffset+"px")})):b?(t.state="default",_(function(){y(a,p),y(a,m),"fixed"===d&&(l.position="")})):k&&(t.state="stuck",_(function(){y(a,p,m),"fixed"!==d||c||(l.top="",l.bottom="0",l.position="absolute")}));var x=r<=w&&w<=s;w<r/2||s<w?_(function(){y(a,h)}):x&&_(function(){y(a,"stub",h)})},t.update=function(e){var t=this;return void 0===e&&(e=null),this.instances.forEach(function(a){t.computeScrollOffsets(a),e&&Object.keys(e).forEach(function(t){a.props[t]=e[t]})}),this},t.removeInstance=function(e){var t=e.el,a=e.props,n=this.toggleClasses;t.style.position="",t.style[a.verticalPosition]="",n(t,a.stickyClass),n(t,a.stuckClass),n(t.parentNode,a.parentClass)},t.cleanup=function(){for(var e=0;e<this.instances.length;e+=1){var t=this.instances[e];t.stateContainer&&t.props.scrollEl.removeEventListener("scroll",t.stateContainer),this.removeInstance(t)}this.manageState=!1,this.instances=[]},e}();if("undefined"!=typeof window){var t=window.$||window.jQuery||window.Zepto;t&&(t.fn.stickybits=function(t){return new e(this,t)})}}),$(document).ready(function(){$("#merch-cta").click(function(e){e.preventDefault();var t=$(this).data("action");"subscribe"===t?($.post("/php/ajax/storeMerchandisePopUpClick.php",{action:t,requestClick:!0,requestId:$(this).data("request-id")}),window.location.href=$(this).data("link-url")):"opt-in"!==t&&"auto-renew"!==t||$.post("/php/ajax/storeMerchandisePopUpClick.php",{requestClick:!0,action:t,requestId:$(this).data("request-id")},function(e){$("#upgrade-for-merch-content-container").hide(),$("body").append(e.content);var t=$("#upgrade-for-merch-pop-up-container");t.show(),t.center();var a=$("#overlay");a.show()})}),$("body").on("click","#upgrade-for-merch-pop-up-container #confirm-address",function(e){function t(e){$.post("php/ajax/saveUserDeliveryAddress.php",e,function(e){if("success"!==e.message)apprise(e.message);else{$("#upgrade-for-merch-pop-up-content").html('<div style="padding-top:200px;"><div style="font-size:32px;">Address successfully saved!'+e.emoji+'</div><br><div style="font-size:20px;">Look out for your new Twinkl '+i+", which should be posted "+e.postagePromise+'!</div><br><div id="countdown" style="font-size:16px;">Closing in 5 seconds</div></div>');for(var t=2;t<7;t++)!function(e){setTimeout(function(){$("#upgrade-for-merch-pop-up-content #countdown").html("Closing in "+(6-e)+" seconds")},1e3*e)}(t),6===t&&($("#upgrade-for-merch-pop-up-container").delay(5e3).fadeOut("slow"),$("#overlay").delay(5e3).fadeOut("slow"))}})}e.preventDefault();var a=$(this).data("offer-id"),n=$(this).data("request-id"),i=$(this).data("merchandise-name");$(this).html('<img src="/images/adyen_loader.gif" class="adyenLoaderImage">');var o,r=$("#full-name").val(),s=($("#upgrade-for-merch-pop-up-container").find("#postcode"),""),l=[];(0===r.length||/\d/g.test(r))&&l.push("Please provide valid input for full name!");var c=[];if($(".item-options").each(function(){c.push($(this).val())}),0!==l.length){var d=l.join("\n");return alert(d),void $(this).html("Confirm address")}var u=r.split(" "),p=capitaliseFirstLetter(u[0]),h=capitaliseFirstLetter(u[u.length-1]),m={merchandiseOfferId:a,merchandiseRequestId:n,firstName:p,lastName:h,itemOptions:c};if($("#address").length){o=$("#postcode").val(),0!==o.length&&/\d/g.test(o)||l.push("Please provide valid input for postcode!");var f=$("#address").val();0===f.length&&l.push("Please provide valid input for address!");var v=f.split("\n");m.addressLineOne=v[0];for(var g=1;g<v.length;g++)s=s.concat("\n",v[g]);m.addressLineTwo=s,m.postcode=o,$.post("https://api.postcodes.io/postcodes",{postcodes:[o]},function(e){e.result[0].result&&(m.postcode=e.result[0].result.postcode,m.city=e.result[0].result.admin_district,m.county=e.result[0].result.admin_county,m.country=e.result[0].result.country),t(m)}).fail(function(){t(m)})}else{if(m.postcode=$("#address_postcode").val(),m.addressLineOne=$("#address_line_1").val(),m.addressLineTwo=$("#address_line_2").val(),m.city=$("#address_city").val(),m.country=$("#address_country").val(),m.postcode||l.push("Please provide valid input for postcode!"),m.addressLineOne||l.push("Please provide input for address line 1!"),m.city||l.push("Please provide input for city"),$("#address_county").length?(m.county=$("#address_county").val(),m.county||l.push("Please provide input for county")):(m.county_id=$("#address-container #county_id").val(),m.county_id||l.push("Please provide input for county")),m.country||l.push("Please provide input for country"),0!==l.length){var _=l.join("\n");return alert(_),void $(this).html("Confirm address")}t(m)}})}),$(document).ready(function(){$(".primary_nav_wrap").find(".menu-list").mCustomScrollbar({theme:"dark",scrollButtons:{enable:!0}}),$(document).on("click",function(e){var t=$(".menu");t===e.target||t.has(e.target).length||$(".primary_nav_wrap").find("a.menutitle").next("ul").hide()}),$("#newsroom").on("click",".primary_nav_wrap ul",function(){$(this).find("ul").is(":visible")?$(this).find("ul").hide():$(this).find("ul").show()}),$("#newsroom").on("click","#articles-dropdown .menu-list li ",function(e){$("#articles-dropdown").find(".menutitle span").text($(this).text()),$(this).closest("ul").hide();var t=$(this).data("url");window.location.href=t}),$(".load-more-container .load-more").on("click",function(e){e.preventDefault();var t=$(this),a=parseInt(t.attr("data-page")),n=t.data("ks");a+=1,t.hide(),$(".load-more-container").append('<div class="loading m-t-2"></div>'),$.post(t.attr("href")+a,{action:"showMoreStories",ks:n,page:a}).done(function(e){$(".load-more-container .loading").remove(),$(".newsroom-container").append(e.html),$(".load-more").attr("data-page",a),0==e.count?t.hide():t.show()}).fail(function(e){showDialogMessage("Something went wrong",e.statusText)})}),$(".menu-options-dropdown").on("change",function(){var e=$(this).find("option:selected").attr("data-url");window.location.href="/newsroom/category/"+e})}),function(){"undefined"!=typeof $&&null!=$&&$(function(){var e=$("body"),t=e.find(".container.main");e.hasClass("onboard dashboard")&&!function(){var e=t.find(".nav-tile-banner");e.find(".control-expand"),e.find(".content-block");e.initAnimateCssExpandable(),t.find(".slick-slider").not(".slick-initialized").slick({arrows:!0,dots:!1,infinite:!1,speed:300,slidesToShow:3,slidesToScroll:1}),t.find("[data-gtm-id]").initGtmEventTracking()}()})}(window),$(document).ready(function(){$(".donate-originals-container .donate-originals-book").click(function(){$(".donate-originals-container .original-splashscreen-content").hide(),$(".donate-originals-container .original-splashscreen-content-pg-2").show()}),$(".donate-originals-container .exploreResources").click(function(){var e=3,t=$(this).attr("data-bookId"),a=$(this).parents(".generic_pop"),n=a.data("popup-id");$.post("/original-donation/save",{donateOption:e,bookId:t,popupId:n},function(e){console.log(e),"success"!=e.message?alert(e.message):($(".donate-originals-container").remove(),$("#overlay").remove())},"json")}),$(".donate-originals-container .donate-option-btn").click(function(){var e=$(this).attr("data-value"),t=$(this).attr("data-bookId"),a=$(".donate-originals-container .donation-name").val(),n=$(this).parents(".generic_pop"),i=n.data("popup-id"),o=document.createElement("img");o.setAttribute("src",imageAssetBase+"/images/loading.gif"),o.setAttribute("alt","Please Wait..."),o.setAttribute("class","loader"),this.insertAdjacentElement("afterend",o),$.post("/original-donation/save",{donateOption:e,bookId:t,donationName:a,popupId:i},function(e){o.remove(),"success"!=e.message?alert(e.message):($(".donate-originals-container .original-splashscreen-content-pg-2").hide(),$(".donate-originals-container .original-splashscreen-content-pg-3").show())},"json")}),$(".donate-originals-container .donate-opt-out-option-btn").click(function(){var e=$(this).attr("data-value"),t=$(this).attr("data-bookId"),a=$(".donate-originals-container .donation-name").val(),n=$(this).parents(".generic_pop"),i=n.data("popup-id");$.post("/original-donation/save",{donateOption:e,bookId:t,donationName:a,popupId:i},function(e){console.log(e),"success"!=e.message?alert(e.message):($(".donate-originals-container").remove(),$("#overlay").remove())},"json")}),$("#originals .confirmOriginalDonation").click(function(){var e=$(this).attr("data-value"),t=$(this).attr("data-bookId"),a=$("#originals .donation-name").val();$.post("/original-donation/save",{donateOption:e,bookId:t,donationName:a,donationPage:1},function(e){console.log(e),"success"!=e.message?alert(e.message):$("#originals .donation-container").html(e.html)},"json")})}),function(){function e(){function e(e){return m&&e!==!0?this:(t(),m=!0,this)}function t(){return f=$('<div id="tpm-popup-block" class="tpm-popup-block"></div>'),$("body").prepend(f),this}function a(e,t){if(null==t||0===t.length){if(""===(e||"").trim())throw new Error("Selector is not defined.");t=$(e)}var a=n($(t));return $('<div class="tpm-popup"></div>').append($('<div class="tmp-popup-content"></div>').append(a))}function n(e){if(0===e.length)throw new Error('Unable to find popup content. | Selector: "'+selector+'"');return e.is("script")?$(e[0].innerHTML):e}function i(e){return f.append(e),this}function o(e,t){t=t||{};var n=$.Deferred().then(t.success||null,t.error||ajaxErrorHandler,t.complete||null);try{var i=a(e);n.resolve(d(i.find(".tpm-popup-content"),i))}catch(o){r(n,t)}return n}function r(e,t){var a={promise:e,customAjaxSettings:t};return ajaxSettings=s(Object.assign(l(),t||{},{success:c.bind(a),error:u.bind(a),complete:p.bind(a)})),$.ajax(ajaxSettings)}function s(e){if(!e)throw new Error("Popup ajax settings are not defined.");if(""===(e.url||"").trim())throw new Error("Popup ajax settings - URL is not defined.");return e}function l(){return{type:"GET"}}function c(e,t,a){this.promise.resolve(d(e),t,a)}function d(e,t){return{popup:null!=t?t:a(null,e),popup_content:$(e)}}function u(e,t,a){this.promise.reject(e,t,a)}function p(e,t){return isAjaxTextStatusSuccess(t)?void(isJqueryPromiseStateResolved(this.promise)||c.call(this,arguments)):void(isJqueryPromiseStateRejected(this.promise)||u.call(this,arguments))}function h(){return f.find(".tpm-popup").remove(),this}var m=!1,f=null;this.init=e,this.loadPopup=o,this.addPopup=i,this.createPopup=a,this.removePopup=h}window.TwinklPopupManager=new e}(),$(document).ready(function(){$("#school_directory_hub .countryRegion").click(function(){var e=$(this).attr("data-name"),t=$(this).attr("data-country-id");$.post("/school-directory/select-region",{regionName:e,countryId:t},function(e){$("#school_directory_hub .school_directory_options").html(e),document.body.scrollTop=document.documentElement.scrollTop=0})}),$("#school_directory_hub").on("click",".countryTown",function(){var e=$(this).attr("data-name"),t=$(this).attr("data-country-id");$.post("/school-directory/select-town",{townName:e,countryId:t},function(e){$("#school_directory_hub .school_directory_options").html(e),document.body.scrollTop=document.documentElement.scrollTop=0})}),$("#school_directory_hub").on("click",".displayDirectoryForm",function(){$("#school_directory_hub .schoolInfoForm").show(),$("#school_directory_hub .school_information").hide(),document.body.scrollTop=document.documentElement.scrollTop=0}),$("#school_directory_hub").on("click",".returnSchoolInfo",function(){$("#school_directory_hub .schoolInfoForm").hide(),$("#school_directory_hub .schoolOwnershipForm").hide(),$("#school_directory_hub .school_information").show(),document.body.scrollTop=document.documentElement.scrollTop=0}),$("#school_directory_hub").on("change",".sdFormInput",function(){$(this).attr("data-change",1)}),$("#school_directory_hub").on("click",".submitSchoolChanges",function(){for(var e=$('.sdFormInput[data-change="1"]').map(function(){return this.name}).get(),t=$('.sdFormInput[data-change="1"]').map(function(){return this.value}).get(),a={},n=0;n<e.length;n++)a[e[n]]=t[n];var i=$(this).attr("data-schoolid"),o=$("#school_directory_hub .additionalInformation").val();$.post("/school-directory/change-school-info",{schoolId:i,changeArray:a,additionalInformation:o},function(e){$("#school_directory_hub .schoolInfoForm").hide(),$("#school_directory_hub .school_information").show(),document.body.scrollTop=document.documentElement.scrollTop=0})}),$("#school_directory_hub").on("click",".displayOwnership",function(){$("#school_directory_hub .school_information").hide(),$("#school_directory_hub .schoolOwnershipForm").show(),document.body.scrollTop=document.documentElement.scrollTop=0}),$("#school_directory_hub").on("click",".submitOwnershipRequest",function(){var e=$(this).attr("data-schoolid"),t=$("#school_directory_hub .yourName").val(),a=$("#school_directory_hub .yourRole").val(),n=$("#school_directory_hub .yourEmail").val();$.post("/school-directory/request-school-ownership",{schoolId:e,yourName:t,yourRole:a,yourEmail:n},function(e){$("#school_directory_hub .schoolOwnershipForm .schoolOwnershipDetails").html("<div style='margin-top:40px;'>A member of the Twinkl team will be in touch via email</div>"),document.body.scrollTop=document.documentElement.scrollTop=0})})});var version=2,imageAssetBase="https://images.twinkl.co.uk/tr/raw/upload/t";"local.twinkl.biz"==window.location.hostname&&(imageAssetBase="");var viewport;"undefined"!=typeof ResponsiveBootstrapToolkit&&(viewport=ResponsiveBootstrapToolkit);var versioningVar=1,newCommentRating=0;!function(e){function a(){this.vbContactBtns=document.querySelectorAll(".vb-page .contact-school-form"),this.init()}function n(t){if(t.find(".ratingWrapper").length)return void t.removeClass("hidden");var a=t.attr("summary"),n=JSON.parse(a);if(!n||"object"!=typeof n||0!==Object.keys(n).length){var i=0,o=0,r=0;e.each(n,function(e,t){t=parseInt(t),e=parseInt(e),i+=t,(t>=o||t===o&&e>r)&&(o=t,r=e)});var s="";s+='<div class="popUpRatings"><div class="starRating">';for(var l=1;l<6;l++){var c="Off";l<=r&&(c="On"),s+='<div class="star'+c+'"></div>'}s+='</div><p class="popUpAverageRating">'+r+" out of 5</p></div>",s+='<p class="globalRatings">'+i+" global ratings</p>";for(var l=5;l>0;l--){i=0===n[l]&&0===i?1:i;var d=Math.round(n[l]/i*100);s+="<div class='rowWrapper'><div class='ratingName'>"+l+" stars</div><div class='ratingBar'><div class='barInner' style='width:"+d+"%'></div></div><div class='ratingShare'>"+d+"%</div></div>"}s+='<a class="seeAllReviewsLink" data-scroll="smooth" href="#breadcrumb">See all reviews</a>',t.append('<div class="t-reviews-chart ratingWrapper">'+s+"</div>"),e("div#average_rating").mouseleave(function(){var t=e(this).parent().find(".summary");t.length&&t.addClass("hidden")}),e("review-summary.summary").mousemove(function(){var t=e(this).parent().find(".summary");t.length&&t.removeClass("hidden")}),e("review-summary.summary").mouseleave(function(){var t=e(this).parent().find(".summary");t.length&&t.addClass("hidden")})}}function o(t){if(!t.find(".ratingWrapper").length){var a=t.attr("summary"),n=JSON.parse(a),i=0;e.each(n,function(e,t){i=parseInt(i)+parseInt(t)});for(var o="",r=5;r>0;r--){var s=Math.round(n[r]/i*100);o+="<div class=' rowWrapper'><div class='ratingName'>"+r+" stars</div><div class='ratingBar'><div class='barInner' style='width:"+s+"%'></div></div><div class='ratingShare'>"+s+"%</div></div>"}t.append('<div class="t-reviews-chart ratingWrapper">'+o+"</div>")}}function r(t,a,n,i){e.ajax({type:"POST",url:location.pathname,data:{action:t,category_id:a,page:n},dataType:"json",success:function(t){e("#"+i).html(t.resources),""!=t.weeks&&(e("#weeks-dropdown").html(t.weeks),e("#level-weeks-content").attr("class",t.bgClass)),""!=t.leftMenu&&(e("#level-extra-menu").html(t.leftMenu),e("#level-extra-div").attr("class",t.bgClass)),""!=t.leftMenuDropdown&&e("#extra-res-types-dropdown").html(t.leftMenuDropdown),""!=t.addResContent&&e("#phonics-extra-level-container").html(t.addResContent),e(".primary_nav_wrap").find(".menu-list").mCustomScrollbar({theme:"dark",scrollButtons:{enable:!0}}),document.fn.events.emit("loadedContent")}})}function s(t,a){var n=[];e("#level-extra-menu input[type=checkbox]").each(function(){e(this).is(":checked")&&n.push(e(this).data("value"))}),e.post(location.pathname,{action:"loadAdditionalResources",category_id:n,level_category_id:t,page:a},function(t){e("#level-extra-content").html(t),document.fn.events.emit("loadedContent")})}function l(t){e.post("/php/ajax/getReviewCommentPopup.php",{action:"returnReRate",commentId:t},function(a){if("success"===a.message){a.page;e("body").append(a.page),B(e("#commentReRate")),e("#overlay").show(),e("#commentReRate").on("click",".closeIcon",function(){e("#overlay").hide(),e("#commentReRate").remove()}),newCommentRating=e("#commentReRate .starRating").data("rating-number"),e("#commentReRate").on("click",".closeIcon",function(){
e("#overlay").hide(),e("#commentReRate").remove()}),e("#commentReRate .starRating .starOn, #commentReRate .starRating .starOff").mouseover(ge).click(ye),e("#commentReRate .starRating").mouseout(_e),e("#commentReRate").on("click",".rerateBtn",function(){var a=e("#commentReRate .resourceNewComment").val();e.post("/php/ajax/updateUserComment.php",{action:"returnReRate",commentId:t,newCommentRating:newCommentRating,newComment:a},function(t){"success"===t.message&&(e("#overlay").hide(),e("#commentReRate").remove())},"json")})}},"json")}function c(t,a,n){var i=Math.ceil(t*a);e(".popup-close").on("click",function(){e(this).parent().addClass("hide"),n=!1}),e(window).scroll(function(){e(window).scrollTop()>i&&n&&e("[data-element-slide]").removeClass("hide")})}function d(t){var a=e("#save-resource-options-modal");a.find(".saveResource, .addToLesson").removeAttr("data-id").removeAttr("data-alt-id").removeAttr("data-type-id");var n,i=t.attr("data-id"),o=t.attr("data-alt-id"),r=t.attr("data-type-id");if("undefined"!=typeof t.data("track")?n=t.data("track"):"undefined"!=typeof t.parent().data("track")&&(n=t.parent().data("track")),"undefined"!==n){var s=JSON.stringify(n);""!==s&&(n.name="save_success",a.find(".saveResource").attr("data-track",s))}a.find(".saveResource, .addToLesson").attr("data-id",i),void 0!==o&&a.find(".saveResource, .addToLesson").attr("data-alt-id",o).attr("data-type-id",r),a.find(".addToLesson").removeClass("addAlt"),e(".filemanager_popup_alternate").is(":visible")&&(void 0!==o&&a.find(".addToLesson").addClass("addAlt"),e(".filemanager_popup_alternate").hide()),a.show(),a.center(),e("#overlay").show()}function u(t,a){var n=e("#add-resource-to-lesson-modal");if(a){var i=t.data("alt-id");n.find(".title").attr("data-alt-id","").attr("data-alt-id",i),n.find(".title").addClass("addAlt")}else n.find(".title").addClass("addRes");var o=t.data("id");n.find(".title").attr("data-resource-id",o),n.show(),n.center(),e("#overlay").show()}function p(e){var t=e.getHours(),a=e.getMinutes();a=a<10?"0"+a:a,t=t<10?"0"+t:t;var n=t+":"+a;return n}function h(t){var a="<span>"+t.text+"</span>",n=e(t.element).data("flag"),i=e(t.element).data("domain");return(n||i)&&(n&&(a='<img class="flag-dropdown" src="'+n+'" />'+a),i&&(a+=' - <span style="font-style: italic; color: grey;">'+i+"</span>"),a="<div>"+a+"</div>"),e(a)}function m(t){t.css("cursor","wait"),e.post("/php/ajax/getCountryPicker.php",{},function(t){e("#infoBoxDivContainer").remove(),e("#messageOverlay").remove(),Pe.prepend(t),e("#infoBoxDiv select#country").select2({dropdownParent:e("#infoBoxDiv"),matcher:select2DoNotShowInSearchResult,templateSelection:h,templateResult:h,dropdownAutoWidth:!0,width:"100%"}),e("#infoBoxDiv select:not(#country)").select2({dropdownParent:e("#infoBoxDiv"),matcher:select2DoNotShowInSearchResult,dropdownAutoWidth:!0,width:"100%"}),e("#messageOverlay").css({display:"block"});var a=e('<div class="close" style="top:10px;font-size:22px;">X</div>');a.click(function(){e("#messageOverlay").trigger("click")}),R(),e("#infoBoxDiv").append(a),e("#infoBoxDivContainer").fadeIn()}).always(function(){t.css("cursor","pointer")})}function f(){e("#career-picker .career-country-picker").click(function(){window.scrollTo(0,0);var t=Number(e("#countryFlag").attr("data-formtypeid"));if((isNaN(t)||t<1)&&(t=1),1==t||e("#login_options > #login").length>0||e("#login_options > #join").length>0){var a=e("body");return void(e("#infoBoxDivContainer").length?(e("#career-picker").hide(),e("#overlay").hide(),e("#infoBoxDivContainer").fadeIn(),e("#messageOverlay").css({display:"block"})):e.post("/php/ajax/getCountryPicker.php",{},function(n){e("#infoBoxDivContainer").remove(),e("#messageOverlay").remove(),a.prepend(n),e("#career-picker").hide(),e("#overlay").hide();var i=e("#county").find("option:eq(2)");if(i){var o=i.attr("data-county-name");e('label[for="county"]').text(o)}e("#infoBoxDiv select#country").select2({dropdownParent:e("#infoBoxDiv"),matcher:select2DoNotShowInSearchResult,templateSelection:h,dropdownAutoWidth:!0,width:"100%"}),e("#infoBoxDiv select:not(#country)").select2({dropdownParent:e("#infoBoxDiv"),matcher:select2DoNotShowInSearchResult,dropdownAutoWidth:!0,width:"100%"}),e("#messageOverlay").css({display:"block"});var r=e('<div class="close" style="top:10px;font-size:22px;">X</div>');r.click(function(){e("#messageOverlay").trigger("click")}),R(),e("#infoBoxDiv").append(r),e("#infoBoxDivContainer").fadeIn(),addGoogleAnalyticsEvent("Signup Selector","openPopup","Opened old signup selector using country flag.",{formTypeId:t})}))}if(null==getSignUpSelector()){var n=getSignUpSelector("create_placeholder");e("#overlay").append(n);var i={action:"popup",isEditMode:1};e.post("/php/ajax/user_careers.php",i,function(e){var a=null;null!=e&&null!=e.items&&e.items.length>0&&(a=e.items[0],"undefined"!=typeof SignedUpAppreciationPopup?(n.remove(),n=null,openPopup(a.html,"overlay-bg-fade",!1,!0,!0,!0),new SignedUpAppreciationPopup(a.formData),addGoogleAnalyticsEvent("Signup Selector","openPopup","Opened new signup selector using country flag.",JSON.stringify({formTypeId:t}))):loadScript(a.script.src,function(e){n.remove(),n=null,openPopup(a.html,"overlay-bg-fade",!1,!0,!0,!0),new SignedUpAppreciationPopup(a.formData),addGoogleAnalyticsEvent("Signup Selector","openPopup","Opened new signup selector using country flag.",{formTypeId:t})}))})}})}function v(){var t=e("#career-picker");f(),Ne?(history.pushState({},null,window.location.pathname),t.find(".career").hide(),console.log(t.find(".additional")),t.find(".subjectLeadArea").hide(),t.find(".additional").show(),t.find(".text-center.p-4").hide(),t.find(".subjectLeadQtn").hide(),Ne=!1):We?(history.pushState({},null,window.location.pathname),t.find(".career").hide(),t.find(".additional").hide(),t.find(".subjectLeadQtn").show(),t.find(".subjectLeadArea").hide(),t.find(".text-center.p-4").hide(),Ne=!1):(t.find(".career").show(),t.find(".additional").hide(),t.find(".subjectLeadArea").hide(),t.find(".text-center.p-4").show(),t.find(".subjectLeadQtn").hide()),t.show(),t.center(),t.find(".overlayOcc").show(),t.find("#modal-container").hide(),e("#overlay").show()}function g(){function t(){var e=document.querySelector(".loadnotifyContainer");e.style.display="block",fetch("/career/get-subject-lead-area",{method:"GET"}).then(function(e){return e.ok?e.json():Promise.reject(e)}).then(function(t){"success"===t.message?(e.style.display="none",document.querySelector("#career-picker .subjectLeadQtn").style.display="none",document.querySelector("#career-picker .subjectLeadArea .overlayContainerinner").innerHTML=t.html,document.querySelector("#career-picker .subjectLeadArea").style.display="block"):(document.querySelector("#career-picker").style.display="none",apprise("Something went wrong. Try again later"))})["catch"](function(e){console.warn(e)})}e("#career-picker #modal-container .close-btn").click(function(){e(this).closest("#modal-container").addClass("out")}),e("#career-picker").on("click",".addItem",function(){e(this).hasClass("none")||(e(this).toggleClass("selected"),e(".addItem.none").removeClass("selected"));var t=e("#career-picker"),a=t.find("#modal-container");t.find("form").hide();var n=t.find("#career-additional-form");e(this).hasClass("none")&&(e(".loadnotifyContainer").show(),e(".addItem").removeClass("selected"),e(this).addClass("selected"),this.closest(".overlayContainer").querySelector(".button").click()),e(this).hasClass("other")&&(e(this).addClass("selected"),n.show(),a.show(),a.removeAttr("class").addClass("reveal-animate"),t.find(".input-additional").keyup(function(){e.trim(this.value).length>0?t.find("#save-career-additional").removeAttr("disabled"):t.find("#save-career-additional").removeAttr("disabled").attr("disabled","true")}))}),e("#cancel-career-additional").click(function(){e(".addItem.other").removeClass("selected")});var a=document.getElementById("career-picker"),n=a.querySelectorAll(".subjectLeadQtn .boxItem");n.length&&n.forEach(function(e){e.addEventListener("click",function(){var e=this.dataset.value;We=!1,"1"==e?(n[1].classList.remove("selected"),t()):(Ne=!0,n[0].classList.remove("selected"),v())})});var i=a.querySelector(".skip");i&&i.addEventListener("click",function(){a.style.display="none",location.reload()}),e("#career-picker #modal-container #save-career-additional").click(function(){e("#career-picker .addItem.other").addClass("selected");var t=e("#career-picker").find("input#career-additional").val();e(".loadnotifyContainer").show(),e.post("/career/save",{additionalOther:t,action:"updateAdditional"},function(t){"success"===t.message?(e(".loadnotifyContainer").hide(),e("#career-picker .updateAdditional").trigger("click")):(e("#career-picker").hide(),apprise("Something went wrong. Try again later"))})}),e("#career-picker #modal-container #save-career-other").click(function(){var t=e("#career-picker").find("input#career-other").val();e(this).closest("#modal-container").addClass("out");var a=e("#career-picker").find(".occItem.other").data("value");e(".loadnotifyContainer").show(),e.post("/career/save",{careerId:a,careerOther:t},function(t){"success"===t.message?location.reload():(e("#career-picker").hide(),apprise("Something went wrong. Try again later"))})}),e("#career-picker .occItem, .premiumThanks .occItem").click(function(){var t=e(this).data("value"),a=e("#career-picker");a.find("form").hide();var n=a.find("#career-other-form");if(a.find(".occItem").removeClass("selected"),e(this).addClass("selected"),e(this).parent().find(".occItem").removeClass("selected"),this.classList.add("selected"),e(this).hasClass("other")){var i=a.find("#modal-container");n.show(),i.show(),i.removeAttr("class").addClass("reveal-animate"),a.find("input").keyup(function(){e.trim(this.value).length>0?a.find("#save-career-other").removeAttr("disabled"):a.find("#save-career-other").removeAttr("disabled").attr("disabled","true")})}else{var o=e(this).closest(".overlayOcc"),r=o.find(".loadnotifyContainer").show();r.show();var s=o.data("type");e.post("/career/save",{careerId:t,careerOther:""},function(t){if("success"===t.message){var a=(o.find(".additional"),o.find(".subjectLeadQtn"));a.length&&!["parent","supply teacher"].includes(t.career_type)?(r.hide(),o.find(".career").hide(),o.find(".text-center.p-4").hide(),a.show()):"premium-thanks"===s?(o.hide(),e("#premium-thankyou").show()):location.reload()}else o.hide(),apprise("Something went wrong. Try again later")})}}),e(".premiumThanks .addItem").click(function(){e(this).toggleClass("selected")}),e("#career-picker .updateAdditional, .premiumThanks .updateAdditional, #career-picker .updateSubjectLead").click(function(){var t=e(this).closest(".overlayOcc"),a=e(this).closest(".overlayContainer");t.find(".loadnotifyContainer").show();var n=t.data("type"),i=[];a.find(".addItem.selected").each(function(){i.push(e(this).data("value"))});var o="updateAdditional";this.classList.contains("updateSubjectLead")&&(o="updateSubjectLead");var r={action:o,ids:i},s="/career/save",l=function(a){return"success"!==a.message?(t.find(".loadnotifyContainer").hide(),t.hide(),void apprise(a.message)):void("premium-thanks"===n?(t.hide(),e("#premium-thankyou").show()):location.reload())};e.post(s,r,l)})}function _(){e.post("/career/getCareerPicker",{},function(e){Pe.prepend(e),addGoogleAnalyticsEvent("Career Selector","openPopup","Opened new career selector using career/country flag.",null),g(),v()})}function y(t){var t=t,a=0,n=159,i=318,o=479,r=638,s=e(".activePoint");e(".priceWindow.small .priceHolder .priceText").removeClass("active"),"1"==t&&(e(".quoteLine .activePoint").animate({left:a},500),e(".priceWindow .priceHolder").animate({top:-480},500),e(".priceWindow.small .priceHolder .priceText:nth-child(5)").addClass("active"),e(".reducedPriceSticker").animate({opacity:0},500),e(".over15PlanitFree").animate({opacity:0},500),s.data("pos","1")),"2"==t&&(e(".quoteLine .activePoint").animate({left:n},500),e(".priceWindow .priceHolder").animate({top:-360},500),e(".priceWindow.small .priceHolder .priceText:nth-child(4)").addClass("active"),e(".reducedPriceSticker").animate({opacity:1},500),e(".over15PlanitFree").animate({opacity:1},500),s.data("pos","2")),"3"==t&&(e(".quoteLine .activePoint").animate({left:i},500),e(".priceWindow .priceHolder").animate({top:-240},500),e(".priceWindow.small .priceHolder .priceText:nth-child(3)").addClass("active"),e(".reducedPriceSticker").animate({opacity:1},500),e(".over15PlanitFree").animate({opacity:1},500),s.data("pos","3")),"4"==t&&(e(".quoteLine .activePoint").animate({left:o},500),e(".priceWindow .priceHolder").animate({top:-120},500),e(".priceWindow.small .priceHolder .priceText:nth-child(2)").addClass("active"),e(".reducedPriceSticker").animate({opacity:1},500),e(".over15PlanitFree").animate({opacity:1},500),s.data("pos","4")),"5"==t&&(e(".quoteLine .activePoint").animate({left:r},500),e(".priceWindow .priceHolder").animate({top:0},500),e(".priceWindow.small .priceHolder .priceText:nth-child(1)").addClass("active"),e(".reducedPriceSticker").animate({opacity:1},500),e(".over15PlanitFree").animate({opacity:1},500),s.data("pos","5"));var l=e(".userPriceWindow .priceHolder");"5"==t&&l.animate({top:0},{duration:"750",queue:!1}),"4"==t&&l.animate({top:-80},{duration:"750",queue:!1}),"3"==t&&l.animate({top:-160},{duration:"750",queue:!1}),"2"==t&&l.animate({top:-240},{duration:"750",queue:!1}),"1"==t&&l.animate({top:-320},{duration:"750",queue:!1})}function w(t,a){e.post(window.location.href,{term:t,filter_id:a,action:"search"},function(t,a,n){"success"!=t.message?apprise(t.message):(e("#savedItemsDownloadBox").fadeOut(),e("#my-twinkl-inner").fadeOut(function(){e("#my-twinkl-inner").replaceWith(t.html),e("#my-twinkl-inner").fadeIn(function(){b(),$(),he()})}))},"json")}function b(){var t=e("#bookmarkList").find("li.highlight").length,a=e("#savedItemsDownloadBox");if(0==t)return void a.slideUp(function(){e(this).remove()});a.length||(a=e("<div>",{id:"savedItemsDownloadBox",style:"display:none;"}),e(".col2").prepend(a),a.slideDown());var n="You have selected "+t+" item";1!=t&&(n+="s"),n+=' to download. <a class="selectAll" href="#">Select all resources on page?</a> <a href="#" class="createZipButton pink button file-manager">Download Resources</a>',a.html(n)}function k(){e("#my_twinkl_resources #bookmarks").not(".myDownloads").find("#bookmarkMenu .folder:not(.selected)").droppable({tolerance:"pointer",hoverClass:"hoverDrop",activeClass:"highlight",over:function(){e(".bookmark-drag-clone").css("cursor","copy")},out:function(){e(".bookmark-drag-clone").css("cursor","no-drop")},drop:function(t,a){var n=a.draggable.find("span.resourceTitle").text(),i=e(this).find("a").text();e.post(document.URL,{ajax:1,action:"addBookmarkToFolder",itemId:a.draggable.attr("data-item-id"),typeId:a.draggable.attr("data-type-id"),folderId:e(this).attr("data-id")},function(e){"alreadyExists"==e.message?C("The item '"+n+"' already exists in the folder '"+i+"'",!0):"success"!==e.message?C(e.message,!0):C("'"+n+"' has been added to '"+i+"'")},"json")}})}function C(t,a){e(".topbar").remove();var n="topbar";a&&(n+=" error"),e("<div>",{"class":n,text:t}).hide().prependTo("body").slideDown("fast").delay(3e3).slideUp("fast",function(){e(this).remove()})}function $(){var t=e("#my_twinkl_resources #bookmarks").not(".myDownloads").find("#bookmarkList li");t&&t.draggable({cursorAt:{left:50,top:25},opacity:.5,refreshPositions:!0,zIndex:10009,appendTo:".cd-panel__content",helper:function(){return e('<img class="bookmark-drag-helper" src="'+e(this).find("img").attr("src")+'" />')},drag:function(t,a){e(".bookmark-drag-clone").css({left:t.pageX,top:t.pageY})},start:function(t,a){if(e(".bookmark-drag-helper").clone().attr("class","bookmark-drag-clone").appendTo("body"),e(".bookmark-drag-helper").hide(),e(this).css("cursor","no-drop"),Ke&&e(".cd-panel--is-visible").length){var n=Ke.getResourceObject(this),i=e("#lessonZone .lessonData, .dropZone");i.droppable({activeClass:"hovered",over:function(){e(".bookmark-drag-clone").css("cursor","copy")},out:function(){e(".bookmark-drag-clone").css("cursor","no-drop")},drop:function(e,t){if(n)if(e.target.closest(".dropZone"))Ke.addLesson(n);else if(e.target.closest(".lessonData")){var a=Ke.getLesson(+e.target.closest("[data-id]").getAttribute("data-id"));if(a){var i=e.target.closest(".lessonData").classList.contains("lessonDataEdit");Ke.dragDropAdd(a,n,i)}}}})}if(e("#bookmarkMenu").addClass("highlight"),!e("#bookmarkList").hasClass("resources")||!e("#bookmarkMenu .viewAll").hasClass("selected")){var o=e('<img src="'+imageAssetBase+'/images/Recycle-Bin-Empty-icon.png" id="bookmarkBin" />');e("#bookmarkMenu").after(o),o.droppable({hoverClass:"hoverDrop",over:function(){e(".bookmark-drag-clone").css("cursor","copy")},out:function(){e(".bookmark-drag-clone").css("cursor","no-drop")},drop:function(t,a){var n=a.draggable.find("span.resourceTitle").text(),i=0,o="";e("#bookmarkMenu .folder.selected").length&&(i=e("#bookmarkMenu .folder.selected").attr("data-id"),o=e("#bookmarkMenu .folder.selected a").text()),e.post(document.URL,{ajax:1,action:"removeBookmark",itemId:a.draggable.attr("data-item-id"),typeId:a.draggable.attr("data-type-id"),folderId:i},function(t){if(a.draggable.remove(),"success"!==t.message)return void C(t.message,!0);var i=o?"'"+n+"' has been removed from + '"+o+"'":"'"+n+"' has been removed";C(i),e("#bookmarkList li").removeClass("odd").removeClass("even"),e("#bookmarkList li:odd").addClass("odd"),e("#bookmarkList li:even").addClass("even"),b()},"json")}})}},stop:function(t,a){e(this).css("cursor","initial"),e("#bookmarkBin").remove(),e("#bookmarkMenu").removeClass("highlight"),e(".bookmark-drag-clone").remove()}})}function S(){null!=Ze&&Ze.init()}function T(t,a,n){e.ajax({type:"POST",url:window.location,data:{action:"search",type:t,searchTerm:a,page:n},success:function(t){e("#search-my-downloads").find('input[name="searchTerm"]').val(a);var n=e("#resources-list");n.html(t),S()}})}function I(t){var a=e("#dashy_scrolling_banner"),n=a.find(".active"),i=n.attr("data-position"),o=parseInt(i)+1,r=a.find('.slide[data-position="'+o+'"]');0==r.length&&(r=a.find('.slide[data-position="1"]')),n.animate({left:"-472px"},400,function(){e(this).removeClass("active")}),r.css("left","472px"),r.animate({left:"0px"},400,function(){e(this).addClass("active")})}function B(e){e.center()}function D(t,a,n){clearTimeout(rt),"packages-dropdown-button"===a?it=t:(ot=t,e("#packages-dropdown").is(":hover")&&(ot=!0,n=!1)),it===!1&&ot===!1&&n===!0?(e("#packages-dropdown-button").removeClass("package-dropdown-active active"),e("#packages-dropdown").removeClass("d-lg-block")):rt=it===!1&&ot===!1?setTimeout(function(){D(!1,"packages-dropdown",!0)},500):setTimeout(function(){e("#packages-dropdown-button").addClass("package-dropdown-active active"),e("#packages-dropdown").addClass("d-lg-block")},250)}function A(t){var t=t;return!!t&&void e.post("/php/ajax/saveUserLanguage.php",{language_id:t},function(e,t,a){return"success"!==e.message?(apprise(e.message),!1):void window.location.reload(!0)},"json")}function O(){var t=e("#notifications").attr("data-new-count");t>0&&e.post("/notifications/handler",{action:"seenAll"});var a=document.querySelector('#notifications li a[href="/edit-book-club-details"]');a&&!ht&&(ht=!0,createCookie("bc_notification_seen",1,1)),e(".newNotify .notification-icon").length&&e(".newNotify .notification-icon").animate({opacity:0});var n=/^\(\d+\) /;document.title.match(n)&&(document.title=document.title.replace(n,"")),e(".newNotify").removeClass("hasNew"),e(".newNotify .notification").removeClass("new")}function E(t){vt[0].setAttribute("data-show",1),gt||(gt=!0,e.get("/notifications",function(a){if(a.html){vt.html(a.html),e("body").hasClass("is-mobile-device")||e("#notifications").mCustomScrollbar({theme:"dark",scrollButtons:{enable:!0}});var n=document.querySelector('#notifications li a[href="/spin-the-wheel"]');n&&n.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),init={method:"post",headers:{"Content-Type":"application/json"},body:{}},fetch("/spin-the-wheel/clicked",init).then(function(e){return e.ok?(window.location.href="/spin-the-wheel",e.json()):Promise.reject(e)}).then(function(e){window.location.href="/spin-the-wheel"})["catch"](function(e){console.warn(e)})})}t&&"function"==typeof t&&t(a)}))}function P(){e.get("/php/ajax/getheaderdetails.php",function(t){"success"!==t.message?apprise(t.message):(e("#header_credit_left").html(t.creditLeft),e("#header_downloads_left").html(t.downloadsLeft))},"json")}function L(){var t=e("#download_selector"),a=e("#download_selector_container");if(t.length>0){var n=t.find("li.selected"),i=n.find("a"),o=i.attr("data-resource-id"),r=i.attr("data-alt-id");e.get("/php/ajax/get_version_buttons_for_resource.php?resource_id="+o+"&alt_id="+r,function(t){"success"!==t.message?apprise(t.message):(e(".download_instruction").remove(),a.remove(),e(".download_price").after(t.html),a.mCustomScrollbar({theme:"dark",scrollButtons:{enable:!0}}))},"json")}}function R(){e("#user_dob").length&&e("#user_dob").datepicker({changeMonth:!0,changeYear:!1,dateFormat:"M-dd",beforeShow:function(e,t){t.dpDiv.addClass("dobDatePicker")},onClose:function(e,t){t.dpDiv.removeClass("dobDatePicker")}})}function M(e,t){if(e.find(".commentsList").length){t&&(e=e.find(".commentsList"));var a=e.height(),n=e.get(0).scrollHeight;e.bind("mousewheel",function(e,t){var i=n-a-40;(this.scrollTop==i&&t<0||0==this.scrollTop&&t>0)&&e.preventDefault()})}}function F(t){var a=e("#front_scrolling_banner"),n=a.find(".active"),i=n.attr("data-position");if(t)var o=a.find('a[data-position="'+t+'"]');else{var r=parseInt(i)+1;o=a.find('a[data-position="'+r+'"]'),0==o.length&&(o=a.find('a[data-position="1"]'))}n.animate({left:"-960px"},400,function(){e(this).removeClass("active"),a.find('.buttonContainer div[data-position="'+i+'"]').removeClass("buttonActive")}),o.css("left","960px"),o.animate({left:"0px"},400,function(){e(this).addClass("active");var t=e(this).attr("data-position");a.find('.buttonContainer div[data-position="'+t+'"]').addClass("buttonActive")})}function U(){e(document).ready(function(){e.support.transition?e.getScript("https://images.twinkl.co.uk/tr/raw/upload/t/js/jquery-02b6ed4108.filterizr.min.js",function(t,a,n){var i=e("#hidden_selected_keystage").val(),o=i,r=0;readCookie("booklistCategory")?(o=readCookie("booklistCategory"),e(".main-vac-tab").each(function(t){o==e(this).attr("data-filter")&&(r=1)}),0==r&&(o=i,createCookie("booklistCategory",o,30))):createCookie("booklistCategory",o,30),e(".booklist-display .filtr-item[data-category*=category]").css("display","block");e(".booklist-display").filterizr({filter:o,layout:"packed"});e(".booklist-display .filtr-item:hidden").css("display","block"),e("#book-list-top .tabs span").click(function(t){e(".main-vac-tab").each(function(t){e(this).removeClass("book-list-selected")}),e(this).addClass("book-list-selected"),t.preventDefault(),e(this).parent().hasClass("selected")||(e("#book-list-top").find(".tabs li.selected").removeClass("selected"),createCookie("booklistCategory",e(this).parent().data("filter"),30))})}):e(".booklist-display").addClass("no-transitions")})}function q(){e(document).ready(function(){e.support.transition?e.getScript("https://images.twinkl.co.uk/tr/raw/upload/t/js/jquery-02b6ed4108.filterizr.min.js",function(t,a,n){var i="all",o=0;readCookie("vacanciesCategory")?(i=readCookie("vacanciesCategory"),e(".main-vac-tab").each(function(t){i==e(this).attr("data-filter")&&(o=1)}),0==o&&(i="all",createCookie("vacanciesCategory",i,30))):createCookie("vacanciesCategory",i,30),e(".vacancies .filtr-item[data-category*=category]").css("display","block");e(".vacancies").filterizr({filter:i,layout:"sameWidth"});e(".vacancies .filtr-item:hidden").css("display","block"),e("#vacancies .tabs li a").click(function(t){t.preventDefault(),e(this).parent().hasClass("selected")||(e("#vacancies").find(".tabs li.selected").removeClass("selected"),e(this).parent().addClass("selected"),createCookie("vacanciesCategory",e(this).parent().data("filter"),30))})}):e("#vacancies").addClass("no-transitions")})}function H(t){var a="";"undefined"!=typeof t&&t.success&&(a=t.html);var n=e(".hidden-categories").val(),i=JSON.parse(n),o="Finish",r=!1;location.href.toLowerCase().indexOf("/careers")>=0&&(o="Save",r=!0);var s=e(".hidden-mailing-categories").val();console.log(s);var l=JSON.parse(s),c="";0!=St.length&&(l=St),i.forEach(function(e){var t="";l.indexOf(e.id)!==-1&&(t='checked="checked"'),c+='<div class="vacancy_type p-b-1"><input type="checkbox" class="vacancy-checkbox" id="vacancy_'+e.id+'" name="vacancy_'+e.id+'" value="'+e.id+'" '+t+'><label for="vacancy_'+e.id+'"> '+e.name+"</label></div>"});var d=e('<div title="Careers Email Preferences" class="container-fluid"><p>'+a+'</p><div class="vacancies-signup-list column-count-sm-2">'+c+"</div></div>");d.dialog({draggable:!1,modal:!0,resizable:!1,width:800,height:600,buttons:[{text:o,"class":"ui-button-primary",click:function(){if(St=[],e(".vacancies-signup-list").find(":checkbox:checked").each(function(){var t=e(this).val();St.indexOf(t)==-1&&St.push(t)}),0==St.length){var a=e('<div title="Warning!">Please select at least one category.</div>');return void a.dialog({draggable:!1,modal:!0,resizable:!1})}if(0==r&&e(".vacancies-extra-text").html(St.length+" selected"),d.dialog("close"),d.remove(),r){var n=e('<div title="Updating Preferences">Please wait...</div>');n.dialog({draggable:!1,modal:!0,resizable:!1,dialogClass:"no-close loadingDialog"}),e.post("/careers",{action:"updateVacanciesCategories",categoryIds:St,parentId:t?t.data:"",email:t?t.email:""},function(t){n.dialog("close");var a=e('<div title="'+t.title+'">'+t.message+"</div>");a.dialog({draggable:!1,modal:!0,resizable:!1})})}}},{text:"Close",click:function(){e(this).dialog("close")}}],dialogClass:"bulk-link-resource-dialog"})}function N(){e(".vb-more-info-text").html(e(".vb-text").html()),e(".vb-more-info-text").hide(),e("#vb-more-info-cta").click(function(t){t.preventDefault(),e(".vb-more-info-text").toggle(),e("#more-less-info").html(e("#vb-more-info-text").is(":visible")?"Less Information":"More Information")})}function W(){"block"==e("#vb-more-info-cta").css("display")?e(".vb-widget").removeClass(e(".vb-widget").attr("data-color")):(e(".vb-widget").removeClass(e(".vb-widget").attr("data-color")),e(".vb-widget").addClass(e(".vb-widget").attr("data-color")))}function z(){if(e.support.transition){var t,a=0;readCookie("originalsCategory")?(t=readCookie("originalsCategory"),e(".main-origin-tab").each(function(n){t==e(this).attr("data-filter")&&(catname=e(this).attr("data-filtername-localised"),a=1)}),0==a&&(t="all",catname=e(this).attr("data-filtername"),createCookie("originalsCategory",t,30))):(t=e(".tabs-new").attr("data-career"),createCookie("originalsCategory",t,30),catname=e(".tabs-new").attr("data-career-value"),e("#cat_name").html("<h2>"+catname+"</h2>")),e(".originals .filtr-item[data-category*=category]").css("display","block");var n=(e(".originals").filterizr({filter:t,layout:"sameWidth"}),e("li.main-origin-tab.selected").data("filter"));3!=n&&e(".competition-banner").hide(),e(".originals .filtr-item:hidden").css("display","block"),e("#originals .tabs-new li a").click(function(t){var a=e(this).attr("data-filtername");e(this).attr("data-filtername-localised");if(t.preventDefault(),!e(this).parent().hasClass("selected")){e("#originals").find(".tabs-new li.selected").removeClass("selected"),e(this).parent().addClass("selected");var n=e(this).parent().data("filter");3!=n?e(".competition-banner").slideUp(500):e(".competition-banner").slideDown(500)}e.post("/php/ajax/filterOriginalResources.php",{action:"filterByCatName",catname:a},function(t){if("success"!==t.message)return void alert(t.message);if(t.result){var n=e(".promo-box"),i=250;n.fadeOut(i);var o=a.toLowerCase(),r="";switch(t.result.labelCatName){case"0 - 3 (EYFS)":r=t.result.ageGroup03+" ("+t.result.localised.eyfs+")  Picture Books";break;case"EYFS":r=t.result.ageGroup35+" ("+t.result.localised.eyfs+") Fiction";break;case"KS1":r=t.result.localised.ks1+" Fiction";break;case"KS2":r=t.result.localised.ks2+" Fiction";break;case"0 - 5 GROWING UP STORIES":r="0 - 5 Growing Up Stories";break;case"3 - 5 (EYFS) NON-FICTION":r=t.result.ageGroup35+" ("+t.result.localised.eyfs+") Non-Fiction"}e("#cat_name").html("<h2>"+r+"</h2>"),o=o.replaceAll(" ",""),window.history.replaceState(null,null,"/resources/twinkl-originals?age="+o),setTimeout(function(){n.removeClass(),n.removeAttr("style"),n.addClass("row promo-box rounded-top "+t.result.bg_class),n.css("background-image","url("+t.result.bg_image+")"),e("#originalBookCoverImage").removeClass(),e("#originalBookBlurb").removeClass(),e("#originalBookCoverImage").addClass("col-4 offset-4 offset-sm-0 col-sm-6 col-md-4 p-x-1 p-y-2 offset-md-2"),e("#originalBookBlurb").addClass("col-12 col-sm-8 col-md-6 p-a-1"),n.find("h2").html(t.result.title),e(".mainOriginalBlurb").html("<p></p>"),n.find("p").html(t.result.blurb),n.find("img").attr("src",t.result.image),n.find("a").attr("href",t.result.book_url),n.fadeIn(i)},i)}},"json")})}else e("#originals").addClass("no-transitions")}function Y(){je.hide().off("click"),e(".header-dashy").hide()}function V(t){var a=e("#phrase").val(),n=e(".showCount").val(),i=[],o=e(".advancedSearchDiv"),r=e("#search_container");o.hasClass("areaActive")?e(".advancedSearchDiv .area input").each(function(){e(this).prop("checked")&&i.push(e(this).val())}):i.push(r.find(".searchHeaderSub2_1 .area").val());var s=JSON.stringify(i),l=[];o.hasClass("typeActive")?o.find(".type input").each(function(){e(this).prop("checked")&&l.push(e(this).val())}):l.push(r.find(".searchHeaderSub2_1 .type").val());var c=JSON.stringify(l),d=[];o.hasClass("areaActive")?o.find(".language input").each(function(){e(this).prop("checked")&&d.push(e(this).val())}):d.push(r.find(".searchHeaderSub2_1 .language").val());var u=JSON.stringify(d),p="pageNum"in t?t.pageNum:1;Pt&&(Pt.abort(),hideLoader()),showLoader();var t={action:"getResults",topCats:s,refine:c,query:a,resultsPerPage:n,pageNum:p,languageIds:u};o.is(":visible")?o.slideUp(function(){G(t)}):G(t)}function G(t){Pt=e.post("/search",t,function(a){var n="",i="",o="",r=[],s="";if(e("#searchInputOutput[data-search-term]").length&&(i=e("#searchInputOutput").attr("data-search-term")),e("#searchInputOutput[data-search-text]").length&&(n=e("#searchInputOutput").attr("data-search-text")),'[""]'!==t.topCats&&e("#searchAreaSelect").length){for(var l=JSON.parse(t.topCats),c=l[0],d=0,u=l.length;d<u;++d){var p=l[d];e('#searchAreaSelect option[value="'+p+'"]').removeClass("hidden"),r.push(e('#searchAreaSelect option[value="'+p+'"]').text())}if(e("#searchAreaSelect").val(c),r.length)if(o=" in",1===r.length)o+=" "+r[0];else for(var h=0,m=r.length;h<m;++h)o+=0==h?" "+r[h]:h+1!==m?", "+r[h]:" and "+r[h]}s=n+' results for &lsquo;<span data-search-input-span="true">'+i+"</span>&rsquo;"+o,e("#searchInputOutput").html(s),e("html, body").animate({scrollTop:0},200),e("#search_container").find(".left").html(a.html),'[""]'==t.topCats&&'[""]'==t.refine?e(".filteringText").addClass("hidden"):e(".filteringText").removeClass("hidden"),Z(),K(),document.fn.events.emit("loadedContent"),ee()},"json")}function Q(t){var a=e(".searchHeaderSub2_1 ."+t).val(),n=e(".advancedSearchDiv");"area"==t?n.find(".area input").each(function(){e(this).prop("checked",!1),e(this).val()==a&&e(this).prop("checked",!0)}):"language"==t?n.find(".language input").each(function(){e(this).prop("checked",!1),e(this).val()==a&&e(this).prop("checked",!0)}):(n.find(".type input").each(function(){e(this).prop("checked",!1)}),n.find(".type .children").each(function(){e(this).data("id")==a&&e(this).prev().trigger("click")}))}function J(t){t.find("option").each(function(){e(this).removeClass("hidden")}),t.find(".showMoreOptions").addClass("hidden").prev().remove(),X(e("#searchAreaSelect"))}function X(t){function a(){var t=e(this).offset(),n=e(this).find("option").length;
n>20&&(n=20),e(this).css("position","absolute"),e(this).css("zIndex",9999),e(this).offset(t),e(this).attr("size",n),e(this).off("focus",a),e(this).focus(),e("#search_container .searchHeaderSub2_1 select.type").css("margin-left","185px")}function n(){e(this).css("position","static"),e(this).attr("size","1"),e(this).off("change",n),e(this).off("blur",n),e(this).focus(),e("#search_container").find(".searchHeaderSub2_1 select.type").css("margin-left","auto")}t.focus(a).blur(n).change(n).focus()}function K(){}function Z(){}function ee(){if("undefined"!=typeof genericTerms){var t=e("#phrase").val(),a=genericTerms.indexOf(t);if(a!==-1){e(".genericTerm").remove();var n=e(".left.grid"),i=e('<div class="genericTerm">We have lots of resources that match your search! Please consider using additional words to help us find the right resources for you...<div id="search_box" data-fancy="0"><form action="/search" name="search_form" id="search_form" method="get"><input type="hidden" name="search_origin" id="search_origin" value="1"><input type="hidden" name="action_type" value="startSearch"><input type="text" id="phrase" name="term" placeholder="Search 500,000+ resources" value="'+t+'" data-autocomplete="0" autocomplete="off" data-fancy="0" maxlength="500"><button title="Click to search" type="submit"><img alt="Search Icon" src="'+imageAssetBase+'/images/header/search_icon.png"></button></form></div></div>');i.hide(),n.prepend(i),i.slideDown()}}}function te(){var t=e("#refine_by_bar").find(".type"),a=[];t.find("input").each(function(){e(this).prop("checked")&&a.push(e(this).val())});var n=JSON.stringify(a);return n}function ae(){var t=[];return e("#refine_by_bar").find(".area input").each(function(){e(this).prop("checked")&&t.push(e(this).val())}),JSON.stringify(t)}function ne(){var t=e("#search_results"),a=e("#youll_love_resource_box_search");t.find("#resources").length?a.show():a.hide()}function ie(){var t=e("#browse_by_bar").find(".type"),a=[];t.find("input").each(function(){e(this).prop("checked")&&a.push(e(this).val())});var n=JSON.stringify(a);return n}function oe(t,a,n){function i(t,a,n,i,o,r,s,l,c){e.post("/user/create/offer",t,function(e){e=e||{};var t=e.message||"An error occurred whilst creating your account, please try again.",d=e.error||{},u=e.captcha||!1,p=e.csrf||"";return"success"!==t?(r.val(p),u&&(qt=u),twinklCaptcha.clearV2("captchaV2Div"),d.password&&a.formError(d.password.msg,d.password.hint,"change"),d.email&&n.formError(d.email.msg+d.email.hint,"","change"),d.occupation&&i.formError(d.occupation.msg,d.occupation.hint,"change"),d.offerCode&&o.formError(d.offerCode.msg,d.offerCode.hint,"change"),s.remove(),void l.show()):void c.submit()},"json")}var o=e("#email"),r=e("#password"),s=e("#occupation"),l=e("#csrf"),c=e("#sign_up_nus"),d=e("#subscribe_offer_code"),u={email:o.val(),password:r.val(),occupationId:+s.val(),nusNumber:c.val(),csrf:l.val(),offerCode:d.val()};twinklCaptcha.execute(qt,"sign_up_offer","captchaV2Div",function(e,c){u.captcha_response=e,u.captcha_version=c,i(u,r,o,s,d,l,t,a,n)},function(){e("#emailnew").addClass("has-error")})}function re(t,a,n,i,o,r,s,l){var c={username:i,password:o,csrf:l,nusNumber:r,ajax:1},d="captchaV2DivSignIn";twinklCaptcha.execute(qt,"sign_in",d,function(i,o){c.captcha_response=i,c.captcha_version=o,e.post("/user/sign-in",c,function(i){if(i.redirect)return void(window.location.href=i.redirect);if(i.csrf&&a.find("#sign_in_csrf").val(i.csrf),twinklCaptcha.clearV2(d),i.captcha&&(qt=i.captcha),i.tfa_html)return document.open(),document.write(i.tfa_html),void document.close();if("fail"==i.message){if(n.remove(),t.show(),"inline"==s){var o=e("#sign_in_username"),r=e("#sign_in_password");i.error.username&&o.formError(i.error.username.msg,i.error.username.hint,"change"),i.error.password&&r.formError(i.error.password.msg,i.error.password.hint,"change"),i.error.blocked&&a.formError(i.error.blocked.msg),i.error.authentication&&a.formError(i.error.authentication.msg)}else{la="Uh oh!",i.fail_title&&(la=i.fail_title);var l="<h1>"+la+"</h1><p>"+i.html+"</p>";apprise(l)}i.error_tracking&&trackErrorMessages(i.error_tracking)}else a.submit()},"json").fail(function(e,t,n){console.log(n),a.submit()})})}function se(){if("undefined"!=typeof actionList&&"undefined"!=typeof grecaptcha)for(var e=0;e<actionList.length;e++){var t=actionList[e];grecaptcha.execute("6Lexh4cUAAAAADzRWVExH7HUa7xq1dQbAOZSg36M",{action:t}).then(function(e){Ft[t]=e})}}function le(t,a,n){var i=e("#sign_in_username"),o=e("#sign_in_password"),r=e("#sign_in_csrf"),s=!0,l=readCookie("skip_inspirational_loader"),c=i.parents("form"),d=parseInt(c.data("login-step"));if(e(".form-error").add(".form-error-hint").add(".form-error-block").remove(),c.find(".has-error").removeClass("has-error"),e(":focus").blur(),i.val()||(s=!1,i.formError(signInConfig.emailUsernameMissing,"","not_blank"),trackValidationError("emailUsernameMissing")),o.val()||1===d||(s=!1,o.formError(signInConfig.notFilledPassword,"","not_blank"),trackValidationError("notFilledPassword")),!s)return!1;a=e(a?a:"<img class='loader' src='"+imageAssetBase+"/images/loading.gif' height='36' />"),t.hide(),t.after(a);var u={username:i.val(),password:o.val(),csrf:r.val(),gdpr_accepted:n,ajax:1},p="captchaV2Div";return twinklCaptcha.execute(qt,"sign_in",p,function(n,s){u.captcha_response=n,u.captcha_version=s,e.post("/user/sign-in",u,function(n){if(n.redirect)return void(window.location.href=n.redirect);if(n.csrf&&r.val(n.csrf),twinklCaptcha.clearV2(p),n.captcha&&(qt=n.captcha),n.tfa_html)return document.open(),document.write(n.tfa_html),void document.close();if("fail"===n.message)a.remove(),t.show(),n.error&&(n.error.username&&i.formError(n.error.username.msg,n.error.username.hint,"change"),n.error.password&&o.formError(n.error.password.msg,n.error.password.hint,"change"),n.error.blocked&&c.formError(n.error.blocked.msg),n.error.authentication&&c.formError(n.error.authentication.msg),n.error_tracking&&trackErrorMessages(n.error_tracking));else{if(2==n.step)return e("#new_sign_in_form").attr("data-login-step",2),e("#new_sign_in_form #username").slideUp(),setTimeout(function(){e("#new_sign_in_form #password").slideDown()},700),t.show(),void a.hide();if("gdpr_check"==n.message){t.show(),a.hide();var s=[{text:n.accept,click:function(){e(this).dialog("close"),le(t,null,1)}}],d={width:"500px",dialogClass:"gdpr_accept"};showDialogMessage(n.title,n.content,null,s,d);return void e(".gdpr_accept").find(".ui-dialog-buttonset button").addClass("button").addClass("green")}if(null!=n.url&&(n.url=String(n.url).trim()).length>0)return void(l?window.location.href=n.url:(a.css({visibility:"hidden"}),e(".signUpInHolder").css("z-index","1000"),showInspirationalLoader(n.url)));window.location.reload()}},"json").fail(function(e,t,a){console.log(a),c.submit()})}),!1}function ce(){window.innerWidth<zt?void 0!==Nt&&Nt.cleanup():Nt=Wt.stickybits({stickyBitStickyOffset:105})}function de(){if(e("#article-nav").is(":visible")){var t=Yt.data("chapters"),a=Yt.data("current-chapter"),n=e("#guide-content"),i=e("#sticky-header").height()+e("#article-nav").height(),o=window.scrollY-i;o<0&&(o=0);var r=n.height(),s=window.innerWidth,l=s/t,c=l*(a-1);if(o>=r)c+=l,Vt=100;else{Vt=o/r*100;var d=o/r*l;c+=d}c>s&&(c=s),Yt.css("width",Math.round(c))}}function ue(t){0==t.val()?e("#newsletter-frequency").removeClass("hide"):e("#newsletter-frequency").addClass("hide")}function pe(){var t=e("#overlay");t.hide(),e(".generic_pop").hide(),t.show(),e(".filemanager_popup").appendTo("body").show(),B(e(".filemanager_popup"))}function he(){e(".filemanager_popup").find(".close").click(function(){e("#overlay").trigger(Ee),e(".filemanager_popup").hide(),e("#overlay").hide()}),e(".filemanager_popup").find(".dismiss").click(function(){e("#overlay").trigger(Ee),e(".filemanager_popup").hide(),e("#overlay").hide()}),e(".filemanager_popup").on("click",".filemanager-download:not(.disabled)",function(){var t=e(this).text();e(this).replaceWith('<span class="downloaded">'+t+"</span>")}),e(".filemanager_popup").on("click",".pager_bar a",function(t){t.preventDefault(),me(e(this))}),e(".filemanager_popup").on("change",".filemanager_type_filter",function(e){e.preventDefault(),me()}),e(".filemanager_popup").find(".filemanager-content").on("scroll",function(t){var a=e(".filemanager-content");a.hasClass("has-scrolled")?0==a.scrollTop()&&a.removeClass("has-scrolled"):a.addClass("has-scrolled")})}function me(t){var a="";a="undefined"!=typeof t?t.attr("href").replace("/","")||1:"1";var n=e(".filemanager_popup"),i=n.attr("data-resource-id"),o=n.attr("data-category-id"),r=n.attr("data-saved-resources-folder-id"),s=e('<div class="overlay"></div>'),l=e('<img src="'+imageAssetBase+'/images/loading.gif" class="loader">');"undefined"!=typeof r&&r!==!1&&(r||(r="-1"));var c=n.attr("data-created-resources-folder-id");"undefined"!=typeof c&&c!==!1&&(c||(c="-1"),r="0");var d="",u=[];e("#bookmarkList").find(".highlight").each(function(){d=e(this).data("item-id"),u.push(d)});var p="/php/ajax/getFilemanagerList.php",h=e(".filemanager_type_filter").val(),m={page:a,categoryId:o,resourceId:i,savedResourcesFolderId:r,createdResourcesFolderId:c,filterType:h,selectedResources:u};n.append(s),n.append(l),e.post(p,m,function(t){if(s.remove(),l.remove(),"success"!==t.message)alert(t.message);else{n.find(".filemanager-content").remove(),n.find(".pager_bar").remove(),n.append(t.html);var a=e(".filemanager_popup").find(".filemanager-content");a.on("scroll",function(e){!a.hasClass("has-scrolled")||a.scrollTop()>0?a.addClass("has-scrolled"):0==a.scrollTop()&&a.removeClass("has-scrolled")})}},"json")}function fe(t,a){var n=[e("#comment_box"),e(".otherButtonHolder"),e("#postReview")],i=[],o=void 0!==e("#ratingSubDiv .starRating").attr("data-feature-flag");o&&!a||a>3?o&&(i.push(e("#rating_confirmation_box")),a?a>3&&i.push(e(".reportResourceStarText")):n.push(e(".reportResourceStarText"))):(i=[e("#comment_box"),e(".otherButtonHolder"),e("#postReview")],o&&(e("#rating_confirmation_box").css("display","flex"),e("#comments_container").find(".alert").slideUp(200),e("#submitComment").parent().hide(),e("#alert_checkbox").hide(),e("#subscribe_checkbox").hide(),e("#emojiIconKeyboard").hide())),e([n,i]).toggleBetween();var r=t.closest("#comments_container").data("type");if("resource"===r){var s=e("#postReview");a>3&&s.html(s.data("rating-text"));var l=20,c=e("#comment");enableDisableResourceReviewSubmitOnStart(l,a,s,c,!1),enableResourceReviewSubmitBasedOnChar(l,a,s,c,!1)}}function ve(t){function a(t,a){for(var n=5,i=imageAssetBase+"/images/",o=1;o<=n;o++){var r=e(".rating #star"+a+o),s=e("#overlay-rating #star"+o);o<=t?(r.removeClass("starOff").addClass("starOn"),s.removeClass("starOff").addClass("starOn"),r.css("background","url("+i+l+") 0 2px no-repeat")):(r.removeClass("starOn").addClass("starOff"),s.removeClass("starOn").addClass("starOff"),r.css("background","url("+i+c+") 0 2px no-repeat")),a&&(r.css("background-size","32px"),s.css("background-size","32px"))}}var n=t.attr("id"),i=n.replace(/star.*?(\d)$/,"$1"),o="",r=e("#postReview").data("track");r&&(r.reviewRating=i,e("#postReview").attr("data-track",JSON.stringify(r))),/star?\_(\d+)?\_.*$/.test(n)&&(o=n.replace(/star?\_(\d+)?\_.*$/,"_$1_"));var s=t.parent().parent().hasClass("before-reviews"),l="star_on.png",c="star_off.png";s&&(l=o?"star_off_blue.png":"star_on_large.png",c="star_off_large.png",fe(t,i)),o?e("#ratingSubDiv"+o).attr("data-rating-number",i):(e(".rating").attr("data-rating-number",i),e("#overlay-rating").attr("data-rating-number",i)),e("#postReview").removeClass("darkGrey").addClass("green"),a(i,o)}function ge(t){var a=e(t.delegateTarget),n=a.parent();if(we(n)){var i=n.children(".starOn, .starOff"),o=i.index(a),r=n.data("mode");(null==r||isNaN(parseInt(r)))&&(r=1);var s=parseInt(n.data("rating-number"));isNaN(s)&&(s=0);var l=o+1;switch(r){case 2:if(l<=s)return;break;default:if(s>0)return}i.filter(":lt("+l+")").filter(".starOff").toggleClass("toggled",!0),i.filter(":gt("+(l-1)+")").filter(".starOn").toggleClass("toggled",!0)}}function _e(t){var a=e(t.delegateTarget);if(we(a)){var n=a.children(".starOn, .starOff"),i=a.data("mode");(null==i||isNaN(parseInt(i)))&&(i=1);var o=parseInt(a.data("rating-number"));switch(isNaN(o)&&(o=0),i){case 2:break;default:if(o>0)return}n.filter(".starOn, .starOff").toggleClass("toggled",!1)}}function ye(t){function a(e){r.filter(":lt("+e+")").toggleClass("starOff",!1).toggleClass("starOn",!0).toggleClass("toggled",!1),r.filter(":gt("+(e-1)+")").toggleClass("starOn",!1).toggleClass("starOff",!0).toggleClass("toggled",!1),i.data("rating-number",e)}var n=e(t.delegateTarget),i=n.parent();if(we(i)){var o=i.parents('.comment[itemprop="review"][data-comment-id]'),r=i.children(".starOn, .starOff"),s=r.index(n),l=i.data("mode");(null==l||isNaN(parseInt(l)))&&(l=1);var c=parseInt(i.data("rating-number"));isNaN(c)&&(c=0);var d=s+1;switch(l){case 2:if(d<=c)return;break;default:if(c>0)return}a(d),newCommentRating=d,i.trigger("disable_edit_comment_rating");var u=o.data("commentId");return isNaN(u=parseInt(u))?void apprise("Unable to find comment to save rating."):void e.ajax({type:"PUT",url:"/comments/"+u+"/rating",data:{value:d},dataType:"json",success:function(){apprise("New rating saved successfully!")},error:function(e,t,a){var n=JSON.parse(e.responseText);return null!=n&&null!=n.message?void apprise(n.message):void apprise("Unable to save rating.")}})}}function we(t,a){try{if(null==t){if(null==a)return!1;t=e(a).find(".starRating")}return 0!==(t=e(t)).length&&1===parseInt(t.attr("data-editable"))}catch(n){return!1}}function be(){var t=e(this),a=t.find("img");a.attr("src",a.data("src"))}function ke(t){e("#create-teachmeet").find(".error").each(function(e,a){var n=a.id;t&&t.includes(n)||("teachmeet_event_description"==n&&(a=a.parentElement),a.classList.toggle("error",!1))}),t&&Array.isArray(t)&&t.forEach(function(t){var a=e("#"+t);"teachmeet_event_description"==t&&(a=e("[name='"+t+"']").parent()),a.toggleClass("error",!0)})}function xe(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iPad|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e}function Ce(){function t(t){if(t.preventDefault(),null===a)return void e(".loggedInUser-account").click();a.remove(),a=null,n.removeClass("show");var i=e("#notifications")[0];i.setAttribute("data-show",0),i.setAttribute("data-show-mobile",0)}e(".loggedInUser-account").unbind("mouseenter");var a=null,n=e("#user_menu_holder"),i=n.find(".mobile-menu-header");i.length||(i=e('<div class="mobile-menu-header"><div class="close-btn">×</div><div class="loggedInMenu"></div></div>'),i.insertBefore(".notifications")),i.find(".close-btn").off().on("click",t);var o=!1;e(".loggedInUser-account").off("click").on("click",function(i){i.preventDefault(),n.addClass("show"),null===a&&(a=e('<div class="menu-overlay"></div>'),e(this).parent().append(a),a.on("click",t)),e(".notification-label").on("click",function(e){e.preventDefault()});var r=!1;e(".notifications a.notification-label").off().on("click",function(t){t.preventDefault();var a=n.find(".notifications"),i=a.find("#notifications");if(o)return i[0].setAttribute("data-show-mobile",1),void i[0].setAttribute("data-show",1);var s=e('<img class="loading" src="/images/loading.gif" />');r||(a.append(s),r=!0),E(function(){i.prepend(e('<div class="p-3 back-to-menu"><img src="https://images.twinkl.co.uk/tr/raw/upload/u/ux/arrow-left.png" />Main Menu</div>')),i[0].setAttribute("data-show-mobile",1),s.remove(),o=!0,e(".back-to-menu").on("click",function(){i[0].setAttribute("data-show-mobile",0),i[0].setAttribute("data-show",0)})})})});e(".button.gold").on("click",function(t){oa++,t.preventDefault(),e(this).parent().find("#premium_menu").show(),oa>1&&($link=e(this).attr("href"),window.location.href=$link)})}function $e(){e("#schoolBoxForm, #schoolShareForm").exists(function(){e(this).on("submit",function(t){t.preventDefault();var a=e(this),n=a.attr("action"),i=e('<img class="loading" src="'+imageAssetBase+'/images/loading.gif">'),o=a.find(".button");o.hide(),o.after(i),e("#schoolBoxForm input").each(function(){e(this).removeClass("input-error")});var r="school-contact-request",s=document.querySelector("#schoolBoxForm #ca_variant_type");s&&(r="curriculum-architect-demo-request"),twinklCaptcha.execute("v3","hubspot_lead_form","captchaV2Div",function(t,s){processing=!0,a.find('[name="captcha_response"]').val(t),a.find('[name="captcha_version"]').val(s),e.ajax({type:"POST",url:n,data:e(a).serialize(),success:function(t){if(o.show(),i.remove(),"success"==t)a.html("Thanks! A member of our Schools team will be in touch soon."),e(".sideImg").hide(),dataLayer.push({event:"twinkl-contact-form",type:r});else if("undefined"!=typeof t.message){a.html(t.message),a.css({"text-align":"center","padding-top":"25px","padding-bottom":"25px"}),dataLayer.push({event:"twinkl-contact-form",type:r}),e(".sideImg").hide();var n=document.querySelector("#school-form-pop-up .form-header-text");n&&n.remove()}else"undefined"!=typeof t.error?(a.html("There seems to have been a problem. Please email twinklcares@twinkl.co.uk"),e(".sideImg").hide()):e("#schoolBoxForm #"+t).addClass("input-error")},error:function(t){twinklCaptcha.clearV2("captchaV2Div"),a.html("Whoops! We were unable to send your school contact request,please try again. If the issue persists, please contact twinklcares@twinkl.co.uk."),e(".sideImg").hide()}})})})})}if(a.prototype.init=function(){if(this.vbContactBtns.length){var e=this;Array.prototype.forEach.call(this.vbContactBtns,function(t){t.addEventListener("click",function(){var a=imageAssetBase+"/images/loading.gif",n=document.createElement("img");n.style.width="20px",n.style.marginLeft="10px",n.src=a,t.insertAdjacentElement("beforeEnd",n),e.handleSchoolContactForm(this,n)})})}},a.prototype.handleSchoolContactForm=function(t,a){var n=document.getElementById("school-form-pop-up");n&&n.remove();var i=t.dataset.variantType,o=new FormData;"undefined"!=typeof i&&o.set("caVariantType",i),fetch("/school-home/contact-school",{method:"POST",body:o}).then(function(e){return e.json()}).then(function(t){a&&a.remove();var n=t.content;if(n){var i=document.querySelector("#overlay");i.style.display="block";var o=document.createElement("div");o.innerHTML=n;var r=o.firstElementChild;document.body.appendChild(r),e("#school-form-pop-up .school-form").mCustomScrollbar({theme:"dark",scrollButtons:{enable:!0}});var s=document.getElementById("school-form-pop-up"),l=s.querySelector(".dismiss");l&&l.addEventListener("click",function(e){e.preventDefault(),s.remove(),i.style.display="none"}),$e()}})},new a,document.body.classList.contains("is-downloadable-resource")){var Se=document.getElementById("header"),Te=document.getElementById("template-high-downloads-banner");Te&&Se.appendChild(Te.content.cloneNode(!0))}document.querySelector("#header #menu-wrapper")&&setHorizontalScrollOnMegamenu(),e("body").hasClass("is-desktop-device")&&(e(".category-sub .stars, ul#resources .stars, ul#resources .t-reviews").mouseenter(function(){var t=e(this).parent().find(".summary");t.length&&o(t)}),e("#resource #average_rating").mouseenter(function(){var t=e(this).parent().find(".summary");t.length&&n(t)}),e("#resources.searchMain").on("mouseenter",".reviewLink",function(){var t=e(this).parent().find(".summary");t.length&&o(t)}));var Ie;if((Ie=document.querySelector(".signInHelpLink"))&&Ie.addEventListener("click",function(){var e=document.getElementById("sign_in_username"),t=e?e.value:"";t&&createCookie("forgetEmail",t,0,180)}),e(".showMoreDesLink").click(function(){var t=e(".resourceDescription");if(t.length){var a=-100;e("body").hasClass("is-mobile-device")&&(a=60),e("html, body").animate({scrollTop:t.position().top+a},500)}}),document.querySelector("#resource")&&document.querySelector("body").addEventListener("click",function(e){var t=e.target.closest("#download_link");if(t){var a=t.href,n=new URL(a);if(n.pathname.startsWith("/school/upgrade-alert/")){e.preventDefault();var i={headers:{"X-Requested-With":"XMLHttpRequest"}};fetch(a,i).then(function(e){return e.json()}).then(function(e){showDialogMessage(e.title,e.content)})}}}),e("body").hasClass("is-desktop-device")){var Be=!1;e("#header .menuTab li:not(.mega-menu-button), .ultimateCTAContainer").hover(function(){var t=e(this).closest("li").children("ul");if(t.length>0&&(e("#header-overlay").addClass("overlay-active"),t.css("display","unset")),!Be&&this.querySelector("a.free-trial")){Be=!0;var a={method:"post",headers:{"Content-Type":"application/json"},body:{}};fetch("/free-trial-log/hover",a).then(function(e){return e.ok?e.json():Promise.reject(e)})["catch"](function(e){console.warn(e)})}},function(){e("#header-overlay").removeClass("overlay-active")})}if(e(".paymentPanel").on("click",".newRadioMonthly , .newRadioAnnualy",function(){var t=e(this).find(".containerNR input[type=radio]"),a=t.data("monthly");t.prop("checked","checked"),1==a?(e("#monthly-payment-btn").show(),e("#payment-form").hide()):(e("#monthly-payment-btn").hide(),e("#payment-form").show()),e(".radiosAM").attr("id",""),e(this).attr("id","activeP")}),e(".bundle-grid-mobile").on("click","#bundle1 , #bundle2, #bundle3, #bundle4",function(){var t=e(this).find("input[type=radio]"),a=e(this).data("bundle-id");t.prop("checked","checked"),e(".bundle-grid-mobile").attr("id","r"+a)}),e(".free-sample-taster").length){var De=e(".free-sample-taster").clone();e(".free-sample-taster").remove(),e("#header").after(De),e(".free-sample-taster").show(),e(".free-sample-taster").click(function(){e(".tasterL").toggle()}),e(".free-sample-taster .tasterCopy").on("click","#close",function(){e(".free-sample-taster").hide()})}if(e("#categoryList").length&&e("body").hasClass("is-mobile-device")&&(e("#categoryList").height()>116&&(e(".showMoreCategory").show(),e("#categoryList").attr("style","height: 77px; overflow: hidden;")),e(".showMoreCategoryLink").click(function(){e(this).parent().hide(),e("#categoryList").attr("style","height: auto; overflow: auto;")})),e("#phonics").length&&(e(".primary_nav_wrap").find(".menu-list").mCustomScrollbar({theme:"dark",scrollButtons:{enable:!0}}),e("#phonics").on("click",".primary_nav_wrap a.menutitle",function(){e(this).next("ul").is(":visible")?e(this).next("ul").hide():e(this).next("ul").show()}),e("#phonics-extra-level-container").on("click","#level-extra-menu input[type=checkbox]",function(t){var a=e(this).data("level");s(a,1)}),e(document).on("click",function(t){var a=e(".menu");a===t.target||a.has(t.target).length||e(".primary_nav_wrap").find("a.menutitle").next("ul").hide()}),e("#phonics-level-container").on("click","#weeks-dropdown .menu-list li ",function(t){console.log(e(this).text()),e("#weeks-dropdown").find(".menutitle span").text(e(this).text()),e(this).closest("ul").hide();var a=e(this).data("value");r("loadResourcesByWeek",a,1,"level-weeks-content")}),e("#phonics-level-container").on("click","#levels-dropdown .menu-list li",function(t){e("#levels-dropdown").find(".menutitle span").text(e(this).text()),e(this).closest("ul").hide();var a=e(this).data("value"),n=e(this).data("url");e.support.history&&history.pushState("","",n),document.title=e(this).data("metatitle"),r("loadResourcesByLevel",a,1,"level-weeks-content")}),e("#phonics-extra-level-container").on("click","#extra-levels-dropdown .menu-list li",function(t){e("#extra-levels-dropdown").find(".menutitle span").text(e(this).text()),e(this).closest("ul").hide();var a=e(this).data("subcategory");r("loadAddResourcesByLevel",a,1,"level-extra-content")}),e("#phonics-extra-level-container").on("click","#extra-res-types-dropdown .menu-list li",function(t){e("#extra-res-types-dropdown").find(".menutitle span").text(e(this).text()),e(this).closest("ul").hide();var a=e(this).data("value");r("loadResourcesByType",a,1,"level-extra-content")}),e("#phonics-level-container, #phonics-extra-level-container").on("click",".phonics-pagination a",function(t){t.preventDefault();var a=e(this).data("category"),n=e(this).data("page"),i=e(this).data("tab");2==i?s(a,n):r("showMoreResources",a,n,"level-weeks-content")}),e("#phonics-level-container, #phonics-extra-level-container").on("click","a.tab-link",function(t){t.preventDefault();var a=e(this).data("category"),n=e(this).data("tab");if(e(this).find("input[type=radio]").removeAttr("checked"),e(this).find("input[type=radio]").prop("checked","checked"),2===n)a=e(this).data("subcategory"),r("loadAddResourcesByLevel",a,1,"level-extra-content");else{var i=e(this).attr("href");e.support.history&&history.pushState("","",i),document.title=e(this).data("metatitle"),r("loadResourcesByLevel",a,1,"level-weeks-content")}}),e("#phonics-extra-level-container").on("click","#btn-select-all",function(){e(this).hide(),e("#btn-clear-all").show();var t=e("#level-extra-menu input[type=checkbox]"),a=t.data("level");t.each(function(){this.checked=!0}),s(a,1)}),e("#phonics-extra-level-container").on("click","#btn-clear-all",function(){e(this).hide(),e("#btn-select-all").show();var t=e("#level-extra-menu input[type=checkbox]"),a=t.data("level");t.each(function(){this.checked=!1}),s(a,1)})),(meta=document.querySelector('meta[name="twinkl-ref"]'))&&meta.content.startsWith("t-ar-")){var Ae=document.createElement("a"),Oe=e("#actual_downloads").find("#download_link");if(Oe.hide(),Ae.relList.supports("ar"))e("#download_selector_wrapper").hide();else{if("/premium"===Oe.attr("href")||"/sign-in"===Oe.attr("href"))return Oe.show(),!1;Oe.text(Oe.data("ar-button-text")),Oe.attr("data-button-clicked-text",""),resourceUrl=e(location).attr("href").split("/").pop(),Oe.attr("href","/ar-3d/resource/"+resourceUrl),Oe.show(),e(".g-drive-container-large").hide(),e("#download_selector_wrapper").hide()}Oe.show()}document.fn.events.on("last",function(){function t(e,t){var a=Math.floor(10*e)/10,o=Math.round(a);return t&&(n.val(o),i.val(o)),o}if(e("#ar-resource-page").length){var a=document.querySelector("#ar-model-viewer"),n=e("#animation-time-range"),i=e("#animation-time-display");e("#ar-resource-page").on("click",".js-fullscreen",function(t){return t.preventDefault(),e.support.fullscreen?void e(".model-div").fullScreen({background:"#FFFFFF",overflow:"none",callback:function(){return e(".model-div.fullScreen").length?(e("#ar-model-viewer").css({height:"90%",width:"100%"}),void e(".fullScreen").append("<a href='#' class='fixed-top-right js-fullscreen tmp-fullscreen'>Exit Fullscreen</a>")):(e("#ar-model-viewer").css({height:"500px",width:"1000px"}),e(".tmp-fullscreen").remove(),void e("#ar-resource-page").find(".js-fullscreen").text("View Fullscreen"))}},{use_tmp_div:!1}):void alert("Whoops! Your browser is unable to support fullscreen functionality.")}),e("#ar-resource-page").on("click","#animation-autoplay",function(){var n=e(this);"off"===n.attr("data-status")?(a.setAttribute("autoplay",!0),a.play(),n.attr("data-status","on"),n.html(n.data("pause-text")+'<i class="fa fa-pause pl-2" aria-hidden="true"></i>')):(a.setAttribute("autoplay",!1),a.pause(),t(a.currentTime,!0),n.attr("data-status","off"),n.html(n.data("play-text")+'<i class="fa fa-play pl-2" aria-hidden="true"></i>'))}),e("#ar-model-viewer").on("load",function(){var i=a.availableAnimations;if(i.length>0)e("#model-viewer-controls").removeClass("d-none"),a.setAttribute("autoplay",!0),a.play(),setTimeout(function(){0===a.duration&&(a.setAttribute("autoplay",!0),a.play());var e=t(a.duration,!1);n.attr("max",e),t(a.currentTime,!0),setInterval(function(){t(a.currentTime,!0)},1e3)},1e3);else if(!e(".is-pupil").length){var o=e(".model-div").data("resource-id");e.ajax({type:"POST",url:window.location,data:{resourceId:o},success:function(){console.log("success")}})}}),n.on("input",function(){var e=t(n.val(),!1);a.currentTime=e,i.val(e)})}}),e("body").on("click",".loadGDrive",function(){e("body .g-drive-container-large").hide(),e("body .g-drive-container-small").show(),e("body .g-drive-container-small").attr("style","display:flex");var t=document.getElementsByTagName("head")[0],a=document.createElement("script");a.type="text/javascript",a.src="https://apis.google.com/js/platform.js",t.appendChild(a),e("body #___savetodrive_0").removeAttr("style")}),e("body").on("click",".editComment",function(){var t=e(this).data("comment-id");l(t)}),e("#originals .trackOriginalsBanner").click(function(){var t=e(this).attr("data-value");e.post("/php/ajax/track_originals_click.php",{optionId:t},function(e){console.log(e),"success"!=e.message&&alert(e.message)},"json")}),e.fn.replaceTagName=function(t){for(var a=[],n=this.length;n--;){for(var i=document.createElement(t),o=this[n],r=o.attributes,s=r.length-1;s>=0;s--){var l=r[s];i.setAttribute(l.name,l.value)}i.innerHTML=o.innerHTML,e(o).after(i).remove(),a[n]=i}return e(a)},e.support.contenteditable=function(){var e=document.body||document.documentElement,t="contentEditable"in e;return t},e.fn.reverse=function(){return this.pushStack(this.get().reverse(),arguments)},e.support.history=function(){return!(!window.history||!window.history.pushState)},e.fn.flash=function(t,a){var n=e(this).css("background-color"),t=t,i=!1;return null==t&&(t="#FFFF93",i=!0),e(this).animate({"background-color":t},150,function(){e(this).animate({"background-color":n},700,a)}),e(this)},e.fn.flashText=function(t,a){var n=e(this).css("color"),t=t,i=!1;return null==t&&(t="#FFFF93",i=!0),e(this).animate({color:t},150,function(){e(this).animate({color:n},700,a)}),e(this)},e.fn.toggleBetween=function(){var t=this[0],a=this[1];return a.forEach(function(e){e.is(":visible")&&e.hide()}),t.forEach(function(e){e.is(":hidden")&&e.show()}),e(this)},(e("body.is-mobile-device").length||e("body.is-tablet-device").length)&&(e("#footer-curriculum-links ul").append(e("#footer-curriculum-links-follow ul").html()),e("#footer-curriculum-links-follow").remove(),e("#footer_inner").find(".heading").each(function(){e(this).next().css("display","none"),e(this).click(function(t){t.preventDefault(),e(this).next().toggle()})})),e.support.transition=function(){var e=document.body||document.documentElement,t=e.style,a=void 0!==t.transition||void 0!==t.WebkitTransition||void 0!==t.MozTransition||void 0!==t.MsTransition||void 0!==t.OTransition;
return a},e.support.video=function(){var e="undefined"!=typeof document.createElement("video").canPlayType;return e},e.fn.center=function(){return this.css("position","absolute"),this.css("top",Math.max(0,(e(window).height()-e(this).outerHeight())/2+e(window).scrollTop())+"px"),this.css("left",Math.max(0,(e(window).width()-e(this).outerWidth())/2+e(window).scrollLeft())+"px"),this},e.fn.outerHTML=function(){return jQuery("<div />").append(this.eq(0).clone()).html()},e.fn.exists=function(e){var t=[].slice.call(arguments,1);return this.length&&"function"==typeof e&&e.call(this,t),this},e.fn.scrollBottom=function(){return e(document).height()-this.scrollTop()-this.height()},e.fn.returnBgClass=function(){var t=e(this).attr("class").split(" "),a="";return e.each(t,function(e,t){t.match(/^bg-.*/)&&(a=t)}),a},e.fn.stripBgClasses=function(){var t=e(this).attr("class").split(" "),a="";return e.each(t,function(e,t){t.match(/^bg-.*/)||(a+=t+" ")}),e(this).attr("class",a.trim()),e(this)},e.fn.overflown=function(){var e=this[0];return e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth};var Ee="twinkl_overlay_close";document.twinkl=document.twinkl||{},document.twinkl.sendEvent=function(e,t,a,n,i){},document.twinkl.sendGA4Event=function(e){dataLayer.push({objData:null}),dataLayer.push({event:"sendEvent",objData:e})};var Pe=e("body"),je=e("#overlay");Pe.removeClass("no-js"),e(document).keydown(function(e){"17"!=e.which||Le||(Le=!0)}),e(document).keyup(function(){Le=!1});var Le=!1;if(e(".alert-fadeable").exists(function(){e(this).delay(4e3).fadeOut()}),e(".dismissable").exists(function(){var t=e(this),a=e("#overlayNotDismissible");t.prepend('<div class="dismiss">&times;</div>'),t.on("click",".dismiss, .no-thanks, .close",function(t){t.preventDefault(),e(t.delegateTarget).fadeOut(function(){e(t.delegateTarget).remove()}),je.fadeOut(),a.length&&a.fadeOut()})}),e("[data-form-handler]").exists(function(){e(this).formHandler()}),e(".popup-bottom-right, .popup-bottom-left, .popup-bottom-center").exists(function(){var t=e(this);t.removeClass("hidden").animate({opacity:"1"},2500)}),e(".popup-center").exists(function(){var t=e(this);t.removeClass("hidden").center().animate({opacity:"1"},2500),je.show()}),e(".popup-top").exists(function(){e(".popup-top").each(function(){e(this).center().css({top:0}),je.show(),e(this).hasClass("parents-signup")?e(this).hasClass("hidden")||e(this).addClass("hidden"):e(this).removeClass("hidden").animate({opacity:"1"},2500),document.body.scrollTop=document.documentElement.scrollTop=0})}),e(document).on("click","#submitPostcode",function(t){t.preventDefault();var a=e('input[id="address_postcode"]'),n=a.val(),i=document.querySelector(".address-picker #saveAddrBtn");return i&&i.classList.add("hidden"),e("#results").html('<div class="inline-loader"><img src="'+imageAssetBase+'/images/loading.gif" alt="Please wait..." class="loader" /> <span>Searching...</span></div>'),e.post("/php/ajax/get_address_list.php",{postcode:n,actionTaken:"getPostcode"},function(t){if("success"!==t.message){var a=window.location.href;a.includes("premium-merchandise-offer")?e("#results").html("<span>No address can be found for your postcode. Please contact TwinklCares via the link above.</span>"):e("#results").html("No address can be found for your postcode. Please contact TwinklCares via the link above.")}else e("#results").html(t.html)},"json"),!1}),e(document).on("change","#addressFinder",function(){var t=e("#addressFinder").val();return e.get("/postcode-search-address?address="+encodeURIComponent(t),function(t){e("#results").html(t.html);var a=document.querySelector(".address-picker #saveAddrBtn");a&&a.classList.remove("hidden"),e(document).trigger("addressFinder:changed",[t])}),!1}),e(document).on("change","#enter-postcode #country_id",function(t){t.preventDefault();var a=this.value;e.post("/php/ajax/get_county_list.php",{countryId:a},function(e){var t=document.querySelector("#new-address-container #county_id");t&&(t.innerHTML='<option value="">Please Select...</option>'+e)})}),e("#manualAddressFormBtn").click(function(){e.get("/manual-address",function(t){e("#results").html(t.html)})}),e("#submitPostcodeCin").click(function(){var t=e('input[name="postcode"]'),a=e("#submitPostcodeCin").attr("data-showError"),n=t.val();return 1==a&&e("#results").html('<div class="inline-loader"><img src="'+imageAssetBase+'/images/loading.gif" alt="Please wait..." class="loader" /> <span>Searching...</span></div>'),e.post("/php/ajax/get_address_list_cin.php",{postcode:n,actionTaken:"getPostcode"},function(n){"success"!=n.message?(1==a&&t.formError(n.error,"","change"),e("#results").html(n.html)):e("#results").html(n.html)},"json"),!1}),e(document).on("change","#addressFinderCin",function(){var t=e("#addressFinder").val(),a=e("#postcode").val();return e.post("/php/ajax/get_address_list_cin.php",{postcode:a,address:t,actionTaken:"getAddressLine"},function(t){e("#results").html(t)},"html"),!1}),e(".show_teach_address_form").hide(),e("#submitPostcodeJson").click(function(){e(".show_teach_address_form").hide();var t=e('input[name="postcode"]'),a=t.val();return e("#results").html('<div class="inline-loader"><img src="'+imageAssetBase+'/images/loading.gif" alt="Please wait..." class="loader" /> <span>Searching...</span></div>'),e.post("/php/ajax/get_address_list.php",{postcode:a,actionTaken:"getPostcode",returnedFormat:"jsonFormat"},function(t){"success"!=t.message?(e("#results").html(""),e(".show_teach_address_form").show()):e("#results").html(t.html)},"json"),!1}),e(document).on("change","#addressFinderJson",function(){e(".show_teach_address_form").show();var t=e("#addressFinderJson").val(),a=e("#postcode").val();return parsed_address=JSON.parse(t),e("#teachmeet_address_line_1").val(parsed_address[0]+" "+parsed_address[1]+" "+parsed_address[2]),e("#teachmeet_address_line_2").val(parsed_address[3]+" "+parsed_address[4]),e("#teachmeet_city").val(parsed_address[5]),e("#teachmeet_county").val(parsed_address[6]),e("#teachmeet_postcode").val(a),e.post("/php/ajax/get_address_list.php",{postcode:a,address:t,actionTaken:"getAddressLine",returnedFormat:"jsonFormat"},function(t){e("#submitForm").prop("disabled",!1),e("#submitForm").removeClass("disabled-cta").addClass("green"),e("#results").html(t)},"html"),!1}),e(".twinkl-go-christmas-box").exists(function(){function t(t){function o(t){e("#go-promo-video").hide().remove()}var t=t;n.fadeIn(),n.click(function(){a.hide()});var r=e(".twinkl-go-christmas-box .inner");a.removeClass("p-a-1").addClass("p-a-2"),r.fadeOut(),a.addClass("expanded"),a.center(),r.replaceWith(t.html);var s=r.find(".inner-video"),l=e(".inner-resource");if(e.support.video()){document.getElementById("go-promo-video").addEventListener("ended",o,!1);setTimeout(function(){l.fadeIn("fast").addClass("pop")},5e3)}else s.remove(),fadeIn("fast").addClass("pop");var c=a.find(".dismiss");c.unbind("click"),c.click(function(e){n.hide(),a.remove()}),a.find(".button").click(function(){createCookie("go_xmas_promo",1,0,43e3)}),i=!0}var a=e(this),n=(e(this).find(".inner"),e("#overlay")),i=!1;e(this).click(function(a){return e(a.target).hasClass("dismiss")&&createCookie("go_xmas_promo",1,12),!e(a.target).hasClass("dismiss")&&void(i||e.post("/php/ajax/getTwinklGoPromoContent.php",{},function(e){return"success"!=e.message?void(window.location.href="/resources/twinkl-go"):(i=!0,void t(e))},"json"))})}),e("#search_box #phrase").exists(function(){!viewport||"/"!=location.pathname&&""!=location.pathname&&"/search"!=location.pathname||setTimeout(function(){if(!viewport.is("<=lg")){var t=e(e("#noResults").length>0?"#noResults":"#header"),a=t.find("#search_box #phrase");if(""!==a.val())return;a.select().focus()}},viewport.interval)}),e("#vacancies").find(".vacancy").find(".greenOutlineButton").click(function(t){t.preventDefault();var a=e(this),n=a.data("category-id");n=String(n);var i=a.data("vacancy-id"),o=n.split(",");e.inArray("3",o)>=0?apprise("To apply for this position, you will need:  <p><ul><li> CV (PDF)</li><li> Covering Letter (PDF) </li><li> Creative Portfolio (PDF) </li></ul><p style= 'text-align:center;'> Do you want to proceed ? <p>",{verify:!0},function(e){e===!0&&(window.location.href="/career-application-form?id="+i)}):e.inArray("1",o)>=0||e.inArray("2",o)>=0?apprise("To apply for this position, you will need: <p><ul><li> CV (PDF)</li><li> Covering Letter (PDF) </li><li> An example of planning </li></p></ul> <p style= 'text-align:center;'> Do you want to proceed ? <p>  ",{verify:!0},function(e){e===!0&&(window.location.href="/career-application-form?id="+i)}):window.location.href="/career-application-form?id="+i}),e(".schoolPremiumForm").find('select[name="invoice_country_id"]').change(function(){var t=e(this).val(),a=e("#invoice_address_county"),n='<input type="text" id="invoice_address_county" name="invoice_address_county" value="">',i='<select for="invoice_address_county" name="invoice_address_county" id="invoice_address_county"></select>';e.post("/php/ajax/get_county_list.php",{countryId:t},function(t){if(""!=t.trim()){a.replaceWith(i),e("#invoice_address_county").append(t);var o=e("#invoice_address_county option:first").attr("data-county-name");e(".schoolPremiumForm").find('label[for="invoice_address_county"]').text(o)}else{a.replaceWith(n);var o=e(".schoolPremiumForm").find('label[for="invoice_address_county"]').attr("data-default");e(".schoolPremiumForm").find('label[for="invoice_address_county"]').text(o)}},"html")}),e("#payByReference").submit(function(t){t.preventDefault();var a=showDialogLoader("Making payment"),n=e("#checkout_id").val(),i={payByReferenceId:1,payByReferenceAjax:1,checkout_id:n};e("#payByReference").find("input").each(function(){i[e(this).attr("name")]=e(this).val()}),e.post("/payment",i,function(e){"success"!=e.message?(removeDialog(a),showDialogMessage("Error!",e.message)):window.location="/payment-waiting/"+n})}),readCookie("resource_scroll")&&(e("html, body").stop().animate({scrollTop:e("#resource #breadcrumb").offset().top},500),eraseCookie("resource_scroll")),e('a[href*="#"][data-scroll="smooth"]').bind("click",function(t){var a=e(this),n="#"+a.attr("href").split("#").pop(),i=e(this).data("scroll-delay")||0;setTimeout(function(){e("html, body").stop().animate({scrollTop:e(n).offset().top},1e3)},i);t.preventDefault()}),e("#planit.move").exists(function(){e(".clickable").on("click",function(){var t=e(this).find("a");t[0].click()})}),e(".schoolOrderSubmitted").length&&(e("#overlay").removeAttr("data-extra").css({"background-color":"#000",opacity:"0.5",display:"none"}),e("#panel").find(".schoolPremiumForm").css("z-index",0)),e("#news.blog").on("click","li",function(){window.location=e(this).find("a:first").attr("href")}),e("#blog-content").exists(function(){var t=!0,a=e("#blog-content")[0].scrollHeight,n=.4;c(a,n,t)}),e("#support_details").exists(function(){var t=window.screen.height+" x "+window.screen.width,a=e(document).width()+" x "+e(document).height(),n=window.screen.colorDepth+" bit",i=e("#support-details-form"),o=e("#support_details");i.find('input[name="javascript_enabled"]').val("true"),o.find(".feature-javascript p").html("Enabled"),i.find('input[name="screen_resolution"]').val(t),o.find(".feature-screen-resolution p").html(t),i.find('input[name="browser_size"]').val(a),o.find(".feature-browser-size p").html(a),i.find('input[name="color_depth"]').val(n),o.find(".feature-color-depth p").html(n),o.find("button").click(function(t){t.preventDefault(),e(".actionMessage").remove();var a=e('<img src="'+imageAssetBase+'/images/ajax-loader-green-on-pink2.gif" class="loader">');a.css({"float":"right","margin-top":"20px","margin-right":"10px",display:"inline"});var n=e(this),i=e(".support-details-sender"),r=e("#supportName").val(),s=e("#supportEmail").val(),l=o.find('input[name="os_type"]').val(),c=o.find('input[name="os_version"]').val(),d=o.find('input[name="screen_resolution"]').val(),u=o.find('input[name="browser_size"]').val(),p=o.find('input[name="web_browser"]').val(),h=o.find('input[name="ip_address"]').val(),m=o.find('input[name="color_depth"]').val(),f=o.find(' input[name="cookies_enabled"]').val(),v=o.find('input[name="user_agent"]').val(),g=o.find('input[name="blocked_urls"]').val(),_="";return r?s||(_="You haven't entered an email address..."):_="You haven't entered a name...",_?void apprise(_):(n.after(a).hide(),void e.post(window.location,{action:"submitSupportForm",name:r,email:s,os_type:l,os_version:c,screen_resolution:d,browser_size:u,web_browser:p,ip_address:h,color_depth:m,cookies_enabled:f,user_agent:v,blocked_urls:g},function(e){"success"!==e.message?(a.after('<p class="actionMessage error">'+e.message+"</p>"),n.show()):(i.find("form").hide(),i.after('<p class="actionMessage success">Thank you for sending us your details! We\'ll be in touch soon!</p>')),a.remove()},"json"))})}),e("#twinkl_font").find("[data-download]").click(function(t){t.preventDefault();var a=e("#twinkl_font").data("version");if("0"==e(this).data("download"))return void("#"==e(this).attr("href")&&(window.location="/premium"));var n=e('<img class="loader" src="'+imageAssetBase+'/images/loading_green.gif" />');e(this).append(n),e.post("/php/ajax/get_font.php",{action:"getAgreement",version:a},function(t){n.remove();var i=e('<div title="Twinkl Font Agreement">'+t.html+"</div>");i.dialog({resizable:!1,draggable:!1,height:500,width:800,modal:!0,dialogClass:"fontAgreementDialog",buttons:{Accept:function(t){var n=e(this),i=e(t.currentTarget),o=e('<img class="loader" src="'+imageAssetBase+'/images/loading.gif">');o.css({position:"relative",top:"10px",right:"32px"}),i.after(o),i.hide(),e.post("/php/ajax/get_font.php",{action:"logDownload",version:a},function(e){n.dialog("close"),window.location=e.link},"json")},Decline:function(){e(this).dialog("close")}}})})}),e("body").on("click",".saveIcon, .saveForLater, .create_fav, .saveFav",function(t){t.preventDefault();var a=e(this),n=a.attr("data-id");e("#save-resource-options-modal").length?d(a):e.post("/php/ajax/resourceLesson.php",{action:"getChoicePopup",id:n},function(t){"success"===t.message&&(e("#footer").after(t.result),d(a))})}),e("body").on("click","#save-resource-options-modal .close-option",function(t){t.preventDefault();var a=e(this).closest("div.generic_pop");a.hide(),e("#overlay").hide()}),e("#fav_menu.popup").length&&setTimeout(function(){showFavMenu()},200),e("body").on("click",".saveResource",function(t){t.preventDefault(),e("#save-resource-options-modal").hide(),e("#overlay").hide();var a=e(this),n=e(this).attr("data-id"),i=e(this).attr("data-alt-id"),o=e(this).attr("data-type-id"),r=i?i:n;e.post("/php/ajax/createFav.php",{action:"getFavPopUp",id:r,type_id:o},function(t){if("success"!==t.message)apprise("Failed to save resource.");else{var n=document.querySelector("#resource_image .saveText");if(n&&"Save"===n.textContent){n.textContent="Saved";var i=document.querySelector("#resource_image .saveFav");i.classList.toggle("saveForLater"),i.classList.toggle("saved")}e("#fav_menu").remove(),e("body").append(t.html),showFavMenu(),t.html.search("notLoggedIn")===-1&&a.hasClass("saveForLater")&&(a.hasClass("saveFav")?(a.attr("style","background-color: #d679ac;"),a.find(".saveText").html("Saved")):a.text("Saved!"))}},"json")}),e("body").on("click",".addToLesson",function(t){t.preventDefault();var a=e(this),n=a.hasClass("addAlt"),i=a.attr("data-id");e("#add-resource-to-lesson-modal").length?(e("#save-resource-options-modal").hide(),u(a,n)):e.post("/php/ajax/resourceLesson.php",{action:"getLessonPopups",id:i},function(t){"success"===t.message&&(e("#footer").after(t.result),e("#save-resource-options-modal").hide(),u(a,n))})}),e("body").on("change","#add-resource-to-lesson-modal #all-lesson-sort",function(){var t=e(this).val(),a=e(this).children(":selected").data("direction"),n=e('<img src="'+imageAssetBase+'/images/loading_small.gif" alt="Loading" class="m-0-auto"/>');e(".lessons").after(n),e.post("/php/ajax/resourceLesson.php",{action:"sortLessonsBy",order:t,direction:a},function(t){if(n.remove(),"success"!==t.message)C("Could not sort lessons.",!0);else{var a=e(".load-more-lessons");a.attr("data-clicked",0),e(".lessons").html(t.result),t.count<10?e(".load-more-lessons").hide():a.show()}},"json")}),e("body").on("click","#add-resource-to-lesson-modal .addNewLesson",function(t){t.preventDefault();var a=e("#add-resource-to-lesson-modal");a.hide();var n=e("#add-new-lesson-modal");n.show(),n.center(),e("#overlay").show(),n.find("button.submit").prop("disabled",!0),n.find("input").on("keyup",function(){""!=e(this).val()?n.find("button.submit").prop("disabled",!1):n.find("button.submit").prop("disabled",!0)})}),e("body").on("click","#add-resource-to-lesson-modal .lesson",function(t){if(!(t.target instanceof HTMLAnchorElement)){t.preventDefault();var a=imageAssetBase+"/images/twinkl-icons/cross-circle-icon-grey.svg",n=imageAssetBase+"/images/twinkl-icons/check-circle-icon-green.svg",i=e(this),o=e("#add-resource-to-lesson-modal").find(".title"),r=o.data("resource-id"),s=o.data("alt-id"),l=i.data("lesson-id");if(i.hasClass("selected")){var c={action:"removeResourceFromLesson",lesson:l};o.hasClass("addAlt")&&(c.alt_id=s),(o.hasClass("addRes")||void 0===c.alt_id)&&(c.resource_id=r),e.ajax({type:"POST",dataType:"json",url:"/php/ajax/resourceLesson.php",data:c,success:function(e){"success"!=e.result.message?C(e.result.message,!0):(i.removeClass("selected"),i.find(".status-icon img").attr("src",a),C("Resource has been removed"))}})}else{i.addClass("selected");var c={action:"addResourceToLesson",lesson:l};o.hasClass("addAlt")&&(c.alt_id=s),(o.hasClass("addRes")||void 0===c.alt_id)&&(c.resource_id=r),e.ajax({type:"POST",dataType:"json",url:"/php/ajax/resourceLesson.php",data:c,success:function(e){void 0===e.result.success?(i.removeClass("selected"),C(e.result.message,!0)):(i.find(".status-icon img").attr("src",n),C(e.result.message))}})}}}),e("body").on("click","#add-resource-to-lesson-modal .load-more-lessons",function(t){t.preventDefault();var a=e("#all-lesson-sort"),n=a.val(),i=a.children(":selected").data("direction"),o=e(this).attr("data-clicked"),r=parseInt(o)+1;e(this).attr("data-clicked",r);var s=10*r,l=e('<img src="'+imageAssetBase+'/images/loading_small.gif" alt="Loading" class="m-0-auto"/>');e(".lessons").after(l),e.post("/php/ajax/resourceLesson.php",{action:"sortLessonsBy",order:n,direction:i,offset:s},function(t){l.remove(),"success"!==t.message?C("Failed to load more lessons",!0):(t.count<10&&e(".load-more-lessons").hide(),e(".lessons").append(t.result))},"json")}),e("body").on("click","#add-resource-to-lesson-modal .close-option",function(t){t.preventDefault();var a=e(this).closest("div.generic_pop"),n=a.find(".title");n.removeClass("addRes"),n.removeClass("addAlt");var i=imageAssetBase+"/images/twinkl-icons/cross-circle-icon-grey.svg";a.find(".lesson").each(function(){e(this).removeClass("selected"),e(this).find(".status-icon img").attr("src",i)}),a.hide(),e("#overlay").hide()}),e("body").on("click","#add-new-lesson-modal .close-option",function(t){t.preventDefault();var a=e(this).closest("div.generic_pop");a.find("input").val(""),a.hide(),e("#overlay").hide(),e("body").find("#save-resource-options-modal .addToLesson").trigger("click")}),e("body").on("click","#add-new-lesson-modal .submit",function(t){t.preventDefault();var a=e("#add-new-lesson-modal"),n=a.find("#lesson-name").val(),i=a.find("input, button"),o=a.find("button.submit"),r=o.parent();i.prop("disabled",!0);var s=loaderHeight=16,l=o.position().top+(o.outerHeight()-loaderHeight)/2,c=o.position().left+(o.outerWidth()-s)/2;o.css("visibility","hidden");var d=createLoaderIcon("small",{styles:{position:"absolute",top:l,left:c}},r);e.post("/php/ajax/resourceLesson.php",{action:"addNewLesson",name:n},null,"json").done(function(t){"success"!==t.message&&C("Failed to create lesson.",!0),C("Lesson has been created."),setTimeout(function(){a.find("#lesson-name").val(""),e("#all-lesson-sort").trigger("change"),a.find("button.close-option").trigger("click")},500)}).always(function(){d.remove(),i.prop("disabled",!1),o.css("visibility","visible")})}),e("input.disablecopypaste").on("copy paste",function(e){e.preventDefault()}),e(".socialGrid").find("a").hover(function(){var t=e(this).find("img").attr("src");t=t.replace("2.png","_hover2.png"),e(this).find("img").attr("src",t)},function(){var t=e(this).find("img").attr("src");t=t.replace("_hover2.png","2.png"),e(this).find("img").attr("src",t)}),e(".visitPremiumPageOffer").length){startTotalSeconds=e(".visitPremiumPageOffer").attr("data-seconds");var Re=setInterval(function(){totalSeconds=startTotalSeconds,hours=Math.floor(totalSeconds/3600),totalSeconds%=3600,minutes=Math.floor(totalSeconds/60),seconds=totalSeconds%60,e(".timeLeft .hours").html(hours),e(".timeLeft .minutes").html(minutes),e(".timeLeft .seconds").html(seconds),startTotalSeconds--,startTotalSeconds<1&&clearInterval(Re)},1e3)}var Me=e(".chooseCurric");if(Me.find("a.noLink").click(function(e){return e.preventDefault(),!1}),Me.find(".tabMenu a").click(function(t){var a=e(this).attr("data-country-id");a&&createCookie("country_id",a,30)}),e("#infoBoxDiv.emailCheck").length&&addGoogleAnalyticsEvent("Bad Email Box","view","User has viewed the popup.",null),e(document).on("click","#infoBoxDiv.emailCheck button",function(){var t=e(this),a="update",n=e("#infoBoxDiv");t.hasClass("yes")&&(a="yes"),t.hasClass("no")&&(a="no");var i=n.find(".updateEmail").val(),o=e('<img src="'+imageAssetBase+'/images/loading.gif" class="loading position-absolute" style="right: 173px; top: 13px;">');t.after(o),n.find(".emailCheck button").hide(),addGoogleAnalyticsEvent("Bad Email Box","click",a,null),e.post("/php/ajax/email_check.php",{type:a,email:i},function(t){if("success"!==t.message){o.remove(),n.find(".emailCheck button").show(),n.find(".error").remove();var a=e('<p class="error" style="margin-top: 20px;">'+t.message+"</p>");n.find(".content").append(a),a.effect("highlight",{},5e3)}else n.find(".content").html(t.html),n.find(".close").click(function(){e("#messageOverlay").trigger("click")})},"json")}),e(".addthisFacebookLink").length&&e.get("/php/ajax/clear_facebook_cache.php",{page:window.location.href}),e(".twinklFontLink").click(function(e){e.stopPropagation()}),e(".currencyChange").change(function(t){var a=e(".currencyChange option:selected").val();e.post(window.location,{ajax:1,action:"updateCurrency",code:a},function(){window.location="/payment"})}),e("#comments_container .alert, .comingSoonSignIn").click(function(t){t.preventDefault();var a=e(this);if(!a.hasClass("clicked")){var n=e('meta[name="twinkl-id"]').attr("content"),i=!!a.hasClass("notSignedIn"),o=e("body"),r=e("#overlay"),s=e("#alertSignUp");if(i){s.remove(),r.show();var l=e('<div id="alertSignUp" class="generic_pop">'),c='<h2>Resource Alerts</h2><p>Get alerts when this resource is updated.</p><label><strong>Email Address:</strong></label> <input type="text"> <button class="green">Set Up Alert</button><span class="or">or</span><a href="/sign-in" data-alert="'+n+'" class="signIn green button">Sign In</a><span class="close"></span>';l.html(c),l.hide(),o.append(l),B(l),l.show(),l.find(".close").click(function(){r.hide(),l.remove()});var d=l.find("button");d.click(function(){var t=l.find(".error");t.length&&t.slideUp(function(){t.remove()});var i=l.find("input").val();if(validateEmail(i)){var o=e('<img src="'+imageAssetBase+'/images/loading.gif" style="position:absolute;top:114px;left:428px;">');d.after(o),d.css("visibility","hidden"),e.post("/php/ajax/saveResourceAlert.php",{id:n,email:i},function(t){if(d.css("visibility","visible"),o.remove(),"success"!==t.message){var n=e('<div class="or error">'+t.message+"</div>");d.after(n),n.slideDown()}else r.hide(),l.remove(),a.removeClass("pink").removeClass("green").removeClass("comingSoonSignIn"),a.show(),a.text("Resource alert saved!"),a.addClass("clicked"),e("#alert_checkbox").remove()},"json")}else{var s=e('<div class="or error">The email address is not valid!</div>');d.after(s),s.slideDown()}})}else{var u=e('<img src="'+imageAssetBase+'/images/loading.gif" style="position:absolute;top:155px;left:20px;">');a.after(u),a.hide(),e.post("/php/ajax/saveResourceAlert.php",{id:n},function(t){a.removeClass("pink"),u.remove(),a.show(),a.text("Resource alert saved!"),a.addClass("clicked"),e("#alert_checkbox").remove()})}}}),e(".topCatPage").exists(function(){e(".display-third").filter(function(e){return(e+1)%3===0}).css("margin-right","0"),e(this).find(".planningAndAssessment, .slt, .display").click(function(){var t=e(this).find("a.title").attr("href");t&&(window.location=t)})}),e("#recent_blogs").find("td").add(".account-block.clickable").click(function(){var t=e(this).find("a:first").attr("href");t&&(window.location=t)}),e(document).on("click",'a[href$="sign-in"], a[href$="sign-up"]',function(){0!==window.location.pathname.lastIndexOf("/premium-thanks",0)&&(e(this).hasClass("no-track")||("/"==window.location.pathname?eraseCookie("currentPage"):createCookie("currentPage",window.location,1,10)))}),e(document).on("click","[data-mtc]",function(){var t=window.location.href,a=t.split("/"),n=a[0]+"//"+a[2]+e(this).data("mtc");createCookie("currentPage",n,1,10)}),e(document).on("click",'.mtc-offer a[href$="sign-up"]',function(){createCookie("mtc_signup",1,1,10)}),e("[data-mtc-activated]").exists(function(){eraseCookie("mtc_signup")}),e("[data-splash-popup]").each(function(){console.log("Popup detected"),"true"==e(this).attr("data-persist")?e(".dismiss").click(function(){$el=e(this).parent(),createCookie($el.attr("data-cookie-name"),$el.attr("data-cookie-value"),$el.attr("data-cookie-days"),0)}):createCookie(e(this).attr("data-cookie-name"),e(this).attr("data-cookie-value"),e(this).attr("data-cookie-days"),0)}),e(document).on("click","[data-current-page]",function(){var t=window.location.href,a=t.split("/"),n=a[0]+"//"+a[2]+e(this).data("current-page");createCookie("currentPage",n,1,10)}),e(document).on("click",'.popup-offer a[href$="sign-up"]',function(){createCookie(e(this).data("signup"),1,1,10)}),e(".show-popup-once").exists(function(){createCookie(e(this).data("popup")+"_shown",1,1,10)}),e("[data-popup-activated]").exists(function(){eraseCookie(e(this).val())}),e(".openingTimes").length&&e(".openingTimes").each(function(){var t=e(this),a=t.attr("data-start-gmt"),n=t.attr("data-end-gmt"),i=t.attr("data-timezone");if(!isNaN(a)||!isNaN(n)){var o=new Date(a.toLocaleString()),r=new Date(n.toLocaleString()),s=String(String(r).split("(")[1]).split(")")[0];o=p(o),r=p(r),i?t.html(o+" - "+r):("GMT Summer Time"==s&&(s="BST"),t.html(o+" - "+r+" ("+s+")")),e(".openingTimezone").length&&e(".openingTimezone").html("("+s+")")}}),!readCookie("timezone")){var Fe=new Date,Ue=-Fe.getTimezoneOffset()/60;moment().isDST()?(Ue-=1,createCookie("isDaylightSaving",1,30)):eraseCookie("isDaylightSaving"),createCookie("timezone",Ue,"30")}e("#header .loggedInUser").mouseenter(function(){e(".cd-panel").hide()}).mouseleave(function(){e(".cd-panel").show()}),e(".careerPicker").click(function(){var t=e(this);m(t)});var qe=0,He=null;e("#header #countryFlag").mouseenter(function(){var t=e(this).find(".newLanguageContainer");qe||t.css("cursor","wait"),He=setTimeout(function(){if(0==qe){qe=1;var a=e("body  .displayLanguageOptionsContainer").attr("data-settingClass"),n=e("body  .displayLanguageOptionsContainer").attr("data-selectedFlag");e.post("/php/ajax/userCountryLanguageOptions.php",{action:"returnLanguageOptions",settingClass:a,selectedFlag:n},function(a){t.css("cursor","unset");var n=e(a.page);n.find(".languagesText").click(function(){var t=e(this),a=t.data("id");e.post("/php/ajax/saveUserLanguage.php",{action:"returnLanguageOptions",language_id:a},function(e){location.reload()})}),e(".displayLanguageOptionsContainer").html("").append(n),e(".careerPicker").click(function(){m(t)}),e(".Cradio").click(function(){var t=e(this).data("value"),a={careerOther:"",careerId:t};e(".career_list_loading").css("display","unset");var n=function(t){return"success"!==t.message?(e(".career_list_loading").css("display","none"),void apprise("Something went wrong. Try again later")):void location.reload()};e.post("/career/save",a,n)})},"json")}},1e3)}).mouseleave(function(){clearTimeout(He)}),e(".currencyCheck").click(function(t){t.preventDefault();var a=e("#infoBoxDivContainer");a.length?"countryPicker"===a.data("type")&&(e("#infoBoxDivContainer").fadeIn(),e("#messageOverlay").css({display:"block"})):e.post("/php/ajax/getCountryPicker.php",{},function(t){e("#infoBoxDivContainer").remove(),e("#messageOverlay").remove(),Pe.prepend(t),e("#infoBoxDiv select").select2({dropdownParent:e("#infoBoxDiv"),matcher:select2DoNotShowInSearchResult,dropdownAutoWidth:!0,width:"100%"}),e("#messageOverlay").css({display:"block"});var a=e('<div class="close" style="top:10px;font-size:22px;">X</div>');a.click(function(){e("#messageOverlay").trigger("click")}),R(),e("#infoBoxDiv").append(a),e("#infoBoxDivContainer").fadeIn()}),window.scrollTo(0,0)}),e("#countryFlag").on("click",".languageFooterText",function(){window.scrollTo(0,0),e("#career-picker").length?v():_()});var Ne=!1,We=!1;e("#career-picker").length&&(g(),v()),e(".premiumThanks").length&&g();var ze=new URLSearchParams(window.location.search);"show-additional-picker"===ze.get("action")&&(Ne=!0,e("#career-picker").length?v():_()),e(".delDraft").on("click",function(t){t.preventDefault();var a=e(this).attr("href");apprise("<p>This will clear your saved draft, are you sure you want to do this?</p>",{confirm:!0},function(e){e&&(location.href=a)})}),e("#well-being-application-button").click(function(t){t.preventDefault(),e("#well-being-form-intro").slideUp(400,function(){e("#well-being-form").fadeIn("slow")})}),e("#wellbeing-cancel").click(function(t){t.preventDefault(),e("#well-being-form").slideUp(400,function(){e("#well-being-form-intro").fadeIn("slow")})}),e("#well-being-form").submit(function(t){t.preventDefault();var a=e("#well-being-form"),n=e("#wellbeing-name").val(),i=e("#wellbeing-email").val(),o=e("#wellbeing-organisation").val(),r=a.find(".buttons").hide(),s=e('<img class="loader" src="'+imageAssetBase+'/images/version_select_loader.gif" style="margin-left: 20px;" width="32" height="32">'),l=new FormData;l.append("name",n),l.append("email",i),l.append("organisation",o),l.append("file",e("#well-being-form input[type=file]")[0].files[0]),r.hide(),r.after(s),e.ajax({url:"/php/ajax/sendWellBeingApplication.php",type:"POST",data:l,processData:!1,contentType:!1,dataType:"json",success:function(t){if("success"!==t.message){var n="",i="";a.find(".alert").remove(),s.hide(),"undefined"!=typeof t.error&&(i=": "+t.error),n=e("<div class='alert alert-error'>"+t.message+i+"</div>"),n.hide(),a.find("h3").after(n),n.fadeIn("fast"),r.show()}else a.replaceWith("<h3>Thanks! Your application has been received and our team will be in touch soon.</h3>")}})}),e(".subContent.planit").click(function(t){e(this).find("form").length&&(e(this).find("form").submit(),t.stopPropagation())}),e(".schoolTwinklGreenMark").hover(function(){clearTimeout(Ve),e(".questionMarkText, .awardHoverText").hide();var t,a,n=e(this),i=(n.position(),-50),o=-185;e(this).parents("#schools-twinkl-green-banner").length?(a=e(this).parents("#schools-twinkl-green-banner").parent(),t=a.find(".questionMarkText"),i=-125,o=140,t.css({top:o+"px",left:i+"px",display:"block"})):(t=e(this).parent().find(".questionMarkText"),t.css({top:o+"px",left:i+"px",display:"block"}));var r=e(this).parent().find(".questionMarkText");r.mouseenter(function(){e(this).addClass("dontclose")})},function(){Ve=setTimeout(function(){e(".questionMarkText:not(.dontclose)").hide()},500)});var Ye;e(".reducedPriceSticker").hover(function(){clearTimeout(Ye),e(".questionMarkText").hide(),e(".questionMarkText.sticker").remove();var t=e(this).parent(),a=parseInt(e(".reducedPriceSticker").css("top")),n=parseInt(e(".reducedPriceSticker").css("left"));e(".schoolPackageBox.schoolPlus .planIt .questionMarkText").clone().appendTo(t).addClass("sticker").show().css({
top:a+150+"px",left:n-35+"px"}),e(".schoolPackageBox.schoolPlus .foundation .questionMarkText").clone().appendTo(t).addClass("sticker").show().css({top:a+290+"px",left:n-35+"px"}),e(".questionMarkText.sticker .closeQuestionText").click(function(){e(this).parent().remove()}),e(".questionMarkText.sticker").mouseleave(function(){e(this).remove()}),e(".questionMarkText.sticker").mouseenter(function(){e(this).addClass("dontclose")})},function(){Ye=setTimeout(function(){e(".questionMarkText.sticker:not(.dontclose)").remove()},500)}),e(".has-question").click(function(t){t.stopPropagation(),e(this).parent().find(".questionMark").trigger("mouseenter")});var Ve;if(e(".has-question .questionMark, .packageBox .subContent, .packageBox .bar-off, .packageBox.classicSub .questionMark, .schoolPackageBox .miniBox, .schoolPackageBox .mediumBox, .schoolPackageBox .bar").hover(function(t){if(clearTimeout(Ve),e(this).find(".questionMark").length||e(this).hasClass("questionMark")){e(".questionMarkText, .awardHoverText").hide();var a=e(this);a.hasClass("questionMark")||(a=e(this).find(".questionMark"));var n=306,i=150;a.parent().hasClass("foundation")?(n=306,i=225):a.parent().hasClass("classic")?(n=86,i=108):a.parents("div:first").hasClass("classicBar")?i=175:a.parents("div:first").hasClass("foundationBar")?i=220:a.parents("div:first").hasClass("imagineBar")?i=90:a.parent().parent().hasClass("classicSub")&&(i=175,n=220);var o=a.position(),r=(o.left-n,o.top-i,a.parent().find(".questionMarkText")),s="0.5rem",l="0.5rem";r.css({display:"block",height:"auto",left:l,overflow:"visible",top:s,width:"95%"}),r.mouseenter(function(){e(this).addClass("dontclose")})}},function(){Ve=setTimeout(function(){e(".questionMarkText:not(.dontclose)").hide()},3e3)}),e(".questionMarkText").click(function(e){e.stopPropagation()}),e(".questionMarkText").mouseleave(function(){e(this).hide().removeClass("dontclose")}),e(".closeQuestionText").click(function(t){t.stopPropagation(),e(this).parent().hide().removeClass("dontclose")}),e(".packageBox .planitAward, .packageBox .eraLogo, .schoolPackageBox .planitAward").hover(function(){clearTimeout(Ve),e(".questionMarkText, .awardHoverText").hide();var t=e(this),a=265,n=120;t.parent().hasClass("foundation")?(a=296,n=255):t.parent().hasClass("classic")&&(a=278,n=184);var i=t.position(),o=i.left-a,r=i.top-n,s=e(this).parent().find(".awardHoverText");s.css({top:r+"px",left:o+"px",display:"block"}),s.mouseenter(function(){e(this).addClass("dontclose")})},function(){Ve=setTimeout(function(){e(".awardHoverText:not(.dontclose)").hide()},500)}),e(".awardHoverText").click(function(e){e.stopPropagation()}),e(".awardHoverText").mouseleave(function(){e(this).hide().removeClass("dontclose")}),e(".packageBox .closeQuestionText").click(function(t){t.stopPropagation(),e(this).parent().hide().removeClass("dontclose")}),e(".schoolPremiumPackages .schoolPackageBox, .schoolPremiumPackages .timeLimitedOffer, .schoolPremiumPackages .timeLimitedOffer2, .schoolPremiumPackages .reducedPriceSticker").click(function(){location.hash=""}),e(".schoolPackageBox").find("form button").click(function(e){e.stopPropagation()}),e(".schoolPackageBox").find("form").submit(function(t){var a=e(".priceWindow.small .priceHolder .active .title").first(),n=+a.data("package-size");if(isNaN(n)){var i=a.text(),o=i.split(" ");n=o[0]}e(this).append('<input type="hidden" name="package_size" value="'+n+'">')}),e(".quickQuote .schoolPackageBox.schoolPlus, .quickQuote .timeLimitedOffer, .quickQuote .priceWindow.schoolPlus").click(function(){e(".schoolPackageBox.schoolPlus.bottom form:first").submit()}),e(".quickQuote .schoolPackageBox.schoolPlanIt, .quickQuote .priceWindow.schoolPlanIt").click(function(){e(".schoolPackageBox.schoolPlanIt.bottom form:first").submit()}),e(".quickQuote .schoolPackageBox.schoolClassic, .quickQuote .priceWindow.schoolClassic").click(function(){e(".schoolPackageBox.schoolClassic.bottom form:first").submit()}),e("#contact_us").find(".showSchoolContactForm").click(function(){var t=e(this),a=e(".schoolForm");a.stop();var n=t.hasClass("arrowRight")?"arrowDown":"arrowRight",i="arrowDown"===n?"arrowRight":"arrowDown";t.removeClass(i).addClass(n),"arrowDown"===n?(a.css("height","auto"),a.slideDown()):a.slideUp()}),e(".schoolForm").find("button").click(function(t){t.preventDefault(),e(".actionMessage").remove();var a=e("#nameSchool").val(),n=e("#idLikeToChatAboutSchool").val(),i=e("#schoolName").val();e("#schoolName").is("select")&&(i+=" - "+e("#schoolName option:selected").text());var o=e("#emailSchool").val(),r=e("#messageSchool").val(),s=e("#altEmail").val(),l=e("#username").val(),c="";if(a?n?i?o?r||(c="You haven't entered a message..."):c="You haven't entered an email address...":c="You haven't entered a school name...":c="You haven't chosen anything to chat about...":c="You haven't entered a name...",c)return void apprise(c);var d=e('<img src="'+imageAssetBase+'/images/ajax-loader-green-on-pink2.gif" class="loader" style="float:right;margin-top:20px;margin-right:10px;display:inline;" />'),u=e(this);u.after(d).hide(),e.post(window.location,{action:"submitContactForm",type:"school",name:a,idLikeToChatAbout:n,schoolname:i,email:o,message:r,altEmail:s,username:l},function(e){"success"!==e.message?(d.after('<p class="actionMessage">'+e.message+"</p>"),u.show()):d.after('<p class="actionMessage">Thank you for your message! We\'ll be in touch soon!</p>'),d.remove()},"json")}),e(".contactForm").find("button").click(function(t){t.preventDefault();var a=e(this);a.siblings(".actionMessage").remove();var n=window.screen.height+" x "+window.screen.width,i=e(document).width()+" x "+e(document).height(),o=window.screen.colorDepth+" bit",r=e("#name").val(),s=e("#idLikeToChatAbout").val(),l=e("#idLikeToChatAbout").find(":selected").data("id"),c=e("#email").val(),d=e("#message").val(),u="";if(r?s?c?d||(u="You haven't entered a message..."):u="You haven't entered an email address...":u="You haven't chosen anything to chat about...":u="You haven't entered a name...",u)return void apprise(u);var p=e('<img src="'+imageAssetBase+'/images/loading_green.gif" class="loader" style="float:right;margin-top:20px;margin-right:10px;display:inline;" />');a.after(p).hide();var h=document.getElementById("contactForm"),m=new FormData(h);m.append("action","submitContactForm"),m.append("screenResolution",n),m.append("browserSize",i),m.append("colorDepth",o),m.append("chatAboutData",l),e.ajax({url:window.location,type:"POST",dataType:"json",data:m,contentType:!1,cache:!1,processData:!1,success:function(t){if(p.remove(),"success"===t.message)return e("#contactForm").hide(),e("#messageposted").after('<p class="success m-t-1">Thank you for your message! We\'ll be in touch soon!</p>'),void e("html, body").animate({scrollTop:e("#messageposted").offset().top},1e3);erMsg="Whoops! Something went wrong whilst submitting your request, please try again.";try{t.message=t.message.trim(),t.message.length>0&&(erMsg+=" | Error: <br/>"+t.message.trim())}catch(n){}a.after('<p class="actionMessage">'+erMsg+"</p>"),a.show()},error:function(e,t,n){p.remove(),erMsg="Whoops! Something went wrong whilst submitting your request, please try again.";try{var i=JSON.parse(e.responseText);i.message=i.message.trim(),i.message.length>0&&(erMsg+=" | Error: <br/>"+i.message.trim())}catch(o){}a.after('<p class="actionMessage">'+erMsg+"</p>"),a.show()}})}),e("#idLikeToChatAbout").change(function(){var t=e("#chatAboutExtra");t.slideUp("fast");var a=e(this).find(":selected").attr("data-id");a&&(t.find("a,div").hide(),t.find('*[data-id="'+a+'"]').css("display","block"),t.find('div[data-id="'+a+'"] a').css("display","inline"),t.slideDown("fast"))}),e(".quoteLine").find(".pointBlock").click(function(){var t=e(this).attr("class").split(/\s+/);t=t[1].replace("pos",""),y(t)}),e(".quoteLine").length){var Ge=[0,159,318,479,638],Qe=1;e(".activePoint").draggable({axis:"x",containment:"parent",stop:function(t,a){for(var n=a.helper.position().left,i=null,o=0;o<Ge.length;o++)(null===i||Math.abs(Ge[o]-n)<Math.abs(i-n))&&(i=Ge[o],Qe=o+1);e(this).stop().animate({left:i},250),y(Qe)}}),e("#schools_premium_page").hasClass("secondary")&&y(1)}if(e(".quoteLine .line").click(function(t){var a=[0,159,318,479,638],n=t.pageX-e(this).offset().left,i=e(".activePoint").position().left,o=1,r=null;if(a[0]==i||n>i)for(var s=a.length-1;s>=0;s--)(null===r||i<a[s])&&(r=a[s],o=s+1);if(a[a.length-1]==i||n<i)for(var s=0;s<a.length;s++)(null===r||i>a[s])&&(r=a[s],o=s+1);e(".activePoint").stop().animate({left:r},500),y(o)}),e(".priceWindow").find(".priceHolder-up").click(function(t){t.stopPropagation();var a=parseInt(e(".activePoint").data("pos"));5==a?a=1:a+=1,y(a)}),e(".quoteOption").change(function(){y(e(this).val())}),e(".priceWindow .priceHolder, .priceWindow .priceHolder-down").click(function(t){var a=parseInt(e(".activePoint").data("pos"));1==a?a=5:a-=1,y(a)}),e(".new-header-toggle-wrapper").length){var Je=JSON.parse(readCookie("new_header"));"show_survey"in Je&&"1"==Je.show_survey&&"undefined"!=typeof _gscq&&(_gscq.push(["show",130972]),Je.show_survey="0",createCookie("new_header",JSON.stringify(Je),90)),e(".new-header-toggle-wrapper").find("label").click(function(t){if(Le)return void t.preventDefault();var a=e(".new-header-toggle-wrapper input:checked").length?"0":"1";Je.show_new_header=a,"1"==a?Je.seen_toggle_tour="1":Je.show_survey="1",createCookie("new_header",JSON.stringify(Je),90),window.setTimeout(function(){window.location.reload()},300)})}if(e("#curricSwitchButton").click(function(t){t.preventDefault();var a=JSON.parse(readCookie("new_header"));if(bar=e(".menu-tab-wrapper:hidden"),e(".menu-tab-wrapper:visible").hide(),bar.show(),a.seen_switcher_tour="1",e(".tour:visible").fadeOut("fast"),bar.find(".centreMenuTab").length){var n=bar.find(".leftMenuTab"),i=bar.find(".rightMenuTab"),o=bar.find(".centreMenuTab"),r=(914-n.outerWidth()-i.outerWidth()-o.width())/2;o.css("margin-left",r+"px"),r<0&&(r=0),a.default_menu_offset=r}a.default_menu_tab=e(".menu-tab-wrapper:visible").data("menu-tab"),createCookie("new_header",JSON.stringify(a),90)}),e(".menu-tab-wrapper:visible").each(function(){var t=e(this).find(".centreMenuTab");if(void 0!==t.attr("style")){var a=e(this).find(".leftMenuTab"),n=e(this).find(".rightMenuTab"),i=950;e("#curricSwitchButton").length&&(i=914),i=(i-a.outerWidth()-n.outerWidth()-t.width())/2,t.css("margin-left",i+"px");var o=JSON.parse(readCookie("new_header"));o.default_menu_offset=i,o.default_menu_tab=e(".menu-tab-wrapper:visible").data("menu-tab"),createCookie("new_header",JSON.stringify(o),90)}}),e(".bottomNotice").length){var Xe=e(".bottomNotice");e("#help_bird").css("z-index","999");Xe.find(".extraLink").each(function(){e(this).click(function(e){e.stopPropagation()})});setTimeout(function(){Xe.animate({bottom:"0",opacity:1},500,"easeInQuad")},2e3),Xe.find(".remove, .button").click(function(t){t.stopPropagation(),t.preventDefault();var a=e(this),n=a.parent(),i=n.attr("data-type"),o=n.attr("data-id"),r=n.attr("data-expire");Xe.animate({bottom:"-150px",opacity:0},500,"easeInQuad",function(){e.post("/php/ajax/hideNotice.php",{noticeType:i,noticeId:o,noticeExpire:r},function(t){a.hasClass("button")&&(window.location=a.attr("href")),e("#notice_container").remove()}).fail(function(){window.location=a.attr("href")})})}),Xe.click(function(){e(this).find(".button").trigger("click")})}e("#bookmarks").find(".hideIntro").click(function(t){t.preventDefault(),e.post(window.location,{ajax:1,action:"hideIntro"}),e(this).parents("div.intro").hide(),e(".introLink").css("display","block")}),e("#bookmarks").find(".introLink").click(function(t){t.preventDefault(),e.post(window.location,{ajax:1,action:"showIntro"}),e("div.intro").show(),e(".introLink").hide()}),e("#my-downloads-search").on("submit",function(t){t.preventDefault();var a=e(this),n=a.find('input[name="term"]').val(),i=e("#filemanager_filter_id").val();w(n,i)}),e("#filemanager_filter_id").on("change",function(t){var a=e("#filemanager_filter_id").val();w("",a)}),e("#bookmarks").on("click","#clearBookmarkSearch",function(t){t.preventDefault();var a=e("#my-downloads-search").find('input[name="term"]');e(this).parent();a.val(""),e.post(window.location.href,{action:"view"},function(t,a,n){"success"!=t.message?apprise(t.message):e("#my-twinkl-inner").fadeOut(function(){e("#my-twinkl-inner").replaceWith(t.html),e("#my-twinkl-inner").fadeIn()})},"json")}),e("#bookmarks").on("click",".pager_bar a",function(t){e("#filemanager_popup").length;if(e("#my-twinkl-inner").length){t.preventDefault();var a=(e(this),e("#my-downloads-search").find('input[name="term"]').val()),n=e(this).attr("href"),i=n.match(/\d+$/);i&&(st=i[0]),e.post(window.location.href,{term:a,page:st,action:"paging"},function(t,a,n){"success"!=t.message?apprise(t.message):(e(".filemanager_popup").remove(),e("#my-twinkl-inner").fadeOut(function(){e("#my-twinkl-inner").replaceWith(t.html),e("#my-twinkl-inner").fadeIn(function(){b(),$(),he()})}))},"json")}}),e("#bookmarks").on("click","#bookmarkMenu a",function(t){if(e("#my-twinkl-inner").length){t.preventDefault();var a=e(this),n=a.attr("href");e(".filemanager_popup").length;if(e(this).parent().hasClass("newFolder"))e.post(n,{ajax:1,action:"createFolderForm"},function(t,i,o){if("success"!=t.message)apprise(t.message);else{var r=e(t.html);apprise(r,{confirm:!0,textOk:"Create",animate:!0,emergeFrom:a},function(t){if(t===!0){var a=r.find("#folderName").val();e.post(n,{folderName:a,ajax:1,action:"create"},function(t,a,n){if("success"!=t.message)apprise(t.message);else{var i=e("<li>",{"data-id":t.id,"class":"folder ui-droppable"}).append('<a href="/my-saved-resources/folder/'+t.id+'">'+t.name+"</a>").hide();e("#bookmarkMenu ul").append(i.fadeIn()),e("#bookmarkMenu ul").find("li").sort(function(t,a){return e(t).find("a").text().toLowerCase().localeCompare(e(a).find("a").text().toLowerCase())}).each(function(){e("#bookmarkMenu ul").append(this)}),i.find("a").click(),k()}},"json")}},function(){e("#folderName").focus().select()})}},"json");else{e("#bookmarkMenu li a").removeAttr("style");var i=e("#my-downloads-search").find('input[name="term"]').val(),o=e(this).parent(),r="";if(o.hasClass("selected"))return;var s="";o.data("id")&&(s=e(this).text(),r=o.data("id")),e.post(n,{term:i,action:"view"},function(t,a,i){"success"!=t.message?apprise(t.message):("undefined"!=typeof e(".main_title").data("default")&&e(".main_title").fadeOut("fast",function(){o.hasClass("viewAll")?("undefined"!=typeof e(".main_title").data("default")&&e(this).text(e(".main_title").data("default")).fadeIn(),e("#bookmarkFolderEdit").slideUp(),e("#my-twinkl-edit-folder").data("id","")):(e("#bookmarkFolderEdit").html(t.buttons).slideDown(),e("#my-twinkl-edit-folder").data("id",o.data("id")),e(this).text(s).fadeIn())}),e(".filemanager_popup").remove(),e("#bookmarkMenu li").removeClass("selected"),o.hasClass("viewAll")&&!o.find(".arrow").length?o.append("<span class='arrow'></span>"):o.hasClass("viewAll")&&o.find(".arrow").length?o.find(".arrow").show():e("#bookmarkMenu .arrow").hide(),o.addClass("selected"),e.support.history&&history.pushState("","",n),e("#my-twinkl-inner").fadeOut(function(){e("#my-twinkl-inner").replaceWith(t.html),e("#my-twinkl-inner").fadeIn(function(){$(),b(),he()})}))},"json")}}}),e("#folderName").exists(function(){e(this).focus().select()}),e("#bookmarks").find(".viewResLink.view_all").click(function(t){t.preventDefault(),e.post(window.location,{ajax:1,action:"viewAllRes"},function(e){"success"==e.message&&window.location.reload()},"json")}),e("#bookmarks").find(".viewResLink.view_less").click(function(t){t.preventDefault(),e.post(window.location,{ajax:1,action:"viewLessRes"},function(e){"success"==e.message&&window.location.reload()},"json")}),e("#bookmarks").not(".mySavedResources").on("click","#bookmarkList li img",function(t){var a=e(this).parent();if("1"==a.attr("data-type-id")){if(t.preventDefault(),a.hasClass("highlight"))a.removeClass("highlight");else{var n=e("#bookmarkList li.highlight").length;n>=100?apprise("Maximum reached!"):a.addClass("highlight")}b()}}),e("#bookmarks").on("click","#savedItemsDownloadBox .selectAll",function(t){t.preventDefault();var a=e("#bookmarkList li.highlight").length;e('#bookmarkList li[data-type-id="1"]:not(.highlight)').each(function(){a<100&&e(this).addClass("highlight"),a++}),b()}),k();var Ke=null;e("body").on("onSidebarPlannerToggle",$),e("body").on("onSidebarPlannerLoad",function(e){Ke=e.sidebarPlanner,$()}),e("#my_twinkl_resources #bookmarks").not(".myDownloads").find("#bookmarkList li").exists(function(){$()}),e("#bookmarkList").find("li").hover(function(){e(this).find(".deleteResource").removeClass("hide")},function(){e(this).find(".deleteResource").addClass("hide")}),e("#bookmarkList").find("li .deleteResource").on("click",function(){var t=e(this).attr("data-item-id"),a=e(this).parent("li").find("span.resourceTitle").text();apprise("<p>Are you sure you want to delete this resource?</p>",{confirm:!0},function(n){n===!0&&e.post(document.URL,{ajax:1,action:"removeBookmark",itemId:t,typeId:1},function(n){if("success"!==n.message)C(n.message,!0);else{var i="'"+a+"' has been removed";C(i),e("#bookmarkList li[data-item-id="+t+"]").remove();var o="odd";e("#bookmarkList li").each(function(){e(this).removeClass("odd").removeClass("even").addClass(o),o="odd"==o?"even":"odd"})}},"json")})});var Ze=function(t){function a(e,t,a){i(e,t,a),_.exists()&&(o(),r(!0),s(!0))}function n(e){return e=e||_,e&&e.length?y=e.find(":not(.unclickable)"):null}function i(t,a,i){v=i||e("body #overlay"),g=a||e("body .unrated-downloads"),_=t||g.find(".rateable"),n(_)}function o(){_.tooltip({position:{my:"center bottom-10",at:"center top",using:function(t,a){e(this).css(t),e("<div>").addClass("tooltip-arrow").addClass(a.vertical).addClass(a.horizontal).appendTo(this)}}})}function r(e,t){if(null==t){if(null==y||y.length<1)return;t=y}e=null==e||e===!0,e?(t.on("mouseleave",d),t.on("mouseenter",c),t.on("click",u)):(t.off("mouseleave",d),t.off("mouseenter",c),t.off("click",u))}function s(e){null==g||g.length<1||(e=null==e||e===!0,e?g.on("submit",".unrated-comment-feedback",p):g.off("submit",".unrated-comment-feedback",p))}function l(e,t){Number.isInteger(e=parseInt(e))&&(w[e]=Object.assign(w[e]||{resource_id:e},t||{}))}function c(t){var a=e(this);a.parents(".rateable").length&&a.prevAll().add(a).addClass("starMaybe")}function d(t){var a=e(this);a.parents(".rateable").length&&a.prevAll().add(a).removeClass("starMaybe")}function u(t){var a=e(this),n=a.parents(".rateable");if(!(n.length<1)){var i=n.data("resource"),o=n.data("rating"),r=a.index()+1,s={elem:a};r>3?e.post("/php/ajax/saveResourceRating.php",{action:"rating",resource_id:i,rating:r,rating_id:o},m.bind(s),"json"):e.post("/php/ajax/saveResourceRating.php",{action:"returnFeedbackForm",resource_id:i,rating:r,rating_id:o},h.bind(s),"json")}}function p(t){t&&t.preventDefault();var a=e(this),n=a.prev("div.rateable"),i=a.find('[name="comment"]').val(),o={elem:a};if(i){var r=n.data("resource"),s=n.data("rating"),l=a.find('[name="rating"]').val();e.post("/php/ajax/saveResourceRating.php",{action:"rating",resource_id:r,rating:l,rating_id:s},function(t){if("success"===t.message){var n=t.comment_id;a.find('[name="ticket_id"]').val(t.ticket_id),e.post("/php/ajax/saveResourceRating.php",{action:"comment",comment:i,comment_id:n,ticket_id:a.find('[name="ticket_id"]').val(),rating:a.find('[name="rating"]').val()},f.bind(o),"json")}})}else apprise("Uh oh, no comment has been entered")}function h(t,a,n){if(!t||"undefined"==typeof t.message)return void apprise("An unexpected error has occurred! Please try again.");if("success"!==t.message)return void apprise(t.message);var i=this.elem,o=i.parents(".rateable"),s=i.prevAll().add(i);if(o.find(".starOn").addClass("starOff").removeClass("starOn"),s.removeClass("starOff starMaybe").addClass("starOn"),t.id&&o.data("rating",t.id),r(!1,o.children()),t.html&&""!==t.html){var l=e(t.html).hide();elemParentsParentElem=o.parent(),elemParentsParentElem.find(".unrated-comment-feedback").remove(),elemParentsParentElem.append(l),l.slideDown();var c=e('textarea[name="comment"]'),d=l.find('input[type="submit"]');enableDisableResourceReviewSubmitOnStart(20,t.rating,d,c,!0),enableResourceReviewSubmitBasedOnChar(20,t.rating,d,c,!0)}o.flash()}function m(t,a,n){if(!t||"undefined"==typeof t.message)return void apprise("An unexpected error has occurred! Please try again.");if("success"!==t.message)return void apprise(t.message);var i=this.elem,o=i.parents(".rateable"),s=i.prevAll().add(i);if(o.find(".starOn").addClass("starOff").removeClass("starOn"),s.removeClass("starOff starMaybe").addClass("starOn"),t.id&&o.data("rating",t.id),r(!1,o.children()),null!=t.resource_id&&l(t.resource_id,{resource_id:t.resource_id,comment_id:t.comment_id||null,comment:t.comment||null,rating:t.rating||null}),t.thanks&&""!==t.thanks){o.find(".rateable-thanks").remove();var c=e('<span class="rateable-thanks">'+t.thanks+"</span>").hide();o.after(c),c.fadeIn("fast",function(){setTimeout(function(){c.fadeOut("slow",function(){e(this).remove()})},2e3)})}o.flash()}function f(t,a,n){if(!t||"undefined"==typeof t.message)return void apprise("An unexpected error has occurred! Please try again.");if("success"!==t.message)return void apprise(t.message);var i=this.elem;if(null!=t.resource_id&&l(t.resource_id,{resource_id:t.resource_id,comment_id:t.comment_id||null,comment:t.comment||null}),t.thanks&&""!==t.thanks){var o=e('<span class="rateable-thanks">'+t.thanks+"</span>").hide();i.replaceWith(o),o.fadeIn("fast",function(){setTimeout(function(){o.fadeOut("slow",function(){e(this).remove()})},2e3)})}}t=t||{};var v=null,g=null,_=null,y=null,w={};return t.init=a,t}();e(".myDownloads .unrated-downloads").exists(function(){S()}),e("#my-downloads").length&&(e("#search-my-downloads").on("submit",function(t){t.preventDefault();var a=1,n=e(this),i=n.find('input[name="searchTerm"]').val(),o=e("#my-downloads-filter").find("option:selected").data("type");T(o,i,a)}),e(".search-downloads-icon").on("click",function(t){t.preventDefault();var a=1,n=e("#search-my-downloads"),i=n.find('input[name="searchTerm"]').val(),o=e("#my-downloads-filter").find("option:selected").data("type");T(o,i,a)}),e("#my-downloads").on("click",".pager_bar a",function(t){t.preventDefault();var a=e("#search-my-downloads").find('input[name="searchTerm"]').val(),n=e("#my-downloads-filter").find("option:selected").data("type"),i=e(this).attr("href"),o=i.match(/\d+$/);o&&(st=o[0]),e.ajax({type:"POST",url:window.location.href,data:{action:"paging",type:n,searchTerm:a,page:st},success:function(t){e("#search-my-downloads").find('input[name="searchTerm"]').val(a);var n=e("#resources-list");n.html(t),S()}})})),e(".unrated-downloads-box").on("click",".dismissable, .no-thanks",function(){createCookie("unrated_downloads","1",7)}),e("#unrated-popup-button").exists(function(){e(this).click(function(t){t.preventDefault(),e.post("/php/ajax/getUnratedDownloadsPopup.php",{},function(t){if("success"!==t.message)apprise(t.message);else if(""!=t.html){var a=e("#overlay");a.hide(),e(".generic_pop").hide(),e(".filemanager_popup").remove(),e(".unrated-downloads-box").fadeOut(function(){e(this).remove()}),a.show();var n=e(t.html);n.appendTo("body").show(),B(n),S(),he();var i=e('<div style="width: 100%; height: 507px; position: absolute; bottom: 0; left: 0; background-color: rgba(255,255,255,0.8);"><img src="'+imageAssetBase+'/images/loading.gif" class="loader" style="margin: 100px auto; top: 0; left: 0; right: 0;" /></div>');e("#unrated_popup").find(".filemanager-content").scroll(function(){var t=e(this).find(".row").length;if(!(t<10)&&t%10==0&&e(this).scrollTop()+e(this).innerHeight()>=e(this)[0].scrollHeight){var a=1;if(e("#unrated_popup .filemanager-content").data("page")?a=e("#unrated_popup .filemanager-content").data("page"):e("#unrated_popup .filemanager-content").data("page",a),a++,n.find(".filemanager-content").append(i),a>=10)return;e.post("/php/ajax/getUnratedDownloadsPopup.php",{ajax:1,page:a},function(t){if("success"!==t.message)apprise(t.message);else{if(""!==t.html){var n=e(t.html).find(".row");e("#unrated_popup .filemanager-content .unrated-downloads").append(n.hide().fadeIn().flash()),e("#unrated_popup .filemanager-content").data("page",a),S(),he()}else e("#unrated_popup .filemanager-content").data("page",10);i.delay(250).remove()}},"json")}})}else apprise("You don't have any unrated resource downloads.")},"json")})}),e(".resource-sample-pack-box").on("click",".dismiss, .button, .imageLink, .sample-taster-box",function(t){eraseCookie("sample_pack");var a=e(".resource-sample-pack-box"),n=e(this);if(n.hasClass("button")||n.hasClass("imageLink")||n.hasClass("sample-taster-box")){if("#"==n.attr("href")){t.preventDefault();var i=a.find(".slideTwo").find("a.sampleButton");if(1!==i.length)return a.find(".slideOne").slideUp(),void a.find(".slideTwo").slideDown();window.open(i[0].href,"_blank"),n=e(i[0])}if(n.hasClass("sampleButton")){var o=parseInt(n.attr("data-id")),r=readCookie("sample_pack2"),s=[];r&&(s=JSON.parse(r)),s.push(o),createCookie("sample_pack2",JSON.stringify(s),365)}a.find(".sample-tick").addClass("active"),a.delay(2500).fadeOut("slow",function(){a.remove()})}}),e(".book-club-enrolment-box").on("click",".close, .dismiss",function(e){var t=parseInt(readCookie("book_club"))||0;t+=1,createCookie("book_club",t.toString(),1)}),e("#dashy_scrolling_banner").find(".slide").length>1&&setInterval(I,5e3),e("#chooseUsername").find("form").submit(function(t){function a(t){e(".alert-error").length<1&&e("#chooseUsername").find("form").prepend(e('<div class="alert-msg alert-error" style="display:none;"></div>')),e(".alert-error").slideUp(function(){t&&(e(this).text(t),e(this).slideDown())})}t.preventDefault();var n=e("#username").val(),i=e("#password").length,o="";i&&(o=e("#password").val());var r=e("#first_name").val(),s=e("#last_name").val(),l=e("#first_name, #last_name").length,c=e("#csrf").val(),d="";do{if(!n){d="You must enter a username to continue.";break}if(n.length<6){d="Username is too small. Must be at least 6 characters.";break}if(/[^a-z0-9_\.\-]/i.test(n)){d="Username contains illegal characters. Must only contain letters, numbers and the characters dash (-), underscore (_) and full stop (.)";break}}while(!1);if(d)return void a(d);var u=e('<img src="'+imageAssetBase+'/images/loading.gif" class="loader" />'),p=e("#chooseUsername .largeButton");p.after(u),p.hide(),a("");var h={ajax:1,username:n,name:l,first_name:r,last_name:s,csrf:c};i&&(h.password=o),e.post(document.URL,h,function(e){if("success"!==e.message)a(e.message),u.remove(),p.show();else{var t=e.url?e.url:"/";window.location=t}},"json")});var et=!1;e(".premiumPricingBoxes").click(function(){if(et)return void(et=!1);et=!0;var t=e(this).find("button");t?t.trigger("click"):e(this).find("a").trigger("click")}),e("#newCurricObjectiveButton").click(function(){var t=e(this).find("span"),a=e("#newCurricObjectiveList");t.hasClass("arrowUp")?(a.slideDown(),t.removeClass("arrowUp").addClass("arrowDown")):(a.slideUp(),t.removeClass("arrowDown").addClass("arrowUp"))}),e("#newCurricMainPage").find(".mainBox, .otherBox").click(function(){var t=e(this).find("a").first().attr("href");window.location=t}),e(".fade-my-siblings-on-hover").hover(function(){e(".fade-my-siblings-on-hover").addClass("opacity-0-5"),e(this).removeClass("opacity-0-5").removeClass("my-2").addClass("my-6px").addClass("hovered")},function(){e(".fade-my-siblings-on-hover").removeClass("opacity-0-5"),e(this).addClass("my-2").removeClass("my-6px").removeClass("hovered")}),e(".hover-display-hidden-inner").hover(function(){e(this).find(".hidden-inner").toggleClass("display-lg-none")},function(){e(this).find(".hidden-inner").toggleClass("display-lg-none")}),e("#language_selector").find(".languageList").mCustomScrollbar({theme:"dark",scrollButtons:{enable:!0}});var tt=e("#language_selector a");tt.length&&tt.click(function(e){e.stopPropagation()}),e(".schoolPremiumPackages-buttons").find("a").click(function(){var t=e(this).attr("href");t=encodeURI(t),e.get("/php/ajax/alert_school_order_form_download.php",{url:t})}),e("#school_premium_form").find("#user_emails").focus(function(){var t=e(this).val(),a=e(this).attr("data-default");t==a&&(e(this).val(""),e(this).css({color:"#898989","font-style":"normal"}))}).blur(function(){var t=e(this).val(),a=e(this).attr("data-default");""==t&&(e(this).val(a),e(this).css({color:"#ccc","font-style":"italic"}))}),e("#completeRegistration").find("#username").blur(function(){function t(e){var t=new Array("."," ",'"',"!","£","$","%","^","&","*","(",")","+","=","{","}","[","]",":",";","@","'","#","~","?","/","\\","|","¬","`","<",">",",");for(x in t)if(character=t[x],e.indexOf(character)>=0)return!1;return tr}var a=e(this),n=e(this).val(),i=(e("#completeRegistration, #chooseUsername"),a.parents(".form-block")),o=i.find("span");return n.length<7?void e(this).formError("Username must be longer than 6 characters.","",function(){return a.val().length>6}):t(n)?void(n&&e.post(window.location,{username:n,ajax:1,action:"checkUsername"},function(e){e.status?a.formError(e.message,"","change"):("success"==e.message,o.html(e.message),o.css("color","green"))},"json")):void e(this).formError("Username must not contain any spaces or special characters apart from - or _","",function(){return t(a.val())})}).focus(function(){e(this).parents("#completeRegistration").find("span").html("")}),e("#completeRegistration").find("#password").blur(function(){var t=e(this),a=e(this).val();if(a.length<9)return void e(this).formError("Password must be longer than 8 characters.","",function(){return t.val().length>8})}),e("#quick_renewal_form").submit(function(t){t.preventDefault();var a=e(this);a.find(".error").remove(),a.find("button").hide(),a.find("button").after('<img src="'+imageAssetBase+'/images/loading.gif" class="loader" style="display:block;margin:0 auto;" />'),e.get("/php/ajax/sendSchoolRenewEmail.php",function(e){a.find(".loader").remove(),"success"!==e.message?(a.find("button").before('<p class="error">'+e.message+"</p>"),a.find("button").show()):a.replaceWith('<div class="schoolRenewThanks">We have received your request and one of our team will contact your school about your renewal as soon as possible.</div>')},"json")}),e(".contentBox.premiumCallToAction").find(".submitSubForm").click(function(t){t.preventDefault(),e(".pricingBox.payAnnually").find("form").submit()}),e(".pricingBox.payAnnually a.subButton").add(".contentBox.premiumCallToAction .showPopUp").click(function(e){e.preventDefault();var t={url:"/payment"};showTopUpPopUp(t)}),e(".pricingBox.topUp").find(".subButton").click(function(t){t.preventDefault();var a=e(this).parents(".pricingBox.topUp"),n=a.find('input[name="price"]:checked').val(),i=a.find("#otherAmount").val(),o={amount:n,otherAmount:i};showTopUpPopUp(o)}),e(".contentBox.premiumCallToAction").find(".topUp").click(function(e){e.preventDefault();var t={dontshowpremium:1,fromPremium:"1"};showTopUpPopUp(t)}),e("ul#typeSubMenu .deselectTypeFilter").click(function(t){t.preventDefault();var a=e(this).text();"Deselect all"==a?(e(".originalsCheckbox").prop("checked",!1),e(this).text("Select all"),e("ul#typeSubMenu .type-sub-menu").trigger("click")):(e(".originalsCheckbox").prop("checked",!0),e(this).text("Deselect all"),e("ul#typeSubMenu .type-sub-menu").trigger("click"))}),e("#typeSubMenu").on("change",".type-sub-menu input",function(t){var a=e(this).parent().attr("data-type"),n=e(this).parent().attr("data-categoryID"),i=(e("#typeCheckbox"+a).is(":checked"),e("#resources"));i.addClass("loading");var o=[];e(".originalsCheckbox").each(function(){e(this).prop("checked")&&o.push(e(this).attr("data-type"))});var r=JSON.stringify(o);e(".pager_bar").remove(),e.post("/php/ajax/filterOriginalResourcesByType.php",{refineIds:r,categoryId:n},function(e,t,a){"success"!==e.message?apprise(e.message):(i.replaceWith(e.page).removeClass("loading"),K(),document.fn.events.emit("loadedContent"));
},"json")}),e(".sortType").click(function(){var t=e(this).attr("data-type"),a=e(this).attr("data-categoryId"),n=e("#resources");n.addClass("loading"),e(".pager_bar").remove(),e.post("/php/ajax/filterOriginalResources.php",{type:t,categoryId:a},function(e,t,a){"success"!==e.message?apprise(e.message):(n.replaceWith(e.page),K(),document.fn.events.emit("loadedContent"))},"json")});var at,nt=e(".menuTab");nt.mouseenter(function(){at=setTimeout(function(){nt.addClass("no-delay")},300)}).mouseleave(function(){clearTimeout(at),nt.removeClass("no-delay")});var it=!1,ot=!1,rt=null;e("#packages-dropdown-button,#packages-dropdown").hover(function(){D(!0,e(this).attr("id"),!1)},function(){D(!1,e(this).attr("id"),!1)}),e("#premiumMiniMenu").mouseenter(function(){e(".menuTab ul, [data-submenu], .planItMenuTab").not("#premiumMiniMenu,.premium_menu,.homeLearningLinks").hide(),D(!1,"packages-dropdown",!0)}),e(".homeLearningLink.showMenu").click(function(e){e.preventDefault()}),e(".user-language").on("click, change",function(){var t=e(this),a=t.val();A(a)}),e("#language_nudge").exists(function(){e(".generic_pop").center(),e(".languagePopUpBtn").on("click",function(){var t=e(this).data("language-id");console.log(t),A(t)}),e("#messageOverlay").click(function(t){e("#language_popup_div").fadeOut(250)})}),e("#download_selector_container").mCustomScrollbar({theme:"dark",scrollButtons:{enable:!0}}),e("#download_alternate_selector_container").mCustomScrollbar({theme:"dark",scrollButtons:{enable:!0}}),e("#file_manager_popup_selector_container").mCustomScrollbar({theme:"dark",scrollButtons:{enable:!0}});var st=location.pathname,lt=st.split("/"),ct=!1;if("resource"==lt[1]&&setInterval(function(){ct&&(ct=!1,setTimeout(function(){P(),L()},500))},500),e(".disablecopypaste","input").on("copy paste",function(e){e.preventDefault()}),e("#signUpPopUp #country").change(function(){var t=e(this).val();e.post("/php/ajax/get_career_list.php",{countryId:t},function(t){e("#signUpPopUp #career").html(t)},"html")}),e("#signUpPopUp #occupation").change(function(){var t=e("#signUpPopUp .otherOccupationDiv");"0"==e(this).val()?(t.find("input").val(""),t.slideDown()):t.slideUp()}),e(".signUpBox #occupation").length>0){var dt=e(".signUpBox .otherOccupation");"0"==e(".signUpBox #occupation").val()?(dt.find("input").val(""),dt.slideDown()):dt.slideUp()}var ut;e(window).focus(function(){ut=!0}).blur(function(){ut=!1}),e("#download_link.comingSoon").click(function(t){t.preventDefault();var a=e('meta[name="twinkl-id"]').attr("content"),n=e("#overlay"),i=e(".generic_pop"),o=e("body");e.post("/php/ajax/setUpResourceAlert.php",{resourceId:a}),n.hide(),i.remove();var r='<div class="generic_pop"><span class="close"></span><h2>Notification Set Up</h2><p>We\'ll let you know as soon as this resource is available!</p><div class="popUpContents"><div class="bottomFormHolder"><button class="button pink ok">OK</button></div><div class="clear"></div></div></div>';n.show(),o.append(r),i=e(".generic_pop"),B(i),i.find(".close, .ok").click(function(){n.hide(),i.remove()})});if(e(".loggedInUser").find(".notification-icon").length){var pt=e(".loggedInUser").find(".notification-icon").data("notification-count");pt>0&&"("!=document.title.substring(0,1)&&(document.title="("+pt+") "+document.title)}var ht=!1;if(e(".newNotify #notifications").on("mouseleave",".notification",function(){O()}),e("#promo-banner").length){var mt=e("#promo-banner"),ft=mt.data("short");mt.on("click",function(e){var t=e.target,a="dismiss";"dismissBanner"==t.id?(e.preventDefault(),mt.remove(),createCookie(ft,"true",30),createCookie("promoBanner","true",1)):a=location.pathname.split("/")[1];var n={name:"view_promotion",parameters:{items:[{creative_name:"TopBanner",item_name:ft,item_category:a}]}};document.twinkl.sendGA4Event(n)})}if(e("#notifications").length){var vt=e(".newNotify-sub"),gt=!1,_t=null;e("#header .newNotify").hover(function(){_t=setTimeout(E,500)},function(){_t&&clearTimeout(_t)}),e(".newNotify-sub").on("mouseleave",function(){vt[0].setAttribute("data-show",0)}),e("body").hasClass("is-mobile-device")&&(e(".newNotify").on("click",function(){e(this).toggleClass("open"),e(this).find("#notifications").toggleClass("open slide-in-right"),e(".menu-overlay").show()}),e(".newNotify").on("click",".close-btn, .menu-overlay",function(){O()})),vt.on("click",".notification a",function(){var t=e(this).parent().data("notification");""!=t&&e.post("/notifications/handler",{action:"track",notification_id:t})}),vt.on("click","#more-notifications",function(e){e.preventDefault(),vt.mCustomScrollbar("scrollTo","-=261")})}if(e("#downloadVersionBox").on("click",".altButton",function(t){t.preventDefault();var a=e(this),n=(a.attr("data-filename"),a.attr("data-all")),i=a.attr("data-resource-id"),o=a.attr("data-alt-id"),r=o&&"main"!=o?i+"-"+o:i;e("#download_selector > li").removeClass("selected"),e(this).parent().addClass("selected");var s=a.attr("data-allowed");if("1"==s){var l=e("#download_link"),c=a.attr("data-button-text");l.text(c),"Buy now or subscribe"==c?(l.attr("href","/premium"),l.attr("target","")):"1"==n?(l.attr("href","/download-alt-pack/"+i),l.attr("target","_blank")):(l.attr("href","/download/"+r),l.attr("target","_blank"))}}),"/order-premium-for-your-school"==location.pathname)var yt=setInterval(function(){e.get("/php/ajax/ping.php").fail(function(){clearInterval(yt)})},9e5);var wt=e("#tldBoxContainer");wt.length&&e("#header").prepend(wt);var bt=e("#infoBoxDivContainer");if(bt.length&&"countryPicker"!==bt.data("type")&&(e("#infoBoxDivContainer").fadeIn(),e("#messageOverlay").css({display:"block"}),"emailCheck"===bt.data("type")&&e("#overlayNotDismissible").css({display:"block"})),e("#messageOverlay").on("touchstart",function(){var t=e("#infoBoxDivContainer"),a=e("#messageOverlay");t.remove(),a.remove()}),"#showcredit"==window.location.hash){var kt=e("#infoBoxDivContainer"),xt=e("#messageOverlay"),Pe=e("body");kt.remove(),xt.remove();var Ct='<div id="messageOverlay"></div><div id="infoBoxDivContainer" data-info-id="0"><div id="infoBoxDiv" style="top:56px;left:420px;width:500px"><div class="content"><h2>We\'ve topped up your credit!</h2></div><div class="bottomFormHolder"><button class="button pink gotIt">Got it!</button></div><div id="infoBoxArrow" class="top" style="left:400px"></div></div></div>';Pe.prepend(Ct),kt.fadeIn(),xt.css({display:"block"})}e(document).on("click","#infoBoxDiv .disableSetCountryByTldToggle",function(t){var a=e(".toggleSwitchCountryByTldInput"),n=a.prop("checked",!a.is(":checked")).is(":checked");e(".tldOverwritePreferences").attr("data-disable-tld-set-country",n?1:0),createCookie("disableSetCountryByTLD",n?1:0,30)}),e(document).on("click","#infoBoxDiv .disableCountryRedirectToggle",function(t){var a=e(".toggleSwitchRedirectInput"),n=a.prop("checked",!a.is(":checked")).is(":checked");e(".tldOverwritePreferences").attr("data-disable-country-redirect",n?1:0),createCookie("disableRedirectOnCountrySelection",n?1:0,30)}),e(document).on("click","#infoBoxDiv .gotIt, #messageOverlay",function(t){var a=e("#infoBoxDiv"),n=e("#infoBoxDivContainer"),i=e("#messageOverlay"),o=n.attr("data-info-id");if(o)e.post("/php/ajax/set_info_box_cookie.php",{infoId:o}),n.fadeOut(),i.fadeOut();else if("messageOverlay"!=e(this).attr("id")){var r={border:"1px solid #D3D3D3"},s={border:"1px solid #FF0000"},l=e("#supply"),c=e("#career"),d=e("#county"),u=e("#country"),p=e("#user_dob"),h=e("#careerOtherCheck"),m=e("#language_field").find(".user-language"),f=e("#emailCheck"),v=e("#email_field"),g=e("#infoBoxDiv #first_name"),_=e("#passwordCheck"),y=e("#special"),w=a.find("#intl_school"),b=p.val(),k=u.val(),x=d.val(),C=c.val(),$=e("#careerOtherCheck").val(),S=m.val(),T=e("#mailinglistCheckBox").is(":checked")?1:0,I=g.val(),B=f.val(),D=f.attr("data-email"),A=_.val(),O=!0,E=e("#infoBoxDivContainer").find(".detailsUpdate").data("signed-in"),P=y.val(),j=w.prop("checked")?1:0;u.css(r),u.next().find(".select2-selection").css(r),k||(u.css(s),u.next().find(".select2-selection").css(s),O=!1,u.next().find(".select2-selection").click(function(){e(this).css(r)})),c.css(r),c.next().find(".select2-selection").css(r),h.css(r),("chooseCareer"==C||0==C&&""==$&&1==E||""===C)&&(c.css(s),c.next().find(".select2-selection").css(s),h.css(s),O=!1,c.next().find(".select2-selection").click(function(){e(this).css(r)})),d.css(r),d.next().find(".select2-selection").css(r),"chooseCounty"==x&&"1"!=e("#county").attr("noshow")&&(d.css(s),d.next().find(".select2-selection").css(s),O=!1,d.next().find(".select2-selection").click(function(){e(this).css(r)})),"1"==d.attr("noshow")&&(x=0);var L="";if(l.length){L=l.val(),l.css(r),l.next().find(".select2-selection").css(r);var R=document.getElementById("supply_field");""==L&&"block"===window.getComputedStyle(R).display&&(l.css(s),l.next().find(".select2-selection").css(s),O=!1,l.next().find(".select2-selection").click(function(){e(this).css(r)}))}if(f.css(r),v.find(".error").hide(),f.length&&B!=D&&!isEmailValid(B)){f.css(s);var M="The email address you have entered is not valid!";v.find(".error").html(M).show(),O=!1}g.length&&(g.css(r),I||(g.css(s),O=!1));var F={country_id:k,county_id:x,career_id:C,career_other:$,language_id:S,update_info:1,mailingCheck:T,email:B,special:P,intl_school:j,password:A,first_name:I,user_dob:b,supply:L};if(e("#user_short_details").length&&(F.user_short_details=e("#user_short_details").val()),e("#additionalAreaSelect").length){var U=e("#additionalAreaSelect"),q=U.val();U.css(r);var H=c.find("option:selected").html().toLowerCase().indexOf("parent")!==-1;""!==q||H||(U.css(s),O=!1),F.additional_id=q}if(!O)return;var N=e('<img src="'+imageAssetBase+'/images/loading.gif" style="display:block;margin:15px auto;">'),W=e("#infoBoxDiv").find("button").hide().after(N);e.post("/php/ajax/saveUserCountry.php",F,function(t){t.email?(W.show(),N.remove(),e("#emailCheck").css(s),e("#email_field").find(".error").html(t.email).show()):t.password?(W.show(),N.remove(),e("#passwordCheck").css(s),e("#password_field").find(".error").html(t.password).show()):(t.flag&&e("#countryFlag, #countryFlagLink img.flag-icon").attr("src",imageAssetBase+"/images/flag/"+t.flag),""!==t.redirectUrl?(e("#infoBoxDivContainer").remove(),e("#messageOverlay").remove(),window.open(t.redirectUrl,"_blank").focus()):location.reload())},"json")}else n.fadeOut(),i.fadeOut()}),e("#share").find(".like").hover(function(){e(this).find("button").hasClass("unlike")||e("#share .like button").css("background",'url("'+imageAssetBase+'/images/social/unlike.png")')},function(){e(this).find("button").hasClass("unlike")||e("#share .like button").css("background",'url("'+imageAssetBase+'/images/social/like.png")')}),e("#share").find(".like").click(function(){e(this).find("button").trigger("click")}),e("#tabbed_content").length>0&&setTimeout(function(){M(e(".commentsList"))},1e3);var $t;e("#front_scrolling_banner").find("a").length>1&&($t=setInterval(F,5e3)),e("#front_scrolling_banner").find(".buttonContainer div").click(function(){if(clearInterval($t),e(this).hasClass("buttonActive"))$t=setInterval(F,5e3);else{var t=e(this).attr("data-position");F(t),$t=setInterval(F,5e3)}}),e("#search_container, #choose-package, .resource-page").exists(function(){initBackToTop()}),e(".vb-carousel").exists(function(){var t=e(this),a=t.find(".vb-carousel-inner"),n=0,i=0,o=0,r=t.find(".vb-carousel-item");r.each(function(){var t=parseInt(e(this).outerWidth(!0));i+=t,o=t}),t.find(".vb-carousel-item:first").addClass("active"),i>parseInt(a.outerWidth(!0))&&t.addClass("has-next"),e(".vb-carousel-prev").click(function(){n+=o,n>0&&(n=0),a.css("left",n+"px"),parseInt(a.css("left"))<=0&&a.parents(".vb-carousel").removeClass("has-prev")}),e(".vb-carousel-next").click(function(){if(Math.abs(n)+a.outerWidth(!0)+o>i){var e=i-a.outerWidth(!0)+20;a.css("left",-e+"px"),t.removeClass("has-next")}else n-=o,t.addClass("has-prev"),a.css("left",n+"px")})}),e(".vb-debate").exists(function(){var t=e(this);e(".beyondDebateLogo").hide(),e(".debateTitle").css({"text-align":"left"}),t.on("click",".js-fullscreen",function(a){e(".beyondPopUp").hide(),e(".beyondDebateLogo").show(),a.preventDefault(),e.support.fullscreen&&(e(".vb-debate").fullScreen({background:"",overflow:"none",callback:function(){e(".vb-debate.fullScreen").length?(t.css({"background-image":"","background-color":"#333366"}),e(".debateTitle").css({left:"25%"})):(e(".js-fullscreen").text("Make question fullscreen"),e(".daily-resources").show(),e(".vb-debate-button").removeClass("d-none").addClass("d-flex"),e(".vb-debate-intro").show(),e(".vb-debate-logo-small").removeClass("d-none").addClass("d-flex"),e(".vb-debate-inner").css("text-align","left"),e(".vb-debate-logo-large").hide(),e(".beyondPopUp").show(),t.css({"background-image":'url("'+imageAssetBase+'/images/beyond-debate-banner.png")',"background-color":""}),e(".debateTitle").css({left:""}),e(".beyondDebateLogo").hide())}}),e(".daily-resources").hide(),e(".vb-debate-button").removeClass("d-flex").addClass("d-none"),e(".vb-debate-intro").hide(),e(".vb-debate-logo-small").removeClass("d-flex").addClass("d-none"),e(".vb-debate-inner").css("text-align","center"),e(".vb-debate-logo-large").show(),t.find(".js-fullscreen").text("Exit Fullscreen"))})}),e(document).ready(function(){e("#daily_debate").on("click",".pager_bar a",function(t){t.preventDefault();var a=(e(this),e(this).attr("href")),n=a.split("/"),i=n.length,o=n[i-1];if("1"==o){var r=a.length;a=a.substring(0,r-2)}var s=e(".debate-list");return a==window.location.pathname?void smoothScrollTo(".debate-list"):void e.post(a,{},function(t){if("success"!==t.message)apprise(t.message);else{var n=e(t.html);n.css("opacity","0"),smoothScrollTo(".debate-list"),e(".pager_bar").fadeOut("fast",function(){e(this).remove()}),s.animate({opacity:"0"},200,function(){s.replaceWith(t.html).animate({opacity:"1"},200)}),e.support.history&&history.pushState("","",a);var i=a.split("/"),o=e(document).find("title").text(),r=o.indexOf(" - Page "),l=o.substring(0,r<0?o.length:r);"daily-debate"===i[i.length-1]||(l+=" - Page "+i[i.length-1]),document.title=l}})})}),e(document).ready(function(){e("#daily_debate").exists()&&e("#daily_debate").on("click",".js-fullscreen",function(t){t.preventDefault(),e.support.fullscreen?(e(this).parents(".row").find(".debate-title").addClass("col-12").addClass("fullScreenTitle"),e(this).parents(".row").fullScreen({background:"",callback:function(){e(".fullScreen").length?e(".fullScreen").append("<a href='#'' class='fixed-top-right js-fullscreen tmp-fullscreen'>Exit Fullscreen</a>"):(e(".debate-title").removeClass("col-12").removeClass("fullScreenTitle"),e(".js-fullscreen").text("Fullscreen"),e(".tmp-fullscreen").remove(),e(".col-3").fadeIn("fast"))}}),e(".daily-resources").fadeOut("fast"),e("#daily_debate").find(".js-fullscreen").text("Exit Fullscreen")):console.log("Error!")})}),e("#vacancies_map").exists(function(){e(".vacancies_world_map").exists(function(){e("img#worldmap").imageMapResize(),e(".vacancies_map_areas span").hover(function(t){var a=e(this).attr("alt");"UK"==a?e(".vacancy_map_uk").show():e(".vacancy_map_aus").show()},function(t){e(".vacancy_map_uk").hide(),e(".vacancy_map_aus").hide();e(this).attr("alt");e(".map_hoverPoint").hover(function(){e(this).show()},function(){e(this).hide()})})})}),e("#careers-recruitment-video").exists(function(){var e=cloudinary.Cloudinary["new"]({cloud_name:"tw1nv",secure:!0}),t=document.querySelector("#careers-recruitment-video");e.videoPlayer(t,{fluid:!0,controls:!0})}),e("#vacancies").find(".tabs").exists(function(){q()}),e("#originals").find(".tabs-new").exists(function(){z()}),e(".booklist_page").find(".book-list-filter-cta").exists(function(){U()}),e(".benefit-list").exists(function(){e(".benefit-list").find(".benefit-wrap").on("mouseover",function(t){e(this).addClass("benefit-wrapped-hovered"),e(this).find(".benefit-item").addClass("benefit-hovered"),e(this).find(".benefit-item").addClass("transform-translate-0-minus-40px"),e(this).find(".benefit-item img").removeClass("filter-grayscale-1")}),e(".benefit-list").find(".benefit-wrap").on("mouseout",function(t){e(this).removeClass("benefit-wrapped-hovered"),e(this).find(".benefit-item").removeClass("benefit-hovered"),e(this).find(".benefit-item").removeClass("transform-translate-0-minus-40px"),e(this).find(".benefit-item img").addClass("filter-grayscale-1")})}),e(".show_vacancies").click(function(){e("html,body").animate({scrollTop:e(".tabs-country-vacancies").offset().top-120},1500)});var St=[];if(e("#vacancy-contact-form").exists(function(){var t={};1==e("#showPreferencesPopUp").val()&&(t={callback:H}),e("#vacancy-contact-form").formHandler(t)}),e("#vacancies-search").exists(function(t){e("#vacancies_search_form").on("submit",function(t){t.preventDefault();var a=e("#vacancies_phrase").val();e.post("/careers/search",{search:a},function(t){e(".vacancies_search_results").html(t),e(".vacancy-tab").each(function(t){e(this).removeClass("vacancy-selected")}),e(".vacancies_search_results_tab").html("Search Results"),e(".vacancies_search_results_tab").show(),e('.vacancy-tab[data-filter="search"]').trigger("click")},"html")})}),e(".careers_page").exists(function(){function t(t){e(t).hasClass("country-selected")?(e(t).find("span i").removeClass("fa-angle-up").html(n),e(t).removeClass("country-selected")):(e(".category_summary").each(function(a){e(t).removeClass("country-selected"),e(t).find("span i").removeClass("fa-angle-up").html(n),e(t).parent().removeAttr("open")}),e(t).addClass("country-selected"),e(t).find("span i").removeClass("fa-angle-down").html(a))}var a='<svg class="w-0-75rem" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M177 159.7l136 136c9.4 9.4 9.4 24.6 0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9 0L160 255.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9 0L7 329.7c-9.4-9.4-9.4-24.6 0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1z"/></svg>',n='<svg class="w-0-75rem" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M143 352.3L7 216.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.2 9.4-24.4 9.4-33.8 0z"/></svg>',i=window.location.hash;if(""!=i){var o=i.split("#"),r=unescape(o[1]),s=e('.country[data-country="'+r+'"]');if(2==o.length){window.history.pushState("","","careers"),e('.country:not([data-country="'+r+'"])').removeClass("country-selected").addClass("hide-country-vacancies"),s.removeClass("hide-country-vacancies"),e('.vacancy-tab:not([data-filter="'+r+'"])').removeClass("vacancy-selected"),e('.vacancy-tab[data-filter="'+r+'"]').addClass("vacancy-selected");var l="#country_anchor"}if(3==o.length){var c=o[2],l="#"+r+"-"+c,d='.category_summary[data-vacancy-category="'+r+"-"+c+'"]';window.history.pushState("","","careers"),e('.country:not([data-country="'+r+'"])').removeClass("country-selected").addClass("hide-country-vacancies"),s.removeClass("hide-country-vacancies"),s.find(d).addClass("country-selected"),s.find(d).find("span i").removeClass("fa-angle-down").html(a),s.find(d).parent().attr("open",!0),e('.vacancy-tab:not([data-filter="'+r+'"])').removeClass("vacancy-selected"),e('.vacancy-tab[data-filter="'+r+'"]').addClass("vacancy-selected")}e(l).exists(function(){e("html,body").animate({scrollTop:e(l).offset().top-30},1500)})}e(".tabs-country-vacancies").find(".vacancies_search_results_tab").hide(),e(".vacancies_search_results").hide(),e(".vacancies_search_results").find(".country").addClass("hide-country-vacancies"),e(".careers_page").find(".category_summary").on("click",function(a){t(e(this))}),e(".vacancies_search_results").on("click",function(a){var n=e(this).find(".category_summary");t(n)}),e(".tabs-country-vacancies").find(".tabs span").on("click",function(t){var a=e(this).attr("data-filter");e(".vacancy-tab").each(function(t){e(this).removeClass("vacancy-selected")}),e(this).addClass("vacancy-selected"),t.preventDefault(),e(".country").each(function(t){e(this).hasClass("hide-country-vacancies")&&e(this).removeClass("hide-country-vacancies")}),"search"==a&&e(".vacancies_search_results").show(),e('.country:not([data-country="'+a+'"])').addClass("hide-country-vacancies")})}),e(document).on("click",".vacancy-checkbox",function(t){var a=e(".vacancy-checkbox:checked").length;if(a>3){e(this).prop("checked",!1);var n=e('<div title="Warning!">You can only select 3 preferences</div>');return void n.dialog({draggable:!1,modal:!0,resizable:!1})}}),e(".updateMailingVacanciesCategories").on("click",function(){H()}),e(".cin-form").length){e(".cinBookOffer").length&&(e(".cinBookOffer").center().css({top:0}),e(window).resize(function(){e(".cinBookOffer").center().css({top:0})}).resize());var Tt=!1;e("#teachmeet_address_line_1").keypress(function(){0==Tt&&(e("#submitForm").prop("disabled",!1),e("#submitForm").removeClass("disabled-cta").addClass("green"))}),e(document).on("submit",".cin-form",function(t){t.preventDefault();var a=e(".cin-form").find("form"),n=a.attr("action"),i=a.serializeArray();e.post(n,i,function(t){"success"==t.message&&(e(window).scrollTop(e(".cin-form").offset().top),e(".cinBookOffer").length?(e(".cinBookOffer").html(t.html),document.body.scrollTop=document.documentElement.scrollTop=0,e(".cinBookOffer").center().css({top:0})):e(".cin-form").html(t.html))},"json").error(function(e,t,n){if(400===e.status){var i=JSON.parse(e.responseText);i.message&&a.formError(i.message);for(var o in i.errors)a.find('[name="'+o+'"]').formError(i.errors[o],"","change")}})})}if(e("#cin").length&&e("html, body").animate({scrollTop:e(".vb-page").first().offset().top},500),e("#cinheader").length&&e("html, body").animate({scrollTop:e("#cinheader").first().offset().top},500),e("#cin").length){e("#cintypes").hide();var It=JSON.parse(nt);e(this).remove("cin-selected"),e("#cin .tabs-new li a").click(function(t){e("#cin .tabs-new li a").removeClass("cin-selected"),e(this).addClass("cin-selected");var a=e(this).attr("data-filtername");t.preventDefault(),e("#subcategory-title").html("All Types");for(var n=[],i=0;i<It.length;i++){if(It[i].id==a)var o=It[i].menu_title;It[i].parent_id==a&&n.push(It[i].id)}e("#category-title").html(o),"all"==a?(e(".individual-resource").show(),e("#category-title").html("All")):(e(".individual-resource").hide(),e(".individual-resource").each(function(t){var i=e(this).attr("data-category"),o=i.split(",");e.inArray(a,o)!==-1&&e(this).show();for(var r=0;r<o.length;r++)e.inArray(o[r],n)!==-1&&e(this).show()}));var r="",s=!0;n.length<2&&(s=!1);for(var l=0;l<n.length;l++)for(var c=0;c<It.length;c++)It[c].id==n[l]&&(r+='<li class="main-origin-tab" data-filter="index" data-filtername="'+It[c].id+'"><a class="dropdown-link " data-filtername="'+It[c].id+'" href="resources/children-in-need">'+It[c].menu_title+"</a></li>");e("#cintypes").hide(),s&&("all"!=a?e("#cintypes").show():e("#cintypes").hide()),e(".typeSubMenu").html(r),e("#cintypes .tabs-new li a").click(function(t){var a=e(this).attr("data-filtername");e("#cintypes .tabs-new li a").removeClass("cin-selected"),e(this).addClass("cin-selected"),t.preventDefault();for(var n=[],i=0;i<It.length;i++){if(It[i].id==a)var o=It[i].menu_title;It[i].parent_id==a&&n.push(It[i].id)}e("#subcategory-title").html(o),"all"==a?e(".individual-resource").show():(e(".individual-resource").hide(),e(".individual-resource").each(function(t){for(var n=e(this).attr("data-category"),i=n.split(","),o=0;o<i.length;o++)e.inArray(a,i)!==-1&&e(this).show()}))})})}if(e(".vb-page-partnership-page").length&&(e(window).resize(function(){W()}),W(),N()),!(e("#create_page").length||e(".homepage-section").length||e("#vacancies").length||e("#illustration-page").length||e(".is-mobile-device").length||e(".payment_page").length||e("#dropInNewMethod").length)){e(document).tooltip({position:{my:"left bottom-10",at:"left top",using:function(t,a){"left"===a.horizontal&&a.target.left-a.target.width/2+a.element.width>window.innerWidth&&(a.horizontal="right"),e(this).css(t),e("<div>").addClass("tooltip-arrow").addClass(a.vertical).addClass(a.horizontal).appendTo(this)}}}),e(".create_fav").tooltip({position:{my:"center bottom-10",at:"center top",using:function(t,a){e(this).css(t),e("<div>").addClass("tooltip-arrow").addClass("tooltip-arrow-small").addClass(a.vertical).addClass(a.horizontal).appendTo(this)}}});var Bt="",Dt="";e(window).width()>=768?(Bt="center bottom-80",Dt="right+70 top"):(Bt="center bottom-70",Dt="right+85 top"),e(".twinkl-header-logo").closest("a").tooltip({position:{my:Bt,at:Dt,using:function(t,a){e(this).css(t),e("<div>").addClass("tooltip-arrow").addClass("tooltip-arrow-small").addClass(a.vertical).addClass(a.horizontal).appendTo(this)}}}),e(".resourceHover").tooltip({disabled:!0}),setTimeout(function(){e(".shareaholic-ui li").tooltip({disabled:!0})},1e3),e("#youll_love_resource_box").tooltip({disabled:!0}),e('[data-test-id="ChatWidgetButton-iframe"]').tooltip({disabled:!0}),e(".newForYouResource").tooltip({disabled:!0})}if(e(".booklist_page").exists(function(){e(".booklist_keystage_slider").find(".tabs span").on("click",function(t){var a=e(this).attr("data-filter");e(".originals").each(function(t){e(this).hasClass("hidden")&&e(this).removeClass("hidden")}),e('.originals:not([data-keystage="'+a+'"])').addClass("hidden")})}),e("[data-slide-toggle]").on("click",function(t){t.preventDefault(),target=e(this).data("slide-toggle"),e(target).slideToggle()}),e("#book_club").exists(function(){e("#book_club_opt_out").on("click",function(t){t.preventDefault();var a=e("#book_club_delivery_form").find(".address").prop("disabled",!0);e.post(window.location,{action:"optout"},function(e){"success"!==e.message?apprise(e.message):(a.removeAttr("data-enrolled"),a.slideUp("fast"),window.location.reload())},"json")}),e("#book_club_opt_in").on("click",function(t){t.preventDefault(),e.post(window.location,{action:"optin"},function(e){"success"!==e.message?apprise(e.message):window.location.reload()},"json")}),e("#book_club_delivery_form").on("click","#confirm_address",function(t){t.preventDefault();var a="",n=e(this).parents("form"),i=0;if(n.data("enrolled")||(i=1),e("#address_first_name").length&&!e("#address_first_name").val()&&(a+="<li>First name</li>"),e("#address_last_name").length&&!e("#address_last_name").val()&&(a+="<li>Last name</li>"),e("#address_line_1").val()||(a+="<li>Address line 1</li>"),e("#address_line_2").val()||(a+="<li>Address line 2</li>"),e("#address_city").val()||(a+="<li>City</li>"),e("#address_postcode").val()||(a+="<li>Postcode</li>"),e("#address_telephone").length&&!e("#address_telephone").val()&&(a+="<li>Telephone number</li>"),e("#address_terms").length&&!e("#address_terms:checked").length&&(a+="<li>Terms and Conditions</li>"),""!=a)a="<p>Sorry, you missed out one of the following...</p>\n<ul>\n"+a+"</ul>\n",apprise(a);else{new_address_first_name=e("#address_first_name").val(),new_address_last_name=e("#address_last_name").val(),new_address_line_1=e("#address_line_1").val(),new_address_line_2=e("#address_line_2").val(),new_address_city=e("#address_city").val(),new_address_county_id=e("#address_county_id").val(),new_address_county=e("#address_county_id > option:selected").text(),new_address_postcode=e("#address_postcode").val(),new_address_country_id=e("#address_country_id").val(),new_address_telephone=e("#address_telephone").val();var o=e('<div class="inline-loader"><img src="'+imageAssetBase+'/images/loading.gif" alt="Please wait..." class="loader" /> <span>Saving your address...</span></div>');n.find("h2").append(o),n.find(".address").prop("disabled",!0),e.post("/php/ajax/saveUserDeliveryAddress.php",{address_first_name:new_address_first_name,address_last_name:new_address_last_name,address_line_1:new_address_line_1,address_line_2:new_address_line_2,address_city:new_address_city,address_county_id:new_address_county_id,address_postcode:new_address_postcode,address_country_id:new_address_country_id,address_telephone:new_address_telephone,address_only:1,book_club_enrol:i},function(e){"success"!==e.message?(apprise(e.message),op,o.remove(),n.find(".address").prop("disabled",!1)):(o.remove(),window.location.reload(),n.removeAttr("data-enrolled"))},"json")}})}),e("#newsroom-story .newsroom-story-header").exists(function(){e(window).on("scroll",function(){e(this).scrollTop()>60?(e(".newsroom-scroll-share-header").show(),e(".newsroom-scroll-share-header").addClass("newsroom-header-sticky")):(e(".newsroom-scroll-share-header").hide(),e(".newsroom-scroll-share-header").removeClass("newsroom-header-sticky"))})}),e("#newsroom-story, #newsroom-index").exists(function(){var t=!1,a=null;e(".no-js").removeClass("no-js"),e("#newsroom-index").on("click",".newsroom-load-more-button",function(t){t.preventDefault();var a=e(this),n=parseInt(a.data("page")),i=a.data("ks");n+=1,e.post(a.attr("href")+n,{action:"showMoreStories",ks:i},function(t){"success"==t.message&&(e(".newsroom-stories").append(t.stories),0==t.loadMore?a.remove():a.data("page",n))},"json")}),e("a.newsroom-share").on("click",function(e){e.preventDefault()}),e("#newsroom-index").on("click",".imagine-stage-toggle",function(t){t.preventDefault();var a=e(this).val(),n=e(this).data("href"),i=e(this).data("page");""==i&&(i=1),e.post(n+i,{action:"showStoriesByKeystages",ks:a},function(t){e(".newsroom-extra-stories").remove(),e("#newsroom-index").html(t.html),e(".no-js").removeClass("no-js"),e("#newsroom-nav-menu nav ul li a:not(:only-child)").click(function(t){e(this).siblings(".nav-dropdown").toggle(),e("#newsroom-nav-menu .nav-dropdown").not(e(this).siblings()).hide(),t.stopPropagation()}),e("html").click(function(){e("#newsroom-nav-menu .nav-dropdown").hide()}),e("#newsroom-nav-menu #nav-toggle").click(function(){e("#newsroom-nav-menu nav ul").slideToggle()}),e("#newsroom-nav-menu #nav-toggle").on("click",function(){this.classList.toggle("active")})},"json")}),"function"==typeof e().tooltip&&(e(".newsroom-alert.newsroom-tooltip").tooltip({tooltipClass:"newsroom-alert-tooltip-popup",position:{my:"center top+15",at:"center bottom"}}),e(".newsroom-glossary-tooltip.newsroom-tooltip").tooltip({tooltipClass:"newsroom-glossary-tooltip-popup",position:{my:"center top+15",at:"center bottom"}})),e("body").on("click",".newsroom-fullscreen",function(n){function i(){a.removeClass("inpage-fullscreen"),e("#header").show(),e("body").css("overflow","initial")}function o(){e("body").off("keydown"),e("body").on("keydown",function(t){27==t.which&&(i(),e("body").off("keydown"))}),a.addClass("inpage-fullscreen"),e("#header").hide(),e("body").css("overflow","hidden")}a=e(this).closest("div");var r=a.css("background-color");n.preventDefault(),e.support.fullscreen?a.fullScreen(null,{use_tmp_div:!1,use_background_colour:r}):a.hasClass("inpage-fullscreen")?i():o(),t=!t})}),e("#newsroom-story").exists(function(){e("body").on("change",".imagine-stage-toggle",function(t){t.preventDefault();var a=window.location.href+"/"+e(this).val();e.post(a,function(t,a,n){200!==n.status?alert("Unable to load content"):(e(".newsroom-story").css({opacity:0}).html(t.html).animate({opacity:1},"fast"),"function"==typeof e().tooltip&&(e(".newsroom-alert.newsroom-tooltip").tooltip({tooltipClass:"newsroom-alert-tooltip-popup",position:{my:"center top+15",at:"center bottom"}}),e(".newsroom-glossary-tooltip.newsroom-tooltip").tooltip({tooltipClass:"newsroom-glossary-tooltip-popup",position:{my:"center top+15",at:"center bottom"}}),document.fn.events.emit("loadedContent")))})})}),e(".user-dashy").length){var At=e(".user-dashy");At.find(".collection").on("click",function(t){t.preventDefault(),e(this).toggleClass("open"),e(".collection-list").toggle()}),At.find(".userDash-parent").on("click",function(t){t.preventDefault(),e(this).toggleClass("open"),e(this).next(".userDash-sub").toggle()})}if(e("#user-menu-burger").length){e(".header-dashy .burger-button").on("click",Y);var Ot=!1;e("#user-menu-burger").on("click",function(){Ot||(Ot=!0,At.find(".user-dashy-item img").each(function(){e(this).attr("src",e(this).data("imgSrc"))})),e(".header-dashy").show(),je.show(),
je.off("click").on("click",Y)})}e("#imagine").exists(function(){function a(t,a,n){var t=t,a=a,n=n||"";e.post("/imagine.php",{action:"getDay",day:t,stage:a,topic:n},function(a){if("success"!=a.message)apprise(a.message);else{e(".imagine-day-content").animate({opacity:0},200,function(){e(this).html(a.html).animate({opacity:1},200)});var n=a.url,i=window.location.href,o=i.split("//"),r=o[1],s=r.split("/");3==s.length?s.push(n):4==s.length&&(s[s.length-1]=n);var l=s.join("/"),c=[o[0],l];l=c.join("//"),window.history.pushState("","",l),e(".imagineSubImage").each(function(t,a){e(this).removeClass("selected")}),e(".imagineSubImage[data-day ="+t+"]").addClass("selected")}},"json")}function n(t,a,n){var t=t,a=a;e.post("/imagine.php",{action:"updateImaginePreviewBar",stage:t,week:a,day:n},function(t){if("success"!=t.message)apprise(t.message);else{var a=t.html;e(".imagine-main-block").find(".panel_container").html(a),e(".imagine-main-wrapper").hover(function(){e(".imagine-preview").stop(!0,!0).slideDown(),e(".imagine-controls:hidden").fadeIn("slow")},function(){e(".imagine-preview").stop(!0,!0).slideUp(),e(".imagine-controls:visible").fadeOut("slow")}),o()}},"json")}function i(t,a,n,i){var t=t,a=a,n=n,i=i;e.post("/imagine.php",{action:"getWeek",week:t,stage:a,title:n,topic:i},function(t){"success"!=t.message?apprise(t.message):e(".imagine-week-content").animate({opacity:0},200,function(){e(this).html(t.html).animate({opacity:1},200,function(){e(".imagine-topics").exists(function(){new Masonry(".imagine-topics",{columnWidth:480,itemSelector:".imagine-topic-wrapper"})})})})},"json")}function o(){var t=e(".js-download"),a=e("#imagine-main").css("background-image").replace("url(","").replace(")","").replace(/\"/gi,""),n=e(".imagine-topic-web h2").text().toLowerCase().replace(" ","-");n+="-"+e(".imagine-day-content h1").text().toLowerCase().replace(" ","-")+".jpg",t.attr("href",a),t.attr("download",n)}function r(e){var t=e,a=window.location.href,n=a.split("//"),i=n[1],o=i.split("/");if(o.length>=3){var r=["ks1","ks2"],s=0;for(s=0;s<r.length;s++)if(o[2].indexOf("-"+r[s])!==-1){readCookie("imagineStage");if(r[s]!==t){o[2]=o[2].replace("-"+r[s],"-"+e);break}}var l=o.join("/");n[1]=l;var c=n.join("//");window.history.pushState("","",c)}}function s(){xOffset=15,yOffset=30;var t=e(document).width(),a=e(document).height(),n=function(n){var i=e(".imagine-topic-web-preview"),o=xOffset+i.width(),r=yOffset+i.height();o=Math.min(o+n.pageX,t),r=Math.min(r+n.pageY,a),i.css("top",r-i.height()+"px").css("left",o-i.width()+"px")};e(".imagine-topic-web").find(".areas div").hover(function(i){t=e(document).width(),a=e(document).height();for(var o=e(this).css("background-color"),r="",s=e(this).attr("class").split(" "),l=0;l<s.length;l++)"long"!=s[l]&&(r=s[l],r=topicContent[s[l]]);0==r.length&&(r="<em>Preview coming soon!</em>"),e(this).addClass("hovered"),e(".imagine-topic-web .areas div").not(".hovered").stop(!0).animate({opacity:.5},100),this.t=this.title,this.title="";var c=e("<div class='imagine-topic-web-preview'>"+r+"</div>");c.css("border-color",o),e("body").append(c),n(i),e(".imagine-topic-web-preview").fadeIn("fast")},function(){e(".imagine-topic-web-preview").remove(),e(".imagine-topic-web .areas div").not(".hovered").animate({opacity:1},200),e(this).removeClass("hovered")}).mousemove(n)}var l,c=e("#imagine"),d=0;e(document).ready(function(){s()}),e(".imagine-see-more").hover(function(){e(".imagine-collection-tab").show(),e(".side-nav-panel li").first().trigger("click")}),e(".imagine-collection-tab").hover(function(){e(".imagine-collection-tab").show()},function(){e(".imagine-collection-tab").hide()}),e(".imagine-collection-tab .side-nav-panel li").on("hover",function(t){var a=e(this).attr("id");e(".side-nav-panel li").removeClass("active"),e("#"+a).addClass("active"),e(".imagine-collection-tab .child-content").hide(),e("#parent-tab-"+a).show()}),e(".imagine-collection-tab .content-panel").mCustomScrollbar({theme:"minimal-dark"}),c.on("click",".js-fullscreen",function(a){function n(){o.fadeIn("slow"),r.fadeIn("slow"),s.removeClass("inpage-fullscreen"),s.find(".panel_container").animate({width:"960px"},300,function(){}),l.css("background-size","contain"),e("body, html").animate({scrollTop:d},300),l.animate({height:"640px"},300,function(){})}function i(){t=e(document).scrollTop(),e(document).on("keyup",function(e){var t=e.keyCode||e.which;27===t&&n()});var a=s.offset();o.fadeOut("fast"),r.fadeOut("fast"),e("body, html").animate({scrollTop:a.top},300),s.addClass("inpage-fullscreen"),s.find(".panel_container").animate({width:"100%"},300,function(){}),l.css("background-size","cover"),l.animate({height:"100vh"},300,function(){})}if(a.preventDefault(),e.support.fullscreen)e(".imagine-main-wrapper").fullScreen({background:"",callback:function(){e("imagine-main-wrapper fullScreen").length&&e(".imagine-controls").css("display","inline-block")}}),e(".imagine-controls:hidden")&&e(".imagine-controls:hidden").fadeIn("fast"),e(".imagine-preview:hidden")&&e(".imagine-preview:hidden").fadeIn("fast"),e(".imagine-controls:visible")&&e(".imagine-controls:visible").fadeOut("fast"),e(".imagine-preview:visible")&&e(".imagine-preview:visible").fadeOut("fast");else{var o=e("#help_bird"),r=e("#help_bird_career"),s=e(".imagine-main-block"),l=e("#imagine-main");s.hasClass("inpage-fullscreen")?n():(d=e(window).scrollTop(),i())}}),c.on("click",".imagine-preview img[data-day]",function(t){t.preventDefault();var n=e(this),i=n.data("day"),r=n.data("topic"),s=n.data("src")||n.prop("src"),l=e(".imagine-stage-toggle:checked").val();if(void 0!=i&&void 0!=s){var c=e(".imagine-main").data("day");i!=c&&(e(".imagine-main").animate({opacity:0},300,function(){e(".imagine-main").css("background-image","url('"+s+"')"),e(".imagine-main").animate({opacity:1},300),e(".imagine-main").data("day",i),o()}),a(i,l,r))}}),e("a.imagine-image").click(function(t){e(this).find(".futureDay").length&&t.preventDefault()}),e("#imagine-main").length&&o(),c.on("change",".imagine-stage-toggle",function(){var t=e("#imagine-main").data("day"),o=e("#imagine-main").data("week"),s=e(this).val(),l=e(".imagine-topic-web h2").text(),c=e("#imagine-main").data("topic");return void 0==t?void apprise("Unable to determine selected day."):void 0==s?void apprise("Unable to find requested keystage."):("imagine-stage-toggle-2"==e(this).attr("name")?e("html, body").stop().animate({scrollTop:e("#day").offset().top},1e3):e("input[name=imagine-stage-toggle-2]").filter("[value="+s+"]").prop("checked",!0),n(s,o,t),a(t,s,c),i(o,s,l,c),r(s),void createCookie("imagineStage",s,90,0))}),e(".imagine-main-wrapper").hover(function(){e(".imagine-preview").stop(!0,!0).slideDown(),e(".imagine-controls:hidden").fadeIn("slow")},function(){e(".imagine-preview").stop(!0,!0).slideUp(),e(".imagine-controls:visible").fadeOut("slow")}),c.on("mousemove","#imagine-main-wrapper.fullScreen",function(){clearInterval(l),l=setTimeout(function(){e(".imagine-controls").fadeOut("slow"),e(".imagine-preview").fadeOut("slow")},1e3)})}),e('a[href="premium"], a[href^="/premium"]').click(function(t){var a=e(this).text(),n=e(this).attr("href");if(e(this).parents("#premiumMiniMenu").length&&document.twinkl.sendEvent("Goal Click",n,a),"https:"!=document.location.protocol){var i=e(this).attr("data-noPremiumFollow");if(!i){var n=e(this).attr("href");t.preventDefault(),e.post("/php/ajax/savePremiumClick.php",{url:window.location.pathname},function(){window.location=n}).fail(function(){window.location=n})}}}),e('a[href="school-premium"], a[href="/school-premium"]').click(function(e){e.stopPropagation()}),e(".nationalCurricButton").click(function(e){e.stopPropagation()}),e("#premiumMiniMenu").find(".t-button, li.individual a").click(function(t){"/premium"!==window.location.pathname&&"/premium/individual"!==window.location.pathname||(t.preventDefault(),smoothScrollTo(e("#choose-package"),400))}),e(document).on("click",".select-trigger",function(){var t=e(this).closest(".alignedStandardsDropdown"),a=e(this).find(".chevron-icon");a.css({transform:"rotate(180deg)",transition:"transform 0.3s ease"}),t.hasClass("open")?a.css({transform:"rotate(0deg)",transition:"transform 0.3s ease"}):a.css({transform:"rotate(180deg)",transition:"transform 0.3s ease"}),t.toggleClass("open")}),e(document).on("click",".select-option",function(){var t=e(this).text(),a=e(this).data("id"),n=e(this).closest(".alignedStandardsDropdown");n.find(".select-trigger .defaultStandardName").text(t),e(this).siblings().removeClass("selected"),e(this).addClass("selected"),e(".standard").hide(),e('.standard[data-parentId="'+a+'"]').show(),e(".alignedStandardsDropdown").removeClass("open");var i=e(".select-trigger .chevron-icon");i.css({transform:"rotate(0deg)",transition:"transform 0.3s ease"})}),e(document).on("click",function(t){if(!e(t.target).closest(".alignedStandardsDropdown").length){e(".alignedStandardsDropdown").removeClass("open");var a=e(".select-trigger .chevron-icon");a.css({transform:"rotate(0deg)",transition:"transform 0.3s ease"})}});var Et=function(){var e=document.createElement("div");e.setAttribute("class","stickyRContainer"),document.querySelector("body.is-mobile-device")?e.style="top: 60px":"";var t=document.createElement("div");t.setAttribute("class","stickyR m-auto px-1"),e.appendChild(t),document.body.insertAdjacentElement("beforeend",e);var a=document.querySelector("ul#actual_downloads"),n=a.cloneNode(!0),i=document.createElement("div");i.setAttribute("class"," right pb-1"),t.appendChild(i);var o=n.querySelector("#download_link");if(o){var r=o.getAttribute("data-track");if(r){var s=r.replace('"ctaType":"primary"','"ctaType":"sticky"');renderTrackingAttribute(o,s)}}var l,c=!0;if(!document.querySelector("body.is-mobile-device")){c=!1;var d=document.querySelector("#resource_image .resource_preview").currentSrc,u=new Image,p=document.createElement("picture");u.src=d,u.className="resource_preview",p.appendChild(u),i.appendChild(p);var h=document.getElementsByClassName("resourcePageTitle")[0].textContent,m=document.createElement("div");m.appendChild(document.createTextNode(h)),m.className="resourcePageTitle",i.appendChild(m);var f=document.querySelector("#average_rating");if(f)var l=f.cloneNode(!0)}c&&(n.style="margin-top: 13px;    left: 0;    position: relative;    display: block;    text-align: right;    padding: 0;    width: 100%;    margin-bottom: 5px;"),i.appendChild(n),"IntersectionObserver"in window&&new IntersectionObserver(function(t){t.forEach(function(t){if(t.isIntersecting)e.classList.remove("stickyG");else{var a=document.querySelector(".stickyRContainer.stickyG a.ratings-link");a&&!c&&l&&l.classList.add("hasR"),e.classList.add("stickyG")}})},{threshold:1}).observe(document.getElementById("actual_downloads"))};location.pathname.indexOf("/resource/")>-1&&e("#resource").exists(function(){Et()}),document.querySelector("body.is-desktop-device")&&location.pathname.indexOf("/event/")>-1&&e("#resource").exists(function(){var e=document.createElement("div");e.setAttribute("class","stickyRContainer");var t=document.createElement("div");t.setAttribute("class","stickyR m-auto px-1"),e.appendChild(t),document.body.insertAdjacentElement("beforeend",e);var a=document.querySelector("#eventRlRelated"),n=document.querySelector("#resource_preview_container .resource_preview").currentSrc,i=new Image,o=document.createElement("picture");i.src=n,i.className="resource_preview",o.appendChild(i);var r=document.getElementsByClassName("rlResourceTitle")[0].textContent,s=document.createElement("div");s.appendChild(document.createTextNode(r)),s.className="resourcePageTitle";var l=a.cloneNode(!0),c=l.childNodes[0];c.style="padding-left: 25px;font-size: 1rem;",c.firstChild.nextSibling.style="font-size: 1.3rem;",l.style="position: absolute;top: 30px;left: 177px";var d=document.createElement("div");if(d.setAttribute("class"," right pb-1"),t.appendChild(d),d.appendChild(o),d.appendChild(s),d.appendChild(l),"IntersectionObserver"in window){new IntersectionObserver(function(t){t.forEach(function(t){var a=t.isIntersecting;a?e.classList.remove("stickyG"):e.classList.add("stickyG")})},{threshold:1}).observe(document.getElementById("eventRlRelated"))}}),e("#resource").on("click","#tabbed_content .tab",function(){var t=e(this).attr("data-id");e(".tab").removeClass("selected"),e(".tabContent").removeClass("selected"),e(this).addClass("selected"),e("#tabContent"+t).addClass("selected"),e(".tabContent").unbind("mousewheel");var a=3==t;M(e("#tabContent"+t),a)}),e("#resource").exists(function(){var t=575;if(e(window).width()<=t){for(var a=e(this).find("#linked_resources_inner"),n=e(this).find(".commentsList"),i=e(this).find("li.comment"),o=e("li.comment").length,r=Math.min(o,5),s=200,l=0;l<r;l++)s+=e(i[l]).outerHeight();if(o>5){var c=i[4];e(c).after('<div class="showMoreReviews showMoreButton text-center">\n<a class="showMoreReviewsLink showMoreLink text-decoration-none text-center pt-10px pb-10px">Show More...</a>\n</div>'),s+=e(".showMoreReviews").outerHeight()}n.css({"overflow-y":"hidden","max-height":s+"px",height:"unset"}),e(this).on("click","#comments .showMoreLink",function(){e(this).parent().hasClass("showMoreReviews")?(e(".showMoreReviews").hide(),e(i[o-1]).after('<div class="showFewerReviews showLessButton">\n<a class="showMoreLink text-decoration-none pt-10px pb-10px">Show Less...</a>\n</div>'),n.css({"max-height":"unset"})):(e(".showFewerReviews").remove(),e(".showMoreReviews").show(),n.css({"max-height":s+"px",height:"unset"}))}),e(this).on("click","#linked_resources .showMoreLink",function(){var t=e(this);"Show More..."==e(this).html()?(a.css("max-height","none"),t.html("Show Less...")):(a.css("max-height","350px"),a.css("overflow","hidden"),t.html("Show More..."))})}}),(document.getElementById("send-me-this-res")||document.getElementById("send-me-this-res-signed-in")||readCookie("sendMeTheResourceId"))&&(readCookie("sendMeTheResourceId")&&"/sign-up"===window.location.pathname&&(document.querySelector(".signUpHeader").innerHTML="Create a FREE account to get your resource"),"undefined"!=typeof LoadOnSendResources&&"function"==typeof LoadOnSendResources.init&&LoadOnSendResources.init()),"undefined"!=typeof MoreResource&&"function"==typeof MoreResource.infinitLoad&&MoreResource.checkPermission()&&MoreResource.footerResources().then(function(){setTimeout(function(){MoreResource.infinitLoad()},500)}),e(".feedbackForm").exists(function(){var t=e(this);t.find('[name="whatAbout"]').change(function(){var t=e('.feedbackForm [name="whatAboutOther"]');"Other"==e(this).val()?t.slideDown("slow"):t.slideUp("slow")}),t.find('[name="howWell"]').change(function(){var t=e('.feedbackForm [name="howWellOther"]');"I would like some more help please!"==e(this).val()?t.slideDown("slow"):t.slideUp("slow")}),t.find('[name="anythingElse"]').change(function(){var a=t.find('[name="anythingElseOther"]'),n=t.find('[name="anythingElseEmail"]');"Yes"==e(this).val()?a.slideDown("slow",function(){n.slideDown("slow")}):n.slideUp("slow",function(){a.slideUp("slow")})})});var Pt;e("#search_container").on("click",".pager_bar a",function(t){t.preventDefault();var a=e(this).attr("href"),n=function(e){for(var t=e.split("?"),a=t[1]?t[1]:[],n=a.split("&"),i={},o=0;o<n.length;o++){var r=n[o].split("=");r[1]&&(i[r[0]]=r[1])}if("p"in i)return i.p;var s=e.split("/");return s[s.length-1]},i=n(a);V({pageNum:i})}),e("#search_container").find(".searchHeaderSub2_1 select").change(function(t){var a=e(this).find(":selected").attr("class");return"showMoreOptions"==a?void J(e(this)):(e(".advancedSearchDiv").removeClass(e(this).attr("class")+"Active"),Q(e(this).attr("class")),void V({}))}),e("#search_container").on("click",function(){e(".searchHoverText").remove(),e(".searchHoverCover").remove(),e("#searchCover2").remove()}),e("#search_container").find(".sortBy").change(function(){e.post("/search",{action:"sortBy",sortBy:e(this).val()},function(e){V({})})}),e(".advancedSearch").click(function(t){t.preventDefault(),e(".advancedSearchDiv").slideToggle()}),e(".advancedSearchDiv").find(".parent span").click(function(){e(this).parent().toggleClass("active"),e(this).parent().find(".children").slideToggle();var t=!!e(this).parent().hasClass("active");e(this).parent().find(".child input").each(function(){e(this).prop("checked",t)}),t&&e(this).parent().find(".child:first").removeClass("off").addClass("on").text("Deselect all")}),e(".advancedSearchDiv").find(".child.onOff").click(function(){if(e(this).hasClass("on"))var t="on",a="off",n="Select all",i=!1;else t="off",a="on",n="Deselect all",i=!0;e(this).parent().find(".child input").each(function(){e(this).prop("checked",i)}),e(this).removeClass(t).addClass(a).text(n)}),e(".advancedSearchDiv .child input").change(function(){var t=e(this).parents("ul:first"),a=!0;t.find(".child input").each(function(){e(this).prop("checked")||(a=!1)}),a?t.find(".child.onOff").addClass("on").removeClass("off").text("Deselect all"):t.find(".child.onOff").addClass("off").removeClass("on").text("Select all")}),e(".advancedSearchDiv").find("button").click(function(){e(".advancedSearchDiv").addClass("areaActive").addClass("typeActive"),V([])}),e("#search_container").on("change",".showCount",function(){V([])});var jt;e(".panel_container").on("mouseenter",".resource-preview",function(){var t=e(this).find(".description");t.addClass("d-none").removeClass("d-flex"),jt=setTimeout(function(){t.addClass("d-flex").removeClass("d-none"),e(".saveIcon").addClass("saveIcon-hover")},1e3)}),e(".panel_container").on("mouseleave",".resource-preview",function(){clearTimeout(jt),e(this).find(".description").addClass("d-none").removeClass("d-flex"),e(this).find(".saveIcon").removeClass("saveIcon-hover")});var Lt;e(window).on("scroll",function(){var t=e("#search_container").find(".searchMain");t.addClass("scrolling"),clearTimeout(Lt),Lt=setTimeout(function(){t.removeClass("scrolling")},400)}),e.twinkl.initSearch(),e(".helpfulFeedbackForm").exists(function(t){e("details").click(function(t){e(t.target).is("textarea")&&e(t.target).is("input")||(e(".feedbackOptions").find("details").not(this).removeAttr("open"),e(this).siblings("details").removeAttr("open"))})}),e(".helpfulFeedbackForm").submit(function(t){t.preventDefault();var a=e(this).find("input[type=submit]:focus").val(),n="",i="";if(e(this).find("input[type=submit]:focus").hasClass("positiveCommentSubmit"))a="Yes",n=e("#comments_container_positive").val(),i="";else{if(e(".helpfulNoQtns").each(function(){e(this).is(":checked")&&(i=e(this).val())}),a="No",n=e(this).find("input[type=submit]:focus").prev("#comments_container_negative").val(),!n)var o="You haven't entered a message...";if(o)return void apprise(o)}var r=e('.helpfulFeedbackForm input[name="question_id"]').val(),s=e('<img src="'+imageAssetBase+'/images/popup_login_loader.gif" class="loader" />');e(this).after(s),e.post(window.location,{action:"feedback",helpful:a,question_id:r,feedback:n,type:i},function(t){s.remove(),"success"!==t.message?apprise(t.message):(e("#helpfulButtons").hide(),e(".helpfulFeedbackForm").after(t.html),e(".helpfulMessageForm").slideDown())},"json")}),Pe.on("submit",".helpfulMessageForm",function(t){t.preventDefault();var a=e(".helpfulMessageForm"),n=a.find('textarea[name="message"]').val(),i=a.find('input[name="question_id"]').val(),o=a.find('input[name="response_id"]').val(),r=a.find('input[name="helpful"]').val(),s=e('<img src="'+imageAssetBase+'/images/popup_login_loader.gif" class="loader" />'),l=a.find('input[name="ticket_id"]').val(),c="";return n||(c="You haven't entered a message..."),c?void apprise(c):(e(this).after(s),void e.post(window.location,{action:"message",message:n,question_id:i,response_id:o,ticket_id:l,helpful:r},function(t){s.remove(),"success"!==t.message?apprise(t.message):(a.remove(),e("#helpfulFeedback").append("<p>"+t.html+"</p>"))},"json"))});ee(),e("#helpSection").exists(function(){var t=!0,a=e(".searchHelp #search_form"),n=a.find("#phrase"),i=debounce(function(){e(".searchHelp #phrase").val()});e(".searchHelp #search_form").on("keyup",function(e){e.preventDefault();var t=n.val();a.find("button");""!=t&&(n.addClass("loading"),i(t))});var i=debounce(function(a){if(t){var a=n.val();if(""==a||a.length<4)return n.removeClass("loading"),void e(".searchHelp #search_ajax").remove;n.addClass("loading"),e.post("/help/ajax-search",{query:a,action:"search"},function(t){if(n.removeClass("loading"),e(".helpError").remove(),"success"!=t.message)apprise(t.message);else{if(""==t.html)return;var i=t.html;if(e('.leftCol:contains("Search Results")').length&&e(".leftCol").data("search")==a)return;e(".searchHelp").find("#search_ajax").length?(e(".searchHelp").addClass("help-search-results"),e(".searchHelp").find("#search_ajax").replaceWith(i)):e(".searchHelp").addClass("help-search-results").append(i)}},"json")}},300);e(".searchHelp #search_form").on("submit",function(a){a.stopPropagation(),a.preventDefault(),t=!1;var n=e(this),i=n.find("#phrase"),o=i.val();return""==o?void apprise("You didn't search for anything."):(i.addClass("loading"),e.post("/help/ajax-search",{query:o},function(t){if(i.removeClass("loading"),e(".helpError").remove(),"success"!=t.message)apprise(t.message);else{var a=e(t.html),n=a.contents();e(".leftCol").animate({opacity:"0"},200,function(){e(".leftCol").data("search",o).html(n).prepend("<h2>Search Results</h2>").animate({opacity:"1"},200)}),e("#search_ajax").remove()}},"json"),void(t=!0))})}),e(".help-tip-wrapper").exists(function(){e(this).cycle({timeout:1e4,pause:1,before:be,slideExpr:".help-tip",pager:"#help-tip-nav"})}),e(".search-results").on("click",".filter",function(t){t.preventDefault();var a=e(this).text().replace(" ×",""),n=1==e(".searchResultInfo").find("a.filter").length?1:0;n&&"PlanIt"!=a&&e("#planit_area_checkbox").attr("checked",!1),e("#refine_by_bar").find('.area li input[type="checkbox"]').each(function(){e(this).next().text()==a&&e(this).click()})}),e("#refine_by_bar").find(".area input").change(function(){"KS1_Resources"!=e(this).val()&&"KS2_Resources"!=e(this).val()||e(this).prop("checked")&&e("#planit_area_checkbox").prop("checked",!0),Pt&&(Pt.abort(),hideLoader());var t="Resources",a=e("#search_form #phrase").val(),n=te(),i=e("#search_results_per_page_dropdown").val(),o=ae();showLoader(),Pt=e.post("/search",{query:a,site:t,topCats:o,action:"getResults",refine:n,resultsPerPage:i},function(a){var n=a.html;e("#search_results").html(n),e("#"+t).trigger("click"),e("#search_form").find("ul").hide(),ne()},"json")}),e("#col2").on("click","#refineNote a",function(t){t.preventDefault(),e(".type").find("input").prop("checked",!1);var a=ie(),n="/php/ajax/get_refined_results.php",i=location.pathname,o={refineIds:a,pageUrl:i},r=e("#col2"),s=e("#overlay"),l=e("#showBrowseByLoader");s.after('<img id="showBrowseByLoader" src="'+imageAssetBase+'/images/loading.gif" style="display:none;position:fixed;top:50%;left:50%;margin:-16px 0 0 -16px;z-index:100001;" />'),l.fadeIn(),r.fadeOut(300,function(){e.post(n,o,function(t){r.html(t),r.fadeIn(),l.fadeOut(300,function(){e(this).remove()}),window.scrollTo(0,0)},"html")})}),e("#refine_by_bar").find(".firstLevel > li > label").click(function(t){t.preventDefault();var a=e(this).attr("data-active"),n=e(this).parent(),i=n.find("ul"),o=e("#refine_by_bar");o.find(".secondLevel").hide(),o.find(".firstLevel > li > label").attr("data-active",""),o.find(".secondLevel input").attr("checked",!1),""==a&&(i.show(),e(this).attr("data-active","active"),i.find("input").attr("checked",!0)),i.find("input:first").trigger("change")}),e("#teaching_wiki").exists(function(){var t=!0,a=e(".searchWiki #search_form"),n=a.find("#phrase");debounce(function(){e(".searchWiki #phrase").val()}),debounce(function(a){if(t){var a=n.val();if(""==a||a.length<4)return n.removeClass("loading"),void e(".searchWiki #search_ajax").remove;n.addClass("loading"),e.post("/teaching-wiki",{query:a,action:"search"},function(t){if(n.removeClass("loading"),e(".helpError").remove(),"success"!=t.message)apprise(t.message);else{var i=t.html;if(e('.leftCol:contains("Search Results")').length&&e(".leftCol").data("search")==a)return;e(".searchWiki").find("#search_ajax").length?(e(".searchWiki").addClass("help-search-results"),e(".searchWiki").find("#search_ajax").replaceWith(i)):e(".searchWiki").addClass("help-search-results").append(i)}},"json")}},300);e(".searchWiki").on("click",".wiki-result",function(t){t.preventDefault();var a=e(this).find("a").attr("href");a&&(window.location=a)}),e(".searchWiki #search_form").on("submit",function(a){a.stopPropagation(),a.preventDefault(),t=!1;var n=e(this),i=n.find("#phrase"),o=i.val(),r=e("#wikiType").val(),s="/teaching-wiki";if("parenting"===r&&(s="/parenting-wiki"),""==o)return void apprise("You didn't search for anything.");var l=encodeURIComponent(o).replace(/%20/g,"+");window.location.href=s+"/search?query="+l,i.addClass("loading"),t=!0})}),e("#teaching_wiki .askUs").on("click",function(t){t.preventDefault();var a=e("#teaching_wiki .userQuestion").val(),n=e("#teaching_wiki .contactEmail").val(),i=e(this),o=e("<img class='loader' src='"+imageAssetBase+"/images/loading.gif' />");i.hide(),i.after(o),e.post("/teaching-wiki",{question:a,email:n,action:"askUs"},function(t){"success"!=t.message||(e("#teaching_wiki .successMessage").html(t.html),o.remove(),i.show(),e("#teaching_wiki .userQuestion").val(""),e("#teaching_wiki .contactEmail").val(""))},"json")}),e("#blog").exists(function(){function t(t){var a=i.val();e.post(t,{query:a,action:"search-blog"},function(t){if(i.removeClass("loading"),"success"!=t.message)apprise(t.message);else{var a=(e(t.html),e(".container .home-blog-list"));a.html(t.html),e("#search_ajax").remove(),i.blur(),document.fn.events.emit("loadedContent")}},"json")}var a=!0,n=e(".searchBlog #search_form"),i=n.find("#phrase");debounce(function(){e(".searchBlog #phrase").val()});e(".container .home-blog-list").on("click",".pager_bar a",function(a){a.preventDefault();var n=e(this).attr("href");t(n)}),e(".searchBlog #search_form").on("submit",function(n){n.stopPropagation(),n.preventDefault(),a=!1;var i=window.location.pathname,o=e(this),r=o.find("#phrase"),s=r.val();return""==s?void apprise("You didn't search for anything."):(r.addClass("loading"),t(i),void(a=!0))})}),e(".blog-wrapper").exists(function(){e(".blog-extra-container").exists(function(){var t=this;t.find(".blogSignUpBanner").insertAfter(e("#blog-content").find(".row:last p:nth(2)"))})}),e(".planit-block-inner").mCustomScrollbar({theme:"dark",scrollButtons:{enable:!1},axis:"x"}),e(".deselectAll").click(function(t){t.preventDefault();var a=e(this).text(),n=e(this).parent().parent();"Deselect all"==a?(n.find("li input").attr("checked",!1),e(this).text("Select all")):(n.find("li input").attr("checked",!0),e(this).text("Deselect all")),n.find("input:first").trigger("change")}),e("#browse_by_bar").find(".firstLevel > li > label").click(function(t){t.preventDefault();var a=e(this).attr("data-active"),n=e(this).parent(),i=n.find("ul"),o=e("#browse_by_bar");o.find(".secondLevel").hide(),o.find(".secondLevel input").attr("checked",!1),o.find(".firstLevel > li > label").attr("data-active",""),""==a&&(i.show(),e(this).attr("data-active","active"),i.find("input").not("#deselectAll").attr("checked",!0)),i.find("input:first").trigger("change")});var Rt;e("#browse_by_bar").find(".type input").change(function(){var t=e(this).parent(),a=t.parent(),n=ie(),i="/php/ajax/get_refined_results.php",o=location.pathname,r={refineIds:n,pageUrl:o},s=e("#overlay"),l=e("#col2"),c=e('<img id="showBrowseByLoader" src="'+imageAssetBase+'/images/loading.gif" style="display:none;position:fixed;top:50%;left:50%;margin:-16px 0 0 -16px;z-index:100001;" />');if(a.hasClass("firstLevel")){var d=!!e(this).prop("checked");t.find("ul li input").each(function(){e(this).prop("checked",d)})}else t=t.parent().parent();t.siblings().each(function(){e(this).find("input").prop("checked",!1)}),s.after(c),Rt&&4!=Rt.readyState&&(Rt.abort(),l.show(),c.remove()),c.show(),l.hide(),Rt=e.post(i,r,function(e){l.html(e),l.show(),showHiddenImages("#youll_love_resource_box div.hidden"),c.remove()},"html")}),e("#browse_by_category_inline .categories").on("hover","li a",function(){e(this).overflown()&&e(this).attr("title",e(this).text())}),e(".product").find(".resource_preview").unbind();var Mt=!1;e("#premium_account").find(".down").click(function(){var t=e("#premium_account").find("table").find("tr").length,a=-25*(2*t-2),n=parseInt(e("#premium_account").find("tbody").css("top"),10),i=n-25;if(n!=a){if(Mt)return;Mt=!0,e("#premium_account").find("tbody").animate({top:i},200,function(){Mt=!1})}}),e("#premium_account").find(".up").click(function(){var t=(e("#premium_account").find("table").find("tr").length,0),a=parseInt(e("#premium_account").find("tbody").css("top"),10),n=a+25;if(a!=t){if(Mt)return;Mt=!0,e("#premium_account").find("tbody").animate({top:n},200,function(){Mt=!1})}}),e("#premium_sign_up_subscribe_form").find('select[name="occupation"]').change(function(){var t=e("#premium_sign_up_subscribe_form").find(".otherOccupation");"0"==e(this).val()?(t.find("input").val(""),t.slideDown()):t.slideUp()}),e("#premium_sign_up_subscribe_form").find("button").click(function(t){if(t.preventDefault(),validate_signup_form2()){var a=e('[name="isOfferCode"]'),n=1==a.val()?1:0,i=e("#subscribe_offer_code"),o=e("#sign_up_nus");if(n&&!a)return!1;if(!i.val())return i.formError("Please enter an offer code.","","not_blank"),!1;var r=e(this),s=r.parents("form"),l=e(n?"<img class='loader' src='"+imageAssetBase+'/images/loading.gif\' style="margin: 0 auto;" />':"<img class='loader' src='"+imageAssetBase+'/images/loading.gif\' style="float:none;" />');r.hide(),r.after(l),n?(s.find('[name="offer_code"]').val(i.val()),o.val()?oe(l,r,s):e.post("/php/ajax/checkoffercode.php",{offerCode:i.val(),type:"signUp"},function(t){return"success"!==t.message?(i.formError(t.message,"","change"),l.remove(),r.show(),!1):1==t.student?(e("#sign_up_nus").parent().slideDown(),s.formError("<strong>Student Offer</strong><p>This offer requires a valid NUS number. Please fill in your number and submit the form again.</p>"),l.remove(),r.show(),!1):void oe(l,r,s)},"json").fail(function(e){return!1})):oe(l,r,s)}}),e("#premium_sign_in_subscribe_form").find("button").click(function(t){t.preventDefault();var a=e(this),n=a.parents("form"),i=e("#sign_in_username"),o=e("#sign_in_password"),r=n.find('[name="isOfferCode"]'),s=1==r.val()?1:0,l=e("#sign_in_offer_code"),c=e("#sign_in_nus"),d=e("#sign_in_csrf"),u=e(".userNameEmailWarning").val(),p=e(".passwordWarning").val(),h=e(".offerCodeWarning").val(),m=!0,f="";if(i.val()||(m=!1,f+="<li>You haven't filled out your username/email.</li>",i.formError(u,"","not_blank")),o.val()||(m=!1,f+="<li>You haven't filled out your password.</li>",o.formError(p,"","not_blank")),s&&!l.val()&&(m=!1,f+="<li>You haven't entered an offer code.</li>",l.formError(h,"","not_blank")),!m)return!1;var v=e(s?"<img class='loader' src='"+imageAssetBase+"/images/loading.gif' style='margin-top: 10px;' />":"<img class='loader' src='"+imageAssetBase+'/images/loading.gif\' style="float:none;" />');a.hide(),a.after(v),s?(n.find('[name="offer_code"]').val(l.val()),e.post("/php/ajax/checkoffercode.php",{offerCode:l.val(),type:"signIn",username:i.val()},function(t){if("success"!==t.message){if("expired"===t.error){var r=signInConfig.offerFinished;apprise(r,{},function(){window.location="/premium"})}t.error.offercode&&l.formError(t.error.offercode.msg,"","change"),t.error.support&&n.formError(t.error.support.msg),v.remove(),a.show()}else if(1!=t.student||c.val())n.find('[name="premium_choice"]').val(t.subType),re(a,n,v,i.val(),o.val(),c.val(),"inline",d.val());else{e("#sign_in_nus").parent().slideDown(),n.formError("<strong>Student Offer</strong><p>This offer requires a valid NUS number. Please fill in your number and submit the form again.</p>");v.remove(),a.show()}},"json").fail(function(e){n.formError(e.responseText)})):re(a,n,v,i.val(),o.val(),c.val(),"inline",d.val())}),
e.fn.formError=function(t,a,n,i,o){var r,t=t,a=a,n=n,s=e(this).val(),l=e(this).prop("tagName").toLowerCase();if(void 0==t&&(t=""),void 0==a&&(a=""),void 0==n&&(n=""),void 0==i&&(i=!0),void 0==o&&(o=""),"form"==l?r=e(this):(r=e(this).parent(),o&&(r=o.parent())),r.removeClass("has-error"),"undefined"==typeof r.data("error-count")?r.data()["error-count"]=1:r.data()["error-count"]++,r.find(".form-error, .form-error-hint, .form-error-block").remove(),"form"==l)i&&r.find(":header:first-child").length?e('<div class="form-error-block">'+t+"</div>").hide().insertAfter(r.find(":header").first()).slideDown():e('<div class="form-error-block">'+t+"</div>").hide().prependTo(e(this)).slideDown();else{if(""!==a&&r.data("error-count")>1&&e('<div class="form-error-hint">'+a+"</div>").insertBefore(e(this)),""!==t){var c=e(this);o&&(c=o),i?e('<div class="form-error">'+t+"</div>").insertBefore(c):e('<div class="form-error">'+t+"</div>").insertAfter(c)}r.addClass("has-error")}if("function"==typeof n)e(this).on("input",function(t){n()&&r.hasClass("has-error")&&r.find(".form-error, .form-error-hint, .form-error-block").fadeOut(function(){e(this).remove(),r.removeClass("has-error")})});else switch(n){case"not_blank":e(this).on("keyup",function(t){""!=e(this).val()&&r.hasClass("has-error")&&r.find(".form-error, .form-error-hint, .form-error-block").fadeOut(function(){e(this).remove(),r.removeClass("has-error")})});break;case"valid_email":e(this).on("keyup",function(t){isEmailValid(e(this).val())&&r.hasClass("has-error")&&r.find(".form-error, .form-error-hint, .form-error-block").fadeOut(function(){e(this).remove(),r.removeClass("has-error")})});break;case"valid_phone_number":e(this).on("keyup",function(t){validatePhoneNumber(e(this).val(),13)&&r.hasClass("has-error")&&r.find(".form-error, .form-error-hint, .form-error-block").fadeOut(function(){e(this).remove(),r.removeClass("has-error")})});break;case"is_numeric":e(this).on("keyup",function(t){validateNumeric(e(this).val())&&r.hasClass("has-error")&&r.find(".form-error, .form-error-hint, .form-error-block").fadeOut(function(){e(this).remove(),r.removeClass("has-error")})});break;case"change":"select"==l?e(this).on("change",function(t){r.hasClass("has-error")&&r.find(".form-error, .form-error-hint, .form-error-block").fadeOut(function(){e(this).remove(),r.removeClass("has-error")})}):e(this).on("keyup",function(t){e(this).val()!=s&&r.hasClass("has-error")&&r.find(".form-error, .form-error-hint, .form-error-block").fadeOut(function(){e(this).remove(),r.removeClass("has-error")})});break;case"match":e(this).on("keyup",function(t){e(this).val()==e(o).val()&&r.hasClass("has-error")&&r.find(".form-error, .form-error-hint, .form-error-block").fadeOut(function(){e(this).remove(),r.removeClass("has-error")})});break;case"blur":e(this).on("blur",function(e){r.hasClass("has-error")&&r.removeClass("has-error")})}return!0},e("#header_login_form").find("button").click(function(){var t=e("#user_name").val(),a=e("#pass_word").val(),n=!0,i="";if(t||(n=!1,i+="<li>You haven't filled out your username/email.</li>"),a||(n=!1,i+="<li>You haven't filled out your password.</li>"),n)return!0;var i="<h1>Uh oh!</h1><p>There were a few problems with your entries...</p><ul>"+i+"</ul>";return apprise(i),!1}),e(".signUpInHolder").length?""==e("#sign_in_username").val()?e("#sign_in_username").select().focus():e("#sign_in_password").select().focus():e("#helpSection").length?isTouchDevice()||e("#helpSection #phrase").select().focus():isTouchDevice()||isSpecialPage()||"/book-club"==location.pathname||isInTest("searchDisableInputAutoFocus","variant")||e("#phrase").select().focus(),e("#new_sign_in_form").exists(function(){var t=e(this),a=t.find(".error").html(),n=(t.find(".error").attr("data-status"),t.find(".error").attr("data-title"));if(a){var i="Error!";n&&(i=n);var o="<h1>"+i+"</h1><p>"+a+"</p>";apprise(o,{},function(t){a.search("password")!=-1?e("#sign_in_password").select().focus():e("#sign_in_username").select().focus()})}t.find("button").click(function(t){t.preventDefault(),le(e(this))})});var Ft={};"undefined"!=typeof actionList&&"undefined"!=typeof grecaptcha&&grecaptcha.ready(function(){se(),e(".grecaptcha-badge").css("bottom","55px")}),e("#user_menu_drop").find('a[href="/sign-out"]').click(function(t){t.preventDefault(),e("body").hasClass("is-tablet-device")||e("body").hasClass("is-desktop-device")?(e("#logout-popup").show(),e("#overlay").show()):location.href="/sign-out"}),e("#logout-popup").find(".logOutConf").click(function(e){var t=readCookie("skip_inspirational_loader");t||(e.preventDefault(),showInspirationalLoader("/sign-out",!0))}),e("#logout-popup").find(".stayLogged").click(function(t){e("#logout-popup").hide(),e("#overlay").hide()}),e("#new_sign_up_form").find('select[name="occupation"]').change(function(){var t=e("#otherIdArray").val(),a=t.split(","),n=e("#new_sign_up_form").find(".otherOccupation");a.includes(e(this).val())?(n.find("input").val(""),n.removeClass("has-success"),n.slideDown()):(n.slideUp(),n.find("input").val(""))});var Ut=document.getElementById("new_sign_up_form"),qt="v3";Ut&&e(function(){var t={classTo:"js-validate",errorClass:"has-error",successClass:"has-success",errorTextParent:"js-validate",errorTextTag:"div",errorTextClass:"form-error"},a=new Pristine(Ut,t,(!1));if(a){var n=document.getElementById("email"),i=document.getElementById("password"),o=document.getElementById("occupation"),r=document.getElementById("otheroccupation");a.addValidator(n,function(e){var t="string"==typeof e&&e.length>0;return!!t||(trackValidationError("emailAddressMissing"),!1)},signInConfig.emailAddressMissing,10,!0),a.addValidator(n,function(e){var t=new RegExp("^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$"),a=!!t.test(e);return!!a||(trackValidationError("emailIncorrect"),!1)},signInConfig.emailIncorrect,9,!0),a.addValidator(i,function(e){var t="string"==typeof e&&e.length>0;return!!t||(trackValidationError("notFilledPassword"),!1)},signInConfig.notFilledPassword,9,!0),a.addValidator(i,function(e){var t=e.length>=4;return!!t||(trackValidationError("shortPassword"),!1)},signInConfig.shortPassword,8,!1),n.addEventListener("focusout",function(){a.validate(n,!1)}),i.addEventListener("focusout",function(){a.validate(i,!1)}),a.addValidator(o,function(e){return!!e||(trackValidationError("occupationNotSelected"),!1)},signInConfig.occupationNotSelected,9,!1),a.addValidator(r,function(e){otherIdString=document.getElementById("otherIdArray"),otherIdArray=otherIdString.value.split(",");var t=otherIdArray.indexOf(o.options[o.selectedIndex].value);if(e.length>0&&"-1"!=t)return!0;var a="-1"==t;return!!a||(trackValidationError("occupationMissing"),!1)},signInConfig.occupationMissing,9,!1),r.addEventListener("focusout",function(){a.validate(r,!1)}),o.addEventListener("click",function(){a.validate(o,!1)}),o.addEventListener("change",function(){a.validate(o,!1)});var s=1;if(e(".usaSignInAndUp").length){var l=document.getElementById("formSection_change_email");l&&l.addEventListener("click",function(t){2===s&&(e("#formSection_email").show(),e("#formSection_email").removeClass("has-success has-error"),e("#formSection_password").hide(),e("#formSection_password").removeClass("has-success has-error"),e("#formSection_change_email").hide(),s=1)})}Ut.addEventListener("submit",function(t){function l(t,a,n,i,o){var r=e("#email"),s=e("#password"),l=e("#occupation"),d=e('#new_sign_up_form [name="csrf"]'),u={email:t.value,password:a.value,captcha_response:"",csrf:d.val(),occupationId:n.value,otherOccupation:i.value},p=e("#no_pass");p.length&&(u.no_pass=p.val());var f=e("#children");if(f&&f.length){var v=f.val()||"";u.children=v}var g=e("#firstName");g.length&&(u.firstName=g.val()),twinklCaptcha.execute(o,"sign_up","captchaV2Div",function(e,t){u.captcha_response=e,u.captcha_version=t,c(u,s,r,l,m,h,d)},function(){e("#emailnew").addClass("has-error")})}function c(t,a,n,i,o,r,l){e.post("/user/create",t,function(t){t=t||{};var o=t.message||"An error occurred whilst creating your account, please try again.",c=t.error||{},d=t.reload||!1,u=t.location||"/signed-up?signed_up=true",p=t.captcha||!1,h=t.csrf||"",m=t.error_tracking;return m&&trackErrorMessages(m),console.log(t),"success"!==o?(console.log("failed saved"),e(".overlayOcc").hide(),e(".occDiv").show(),l.val(h),p&&(qt=p),twinklCaptcha.clearV2("captchaV2Div"),c.password&&a.formError(c.password.msg,c.password.hint,"change"),c.email&&(e(".usaSignInAndUp").length&&2===s&&(e("#formSection_email").show(),e("#formSection_email").removeClass("has-success"),e("#formSection_password").hide(),e("#formSection_password").removeClass("has-success has-error"),e("#formSection_change_email").hide(),s=1),n.formError(c.email.msg+c.email.hint,"","change")),c.occupation&&i.formError(c.occupation.msg,c.occupation.hint,"change"),e("img.loader").remove(),void r.show()):d?void(window.location=window.location.href+"?signed_up=true"):void(window.location=u)},"json")}if(t.preventDefault(),e(".usaSignInAndUp").length&&1===s){var d=a.validate(n,!1);if(d)return s=2,e("#formSection_email").hide(),e("#formSection_password").removeClass("has-error"),e("#formSection_password").show(),void e("#formSection_change_email").show()}var u=a.validate(),p=e("#occModalShown").val(),h=e("#new_sign_up_form button"),m=e("<img class='loader' src='"+imageAssetBase+"/images/loading.gif' />");"0"===p?(u=a.validate(n,!1),u=a.validate(i,!1),u&&(e(".overlayOcc").show(),e(".loadnotifyContainer").hide(),e(".overlayOcc").on("click",".occItem",function(){var t=e(this).data("value");e("#occModalShown").val(1),o.value=t,otherIdString=document.getElementById("otherIdArray"),otherIdArray=otherIdString.value.split(",");var s=otherIdArray.indexOf(t.toString());u=a.validate(),"-1"!=s?(e(".overlayOcc").hide(),e(".otherOccupation").show(),e(".occDiv").show(),e(".otherOccupation").addClass("js-validate"),e(".otherOccupation").removeClass("has-success")):(e(".loadnotifyContainer").show(),l(n,i,o,r,qt))}))):u&&(h.hide(),h.after(m),l(n,i,o,r,qt))})}}),e("a[name='user-offer-code']").click(function(t){t.preventDefault(),e("#offer_code_div").slideDown(),e("#offer_code").select().focus()}),e("#search_form").find('input[name="submitNow"]').val()&&e("#search_form").trigger("submit"),e("#contact_form").exists(function(){var t=e(this);t.find("[name='chat_about']").change(function(){var a=t.find("[name='other_chat_about']");"Other"==e(this).val()?e(a).show():e(a).hide()}),t.find("[name='other_chat_about']").focus(function(){"I'd like to chat about..."==e(this).val()&&e(this).val("")}).blur(function(){""==e(this).val()&&e(this).val("I'd like to chat about...")})}),e("#refer_form").exists(function(){var t=e("#refer_form");t.find("#name").focus(function(){"Your name"==e(this).val()&&e(this).val("")}).blur(function(){""==e(this).val()&&e(this).val("Your name")}),t.find("#email").focus(function(){"Your school's e-mail"==e(this).val()&&e(this).val("")}).blur(function(){""==e(this).val()&&e(this).val("Your school's e-mail")}),t.find("button").click(function(){var a=t.find("#name").val(),n=t.find("#email").val(),i=t.find("#schoolBot").val(),o="";if(a&&"Your name"!=a||(o+="<li>Name is missing!</li>"),n&&"Your school's e-mail"!=n?isEmailValid(n)||(o+="<li>Email is not valid! Must be in the format name@domain.com</li>"):o+="<li>Email is missing!</li>",""!=o)return apprise("Whoops we've hit some errors!<ul>"+o+"</ul>"),!1;if(""==i){var r="/php/ajax/processReferSchool.php?name="+a;r=r+"&email="+n,r=encodeURI(r),e("#school_refer").html("<p style='padding:10px;'>Please Wait...</p>").load(r)}return!1})}),e("#applyOfferCode").click(function(){var t=e("#offer_code").val(),a=e(this),n=e('<img src="'+imageAssetBase+'/images/loading.gif" alt="Please wait..." class="loader" />'),i=e("#nus_number").val(),o=(e("#platinumForm"),e("#goldForm"));t&&(a.after(n),a.hide(),e.post("/php/ajax/checkoffercode.php",{offerCode:t},function(r){if("success"!==r.message)apprise("<h2>Notice</h2><p>"+r.message+"</p>"),a.show(),n.remove();else{var s=r.offerPrice,l=r.priceText,c=r.priceDescription,d=r.subType,u=r.student;if(t=r.offerCode,e("#offer_code_div").slideUp(),1==u&&!i){e("#nus_number").parent().slideDown();var p='<h1>Student Offer</h1><p>This offer requires a valid NUS number. Please fill in your number and click "Apply offer code" again.</p>';return apprise(p),n.remove(),a.show(),!1}if("0.00"===s)e(".premiumOptionsHolder").slideUp(400,function(){e(this).html('<a class="button pink" href="/apply-offer-code/'+t+'">Start my FREE trial!</a>'),e(this).slideDown()});else{if(!d||"Platinum"==d){if(s)e("#platinumForm").find(".choicePrice").html(l),e("#platinumForm").find(".choiceDesc").html(c);else{var h=e("#platinumForm").find(".choicePrice").html().split("<br>");e("#platinumForm").find(".choicePrice").html(h[0]+"<br>(offer-code: "+t+")")}e("#platinumForm").find('input[name="offer_code"]').val(t),e("#platinumForm").find('input[name="nusNumber"]').val(i),e("#platinumForm").effect("highlight",{},1500)}if(!d||"Gold"==d){if(s)o.find(".choicePrice").html(l),o.find(".choiceDesc").html(c);else{var h=o.find(".choicePrice").html().split("<br>");o.find(".choicePrice").html(h[0]+"<br>(offer-code: "+t+")")}o.find('input[name="offer_code"]').val(t),o.find('input[name="nusNumber"]').val(i),o.effect("highlight",{},1500)}}a.show(),n.remove()}},"json").fail(function(){apprise("<h2>Notice</h2><p>I'm sorry we are unable to check your offer code at the moment!</p>"),a.show(),n.remove()}))}),e("#order_terms_wrapper").show(),e("#checkout_confirm_basket").show(),e("#email_me_stock").change(function(){new_product_id=e("#product_id").val(),new_product_id=parseInt(new_product_id),e(this).attr("checked")&&(url="../php/ajax/addToStockEmailList.php?product_id="+new_product_id,url=encodeURI(url),e.get(url,function(t){"true"==t?e(".out_of_stock").html("<h2>We'll be in touch</h2>\n<span>Thank you, we'll email you when more are available.</span>\n"):e(".out_of_stock").find("h2").html("Failed to update")}))}),e("body").on("change","#order_terms_agreed",function(){e(this).attr("checked")?(e("#checkout_confirm_basket").show(),e("#order_terms_wrapper").hide()):(e("#checkout_confirm_basket").hide(),e("#order_terms_wrapper").show())}),e(".out_of_stock button").click(function(){var t=e("#product_id").val(),t=parseInt(t),a=e("#email_address_stock").val();if(a)if(isEmailValid(a)){var n="https://www.twinkl.co.uk/php/ajax/addToStockEmailList.php?product_id="+t+"&email_address="+a;n=encodeURI(n),e.get(n,function(t){"true"==t?e(".out_of_stock").html("<h2>We'll be in touch</h2>\n<span>Thank you, we'll email you when more are available.</span>\n"):e(".out_of_stock").find("h2").html("Failed to update")})}else apprise("Sorry, that email address doesn't appear to be valid. Please make sure it's correct.");else apprise("Please enter an email address!")}),e("#user_menu_dropdown").hide(),e(".user_menu").mouseenter(function(){e(this).addClass("active"),e("#user_menu_dropdown").fadeIn()}).mouseleave(function(){e(this).removeClass("active"),e("#user_menu_dropdown").fadeOut()}).click(function(){e(this).toggleClass("active"),e("#user_menu_dropdown").fadeToggle()}),e("body").on("change","#paymentoption_id",function(){1==e(this).val()?(e("#checkout_paypal_wrapper").show(),e("#checkout_cheque_wrapper").hide()):(e("#checkout_paypal_wrapper").hide(),e("#checkout_cheque_wrapper").show())}),e("body").on("click",".order_question",function(){return e("#order_question_form").remove(),order_section=e(this).closest("li").attr("id"),order_id=order_section.replace("order_",""),order_id=parseInt(order_id),url="../php/ajax/orderQuestionForm.php?order_id="+order_id,url=encodeURI(url),e("#"+order_section+" .order_question_wrapper").load(url),!1}),e("#order_question_form").on("click","button",function(){e("#question").val()?(order_id=e("#order_id").val(),question=e("#question").val(),e("#order_question_form").html('<img src="'+imageAssetBase+'/images/loading.gif" alt="Loading"/> Sending'),url="../php/ajax/orderQuestionForm.php?order_id="+order_id+"&question="+question+"&action=send",url=encodeURI(url),e("#order_question_form").load(url)):apprise("<p>You forgot to fill in your question :(</p>")}),e("body").on("click","#checkout_confirm_basket",function(){var t=e(this).attr("data-just-voucher");1==t?(e("#order_terms_wrapper").hide(),goStraightToPayment()):e("#deliver_to_uk_agree").is(":checked")?(e("#order_terms_wrapper").hide(),e("#checkout_wrapper .address").fadeIn("fast","easeOutExpo"),e("#checkout, #checkout_confirm_basket").fadeOut("fast","easeInExpo")):apprise("I'm sorry we only deliver to the UK. Please check the box to agree.")}),e("body").on("click","#checkout_confirm_address",function(){var t="";e("#address_line_1").val()||(t+="<li>Address line 1</li>"),e("#address_line_2").val()||(t+="<li>Address line 2</li>"),e("#address_city").val()||(t+="<li>City</li>"),e("#address_postcode").val()||(t+="<li>Postcode</li>"),e("#address_telephone").val()||(t+="<li>Telephone number</li>"),""!=t?(t="<p>Sorry, you missed out one of the following...</p>\n<ul>\n"+t+"</ul>\n",apprise(t)):(new_address_line_1=e("#address_line_1").val(),new_address_line_2=e("#address_line_2").val(),new_address_city=e("#address_city").val(),new_address_county_id=1,new_address_county=e("#address_county_id > option:selected").text(),new_address_postcode=e("#address_postcode").val(),new_address_telephone=e("#address_telephone").val(),e("#checkout_wrapper > .address").html('<img src="'+imageAssetBase+'/images/loading.gif" alt="Please wait..." class="loader" /> Saving your address &amp; getting delivery options...'),e("#checkout").fadeOut("fast","easeInExpo"),url="/php/ajax/saveUserDeliveryAddress.php?address_line_1="+new_address_line_1+"&address_line_2="+new_address_line_2+"&address_city="+new_address_city+"&address_county_id="+new_address_county_id+"&address_postcode="+new_address_postcode+"&address_country_id=224&address_telephone="+new_address_telephone,url=encodeURI(url),e("#checkout_wrapper > .address").load(url,function(){e("#checkout_cheque_wrapper").hide()}))}),e("body").on("click","#checkout_confirm_order",function(){var t=e("#firstName").val(),a=e("#lastName").val();if(!t||!a)return apprise("<h2>Oh dear!</h2>You haven't filled out your first and last name!"),!1;e(".address").append('<img src="'+imageAssetBase+'/images/loading.gif" alt="Loading"/> Please wait'),e(".address label, .address select, .address button, .address br, .address input").hide();var n=e(this).attr("data-just-voucher");if(1==n)processOrderForJustVoucher();else{var i=e("#delivery_options > option:selected").text();i=i.split("£");var o=i[1];i=i[0];var r=e("#delivery_options > option:selected").val(),s=1,l=document.getElementById("purchase_order_number").value,c="0";if(r.indexOf("twinkl_delivery")>=0){var d=r.split("twinkl_delivery_");r=d[1],c="1"}var u=window.location.href.split("://");u=u[1].split("/"),u=u[0],u="twinkl.resoundatwork.co.uk"==u?"http://"+u:"https://"+u,u=u+"/php/ajax/saveOrder.php?delivery_price="+o+"&delivery_option="+i+"&paymentoption_id="+s+"&purchase_order_number="+l+"&delivery_service_id="+r+"&twinkl_standard_delivery="+c+"&first_name="+t+"&last_name="+a,u=encodeURI(u),e("#checkout_result").load(u,function(){var t=e("#new_order_id").text();if(t=parseInt(t),1==s){var a=e("#delivery_options > option:selected").text();a=a.split("£");var n=a[1],a=a[0],i=e("[name*=item_number_]").size()+1,o='<input type="hidden" name="amount_'+i+'" value="'+n+'" /><input type="hidden" name="item_name_'+i+'" value="'+a+'" /><input type="hidden" name="item_number_'+i+'" value="T-SHIPPING" /><input type="hidden" name="custom" value="'+t+'" />';e("#checkout_form").append(o).submit()}e("#checkout_wrapper > .address").fadeOut("fast","easeInExpo"),e("#col2 > h1").html("Order Submitted!").after('<p><a href="/invoice/'+t+'" class="blue button">Print Your Invoice</a></p>')})}}),e("#basket_notice").hide(),e("body").on("change",".checkout_qty > input",function(){input_id=e(this).attr("id"),input_id=input_id.replace("quantity_",""),values=input_id.split("-"),type_id=values[0],item_id=values[1],amount=e(this).val(),changeBasketQuantity(amount,type_id,item_id)}),e(".autoresize").autoResize({onResize:function(){e(this).css({opacity:.8})},animateCallback:function(){e(this).css({opacity:1})},animateDuration:300,extraSpace:0}),e("#shared_resource_file").length&&e("#shared_resource_file").uploadify({uploader:"/uploadify/uploadify.swf",script:"/uploadify/uploadify.php",cancelImg:"/uploadify/cancel.png",auto:!0,removeCompleted:!1,fileExt:"*.doc;*.docx;*.pub;*.pubx;*.pdf;*.ppt;*.pptx",buttonText:"Choose a file",onComplete:function(t,a,n,i,o){e("#filename").val(i)}}),e("#actual_downloads > li.alt").css({display:"none"}),e(".my-account-quicklinks").on("mouseover","a",function(t){if(!e(this).hasClass("selected")){var a=e(this).find("img").attr("src"),n=a.replace("gray","white");a.includes(".svg")&&(n=a.replace("black","white")),e(this).find("img").attr("src",n)}}).on("mouseout","a",function(t){if(!e(this).hasClass("selected")){var a=e(this).find("img").attr("src"),n=a.replace("white","gray");a.includes(".svg")&&(n=a.replace("white","black")),e(this).find("img").attr("src",n)}}),e(".my_created_resources").on("mouseover",".draftsLink",function(t){var a=e(this).find("img").attr("src"),n=a.replace("dark-blue","white");e(this).find("img").attr("src",n)}).on("mouseout",".draftsLink ",function(t){var a=e(this).find("img").attr("src"),n=a.replace("white","dark-blue");e(this).find("img").attr("src",n)}),e(document).on("change","#career",function(){var t=e("#otherIdArray").val(),a=t.split(","),n=e(this).parents(".detailsUpdate").data("signed-in");a.includes(e(this).val())&&n?e("#career_other_check_field").slideDown("fast"):(e("#careerOtherCheck").val(""),e("#career_other_check_field").slideUp("fast"))}),e(document).on("keyup","#emailCheck",function(){var t=e(this);t.val()!==t.data("email")?e("#password_field").slideDown():e("#password_field").slideUp()}),e(document).on("change","#career",function(){var t=document.getElementById("supply_field");if(t){var a=parseInt(e(this).val()),n=[3626,3627,3628,3625,3624,3634,8963,3637,3639];n.includes(a)?t.style.display="block":t.style.display="none"}}),e(document).on("change","#country, #address_country_id",function(){var t=e("#county"),a=e("#county_field"),n=e("#nus_number_wrapper"),i=e("#occupation"),o=e("#career"),r=e("#language_field").find(".user-language"),s=e("#country, #address_country_id").val();if(!readCookie("language_id")&&r.length&&s&&(226==s||154==s||12==s))switch(s){case"226":r.val(12);break;case"154":r.val(25);break;case"12":r.val(11)}var l=document.getElementById("#supply_field");l&&(l.style.display="none"),e.post("/php/ajax/get_county_list.php",{countryId:e("#country, #address_country_id").val()},function(i){if(""!=i.trim()){t.html(i),a.slideDown("fast"),n.slideDown("fast");var o=e("#county").find("option:eq(2)"),r="county";o&&(r=o.attr("data-county-name"),e('label[for="county"]').text(r)),t.prepend('<option value="chooseCounty" selected>Please select...</option>'),t.attr("noshow","0")}else a.slideUp("fast",function(){e("#county > option").add("#address_county_id > option").removeAttr("selected"),e("#county").attr("noshow","1")}),n.slideUp("fast",function(){e("#nus_number").val("")})},"html"),e("#career_check_field").slideDown("fast").find("option").removeAttr("selected"),e.post("/php/ajax/get_career_list.php",{countryId:e("#country").val(),languageId:e(".user-language :selected").val()},function(t){null!=i&&i.length>0&&(i.html(t),e("#otherOccupation").slideUp("fast")),null!=o&&o.length>0&&(o.html(t),e("#career_other_check_field").slideUp("fast"))}),e.post("/php/ajax/get_language_list.php",{countryId:e("#country").val()},function(e){r.html(e)})}),e(document).on("change",".user-language",function(){var t=e("#career");e.post("/php/ajax/get_career_list.php",{countryId:e("#country :selected").val(),languageId:e(".user-language :selected").val()},function(e){t.html(e)})}),e("#email_address").bind("keyup change",function(){checkIfEmailExists()}),e("#username").bind("keyup change",function(){checkIfUsernameExists()}),e(".user_preview").hide(),e(".school_users").on("change",".desired_username, .user_email",function(){if(field_name=e(this).attr("class"),value=e(this).val(),"desired_username"==field_name)var t="../php/ajax/checkIfUsernameExists.php?username="+value;else var t="../php/ajax/checkIfEmailExists.php?email="+value;field_id=e(this).attr("id"),field_id=field_id.split("_"),field_id=field_id[2],t=encodeURI(t),e("#username_response_"+field_id).load(t,function(t){if(""!=t){"desired_username"==field_name?e("#username_taken_"+field_id).val("1"):e("#email_taken_"+field_id).val("1");var a="../php/ajax/getUserPreview.php?value="+value;a=encodeURI(a),e("#user_preview_"+field_id).load(a,function(t){e("#user_preview_"+field_id).fadeIn(),e("#table_overlay").css({display:"block"})})}else"desired_username"==field_name?e("#username_taken_"+field_id).val("0"):(e("#email_taken_"+field_id).val("0"),e("#desired_username_"+field_id).removeAttr("disabled"),e("#desired_username_"+field_id).val("")),""!=e("#user_email_"+field_id).val()&&""!=e("#desired_username_"+field_id).val()&&(e("#user_first_name_"+field_id).removeAttr("disabled"),e("#user_last_name_"+field_id).removeAttr("disabled"))})}),e("body").on("keyup change",".desired_username",function(){var t=e(this).attr("id");t=t.split("_"),t=t[2],""!=e("#user_email_"+t).val()&&""!=e("#desired_username_"+t).val()&&(e("#user_first_name_"+t).removeAttr("disabled"),e("#user_last_name_"+t).removeAttr("disabled"))}),e("#school_user_options").on("click",".user_num",function(){var t=e("#rows").val(),a=e(this).attr("ID");for(e("#schoolpremium2_form #package").val(a),table_header='<table cellpadding="0" cellspacing="0" class="school_users">\n<tr>\n<th>#</th>\n<th>Email address *</th>\n<th>Username *</th>\n<th>First Name *</th>\n<th>Last Name *</th>\n</tr>\n',complete_rows="",complete_count=0,i=1;i<t;i++)""!=e("#user_email_"+i).val()&&""!=e("#user_first_name_"+i).val()&&""!=e("#user_last_name_"+i).val()&&""!=e("#desired_username_"+i).val()&&(complete_rows+='<tr valign="top"><td><strong>'+i+'</strong></td><td><input name="user_email_'+i+'" type="text" class="user_email" id="user_email_'+i+'" placeholder="Email Address" value="'+e("#user_email_"+i).val()+'" /></td><input type="hidden" id="user_id_'+i+'" name="user_id_'+i+'" value="'+e("#user_id_"+i).val()+'" /><input type="hidden" id="email_taken_'+i+'" name="email_taken_'+i+'" value="'+e("#email_taken_"+i).val()+'" /><td><div><input name="desired_username_'+i+'" type="text" id="desired_username_'+i+'" class="desired_username" placeholder="Username" value="'+e("#desired_username_"+i).val()+'" /><span id="username_response_'+i+'" class="form_response">'+e("#username_response_"+i).html()+'</span><input type="hidden" id="username_taken_'+i+'" name="username_taken_'+i+'" value="'+e("#username_taken_"+i).val()+'" /></div></td><td><input name="user_first_name_'+i+'" type="text" id="user_first_name_'+i+'" placeholder="First Name" value="'+e("#user_first_name_"+i).val()+'" /><span id="user_preview_'+i+'" class="user_preview"></span></td><td><input name="user_last_name_'+i+'" type="text" id="user_last_name_'+i+'" placeholder="Last Name" value="'+e("#user_last_name_"+i).val()+'" /></td></tr>',complete_count++);e("#user_rows").fadeOut(400,function(){var t=e("#user_rows");t.html(table_header);var n=e(".school_users");for(n.append(complete_rows),j=complete_count+1;j<=a;j++)row='<tr valign="top"><td><strong>'+j+'</strong></td><td><input name="user_email_'+j+'" type="text" class="user_email" id="user_email_'+j+'" placeholder="Email Address" /></td><input type="hidden" id="user_id_'+j+'" name="user_id_'+j+'" /><input type="hidden" id="email_taken_'+j+'" name="email_taken_'+j+'" /><td><div><input name="desired_username_'+j+'" type="text" id="desired_username_'+j+'" class="desired_username" placeholder="Username" /><span id="username_response_'+j+'" class="form_response"></span><input type="hidden" id="username_taken_'+j+'" name="username_taken_'+j+'" /></div></td><td><input name="user_first_name_'+j+'" type="text" id="user_first_name_'+j+'" placeholder="First Name" disabled="disabled" /><span id="user_preview_'+j+'" class="user_preview"></span></td><td><input name="user_last_name_'+j+'" type="text" id="user_last_name_'+j+'" placeholder="Last Name" disabled="disabled" /></td></tr>',n.append(row);8==a?new_total=150:15==a?new_total=250:30==a&&(new_total=500),new_total=new_total.toFixed(2),user_tools='<div id="school_users_tools">\n<button class="button blue" id="add_a_row" type="button">Add a row</button>\n<a href="#" id="extra_users">Extra users?</a>\n</div>',t.append(user_tools),t.fadeIn(400),e("#rows").val(a),e("#total").val(new_total),new_total="&pound;"+new_total+" + VAT",e("#school_premium_price").html(new_total)})}),e("body").on("click",".user_preview_card span",function(){var t=e(this).attr("ID"),a=e(this).closest(".user_preview").attr("id");a=a.split("_"),a=a[2],"yes"==t?(e("#user_email_"+a).val(e("#user_preview_"+a+" .user_preview_card #email").html()),e("#desired_username_"+a).val(e("#user_preview_"+a+" .user_preview_card #username").html()),e("#user_first_name_"+a).val(e("#user_preview_"+a+" .user_preview_card #first_name").html()),e("#user_last_name_"+a).val(e("#user_preview_"+a+" .user_preview_card #last_name").html()),e("#user_id_"+a).val(e("#user_preview_"+a+" .user_preview_card #user_id").html()),e("#user_first_name_"+a).removeAttr("disabled"),e("#user_last_name_"+a).removeAttr("disabled"),e("#desired_username_"+a).attr("disabled","disabled")):(email_taken=e("#email_taken_"+a).val(),email_address=e("#user_email_"+a).val(),username_taken=e("#username_taken_"+a).val(),desired_username=e("#desired_username_"+a).val(),1==email_taken?(e("#user_email_"+a).val(""),e("#email_taken_"+a).val(0),apprise("Please choose a unique email address. "+email_address+" is already taken.")):1==username_taken?(e("#desired_username_"+a).val(""),e("#username_taken_"+a).val(0),apprise("Please choose a unique username. "+desired_username+" is already taken.")):(e("#user_first_name_"+a).removeAttr("disabled"),e("#user_last_name_"+a).removeAttr("disabled")),e("#desired_username_"+a).removeAttr("disabled")),e("#table_overlay").css({display:"none"}),e("#user_preview_"+a).hide()}),e("body").on("click","#extra_users",function(e){e.preventDefault(),msg="<h2>Adding Extra Users?</h2><p>Each extra user costs an additional £24.99.<br />If adding many extra users, you may want to consider a larger package.</p>",apprise(msg)}),0==e("#workplace_type").val()&&""!=e("#workplace_type").val()||e("#workplacetype_other_field").css({display:"none"}),e("#workplace_type").bind("change",function(){0==e("#workplace_type").val()?e("#workplacetype_other_field").slideDown("fast"):(e("#workplacetype_other").val(""),e("#workplacetype_other_field").slideUp("fast"))}),0==e("#career").val()&&""!=e("#career").val()||e("#career_other_field").css({display:"none"}),e("#career").change(function(){var t=e(this).parents(".detailsUpdate").data("signed-in"),a=e(this).attr("data-user-id"),n=e("#otherIdArray").val(),i=n.split(",");i.includes(e(this).val())&&(t||a)?e("#career_other_field").slideDown("fast"):(e("#career_other").val(""),e("#career_other_field").slideUp("fast"))}),e("#contact_form").css({display:"none"}),basket_count=e("#basket_contents > li").length,basket_count>2?(e("#basket_up").fadeTo("slow",.5,"easeOutExpo"),e("#basket_down").fadeTo("slow",1,"easeOutExpo")):(e("#basket_up").fadeTo("slow",.5,"easeOutExpo"),e("#basket_down").fadeTo("slow",.5,"easeOutExpo")),1==basket_count&&e("#basket_contents").height("104px"),e("body").on("change",".checkout_qty > input",function(){ids=e(this).attr("name"),ids=ids.split("-"),type_id=ids[0],item_id=ids[1],qty=e(this).val(),url="../php/ajax/changeCheckoutQuantity.php?type_id="+type_id+"&item_id="+item_id+"&qty="+qty,url=encodeURI(url),e("#checkout_wrapper").load(url)});var Ht=e("#paynow_wrapper");Ht.hide(),e("body").on("change","#agree_print_terms",function(){e("#agree_print_terms").attr("checked")&&!e("#outside_delivery").attr("checked")?e("#paynow_wrapper").show():e("#paynow_wrapper").hide();
}),e("body").on("change","#outside_delivery",function(){e("#agree_print_terms").attr("checked")&&!e("#outside_delivery").attr("checked")?(Ht.show(),e("#outside_delivery_message").hide()):e("#outside_delivery").attr("checked")?(Ht.hide(),e("#outside_delivery_message").show()):e("#outside_delivery").attr("checked")||e("#outside_delivery_message").hide()}),e(".event_past").hide(),e("#overlay").click(function(){var t=e(this);"noClose"!=e(t).attr("data-extra")&&(t.trigger(Ee),closeDashyExtra(),e("#login_popup").length&&e("#login_popup").hide(),e("#fav_menu").length&&e("#fav_menu").hide(),e(".filemanager_popup").length&&e(".filemanager_popup").hide(),e("#video_popup").length&&e("#video_popup").remove(),e(".generic_pop").length&&e(".generic_pop").hide(),e(".generic_exit_pop").length&&e(".generic_exit_pop").hide(),e(this).hide())}),e("#premium_country > #country").change(function(){if(e("#premium_country > #country").val()){var t=e("#country").val();e.post("/php/ajax/saveUserCountry.php",{country_id:t},function(t){e("#premium_pay").find("button").focus()})}}),e("#premium_signup").exists(function(){var t=e("#premium_signup");t.find("a[name='pay-by-voucher']").click(function(t){t.preventDefault(),e("#premium_pay").slideUp("fast",function(){e("#premium_pay_voucher").slideDown("fast")})}),t.on("click","a[name='pay-by-paypal']",function(t){t.preventDefault(),e("#premium_pay_voucher").slideUp("fast",function(){e("#premium_pay").slideDown("fast")})}),t.on("click","#redeem_premium_voucher",function(){var t=e("#premium_pay_voucher").find("input").val();if(""==t)apprise("You must enter a voucher code!");else{e("#premium_pay_voucher").html('<img src="'+imageAssetBase+'/images/loading.gif" alt="Please wait..." class="loader" /> Checking your voucher code...<br /><br />');var a="/php/ajax/usePremiumVoucher.php?code="+t;a=encodeURI(a),e("#premium_pay_voucher").load(a)}})});var Nt,Wt=e(".guide-item-nav"),zt=768;Wt.exists(function(){ce(),e(window).resize(function(){ce()})});var Yt=e("#guide-progress-bar"),Vt=0;if(Yt.exists(function(){e(document.documentElement).css("height","auto"),e(window).resize(function(){de()}),e(window).scroll(function(){de();var t=e(".freeDownload");Vt>=66.6&&t.toggleClass("show",!0)})}),e(".move-navigation").stick_in_parent(),e(".move-navigation").exists(function(){var t=e(".move-unit"),a=e(this);a.outerHeight();e(".move-navigation").on("click",".yearLink[data-scroll]",function(t){t.preventDefault();var n=e(this).data("scroll");smoothScrollTo(e(n)),a.find(".yearLink").removeClass("selected"),e(this).addClass("selected")}),e(window).on("scroll",function(){var n=e(this).scrollTop();t.each(function(){var i=e(".keystageLi.selected").parents(".move-navigation").offset().top-e(".keystageLi.selected").offset().top-20,o=e(this).offset().top+i,r=o+e(this).outerHeight();n>=o&&n<=r&&(a.find(".yearLink").removeClass("selected"),t.removeClass("selected"),e(this).addClass("selected"),a.find('a[data-scroll="#'+e(this).attr("id")+'"]').addClass("selected"))})})}),e("#mailingPreferences").length){var Gt=e("#top-new-resources option:selected");ue(Gt),e("#mailingPreferences").on("change","#top-new-resources",function(){var t=e(this).find("option:selected");ue(t)}),e("#mailingPreferences").on("change","#careers-select",function(){e(".vacancies-preferences").toggle()}),e("#update_mail_prefs").on("click",function(){var t={};e("#mailingPreferences select.include").each(function(){void 0!=e(this).data("mailing-id")&&(t[e(this).data("mailing-id")]=e(this).find("option:selected").val())});var a=e("#newsletter-frequency option:selected").val();(null==a||e("#newsletter-frequency").hasClass("hide"))&&(a=1);var n=e("#sendAtHour").val(),i="";window.location.pathname.length>20&&(i=window.location.pathname.replace("/mailing-preferences/","")),e.post("/php/ajax/setMailingPref.php",{action:"updateMailingAll",lists:t,categoryIds:St,frequency:a,cipherText:i,sendAtHour:n},function(e){return"success"!==e.message?void C(e.message,!0):(C("Your changes have been saved."),void setTimeout(function(){location.reload()},2e3))},"json")}),e(".unsubscribe_all").click(function(){var t=[];e("#mailingPreferences select.include").each(function(){void 0!==e(this).data("mailing-id")&&t.push(e(this).find("option:selected").val())});var a=t.every(function(e){return 1==e});return t.length!==e("#mailingPreferences select.include").length||a!==!1?void C("Your changes have been saved."):(e("#mailingPreferences select.include").each(function(){void 0!==e(this).data("mailing-id")&&e(this).find("option[value=1]").prop("selected",!0)}),void e("#update_mail_prefs").trigger("click"))})}if(e('#mailing_prefs_wrapper input[type="checkbox"][value="1"]').on("click",function(){if(e(this).is(":checked")){var t=e('#mailing_prefs_wrapper input[type="radio"][value="0"]');t.prop("checked",!0),t.parent(".radio-container").addClass("active")}else e('#mailing_prefs_wrapper input[type="radio"]').prop("checked",!1),e(".radio-container").removeClass("active")}),e(".radio-container").on("change","input",function(){e(".radio-container").removeClass("active"),e(this).parent(".radio-container").toggleClass("active")}),e("#mailing_radios").on("click","input",function(){e('#mailing_prefs_wrapper input[type="checkbox"][value="1"]').prop("checked",!0)}),e("#update_sms_prefs").on("click",function(){var t=[];e("#sms_prefs_wrapper input[type=checkbox]").each(function(){e(this).prop("checked")||t.push(e(this).val())});var a="";window.location.pathname.length>20&&(a=window.location.pathname.replace("/mailing-preferences/","")),t.length>0?e.post("/php/ajax/setMailingPref.php",{action:"updateSMSPreferences",smsIds:t,cipherText:a},function(a){if("success"!==a.message)return void C(a.message,!0);C("Your changes have been saved.");var n=e("#sms_prefs_wrapper");n.find("tr").each(function(){t.indexOf(e(this).attr("data-id"))!==-1&&e(this).remove()}),0==n.find("tr:visible").length&&(n.find("table").html("No SMS Opt-ins to show!"),e("#update_sms_prefs").addClass("hide"))},"json"):C("No changes to save.")}),e(".more_reward_actions").hide(),e("#add_fav_folder > button").on("click",function(){var t=e("#folder_name").val(),a=!0,n="";return t||(a=!1,n+="<li>Please give your folder a name!</li>"),"checked"==e("#remind_me").attr("checked")?(e("#fav_date_year").val()&&e("#fav_date_month").val()&&e("#fav_date_day").val()||(a=!1,n+="<li>Please fill in the date correctly</li>"),reminder_date=e("#fav_date_year").val()+"-"+e("#fav_date_month").val()+"-"+e("#fav_date_day").val()):reminder_date="",a?(e("#add_fav_folder").slideUp(),e("#folder_name").val(""),e("#fav_folders_wrapper").html('<img src="'+imageAssetBase+'/images/loading.gif" alt="Please wait..." />'),url="../php/ajax/addFavFolder.php?name="+t+"&reminder_date="+reminder_date,url=encodeURI(url),e("#fav_folders_wrapper").load(url)):(n="<p>There were a few problems you'll need to correct...</p><ul>"+n+"</ul>",apprise(n)),a}),e("#add_fav_folder").hide(),e("#notice > .hide").click(hideNotice),e("body").on("click","#add_a_row",function(){last_row=e(".desired_username:last").attr("id"),last_row=last_row.split("_"),last_row=last_row[2],i=1*last_row+1,row='<tr valign="top"><td><strong>'+i+'</strong></td><td><input name="user_email_'+i+'" type="text" class="user_email" id="user_email_'+i+'" placeholder="Email Address" /><input type="hidden" id="user_id_'+i+'" name="user_id_'+i+'" /><input type="hidden" id="email_taken_'+i+'" name="email_taken_'+i+'" /></td><td><div><input name="desired_username_'+i+'" type="text" id="desired_username_'+i+'" class="desired_username" placeholder="Username" /><span id="username_response_'+i+'" class="form_response"></span><input type="hidden" id="username_taken_'+i+'" name="username_taken_'+i+'" /></div></td><td><input name="user_first_name_'+i+'" type="text" id="user_first_name_'+i+'" placeholder="First Name" disabled="disabled" /><span id="user_preview_'+i+'" class="user_preview"></span></td><td><input name="user_last_name_'+i+'" type="text" id="user_last_name_'+i+'" placeholder="Last Name" disabled="disabled" /></td></tr>',e("#rows").val(i),e(".school_users").append(row)}),Pe.on("click","#general_notice .hide",function(t){t.preventDefault();var a=e(this).attr("id");e.ajax({type:"POST",url:"/php/ajax/hideGeneralNotice.php",data:{id:a},success:function(t){e("#general_notice").animate({bottom:"-150px",opacity:0},500,"easeInQuad")}})}),e("#schoolfreetrial_form").on("click","button",function(t){var a=!0,n="";if(e("#full_name").val()||(a=!1,n+="<li>Your full name</li>"),e("#email_address").val()?isEmailValid(e("#email_address").val())||(a=!1,n+="<li>"+e("#email_address").val()+" is not a valid email address</li>"):(a=!1,n+="<li>Email address</li>"),e("#role").val()||(a=!1,n+="<li>Your role</li>"),e("#school_name").val()||(a=!1,n+="<li>Your school name</li>"),e("#school_address").val()||(a=!1,n+="<li>Your school address</li>"),0==a)n="<h2>There was a problem</h2>\n<p>Please make sure all fields are completed correctly.</p><p>You haven't filled in...</p><ul>"+n+"</ul>",apprise(n);else{e(this).replaceWith('<img src="'+imageAssetBase+'/images/loading.gif" alt="Loading" class="Sending your request" />');var i=e("#full_name").val(),o=e("#email_address").val(),r=e("#role").val(),s=e("#school_name").val(),l=e("#school_address").val(),c=e("#school_number").val();e.ajax({type:"POST",url:"school_free_trial_form.php",data:{action:"send",full_name:i,email_address:o,role:r,school_name:s,school_address:l,school_number:c},success:function(t){e("#schoolfreetrial_form").html(t)}})}}),e(".newResourceButton").find("a").click(function(){if("1"==e(this).attr("data-drop-down"))return e(this).parent().find("ul").show(),!1}),e(".newResourceButton").on("mouseleave","ul",function(){e(".newResourceButton ul").hide()}),e("#front_panel_search .newResourceButton").on("mouseleave","ul",function(){e("#front_panel_search .newResourceButton").find("ul").hide()}),e(".newResourceButton").find("ul li").click(function(){if(!e(this).hasClass("noLink")){for(var t=[["Early Years","ey"],["Key Stage 1","ks1"],["Key Stage 2","ks2"],["Key Stage 3/4","ks3/4"],["SEN","sen"],["EAL Resources","eal"],["IPC","ipc"],["Home Education","homeEd"],["Parents","parents"],["Childminders","childminders"],["Elderly Care","adultEd"]],a=e(this).text(),n=0;n<t.length;n++)if(t[n][0]==a.trim()){createCookie("searchTermCategory",t[n][1],30,0);break}window.location.href=e(this).attr("data-url")}}),e("#login_popup").find(".close").click(function(){e("#login_popup").hide(),e("#overlay").hide()}),e(".col1").find(".subjects").length&&e(".col2").find(".resourcePreview").length){var Qt=e(".col1").outerHeight()-e(".col2").outerHeight();Qt>15&&(Qt-=5)}e(".topCatPage .col1").find(".display-half, .display-third, .planIt, .assessmentTests").exists(function(){var t=0,a=e(this);a.each(function(){e(this).outerHeight()>t&&(t=e(this).outerHeight())}),a.each(function(){e(this).css("height",t+"px")})}),e("a.altFilemanager").length||e(".versionLink").hide(),e(".versionLink").click(function(t){t.preventDefault(),e("a.altFilemanager").trigger("click")}),e(document).on("click","a.altFilemanager",function(t){t.preventDefault();var a=e("#overlay");a.hide(),e(".generic_pop").hide(),a.show(),e("#filemanager_popup_alternate").appendTo("body").show(),e(".filemanager_popup").show(),B(e(".filemanager_popup"))}),e("#filemanager_popup_alternate").exists(function(){he()}),e(".file-manager-general-popup").exists(function(){he()}),window.setUpFileManager=he,window.showFileManager=pe,e("#banners").length&&(e("#banners").cycle({timeout:4e3}),e("#toplevel_topical").cycle({timeout:5e3})),e("#browse_by_bar").on("click",".showAll",function(t){t.preventDefault();var a=e(this).parent().find("ul");a.css({height:"300px",overflow:"hidden"}),e(this).parent().find("li").show(),e(this).hide(),a.mCustomScrollbar()}),e(".showAll").length&&e(".showAll").css("display","inline-block").trigger("click"),e(document).on("click","#comment",function(t){t.stopPropagation(),e("#emojiIconKeyboard").show(),".intercom-composer-emoji-popover"!=e(t.target).attr("class")&&0==e(t.target).parents(".intercom-composer-emoji-popover").length&&e(".intercom-composer-emoji-popover").removeClass("active")});var Jt="";e(document).on("click","#emojiIconKeyboard",function(t){t.stopPropagation(),e(".intercom-composer-emoji-popover").toggleClass("active"),Jt||e.post("/php/ajax/getEmojiLibrary.php",{action:"returnEmojis"},function(t){"success"===t.message&&(Jt=t.page,e("#comments_container").append(Jt),e(".intercom-composer-emoji-popover").addClass("active"))},"json")}),e(document).click(function(t){".intercom-composer-emoji-popover"!==e(t.target).attr("class")&&0===e(t.target).parents(".intercom-composer-emoji-popover").length&&e(".intercom-composer-emoji-popover").removeClass("active")}),e(document).on("click",".intercom-emoji-picker-emoji",function(t){var a=e(this).attr("data-emoji"),n=(e(this).attr("data-Code"),e("#comment").val());n+=a,e("#comment").val(n)}),e(".intercom-composer-popover-input").on("input",function(){var t=this.value;""!=t?e(".intercom-emoji-picker-emoji:not([title*='"+t+"'])").hide():e(".intercom-emoji-picker-emoji").show()}),e("#emoji_keyboard").on("mouseenter",function(){e(this).removeClass("closed").addClass("open"),clearTimeout(keyboardTimer)}),e("#emoji_keyboard").on("mouseleave",function(){keyboardTimer=setTimeout(function(){e("#emoji_keyboard").removeClass("open").addClass("closed")},3500)}),e("#emoji_keyboard img").on("click",function(){var t,a,n=e(this).attr("src");if(window.getSelection){t=window.getSelection();var i=t.getRangeAt(0),a=i.commonAncestorContainer,o=a.parentElement,r=o.hasAttribute("data-emoji-keyboard");if(0==r&&e('[data-emoji-keyboard="1"]').focus(),t.getRangeAt&&t.rangeCount){a=t.getRangeAt(0),a.deleteContents();var s=document.createElement("img");s.src=n,a.insertNode(s),a.setStartAfter(s),a.setEndAfter(s),t.removeAllRanges(),t.addRange(a)}}else if(document.selection&&document.selection.createRange){var s=document.createElement("img");s.src=n,document.selection.insertNode(s)}}),e("#tabbed_content").on("focus","#comment",function(){var t=e(this).attr("contenteditable");"undefined"!=typeof t&&t!==!1&&e(this).html()==e(this).attr("placeholder")&&e(this).html("");var a=e(this),n=a.attr("placeholder");a.val()==n&&a.val(""),e(this).attr("data-comment-started","1"),e("#comments_container").find(".alert").slideUp(200),e("#submitComment").parent().hide("slide",{direction:"up"},200,function(){e("#postReview").parent().parent().show("slide",{direction:"up"},200),e("#alert_checkbox").show("slide",{direction:"up"},200),e("#subscribe_checkbox").show("slide",{direction:"up"},200),e("#requestSupport").parent().show("slide",{direction:"up"},200)})}).blur(function(){var t=e(this),a=t.attr("placeholder");""==t.val()&&t.val(a)}),e("#tabbed_content").on("focus","#support",function(){var t=e(this).attr("contenteditable");"undefined"!=typeof t&&t!==!1&&e(this).html()==e(this).attr("placeholder")&&e(this).html("");var a=e(this),n=a.attr("placeholder");a.val()==n&&a.val(""),e(this).attr("data-comment-started","1"),e("#comments_container").find(".alert").slideUp(200),e("#submitComment").parent().hide("slide",{direction:"up"},200,function(){e("#alert_checkbox").hide("slide",{direction:"down"},200),e("#subscribe_checkbox").hide("slide",{direction:"down"},200)})}).blur(function(){var t=e(this),a=t.attr("placeholder");""==t.val()&&t.val(a)}),e(".tour").exists(function(){if(isSpecialPage())return!1;var t=JSON.parse(readCookie("new_header")),a=e(this).data("target");e(window).width()<1290&&e('.tour[data-tour="switcher"]').addClass("tour-small-screen"),tether=new Tether({element:e(this),target:e(a),attachment:"top center",offset:"-10px 0"}),e(".tour").delay(1e3).animate({opacity:"1"},"600"),e(".tour-close").click(function(){var a=e(this).parent();a.fadeOut("fast");var n="";"toggle"==a.data("tour")&&(n="seen_toggle_tour"),"switcher"==a.data("tour")&&(n="seen_switcher_tour"),""!=n&&(t[n]="1",eraseCookie("new_header"),createCookie("new_header",JSON.stringify(t),90))})}),e("#translationProblem").click(function(){var t=e('meta[name="twinkl-id"]').attr("content"),a=e('<img src="'+imageAssetBase+'/images/loading.gif">'),n=e(this),i=e("#overlay"),o=e("#translationSuggestion");n.hide().after(a),e.post("/php/ajax/getTranslateBox.php",{resourceId:t},function(r){n.show(),a.remove(),"success"!==r.message?apprise(r.message):(i.show().after(r.html),B(e("#translationSuggestion")),o.find(".close").click(function(){i.trigger("click")}),o.find(".updateTranslation").click(function(){updateButton=e(this);var n=[];if(o.find("input.word").each(function(){var t=e(this);t.val()&&n.push({id:t.attr("data-id"),word:t.val()})}),!n)return void apprise("You haven't made any changes!");var r=e("#translateTitle").val();a=e('<img src="'+imageAssetBase+'/images/loading.gif">'),updateButton.after(a).hide(),e.post("/php/ajax/getTranslateBox.php",{action:"submitWords",words:n,resourceId:t,title:r},function(e){updateButton.show(),a.remove(),"success"!==e.message?apprise(e.message):(i.trigger("click"),apprise("Thank you for your suggestions! We will send you an email when we've updated the resource."))},"json")}))},"json")}),e("#tabbed_content").on("click","#postReview",function(t){function a(){n.find(".rating").parent().show("slide",{direction:"up"},200)}var n=e(t.delegateTarget),i=e(this).closest("#comments_container").data("type");n.find(".rating").parent().is(":visible")?(i="book"===i?"book":"review",submitComment(i)):(e("#requestSupport").is(":visible")?e("#requestSupport").hide("slide",{direction:"up"},200,a):a(),e("#translationProblem").hide("slide",{direction:"up"},200))}),e("#tabbed_content").exists(function(){var t=e(".button-outline-blue-link.alert"),a=e(".commentsList");t.length&&t.insertAfter(a)}),e('#comments_container[data-type="blog"]').on("click","#submitComment",function(){e(".ratingHolder").is(":visible")||e("#submitComment").parent().hide("slide",{direction:"up"},200,function(){e("#comments_container").addClass("selected tabContent"),e(".otherButtonHolder").addClass("w-100"),e("#postReview").html("Post Comment &amp; Rating"),e("#requestSupport").parent().hide(),e(".rating, .starRating").addClass("w-100"),e(".ratingHolder").addClass("d-block w-50"),e(".otherButtonHolder").show("slide",{direction:"down"},200)})}),e('#comments_container[data-type="blog"]').on("click","#postReview",function(){submitComment("blog")}),e("#tabbed_content").on("click","#requestSupport",function(){submitComment("support")}),e('#tabbed_content, [data-type="blog"]').on("mouseover",".rating .starOff, .rating .starOn",function(){if(!(e(".rating").attr("data-rating-number")>0)){var t=e(this).attr("id"),a=t.replace(/star.*?(\d)$/,"$1"),n="";/star?\_(\d+)?\_.*$/.test(t)&&(n=t.replace(/star?\_(\d+)?\_.*$/,"_$1_"));var i=e(this).parent().parent().hasClass("before-reviews"),o="star_on.png",r="star_off.png";if(i&&(o=n?"star_off_blue.png":"star_on_large.png",r="star_off_large.png"),1==a){var s=e(".rating #star"+n+"1");s.css("background",'url("'+imageAssetBase+"/images/"+o+'") 0 0 no-repeat'),n&&s.css("background-size","32px");var l=e(".rating #star"+n+"2").add(".rating #star"+n+"3").add(".rating #star"+n+"4").add(".rating #star"+n+"5");l.css("background",'url("'+imageAssetBase+"/images/"+r+'") 0 0 no-repeat'),n&&l.css("background-size","32px")}else if(2==a){var c=e(".rating #star"+n+"1").add(".rating #star"+n+"2");c.css("background",'url("'+imageAssetBase+"/images/"+o+'") 0 0 no-repeat'),n&&c.css("background-size","32px");var d=e(".rating #star"+n+"5").add(".rating #star"+n+"4").add(".rating #star"+n+"3");d.css("background",'url("'+imageAssetBase+"/images/"+r+'") 0 0 no-repeat'),n&&d.css("background-size","32px")}else if(3==a){var u=e(".rating #star"+n+"1").add(".rating #star"+n+"2").add(".rating #star"+n+"3");u.css("background",'url("'+imageAssetBase+"/images/"+o+'") 0 0 no-repeat'),n&&u.css("background-size","32px");var p=e(".rating #star"+n+"5").add(".rating #star"+n+"4");p.css("background",'url("'+imageAssetBase+"/images/"+r+'") 0 0 no-repeat'),n&&p.css("background-size","32px")}else if(4==a){var h=e(".rating #star"+n+"1").add(".rating #star"+n+"2").add(".rating #star"+n+"3").add(".rating #star"+n+"4");h.css("background",'url("'+imageAssetBase+"/images/"+o+'") 0 0 no-repeat'),n&&h.css("background-size","32px");var m=e(".rating #star"+n+"5");m.css("background",'url("'+imageAssetBase+"/images/"+r+'") 0 0 no-repeat'),n&&m.css("background-size","32px")}else if(5==a){var f=e(".rating #star"+n+"1").add(".rating #star"+n+"2").add(".rating #star"+n+"3").add(".rating #star"+n+"4").add(".rating #star"+n+"5");f.css("background",'url("'+imageAssetBase+"/images/"+o+'") 0 0 no-repeat'),n&&f.css("background-size","32px")}}}),e('#tabbed_content, [data-type="blog"]').on("mouseout",".rating .starOff",function(){var t=e(this).parents(".before-reviews"),a="star_off.png";t&&(a="star_off_large.png");var n=e(this).closest(".rating");if(!(e(n).attr("data-rating-number")>0)){var i=e(this).attr("id"),o=e(n).find(".starOff");o.css("background",'url("'+imageAssetBase+"/images/"+a+'") 0 0 no-repeat'),/star?\_(\d+)?\_.*$/.test(i)&&o.css("background-size","32px")}});var Xt=void 0!==e("#ratingSubDiv .starRating").attr("data-feature-flag");Xt&&e("#rating_confirmation_box").on("click","#reportResourceNoButton",function(){fe(e(this))}),e('#tabbed_content, [data-type="blog"]').on("click",".rating .starOff, .rating .starOn, ",function(){ve(e(this))}),e(".request-support").on("click",function(t){openZenDeskContactWidget(t);var a="star_off_large.png";e(".rating #star1").add(".rating #star2").add(".rating #star3").add(".rating #star4").add(".rating #star5").removeClass("starOn"),e(".rating #star1").add(".rating #star2").add(".rating #star3").add(".rating #star4").add(".rating #star5").addClass("starOff"),e(".rating #star1").add(".rating #star2").add(".rating #star3, .rating #star4").add(".rating #star5").css("background",'url("'+imageAssetBase+"/images/"+a+'") 0 6px no-repeat')}),e('#tabbed_content, body[data-page-type="blog"] #comments_container, .review-list').on("click","li.comment.active span.reply, li.replyToComment.active span.reply",function(){e(this).hide();var t=e("#book_page").length>0||e('body[data-page-type="blog"]').length>0?e(this).parent():e(this).parent().parent();t.append('<div class="replyForm clearfix"><textarea class="replyText" placeholder="Write a reply..."></textarea><button class="button green replyButton">Submit</button></div>'),e("li.comment.active").find(".replyButton").click(function(){var t=e(this).parents(".comment").attr("data-comment-id");submitComment("reply",t)})});var Kt=e("#tabbed_content");if(Kt.on("click","li.idea.active span.reply",function(){e(this).hide(),e(this).parent().append('<div class="replyForm clearfix"><textarea class="replyText" placeholder="Write a reply..."></textarea><button class="button green replyButton">Submit</button></div>'),e("li.idea.active").find(".replyButton").click(function(){var t=e(this).parents(".idea").attr("data-idea-id");submitIdea("reply",t)})}),Kt.on("click","#comments_container #submitComment",function(){submitComment()}),e("#tabContent2").on("click","#submitIdea",function(){submitIdea()}),function(){function t(e,t){return t=t||n.find('.starRating[data-editable="1"]'),e?void t.mouseout(_e).on("disable_edit_comment_rating",a).find(".starOn, .starOff").mouseover(ge).click(ye):void t.off("mouseout mouseover").find(".starOn, .starOff").off("click mouseover")}function a(a,n){n=n||e(a.delegateTarget),t(!1,n),n.data("editable",null).removeAttr("data-editable")}var n=e("#tabbed_content #comments .has-rating");n.length>0&&t(!0)}(),e("#showAllAlts").mouseover(function(t){t.preventDefault();var a=e("#download_selector_wrapper");a.find("#download_selector");a.hasClass("expanded")?(a.removeClass("expanded"),e("#language_selector").show(),e("#create_selector").show()):(a.addClass("expanded"),e(this).hide(),e("#language_selector").hide(),e("#create_selector").hide())}),e("#download_selector_wrapper").mouseleave(function(t){if(t.preventDefault(),!e(t.relatedTarget).hasClass("tooltip-arrow")){var a=e("#download_selector_wrapper");e(this).hasClass("expanded")&&(a.removeClass("expanded"),e("#language_selector").show(),e("#create_selector").show(),e("#showAllAlts").show())}}),e("#more_ideas").click(function(t){t.preventDefault(),limit=e("#ideas > li").size(),limit+=5;var a=e("#idea_type").val(),n=e("#idea_item_id").val();e.ajax({type:"GET",url:"/php/ajax/moreComments.php",data:{limit:limit,type:a,item_id:n,tab_type:"ideas"},success:function(t){e("#ideas_container").html(t),e(".tabContent").animate({scrollTop:e("#scroll_idea").offset().top},1500)}})}),e("#tabContent5").on("click","#suggestAnotherChange",function(t){t.preventDefault();var a=e(this).attr("data-resource");e.ajax({type:"GET",url:"/php/ajax/sendchangeresourceform.php",data:{resource_id:a},success:function(t){e("#tabContent5").html(t)}})}),e(".homepage-resource-item").add(".homepage-icon-box").on("click",function(){var t=e(this).find("a:first").attr("href");t.length>0&&(window.location.href=t)}),e("#homepageQuotes").exists(function(){e("#homepageQuotes").cycle({timeout:12e3,pause:1,before:be,slideExpr:".homepage-quote"})}),e("#front_panel_search").find("a").on("click",".logo",function(t){var a=e(this).parent().attr("href");a=a.split("/").pop(),e.ajax({type:"GET",url:"/php/ajax/log_doodle_click_through.php",data:{search_phrase:a},success:function(){}})}),e("#premiumQuotes").exists(function(){function t(){var t=e("#premiumQuotes .premiumQuote:visible").height();e("#premiumQuotes").css({height:t+"px"})}e(window).resize(function(){t()}),setTimeout(function(){t()}),e("#premiumQuotes").cycle({timeout:12e3,pause:1}),e(".premiumQuote").css({width:"100% !important"})}),e("#remindSchoolAdmin").click(function(t){t.preventDefault();var a='<img src="'+imageAssetBase+'/images/loading.gif" alt="sending" title="sending" />',n=e(".notSureAboutRenewal");n.html(a);var i=e(this).attr("data-id"),o=e(this).attr("data-check"),r={action:"send",school_id:i,expired:o};e.post("/php/ajax/sendSchoolRenewEmail.php",r,function(e){"success"==e.message?n.html("<h2>Thank you. We have sent your school admin an email.</h2>"):n.html(e.message)}).fail(function(e){n.html("<h2>Your message was not sent. Please try again or get in touch to let us know.</h2>")})}),e(".contactAdmin").click(function(t){t.preventDefault();var a=e(this),n=e('<img src="'+imageAssetBase+'/images/premium/ajax-green-square-loader.gif" alt="sending" title="sending" style="display:block;margin:20px auto;" />');a.after(n),a.hide();var i=e(".schoolPremiumPackages").attr("data-school-id"),o=e(".schoolPremiumPackages").attr("data-expired"),r=e(this).attr("data-type"),s=e(this).attr("data-package"),l={action:"send",school_id:i,expired:o,type:r,schoolPackage:s},c="renew"==r?"/php/ajax/sendSchoolRenewEmail.php":"/php/ajax/sendReminderToSchoolAdmin.php";e.post(c,l,function(t){if("success"==t.message){var i=e("<p>Thank you. We have sent your school admin an email.</p>");a.after(i)}else{var i=e("<p>"+t.message+"</p>");a.after(i)}n.remove()}).fail(function(t){var i=e("<p>Your message was not sent. Please try again or get in touch to let us know.</p>");a.after(i),n.remove()})}),e("#info_box").find(".showMore").click(function(){e("#info_box").css("overflow","none"),e("#info_box").css("height","auto"),e("#info_box").css("max-height","none"),e(this).remove()}),e("#new_sign_in_form").add("#new_sign_up_form").length){var Zt=e("#footer");Zt.hasClass("whiteout")||Zt.addClass("whiteout")}e("#packages-tab").exists(function(){if(!isSpecialPage()){var t=e(this);setTimeout(function(){t.removeClass("hidden")},500)}});var ea=e("iframe[src*=youtube]").not(".embed-container iframe,p iframe").wrap('<div class="embed-container"></div>');ea.length>0&&e("p .embed-container").parent("p").css({width:"100%"}),e("a.video").add("#events a[href^='https://www.youtube.com/watch']").add("#events a[href^='http://www.youtube.com/watch']").click(function(t){if(!e(this).attr("data-video")||e.support.video()){t.preventDefault();var a=e("#overlay");a.show();var n="";n=e(this).attr("data-video")?e(this).data("video"):e(this).attr("href");var i=e('<div id="video_popup" class="generic_pop">'),o=e(this).attr("title"),r="";"undefined"!=typeof o?r="<h2>"+o+"</h2>":i.addClass("no-title");var s=/^.*(youtu\.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,l=n.match(s);return l&&11==l[2].length?(n=l[2],r+='<div class="embed-container"><iframe width="560" height="315" src="https://www.youtube.com/embed/'+n+'?rel=0&amp;showinfo=0&amp;autoplay=1" frameborder="0" allowfullscreen></iframe></div><span class="close"></span>'):r+=returnTwinklVideoTag(n),i.html(r),i.hide(),e("body").append(i),B(i),i.show(),i.find(".close").click(function(){a.hide(),i.remove()}),!1}}),e("#create-teachmeet").exists(function(){e(this).find("textarea").trumbowyg({btns:["bold","italic","btnGrp-lists"],autogrow:!0,svgPath:"/admin/css/trumbowyg/ui/icons.svg",removeformatPasted:!0,textInParagraphs:!1}),e(this).on("click","button",function(t){if(t.preventDefault(),"submit"==e(t.target).val()||"preview"==e(t.target).val()){var a=e(this).parents("form"),n=new FormData(a[0]),i=a.attr("action");""==i&&(i=window.location),n.append("action",e(t.target).val()),e.ajax({url:i,type:"POST",contentType:!1,processData:!1,data:n,success:function(t){ke(),t.html?(e("#create-teachmeet").html(t.html),window.scrollTo(0,0)):t.preview?e("#preview-teachmeet").hide().html(t.preview).fadeIn():t.error},error:function(t){warningmessage=JSON.parse(t.responseText),ke(warningmessage.invalid),e("#create-teachmeet").formError(warningmessage.message,"Please do something",null,!1),e([document.documentElement,document.body]).animate({scrollTop:e("#events").offset().top-50},500)}})}})}),e(".js-select-subject").select2({tags:!0}),e("#optional_address").hide(),e("#teachmeet_mugs").change(function(){e("#optional_address").show()}),e(".eventsMenu").find("a").click(function(t){t.preventDefault();var a=e('<span class="arrow"></span>'),n=e(this).data("event-type");e(this).parent().hasClass("selected")||(e(".eventsMenu").find("li.selected").find(".arrow").remove(),e(".eventsMenu").find("li.selected").removeClass("selected"),e(this).parent().addClass("selected"),e(this).parent().append(a),"event-3"==e(this).data("event-type")?e("#teachmeet-info").css("display","table"):e("#teachmeet-info").css("display","none"),"event-all"==n?e("tr.event").stop().fadeIn():(e("tr.event").not("[data-event-type='"+n+"']").hide(),e("tr.event[data-event-type='"+n+"']").stop().fadeIn()))}),e(".resetContainer #email_address").select().focus(),e(document).find('a[data-toggle="collapse"]').click(function(t){t.preventDefault();var a=(e(this),e(this).data("target")||e(this).attr("href")),n=e(this).data("parent");return e(a).hasClass("show")?(e(a).slideUp(function(){e(a).removeClass("show")}),void e(this).removeClass("active")):(e(n).find('a.active[data-toggle="collapse"]').removeClass("active"),e(n).find(".collapse.show").each(function(){e(this).slideUp(function(){e(this).removeClass("show")})}),e(a).slideToggle(function(){e(this).addClass("show")}),void e(this).addClass("active"))}),0===location.pathname.indexOf("/premium-thanks")&&"undefined"!=typeof thanksData&&"function"==typeof ga&&setTimeout(function(){ga("send","event","subscription",thanksData.type,thanksData.name,thanksData.months)},5e3),e('a[href*="/products/"]').on("click",function(t){var a=e(this).attr("data-link");if("undefined"==typeof a&&!e("#homepage-carousel").length&&!e("#homepage-mobile-carousel").length){var n=e("#overlay");n.fadeIn();var i=e(this).attr("href"),o=0;e(this).hasClass("banderole")&&(o=1),t.preventDefault(),e.post(i,{action:"getPopup",from:o},function(t){if("success"==t.message){var a=e(t.html);a.hide(),n.after(a),a.find(".close").click(function(){e("#overlay").trigger("click")}),B(a),a.fadeIn()}},"json")}}),e(".illustration-box").exists(function(){e(this).on("contextmenu",function(){return!1})});var ta=e("#investment_fund");ta.find(".getStarted").click(function(){var t=e(this);
t.slideUp();var a=ta.find(".form");a.slideDown(function(){a.find('[name="name"]').focus()}),a.find(".submit").click(function(){var n=a.find('[name="name"]'),i=a.find('[name="email"]'),o=a.find('[name="description"]'),r=a.find('[name="help"]');if(""==n.val()&&n.formError("Your name is missing!","","change"),isEmailValid(i.val())||i.formError("Your email address is not valid!","","valid_email"),""==r.val()&&r.formError("Please tell us how Twinkl can help?","","change"),!a.find(".has-error").length){var s=showDialogLoader("Sending message");e.post(window.location.href,{action:"processForm",name:n.val(),email:i.val(),description:o.val(),help:r.val()},function(e){removeDialog(s),"success"!=e.message?showDialogMessage("Error!",e.message):showDialogMessage("Success!","Thank you for submitting your idea. Twinkl will be in touch shortly.",function(){n.val(""),i.val(""),o.val(""),r.val(""),t.slideDown(),a.slideUp()})})}})});var aa=e("#ambassadors");aa.find(".getStarted").click(function(){var t=e(this);t.slideUp();var a=aa.find(".form");a.slideDown(function(){a.find('[name="name"]').focus()}),a.find(".submit").click(function(n){n.preventDefault();var i=a.find('[name="name"]'),o=a.find('[name="email"]');if(""==i.val()&&i.formError("Your name is missing!","","change"),isEmailValid(o.val())||o.formError("Your email address is not valid!","","valid_email"),!a.find(".has-error").length){var r=showDialogLoader("Sending message");e.post(window.location.href,{name:i.val(),email:o.val()},function(e){removeDialog(r),"success"!=e.message?showDialogMessage("Error!",e.message):showDialogMessage("Success!","Thank you! Twinkl will be in touch shortly.",function(){i.val(""),o.val(""),t.slideDown(),a.slideUp()})})}})});var na=e("#subbox");na.find("button").click(function(){var t=e(this),a=showDialogLoader("Saving request");e.post(window.location.href,{action:"saveRequest"},function(n){if(removeDialog(a),"success"!=n.message)showDialogMessage("Error!",n.message);else{var i=e('<div class="success">Thank you!</div>');t.replaceWith(i),na.find(".small").html("Look out for your next box in the new term...")}})});var ia=!1;window.addEventListener("touchstart",function fa(){ia=!0,Ce(),window.removeEventListener("touchstart",fa,!1)},!1);var oa=0;if(xe()&&Ce(),null==getSignUpSelector()){(popupData=getSignUpSelector("popupData"))&&(openPopup(signUpSelectorPopupData.html,"overlay-bg-fade",!1,!0,!0,!0),new SignedUpAppreciationPopup(signUpSelectorPopupData.formData),signUpSelectorPopupData=void 0,addGoogleAnalyticsEvent("Signup Selector","openPopup","Opened new signup selector using system alert.",{formTypeId:2})),positionBirdy();e(window).resize(function(){positionBirdy()}),e(window).scroll(function(){positionBirdy()});var ra=e("#timer_container");if("/timer"==window.location.pathname&&e.post(document.URL,{ajax:1,action:"loadFromSession"},function(t){"success"!=t.message&&"noSession"!=t.message||(timer_type=t.vars.timer_type?t.vars.timer_type:"stopwatch",timer_font_style=t.vars.timer_font_style?t.vars.timer_font_style:"twinkl",timer_color=t.vars.timer_color?t.vars.timer_color:"#954ebe",timer_font_color=t.vars.timer_font_color?t.vars.timer_font_color:"#FFF",timer_title=t.vars.timer_title?t.vars.timer_title:"Add a title here",e(".timer_type select").val(timer_type).change(),e(".font_style select").val(timer_font_style).change(),ra.find(".container").css("background-color",timer_color),ra.find(".timer_controls div").css("color",timer_font_color),ra.find(".timer_controls input").css("color",timer_font_color),ra.find(".timer_controls #timer_title").val(timer_title),ra.find(".container").removeClass("hide"))},"json"),e("#timer_container").find(".buttons_bar #pause_timer").addClass("hide"),e("#options_bar.contracted").on("click",function(){var t=e("#options_bar");t.switchClass("contracted","expanded",{complete:function(){}}),e("#nav_content").removeClass("hide"),t.find(".arrowHolder .moveRight").addClass("hide"),t.find(".arrowHolder .moveLeft").removeClass("hide"),t.find(".options_deploy").html("X")}),e("#options_bar").on("click",".expanded .arrowHolder",function(t){e("#nav_content").addClass("hide");var a={timer_type:timer_type,timer_font_style:timer_font_style,timer_color:timer_color,timer_font_color:timer_font_color,timer_title:timer_title},n=JSON.stringify(a),i=e("#options_bar");i.switchClass("expanded","contracted",{complete:function(){e.post(document.URL,{ajax:1,action:"saveToSession",json:n},function(e){},"json")}}),i.find(".arrowHolder .moveRight").removeClass("hide"),i.find(".arrowHolder .moveLeft").addClass("hide"),i.find(".options_deploy").html("&gt;&gt;"),e("#save_settings").html("Save Settings"),t.stopPropagation()}),e("#options_bar").on("click","#save_settings",function(t){var a={timer_type:timer_type,timer_font_style:timer_font_style,timer_color:timer_color,timer_font_color:timer_font_color,timer_title:timer_title},n=JSON.stringify(a);e.post(document.URL,{ajax:1,action:"saveToDB",json:n},function(t){"success"==t.message?e("#save_settings").html("Saved"):"login"==t.message&&apprise("Please login to save your timer settings!")},"json")}),e("#options_bar").on("click","#create_timer",function(t){var a={timer_type:timer_type,timer_font_style:timer_font_style,timer_color:timer_color,timer_font_color:timer_font_color,timer_title:timer_title},n=JSON.stringify(a);e.post(document.URL,{ajax:1,action:"saveToSession",customise:"create",json:n},function(e){"success"==e.message?window.location.href="/create":"login"==e.message&&apprise("Please login to save your timer settings!")},"json")}),e("#timer_container").on("click",".buttons_bar a.button",function(t){t.preventDefault();var a=e(this).attr("id"),n=e("#timer_container"),i=e("#options_bar");"start_timer"==a&&(keepgoin=!0,timer(),n.find(".timer_controls input").attr("disabled","disabled"),e(this).addClass("hide"),n.find(".buttons_bar #pause_timer").removeClass("hide"),"Add a title here"==n.find(".timer_controls #timer_title").val()&&e("#timer_container .timer_controls #timer_title").val(""),e("#timer_container.fullScreen").length&&n.find(".buttons_bar").addClass("hide")),"pause_timer"==a&&(keepgoin=!1,timer(),e(this).addClass("hide"),n.find(".buttons_bar #start_timer").html("Continue").removeClass("hide")),"reset_timer"==a&&(startover(),n.find(".timer_controls #timer_title").val("Add a title here"),n.find(".buttons_bar #start_timer").removeClass("hide"),n.find(".buttons_bar #pause_timer").addClass("hide"),n.find(".buttons_bar #start_timer").html("Start"),"stopwatch"!=timer_type&&(n.find(".timer_controls input").removeAttr("disabled"),n.find(".timer_controls input[name=separator]").attr("disabled","disabled"))),"fullscreen_timer"==a&&e.support.fullscreen&&n.fullScreen({background:"",callback:function(){e("#timer_container.fullScreen").length?(i.addClass("hide"),n.find("#fullscreen_timer").html("Minimise"),n.find(".buttons_bar .quick_tip").removeClass("hide"),n.parent().css("overflow","hidden"),e(document).keyup(function(t){32==t.keyCode&&(e("#pause_timer").hasClass("hide")?e("#start_timer").trigger("click"):e("#pause_timer").trigger("click"))}),e(document).on("mousemove",function(){e("#timer_container .buttons_bar").removeClass("hide")}),e(document).on("mouseleave",function(){e("#timer_container .buttons_bar").addClass("hide")})):(i.removeClass("hide"),n.find("#fullscreen_timer").html("Fullscreen"),n.find(".buttons_bar .quick_tip").addClass("hide"),n.find(".buttons_bar").removeClass("hide"),e(document).unbind("keyup"),e(document).unbind("mousemove"),e(document).unbind("mouseleave"))}})}),e(".timer_type select").on("change",function(){timer_type=e(this).val(),e("#timer_container form").addClass("hide"),e("form[name="+timer_type+"]").removeClass("hide"),"stopwatch"!=timer_type&&e("form[name="+timer_type+"]").find("input").last().focus()}),e("#timer_container .font_style select").on("change",function(){timer_font_style=e(this).val(),e("#timer_container .timer_controls input").css("font-family",timer_font_style),e("#timer_container .timer_controls input").attr("class",timer_font_style)}),e("#timer_container").on("click",".bgColours div.textColour",function(t){if(t.preventDefault(),"colorPicker"==e(this).attr("id")){e("#colorPickerDiv").remove();var a=e('<div id="colorPickerDiv" class="box"></div>');e("#options_bar").append(a);var n;e("#colorPickerDiv").farbtastic(function(t){clearTimeout(n),n=setTimeout(function(){e("#timer_container .container").css("background-color",t),timer_color=t},500)});var i=e('<span class="close"></span>');e("#colorPickerDiv").append(i),e("#colorPickerDiv .close").click(function(){e("#colorPickerDiv").remove()})}else{var o=e(this).css("background-color");e("#timer_container .container").css("background-color",o),timer_color=o}}),e("#timer_container").on("click",".textColours div.textColour",function(t){if(t.preventDefault(),"colorPicker"==e(this).attr("id")){e("#colorPickerDiv").remove();var a=e('<div id="colorPickerDiv" class="box"></div>');e("#options_bar").append(a);var n;e("#colorPickerDiv").farbtastic(function(t){clearTimeout(n),n=setTimeout(function(){e("#timer_container .timer_controls div").css("color",t),e("#timer_container .timer_controls input").css("color",t),timer_font_color=t},500)});var i=e('<span class="close"></span>');e("#colorPickerDiv").append(i),e("#colorPickerDiv .close").click(function(){e("#colorPickerDiv").remove()})}else{var o=e(this).css("background-color");e("#timer_container .timer_controls div").css("color",o),e("#timer_container .timer_controls input").css("color",o),timer_font_color=o}}),e(".twinkl-timer").click(function(){e("#options_bar.expanded .arrowHolder").trigger("click")}),e("#timer_container").click(function(t){t.preventDefault();var a=t.pageX-e(this).offset().left,n=t.pageY-e(this).offset().top;isNaN(a)||isNaN(n)||(parseInt(a)>425?e("#options_bar.expanded .arrowHolder").trigger("click"):t.stopPropagation())}),e("#timer_container").on("focus",".timer_controls #timer_title",function(){var t=e(this).val();"Add a title here"==t&&e(this).val("")}),e("#timer_container").on("blur",".timer_controls #timer_title",function(){var t=e(this).val();""==t&&e(this).val("Add a title here"),timer_title=t}),e("#timer_container").on("keyup","form input",function(t){var a=this.value;e.isNumeric(a)===!1&&(this.value=this.value.slice(0,-1))}),e("#timer_container").on("blur","form input",function(t){var a=this.value;""==a?this.value="0":"timer"==timer_type&&a>parseInt(e(this).attr("data-max"))&&(this.value=0)}),e("#premium_renewal_questionaire").find("#referOptions").change(function(){"Other"==e(this).val()?e("#otherRefer").removeAttr("disabled"):e("#otherRefer").attr("disabled","disabled")}),e("#premium_renewal_questionaire").find("#reasonOptions").change(function(){"Other"==e(this).val()||"Needed a specific resource (please specify below)"==e(this).val()?e("#otherReason").removeAttr("disabled"):e("#otherReason").attr("disabled","disabled")}),e("#premium_renewal_questionaire").submit(function(){if("Other"==e("#referOptions").val()&&""==e("#otherRefer").val())apprise("Please tell us where you heard about twinkl in the 'other' text box.");else if("Other"!=e("#reasonOptions").val()&&"Needed a specific resource (please specify below)"!=e("#reasonOptions").val()||""!=e("#otherReason").val()){var t=e("#referOptions").val(),a=e("#otherRefer").val(),n=e("#reasonOptions").val(),i=e("#otherReason").val(),o="/php/ajax/processPremiumQuestionaire.php?how="+t;o=o+"&how_other="+a,o=o+"&why="+n,o=o+"&why_other="+i,o=encodeURI(o),e("#premium_renewal_questionaire_submit").html("<p>Please Wait...</p>").load(o)}else apprise("Please tell us the reason you subscribed to premium in the 'other' text box.");return!1}),e(".paypalButtons").find("input:checkbox").change(function(){var t=e(this).prop("checked");t?(e(".basicPaypalButton").addClass("hidden"),e(".autoRenewalPaypalButton").removeClass("hidden")):(e(".autoRenewalPaypalButton").addClass("hidden"),e(".basicPaypalButton").removeClass("hidden"))}),e(".paypalButtons").find("label").hover(function(){e(".autoRenewalPaypalButton").css("text-decoration","underline"),e(".basicPaypalButton .button").css("text-decoration","underline")},function(){e(".autoRenewalPaypalButton").css("text-decoration","none"),e(".basicPaypalButton .button").css("text-decoration","none")}),e(".paymentButtonGroup").find("a.button.payNow").click(function(){showDialogLoader("Making payment")}),e("#auto_renewal_popup").length){var sa=e("#auto_renewal_popup"),Ct=sa.html(),la=sa.attr("data-title"),ca=sa.attr("data-confirm"),da=sa.attr("data-no"),ua=sa.attr("data-link"),pa=sa.attr("data-remind"),ha=[{text:da,"class":"no-thanks",click:function(){removeDialog(e(this)),addGoogleAnalyticsEvent("Auto Renew Popup","click","No Thanks",null),e.get("/payments/stoppopup")}},{text:pa,"class":"remind",click:function(){removeDialog(e(this)),addGoogleAnalyticsEvent("Auto Renew Popup","click","Remind",null)}},{text:ca,"class":"confirm",click:function(){removeDialog(e(this)),addGoogleAnalyticsEvent("Auto Renew Popup","click","confirm",null),window.location=ua}}],ma={width:"620px",dialogClass:"autoBilling"};showDialogMessage(la,Ct,null,ha,ma),e(".autoBilling").find(".ui-dialog-buttonset button.confirm").addClass("button").addClass("green"),e("#auto_renewal_popup").remove(),addGoogleAnalyticsEvent("Auto Renew Popup","view","User has viewed the popup",null)}e(".billingIdDiv").find(".cancelBilling").click(function(t){t.preventDefault();var a=e(this).attr("href"),n=showDialogMessage("Cancel Auto Billing","Are you sure you want to cancel auto billing for your Twinkl subscription?",null,{Yes:function(){window.location=a},No:function(){removeDialog(n)}})}),e(".download-selector-inner").find(".alt-summary").click(function(){e(this).parent().find(".altFilemanager.button").trigger("click")}),e("#shareDownload").length&&(e("#shareDownload").show(),0!==window.location.search.indexOf("?signed_up=true")&&0!==window.location.search.indexOf("?sign_in=1")||showSharePopUp()),e("#shareDownload").click(function(t){var a=e(this).attr("href");if("/sign-in"===a||"/sign-up"===a){var n=new Date;n.setHours(n.getHours()+1);var i="shareTwinkl=1;expires="+n.toUTCString()+";path=/";return void(document.cookie=i)}t.preventDefault(),showSharePopUp()}),e(".signedUpShare.payWithATweetPop").length&&(e("#help_bird").remove(),showSharePopUp("/resources/usa-resources")),e(".suggestResourceButton").click(function(t){e(".tab").removeClass("selected"),e(".tabContent").removeClass("selected"),e("#tab5").addClass("selected"),e("#tabContent5").addClass("selected"),e(".tabContent").unbind("mousewheel");var a=!1;M(e("#tabContent5"),a),e([document.documentElement,document.body]).animate({scrollTop:e("#tab5").offset().top},500)}),e("#home_learning_hub").exists(function(){function t(t){var n=LearningHub.age,i=LearningHub.date;if(n&&""!==String(n).trim()&&i&&""!==String(i).trim()){var t=t,o=t.parent();o.toggleClass("loading"),e.post(LearningHub.url+"/change-hub",{age:LearningHub.age,date:LearningHub.date},function(e,n,i){200===i.status?(t.html(e.html),a(),o.toggleClass("loading")):(apprise("Sorry, something has gone wrong."),o.removeClass("loading"))},"json")}}function a(){e(".row.double-item").exists(function(){e(".row.double-item").each(function(){if(i)return e(this).find("[data-group]").hide().removeClass("active"),void e(this).find("[data-group-tab]").removeClass("active");var t=e(this).find("[data-group-tab]:first").data("group-tab");e(this).find("[data-group]").not("[data-group="+t+"]").hide(),e(this).find("[data-group]").filter("[data-group="+t+"]").addClass("active")})})}var n=e(".home-learning-hub-list");LearningHub={},LearningHub.age=e("[data-age].active").data("age"),LearningHub.date=e("#hub_selection").val(),LearningHub.url="/home-learning-hub";var i=e("body").hasClass("is-mobile-device");e("body").on("click","[data-age]",function(a){return a.preventDefault(),!e(this).hasClass("active")&&(e("[data-age]").removeClass("active"),e(this).addClass("active"),LearningHub.age=e(this).data("age"),void t(n))}),e("body").on("change","#hub_selection",function(a){a.preventDefault(),LearningHub.date=e(this).val(),e.support.history&&history.pushState("","",LearningHub.url+"/"+LearningHub.date),t(n)}),a(),e("body").on("click","[data-group-tab]",function(t){t.preventDefault();var a=e(this).parents(".row"),n=e(this).data("group-tab");a.find("[data-group]").hide(),a.find("[data-group="+n+"]").fadeIn(),a.find("[data-group-tab]").removeClass("active");var o=e(this);if(o.addClass("active"),i){o.insertAfter(o.siblings("[data-group-tab]").last());var r=o.parent(),s=r.find(".border-break").first();r.find(".border-break").remove(),r.find("[data-group-tab]").not(":last").each(function(){e(s.outerHTML()).insertAfter(e(this))})}})}),e(".merlin-page").exists(function(){function t(){e(".merlin-secondary").hide(),e(".merlin-primary").css("display","flex"),e("[data-merlin-secondary]").removeClass("active"),e("[data-merlin-primary]").toggleClass("active")}function a(){e(".merlin-primary").hide(),e(".merlin-secondary").css("display","flex"),e("[data-merlin-primary]").removeClass("active"),e("[data-merlin-secondary]").toggleClass("active")}var n;window.location.hash&&(n=window.location.hash.substring(1)),e(".merlin-primary").length&&"secondary"!=n?t():a(),e("[data-merlin-primary]").on("click",function(e){e.preventDefault(),t()}),e("[data-merlin-secondary]").on("click",function(e){e.preventDefault(),a()})}),e(".carousel__navigation-item").click(function(t){t.preventDefault();var a=parseInt(e(this).index()),n=e(this).closest(".main-carousel-slide").parent().find(".carousel-item"),i=n.find(".carousel__navigation-item"),o=n.length,r=e(this).data("tab");a%=o;var s=e(n.toArray()[r]);s.fadeOut("fast",function(){s.removeClass("active"),s=e(n.toArray()[a]).fadeIn("fast").addClass("active"),i.removeClass("active"),e(i.toArray()[parseInt(a)+parseInt(a)*parseInt(o)]).addClass("active")})}),e("#hive-carousel, #original-carousel, #carousel, #homepage-carousel").exists(function(){function t(t){function a(a){u=n(a.target),u&&(e(t+" .carousel__navigation-item").each(function(){if(e(this).first().hasClass("active"))return p=e(this).data("tab"),c=e(i.toArray()[p]),d=p,!1}),e(u).attr("class").indexOf("previous-item")!==-1?d--:d++,d<0?d=s:d>s&&(d=0),l.fadeOut("fast",function(){e(this).html((d+1).toString()).fadeIn("fast")}),c.fadeOut("fast",function(){c.removeClass("active"),c=e(i.toArray()[d]).fadeIn("fast").addClass("active"),o.removeClass("active"),e(o.toArray()[parseInt(d)+parseInt(d)*parseInt(i.length)]).addClass("active")}))}function n(e){if(String.prototype.indexOf.call(e.classList,"next-item")>-1||String.prototype.indexOf.call(e.classList,"previous-item")>-1)return e;var t=e.parentNode;return!!t&&n(t)}var i=e(t+" .carousel-item"),o=e(t+" .carousel__navigation-item"),r=i.length,s=r-1,l=e(t+" .carousel-item-label"),c=e(i.toArray()[0]),d=0,u=null,p=0;e(t+" .next-item").on("click",a),e(t+" .previous-item").on("click",a),(e("#homepage-carousel").length>0||e("#homepage-mobile-carousel").length>0)&&r>1&&setInterval(function(){e(t+" .next-item").trigger("click",a)},5e3)}const a=["#hive-carousel","#original-carousel","#carousel","#homepage-carousel","#homepage-mobile-carousel"];a.forEach(function(a){e(a).length&&t(a)})}),e(".beyond-carousel-link").click(function(){var t=e(this).find("a").attr("href");window.open(t,"_blank").focus()}),e("#resource").on("click",".commentLike",function(){var t=e(this),a=t.data("comment-id"),n=t.hasClass("liked"),i=n?"unlike":"like";n||e.get("/ajax/resource/comment/"+i+"/"+a,function(n){"success"===n.status&&(t.find("div.count").html(n.count),t.hide(),e("#commentThankYou-"+a).show())})}),e(".toggle-block-toggle-wrapper a").exists(function(){e(this).parent().parent().find(".darkStretch:visible, .lightStretch:visible, .schoolPremiumIntro:visible").addClass("block-toggle").hide(),e(this).click(function(t){t.preventDefault(),e(".block-toggle").slideToggle()})}),$e(),e(document).on("click","#schoolShareTerms",function(){var t=e(".shareTwinklPopup").css("display");"none"===t?e(".shareTwinklPopup").css("display","flex"):e(".shareTwinklPopup").css("display","none")}),e(".periodic-table").exists(function(){e(this).find(".a1, .a2, .a3, .a4, .a5, .a6, .a7, .a8, .a9, .b2, .b3, .b4, .b5, .b6, .b7, .b8, .b9, .c3, .c4, .d3, .d4, .e3, .e4, .f3, .f4, .g3, .g4, .h3, .h4, .i4, .j4, .k4, .l4, .m4, .n4, .o4, .p4, .q4, .r4, .c5, .d5, .e5, .f5, .g5, .h5, .i5, .j5, .k5, .l5, .m5, .n5, .o5, .p5, .q5, .r5, .c6, .d6, .e6, .f6, .g6, .h6, .i6, .j6, .k6, .l6, .m6, .n6, .o6, .p6, .q6, .r6, .c7, .d7, .e7, .f7, .g7, .h7, .i7, .j7, .k7, .l7, .m7, .n7, .o7, .p7, .q7, .r7, .c8, .d8, .e8, .f8, .g8, .h8, .i8, .j8, .k8, .l8, .m8, .n8, .o8, .p8, .q8, .r8, .c9, .d9, .e9, .f9, .g9, .h9, .i9, .j9, .k9, .l9, .m9, .n9, .o9, .p9, .q9, .r9, .n2, .o2, .p2, .q2, .r2, .r1").filter(function(){return!e(this).children().length}).append('<div class="disabled w-100 element text-center tiny" style="background-repeat:no-repeat; background-image: url(/images/wellbeing/element_outline.png); background-color: #a0ce55 !important; filter: grayscale(75%)"></div>')}),e("#wellbeing-video").exists(function(){var e=cloudinary.Cloudinary["new"]({cloud_name:"tw1nv",secure:!0}),t=document.querySelector("#wellbeing-video");e.videoPlayer(t,{fluid:!0,controls:!0})}),function(){var t=e('meta[name="assets"]').attr("content");null!=t&&t.toLowerCase().indexOf("dl")!==-1&&e("#download_link, .filemanager_popup .button[download]").twklCompInitDlContextMenu()}(),e(".newSignUpFree").click(function(){var t=e(this).attr("data-resource");t||(e("html").animate({scrollTop:"1px"},500),e("#email").focus())}),e("#payment_sign_up_form").find("#payment_sign_up_email").focus(),e("#premium_page").find(".triggerExtra").click(function(t){t.preventDefault(),e("#premium_page").find("#bundleType2").prop("checked",!0),e("#premium_page").find("#bundleType2").trigger("click")}),e("#global-partnership-guide").click(function(t){t.preventDefault();var a=e("#overlay");e(".filemanager_popup").appendTo("body").show(),B(e(".filemanager_popup")),a.show()}),e(".zendesk-inline").exists(function(){var t=e("#zenDeskLoadButton");t.removeClass("position-fixed").addClass("d-inline-block"),e(this).append(t)}),e("#exit-survey-form").exists(function(){e("#exit-survey-rejoin-date").datepicker({dateFormat:"dd-mm-yy",minDate:0,firstDay:1,showOtherMonths:!0,selectOtherMonths:!0}),e("#exit_survey_reason").change(function(){e("#other_reason_info").addClass("hide").removeClass("required").val(""),e(".exit-survey-date").addClass("hide"),e("#exit-survey-rejoin-date").removeClass("required").val(""),e(this).find(":selected").data("other-reason")?e("#other_reason_info").removeClass("hide").addClass("required"):1==e(this).find(":selected").attr("data-rejoin-date")&&(e(".exit-survey-date").removeClass("hide"),e("#exit-survey-rejoin-date").addClass("required"))}),e(this).on("submit",function(t){t.preventDefault();var a=e("#exit_survey_reason").val(),n=e("#exit_survey_comment").val(),i=e("#exit-survey-rejoin-date").val(),o=e("#exit_survey_recommend").val(),r=e("#exit_survey_feedback").val(),s=e("#exit_survey_reason").find(":selected"),l=s.data("other-reason");if(1==l)var c=e("#other_reason_info").val();var d=e("#exit-survey-form"),u=d.find(":input.required");e(u).each(function(){var t=e(this).val();""==t?(e(this).css("border-color","red"),e("#exit_survey_missing_fields_alert").fadeIn("fast",function(){setTimeout(function(){e("#exit_survey_missing_fields_alert").fadeOut("slow",function(){e(this).remove()})},3e3)})):e(this).removeAttr("style")}),""==i&&(i=void 0),""!=a&&""!=c&&""!=i&&""!=o&&""!=r&&e.post(window.location.href,{option:a,other_reason:c,comment:n,rejoin_date:i,recommend_twinkl:o,discuss_feedback:r},function(t){"success"==t.message?(e(".heading_panel").remove(),e("#exit-survey-index").remove(),e(".container:first").after(t.html)):apprise(t.message)})})}),e(".christmas-postbox").exists(function(){function t(){var t=e(this),a=e(".submit-cta").first();t.width()<768?a.prop("disabled",!1):a.prop("disabled",!0)}t(),e(window).on("resize",t)}),e("#edit-details").length&&e("#edit-details button.form-submit").on("click",function(t){if(t.preventDefault(),valid=validate_details_form(),valid){var a=document.getElementById("details_form"),n=new FormData(a),i=e("#password").val();n.append("password",i);var o=showDialogLoader("Updating details");e.ajax({url:window.location,type:"POST",enctype:"multipart/form-data",contentType:!1,processData:!1,data:n,success:function(t){if(removeDialog(o),t instanceof Object&&t.hasOwnProperty("message")){t=t.message;var a=!("success"===t);if(a)return void showDialogMessage("Error",t)}var n=e("<div>"+t+"</div>");n.dialog({draggable:!1,modal:!0,resizable:!1,dialogClass:"no-close account-dialog-modal",height:"auto",width:400,open:function(){var e=n.find('input[name="redirect"]');if(e.length){var t=e.val();setTimeout(function(){window.location=t},1e3)}},close:function(){location.reload()}})},error:function(){showDialogMessage("Error","Unexpected error happened. Please refresh the page and try again.")}})}}),e("#change-password").length&&e("#change-password button.form-submit").on("click",function(t){if(t.preventDefault(),valid=validate_password_form(),valid){var a=document.getElementById("password_form"),n=new FormData(a),i=showDialogLoader("Updating password");e.ajax({url:window.location,type:"POST",enctype:"multipart/form-data",dataType:"json",contentType:!1,processData:!1,data:n,success:function(t){removeDialog(i);var a=e("<div>"+t.html+"</div>");a.dialog({draggable:!1,modal:!0,resizable:!1,dialogClass:"no-close account-dialog-modal",height:"auto",width:400,close:function(){"success"===t.message&&location.reload()}})}})}})}}(jQuery);var shareDownloadHtml,xmlHttp,Effect,reviewCommentAjax=!1;$("#comments").on("click","#comment_response button",function(){var e=$("#comment_response"),t=e.find("textarea").val(),a=e.find('input[name="response_id"]').val(),n=e.find('input[name="ticket_id"]').val(),i=e.parent();$.post("/php/ajax/reviewComment.php",{response_id:a,ticket_id:n,message:t},function(e){"success"!==e.message?apprise(e.message):(e.html?i.html(e.html):i.animate({opacity:0},500,function(){i.html("Thanks for your feedback!"),i.animate({opacity:1},500)}),reviewCommentAjax=!1)},"json")});var toggleFavOnEscape=function(e){27==e.which&&hideFavMenu()};$("#save-resource-form .preview-image").on("contextmenu",function(){return!1}),$("#save-resource-form a.confirmButton").click(function(e){e.preventDefault();var t=createLoaderGif("green"),a=$("#save-resource-form .loader"),n=$(this);a.html(t).show(),n.hide();var i=$("#save-resource-form").attr("action"),o=n.data("saved");$.post(i,{action:"saveResource",itemId:$(this).data("item")},function(e){return"success"!==e.message?(showDropDownMessage(e.message,!0),a.hide(),void n.show()):void window.parent.postMessage({type:"1"==o?"unsaveResourceEvent":"saveResourceEvent",payload:"success"},"*")},"json").fail(function(){a.hide(),n.show(),showDropDownMessage("Unable to save resource",!0)})});var countryCountyList=["244","245","246","247"];"/motivation"!=location.pathname.substr(0,11)&&"/virtual-hugs"!=location.pathname.substr(0,13)||$(".addthis_button_compact, .addthis_toolbox a").on("click",function(){refreshShareData($(this))}),$(".addthis_button_compact, .addthis_toolbox a").click(function(){var e=$(this),t=!1;$("script").each(function(){var e=$(this).attr("src")?$(this).attr("src"):"",a=e.indexOf("s7.addthis.com");2==a&&(t=!0)}),t||loadScript("//s7.addthis.com/js/300/addthis_widget.js#pubid=twinkl",function(t,a){"ok"==a&&setTimeout(function(){e.trigger("click")},500)})}),$(".premiumRadioButton").change(function(){$(this).parents(".premiumOptionsHolder:first").find(".showCheckedBox").removeClass("showCheckedBox"),$(this).siblings("label").addClass("showCheckedBox")}),$("input").add("textarea").placeholder(),0===window.location.pathname.lastIndexOf("/sign-in",0)&&preloadImages([imageAssetBase+"/images/loading-sun-smile.png",imageAssetBase+"/images/loading-sun-rays.png"]),$("#terms-conditions-popup").on("click",function(){var e=$(this).attr("data-href")||"/mtc/gdpr";apprise("Do you accept the terms and conditions?",{verify:!0},function(t){$.post(e,{status:t?1:0}).fail(ajaxErrorHandler).always(function(){$("#mtc-gdpr-notice").hide(300)})})});var currentsec=0,currentmin=0,currentmil=0,keepgoin=!1,timer_type="",timer_font_style="",timer_color="",timer_font_color="",timer_title="",stopwatch_form=document.forms.stopwatch,timer_form=document.forms.timer,countdown_form=document.forms.countdown;$("#infoBoxDiv.alert.userCountyUnset").length>0&&$(function(e){var t=$("#messageOverlay"),a=$("#infoBoxDiv"),n=a.find(".bottomFormHolder");n.find("button.submit").click(function(e){t.trigger("click"),$("#container .loggedInUser #countryFlag").trigger("click")}),n.find("button.cancel").click(function(e){t.trigger("click")})}),"undefined"==typeof twinklGsc&&(twinklGsc=null),$("#generic_mobile_menu").length>0&&$("#generic_mobile_menu").change(function(){var e=$(this).children(":selected").attr("data-link"),t="https://"+window.location.host+e;window.location.href=t}),$(function(){function e(e,t){(o=$("#premium_page")).length>0&&(r=o.find(".tab-nav-block.sub-duration"),s=r.find(".tab-nav-button"),(l=o.find(".packageBox-wrapper.classicSub")).length>0&&(c=l.find('input[name="price_matrix_id"]'),d=l.find('input[name="sub_duration"]'),u=l.find(".currencyCheck"),p=l.find(".priceSmall")),(h=o.find(".packageBox-wrapper.platinumSub")).length>0&&(m=h.find('input[name="price_matrix_id"]'),f=h.find('input[name="sub_duration"]'),v=h.find(".currencyCheck"),g=h.find(".priceSmall")),(_=o.find(".packageBox-wrapper.platinumPlus")).length>0&&(y=_.find('input[name="price_matrix_id"]'),w=_.find('input[name="sub_duration"]'),b=_.find(".currencyCheck"),k=_.find(".priceSmall")))}function t(e,t){function a(e,t,a){var i=o.find(".packageBox-wrapper .price-span");n(e,t,a),i.stop().css({top:"-200px"}).animate({top:0},"slow")}function n(e,t,a){e===!0&&(u.html($(_.currencyCheckHtml).html()),p.html(_.priceSmallHtml)),t===!0&&(v.html($(x.currencyCheckHtml).html()),g.html(x.priceSmallHtml)),a===!0&&(b.html($(C.currencyCheckHtml).html()),k.html(C.priceSmallHtml))}i=getTwinklPremimumPriceData(),t=t!==!1;var r=e.subDuration,s=e.corePriceMatrixId,l=e.extraPriceMatrixId,h=e.ultmatePriceMatrixId,_=null!=s?i[s]:null,x=null!=l?i[l]:null,C=null!=h?i[h]:null;null==_&&null==x&&null==C||(null!=_&&(c.val(s),d.val(r)),null!=x&&(m.val(l),f.val(r)),null!=C&&(y.val(h),w.val(r)),t?a(null!=_,null!=x,null!=C):n(null!=_,null!=x,null!=C))}function a(e){null!=l&&l.find(".price-block").css({visibility:e?"visible":"hidden"}),null!=h&&h.find(".price-block").css({visibility:e?"visible":"hidden"}),null!=_&&_.find(".price-block").css({visibility:e?"visible":"hidden"})}function n(e){e?$(".visitPremiumPageOffer-block").show():$(".visitPremiumPageOffer-block").hide()}var i=getTwinklPremimumPriceData(),o=null,r=null,s=null,l=null,c=null,d=null,u=null,p=null,h=null,m=null,f=null,v=null,g=null,_=null,y=null,w=null,b=null,k=null;e(),a(!1),null!=s&&s.length>0&&(t(s.filter(":first").data(),!1),r.on("click",".tab-nav-button",null,function(e){e&&e.preventDefault();var a=$(e.target);if(!a.hasClass("selected")){s.removeClass("selected");var i=a.data();s.filter('[data-sub-duration="'+(i.subDuration||"")+'"]').addClass("selected");var o=!1;i.subDuration&&12!=i.subDuration||(o=!0),n(o),t(i)}})),a(!0)}),$("#new_sign_in_form").length>0&&$("#help_bird").css({opacity:.3}),$(".vb-category-box").length>0&&$(window).on("load",function(){$(".vb-head").mCustomScrollbar({theme:"minimal",axis:"x"})});var slideIndexTm=1;if($(function(){$("#twinklStoryArea").length>0&&(showSlides(),$(".year").on("click",function(){var e=$(this).data("page");slideIndexTm=e,$(".year").removeClass("active"),$(this).addClass("active"),showSlides(e)}),$(".twinklStoryLeftArrow").on("click",function(){showSlides(slideIndexTm+=-1,$(this))}),$(".twinklStoryRightArrow").on("click",function(){showSlides(slideIndexTm+=1,$(this))}))}),jQuery(window).load(function(){
$(".doodle-animation").exists(function(){!function(e,t,a){function n(a){var n="visible",o="hidden",r={focus:n,focusin:n,pageshow:n,blur:o,focusout:o,pagehide:o};a=a||t.event,a.type in r?(e("body").removeClass("hidden visible"),e("body").addClass(r[a.type])):(e("body").removeClass("hidden visible"),e("body").addClass(this[i]?"hidden":"visible"))}var i="hidden";e(".doodle-gem").exists(function(){doodleGemAnimationGeneration()}),e(".doodle-cin-balls").exists(function(){generateCinAnimation()}),e(".doodle-snow-flakes").exists(function(){generateDoodleSnowFlakes()}),i in a?(a.addEventListener("visibilitychange",n),e(".doodle-confetti, .doodle-gem").exists(function(){a.addEventListener("visibilitychange",doodleGemCheckWindowState)}),e(".doodle-cin-balls").exists(function(){a.addEventListener("visibilitychange",cinCheckWindowState)}),e(".doodle-animation,.doodle-snow-flakes").exists(function(){a.addEventListener("visibilitychange",snowFlakeCheckWindowState)})):(i="mozHidden")in a?(a.addEventListener("mozvisibilitychange",n),e(".doodle-confetti, .doodle-gem").exists(function(){a.addEventListener("mozvisibilitychange",doodleGemCheckWindowState)}),e(".doodle-cin-balls").exists(function(){a.addEventListener("mozvisibilitychange",cinCheckWindowState)}),e(".doodle-animation,.doodle-snow-flakes").exists(function(){a.addEventListener("mozvisibilitychange",snowFlakeCheckWindowState)})):(i="webkitHidden")in a?(a.addEventListener("webkitvisibilitychange",n),e(".doodle-confetti, .doodle-gem").exists(function(){a.addEventListener("webkitvisibilitychange",doodleGemCheckWindowState)}),e(".doodle-cin-balls").exists(function(){a.addEventListener("webkitvisibilitychange",cinCheckWindowState)}),e(".doodle-animation,.doodle-snow-flakes").exists(function(){a.addEventListener("webkitvisibilitychange",snowFlakeCheckWindowState)})):(i="msHidden")in a?(a.addEventListener("msvisibilitychange",n),e(".doodle-confetti, .doodle-gem").exists(function(){a.addEventListener("msvisibilitychange",doodleGemCheckWindowState)}),e(".doodle-cin-balls").exists(function(){a.addEventListener("msvisibilitychange",cinCheckWindowState)}),e(".doodle-animation,.doodle-snow-flakes").exists(function(){a.addEventListener("msvisibilitychange",snowFlakeCheckWindowState)})):"onfocusin"in a?(a.onfocusin=a.onfocusout=n,e(".doodle-confetti, .doodle-gem").exists(function(){a.onfocusin=a.onfocusout=doodleGemCheckWindowState}),e(".doodle-cin-balls").exists(function(){a.onfocusin=a.onfocusout=cinCheckWindowState}),e(".doodle-animation,.doodle-snow-flakes").exists(function(){a.onfocusin=a.onfocusout=snowFlakeCheckWindowState})):(t.onpageshow=t.onpagehide=t.onfocus=t.onblur=n,e(".doodle-confetti, .doodle-gem").exists(function(){t.onpageshow=t.onpagehide=t.onfocus=t.onblur=doodleGemCheckWindowState}),e(".doodle-cin-balls").exists(function(){t.onpageshow=t.onpagehide=t.onfocus=t.onblur=cinCheckWindowState}),e(".doodle-animation,.doodle-snow-flakes").exists(function(){t.onpageshow=t.onpagehide=t.onfocus=t.onblur=snowFlakeCheckWindowState})),void 0!==a[i]&&n({type:a[i]?"blur":"focus"})}(window.jQuery,window,document)})}),$("#subscriptionGuideRedirect").click(function(){$("html, body").animate({scrollTop:$("#premiumTextGuideArea").offset().top},1e3)}),$("body").find("#sticky-header").length&&window.location.pathname.lastIndexOf("/premium",0)===-1&&window.location.pathname.lastIndexOf("/payment",0)===-1){var mainHeader=$("#header"),stickyHeight=mainHeader.outerHeight();$(window).scroll(function(){if($(window).scrollTop()>=stickyHeight&&!$("#header").hasClass("sticky")){mainHeader.addClass("sticky");var e=mainHeader.outerHeight();document.body.style.paddingTop=stickyHeight-e+"px"}else $(window).scrollTop()<stickyHeight&&$("#header").hasClass("sticky")&&(mainHeader.removeClass("sticky"),document.body.style.paddingTop="0")})}$("#twinkl_green").exists(function(){var e=document.getElementById("twinkl_schools"),t=document.getElementById("twinkl_individuals");$(".twinklGreenMenu ul li").click(function(a){a.preventDefault();var n=$(this).data("type");"schools"==n?($("#content_schools").fadeIn(),$(this).find(".arrow").show(),$("#content_individuals").fadeOut(),$("#twinkl_individuals").find(".arrow").hide(),e.classList.add("selected"),t.classList.remove("selected")):($("#content_individuals").fadeIn(),$(this).find(".arrow").show(),$("#content_schools").fadeOut(),$("#twinkl_schools").find(".arrow").hide(),t.classList.add("selected"),e.classList.remove("selected"))})}),$("#helpSection").length&&($(".questionCategory").mouseover(function(){""!=$(this).find(".help-category-icon").data("hover")&&$(this).hasClass("selected")===!1&&$(this).find(".help-category-icon").attr("src",$(this).find(".help-category-icon").data("hover"))}),$(".questionCategory").mouseout(function(){$(this).find(".help-category-icon").data("icon")&&$(this).hasClass("selected")===!1&&$(this).find(".help-category-icon").attr("src",$(this).find(".help-category-icon").data("icon"))}),$(".questionsSection").click(function(){var e=$(this)[0];console.log(e.open),1==e.open?($(this).find(".questionCategoryWidget img").attr("src",$(this).find(".questionCategoryWidget img").data("expand")),console.log("open is true")):($(this).find(".questionCategoryWidget img").attr("src",$(this).find(".questionCategoryWidget img").data("collapse")),console.log("open is false"))}),$(".helpYesButton").click(function(){$(".yesResponseContainer").hasClass("hide")?$(".yesResponseContainer").removeClass("hide"):$(".yesResponseContainer").addClass("hide")}),$(".helpNoButton").click(function(){$(".feedbackOptions").hasClass("hide")?$(".feedbackOptions").removeClass("hide"):$(".feedbackOptions").addClass("hide")}),$(".otherFeedbackButton").click(function(){$(".noResponseContainer").hasClass("hide")?$(".noResponseContainer").removeClass("hide"):$(".noResponseContainer").addClass("hide")})),$("#newsroom-index").exists(function(){$("#newsroom-nav-menu nav ul li a:not(:only-child)").click(function(e){$(this).siblings(".nav-dropdown").toggle(),$("#newsroom-nav-menu .nav-dropdown").not($(this).siblings()).hide(),e.stopPropagation()}),$("html").click(function(){$("#newsroom-nav-menu .nav-dropdown").hide()}),$("#newsroom-nav-menu #nav-toggle").click(function(){$("#newsroom-nav-menu nav ul").slideToggle()}),$("#newsroom-nav-menu #nav-toggle").on("click",function(){this.classList.toggle("active")})}),$("#planitSubPageMaths").exists(function(){$("#activityBtn").click(function(){$("html, body").animate({scrollTop:$("#resource_by_activity").offset().top},2e3)}),$("#curriculumBtn").click(function(){$("html, body").animate({scrollTop:$("#resource_by_curriculum").offset().top},2e3)})}),$("#free-resource").exists(function(){$(".search").find("#search_form").submit(function(){createCookie("freeSearchOrigin",1,3600)}),$("#sticky-header").find("#search_form").submit(function(){createCookie("freeSearchOrigin",1,3600)})}),$(window).resize(function(){trackHeight(".beyond-blog-image",".beyond-more-link")}),trackHeight(".beyond-blog-image",".beyond-more-link"),$("#parents").exists(function(){function e(){var e=viewport&&viewport.is("<lg")?"90%":"700";o.show(),$("#text_prompt_intro").dialog({modal:!0,resizable:!1,draggable:!1,width:e,dialogClass:"sms-sign-up",close:function(){o.hide()}}),$(".ui-dialog-titlebar").hide(),$("#show_sign_up_form_hub").click(function(){t()}),$(".cancel, .close").click(function(){$("#text_prompt_intro").dialog("close")})}function t(){$("#text_prompt_intro").dialog("close"),modalWidth=viewport&&viewport.is("<lg")?"70%":"1000",i.dialog({modal:!0,resizable:!1,draggable:!1,width:modalWidth,dialogClass:"sms-sign-up",title:"SMS Sign Up",close:function(){o.hide()}}),$(".ui-dialog-titlebar").hide(),$(".close").click(function(){i.dialog("close")})}var a=!1,n=document.createElement("video");n.canPlayType&&n.canPlayType("video/mp4").replace(/no/,"")&&(a=!0),a||($(".link-image").each(function(){$(this).find("video").remove(),$(this).css("background-image",$(this).attr("data-img"))}),$(".animatedImg").each(function(){$(this).find("video").remove(),$(this).css("background-image",$(this).attr("data-img"))})),$(".sign-up").click(function(){e()}),$("#show_sign_up_form").click(function(){$("#text_prompt_intro").addClass("hidden"),$(".dismiss").addClass("hidden"),$("#parents_sms_form").removeClass("hidden"),t()}),$("#sms_opt_in").click(function(){$("#parents_sms_form").addClass("hidden")}),$("#birthday").on("change",function(e){var t=$(this).val();t=new Date(t);var a=calculateDifferenceInWeeks(t);$("#week_number").val(a)});var i=$("#sms_sign_up"),o=($("#sign-up-modal"),$("#overlay")),r=$("#mobile_number"),s=$("#confirm_mobile_number"),l=$("#mobile_number, #confirm_mobile_number");l.on("keypress keydown",function(e){var t=3;return lockStartOfInput(t,e,this.selectionStart)}),r.on("blur",function(e){var t=13,a=$(this).val();a=a.replace(/ /g,"");var n=$(this);validatePhoneNumber(a,t)||n.formError("Invalid phone number","","valid_phone_number")}),s.on("blur",function(e){var t=$("#mobile_number"),a=$(this);a.val()!=t.val()&&a.formError("Numbers do not match","","match","","#mobile_number")}),$("#sms_sign_up").on("change",function(e){var t=$("#mobile_number"),a=$("#confirm_mobile_number"),n=$("#week_number").val();0<n&&$("#opt_in").prop("checked")&&"+44"!=t.val()&&a.val()==t.val()&&0==i.find(".form-error").length?$("#sms_opt_in").removeClass("disabled"):$("#sms_opt_in").addClass("disabled")})}),jQuery(document).ready(function(e){function t(){e(".slide-element-in-on-scroll").each(function(){var t=0;t=e(this).outerHeight();var a=e(window).scrollTop();if("sticky-header"===e(this).attr("data-clear-id")){var n=e(this).attr("data-clear-height");t=n,(0!==a&&void 0===n||null===n)&&(t=0)}if(e(this).css("top",t).attr("data-height",e(this).outerHeight()).attr("data-top",t),e(this).attr("data-clear-id")){var i=e("#"+e(this).attr("data-clear-id")).outerHeight();e(this).attr("data-clear-height",i)}else e(this).attr("data-clear-height",0)}),r.each(function(){var t=e(this);newWidth=t.parent().width(),newWidth>t.data("width")&&(newWidth=t.data("width")),t.width(newWidth).height(newWidth*t.data("aspectRatio"))})}function a(t,a,n){n=n||1250,e(t).click(function(t){t.preventDefault();var i=e(e(this).attr("href"));if(i.length){for(var o=0,r=0;r<a.length;r++)o+=e(a[r]).outerHeight()||0;e("html, body").animate({scrollTop:i.offset().top-o},{duration:n,step:function(e,t){var a=i.offset().top-o;t.end!==a&&(t.end=a)}})}})}function n(t,a,i){clearTimeout(d),"packages-dropdown-button"===a?l=t:(c=t,e("#packages-dropdown").is(":hover")&&(c=!0,i=!1)),l===!1&&c===!1&&i===!0?(e("#packages-dropdown-button").removeClass("package-dropdown-active"),e("#packages-dropdown").removeClass("d-lg-block")):l===!1&&c===!1?d=setTimeout(function(){n(!1,"packages-dropdown",!0)},500):(e("#packages-dropdown-button").addClass("package-dropdown-active"),e("#packages-dropdown").addClass("d-lg-block"))}function i(t){var a=e('[data-title="reviewOverlay"]'),n=e('[data-title="renewDatePopUp"]');a&&n&&(t?(a.addClass("d-block"),n.addClass("d-block")):(a.removeClass("d-block"),n.removeClass("d-block")))}function o(t){var a=e("#overlay"),n=viewport&&viewport.is("<lg")?"90%":"700";a.show();var i=e("<div class='comment'><textarea name='comment' id='userComment' class='faded' placeholder=''></textarea></div>");i.dialog({modal:!0,resizable:!1,draggable:!1,title:"Why did you rate this "+t.rating+" star?",width:n,close:function(){removeDialog(i),a.hide()},buttons:[{id:"button-ok",text:"Ok",click:function(){t.comment=e("#userComment").val();var n=showDialogLoader("Updating User Ratings..");removeDialog(i),e.get("/php/ajax/submitComment.php",t,function(i){removeDialog(n),a.hide(),"success"===i.message&&i.commentId&&(e('[data-success="returnMsg_'+t.item_id+'_"]').children().remove(),e('[data-success="returnMsg_'+t.item_id+'_"]').append("<p class='font-size-0-9375rem font-italic text-subtitle-grey dashy-rating-font'>You rated this resource "+t.rating+" star</p>"))}).fail(function(e){removeDialog(n),showDialogMessage("Oops!",e.responseText),a.hide()})}}]});var o=e("#button-ok");o.prop("disabled",!0),e("#userComment").keyup(function(){var t=e(this).val().length,a=30;t>a?o.prop("disabled",!1):o.prop("disabled",!0)})}addFileListeners(),e(".share-quote").hover(function(){var t=encodeURI(e(this).text()),a=window.location,n='<div class="bg-shade l-0 p-1 position-absolute quote-share r-0 rounded t-minus-2-5rem transform-translate-x-minus-50-off w-10-25rem">';n+='<div class="after-arrow-down-shade">',n+='<a class="copy-data-to-copy d-inline-block" data-to-copy="'+a+'">',n+='<i class="fasrFaFaLink d-block hover-opacity-1 p-2 opacity-0-75">',n+='<svg class="fill-white h-1rem" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg>',n+="</i>",n+="</a>",n+='<a class="d-inline-block pop-up" href="http://twitter.com/intent/tweet?status='+t+"+"+a+'+%40TwinklResources">',n+='<i class="d-block fasrFabFaTwitter hover-opacity-1 p-2 opacity-0-75"><svg class="fill-white h-1rem" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg></i>',n+="</a>",n+='<a class="d-inline-block pop-up" href="http://www.facebook.com/sharer/sharer.php?u='+a+"&amp;title="+t+'">',n+='<i class="d-block fasrFabFaTwitter hover-opacity-1 p-2 opacity-0-75"><svg class="fill-white h-1rem" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M279.14 288l14.22-92.66h-88.91v-60.13c0-25.35 12.42-50.06 52.24-50.06h40.42V6.26S260.43 0 225.36 0c-73.22 0-121.08 44.38-121.08 124.72v70.62H22.89V288h81.39v224h100.17V288z"/></svg></i>',n+="</a>",n+='<a class="d-inline-block pop-up" href="http://pinterest.com/pin/create/button/?url='+a+"&amp;description="+t+'">',n+='<i class="d-block fasrFabFaPinterestP hover-opacity-1 p-2 opacity-0-75"><svg class="fill-white h-1rem" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M204 6.5C101.4 6.5 0 74.9 0 185.6 0 256 39.6 296 63.6 296c9.9 0 15.6-27.6 15.6-35.4 0-9.3-23.7-29.1-23.7-67.8 0-80.4 61.2-137.4 140.4-137.4 68.1 0 118.5 38.7 118.5 109.8 0 53.1-21.3 152.7-90.3 152.7-24.9 0-46.2-18-46.2-43.8 0-37.8 26.4-74.4 26.4-113.4 0-66.2-93.9-54.2-93.9 25.8 0 16.8 2.1 35.4 9.6 50.7-13.8 59.4-42 147.9-42 209.1 0 18.9 2.7 37.5 4.5 56.4 3.4 3.8 1.7 3.4 6.9 1.5 50.4-69 48.6-82.5 71.4-172.8 12.3 23.4 44.1 36 69.3 36 106.2 0 153.9-103.5 153.9-196.8C384 71.3 298.2 6.5 204 6.5z"/></svg></i>',n+="</a>",n+='<a class="d-inline-block" href="mailto:email@address.com?subject='+t+"+"+a+'+%40Twinkl">',n+='<i class="d-block fasrFaFaEnvelope hover-opacity-1 p-2 opacity-0-75"><svg class="fill-white h-1rem" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"/></svg></i>',n+="</a>",n+="</div>",n+="</div>",e(this).append(n),e(".quote-share").hide().fadeIn(200),e(".copy-data-to-copy").click(function(t){copyLinkToClipboard(null,e(this).attr("data-to-copy"))})},function(){e(".quote-share").remove()}),jQuery("a.pop-up").live("click",function(){return newwindow=window.open(e(this).attr("href"),"","height=640,width=600"),window.focus&&newwindow.focus(),!1});var r=e("iframe[src^='//www.youtube.com/embed/']");r.each(function(){e(this).addClass("scaled-in-js").data("aspectRatio",this.height/this.width).data("originalWidth",this.width).data("originalHeight",this.height).removeAttr("height").removeAttr("width")}),t(),e(window).resize(function(){t()});var s=0;e(window).scroll(function(a){t(),s=e(window).scrollTop(),e(".slide-element-in-on-scroll").each(function(){e(this).attr("data-scroll-divide")&&(s=Math.ceil(s/e(this).attr("data-scroll-divide")));var t=0-e(this).attr("data-height")+s,a=e(this).attr("data-clear-height");t>a&&(t=a),e(this).css("top",t+"px")});var n=e("#article-nav");"homework-help"==n.attr("data-view")&&(n.css("top","69px"),s=Math.ceil(s/n.attr("data-scroll-divide")),0==s&&n.css("top",""))}),e("[data-scroll-to]").click(function(t){t.preventDefault();var a=e(this).attr("data-target"),n=e(this).attr("data-offset")?parseInt(e(this).attr("data-offset")):0,i=e(this).attr("data-speed")?parseInt(e(this).attr("data-speed")):500;e("html, body").animate({scrollTop:e(a).offset().top-n},i)}),a(".a-scroll-to-anchor-offset-100 a",["#article-nav","#header"]);var l=!1,c=!1,d=null;e("#packages-dropdown-button,#packages-dropdown").hover(function(){n(!0,e(this).attr("id"),!1)},function(){n(!1,e(this).attr("id"),!1)}),e('[data-action="show-preview"]').hover(function(){var t=!1;if(e(this).attr("data-image"))t='<img alt="'+e(this).attr("data-title")+'" class="m-auto max-h-100 p-3" src="'+e(this).attr("data-image")+'" title="'+e(this).attr("data-title")+'">';else{if(!e(this).attr("data-text"))return console.log("Please set some content for the preview to display"),!1;t='<h2 class="br-d-none br-d-lg-block font-size-md-3-5rem font-weight-bold line-h-1em text-white"><span class="text-shadow">'+e(this).attr("data-text")+"</span></h2>"}t&&e('[data-component="preview-overlay"]').html(t).removeClass("d-none").addClass("d-flex")},function(){e('[data-component="preview-overlay"]').removeClass("d-flex").addClass("d-none").html("")}),e('[data-review-overlay="1"],#actual_downloads .download #download_link[data-download="yes"]').click(function(t){var a=e(this).attr("data-button-clicked-text");if(null!==a&&void 0!==a&&""!==a&&e('[data-review-overlay="1"],#actual_downloads .download #download_link[data-download="yes"]').each(function(t,n){e(this).html(a)}),"function"==typeof loadMlOntoPreview.init){var n=e(this).closest("#actual_downloads").data("resource-id");loadMlOntoPreview.init(n)}i(!0)}),e('[data-title="reviewOverlayClose"]').click(function(){i()}),e('[data-title="reviewOverlayStars"] span').hover(function(t){var a=parseInt(t.target.getAttribute("data-star-rating"));if(a){var n=e(this).closest("#overlay-rating");n&&(n.attr("data-hover-number",a),e(n).find("span").each(function(t,n){parseInt(e(this).attr("data-star-rating"))<=a?(e(this).addClass("starOn"),e(this).removeClass("starOff")):(e(this).removeClass("starOn"),e(this).addClass("starOff"))}))}},function(t){var a=e(this).closest("#overlay-rating");a&&(e(a).find("span").removeClass("starOn"),e(a).find("span").addClass("starOff"))}),e('[data-title="saveCommonRating"]').click(function(t){var a=parseInt(t.target.getAttribute("data-star-rate")),n=t.target.getAttribute("data-item-id");if(a&&n){var i=e(this).attr("data-page"),r=e("#resourceType").attr("data-type"),s={action:"submitRatingWithoutComments",type:r,item_id:n,sid:Math.random(),rating:a};"dashy"===i&&a<=3?o(s):e.get("/php/ajax/submitComment.php",s,function(t){"success"===t.message&&t.commentId&&(e('[data-success="returnMsg_'+n+'_"]').children().remove(),e('[data-success="returnMsg_'+n+'_"]').append("<p class='font-size-0-9375rem font-italic text-subtitle-grey dashy-rating-font'>You rated this resource "+a+" star</p>"))})}}),e(document).on("click",".reportResourceIssueButton",function(t){t.preventDefault();var a=e("#overlay"),n=(viewport&&viewport.is("<lg")?"90%":"700",e("#resource").data("resource-id"));a.show(),e.get("/report-resource-issue",{},function(t,i,o){"success"!=t.message?apprise(t.message):(a.hide(),e(".generic_pop").hide(),a.show(),e("body").append(t.html),e(".reportissue_popup").show(),e("body .reportissue_popup .close").on("click",function(t){a.hide(),e(".reportissue_popup").remove()}),e("body .reportissue_popup .report-issue-type-button").on("click",function(t){e(".report-issue-type-button").removeClass("active"),e(this).addClass("active")}),e("body .reportissue_popup .submit").on("click",function(t){t.preventDefault();var a=e(".suggestion").val(),i=e(".report-issue-type-button.active").data("issue-type");if(e(".report-issue-warning-msg").hide(),e("#issue-submitted").remove(),i&&""!==a){var o=e('<img src="'+imageAssetBase+'/images/loading_small.gif" alt="Loading" class="m-0-auto"/>');e(this).after(o),e(this).hide(),e.post("/submit-report-resource-issue",{issueType:i,suggestion:a,resourceId:n},function(t,a,n){if("success"!==t.message)return e("body .reportissue_popup .submit").show(),e(".report-issue-warning-msg").show(),o.remove(),!1;e(".reportissue_popup").remove(),e(this).show(),o.remove(),e("body").append(t.html);var i=e("#issue-submitted");i.show(),i.center(),i.on("click",".continue",function(){i.hide(),e("#overlay").hide()})},"json").fail(function(t){return e("body .reportissue_popup .submit").show(),e(".report-issue-warning-msg").show(),o.remove(),!1})}}))},"json")}),e('[data-title="reviewOverlayStars"] span').click(function(t){var a=parseInt(t.target.getAttribute("data-star-rating"));if(a){var n=e(this).closest("#overlay-rating");if(n){n.attr("data-hover-number",a),n.attr("data-rating-number",a);e("#subscribe").is(":checked")?1:0,e("#alertUserResource").is(":checked")?1:0;if(a>3){var o={action:"submitRatingWithoutComments",type:e("#comment_type").val(),item_id:e("#comment_item_id").val(),sid:Math.random(),rating:a};e.get("/php/ajax/submitComment.php",o,function(t){if("success"===t.message&&t.commentId){var a=t.commentId,n=e("#comment_box");n.append('<input type="hidden" id="commentId" value="'+a+'">')}})}var r=e("#tabbed_content");if(r){if(r.find("li").removeClass("selected"),r.find(".tabContent").removeClass("selected"),r.find("#tab3").addClass("selected"),r.find("#tabContent3").addClass("selected"),n=r.find(".rating")){n.attr("data-rating-number",a),n.find("span").each(function(t,a){e(this).removeClass("starOn").addClass("starOff").attr("style",'background: url("https://images.twinkl.co.uk/tr/raw/upload/u/ux/empty-whitestar-1559914622.png") 0px 6px no-repeat;')});for(var s=null,l=1;l<=a;l++)s="#star"+l,n.find(s).removeClass("starOff").addClass("starOn").attr("style",'background: url("https://images.twinkl.co.uk/tr/raw/upload/u/ux/fullstar-1559914632.png") 0px 6px no-repeat;')}e([document.documentElement,document.body]).animate({scrollTop:e(r).offset().top-130},2e3);var c=[e("#comment_box"),e(".otherButtonHolder"),e("#postReview")],d=[];e([c,d]).toggleBetween();var u=20,p=e("#postReview"),h=e("#comment");enableDisableResourceReviewSubmitOnStart(u,a,p,h,!1),enableResourceReviewSubmitBasedOnChar(u,a,p,h,!1)}i()}}});var u=e(".dropDownContainer"),p=e('.signInButton[data-signAnimationBox="yes"]'),h=null;p.mouseenter(function(){p.attr("data-expand","1"),clearTimeout(h),u.stop(!1,!0).removeClass("d-none").fadeIn(1e3)}),p.mouseleave(function(){p.attr("data-expand","0"),clearTimeout(h),h=setTimeout(function(){"1"!==p.attr("data-expand")&&"1"!==u.attr("data-expand")&&u.stop(!1,!0).fadeOut(1e3,function(){u.addClass("d-none")})},3e3)}),u.mouseleave(function(){u.attr("data-expand","0"),clearTimeout(h),h=setTimeout(function(){"1"!==p.attr("data-expand")&&"1"!==u.attr("data-expand")&&u.stop(!1,!0).fadeOut(1e3,function(){u.addClass("d-none")})},100)}),u.mouseenter(function(){u.attr("data-expand","1"),clearTimeout(h)}),p.attr("data-expand","0"),u.attr("data-expand","0").delay(2500).removeClass("d-none").fadeIn(1e3,function(){clearTimeout(h),h=setTimeout(function(){"1"!==p.attr("data-expand")&&"1"!==u.attr("data-expand")&&u.fadeOut(1e3,function(){u.addClass("d-none")})},3e3)})});var fnmap={toggle:"toggle",show:"add",hide:"remove"},compacted=function(e,t){var a=[].slice.call(document.querySelectorAll(e));a.forEach(function(e){e.classList[fnmap[t]]("show")})},triggers=[].slice.call(document.querySelectorAll('[data-toggle="compacted"]'));triggers.length&&window.addEventListener("click",function(e){var t=e.target;if(triggers.includes(t)){e.preventDefault(),e.target.classList.toggle("i-transform-rotate-90");var a=t.getAttribute("data-target");compacted(a,"toggle")}},!1);var hasStorage=!1,onlyUnique=function(e,t,a){var n=a.map(function(e){return e.url});return""!=e.img&&n.indexOf(e.url)===t};!function(){function e(e){var t={speed:300,dots:!1,infinite:!1,lazyLoad:"ondemand",responsive:[{breakpoint:4800,settings:{slidesToShow:6,slidesToScroll:6}},{breakpoint:1500,settings:{slidesToShow:5,slidesToScroll:5}},{breakpoint:1300,settings:{slidesToShow:4,slidesToScroll:4}},{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:740,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]},n=$("#recently-viewed"),i=0,o=n.find(".resources"),r=[];return e.length?(o.html(""),e.forEach(function(e,t){if(e.image&&e.title&&e.url){if(r.length>=50)return!1;e.image=e.image.replace("t_630_eco","t_345"),e.image=e.image.replace("t_630","t_345");var a={avif:e.image.replace(".jpg",".avif"),webp:e.image.replace(".jpg",".webp")},n="";e.downloaded&&(n=" downloaded",i++);var o=JSON.stringify({name:"click_resource",resourceIndex:t++,resourceListingName:"Recently Viewed Slider",resourceIsRecommendation:"Yes"});r.push('<div class="rv-resource'+n+"\" data-track='"+o+"'>"+(e.downloaded?'<div class="overhang-ribbon bg-green overhang-small"><span>Downloaded</span></div>':"")+'<a href="'+e.url+'" tabindex="0"><picture class="resource-img"><source type="image/avif" srcset="'+a.avif+'"><source type="image/webp" srcset="'+a.webp+'"><img width="100%" alt="'+e.title+'" src="'+e.image+'"></picture><div class="title" title="'+e.title+'">'+e.title+"</div></a></div>")}}),i>0&&!a()&&n.addClass("has-downloads"),void o.append(r.join("")).slick(t)):void o.html('<div class="carousel-no-data-found ">No recently viewed data has been found!!</div>')}function t(){function t(){var e=n.data("track");return e&&(e.name="recently_viewed_click_"+(n.hasClass("expanded")?"open":"close"),n.attr("data-track",JSON.stringify(e))),o?void a():(i&&(n.find(".wide-header-card").toggle(),n.find(".header-card").toggle()),n.toggleClass("expanded"),void $("#overlay").toggle().off("click").on("click",function(){n.toggleClass("expanded"),i&&(n.find(".wide-header-card").toggle(),n.find(".header-card").toggle()),$(this).toggle().off("click")}))}function a(){return o=!o,$(".download-card").toggleClass("active"),$(".header-card").toggleClass("active"),o?void r.slick("slickFilter",".downloaded"):void r.slick("slickUnfilter")}var n=$("#recently-viewed");if(!n.find(".rv-resource").length){n.find(".resources").html('<div class="inline-loader"><img src="'+imageAssetBase+'/images/loading.gif" alt="Please wait..." class="loader" /> <span>Searching...</span></div>'),$("body").hasClass("is-signed-in")?$.get("/recently-viewed-list?limit=50",function(t){var a=t.resources||[];a.length<10&&(a=a.concat(C).filter(onlyUnique)),e(a)}):e(C);var i=!1;n.on("click",".header-card, .wide-header-card",t),n.on("click",".close-card",function(){n.toggleClass("expanded"),i&&(n.find(".wide-header-card").toggle(),n.find(".header-card").toggle()),$("#overlay").toggle()}),n.on("click",".download-card",a),t();var o=!1,r=n.find(".resources")}}function a(){return $("body").hasClass("is-mobile-device")}try{if((hasStorage=function(){try{return localStorage.setItem("testls","testls"),localStorage.removeItem("testls"),!0}catch(e){return!1}})()){if(0==location.pathname.indexOf("/search")){var n=localStorage.dh?JSON.parse(localStorage.dh):{};Object.keys(n).map(function(e){if(n[e]){var t=$(".search-results-container").find('[data-id="'+e+'"]');if(!t.length)return;var a=$("#lastDownloadText").text(),i=new Date(n[e]),o={year:"numeric",month:"short",day:"numeric"};t.find(".control-info").append('<div class="last-download-info-icon"><span>'+a+" "+new Intl.DateTimeFormat("default",o).format(i)+"</span></div>");var r=$("#download_"+e);if(r.length>0&&r.attr("data-button-clicked-text")){var s=r.find(".download-text");s.html(r.attr("data-button-clicked-text"))}}})}if(0==location.pathname.indexOf("/resource/")){var i=document.querySelector(".avg-rating-wrapper"),o=(new Date).getTime(),r=localStorage.rh?JSON.parse(localStorage.rh):[],s=location.pathname,l=document.querySelector("h1"),c=document.querySelector("#resource_image .resource_preview"),d=i?i.getAttribute("data-rating"):null,u=parseInt(document.querySelector("h1").getAttribute("data-free-resource")),p=c?c.getAttribute("src"):"",h=c?c.getAttribute("data-resource-id"):"",m=0,f=dataLayer[0].resource&&dataLayer[0].resource["package"]?dataLayer[0].resource["package"]:void 0,v=l?l.innerText:document.title,g=f?f.id:0,_=f?f.name:0;if(r.length>0){var y=r.filter(function(e){return e.url==s});y.length&&(m=y[0].downloaded)}var w={title:v,image:p,url:s,uid:dataLayer[0].user.twinklid,subscriptionType:dataLayer[0].user.subscription,downloaded:m,saved:0,lastView:o,isFree:u,"package":_,productId:g,resourceId:h,rating:d},b=function(){r.push(w),r=r.filter(onlyUnique);var e=20;if(r&&r.length>e){var t=r.length-e;r=r.splice(t,e)}localStorage.setItem("rh",JSON.stringify(r)),document.fn.events.emit("updatedRh")};if(b(),0==w.downloaded){var k=[].slice.call(document.querySelectorAll('#download_link[data-download="yes"]'));k&&k.length>0&&k.forEach(function(e){e.addEventListener("click",function(e){"A"==e.target.tagName&&(w.downloaded=1,b())})})}}}}catch(x){}if($("#recently-viewed").length){var C=localStorage.rh||"[]";C=JSON.parse(C).reverse();var S=window.location.href;if(S=S.split("/"),0===C.length&&0==$("#recentlyViewedList").find("div.res-item.fromR").length||S.includes("report-writer")||"/spelling"===window.location.pathname||"/spelling/play"===window.location.pathname||"/puzzled"===window.location.pathname||"/puzzled/play"===window.location.pathname||"/esl-curriculum-games"===window.location.pathname||"/esl-curriculum-games/play"===window.location.pathname||"/phonics-app"===window.location.pathname||"/phonics-app/play"===window.location.pathname||"/multiplication-tables"===window.location.pathname||"/multiplication-tables/play"===window.location.pathname||"/apps/maths"===window.location.pathname||"/apps/maths/play"===window.location.pathname||window.location.href.indexOf("/learn")>-1||window.location.href.indexOf("/ar-3d/resource")>-1)return void $("#recently-viewed").hide();
$("#recently-viewed").on("click",function(){$(this).off("click"),t()})}document.querySelector("#switchToAnnual")&&this.addEventListener("click",function(e){createCookie("monthly_to_annual_switch",1,30),$(".new-dot-icon").hide()}),document.querySelector(".similarSearches")&&document.querySelectorAll("a.similar")&&[].slice.call(document.querySelectorAll("a.similar")).forEach(function(e){e.addEventListener("click",function(e){var t=this,a=new URLSearchParams(window.location.search),n=a.get("fa")||"";return window.location.search.split("fa=")&&window.location.search.split("fa=")[1]&&null===new URLSearchParams(t.href).get("fa")?(e.preventDefault(),void(window.location=t.href+"&fa="+n)):void(window.location=t.href)})})}(),hasStorage&&($("#free-resource").exists(function(){var e=localStorage.rh?JSON.parse(localStorage.rh):void 0;if(e){var t=e.reverse(),a=[];t.forEach(function(e,t){e.url&&e.image&&e.title&&""!==e.image&&""!==e.url&&""!==e.title&&e.title.indexOf("FREE")==-1&&0===e.downloaded&&a.push(e)});var n,i=a.length<6?a.length:5;if(0!==a.length){var o=$(".recentlyViewedFR");o.show();var r=o.find(".historyC");for(n=0;n<i;n++){var s='<div class="historyItem"><a href="'+a[n].url+'" target="_blank"><img src="'+a[n].image+'" ><span>'+a[n].title+"</span></a></div>";r.append(s)}}}recentlySearchedList("free-resource")}),$("#dashy-home").exists(function(){var e=localStorage.getItem("rh"),t=localStorage.getItem("ml"),a=[];if(null!=e){var n=$("#recentlyViewedList"),i=[];n.find("div.res-item.fromR").each(function(e){i.push($(this).find("a").attr("href"))});for(var o=JSON.parse(e).filter(onlyUnique),r=0;r<o.length;r++)o[r].hasOwnProperty("lastView")||(o[r].lastView=o[r].datetime?new Date(o[r].datetime).getTime():""),""==o[r].image||o[r].hasOwnProperty("uri")||a.push(o[r])}populateRecommendedForYou(t,a,i),populateRecentlyViewedBlock(a,i),$("#recentlySearchedList.recentlySearched").on("click",".showMoreDashySH",function(){var e=$("#recentlySearchedList.recentlySearched").find(".searchContent");e.hasClass("openFullSH")?($(".hideSearchItems").hide(),e.removeClass("openFullSH"),$(this).find("span").html("Show More")):($(".hideSearchItems").show(),e.addClass("openFullSH"),$(this).find("span").html("Show Less"))})}));var lazyLoadBackgroundsDefaultOptions={selector:"[data-background-image-url]",loadedClassName:"loadedBackgroundImage"};BackgroundLazyLoader();var animRef;window.animateButton=function(e){function t(a,s,l,c){void 0===n&&(n=a);const d=a-n;var u=Math.round(r-d/c*100);i!==a&&(u=Math.max(u,l),s.style.right=u+"%",u===l&&(o=!0)),d<c&&(i=a,o||(animRef=requestAnimationFrame(function(e){t(e,s,l,c)}))),o&&cancelAnimateButton(e)}var a=e.target.querySelector(".t-progress");a.style.right="100%",a.style.visibility="visible";var n,i,o=!1,r=100;animRef=window.requestAnimationFrame(function(e){t(e,a,0,700)})},window.cancelAnimateButton=function(e){const t=e.target.querySelector(".t-progress");t.style.right="100%",window.cancelAnimationFrame(animRef)},function(){var e="twinkl_main_js_ready";$(function(){window.dispatchEvent(new Event(e,{bubble:!0}))})}();