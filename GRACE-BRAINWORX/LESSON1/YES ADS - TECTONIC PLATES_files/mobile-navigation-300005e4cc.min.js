!function(){if(Navigation={loaded:function(e,t){var n=document.getElementById("tab-content-"+e).getAttribute("data-load");return t?(document.getElementById("tab-content-"+e).setAttribute("data-load",!0),!0):"true"===n},overlayObserve:function(e){var t=document.getElementsByTagName("body")[0];e=!!e&&e;var n=document.querySelector(".load-icon")||null;return e?"undefined"!=typeof n&&null!=n&&(n.style.display="block"):"undefined"!=typeof n&&null!=n&&(n.style.display="none"),e?void(t.style.overflow="hidden"):(t.style.overflow="",void t.removeAttribute("style"))},tabController:function(e,t){var n=document.querySelector(".navigation-main-container").childNodes,a=document.querySelector(".nav-overlay")||null;return a&&null!==a&&a.addEventListener("click",function(){if(this.classList.contains("isOpen"))return this.classList.remove("isOpen"),Navigation.overlayObserve(!1),void Navigation.tabController(e,t)}),document.getElementById(t).classList.contains("isOpen")?(document.getElementById(t).classList.remove("isOpen"),document.getElementById(t).classList.add("closing"),a.classList.remove("isOpen"),void Navigation.overlayObserve(!1)):(a.classList.add("isOpen"),Navigation.overlayObserve(!0),n.forEach(function(e){e.nextElementSibling&&e.nextElementSibling.classList.contains("isOpen")?(e.nextElementSibling.classList.remove("isOpen"),e.nextElementSibling.classList.add("closing")):(document.getElementById(t).classList.add("isOpen"),document.getElementById(t).classList.remove("closing"))}),!0)},dateFormated:function(e){var t={month:"short",day:"numeric",year:"numeric"};return new Intl.DateTimeFormat("default",t).format(e)},displayDate:function(e){var t="";e&&e.datetime?t=e.datetime:e&&e.date&&(t=e.date);var n=t?new Date(t).getTime():e.timestamp;e.lastView&&(n=e.lastView);var a=new Date,i=new Date(a.setDate(a.getDate()-1)).getTime(),o=(new Date).getTime();return Navigation.dateFormated(i)===Navigation.dateFormated(n)?"Yesterday":Navigation.dateFormated(o)===Navigation.dateFormated(n)?"Today":"on "+Navigation.dateFormated(n)},tab:function(e,t){var n=$("."+t),a=n,i=[];if(!e.length)return void("downloadsContainer"===t?a.html('<div class="empty-download-icon"><svg class="noResource" xmlns="http://www.w3.org/2000/svg" height="29" width="48"><path d="m5.2 5.2 37.6 37.6-2.15 2.15L35.7 40H11q-1.2 0-2.1-.9Q8 38.2 8 37v-7.15h3V37h21.7l-6.9-6.9-1.8 1.75-9.65-9.65 1.8-1.8L3.05 7.35Zm26.3 14.85 2.15 2.15-3.55 3.6-2.15-2.2ZM25.5 8v13.2l-3-3V8Z"></path></svg><p class="downloadEmpty">No downloads found...</p><p class="message">Download resources for quick access! Your past downloads will be displayed here.</p></div>'):"savedContainer"===t?a.html('<div class="empty-download-icon"><svg class="noResource" xmlns="http://www.w3.org/2000/svg" height="48" width="48"><path d="M22 23.15Zm0 18.8-4.95-4.55q-4.35-4-7.225-6.85Q6.95 27.7 5.2 25.4q-1.75-2.3-2.475-4.325Q2 19.05 2 16.75q0-4.5 3.025-7.625T12.5 6q2.85 0 5.275 1.325Q20.2 8.65 22 11.2q2.1-2.7 4.45-3.95T31.5 6q4.05 0 6.775 2.75Q41 11.5 41.6 15.4h-2.95q-.45-2.75-2.325-4.575Q34.45 9 31.5 9q-2.55 0-4.75 1.55t-3.55 4.4h-2.45q-1.3-2.8-3.5-4.375Q15.05 9 12.5 9q-3.3 0-5.4 2.225Q5 13.45 5 16.75q0 1.95.775 3.8.775 1.85 2.7 4.2 1.925 2.35 5.225 5.5T22 38q1.6-1.45 3.025-2.7 1.425-1.25 2.825-2.45l.325.325q.325.325.725.7.4.375.725.7l.325.325q-1.35 1.2-2.8 2.45-1.45 1.25-3.1 2.75ZM36.5 34v-6.5H30v-3h6.5V18h3v6.5H46v3h-6.5V34Z"/></svg><p class="downloadEmpty">No saved resources found...</p><p class="message">Save resources into folders, organise your lesson plans and use across devices!</p></div>'):a.html('<div class="carousel-no-data-found ">No data found!!</div>'));var o="Last downloaded";"savedContainer"===t?o="Saved":"historyContainer"===t&&(o="Last viewed"),a.html(""),e.forEach(function(e){if(e.image&&!/^(f|ht)tps?:\/\//i.test(e.image)&&"savedContainer"===t&&(e.image="https://images.twinkl.co.uk/tw1n/image/private/t_345/image_repo/"+e.image),e.image||(e.image=e.image_url?e.image_url:""),e.url||(e.url=e.friendly_url?e.friendly_url:""),e.image&&e.title&&e.url){e.image=e.image.replace("t_630_eco","t_345"),e.image=e.image.replace("t_630","t_345");var n={avif:e.image.replace(".jpg",".avif"),webp:e.image.replace(".jpg",".webp")},a="";e.downloaded&&(a=" downloaded"),i.push('<div class="rv-resource'+a+'"><a href="'+e.url+'" tabindex="0"><picture class="resource-img"><source type="image/avif" srcset="'+n.avif+'"><source type="image/webp" srcset="'+n.webp+'"><img width="100%" loading="lazy" alt="'+e.title+'" class="lazyload" data-src="'+e.image+'"></picture><div class="rightHandSideContainer" title="'+e.title+'"><p class="historyCardTitle">'+e.title+'</p><p class="viewedDate">'+o+" "+Navigation.displayDate(e)+"</p></div></a></div>")}}),a.append(i.join(""))},tabListener:function(e){[".home-icon",".memberships-icon",".library-icon",".notification-icon",".account-icon"].forEach(function(t){var n=document.querySelector(t)||null;if(n&&null!==n&&n.classList.contains("active"))return document.querySelector(t).classList.remove("active"),void document.querySelector(e).classList.add("active")})},folderTab:function(e){if(!e.length)return!1;var t=document.querySelector(".foldersContainer").childNodes;e.forEach(function(e){var n=document.createElement("label")||null;n.classList.add("folder"),n.setAttribute("data-source",e.id),n.setAttribute("id",e.id),e.title||(e.title="All Saved Resources",n.classList.add("current"),Navigation.tab(e.resources,"savedContainer")),n&&null!==n&&(n.textContent=e.title,n.addEventListener("click",function(n){n.preventDefault(),document.getElementById("0").classList.remove("current");var a=n.target.dataset.source;a&&t.forEach(function(e){e.classList.remove("current"),n.target.classList.add("current")}),Navigation.tab(e.resources,"savedContainer")})),document.querySelector(".foldersContainer").append(n)})},hidePremium:function(){return"/premium"!==window.location.pathname}},$("body").hasClass("is-signed-in")&&Navigation.hidePremium()){var e=localStorage.rh||"[]";e=JSON.parse(e).reverse();var t=document.querySelector(".home-link")||null,n=document.querySelector(".memberships-link")||null;t&&null!==t&&t.addEventListener("click",function(){Navigation.tabListener(".home-icon")}),n&&null!==n&&n.addEventListener("click",function(){Navigation.tabListener(".memberships-icon")});var a=document.querySelector("#m-library")||null;a&&null!==a&&a.addEventListener("click",function(t){if(Navigation.tabListener(".library-icon"),Navigation.tabController(t,"library-tab")&&!Navigation.loaded(1,!1)){$.get("/my-saved-resources/list",function(e){return e}).then(function(e){var t=e.folders||[];Navigation.loaded(1,!0),Navigation.folderTab(t)}).fail(function(e,t,n){console.log(n),Navigation.tab([],"savedContainer")});var n=document.getElementById("history-tab")||null;n&&null!==n&&n.addEventListener("click",function(){Navigation.loaded(2,!1)||$.get("/recently-viewed-list?limit=50",function(e){return e}).then(function(t){var n=t.resources||[];n.length<10&&(n=n.concat(e).filter(onlyUnique)),Navigation.loaded(2,!0),Navigation.tab(n,"historyContainer")}).fail(function(e,t,n){console.log(n),Navigation.tab([],"historyContainer")})});var a=document.getElementById("downloads-tab")||null;a&&null!==a&&a.addEventListener("click",function(){Navigation.loaded(3,!1)||$.get("/my-downloads/get-user-downloads/365/20",function(e){return e}).then(function(e){var t=e||[];Navigation.loaded(3,!0),Navigation.tab(t,"downloadsContainer")}).fail(function(e,t,n){console.log(n),Navigation.tab([],"downloadsContainer")})})}});var i=document.querySelector("#m-notification")||null;i&&null!==i&&i.addEventListener("click",function(e){Navigation.tabListener(".notification-icon"),Navigation.tabController(e,"notification-tab")});var o=document.querySelector("#m-account")||null;o&&null!==o&&o.addEventListener("click",function(e){Navigation.tabListener(".account-icon"),Navigation.tabController(e,"accout-tab")}),document.addEventListener("scroll",function(){var e=new IntersectionObserver(function(e,t){e.forEach(function(e){if(e.isIntersecting){var t=e.target;t.src=t.dataset.src}})}),t=document.querySelectorAll("img.lazyload")||[];t&&t.length&&t.forEach(function(t){e.observe(t)})});var l=document.querySelectorAll(".tab-btn"),r=document.querySelectorAll(".tab-contents .content"),s=document.querySelector(".tab-wrapper")||null;s&&null!==s&&s.addEventListener("click",function(e){var t=e.target.dataset.target;if(t){l.forEach(function(t){t.classList.remove("active"),e.target.classList.add("active")}),r.forEach(function(e){e.classList.remove("active")});var n=document.getElementById(t);n.classList.add("active")}});var c=document.querySelector("#m-notification")||null;c&&null!==c&&c.addEventListener("click",function(){var e=this.getAttribute("data-new-count");e>0&&$.post("/notifications/handler",{action:"seenAll"}),$(".newDot").length&&$(".newDot").animate({opacity:0}),setTimeout(function(){$("li.notification").find(".notification-list").addClass("read"),$("li.notification").find('div[class*="extraSVG"]').removeClass("new").addClass("old")},2e3)})}}();