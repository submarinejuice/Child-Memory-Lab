(self.webpackChunknatgeo=self.webpackChunknatgeo||[]).push([[4e3],{23602:(e,t,n)=>{var a=n(85893);function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}n(67294);var o=n(45697),s=n(94184),i=n(3896),c=n(21800),d=n(50239),l=n(84967),h=n(19495),u=n(23493),f=n(11227)("safeframe:main"),m=n(50629).SAFEFRAME_CALLBACK,g=d.first,p=d.isFunc,v=d.emptyObj,b=d.FALSE,y=d.TRUE,w=d.callSafe,S=l.attr,M=l.docScroll,A="scroll",E="resize",k="orientationchange",R=0;n(67247);var O=i({port:null,disposers:null,div:null,events:null,displayName:"SafeFrame",getInitialState:function(){var e=this||v,t=e.props||v,n=++R,a=e.buildName(n),r=t.src,o=t.mode,s=h.loc(),i="",c="";return r&&(i=h(r).toHostString(!0,!0)),s&&(c=s.toHostString(!0,!0)),{id:n,name:a,referrer:c,frameOrigin:i,mode:o,mounted:b}},componentDidMount:function(){var e=this||{},t=e.props||v,n=e.state||v,a=l.view(),r=e.getFrameOrigin();n.referrer!==r&&!1!==t.shouldMount&&(e.events={},e.disposers={},f("Referrer check successful."),f("Waiting for handshake from frame origin..."),l.attach(a,"message",e.onHandshake),e.setState({mounted:y}))},componentDidUpdate:function(e,t){var n=this||v,a=n.state||v,r=n.props||v,o=a.mounted,s=r.mode,i=n.getMode();return n.port&&s!==e.mode&&s!==i?(f("Mode changed via props from %s to %s.",i,s),void n.setState({mode:s},(function(){n.goToMode(s),n.postMessage("MODE",{mode:s})}))):o&&!1===t.mounted?(f("Successfully mounted frame and initialized in %s mode.",i),void n.goToMode(i)):void 0},componentWillUnmount:function(){var e,t=this||v,n=t.events||v,a=t.disposers||v,o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,s=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw s}}}}(d.keys(n));try{for(o.s();!(e=o.n()).done;){var s=e.value;t.detachEvent(s)}}catch(e){o.e(e)}finally{o.f()}for(var i in a){var c=a[i];if(c)try{c.fn(),delete a[i]}catch(e){}}try{t.events=null,t.disposers=null,t.div=null,t.port=null}catch(e){}},setDOM:function(e){this.div=e},onHandshake:function(e){var t,n,a,r=this||v,o=r.state||v,s=o.referrer||"",i=o.frameOrigin||"",c=o.id,d=e||v,h=d.origin||"",u=d.data||v,m=l.view();h===i&&s===u.referrer&&("HANDSHAKE"===u.message&&u.id===c?(l.detach(m,"message",r.onHandshake),a=r.getFrame(),S(a,"name",null),r.port=t=d.ports[0],t.onmessage=r.onMessage,n=r.getMode(),r.postMessage("HANDSHAKE_ACK",{mode:n}),f("Handshake received, connection established with frame with ID %d.",c)):u.id||f("Unrecognized message from frame origin.",u))},onMessage:function(e){var t=this||v,n=e.data||v,a=n.message||"",r=n.data||v;switch(f("".concat(a," has been received.")),a){case"RESIZE":t.handleResize(r);break;case"SUBSCRIBE":t.handleSubscribe(r);break;case"UNSUBSCRIBE":t.handleUnsubscribe(r);break;case"COMMAND":t.handleCommand(r);break;case"READY":t.handleReadyCallback();break;default:f('Unrecognized message cannot be processed: "%s".',a)}},postMessage:function(e,t){var n=(this||v).port,a={message:e};t&&(a.data=t);try{n&&n.postMessage(a)}catch(e){}return a},goToMode:function(e){var t=this||v,n=t.props||v,a=t.getFrame(),r=t.div,o=n.aspectRatio,s=n.width,i=n.height;if(a&&r)switch(e){case"resize-to-content":l.css(a,"width:100%;height:100%"),l.css(r,"");break;case"aspect-ratio":try{l.css(a,"position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%;"),l.css(r,"padding-top: ".concat(100*o,"%"))}catch(e){}break;case"static-size":try{var c="width:".concat(s,";height:").concat(i);l.css(a,c),l.css(r,c)}catch(e){}}},handleSubscribe:function(e){var t=this||v,n=e.event,a=e.throttle||0,r=t.events||{},o=r[n];if(n)return o?o.count+=1:r[n]=o={count:1,throttle:a},1===o.count?(f('Attaching new event "%s" with throttle of %dms.',n,a),void t.attachEvent(n,a)):a<o.throttle?(f('Lowering throttle of "%s" to %dms from %dms.',n,a,o.throttle),t.detachEvent(n),void t.attachEvent(n,a)):void 0},handleUnsubscribe:function(e){var t=this||v,n=(t.events||{})[e];n&&(n.count-=1,n.count<=0&&t.detachEvent(e))},handleResize:function(e){var t,n=this||v,a=(e||v).height,r=n.div,o=n.getFrame();if(r&&o)try{t="width: 100%;height: ".concat(a,"px;"),l.css(r,t),l.css(o,t)}catch(e){}},handleCommand:function(e){var t,n=this||v,a=(n.props||v).commands||v,r=e||v,o=r.messageId,s=r.commandName,i=r.params,c=a[s];if(f('Handling command "%s".',s),c&&p(c)){try{t=c(i)}catch(e){return}o&&Promise.resolve(t).then((function(e){f('Send back ack to command "%s".',s),n.postMessage("COMMAND_ACK",{messageId:o,params:e})}))}},handleReadyCallback:function(){var e=((this||v).props||v).onReady||null;e&&w(e)},attachEvent:function(e,t){var n,a=this||v,r="attach_".concat(e),o=(a.props||v).events||v,s=a.disposers||{},i=a[r],c=o[e];if(n=function(n){a.postMessage("EVENT",{name:e,throttle:t,params:n})},t&&t>0&&(n=u(n,t)),!p(i)||s[r])if(!p(c)||s[e]);else try{s[e]={fn:c(n),throttle:t}}catch(e){}else s[e]={fn:i(n),throttle:t}},detachEvent:function(e){var t=(this||v).disposers||{},n=t[e];if(n)try{n.fn(),delete t[e]}catch(e){}},attach_scroll:function(e){var t=this||v,n=l.view();function a(){var n=t.getFrame(),a=M(n),r=l.rect(n);e(c({},r,a))}return l.attach(n,A,a),function(){l.detach(n,A,a)}},attach_resize:function(e){var t=l.winRect,n=l.view();function a(){var n=t(),a={};a.w=n.w,a.h=n.h,e(a)}return l.attach(n,E,a),l.attach(n,k,a),function(){l.detach(n,E,a),l.detach(n,k,a)}},buildName:function(e){var t,n=(this||v).props||v,a=n.content||v,r=n.flags||v,o=c({},a),s="";o.html||(o.html=""),t="<script>".concat(m," && ").concat(m,"();<\/script>"),o.html=t+o.html;try{d.empty(r)||(o.flags=r,r.escapeHTML&&(o.html=d.es(o.html))),o.id=e,s=btoa(JSON.stringify(o))}catch(e){}return s},getFrame:function(){var e=(this||v).div;return e?g(l.tags("iframe",e)):null},getMode:function(){return((this||v).state||v).mode},getFrameOrigin:function(){return((this||v).state||v).frameOrigin||""},render:function(){var e=this||v,t=e.props||v,n=e.state||v,r=t.ariaLabel,o=n.mounted,i=n.name,c=e.setDOM,d=s("SafeFrame",t.className),l=void 0,h=t.lazy||"lazy"===t.loading?"lazy":"eager";if(o){var u=t.src,f=n.id,m=!1!==t.allowFullScreen,g=t.sandbox;l={__html:"<iframe ".concat(f?'id="'.concat(f,'"'):"",' name="').concat(i,'" src="').concat(u,'" scrolling="no" ').concat(m?"allowFullscreen":""," ").concat(g?'sandbox="'.concat(g,'"'):"",' loading="').concat(h,'" style="width:100%;height:100%;" allowtransparency frameborder=0 marginwidth=0 marginheight=0 hspace=0 vspace=0 referrerpolicy="origin"></iframe>')}}return a.jsx("div",{ref:c,"aria-label":r,className:d,dangerouslySetInnerHTML:l})}});O.defaultProps={mode:"resize-to-content",aspectRatio:9/16,width:"100%",height:"100%"},O.propTypes={mode:o.oneOf(["resize-to-content","aspect-ratio","static-size"]),aspectRatio:o.number,width:o.string,height:o.string,commands:o.object,events:o.object,src:o.string,id:o.string,content:o.shape({html:o.string.isRequired,frameID:o.string.isRequired,meta:o.shape({selector:o.string})}),flags:o.shape({escapeHTML:o.bool}),ariaLabel:o.string,className:o.string},e.exports=O},50629:(e,t)=>{t.SAFEFRAME_CALLBACK="window.__callbackSafeframe"},10801:(e,t,n)=>{var a=n(84486),r=n(50239),o=r.idxOf,s=r.isAry,i=r.emptyObj,c=r.FALSE,d=r.TRUE;e.exports=function(e,t,n){var r,l=t||"",h=(n||i)[e];return h&&(s(h,d)?a(h,(function(e){var t=e||i;if(-1!==o(l,t.key))return r=t.value,c})):r=h.value),r}},54800:(e,t,n)=>{var a=n(13311),r=n(50239),o=r.cbool,s=r.idxOf,i=r.emptyObj;e.exports=function(e,t,n,r){var c=(r||i)[e]||i;if(o(a(c[t],(function(e){return-1!==s(n,e)}))))return n}},67247:(e,t,n)=>{"use strict";n.r(t)}}]);