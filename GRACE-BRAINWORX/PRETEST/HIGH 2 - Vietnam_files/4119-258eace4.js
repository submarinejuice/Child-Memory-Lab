(self.webpackChunknatgeo=self.webpackChunknatgeo||[]).push([[4119],{47992:(e,t,i)=>{var n,r=i(85893),s=i(67294),c=i(3896),o=i(27361),a=i(45697),p=i(50239),u=i(84967),l=i(5902),m=i(36238),d=p.cbool,f=p.empty,v=p.emptyAry,h=p.emptyObj,k=p.isFunc,S=p.isNum,g=p.FALSE,y=p.NULL,b=p.TRUE,A=u.attr,B=u.docScroll,L=u.rAF,T=u.qsa,I="ArticleStickiness__Sticky-Element--fade-in",x="ArticleStickiness--nav-is-sticky",M="article_ads_inserted",_="data-bumper-index",E="up",O="down",U="NAV_IS_STICKY",C="NAV_NOT_STICKY",N="stickyElementRef.current",P="stickyParentRef.current";function H(e){return e&&2===e.length&&k(e[0])&&k(e[1])}i(64774),(n=c({stickyParentRef:s.createRef(),stickyElementRef:s.createRef(),componentDidMount:function(){var e=this||h,t=e.formModel,i=u.view();e.mounted=b,t(),i.addEventListener("DOMContentLoaded",(function(){var t=(e&&e.bottomActiveBumperOffset||0)-(e&&e.topActiveBumperOffset||0);l.emit("article_rendered",t)}),{once:b}),l.on(M,(function(){e.mounted&&(e.blockUpdates=b,t())}))},componentWillUnmount:function(){var e=this||h;e.mounted=g,e.cancelListeners()},getInitialState:function(){var e=this||h;return e.blockUpdates=g,e.bumperModel=[],e.bumperModelLength=0,e.failedJumpAttempts=0,e.mounted=g,e.queryingProblemDetected=g,e.stickySectionIsVisible=g,e.wideLeadisPresent=g,e.updateInterval=y,e.activeBumpersIndex=y,e.topActiveBumperOffset=y,e.bottomActiveBumperOffset=y,e.stickyElementHeight=280,{fitsCurrentSpace:g,stickySectionHeight:250,stickySectionTop:20}},render:function(){var e=this||h,t=e.props||h,i=e.state||h,n=t.children,s=i.fitsCurrentSpace,c=i.stickySectionTop,o=T(".TermList",b)?280:i.stickySectionHeight,a={height:"".concat(o,"px"),top:"".concat(c,"px")};return r.jsx("div",{className:"ArticleStickiness",ref:e.stickyParentRef,children:r.jsx(m,{className:"ArticleStickiness__Sticky-Section",style:a,onChange:e.onIntersectionUpdate,children:r.jsx("div",{className:"ArticleStickiness__Offset-Manager",children:r.jsx("div",{className:"ArticleStickiness__Sticky-Element ArticleStickiness__Sticky-Element--fade-in",ref:e.stickyElementRef,children:s&&n})})})})},displayName:"ArticleStickiness",attemptToJump:function(e){for(var t=this||h,i=g,n=e===E,r=n?t.activeBumpersIndex-1:t.activeBumpersIndex+1;r>-1&&r<t.bumperModelLength;){if(t.evaluateJumpSection(r)){i=b;break}r+=n?-1:1}i&&t.jump(r)},cancelListeners:function(){var e=this||h;e.updateInterval&&clearInterval(e.updateInterval),l.off(U),l.off(C),l.off(M)},detectSponsorBanner:function(){var e=T(".SponsorBanner")||v;return d(e.length)},evaluateJumpSection:function(e){var t=this||h,i=t.bumperModel[e];if(H(i)){var n=i[0]();if(i[1]()-n>t.stickyElementHeight+0)return b}return g},formatBumper:function(e,t,i){var n=this||h,r=e||h,s=i||g,c="[".concat(_,"='").concat(t,"']");return s||f(r)||A(r,_,t),function(){var e=n.recheckDOMNode(c),i=0;return e?(i+=e.offsetTop,i+=0===t?s?e.clientHeight-20:20:s?e.clientHeight+20:-20):y}},formModel:function(){var e,t=this||h,i=t.props||h,n=t.fitsCurrentSpace,r=t.formatBumper,s=[],c=T("[".concat(_,"]")),a=c.length,p=T(i.inlineQuery,g),u=p.length,l=o(t,P);if(n&&t.setState({fitsCurrentSpace:g}),a){t.bumperModel=[],t.bumperModelLength=0,t.cancelListeners();for(var m=0;m<a;m++){var d=c[m];A(d,_,null)}}if(s.push(r(l,0)),t.wideLeadisPresent=g,u)for(var f=0;f<u;++f){var v=p[f]||h,k=v.classList||h,S=f+1;0===f&&k.contains("ArticleBodyTile__Lead")&&(t.wideLeadisPresent=b),s.push(r(v,S),r(v,S,b))}if(s.push(r(l,0,b)),!(e=s.length)||s%2==1)return g;for(var y=t.wideLeadisPresent?2:0;y<e;y+=2)t.bumperModel.push([s[y],s[y+1]]);t.bumperModelLength=t.bumperModel.length,t.activeBumpersIndex=0,t.setListeners()},jump:function(e){var t=this||h,i=o(t,N,h).classList||h;S(e)&&k(i.remove)&&(i.remove(I),L((function(){t.mounted&&i.add(I)})),t.activeBumpersIndex=e,t.periodicUpdates())},toggleExtraTopSpace:function(e){var t=e||g,i=o(this||h,P);t?i.classList.add(x):i.classList.remove(x)},periodicUpdates:function(){var e,t,i,n,r,s,c,a=this||h,p=(a.props||h).setTimeoutBackup||b,u=a.state||h,l=u.fitsCurrentSpace,m=u.stickySectionHeight,d=u.stickySectionTop,f=a.activeBumpersIndex,v=a.bumperModel,k=o(a,N),A=v&&a.bumperModelLength>f&&v[f],L=a.stickyElementHeight;if(k){var T=k.clientHeight;T>280&&(a.stickyElementHeight=L=T)}if(!a.blockUpdates&&H(A)){if(n=A[0](),r=A[1](),n===y||r===y)return g;if(a.topActiveBumperOffset=n,a.bottomActiveBumperOffset=r,L>(s=a.bottomActiveBumperOffset-a.topActiveBumperOffset)){var I=a.activeBumpersIndex===a.bumperModelLength-1;a.failedJumpAttempts+=1,a.failedJumpAttempts<6?a.attemptToJump(I?E:O):l&&a.setState({fitsCurrentSpace:g})}else a.topActiveBumperOffset===d&&s===m||(a.failedJumpAttempts=0,a.setState({fitsCurrentSpace:b,stickySectionTop:a.topActiveBumperOffset,stickySectionHeight:s}),!a.stickySectionIsVisible&&p&&setTimeout((function(){a.mounted&&!a.stickySectionIsVisible&&(t=B()||h,c=t.y,S(c)&&(i=c<a.topActiveBumperOffset,e=i?E:O,a.attemptToJump(e)))}),200))}},onIntersectionUpdate:function(e,t){var i,n=this||h;if(n.stickySectionIsVisible=e,n.blockUpdates)return g;e||((i=o(t,"boundingClientRect.top",0))>0?n.attemptToJump(E):i<=0&&n.attemptToJump(O))},recheckDOMNode:function(e){var t=this||h,i=T(e,b);return i&&0!==i.length?(t.queryingProblemDetected=g,i):t.queryingProblemDetected?void 0:(t.queryingProblemDetected=b,t.blockUpdates=b,t.formModel(),y)},setListeners:function(){var e=this||h;e.cancelListeners(),e.blockUpdates=g,e.periodicUpdates(),e.updateInterval=setInterval((function(){e.periodicUpdates()}),3e3),e.detectSponsorBanner()?e.toggleExtraTopSpace(b):(l.on(U,(function(){e.toggleExtraTopSpace(b)})),l.on(C,(function(){e.toggleExtraTopSpace(g)})))}})).propTypes={inlineQuery:a.string,setTimeoutBackup:a.bool},n.defaultProps={inlineQuery:".InsertedAd",setTimeoutBackup:b},e.exports=n},24119:(e,t,i)=>{e.exports=i(47992)},64774:(e,t,i)=>{"use strict";i.r(t)}}]);